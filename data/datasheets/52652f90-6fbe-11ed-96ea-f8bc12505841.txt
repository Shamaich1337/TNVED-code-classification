[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': "Give me information about the component of AD9954YSVZ-REEL7 production of ANALOG DEVICES from the text: 400 MSPS, 14-Bit, 1.8 V CMOS,\nDirect Digital Synthesizer\nData Sheet AD9954\n \n Rev. C  Document Feedback \nInformation furnished by Analog Devices is believed to be accurate and reliable. However, no \nresponsibility is assumed by Analog Devices for its use, nor for any infringements of patents or other \nrights of third parties that may result from its use. Specifications subject to change without notice. No license is granted by implication or otherwise under any patent or patent rights of Analog Devices. Trademarks and registered trademarks are the property of their respective owners.   \n \nOne Technology Way, P.O. Box 9106, Norwood, MA 02062-9106, U.S.A.\nTel: 781.329.4700 ©2003–2017 Analog Devices, Inc. All rights reserved. Technical Support  www.analog.com   FEATURES \n400 MSPS internal clock speed \nIntegrated 14-bit DAC Programmable phase/amplitude dithering 32-bit frequency tuning accuracy 14-bit phase tuning accuracy Phase noise better than –120 dBc/Hz  Excellent dynamic performance \n>80 dB narrowband SFDR  \nSerial input/output (I/O) control Ultrahigh speed analog comparator Automatic linear and nonlinear frequency sweeping  4 frequency/phase offset profiles 1.8 V power supply Software and hardware controlled power-down 48-lead TQFP Integrated 1024 word × 32-bit RAM PLL-based REFCLK multiplier Internal oscillator, can be driven by a single crystal Phase modulation capability Multichip synchronization  \nAPPLICATIONS \nAgile LO frequency synthesis \nProgrammable clock generators \nFM chirp source for radar and scanning systems \nAutomotive radars Test and measurement equipment Acousto-optic device drivers GENERAL DESCRIPTION \nThe AD9954 is a direct digital synthesizer (DDS) that uses \nadvanced technology, coupled with an internal high speed, high \nperformance DAC to form a complete, digitally programmable, high frequency synthesizer capable of generating a frequency-agile analog output sinusoidal waveform at up to 160 MHz.  The AD9954 enables fast frequency hopping coupled with fine \ntuning of both frequency (0.01 Hz or better) and phase (0.022° \ngranularity).  \nThe AD9954 is programmed via a high speed serial I/O port. \nThe device includes static RAM to support flexible frequency sweep capability in several modes, plus a user-defined linear sweep mode of operation. Also included is an on-chip high speed comparator for applications requiring a square wave \noutput. An on-chip oscillator and PLL circuitry provide users \nwith multiple approaches to generate the device’s system clock. \nThe AD9954 is specified to operate over the extended industrial \ntemperature range (see Table 2). \nBASIC BLOCK DIAGRAM \nCOMPARATOR400MSPS\nDDS CORE14-BIT\nDAC\nREF CLOCK\nINPUT CIRCUITRYTIMING AND\nCONTROLDIGITA L\nSINE\nWAVE\nUSER INTERFACEAD9954\n03374-038 \nFigure 1.  \n \nAD9954 Data Sheet  \nRev. C | Page 2 of 40 TABLE OF CONTENTS  \nFeatures  .............................................................................................. 1  \nApplications  ....................................................................................... 1  \nGeneral Description  ......................................................................... 1  \nBasic  Block Diagram  ........................................................................ 1  \nRevision History  ............................................................................... 2  \nFunctional Block Diagram  .............................................................. 3  \nElectrical Specifications  ................................................................... 4  \nAbsolute Maximum Ratings  ............................................................ 7  \nExplanation of Test Levels  ........................................................... 7  \nESD Caution  .................................................................................. 7  \nPin Configuration and Function Descriptions  ............................. 8  \nTypical Performance Characteristics  ........................................... 10 \nTheory of Operati on ...................................................................... 13 \nComponent Blocks  ..................................................................... 13 \nModes of Operation  ................................................................... 16 \nSynchronization— Register Updates (I/O UPDATE)  ............ 21 \nSerial Port Operation  ................................................................. 23 Serial Interface Port Pin Descriptions  ..................................... 24 \nMSB/LSB Transfers  .................................................................... 24 \nRAM I/O via Serial Port  ............................................................ 24 \nInstruction Byte  .......................................................................... 25 \nRegister Maps and Descriptions  ............................................... 25 \nControl Register Bit Descriptions ............................................ 29 \nOther Register Descriptions  ..................................................... 31 \nLayout Considerations  ............................................................... 32 \nDetailed Programming Examples  ................................................ 33 \nSingle -Tone Mode  ...................................................................... 33 \nLinear Sweep Mode  .................................................................... 33 \nRAM Mode .................................................................................. 33 \nSuggested Application Circuits  ..................................................... 35 \nEvaluation Board Schematics ........................................................ 36 \nOutline Dimensions  ....................................................................... 39 \nOrdering Guide  .......................................................................... 39 \nREVISION HISTORY \n2/2017 —Rev. B to Rev. C \nChanges to Features Section ............................................................ 1 \n5/2009 —Re\nv. A to Rev. B  \nChanges to Figure 29 and Figure 30 ............................................. 24 \nChanges to Table 12  ........................................................................ 26 \nChanges to Figure 34  ...................................................................... 35 \nUpdated Outline Dimensions  ....................................................... 39 \nChanges to Ordering Guide  .......................................................... 39 \n1/2007— Rev. 0 to Rev. A  \nChanges to Layout  .............................................................. Universal  \nChanges to Features , General Description, and Figure 1 ............ 1 \nChanges to Figure 2  .......................................................................... 3 \nChanges to Table 1  ............................................................................ 4 \nChanges to Table 4  ............................................................................ 8 \nChanges to Figure 5 to Figure 10 .................................................. 10 \nChanges to Figure 1 2 ...................................................................... 11 \nChanges to Figure 1 7 to Figure 1 8 Captions  ............................... 12 \nDeleted Figure 19; Renumbered Sequentially ............................. 12 \nAdded Table 5 ; Renumbered Sequentially  .................................. 13 \nChanges to Component Block Section  and Table 6 ................... 13 \nChanges to Figure 20  ...................................................................... 15 Changes to Modes of Operation Section and Table 8  ............... 16 \nChange s to Table 9  .......................................................................... 17 \nChanges to Synchronization; Register Updates (I/O UPDATE) \nSection  and Figure 24 ..................................................................... 21 \nChanges to Serial Port Operation Section  .................................. 23 \nChanges to Serial Interface Port Pin Description Section , \nMSB/LSB Transfers Section, and RAM I/O Via Serial Port Section  .............................................................................................. 24 \nInserted Figure 2 9 and Figure 30 ; Renumbered Sequentially  .. 24 \nChanges to Instruction Byte Section , Register Maps and \nDescriptions Section, and Table 12  .............................................. 25 \nChanges to Table 13  ....................................................................... 26 \nChanges to Table 14  ....................................................................... 28 \nAdded Single- Tone Mode Section , Linear Sweep Mode Section , \nTable 15, and RAM Mode Section  ............................................... 33 \nAdded, and Table 16  ....................................................................... 34 \nInserted Figure 3 5 ........................................................................... 36 \nInserted Figure 3 6 ........................................................................... 37 \nInserted Figure 3 7 ........................................................................... 38 \nUpdated Outline Dimensions  ....................................................... 39 \nChanges to Ordering Guide  .......................................................... 39 \n10/2003— Revision 0: Initial Version  \nData Sheet AD9954\n \nRev. C | Page 3 of 40 FUNCTIONAL BLOCK DIAGRAM \n \nFREQUENCY\nACCUMULATOR\nSTATIC RAM\n1024 × 32COS(X)\nCONTROL REGISTERS\nOSCILLATOR/BUFFERCOMPARATORSYNC\nENABLEI/O UPDATEDAC_RSETDDS CORE\nPHASE\nOFFSETPHASE\nACCUMULATOR\nZ–1\nZ–1IOUT\nIOUT\nOSK\nPWRDWNCTL\nCOMP_OUTCOMP_IN\nCOMP_IN\nREFCLKREFCLK\nCRYSTAL OUT I/O PORT PS<1:0>RAM DATA\n<31:18>DDS\nCLOCKRAM\nDATADELTA FREQUENCY TUNING WORD\nFREQUENCY\nTUNING WORDRAM DATA\nDDS CLOCKDELTA FREQUENCY RAMP RATE\nCLEAR\nPHASE\nACCUMULATORDAC\nMUXSYSTEM\nCLOCK\nSYSTEM\nCLOCKSYNC_IN\nSYNC_CLK\nRESETTIMING AND CONTROL LOGIC\n4× TO 20×\nCLOCK\nMULTIPLIER÷4AD9954\n32 32\n3214\n14\n1432RAM ADDRESS\n10\nRAM CONTROL\n319 14\n03232\nM\nU\nX\nM\nU\nXM\nU\nX\n03374-001θ\n \nFigure 2.  \n \nAD9954 Data Sheet  \nRev. C | Page 4 of 40 ELECTRICAL SPECIFICA TIONS \nUnless otherwise no ted, AVDD,  DVDD  = 1.8 V ± 5%, DV DD_I/O = 3.3 V ± 5%, R SET = 3.92 kΩ, external reference clock frequency = \n400 MHz. DAC output must be referenced to AVDD, not AGND.  \nTable 1. \nParameter  Temp  Test  \nLevel  Min  Typ  Max  Unit  \nREF CLOCK INPUT CHARACTERISTICS  \nFrequency Range  \nREFCLK Multiplier Disabled  Full VI 1 400 MH z \nREFCLK Multiplier Enabled at 4×  Full VI 20 100 MH z \nREFCLK Multiplier Enabled at 20×  Full VI 4 20 MH z \nCrystal Oscillator Operating Freq uency Full IV 20 30 MH z \nInput Capacitance 25°C  V 3 pF \nInput Impedance 25°C  V 1. 5 kΩ \nDuty Cycle  25°C  V 50 % \nDuty Cycle with REFCLK Multiplier Enabled  25°C  V 35 65 % \nREFCLK Input Voltage Swing  Full IV 100 100 0 mV p -p \nDAC OUTPUT CHARACTERISTICS  \nFull-Scale Output Current  25°C  5 10 15 mA \nGain Error  25°C  I –10 + 10 %FS  \nOutput Offset  25°C  I 0. 6 µA \nDifferential Nonlinearity  25°C  V 1 LS B \nIntegral Nonlinearity  25°C  V 2 LS B \nOutput Capacitance  25°C  V 5 pF \nResidual Phase Noise @ 1 kHz Offset, 40 MHz A OUT \nREFCLK Multiplier Enabled @ 20× 25°C  V –105 d Bc/Hz  \nREFCLK Multiplier Enabled @ 4×  25°C  V –115 d Bc/Hz  \nREFCLK Multiplier Disabled  25°C  V –132 d Bc/Hz  \nVoltage Compliance Range  25°C  I AVDD – 0.5 A VDD + 0.5  V \nWideband SFDR  \n1 MHz to 10 MHz Analog Out  25°C  V 73 dB c \n10 MHz to 40 MHz Analog Out  25°C  V 67 dB c \n40 MHz to 80 MHz  Analog Out  25°C  V 62 dB c \n80 MHz to 120 MHz Analog Out  25°C  V 58 dB c \n120 MHz to 160 MHz Analog Out  25°C  V 52 dB c \nNarrow -Band SFDR  \n40 MHz Analog Out (±1 MHz)  25°C  V 87 dB c \n40 MHz Analog Out (±250 kHz)  25°C  V 89 dB c \n40 MHz Analog Out (±50 kHz)  25°C  V 91 dB c \n40 MHz Analog Out (±10 kHz) 25°C  V 93 dB c \n80 MHz Analog Out (±1 MHz)  25°C  V 85 dB c \n80 MHz Analog Out (±250 kHz)  25°C  V 87 dB c \n80 MHz Analog Out (±50 kHz)  25°C  V 89 dB c \n80 MHz Analog Out (±10 kHz)  25°C  V 91 dB c \n120 MHz Analog Out (±1 MHz)  25°C  V 83 dB c \n120 MHz Analog Out (±250 kHz)  25°C  V 85 dB c \n120 MHz Analog Out (±50 kHz)  25°C  V 87 dBc \n120 MHz Analog Out (±10 kHz)  25°C  V 89 dB c \n160 MHz Analog Out (±1 MHz)  25°C  V 81 dB c \n160 MHz Analog Out (±250 kHz)  25°C  V 83 dB c \n160 MHz Analog Out (±50 kHz)  25°C  V 85 dB c \n160 MHz Analog Out (±10 kHz)  25°C  V 87 dBc \nData Sheet  AD9954  \n \nRev. C | Page 5  of 40 Parameter  Temp  Test  \nLevel  Min  Typ  Max  Unit  \nCOMPARATOR INPUT CHARACTERISTICS        \nInput Capacitance  25°C  V  3  pF \nInput Resistance  25°C  IV  500  kΩ \nInput Current  25°C  I  ±12   µA \nHysteresis  25°C  IV 30  45 mV \nCOMPARATOR OUTPUT CHARACTERISTICS        \nLogic 1 Voltage, High -Z Load  Full VI 1.6   V \nLogic 0 Voltage, High -Z Load  Full VI   0.4 V \nPropagation Delay  25°C  IV  3  ns \nOutput Duty- Cycle Error 25°C  IV  ±5  % \nRise/Fall Time, 5 pF Load  25°C  IV   1 ns \nToggle Rate, High -Z Load  25°C  IV 200   MHz  \nOutput Jitter1 25°C  IV   1 ps rms  \nCOMPARATOR NARROW -BAND SFDR        \n10 MHz to 160 MHz F OUT       \nMeasured over a 1  MHz BW  25°C  V  80  dBc \nMeasured over a 250  kHz BW  25°C  V  85  dBc \nMeasured over a 50  kHz BW  25°C  V  90  dBc \nMeasured over a 10  Hz BW  25°C  V  95  dBc \nTIMING CHARACTERISTICS        \nSerial Control Bus        \nMaximum Frequency  Full IV  25  Mbps  \nMinimum Clock Pulse Width Low  Full IV 7   ns \nMinimum Clock Pulse Width High  Full IV 7   ns \nMaximum Clock Rise/Fall Time  Full IV  2  ns \nMinimum Data Setup Time DVDD_I/O = 3.3 V  Full IV 3   ns \nMinimum Data Setup Time DVDD_I/O = 1.8 V  Full IV 5   ns \nMinimum Data Hold Time  Full IV 0   ns \nMaximum Data Valid Time  Full IV  25  ns \nWake -Up Time2 Full IV  1  ms \nMinimum Reset Pulse Width High  Full IV 5   SYSCLK  \ncycles3 \nI/O UPDATE, PS0, PS1 to SYNC _CLK Setup Time , DVDD_I/O = 3.3 V  Full I 4   ns \nI/O UPDATE, PS0, PS1 to SYNC _CLK Setup Time , DVDD_I/O = 1.8 V  Full I 6   ns \nI/O UPDATE, PS0, PS1 to SYNC _CLK Hold Time  Full I 0   ns \nLatency        \nI/O UPDATE to Frequency Change Prop Delay  25°C  IV 24   SYSCLK  \ncycles  \nI/O UPDATE to Phase Offset Change Prop Delay  25°C  IV 24   SYSCLK  \ncycles  \nI/O UPDATE to Amplitude Change Prop Delay  25°C  IV 16   SYSCLK  \ncycles  \nPS0, PS1 to RAM Driven Frequency Change Prop Delay  25°C  IV 28   SYSCLK  \ncycles  \nPS0, PS1 to RAM Driven Phase Change Prop Delay  25°C  IV 28   SYSCLK  \ncycles  \nPS0 to Linear Frequency Sweep Prop Delay  25°C  IV 28   SYSCLK  \ncycles  \n \n \n \n         \nAD9954  Data Sheet  \n \nRev. C | Page 6  of 40 Parameter  Temp  Test  \nLevel  Min  Typ  Max  Unit  \nCMOS LOGIC INPUTS        \nLogic 1 Voltage @ DVDD_I/O (Pin 43) = 1.8 V  25°C  I 1.25    V \nLogic 0 Voltage @ DVDD_I/O (Pin 43) = 1.8 V  25°C  I   0.6 V \nLogic 1 Voltage @ DVDD_I/O (Pin 43) = 3.3 V  25°C  I 2.2   V \nLogic 0 Voltage @ DVDD_I/O (Pin 43) = 3.3 V  25°C  I   0.8 V \nLogic 1 Current  25°C  V  3 12 µA \nLogic 0 Current  25°C  V   12 µA \nInput Capacitance 25°C  V  2  pF \nCMOS LOGIC OUTPUTS (1 mA Load) DVDD_I/O = 1.8 V        \nLogic 1 Voltage  25°C  I 1.35    V \nLogic 0 Voltage  25°C  I   0.4 V \nCMOS LOGIC OUTPUTS (1 mA Load) DVDD_I/O = 3.3 V        \nLogic 1 Voltage  25°C  I 2.8   V \nLogic 0 Voltage  25°C  I   0.4 V \nPOWER CONSUMPTION (AVDD = DVDD = 1.8 V)        \nSingle -Tone Mode (Comparator Off)  25°C  I  162 171 mW  \nWith RAM or Linear Sweep Enabled  25°C  I  175 190 mW  \nWith Comparator Enabled  25°C  I  180 190 mW  \nWith RAM and Comparator Enabled  25°C  I  198 220 mW  \nRapid Power -Down Mode  25°C  I  150 160 mW  \nFull-Sleep Mode  25°C  I  20 27 mW  \nSYNCHRONIZATION FUNCTION4       \nMaximum S ync Clock Rate (DVDD_I/O = 1.8 V)  25°C  VI 62.5    MHz  \nMaximum S ync Clock Rate (DVDD_I/O = 3.3 V)  25°C  VI 100   MHz  \nSYNC_CLK Alignment Resolution5 25°C  V  ±1  SYSCLK  \ncycles  \n \n1 Represents the cycle -to-cycle residual jitter from the comparator alone.  \n2 Wake-up time refers to the recovery from analog power- down modes (see section on Power- Down Modes of Operation). The primary limiting factor is the settling time of the PLL \nmultipl ier in the reference circuitry. The wake- up time assumes there is no capacitor on DAC BP and that the recommended PLL loop filter values are used.  \n3 SYSCLK cycle refers to the clock frequency used on -chip to drive the DDS  core .  This is equal to the freque ncy of the reference source times the value of the PLL -based \nreference clock multiplier . \n4 SYNC_CLK = ¼ SYSCLK rate .  Be sure the high s peed sync enable bit, CFR2<11>, is programmed appropriately . \n5 This parameter indicates that the digital synchronization  feature cannot compensate for  phase delays (timing skew) between system clock rising edges. If the system \nclock edges are aligned, the synchronization function should not increase the skew between the two edges . \n \nData Sheet  AD9954  \n \nRev. C | Page 7  of 40 ABSOLUTE MAXIMUM RAT INGS  \nTable 2.  \nParameter  Rating  \nMaximum Junction Temperature  150°C  \nDVDD_I/O (Pin 43)  4 V \nAVDD, DVDD  2 V \nDigital Input Voltage (DVDD_I/O = 3.3 V)  –0.7 V to +5.25 V  \nDigital Input Voltage (DVDD_I/O = 1.8 V)  –0.7 V to +2.2 V  \nDigital Output Current  5 mA  \nStorage Temperature Range  –65°C to +150°C  \nOperating Temperature  Range  –40°C to +105°C  \nLead Temperature (10 sec Soldering)  300°C  \nθJA 38°C/W  \nθJC 15°C/W \nStresses at or above those listed under Absolute Maximum \nRatings may cause permanent damage to the product. This is a stress rating only; functional operation of the product at these or any other conditions above those indicated in the operational section of this specification  is not implied. Operation beyond \nthe maximum operating conditions for extended periods may affect product reliability.  EXPLANATION OF TEST LEVELS  \nI 100% production tes ted. \nII 100% production test ed at 25°C and sample tested at  \nspecified temperatur es.  \nIII Sample tested o nly. \nIV Parameter is guaranteed by design and characterization  \ntesting.  \nV Parameter is a typical value only.  \nVI Devices are 100% production tested at 25°C and  \nguaranteed by design and characterization testing  \nfor industrial operating  temperature range.  \n \nESD CAUTION  \n \n  \n \n \n \nINPUTDVDD_I/O IOUT AVDD IOUT\nAVOID OVERDRIVING\nDIGITAL INPUTS.\nFORWARD BIASING\nESD DIODES MAY\nCOUPLE DIGITAL NOISE\nONTO POWER PINS.DIGITAL\nINPUTS\nMUST TERMINATE\nOUTPUTS TO AVDD FOR\nCURRENT FLOW. DO\nNOT EXCEED THE\nOUTPUT VOLTAGE\nCOMPLIANCE RATING.DIGITAL\nOUTPUTSCOMPARATOR\nOUTPUTCOMPARATOR\nINPUTS\nCOMP IN COMP IN\n03374-032 \nFigure 3. Equivalent Input and Output Circuits  \nAD9954  Data Sheet  \n \nRev. C | Page 8  of 40 PIN CONFIGURATION AND FUNCTION DESCRIPTIONS \n \nCS\n03374-0023134DVDD\n33DGND\n32AGND\n29AVDD30COMP_INCOMP_IN35PWRDWNCTL36RESET\n28COMP_OUT\n27AVDD\n26AGND\n25AVDDPIN 1\nAD9954\nTOP VIEW\n(Not to Scale)\n13\nAVDD14\nAGND15\nAGND16\nAVDD17\nAGND18\nAVDD19\nAVDD20\nIOUT21\nIOUT22\nAGND23\nDACBP24\nDAC_R SET48\nPS1\n47\nPS0\n46OSK\n45\nSYNC_CLK\n44\nSYNC_IN\n43\nDVDD_I/O\n42\nDGND\n41\nSDIO\n40\nSCLK\n3938\nSDO\n37\nIOSYNC\n2 DVDD\n3 DGND\n4 AVDD\n7 AGND6 AVDD5 AGND1 I/O UPDATE\n8 OSC/REFCLK\n9 OSC/REFCLK\n10 CRYSTAL OUT\n12 LOOP_FILTER11 CLKMODESELECT\n \nFigure 4. Pin Configuration  \nNote that the exposed paddle on the bottom of the package forms an electrical connection for the DAC and must be attached to  \nanalog ground. Note that Pin 43, DVDD_I/O, can be powered to 1.8 V or 3.3 V . The DVDD pins (Pin 2 and Pin 34) must be  \npowered to 1.8 V .  \n \nTable 3. Pin Function Descriptions  \nPin No.  Mnemonic  I/O Description  \n1 I/O UPDATE  I The rising edge transfers the contents of the internal buffer memory to the I/O registers.  \nSee Synchronization —Register Updates (I/O UPDATE)  section for details.  \n2, 34  DVDD I Digital Power Supply Pins (1.8 V).  \n3, 33, 42  DGND  I Digital Power Ground Pins.  \n4, 6, 13, 16,  \n18, 19, 25,  \n27, 29  AVDD  I Analog Power Supply Pins (1.8 V).  \n5, 7, 14, 15,  \n17, 22, 26, \n32 AGND  I Analog Power Ground Pins.  \n8 OSC /  REFCLK I Oscillator Input /Complementary Reference Clock . When the REFCLK port is operated in  \nsingle -ended mode, REFCLK  should be decoupled to AVDD with a 0.1 µF capacitor.  \n9 OSC/REFCLK  I Oscillator Input /Reference Clock . See Table 5 for details on the OSC/REFCLK operation.  \n10 CRYSTAL OUT  O Output of the Oscillator Section.  \n11 CLKMODESELECT  I Control Pin for the Oscillator Section (1.8 V logic only). See REFCLK Input  section for detailed  \ninstructions.  \n12 LOOP_FILTER  I This pin provides the connection for the external zero compensation network of the REFCLK  \nmultiplier’s PLL  loop filter. The network varies based on the multipl ication  value in the PLL loop.  \nSee Table 4 for details.  \n20 IOUT  O Complementa ry DAC Output. Should be biased through a resistor to AVDD, not AGND.  \n21 IOUT  O DAC Output. Should be biased through a resistor to AVDD, not AGND.  \n23 DACBP  I DAC Band Gap Decoupling Pin . A 0.1 μF capacitor to AGND is recommended . \n24 DAC_R SET I A resistor (3.92 kΩ nominal) connected from AGND to DAC_R SET establishes the reference  \ncurrent for the DAC. See equation in DAC Output  section.  \n28 COMP _OUT  O Comparator Output.  \n30 COMP_IN  I Comparator Input.  \nData Sheet  AD9954  \n \nRev. C | Page 9  of 40 Pin No.  Mnemonic  I/O Description  \n31 COMP_IN  I Comparator Complementary Input. \n35 PWRDWNCTL  I Input Pin Used as an External Power-Down Control (see Table 9 for details).  \n36 RESET  I Active High Hardware Reset Pin. Assertion of the RESET pin forces the AD9954 to the default  \nstate, as described in the right -hand column of Table 12, which is the I/O port register map.   \n37 IOSYNC  I Asynchronous Active High Reset of the Serial Port Controller. When high, the current I/O  \noperation is immediately terminated, enabling a new I/O operation to commence once  \nIOSYNC is returned low. If unused, ground this pin; do not allow this pin to float.  \n38 SDO  O See Serial Interface Port Pin Descriptio n section for details.  \n39 CS I See Serial Interface Port Pin Description  section for details.  \n40 SCLK  I See Serial Interface Port Pin Description  section for details.  \n41 SDIO  I/O See Serial Interface Port Pin Description  section f or details.  \n43 DVDD_I/O  I Digital Power Supply . This pin is for I/O cells only, 3.3 V.  \n44 SYNC_IN  I Input  Signal U sed to Synchronize M ultiple AD9954s. This input is connected to the SYNC_CLK  \noutput of a master AD9954.  \n45 SYNC_CLK  O Clock Output Pin that Serves as a Synchronizer for External Hardware.  \n46 OSK  I Input  Pin Us ed to C ontrol the D irection of the Shaped On -Off Keying Fu nction  When Programmed  \nfor Operation . OSK is synchronous to the SYNC_CLK pin. When OSK is disabled, this pin should  \nbe tie d to DGND.  \n47, 48  PS0, PS1  I Input Pins U sed to Select O ne of the Internal Phase/Frequency Pr ofiles. PS1  and PS0  are \nsynchronous  to the SYNC_CLK pin. Change on these pins triggers a transfer of the contents of  \nthe chosen  internal buffer memory to the I/O  registers (sends an internal I/O UPDATE).  \n<49>  AGND  I The Exposed Pa ddle on the B ottom of the Package . It is a ground connection for the DAC and  \nmust be  attached to AGND in any board layout.  \nAD9954  Data Sheet  \n \nRev. C | Page 10 of 40 TYPICAL PERFORMANCE CHARACTERISTICS \nCENTER 100MHz\n#RES BW 3kHz–100–90–80–70–60–50–40–30–20–100\nVBW 3kHzSPAN 200MHz\nSWEEP 55.56 s (401 PTS)W1 S2\nS3 FC\nAAREF 0dBm\nPEAK\nLOG\n10dB/ATTEN 10dB\n11R\n03374-016MKR1 101MHz\n–70.68dB\nMARKER\n101MHz\n–70.68dB\n \nFigure 5. fOUT = 1 MHz , fCLK = 400 MSPS, WBSFDR  \n \nCENTER 100MHz\n#RES BW 3kHz–100–90–80–70–60–50–40–30–20–100\nVBW 3kHzSPAN 200MHz\nSWEEP 55.56 s (401 PTS)W1 S2\nS3 FC\nAAREF 0dBm\nPEAK\nLOG\n10dB/ATTEN 10dB\n11R\n03374-017MKR1 90MHz\n–69.12dB\nMARKER\n90MHz\n–69.12dB\n \nFigure 6. fOUT = 10 MHz, f CLK = 400 MSPS, WBSFDR  \n \nCENTER 100MHz\n#RES BW 3kHz–100–90–80–70–60–50–40–30–20–100\nVBW 3kHzSPAN 200MHz\nSWEEP 55.56 s (401 PTS)W1 S2\nS3 FC\nAAREF 0dBm\nPEAK\nLOG\n10dB/ATTEN 10dB\n11R\n03374-018MKR1 80MHz\n–68.44dB\nMARKER\n80MHz\n–68.44dB\n \nFigure 7. fOUT = 40 MHz, f CLK = 400 MSPS, WBSFDR  \nCENTER 100MHz\n#RES BW 3kHz–100–90–80–70–60–50–40–30–20–100\nVBW 3kHzSPAN 200MHz\nSWEEP 55.56 s (401 PTS)W1 S2\nS3 FC\nAAREF 0dBm\nPEAK\nLOG\n10dB/ATTEN 10dB\n11R\n03374-019MKR1 160MHz\n–61.55dB\nMARKER\n160MHz\n–61.55dB\n \nFigure 8. fOUT = 80 MHz , fCLK = 400 MSPS, WBSFDR  \n \nCENTER 100MHz\n#RES BW 3kHz–100–90–80–70–60–50–40–30–20–100\nVBW 3kHzSPAN 200MHz\nSWEEP 55.56 s (401 PTS)W1 S2\nS3 FC\nAAREF 0dBm\nPEAK\nLOG\n10dB/ATTEN 10dB\n11R\n03374-020MKR1 160MHz\n–56.2dB\nMARKER\n160MHz\n–56.2dB\n \nFigure 9 fOUT = 120 MHz, f CLK = 400 MSPS, WBSFDR  \n \nCENTER 100MHz\n#RES BW 3kHz–100–90–80–70–60–50–40–30–20–100\nVBW 3kHzSPAN 200MHz\nSWEEP 55.56 s (401 PTS)W1 S2\nS3 FC\nAAREF 0dBm\nPEAK\nLOG\n10dB/ATTEN 10dB\n11R\n03374-021MKR1 80MHz\n–53.17dB\nMARKER\n80MHz\n–53.17dB\n \nFigure 10. fOUT = 160 MHz, f CLK = 400 MSPS, WBSFDR  \nData Sheet  AD9954  \n \nRev. C | Page 11 of 40 \nCENTER 1.105MHz\n#RES BW 30Hz–100–90–80–70–60–50–40–30–20–100\nVBW 30HzSPAN 2MHz\nSWEEP 199.2 s (401 PTS)W1 S2\nS3 FC\nAA\nSTREF –4dBm\nPEAK\nLOG\n10dB/ATTEN 10dB 1\n03374-022MKR1 1.105MHz\n–5.679dBm\nMARKER\n1.105000MHz\n–5.679dBm\n \nFigure 11. fOUT = 1.1 MHz, f CLK = 400 MSPS, NBSFDR, ±1 MHz  \n \nCENTER 10MHz\n#RES BW 30Hz–100–90–80–70–60–50–40–30–20–100\nVBW 30HzSPAN 2MHz\nSWEEP 199.2 s (401 PTS)W1 S2\nS3 FC\nAAREF 0dBm\nPEAK\nLOG\n10dB/ATTEN 10dB\n11R\n03374-023MKR1 10MHz\n–93.01dB\nMARKER\n10MHz\n–93.01dB\n \nFigure 12. fOUT = 9.5 MHz, f CLK = 400 MSPS, NBSFDR, ±1 MHz  \n \nCENTER 39.9MHz\n#RES BW 30Hz–100–90–80–70–60–50–40–30–20–100\nVBW 30HzSPAN 2MHz\nSWEEP 199.2 s (401 PTS)W1 S2\nS3 FC\nAAREF 0dBm\nPEAK\nLOG\n10dB/ATTEN 10dB\n1\n03374-024MKR1 39.905MHz\n–5.347dBm\nMARKER\n39.905000MHz\n–5.347dBm\n \nFigure 13. fOUT = 39.9 MHz, f CLK = 400 MSPS, NBSFDR, ±1 MHz  \nCENTER 80.25MHz\n#RES BW 30Hz–100–90–80–70–60–50–40–30–20–100\nVBW 30HzSPAN 2MHz\nSWEEP 199.2 s (401 PTS)W1 S2\nS3 FC\nAA\nSTREF –4dBm\nPEAK\nLOG\n10dB/ATTEN 10dB 1\n03374-025MKR1 80.301MHz\n–6.318dBm\nMARKER\n80.301000MHz\n–6.318dBm\n \nFigure 14. fOUT = 80.3 MHz, f CLK = 400 MSPS, NBSFDR, ±1 MHz  \n \nCENTER 120.2MHz\n#RES BW 30Hz–100–90–80–70–60–50–40–30–20–100\nVBW 30HzSPAN 2MHz\nSWEEP 199.2 s (401 PTS)W1 S2\nS3 FC\nAA\nSTREF –4dBm\nPEAK\nLOG\n10dB/ATTEN 10dB 1\n03374-026MKR1 120.205MHz\n–6.825dBm\nMARKER\n120.205000MHz\n–6.825dBm\n \nFigure 15. fOUT = 120.2 MHz, f CLK = 400 MSPS, NBSFDR, ±1 MHz  \n \nCENTER 160.5MHz\n#RES BW 30Hz–100–90–80–70–60–50–40–30–20–100\nVBW 30HzSPAN 2MHz\nSWEEP 199.2 s (401 PTS)W1 S2\nS3 FC\nAA\nSTREF –4dBm\nPEAK\nLOG\n10dB/ATTEN 10dB1\n03374-027MKR1 600kHz\n–0.911dB\nCENTER\n160.5000000MHz\n \nFigure 16. fOUT = 160 MHz, f CLK = 400 MSPS, NBSFDR, ±1 MHz  \nAD9954  Data Sheet  \n \nRev. C | Page 12 of 40 \nf (Hz)L(f) (dBc/Hz)\n10–170–160–150–140–130–120–110–100–90–80–70–60–50–40–30–20–100\n1k 100 100k 1M 10k 10M\n03374-028\n \nFigure 17. Residual Phase Noise with f OUT = 159.5 MHz ,  \nfCLK = 400 MSPS ; PLL Bypassed (Green), PLL S et to 4 × (Red), and  \nPLL Set to 20×  (Blue)  \n10–170–160–150–140–130–120–110–100–90–80–70–60–50–40–30–20–100\n1k 100 100k 10k 1M\n03374-029\nf (Hz)L(f) (dBc/Hz)\n \nFigure 18. Residual Phase Noise with f OUT = 9.5 MHz , fCLK = 400 MSPS ; \nPLL Bypassed (Green), PLL S et to 4 × (Red), and PLL Set to 20×  (Blue)  \nREF2  200mV  500nsR2R1\nIT 10.0PS/PT –100PS M 500PS 20.0GS/S\nA CH1      708mV\n03374-030FALL (R1) = 396.4PS\nRISE(R2) = 464.3PS\n \nFigure 19. Comparator Rise and Fall Time at 160 MHz  \n \n \nData Sheet  AD9954  \n \nRev. C | Page 13 of 40 THEORY OF OPERATION \nCOMPONENT BLOCKS  \nREFCLK Input  \nThe AD9954 supports several methods for generating the \ninternal system clock. An on -chip oscillator circuit is available \nfor initiating the low frequency reference signal by connecting a \ncrystal to the clock input pins. The system clock can be genera ted \nusing an internal, PLL -based reference clock multiplier, allowing \nthe part to operate with a low frequency clock source while still \nproviding a high sample rate for the DDS and DAC. For best phase noise performance, a clean, stable clock with a high sl ew \nrate should be used to drive the REFCLK pin and bypass the multiplier.  \nThe available modes are configured using the CLKMODESELECT \npin, CFR1<4> and CFR2<7:3>. Note that the CLKMODESELECT \npin is a 1.8  V logic only and does not apply to 3.3  V logic. \nPulli ng CLKMODESELECT high enables the on -chip crystal \noscillator circuit. With the on -chip oscillator enabled, users of \nthe AD9954 connect an external crystal to the REFCLK and \nREFCLK  inputs to produce a low frequency reference clock ( see \nTable 1 for the crystal frequency range supported). The signal \ngenerated by the oscillator is buffered, and then delivered to the \nrest of the chip. This buffered signal is provided on the \nCRYSTAL OUT pin.  \nWhen the internal oscillator is disabled, an external oscillator \nmust provide the REFCLK and/or REFCLK  signals. For differential \noperation, these pins are driven with complementary  signals. For \nsingle -ended operation, a 0.1 µF capacitor should be connected \nbetween the unused pin and the analog power supply. With the \ncapacitor in place, the clock input pin bias voltage is 1.35 V . \nTable 5 summarizes the clock modes of operation. Note the PLL \nmultiplier is controlled via the CFR2<7:3> bits, independent of \nthe CFR1<4> bit.  \nClock Multiplier  \nAn on -board PLL allows multiplication of the REFCLK \nfrequency. The multiplication factor is set  using CFR2<7:3>. \nWhen programmed for values ranging from 0x04 to 0x14 (decimal 4 to 20), the PLL multiplies the REFCLK input frequency by the programmed value. The user must consider the specified maximum frequency for the PLL when programming . If \nthe multiplication factor  is changed, the user must allocate  time  \nto allow the PLL to lock (approximately 1  ms).  The PLL is bypassed by programming a value outside the range of 4 to 20 (decimal). When bypassed, the PLL is shut down to conserve power.  \nThe VCO in the PLL has a selectable frequency range. Use the VCO  \n range bit (CFR2<2>) to set the appropriate range.  \nThe PLL in the clock multiplier has a loop filter comprised  \nof on -chip components as well as external components. \nRecommended values for the external resistor/capacitor  \nare provided in Table 4. \nTable 4. External Loop Filter Components for Clock Multiplier  \nMultiply Value  Resistor Value  Capacitor Value (µF)  \n4× 0 Ω 0.1 \n10×  1 kΩ  0.1 \n20×  243 Ω  0.01  \n \nDAC Output  \nUnlike many DACs, the DAC output on the AD9954 is referenced  \nto AVDD, not AGND.   \nTwo complementary outputs provide a combined full -scale \noutput current (I OUT). Differential outputs reduce the amount of \ncommon -mode noise that m ay be present at the DAC output, \nresulting in a better signal- to-noise ratio. The full -scale current \nis controlled by means of an external resistor (R SET) connected \nbetween the DAC_R SET pin and the DAC ground  pin (Pin 49 , \nthe exposed paddle) . The full- scale current is proportional to \nthe resistor value by the equation  \n()Ω 39.19/OUT SET I R=  \nThe maximum full -scale output current of the combined  \nDAC outputs is 15 mA. Limiting the output to 10 mA max imum  provides the best spurious -free dynamic range \n(SFDR) performance. The DAC output compliance range is AVDD + 0.5 V to AVDD −  0.5 V . Voltages developed beyond \nthis range result in  excessive DAC distortion and could potentially  \ndamage the DAC output circuitry. Proper attention should be paid to the load termination to keep the output voltage within this compli ance range.  \n \nTable 5. Clock Input Modes of Operation  \nCFR1<4>  CLKMODESELECT CFR2<7:3>  Oscillator Enabled?  System Clock  Frequency Range (MHz)  \nLow  High  4 ≤ M ≤ 20 Yes fCLK = fOSC × M  80 < f CLK < 400 \nLow  High  M < 4 or M > 20  Yes fCLK = fOSC 20 < fCLK < 30  \nLow  Low  4 ≤ M ≤ 20 No fCLK = fOSC × M  80 < f CLK < 400 \nLow  Low  M < 4 or M > 20  No fCLK = fOSC 10 < f CLK < 400 \nHigh  X X No fCLK = 0 N/A  \n \nAD9954  Data Sheet  \n \nRev. C | Page 14 of 40 Comparator  \nSome applications ( for example, clocking ) prefer a square -wave \nsignal rather than a sine wave. In support of such applications, \nthe AD9954 includes an on -chip comparator. The comparator \nhas a bandwidth greater than 200 MHz and a common -mode \ninput range of 1.3 V to 1.8 V . The comparator can be turned off \nto reduce power consumption using the comparator power -\ndown bit, CFR1<6>.  \nFrequency Accumulator  \nThis block is used for linear sweep mode; transitioning from  \nthe start frequency (F0) to the terminal frequency (F1) is not \ninstantaneous but instead is implemented in a swept or ramped \nfashion. This frequency ramping is accomplished by stepping \nthrough intermediate frequencies between F0 and F1.  \nThe linear sweep block uses the falling and rising delta \nfrequency tuning words, the falling and rising delta frequency \nramp rat es, and the frequency accumulator. T he Linear Sweep \nEnable Bit  CFR1 <21> enables the linear sweep block. The linear \nsweep no dwell bit establishes the action to be performed upon \nreaching the terminal frequency in a sweep. See the Modes of \nOperation  section for more details.  \nDDS Core  \nThe output frequency ( fO) of the DDS is a function of the \nfrequency of system clock (SYSCLK), the value of the frequency \ntuning word ( FTW ), and the capacity of the phase accumulator \n(232, in this case). The exact relationship is given below with fs \ndefined as the frequency of SYSCLK.  \nfO = (FTW )(fS)/232 with  0 ≤ FTW  ≤ 231 \nfO = fS × (1 − ( FTW /232)) with  231 < FTW  < 232 − 1 \nEach system clock cycle, the FTW is added to the value \npreviously held in the phase accumulator . The value at the \noutput of the phase accumulator is then summed with a user -\ndefined, 14 -bit phase offset value (POW) . The most significant \n19 bits of that summati on are then translated to an amplitude \nvalue via the cos (x) functional block . Truncation of the LSBs is \nimplemented to reduce the power consumption of the DDS \ncore. This truncation does not reduce frequency resolution.  \nIn certain applications , it is desirable to have the ability to force \nthe output signal to zero phase. Simply setting the FTW to 0 \ndoes not accomplish this; it only stalls the core at its current phase value. A control bit is provided to force the phase accumulator output to zero . \nAt power -up, the clear phase accumulator bit is set to Logic 1, \nbut the buffer memory for this bit is cleared (Logic 0). Therefore,  \nupon power -up, the phase accumulator remain s clear until the \nfirst I/O UPDATE is issued. I/O UPDATE  transfers data from \nthe input buffers to the active control registers. See the \nFunctionality of the SYNC_CLK and I/O UPDATE  section  \nfor more details.  \nFrequency Tuning Word M ux \nAs shown in Figure 2, there are three sources for the FTW  that are  fed to the DDS core as the seed va lue for the phase \naccumulator: a frequency a ccumulator, the static RAM, and  \nthe registers of the control logic.  \nFor applications where a static output frequency or more than four p redefined output frequencies need to be switched  between , \nin some variable or undefined order, the primary method of setting the FTW is by programming the desired value into the \nFTW0 register. \nFor applications where up to four specific sets of FTWs, or pre -\ndefined series of FTWs are needed, the on -board RAM can be \nprogrammed with the desired FTWs , and the profile pins can \nbe used to toggle between those sets/series .  \nFor applications where a steady sweeping of frequency is \ndesired, a second frequency acc umulator is provided . The seed \nvalue and min imum /max imum  numbers for the frequency \naccumulator are user programmable, although certain rules \nmust be followed  to avoid overflowing that accumulator.  \nPhase Offset Word M ux \nAs shown in Figure 2, there are two sources for the POW that \nare fed to the DDS core as an adder to the output of the phase \naccumulator: the static RAM and the registers of the control logic . Using this feature enables synchronization of the DD S \noutput to other system signals as well as phase modulation.  \nFor applications where a static out put phase or more than four \npredefined output phases need to be switched between , in some \nvariable or undefined order, the primary method of setting the POW is  by programming the desired value into the POW0 \nregister. \nFor applications where up to four specific sets of POWs, or \npredefined series of POWs are needed, the on -board RAM can \nbe programmed with the desired POWs , and the profile pins \ncan be used to toggle  between those sets/series.  \nThe phase offset formula is  \n°×\uf8f7\uf8f8\uf8f6\uf8ec\uf8ed\uf8eb=Φ 360\n2POW\n14 \nA digital delay block exists in the phase offset programming path to ensure matched latency with changes to the frequency tuning word . This enables users to easily program the device to \nchange from one combined phase/frequency combination to \nanother smoothly and seamlessly.  \nContinuous and Clear -and-Release Frequency and Phase \nAccumulator Clear Functions  \nThe AD9954 allows for a continuous zeroing of the frequency \nsweep logic and the phase accumulator as well as a clear and \nrelease or automatic zeroing function. The auto clear bits are CFR1<14:13>. The continuous clear bits are CFR1<11:10>.  \n \n \n \nData Sheet  AD9954  \n \nRev. C | Page 15 of 40 Clear -and-Release  Function  \nWhen set for auto clearing, the corresponding accumulator is \ncleared and then begins to accumulate again upon receipt of an \nI/O update  or change on one of the profile pins. This is repeated \nfor every subsequent I/O update  or change on one of the profile \npins until  the appropriate auto clear control bit is cleared. It is \nperfectly valid to have one accumulator set to autoclearing and the other set to continuous clear.  \nAmplitude Control Options  \nShaped On -Off Keying  \nThe shaped on -off keying function is enabled/ disabled using \nthe OSK enable bit (CFR1<25>). This function allows the  \nuser to control the ramp -up and ramp -down time when turning \nthe DAC on or off. This function is primarily used in burst \ntransmissions of digital data to reduce the adverse spectral impact of short, abrupt bursts of data.  \nBoth auto and manual shaped on -off keying modes are \nsupported. CFR1<24> is used to select between auto and manual on -off keying mode s. Figure 20 shows the block  \ndiagram of the OSK circuitry.  \nAutos haped On -Off Keying Mode Operation  \nWhen auto shaped on -off k eying mode is enabled, a single -scale \nfactor is internally generated and applied to the multiplier input for scalin g the output of the DDS core block (see Figure 20). The \nscale factor is the output of a 14 -bit counter that increments/  \ndecrements at a rate determined by the contents of the 8 -bit \noutput ramp rate register. The scale factor increments if the OSK pin is high and decrements if the OSK pin is low. The scale factor is an unsigned value; all 0s multiply the DDS core output \nby 0 (decimal), and 0x3FFF multiplie s the DDS core output by \n16,383 (decimal).  \nTable 6 details the increment/decrement step size of the \ninternally generated scale factor per the ASF<15:14> bits.  \nNote that the maximum amplitude allowed is limited by the contents of the amplitude scale factor register, allowing the user to ramp to a value less than full scale.  \nTable 6. Auto scale Factor Internal Step Size  \nASF<15:14> (Binary)  Increment/Decrement Size \n00 1 \n01 2 \n10 4 \n11 8 \n \nOSK Ramp Rate Timer  \nThe OSK ramp rate timer is a loadable down counter, which \ngenerates the clock signal to the 14 -bit counter that generates \nthe internal scale factor. The ramp rate timer is loaded with  \nthe value of the autoscale factor register (ASFR ) every time  \nthe count er reaches 1 (decimal). This load and countdown \noperation continues for as long as the timer is enabled, unless \nthe timer is forced to load before reaching a count of 1.  \nIf the load ARR control  bit (CFR1<26>) is set, the ramp rate \ntimer is loaded upon an I/O update , upon a change in profile \ninput, or upon reaching a value of 1. The ramp timer can be loaded before reaching a count of 1 by three methods.  \nThe first method  is by toggling the OSK pin or sending a rising \nedge to the I/O UPDATE pin (or changing the state of a profile \npin). For this  method , the ASFR value is loaded into the ramp \nrate timer, which then proceeds to count down as normal.  \nThe second method is if the load ARR control b it (CFR1<26>) \nis set and an I/O update  (or change in profile) is issued.  \nThe last method is by setting the sweep enable bit. T his switches \nfrom inactive auto shaped on -off keying mode to the active \nautoshaped on -off keying mode.  \nManual Shaped On -Off Keying Mode Operation  \nWhen configured for manual shaped on -off keying, the  \ncontent of the ASFR sets the scale factor for the data path  03374-005OSKPINLOAD OSKTIMER\nCFR1<26>SYNC _CLKAUTO OSK\nENAB LE\nCFR1<24>\nTODAC\nAUTOSCALE\nFACTOR GENERATORRAMPRATETIMERCLOCKDDSCORE\nOSKENAB LE\nCFR<25>\nAMPL ITUDESCALE\nFACTORREGISTER\n(ASF)0\n01 0101\nHOLD\nINC/DECENAB LEOUTCOS(X)\nAMPL ITUDERAMP\nRATEREGISTER\n(ASF)\nUP/DN DATA LOAD\nEN\n \nFigure 20. On -Off Shaped Keying, Block Diagram  \n \n  \nAD9954  Data Sheet  \n \nRev. C | Page 16 of 40 MODES OF OPERATION  \nSingle -Tone Mode  \nIn single -tone mode, the DDS core uses a static tuning word. \nWhatever value is stored in FTW0 is supplied to the phase  \naccumulator. This value can only be changed manually by \nwriting a new value to FTW0 and then by issuing an I/O update . \nPhase adjustments  are made using the phase offset register.  \nRAM -Controlled Modes of Operation  \nThree important points apply to the RAM -controlled modes: \n• The user must ensure that the beginning address is lower \nthan the final address.  \n• Changing profiles or issuing an I/O update automatically \nterminates the current sweep and starts the next sweep, unless otherwise stated.  \n• Setting the RAM destination bit true such that the RAM output drives the phase offset adder is valid. While the sections  that follow describe frequency sweep s, phase  \nsweep operation is also available. The RAM destination bit (CFR1<30>) controls whether the RAM output drives the phase accumulator (frequency) or the phase offset adder (phase).  \nThe AD9954 offers five  modes of RAM -controlled operation  \n(see Table 7).  \nTable 7. RAM Modes of Operation  \nRSCW<7:5>  (Binary)  Mode  Notes  \n000 Direct Switch  No sweeping, profiles  \nvalid, no dwell ig nored  \n001 Ramp Up  Sweeping, profiles valid,  \nno-dwell vali d \n010 Bidirectional  \nRamp  Sweeping, PS0 is a  \ndirection control pin,  \nno-dwell ignored  \n011 Continuous  \nBidirectional  \nRamp  Sweeping, profiles valid,  \nno-dwell ign ored  \n100 Continuous  \nRecirculation  Sweeping, profiles valid,  \nno-dwell ign ored  \n101, 110, 111  Invalid mode  Default to direct switch  \n \nDirect Switch Mode  \nDirect switch mode enables frequency shift keying ( FSK) or \nphase shift keying ( PSK) modulation. The AD9954 is \nprogrammed for direct switch  using the RAM enable bit \n(CFR1<31>) and programming the RAM segment mode control bits of each desired profile to 000(b). This mode simply reads the RAM contents at the RAM segment beginning address for the current profile. No address ramping occurs in this mode.  To perform 4 -tone shift keying, the user programs each RAM \nsegment control word for direct switch mode and a unique beginning address value. Program the RAM enable and RAM destination bits (CFR1<31:30>) to enable the RAM and direct the RAM output  to be the FTW (FSK) or the POW (PSK). The \nPS1 and PS 0 inputs are the 4 -tone FSK/PSK data inputs. When \nthe profile is changed, the data stored at the new profile is \nloaded into either the phase accumulator (FSK) or the phase \noffset adder (PSK). When set for PSK, Bits<17:0> of the RAM \noutput are unused when t he RAM destination bit is set . Two -\ntone shift keying only uses one profile pin.  \nRamp -Up Mode  \nRamp -up mode, in conjunction with the segmented RAM \ncapabilit y, allows up to four different sweep profiles to be \nprogrammed into the AD9954. The AD9954 is programm ed  \nfor ramp -up mode by enabling the RAM using the RAM enable \nbit (CFR1<31>) and programming the RAM mode control bits of each profile to be used to 001(b).  \nWhen a sweep is initiated (via an I/O update  or change in \nprofile bits), the RAM address generator  loads the RAM \nsegment beginning address bits of the current RSCW , driving the RAM output from this address, and the ramp rate timer loads the RAM segment address ramp rate bits. When the ramp rate timer finishes a cycle, the RAM address generator incremen ts \nto the next address, the timer reloads the ramp rate bits and \nbegins a new countdown cycle. This sequence continues until \nthe RAM address generator has incremented to an address equal to the RAM segment final address bits of the current RSCW . At this po int, the next state is dependent  upon whether \nno-dwell mode is active. See the no -dwell bit (CFR1<2>) in the \nregister map s (see Table 12 and Table 13). \nIn this mode, asymmetrical FSK modulation can be implemented \nby configuring the RAM for two segments, and using the PS0 \npin as the data input.  \nBidirec tional Ramp Mode  \nBidirectional ramp mode allows the AD9954 to offer a \nsymmetrical sweep between two frequencies using the PS0 signal as the control input. The AD9954 is programmed for bidirectional ramp mode using the RAM enable bit (CFR1<31>)  \nand program ming the RAM segment mode control bits of each \ndesired profile to 010(b). P S1 input is ignored; the PS0 input is \nthe ramp direction indicator. The memory is not segmented, \nusing only one beginning and one final address. The address \nregisters for controlling RAM are located in the RAM segment \ncontrol word ( RSCW ) associated with Pro file 0.   \nData Sheet  AD9954  \n \nRev. C | Page 17 of 40 Upon entering this mode (via an I/O update  or changing the \nPS0 pin), the RAM address generator loads the RAM segment \nbeginning address bits of RSCW0 and the ramp rate timer loads \nthe RAM segment address ramp rate bits. The RAM drives data from the beginning address, and the ramp rate timer begins \ncounting down to 1 . When the timer reaches zero, the RAM \naddress is incremented if PS0 is high and decrements if PS0  is \nlow. Toggling the PS 0 pin does not cause the device to generate \nan internal I/O up date; transfers of data from the I/O buffers to \nthe internal registers are only initiated by a rising edge on the I/O UPDATE pin.  \nRAM address control is now  a function of the PS0 input. When \npolarity of the PS0 bit is changed, the RAM address generator increments/decrements to the next address and the ramp rate \ntimer is reloaded. As in the ramp -up mode, this sequence \ncontinues until the RAM address generator has incremented/  \ndecremented to an address equal to the final/beginning address as long as the PS0 i nput remains high/low. Once the final/ \nbeginning address is reached, the sweep stalls until the polarity \non PS0 is changed.  \nAll data in the RAM segment control words associated with \nProfile 1, Profile 2, and Profile 3 are ignored. Only the information  \nin the RAM segment control word for Profile 0 is used to \ncontrol the RAM.  \nContinuous Bidirectional Ramp Mode  \nContinuous bidirectional ramp mode allows the AD9954  \nto offer an automatic, symmetrical sweep between two frequencies. The AD9954 is programmed for continuous \nbidirectional ramp mode using the RAM enable bit (CFR1<31>) \nand programming the RAM segment mode control bits of each \ndesired profile to 011(b). In general, this mode is identical in control to the bidirectional ramp mode , except the ramp up and  \ndown is automatic (no external control via the PS0 input), and \nswitching profiles are valid. This mode enables generation of an \nautomatic saw tooth sweep characteristic.  \nUpon entering this mode (via an I/O update  or changing the \nPS1 or PS0 pins), the RAM address generator loads the RAM \nsegment beginning address bits of the current RSCW and the ramp rate timer loads the RAM segment address ramp rate bits. \nThe RAM drives data from the beginning address, and the ramp \nrate timer begins counting down  to 1. When the ramp rate timer \ncompletes the countdown, the RAM address generator increments  \nto the next address, and the timer reloads the ramp rate bits and \ncontinues counting down. This continues until the RAM address \ngenerator has incremented to an address equal to the RAM \nsegment final address bits of the current RSCW . Upon reaching this final address, the RAM address generator begin s \ndecrementing each time the ramp rate timer completes a \ncountdown cycle until it reaches the RAM segment beginning \naddr ess. Upon reaching the beginning address, the entire \nsequence repeats until a new mode is selected.  \n Continuous Recirculation Mode  \nContinuous recirculation mode allows the AD9954 to offer  \nan automatic, continuous unidirectional sweep between two \nfrequenci es. The AD9954 is programmed for continuous \nrecirculation mode using the RAM enable bit (CFR1<31>)  and programming the RAM segment mode control bits of  \neach desired profile to 100(b).  \nUpon entering this mode (via an I/O update  or changing Pin \nPS1 or Pin PS0), the RAM address generator loads the RAM \nsegment beginning address bits of the current RSCW and the ramp rate timer loads the RAM segment address ramp rate bits. The RAM drives data from the beginning address, and the ramp \nrate timer begins to count down to 1. When the ramp rate timer \ncompletes a cycle, the RAM address generator increments to the next address, and the timer reloads the ramp rate bits and continues counting down. This sequence continues until the RAM address generator has incremented t o an address equal to \nthe RAM segment final address bits of the current RSCW . Upon \nreaching this terminal address, the RAM address generator \nreloads the RAM segment beginning address bits and the sequence repeats until a new mode is selected.  \nInternal Prof ile Control  \nThe AD9954 offers a mode in which a composite frequency s weep \ncan be built with software -programmable timing control. Internal \nprofile control capability disengages the P S1 pin and the PS 0 pin \nand enables the AD9954 to take control of switching  between \nprofiles. Modes are defined that allow continuous or sin gle-burst \nprofile switches for three combinations of profile selection bits   \n(see Table 8). Internal profile control mode is engaged  using Bits \nCFR1<29:27> per Table 8 Internal profile control is only valid \nwhen the device is operating in RAM mode. There is no internal profile control for linear sweeping operations.  \nWhen the internal profile control mode is engaged, the RAM segment mode control bits are ignored; the device operates all profile s in ramp -up mode. Switching between profiles occurs \nwhen the RAM address generator has exhausted the memory contents for the current profile.  \n \n \n \n \n \n \n \n \n \nAD9954  Data Sheet  \n \nRev. C | Page 18 of 40 Table 8. Internal Profile Control   \nCFR1<29:27>  \n(Binary)  Mode Description   \n000 Internal control inactiv e \n001 Internal control active, single -burst, activate  \nProfile 0, t hen Profile 1, then st op \n010 Internal control active, single -burst, activate  \nProf ile 0, t hen Profile 1, then Profile  2, then st op \n011 Internal control active, single -burst,  activate  \nProfile 0, t hen Profile 1, then Profile 2, then \nProfile 3, then s top \n100 Internal  control active, continuous , activate  \nProfile 0, t hen Profile 1, then Loop Starting 0  \n101 Internal control active, continuou s, activate  \nProfile 0, t hen Profile 1, then Profile 2, then \nLoop Starting 0  \n110 Internal control active, co ntinuous, activate  \nProfile 0, t hen Profile 1, then Profile 2, then  \nProfile  3, and t hen Loop Starting 0  \n111 Invalid   \nA single -burst mode is one in which the composite sweep is \nexecuted once. For example, assume the device is programmed \nfor ramp -up mode and the CFR1<29:27> bits are written to \nLogic 010(b). Upon receiving an I/O update , the internal \ncontrol logic signals the device  to begin executing the ramp -up \nmode sequence for Profile 0. Upon reaching the RAM segment final address value for Profile 0, the device jumps to the beginning  \naddress o f Profile 1 and begins executing that ramp -up sequence. \nUpon reaching the RAM segment f inal address value for \nProfile  1, the device jumps to the beginning address of Profile 2 \nand begins executing that ramp -up sequence. When the RAM \nsegment final address value for Profile 2 is reached, the sequence is over and the composite sweep has complet ed. \nIssuing another I/O update  restarts the burst process.  \nA continuous internal profile control mode is one in which the composite sweep is continuously executed for as long as the \ndevice is programmed into that mode. Using the previous \nexample, except p rogramming the CFR1<29:27> bits to \nLogic  101(b), the operation would be identical until the RAM \nsegment final address value for Profile 2 is reached. At this point, instead of stopping the sequence, the device jumps back to the beginning address of Profile  0 and continues sweeping.  \nLinear Sweep Mode \nThe AD9954 is placed in linear sweep mode using the Linear \nSweep Enable Bi t CR1<21>. PS1 must be tied low. When in \nlinear sweep mode, the AD9954 output frequency ramp s up \nfrom a starting frequency, programmed by  FTW0 to a finishing \nfrequency FTW1, or down from FTW1 to FTW0. The delta frequency tuning words and the ramp rate word determine the \nrate of this ramping. The Linear Sweep No -Dwell Bi t CFR1<2> \ncontrols the behavior of the device upon reaching the final frequency.  \nWhen PS0 is high, the 32 -bit rising delta frequency tuning word \n(RDFTW) is the seed value for the frequency accumulator , it ramps  from FTW0 to FTW1 and the RSRR register is loaded \ninto the sweep rate timer. When the timer counts down to one, \nthe frequency accumulator cycles once, increasing by the seed \nvalue. This accumulation of the RDFTW at the rate given by the ramp rate (RSRR) continues until the output of the frequency \nadder is equal to the FTW1 register value, or PS0 is pulled low .  \nWhen PS0  is low, the 32 -bit falling delta frequency tuning word \n(FDFTW) is the seed value for the frequency accumulator , it \nramp s down from FTW1 to FTW0 and the FSRR register is \nloaded into the sweep rate timer. When the timer counts down \nto one, the frequency acc umulator cycles once, decreasing by \nthe seed value. This accumulation of the FDFTW at the rate given by the ramp rate (FSRR) continues until the output of the frequency adder is equal to the FTW0 register value, or PS0 is \npulled high.  \nPin PS 0 controls the direction of the sweep, rising to FTW1 or \nfalling to FTW0. Upon reaching the destination frequency, the \nAD9954 linear sweep function either hold s at the destination \nfrequency until the state on PS0 is changed or immediately \nreturn s to the initial frequency, FTW0, depending on the state \nof the Linear Sweep No -Dwell B it CFR1<02>. While operating \nin linear sweep mode, toggling PS0 does not cause the device to \ngenerate an internal I/O update . When PS0 is acting as the \nsweep direction in dicator, any transfer of data from the I/O \nbuffers to the internal registers can only be initiated by a rising \nedge on the I/O UPDATE pin.  \nThe linear sweep function of the AD9954 requires the lowest frequency to be loaded into the FTW0 register and the hig hest \nfrequency into the FTW1 register. For piece- wise, nonlinear \nfrequency transitions, it is necessary to reprogram the registers while the frequency transition is in  process .  \nAfter a reset, the device is initially in single -tone mode. The \nprogramming st eps to operate in linear sweep mode are:  \n1. PS1:0 = 00.  \n2. Set the linear sweep enable bit (CFR1<21>) and set or clear the linear sweep no -dwell bit (CFR1<2>) as desired.  \n3. Program the rising and falling delta frequency tuning words and ramp rate values.  \n4. Program t he lower and higher output frequencies into the \nFTW0 and FTW1 registers, respectively.  \n5. Apply an I/O update  to move this data into the registers \n(the instantaneous output frequency is  FTW0).  \n6. Change the PS 0 input as desired to sweep between the \nlower to high er frequency and back.  \nFigure 21 depicts  a typical frequency ramping operation. The \ndevic e initially powers up in single -tone mode. The profile \ninputs ar e low, setting FTW0 as the seed value for the phase \naccumulator. The user then writ es to the linear sweep enable bit, \nthe rising and falling delta frequency tuning words , and ramp \nrates via the serial port (Point A  in Figure 21. In this example, the \nlinear sweep no -dwell bit is cleared (CFR1<2>).  \n \nData Sheet  AD9954  \n \nRev. C | Page 19 of 40 \n03374-003FTW 0\nSINGLE-TONE\nMODELINEAR SWEEP MODE\nATPOINTA:LOADRISINGRAMPRATEREGISTER,APPLYRISINGDFTW.\nATPOINTB:LOADFALLINGRAMPRATEREGISTER,APPLYFALLINGDFTW .PS<0>=1 PS<0>=0 PS<0>=0TIMEFTW 1\nABfOUT\n \nFigure 21. Linear Sweep Frequency Plan  \n \n03374-004FTW 0\nSINGLE-TONE\nMODE\nLINEARSWEEP MODEENAB LE–NODWELL BITSETFTW 1\nA A AB B BfOUT\nTIME\nPS<0>=1PS<0>=0 PS<0>=0 PS<0>=1 PS<0>=1 PS<0>=0\n \nFigure 22. Linear Sweep Using No -Dwell Frequency Plan  \n \nLinear Sweep No -Dwell Feature  \nSee CFR1<2> in the register map s (see Table 12 and Table 13) \nfor general details of the no-dwell m ode. Figure 22 depicts  the \nlinear sweep mode opera tion when the linear sweep no -dwell \nbit is set. The Label A points indicate where a rising edge on \nPS0 is detected; the Label  B points indicate where the AD9954 \nhas determined f OUT has reached the terminal frequency and \nautomatically returns to the starting frequency. Note that in this \nmode, only sweeps from FTW0 t o FTW1 using the positive \nlinear sweep control word are supported. Toggling PS0 from 1 \nto 0 neither  initiates a falling sweep when the no -dwell bit is set, \nnor interrupt s a positive sweep already underway.  \n Resetting the Ramp Rate Timer  \nThe ramp timer can be reset before reaching a count of 1 by \nthree methods.  \nMethod one is by changing the PS0 input pin. When the PS0 \ninput pin toggles from 0 to 1, the RSRRW value is loaded into \nthe ramp rate time r, which then proceeds to count down as \nnormal. When the PS0 i nput pin toggles from 0 to 1 , the falling \nsweep ramp rate word (F SRRW ) value is loaded into the ramp \nrate timer, which then proceeds to countdown as normal.  \nThe second method uses the LOAD SRR @ I/O UD bit \n(CFR1<15>) , see Table 12 for details.  \n \nAD9954  Data Sheet  \n \nRev. C | Page 20 of 40 The last method in which the sweep ramp rate timer can be \nreset is changing from inactive linear sweep mode to active \nlinear sweep mode using the linear sweep enable b it (CFR1<21>).  \nFor methods two and three, the ramp rate timer loads a value determined by the state of PS0 ( 0 =  F S R RW,  1  = RSRRW).  \nPower -Down Functions of the AD9954  \nThe AD9954 supports an externally controlled (or hardware) power -down fea ture as well as software -programmable power -\ndown bits capable of individually powering down specific unused \ncircuit blocks.  \nSoftware -controlled power -down enables individual powering \ndown of the DAC, comparator, PLL, input clock circuitry, and the digital logic (C FR1<7:4>). With the exception of CFR1<6>, \nthese bits are superseded when the externally controlled power -\ndown pin (PWRDWNCTL) is high. External power -down \ncontrol is supported on the AD9954 via the PWRDWNCTL \ninput pin. When the PWRDWNCTL input pin is high,  the \nAD9954 enter s a power -down mode based on the CFR1<3> bit. \nWhen the PWRDWNCTL input pin is low, it operates normally . \nSee CFR1<3> in Table 12 for d etails.  \nTable 9 details the logic level for each power -down bit that \ndrives out of the AD9954 core logic to the analog section and the digital clock ge neration section of the chip for the external \npower -down operation.  \n \nTable 9. Power -Down Control Functions  \nControl  Mode Active  Description  \nPWRDWNCTL = 0 , CFR1<3> don’t ca re Software control  Digital power -down = CFR1<7>  \nComparator power -down = CFR1<6>  \nDAC power -down = CFR1<5>  \nClock input power -down = CFR1<4>  \nPWRDWNCTL = 1 , CFR1<3> = 0  External control, fast recovery  \npower -down mo de Digital power -down  = 1’b1  \nComparator power- down  = 1’b0 or CFR1<6>  \nDAC power -down  = 1’b0  \nClock input power -down  = 1’b0  \nPWRDWNCTL = 1 , CFR1<3> = 1  External control, full power -down \nmode  Digital power -down  = 1’b1  \nComparator power- down  = 1’b1  \nDAC power -down  = 1’b1  \nClock input power -down  = 1’b1  \n \nData Sheet  AD9954  \n \nRev. C | Page 21 of 40 SYNCHRONIZATION—REGISTER UPDATES (I/ O \nUPDATE)  \nFunctionality of the SYNC_CLK and I/O UPDATE  \nData into the AD9954 is synchronous to the SYNC_CLK  \nsignal (supplied externally to the user on the SYNC_CLK pin). \nThe I/O UPDATE pin is sampled on the rising edge of the \nSYNC_CLK.  \nInternally, SYSCLK is fed to a divide -by-four frequency divider \nto produce the SYNC_CLK signal. The SYNC_CLK signal is \nmade available to the system on the SYNC_CLK pin. This enables synchronization of external hardware with the device’s \ninternal clocks. This is accomplished by providing the SYNC_CLK \nsignal as an output that exter nal hardware can then use to \nsynchronize against.  The I/O update  signal coupled with SYNC_CLK is used to \ntransfer internal buffer contents into the control registers. The \ncombination of the SYNC_CLK pin and the I/O UPDATE pin \nprovides the user with const ant latency relative to SYSCLK and \nensures phase continuity of the analog output signal when a new tuning word or phase offset value is asserted.  \nFigure 23 and Figure 24 demonstrate an I/O update  timing \ncycle and synchronization.  \nSynchronization logic  notes include the following : \n• The I/O update  signal is edge detected to generate a single-\ncycle clock signal that drives the register bank flops. The I/O update  signal has no constraints on duty cycle. The \nminimum low time on I/O update  is one SYNC_CLK clock \ncycle.  \n• The I/O UPDATE pin is set up and held around the rising edge of SYNC_CLK . Setup and hold time spec ification s \ncan be found in Table 2. 03374-006SYSCLK\nSDIOSYNC_CLK\nDISABLE\n100\nSCLKTOCORELOGIC\nCSOSK\nD\nQPS<1:0>\nD\nQI/OUPDATE\nD\nQ÷4\nSYNC_CLK\nGATINGEDGE\nDETECTION\nLOGIC\nREGISTER\nMEM ORYI/OBUFFER\nLATCHES\n \nFigure 23. I/O Synchronization Block Diagram   \n \nSYNC_CLKSYSCLK\nA B\nDATA IN\nREGISTERS\nDATA IN\nI/O BUFFERSI/O UPDATE\nTHE DEVICE REGISTERS AN I/O UPDATE AT POINT A. THE DATA IS TRANSFERRED FROM\nTHE ASYNCHRONOUSLY LOADED I/O BUFFERS AT POINT B.\n03374-007N – 1 N\nN + 1 NN + 1\nN + 2\n \nFigure 24. I/O Synchronization Timing Diagram  \nAD9954  Data Sheet  \n \n  \nSynchronizing Multiple AD9954s  \nThere are three modes of synchronization available to the user: \nan automatic s ynchronization mode, a software -controlled  \nmanual synch ronization mode, and a hardware -controlled \nmanual synchronization mode. The following requirements  \napply to all modes. First, all units must share a common clock \nsource. Trace lengths and path impedance of the clock tree must be designed to keep the phase delay of the different clock branches as closely matched as possible. Second, the I/O update  signal’s \nrising edge must be provided synchronously to all devices being synchronized. Finally, the DVDD_I/O supply should be set to 3.3 V for all dev ices that are to be synchronized. AVDD and \nDVDD should be left at 1.8 V . \nIn automatic synchronization mode, one device is chosen as a \nmaster, the other device(s) is  slaved to this master. All slaves \nautomatically synchronize their internal clocks to the SY NC_CLK  \noutput signal of the master device. Use the automatic \nsynchronization bit (CFR1<23>) to configure each slave. Connect the SYNC_IN input(s) to the master SYNC_CLK \noutput. Slave devices continuously update the phase relationship  of \ntheir SYNC_CLK until it is in phase with the SYNC_IN input. \nThe high speed sync enhancement enable bit (CFR2<11>) must \nbe programmed correctly.  \nIn software manual synchronization mode, the user can force  \nthe device to advance the SYNC_CLK rising edge one SYSCLK \ncycle ( ¼ SYN C_CLK period). Manual synchronization mode  \nis established using the slave device’s software manual \nsynchronization bit (CFR1<22>). See the bit description in \nTable 12 for more details.  \nIn hardware manual synchronization mode, the SYNC_IN  \ninput pin is configured such that it now advance s the rising edge \nof the SYNC_CLK signal each time the device detects a rising edge \non the SYNC_IN pin. Hardware manual  synchronization mode is \nestablished using the hardware manual synchronization bit \n(CFR2<10>). See the bit description in Table 12 for more details.  \nUsing a Single Crystal to Drive Multiple AD9954 Clock \nInputs  \nThe AD9954 crystal oscillator output signal is available on the \nCRYSTAL OUT pin, enabling one crystal to drive multiple \nAD9954s. To drive multiple AD9954s with one crystal, the \nCRYSTAL OUT pin of the AD9954 using the external crystal \nshould be connected to the REFCLK input of the other AD9954.  \nThe CRYSTAL OUT pin must be enabled using the CRYSTAL \nOUT Pin Active B it CFR2<9>. The drive strength of the \nCRYSTAL OUT pin is fairly low ; therefore,  the signal  \nshould be buffered if  multiple loads are being driven .  \n \n \n \n RAM  \nThe AD9954 incorporates a block of SRAM. The RAM is a \nbidirectional single port. Read and write operations cannot \noccur simultaneously. Write operations to the serial I/O port take precedence; therefore,  if an attempt to write to RAM is \nmade during a read operation, the read operation is  halted. The \nRAM is configurable usi ng the RAM Segment Control Word <7:5> \nand data in the control function register.  \nUsing the RAM enable bit (CFR1<31>), the RAM output can be \nenabled to drive the input to either the phase accumulator or the phase offset adder; the RAM destination bit (CFR1<30> ) \nsets the routing. When the RAM output drives the phase \naccumulator, the phase offset word (POW , Address 0x05) drives \nthe phase -offset adder. Conversely , when the RAM output \ndrives the phase -offset adder, the frequency tuning word (FTW ,  \nAddress 0x04) dri ves the phase accumulator. When CFR1<31> \ndisables the RAM, it is inactive unless being written to via the serial port. The RAM is mapped into one of four profiles determined by the P S1 and PS 0 input pins. Note that these \nprofiles may overlap. For example, Profile 0 may use RAM Address Locati on 0 to Address Location 12, and Profile 1 may use \nRAM Address Location  5 to Address Location 20, and so forth.  \nAll RAM write or read operations to/from the RAM are \ncontrolled by the P S1 and PS0  input pins and the respec tive \nRAM segment control word. T o write to the RAM, a RAM \nsegment must be defined in a RAM segment control word. T he \nRAM segment that was defined must then be selected by use of \nthe profile sele ct pins, PS0 and PS1. With the correct RAM \nsegment selected, t he special instruction byte of 0xB0 should  \nbe sent. When the instruction byte to write to the RAM is sent \nto the part, the serial port controller immediately polls the \ncorresponding RAM segment control wor d. From this register, \nthe serial port controller makes note of the start address and the stop address. It then calculates how many entries there are in \nthe segment , and how many bytes of data to expect. After \nsending the special instruction byte of 0xB0, the user must  send \nall RAM entries for the current ly selected profile to the part.  \nFor example, consider a case where RAM Segment 2 begins at \nAddress 2 1 and ends at Address 120. First, write to RAM Segment \nControl Word 2 with a starting address of 21, with a stop address of 120, and specify a ramp rate and a mode of operation. Next, set PS1 to 1 and PS0 to 0 to select RAM Segment 2 and then send  \nthe instruction byte of 0xB0. The part is now ready to put the first \n32-bit word into the RAM at Address 21, to expect 100 32-bit \nwords, and to store the last one at Address 120. It automatically \ncontrols sending the data from the serial port to the correct RAM address. Therefore, precede  sending 100 32-bit words of data to \nthe part. After the 3200th SCLK cycle, the write operation is \ncomplete , and all 100 words are stored in the RAM, from \nAddress  21 to Address 120.  \n \n \nData Sheet  AD9954  \n \nRev. C | Page 23 of 40 Serial I /O Port  \nThe AD9954 serial port is a flexible, synchronous, serial \ncommunications port that easily interface s to many industry -\nstandard microcontrollers  and microprocessors. The serial I/O port \nis compatible with most synchronous transfer formats, including \nboth the Motorola 6905/11 SPI ® and Intel ® 8051 SSR protocols.  \nThe interface accesses all registers that configure the AD9954. MSB \nfirst and LSB first  transfer formats are supported. In addition, the \nAD9954’s serial interface port can be configured as a single pin I/O (SDIO), which allows a 2 -wire interface , or two unidirectional pins \nfor in/out (SDIO/SDO), which enables a 3 -wire interface. Two \noptional  pins, IOSYNC and \nCS, provide further flexibility for \nsystem design with the AD9954.  \nSERIAL PORT OPERATIO N \nWith the AD9954, the instruction byte specifies read/write  \noperation and register address. Serial operations on the AD9954 only occur at the register level, they do not occur on the byte \nlevel. For the AD9954, the serial port controller recognizes the instruction byte register address and automatically generates the proper register byte address. In addition, the controller expects to access all bytes of that register. It is a requirement that all \nbytes of a register be accessed during serial I/O operations, with one exception ; the IOSYNC function can be used to abort an \nI/O operation, thereby allowing less than all bytes to be access ed. There are two phases to a communication cycle with the \nAD9954. Phase 1 is the instruction cycle, which is the writing of \nan instruction byte into the AD9954, coincident with the first eight SCLK rising edges. The instruction byte provides the AD9954 s erial port controller with information regarding \nPhase  2, the data transfer cycle . The instruction byte defines \nwhether the upcoming  data transfer is a read or a write and the \nserial address of the register being accessed.  \nThe first eight SCLK rising edge s of each communication cycle \nare used to write the instruction byte into the AD9954. The \nremaining SCLK edges are for Phase 2 of the communication cycle. Phase 2 is the actual data transfer between the AD9954 \nand the system controller. The number of bytes  transferred  \nduring Phase 2 of the communication cycle is a function of the \nregister  being accessed. For example, when accessing the Control \nFunction Register 2, which is three bytes wide, Phase 2 requires that \nthree bytes be transferred. If accessing the frequenc y tuning word, \nwhich is four bytes wide, four bytes must be transferred. After transferring all data bytes per the instruction byte, the communication cycle is complete.  \nAt the completion of any communication cycle, the AD9954 \nserial port controll er expects the next eight rising SCLK edges \nto be the instruction byte of the next communication cycle. All \ndata input to the AD9954 is registered on the rising edge of SCLK. All data is driven out of the AD9954 on the falling edge of SCLK. Figure 25 through Figure 28 are provided to aid in \nunderstanding the general operation of the AD99 54 serial port . \n \n03374-008I6 I5 I4 I3 I2 I1 D5 D4 D3D2 D1 D0 I0 D7 D6 I7INSTRUCTION CYCLE\nSCLK\nSDIODATA TRANSFER CYCLE\nCS\n \nFigure 25. Serial Port Write Timing –Clock Stall Low  \n \n03374-009I6 I5 I4 I3 I2 I1 I0 DON'T CARE I7INSTRUCTION CYCLE\nSCLK\nSDIODATA TRANSFER CYCLE\nDO 5 DO 4 DO 3DO 2DO 1 DO 0 DO 7 DO 6 SDOCS\n \nFigure 26. 3 -Wire Serial Port Read Timing –Clock Stall Low  \n \n03374-010I6 I5 I4 I3 I2 I1 D5 D4 D3D2 D1 D0 I0 D7 D6 I7INSTRUCTION CYCLE\nSCLK\nSDIODATA TRANSFER CYCLE\nCS\n \nFigure 27. Serial Port Write Timing –Clock Stall High  \n \nAD9954 Data Sheet\n \nRev. C | Page 24 of 40 \n03374-011I6 I5 I4 I3 I2 I1 DO 5 DO 4 DO 3DO 2DO 1 DO 0 I0 DO 7DO 6 I7INSTRUCTION CYCLE\nSCLK\nSDIODATA TRANSFER CYCLE\nCS\n \nFigure 28. 2-Wire Serial Port Read Timing—Clock Stall High \n \nSERIAL INTERFACE PORT  PIN DESCRIPTIONS \nSCLK—Serial Clock. The serial clock pin is used to synchronize \ndata to and from the AD9954 and to run internal state machines. \nSCLK maximum frequency is 25 MHz. \nCS—Chip Select. CS is an active low input that enables  \ndevices sharing a serial communications line to be individually \nprogrammed. The SDO and SDIO pins go to a high impedance \nstate when this input is high. If driven high during any \ncommunications cycle, that cycle is suspended until CS is \nreactivated low. Chip select can be tied low if it is not needed. \nSDIO —Serial Data I/O. Data written to the AD9954 must be \nsent to this pin. However, this pin can be used as a bidirectional \ndata line. CFR1<9> controls the configuration of this pin.  \nSDO—Serial Data Out. Data is read from this pin for protocols \nthat use separate lines for transmitting and receiving data. When in 2-wire serial programming mode, this pin is set to a \nhigh impedance state. \nIOSYNC—synchronizes the I/O port state machines without \naffecting the addressable registers contents. An active high input on the IOSYNC pin aborts the current communication cycle. After \nIOSYNC returns low (Logic 0), another communication cycle may \nbegin, starting with the instruction byte write.  \nMSB/LSB TRANSFERS \nThe AD9954 serial port can support either MSB first or LSB \nfirst data formats. This functionality is controlled by the LSB \nFirst Bit CFR1<8>.  \nFor MSB first operation, the serial port controller generates the \nmost significant byte (of the specified register) address first followed by the next lesser significant byte addresses until the I/O operation is complete. All data written to (read from) the AD9954 must be in MSB first order.  \nIf the LSB mode is active, the serial port controller generates the \nleast significant byte address first followed by the next greater significant byte addresses until the I/O operation is complete. All data written to (read from) the AD9954 must be in LSB  \nfirst order.  \nExample Operation \nAs an example, consider the case of writing the amplitude scale \nfactor (ASF) register to a value of 0.5 full scale. First, calculate \nthe binary equivalent of 0.5. As the ASF is 16 bits wide, the hexadecimal equivalent is 0x80. Next, for MSB first format, transmit an instruction byte of 0x02 (serial address of ASF is \n00010(b)). From this instruction, the internal controller polls the register at this memory location and notes that the ASF is \n2 bytes wide. The serial port controller’s state machines sets to \n16 and awaits 16 rising edges on the SCLK and 16 bits of data \non the SDIO line. Send 16 rising edges on SCLK, and the binary \ndata 10000000 00000000 on the SDIO line. \nTo write the amplitude scale factor register in LSB first format, \nthe process is the same as in MSB first; however, the data is bit wise inverted on a word-by-word basis. The instruction byte is \n0x40. The binary data for the ASF is 00000000 00000001.  \n● ● ●\n● ● ●\n● ● ●SCLK\nSDIOCS\nTCSU TDSU TDH TDH\nDVDD I/O = 3.3V\nTCSU = 3ns\nTDSU = 3ns\nTDH = 0nsDVDD I/O = 1.8V\nTCSU = 5ns\nTDSU = 5ns\nTDH = 0ns\n03374-036 \nFigure 29. Timing Diagram for Data Write to AD9954 \nTDV = 25nsSCLK\nSDIO\nSDO\n03374-037 \nFigure 30. Timing Diagram for Data Read to AD9954 \nRAM I/O VIA SERIAL PORT \nAccessing the RAM via the serial port is identical to any other \nserial I/O operation except that the number of bytes transferred \nis determined by the address space between the beginning  address and the final address as specified in the current RAM segment control word (RSCW). The final address describes the most significant word address for all I/O transfers and the  beginning address specifies the least significant address. \nRAM I/O supports MSB/LSB first operation as set using the \nLSB First Bit CFR1<8>. When in MSB first mode, the first data \nbyte is for the most significant byte of the memory address described by the final address with the remaining three bytes making up the lesser significant bytes of that address. The remaining bytes come in most significant to least significant, \ndestined for RAM addresses generated in descending order \nData Sheet  AD9954  \n \nRev. C | Page 25 of 40 until the final four bytes are written into the address specified as \nthe beginning address. When in LSB first mode, the first data \nbyte is for the least significant byte of the memory (specified by \nthe beginning address) with the remaining three bytes making up the greater significant bytes of that address. The remaining bytes come in least significant to most significant, destined for RAM a ddresses generated in ascending order until the final \nfour bytes are written into the memory address described by the final address.  \nThe RAM uses Serial Ad dress 01011(b) ; therefore,  the \ninstruction byte to write the RAM is 0 x0B, in MSB first notation. \nAs previously mentioned , the RAM addresses generated  are \nspecified by the beginning and final address of the RSCW currently selected by Pin  PS1 and Pin PS 0. \nNotes on serial port operation  \n• The configuration changes made using CFR1<9:8> are \nimplemented immediat ely upon writ ing to this register. For \nmulti byte transfers, writing to this register may occur \nduring the middle of a communication cycle. Care must be \ntaken to compensate for this new configuration for the \nremainder of the current communication cycle.  \n• The system must maintain synchronization with the \nAD9954 or the internal control logic cannot  recognize \nfurther instructions. For example, if the system sends an \ninstruction byte that describes writing a 2 -byte register, \nand then pulses the SCLK pin for a 3 -byte write (24 \nadditional SCLK rising edges), communication synchronization is lost. In this case, the first 16 SCLK rising edges after the instruction  cycle properly write the first two \ndata bytes into the AD9954, but the next eight rising SCLK edges are i nterpreted as the next instruction byte. In the case \nwhere synchronization is lost between the system and the \nAD9954, the IOSYNC pin enables the user to reset the AD9954 serial port controller state machine. Any information that is  written to the AD9954 re gisters during \na valid communication cycle prior to loss of synchronization and assertion of the IOSYNC pin remain  \nintact.  \n• Reading a RAM profile requires that the profile select pins , \nPin PS1 and Pin PS 0, be configured to select the desired \nprofile. When r eading a register that resides in one of the \nprofiles, the register address acts as an offset to select one of the registers among the group of registers defined by the profile, while the profile select pins select the appropriate \nregister group.  INSTRUCTI ON BYTE  \nThe instruction byte contains the following information . \nTable 10. \nMSB  D6 D5 D4 D3 D2 D1 LSB \nR/W X X A4 A3 A2 A1 A0 \n \nR/W—Bit 7 of the instruction byte defines whether a read or  \nwrite data transfer occur s after the instruction byte write. Logic \nHigh indicates read operation. Logic 0 indicates a write \noperation.  \nX, X —Bit 6 and Bit 5 of the instruction byte are don’t c are. \nA4, A3, A2, A1, A0 —Bit 4, Bit 3, Bit 2, Bit 1, Bit 0 of the  \ninstruction byte determine which register is accessed during the \ndata transfer portion of the communications cycle. Addresses for registers can be found in the first column of the register m aps (see \nTable 12 and Table 13). \nREGISTER MAPS AND DE SCRIPTIONS  \nThe register maps are listed in Table 12 and Table 13. The active \nregister map depends on the state of the linear sweep enable bit; certain registers are remapped depending on which mode the part is operati ng in. Specifically, Register 0x07, Register 0x08, \nRegister 0x09, and Register 0x0A are affected. Because the \nlinear sweep operation takes precedence over RAM operations, Analog Devices , Inc.  recommends that the RAM be disabled \nusing Bit CFR1<31> w hen linear sweep is enabled by B it \nCFR1<21> to conserve power. The serial address numbers associated with each of the registers are in hexadecimal format. Angle brackets <> are used to reference specific bits or ranges of bits. For example, <3> designates Bit 3 and  <7:3> designates the \nrange of bits from Bit 7 to Bit 3, inclusive. \nTable 11. Register Mapping Based on Linear Sweep Enable Bit  \nLinear Sweep Enable Bit  \n(CFR1<21>)  Register Map  \nCleared (=  0) RAM Segment Control Words Active  \nSet (=  1) Linear Sweep Control Words Active  \n \n  \n \n \n \n \n \n \n \nAD9954  Data Sheet  \n \nRev. C | Page 26 of 40 Table 12. Register Map —When Linear Sweep Enable Bit Is False (CFR1<21> = 0)  \nNote that the RAM E nable Bit CFR1<31> only activates the RAM itself , not the RAM segment control words.  \nRegister  \nName  \n(Serial  \nAddress) Bit \nRange  (MSB)  \nBit 7  Bit 6  Bit 5  Bit 4  Bit 3  Bit 2  Bit 1  (LSB)  \nBit 0  Default  \nValue Or \nProfile \nControl  \nFunction  \nRegister  \nNo.1  \n(CFR1)  \n(0x00)  <7:0>  Digital  \nPower - \nDown  Comp  \nPower - \nDown  DAC  \nPower - \nDown  Clock  \nInput  \nPower - \nDown  External  \nPower - \nDown  \nMode  Linear  \nSweep  \nNo- \nDwell  SYNC_CLK  \nDisable  Not \nUsed  0x00  \n<15:8>  SRR Load  \nEnable  AutoClr  \nFreq  \nAccum  AutoClr  \nPhase  \nAccum  Sine / \nCosine   \nSelect  Clear  \nFreq  \nAccum  Clear  \nPhase  \nAccum  SDIO  \nInput  \nOnly  LSB First  0x00  \n<23:16>  Automatic  \nSync  \nEnable  Software  \nManual  \nSync  Linear  \nSweep  \nEnable  Not Used  Not \nUsed  Not Used  Not Used  Not \nUsed  0x00  \n<31:24>  RAM  \nEnable  RAM  \nDestination  Internal Profile Control <2:0>  Load ARR  \nControl  OSK  \nEnable  Auto  \nOSK  \nEnable  0x00  \nControl  \nFunction  \nRegister  \nNo. 2  \n(CFR2)  \n(0x01)  <7:0>  REFCLK Multiplier  VCO  \nRange  Charge Pump  \nCurrent <1:0>  0x00  \n<15:8>  Not Used  High  \nSpeed  \nSync  \nEnable  Hardware  \nManual  \nSync  \nEnable  XTAL  \nOUT  \nEnable  Not \nUsed  0x00  \n<23:16>  Not Used  0x18  \nAmplitude  \nScale  \nFactor (ASF)  \n(0x02)  <7:0>  Amplitude Scale Factor Register <7:0>  0x00  \n<15:8>  Auto Ramp Rate  \nSpeed Control <1:0>  Amplitude Scale Factor Register <13:8>  0x00  \nAmplitude  \nRamp Rate  \n(ARR)  \n(0x03)  <7:0>  Amplitude Ramp Rate Register<7:0>  0x00  \nFrequency  \nTuning  \nWord  \n(FTW0)  \n(0x04)  <7:0>  Frequency Tuning Word No. 0 <7:0>  0x00  \n<15:8>  Frequency Tuning Word No. 0 <15:8>  0x00  \n<23:16>  Freq uency Tuning Word No. 0 <23:16>  0x00  \n<31:24>  Frequency Tuning Word No. 0 <31:24>  0x00  \nPhase  \nOffset Word  \n(POW0)  \n(0x05)  <7:0>  Phase Offset Word No. 0 <7:0>  0x00  \n<15:8>  Not Used<1:0>  Phase Offset Word No. 0 <13:8>  0x00  \nFrequency  \nTuning  \nWord  \n(FTW1)  \n(0x06)  <7:0>  Frequency Tuning Word No. 1 <7:0>  0x00  \n<15:8>  Frequency Tuning Word No. 1 <15:8>  0x00  \n<23:16>  Frequency Tuning Word No. 1 <23:16>  0x00  \n<31:24>  Frequency Tuning Word No. 1 <31:24>  0x00  \nProfile  0 \nRAM  \nSegment  \nControl  \nWord No. 0  \n(RSCW0)  \n(0x07)  <7:0>  RAM Segment 0 Mode  \nControl <2:0>  No-Dwell  \nActive  RAM Segment 0 Beginning Address <9:6>  PS0 = 0 \nPS1 = 0 \n<15:8>  RAM Segment 0 Beginning Address <5:0>  RAM Segment 0  \nFinal Address <9:8>  PS0 = 0 \nPS1 = 0 \n<23:16>  RAM Segment 0 Final Address <7:0>  PS0 = 0 \nPS1 = 0 \n<31:24>  RAM Segment 0 Address Ramp Rate <15:8>  PS0 = 0 \nPS1 = 0 \n<39:32>  RAM Segment 0 Address Ramp Rate <7:0>  PS0 = 0 \nPS1 = 0 \nData Sheet  AD9954  \n \nRev. C | Page 27 of 40 Register  \nName  \n(Serial  \nAddress) Bit \nRange  (MSB)  \nBit 7  Bit 6  Bit 5  Bit 4  Bit 3  Bit 2  Bit 1  (LSB)  \nBit 0  Default  \nValue Or \nProfile \nProfile  1 \nRAM  \nSegment  \nControl  \nWord No. 1  \n(RSCW1)  \n(0x08)  <7:0>  RAM Segment 1 Mode  \nControl <2:0>  No-Dwell  \nActive  RAM Segment 1 Beginning Address <9:6>  PS0 = 1  \nPS1 = 0  \n<15:8>  RAM Segment 1 Beginning Address <5:0>  RAM Segment 1  \nFinal Address <9:8>  PS0 = 1  \nPS1 = 0 \n<23:16>  RAM Segment 1 Final Address <7:0>  PS0 = 1 \nPS1 = 0 \n<31:24>  RAM Segment 1 Address Ramp Rate <15:8>  PS0 = 1 \nPS1 = 0 \n<39:32>  RAM Segment 1 Address Ramp Rate <7:0>  PS0 = 1 \nPS1 = 0  \nProfile  2 \nRAM  \nSegment  \nControl  \nWord No. 2  \n(RSCW2)  \n(0x09)  <7:0>  RAM Segment 2 Mode  \nControl <2:0>  No-Dwell  \nActive  RAM Segment 2 Beginning Ad dress <9:6>  PS0 = 0 PS1 = 1  \n<15:8>  RAM Segment 2 Beginning Address <5:0>  RAM Segment 2  \nFinal Address <9:8>  PS0 = 0 \nPS1 = 1 \n<23:16>  RAM Segment 2 Final Address <7:0>  PS0 = 0 \nPS1 = 1  \n<31:24>  RAM Segment 2 Address Ramp Rate <15:8>  PS0 = 0 \nPS1 = 1 \n<39:32>  RAM Segmen t 2 Address Ramp Rate <7:0>  PS0 = 0 \nPS1 = 1 \nProfile  3 \nRAM  \nSegment  \nControl  \nWord No. 3  \n(RSCW3)  \n(0x0A)  <7:0>  RAM Segment 3 Mode  \nCon trol<2:0>  No-Dwell  \nActive  RAM Segment 3 Beginning Ad dress <9:6>  PS0 = 1 \nPS1 = 1 \n<15:8>  RAM Segment 3 Beginning Address<5:0>  RAM Segment 3  \nFinal Address <9:8> PS0 = 1 PS1 = 1 \n<23:16>  RAM Segment 3 Final Address <7:0>  PS0 = 1 \nPS1 = 1 \n<31:24>  RAM Segment 3 Address Ramp Rate <15:8>  PS0 = 1 \nPS1 = 1 \n<39:32>  RAM Segment 3 Address Ramp Rate <7:0>  PS0 = 1 PS1 = 1 \nRAM (0x0B)   RAM [1023:0] <31:0> (Read Instructions Write Out RAM Signature Register Data)   \n \nAD9954  Data Sheet  \n \nRev. C | Page 28 of 40 Table 13. Register Map —When Linear Sweep Enable Bit Is True (CFR1<21> = 1)  \nNote that the RAM E nable Bit CFR1<31> only activates the RAM itself , not the RAM segment control words.  \nRegister Name  \n(Serial Address) Bit \nRange  (MSB)  \nBit 7  Bit 6  Bit 5  Bit 4  Bit 3  Bit 2  Bit 1  (LSB)  \nBit 0 Default  \nValue O r \nProfile \nControl  \nFunction  \nRegister No. 1  \n(CFR1)  \n(0x00)  <7:0>  Digital  \nPower - \nDown  Comp  \nPower - \nDown  DAC  \nPower - \nDown  Clock  \nInput  \nPower  \nDown  External  \nPower - \nDown  \nMode  Linear  \nSweep  \nNo Dwell  SYNC_CLK   \nDisable  Not  \nUsed  0x00  \n<15:8>  SRR Load  \nEnable  AutoClr  \nFreq  \nAccum  AutoClr  \nPhase  \nAccum  Sine / \nCosine \nSelect  Clear  \nFreq  \nAccum  Clear  \nPhase  \nAccum  SDIO  \nInput  \nOnly  LSB \nFirst  0x00  \n<23:16>  Automatic  \nSync  \nEnable  Software  \nManual  \nSync  Linear  \nSweep  \nEnable  Not \nUsed  Not  \nUsed  Not Used  Not Used  Not  \nUsed  0x00  \n<31:24>  RAM  \nEnable  RAM  \nDestination  Internal Profile Control <2:0>  Load ARR  \nControl  OSK  \nEnable  Auto  \nOSK  \nEnable  0x00  \nControl  \nFunction  \nRegister  \nNo. 2 (CFR2)  \n(0x01)  <7:0>  REFCLK Multiplier  VCO  \nRange  Charge Pump  \nCurrent <1:0>  0x00  \n<15:8>  Not Used  High  \nSpeed  \nSync  \nEnable  Hardware  \nManual  \nSync  \nEnable  XTAL  \nOUT  \nEnable  Not  \nUsed  0x00  \n<23:16>  Not Used  0x18  \nAmplitude  \nScale Factor  \n(ASF) (0x02)  <7:0>  \n(0x07)  Amplitude Scale Factor Register <7:0>   \n<15:8>  Auto Ramp Rate  \nSpeed Control <1:0>  Amplitude Scale Factor Register <13:8>   \nAmplitude  \nRamp Rate  \n(ARR) (0x03)  <7:0>  Amplitude Ramp Rate Register<7:0>   \nFrequency  \nTuning  \nWord  \n(FTW0)  \n(0x04)  <7:0>  Frequency Tuning Word No. 0 <7:0>  0x00  \n<15:8>  Frequency Tuning Word No. 0 <15:8>  0x00  \n<23:16>  Frequency Tuning Word No. 0 <23:16>  0x00  \n<31:24>  Frequency Tuning Word No. 0 <31:24>  0x00  \nPhase Offset  \nWord (POW0)  \n(0x05)  <7:0>   Phase Offset Word No. 0 <7:0>  0x00  \n<15:8>  Open<1:0>  Phase Offset Word No. 0 <13:8>  0x00  \nFrequency  \nTuning  \nWord (FTW1)  \n(0x06)  <7:0>  Frequency Tuning Word No. 1 <7:0>   \n<15:8>  Frequency Tuning Word No. 1 <15:8>   \n<23:16>  Frequency Tuning Word No. 1 <23:16>   \n<31:24>  Frequency Tuning Word No. 1 <31:24>   \nNegative  \nLinear  \nSweep  \nControl  \nWord ( NLSCW )  \n(0x07) <7:0>  Falling Delta Frequency Tuning Word <7:0>  PS0 = 0 \n<15:8>  Falling Delta Frequency Tuning Wor d<15:8>  PS0 = 0 \n<23:16>  Falling Delta Frequency Tuning Word <23:16>  PS0 = 0 \n<31:24>  Falling Delta Frequency Tuning Word <31:24>  PS0 =  0 \n<39:32>  Falling Sweep Ramp Rate Word <7:0>  PS0 = 0 \nPositive  \nLinear  \nSweep  \nControl  \nWord ( PLSCW )  \n(0x08) <7:0>  Rising Delta Frequency Tuning Word <7:0>  PS0 = 1 \n<15:8>  Rising Delta Frequency Tuning Word <15:8>  PS0 = 1 \n<23:16>  Rising Delta Frequency Tuning Word<23:16>  PS0 = 1 \n<31:24>  Rising Delta Frequency Tuning Word <31:24>  PS0 = 1 \n<39:32>  Rising Sweep R amp Rate Word <7:0>  PS0 = 1 \n \n \nData Sheet  AD9954  \n \nRev. C | Page 29 of 40 CONTROL REGISTER BIT  DESCRIPTIONS  \nControl Function Register No.  1 (CFR1)  \nThe CFR1 is used to control the various functions, features,  \nand modes of the AD9954. The functionality o f each bit follows.  \nCFR1<31>: RAM Enable Bit  \nCFR1<31> = 0 (default). The RAM is disabled for operation. \nEither single -tone mode of operation or linear sweep mode of \noperation is enabled.  \nCFR1<31> = 1. The RAM is enabled for operation. Access \ncontrol for normal operation is controlled via the mode control bits of the RSCW for the current profile.  \nCFR1<30>: RAM Destination Bit  \nIf CFR1<31> is cleared, CFR1<30> is ignored . \nCFR1<30> = 0 (default). If CFR1<31>  is set, the RAM output \ndrives the phase accumulator (provides the FTW).  \nCFR1<30> = 1. If CFR1<31> is set, the RAM output drives the \nphase -offset adder (POW).  \nCFR1<29:27>: Internal Profile Control Bits  \nThese bits cause the profile bits to be ignored when the RAM is being used and puts the AD9954 into an automatic profile loop \nsequence that allows the user to implement a frequency/phase composite sweep that runs without external inputs. See the Internal Profile Control  section for more details.  \nCFR1<26>: Load Amplitude Ramp Rate Control Bit  \nCFR1<26> = 0 (default). The amplitude ramp rate timer is loaded only upon timeout (timer == 1); it is not loaded due to \nan I/O update  input signal.  \nCFR1<26> = 1. The amplitude ramp rate timer i s loaded upon \neither timeout (timer == 1) or at the time of an I/O update  \ninput signal. \nCFR1<25>: Shaped On -Off Keying Enable Bit  \nCFR1<25> = 0 (default) . Shaped on -off keying is by passed.  \nCFR1<25> = 1. Shaped on -off keying is enabled. See also \nCFR1<24>.  \nCFR1<24>: Auto shaped On -Off Keying Enable Bit  \nIf CFR1<25> is cleared, CFR1<24> is ignored . \nCFR1<24> = 0 (default). Manual shaped on -off keying \noperation. See the Shaped On -Off Keying  section for details.  \nCFR1<24> = 1. Auto shaped on -off keying operation. See the \nShaped On -Off Keying  section for details.  \nCFR1<23>: Automatic Synchronization Enable Bit  \nCFR1<23> = 0 (default). The automatic synchronization feature \nof multiple AD9954s is inactive.  \nCFR1<23> = 1. The automatic synchroniza tion feature of \nmultiple AD9954s is active. See the Synchronizing Multiple AD9954s  section for details.  CFR1<22>: Software Manual Synchronization of Multiple \nAD9954s  \nCFR1<22> = 0 (default). The manual synchronization feature is \ninactive.  \nCFR1<22> = 1. The software -controlled manual synchronization \nfeature is executed. The SYNC_CLK rising edge is advanced by one SYNC_CLK cycle , and this bit is auto clear ed. To advance \nthe rising edge multiple times, this bit needs to be set once for each advance.  \nCFR1<21>: Linear Frequency Sweep Enable  \nCFR1<21> = 0 (default). The linear frequency sweep capability of the AD9954 is inactive.  \nCFR1<21> = 1.  The linear freque ncy sweep capability of the \nAD9954 is enabled. See the Linear Sweep Mode  section for details.  \nCFR1<20:16>: Not Used, Leave Clear  \nCFR1<15>: Linear Sweep R amp Rate Load Control Bit  \nCFR1<15> = 0 (default). The linear sweep ramp rate timer is \nloaded only upon timeout (timer = = 1); it is not loaded due to \nan I/O update  input signal.  \nCFR1<15>  = 1. The linear sweep ramp rate timer is loaded \neither upon timeout (timer == 1) or at the time of an I/O \nupdate  input signal.  \nCFR1<14>: Auto clear Frequency Accumulator Bit  \nCFR1<14> = 0 (default). The current state of the frequency \naccumulator is not impa cted by receipt of an I/O update  signal. \nCFR1<14> = 1. The frequency accumulator is automatically and \nsynchronously cleared for one cycle upon receipt of an I/O UPDATE signal.  \nCFR1<13>: Auto clear Phase Accumulator Bit  \nCFR1<13> = 0 (default) . The current s tate of the phase \naccumulator is not impacted by receipt of an I/O update  signal. \nCFR1<13> = 1. The phase accumulator is automatically and synchronously cleared for one cycle upon receipt of an I/O update  signal. \nCFR1<12>: Sine/Cosine Select Bit  \nCFR1<12>  = 0 (default). The angle -to-amplitude conversion \nlogic employs a cosine  function.  \nCFR1<12> = 1. The angle -to-amplitude conversion logic  \nemploys a sine  function.  \nCFR1<11>: Clear Frequency Accumulator  \nCFR1<11> = 0 (default). The frequency accumulator funct ions \nas normal.  \nCFR1<11> = 1. The frequency accumulator memory elements are cleared and held clear until this bit is cleared.  \n \n \nAD9954  Data Sheet  \n \nRev. C | Page 30 of 40 CFR1<10>: Clear Phase Accumulator  \nCFR1<10> = 0 (default). The phase accumulator functions as \nnormal.  \nCFR1<10> = 1. The phase acc umulator memory elements are \ncleared and held clear until this bit is cleared.  \nCFR1<9>: SDIO Input Only  \nCFR1<9> = 0 (default). The SDIO pin is bidirectional (2 -wire \nserial programming mode).  \nCFR1<9> = 1. The  SDIO is configured as an input -only pin  \n(3-wire  serial programming mode).  \nCFR1<8>: LSB First  \nCFR1<8> = 0 (default). MSB first format is active.  \nCFR1<8> = 1. LSB first format is active.  \nCFR1<7>: Digital Power -Down Bit  \nCFR1<7> = 0 (default). All digital functions and clocks are active.  \nCFR1<7> = 1. All non -I/O digital functionality is suspended, \nlowering the power significantly.  \nCFR1<6>: Comparator Power -Down Bit  \nCFR1<6> = 0 (default). The comparator is enabled for operation.  \nCFR1<6> = 1. The comparator is disabled and is in its lowest \npower dissipation  state.  \nCFR1<5>: DAC Power -Down Bit  \nCFR1<5> = 0 (default). The DAC is enabled for operation.  \nCFR1<5> = 1. The DAC is disabled and is in its lowest power dissipation state.  \nCFR1<4>: Clock Input Power -Down Bit  \nCFR1<4> = 0 (default). The clock input circuitr y is enabled for \noperation.  \nCFR1<4> = 1. The clock input circuitry is disabled and the  \ndevice is in its lowest power dissipation state.  \nCFR1<3>: External Power -Down Mode  \nCFR1<3> = 0 (default). The external power -down mode  \nselected is the rapid recovery power -down mode. In this mode, \nwhen the PWRDWNCTL input pin is high, the digital logic  \nand the DAC digital logic are powered down. The DAC bias \ncircuitry, PLL, oscillator, and clock input circuitry are not powered down . CFR1<6> determines whether the comp arator \nis powered down . CFR1<7>, and CFR1 <5:4> are ignored.  \nCFR1<3> = 1. The external power -down mode selected is the \nfull power -down mode. In this mode, when the PWRDWNCTL \ninput pin is high, all functions are powered down. This includes the DAC and PLL, w hich take a significant amount of time to \npower up. CFR1<7:4> are all ignored. \n \n  CFR1<2>: Linear Sweep No -Dwell Bit  \nIf CFR1<21> is clear, this bit is a don’t car e (ignored).  \nCFR1<2> = 0 (default). The linear sweep no -dwell function is \ninactive. If the  no-dwell mode is inactive when the sweep \ncompletes, sweeping does not restart until an I/O update  or \nchan ge in profile initiates  another sweep as previously described. \nThe output frequency holds at the final value in the sweep . \nCFR1<2> = 1. The linear sweep n o-dwell functio n is active. If \nthe no -dwell  mode is active when the sweep completes, the \nphase accumulator is cleared. The phase accumulator remains \ncleared until another sweep is initiated via an I/O update  input \nor change in profile.  \nCFR1<1>: SYNC_CLK D isable Bit  \nCFR1<1> = 0 (default). The SYNC_CLK pin is active.  \nCFR1<1> = 1. The SYNC_CLK pin assumes a static Logic 0 state to minimize noise generated by the digital circuitry. The synchronization circuitry remains active internally to maintain normal devi ce timing.  \nCFR1<0>: Not Used, Leave Clear  \nControl Function Register No.  2 (CFR2)  \nThe CFR2 is used to control the various functions, features, and modes of the AD9954, primarily related to the analog sections of the chip.  \nCFR2<23:12>: Not Used, Leave Clea r \nCFR2<11>: High Speed Sync Enable Bit  \nCFR2<11> = 0 (default). The high speed sync enhancement is off.  \nCFR2<11> = 1. The high speed sync enhancement is on. This \nbit should be set when using the autosynchronization feature \nfor SYNC_CLK > 50 MHz (SYSCLK >  200 MSPS).  \nCFR2<10>: Hardware Manual Sync Enable Bit  \nCFR2<10> = 0 (default). The hardware manual sync function is off.  \nCFR2<10> = 1. The hardware manual sync function is enabled. While this bit is set, a rising edge on the SYNC_IN pin cause s \nthe device to advance the SYNC_CLK rising edge by one \nREFCLK cycle. T his bit does not self -clear.  \nCFR2<9>: CRYSTAL OUT Enable Bit  \nCFR2<9> = 0 (default). The CRYSTAL OUT pin is inactive.  \nCFR2<9> = 1. The CRYSTAL OUT pin is active. The crystal \noscillator circuitry output drives the CRYSTAL OUT pin, which \ncan be used as a reference frequency  for additional devices . \nCFR2<8>: Not Used, Leave Clear  \nCFR2<7:3>: Reference Clock Multiplier Control Bits  \nThis 5 -bit word controls the multiplier value out of the cloc k-\nmultiplier (PLL) block. See the Clock Multiplier  section for \nmore details. \n \nData Sheet  AD9954  \n \nRev. C | Page 31 of 40 CFR2<2>: VCO Range Control Bit  \nCFR2<2> = 0 (default), VCO operates betw een 100 MHz and \n250 MHz.  \nCFR2<2> = 1, VCO operates between 250 MHz and 400 MHz.  \nCFR2<1:0>: Charge Pump Current Control Bits  \nThese bits are used to control the current setting on the charge \npump. The default setting, CFR2<1:0>, sets the charge pump \ncurren t to the default value of 75 µA. For each bit added , 25 µA \nof current is added to the charge pump current:  \n01 = 100 µA, 10 = 125 µA, and 11 = 150 µA.  \nOTHER REGISTER DESCR IPTIONS  \nAmplitude Scale Factor (ASF)  \nThe ASF  register stores the 2 -bit auto  ramp rat e speed value and \nthe 14 -bit amplitude scale factor used in the output shaped \nkeying (OSK) operation. In auto -OSK operation, ASF <15:14> \ntells the OSK block how many amplitude steps to take for each  \nincrement or decrement. ASF<13:0> sets the maximum value \nachievable by the OSK internal multiplier. In manual OSK mode , ASF<15:14> has no effect. ASF <13:0> provide the output \nscale factor directly. If the OSK is disabled using CFR1<25>, this register has no effect on device operation.  \nAmplitude Ramp Rate (ARR)  \nThe ARR register stores the 8 -bit amplitude ramp r ate used in \nthe auto -OSK mode. See the Amplitude Control Options  \nsection for details.  \nFrequency Tuning  Word 0 (FTW0)  \nThe frequency tuning word is a 32 -bit register that controls the \nrate of accumulation in the phase accumulator of the DDS core. Its specific role is dependent on the device mode of operation.  \nPhase Offset Word (POW)  \nThe phase offset word is a 14- bit register that stores a phase \noffset value. See the Phase Offset Word Mux  section for \nadditional  details . \nFrequency Tuning Word 1 (FTW1)  \nThe frequency tuning word is a 32 -bit register that sets the  \nupper frequency in a linear sweep operation.  \nRegister 0x07 and Register 0x08 are multifunctional registers . \nNegative and Positive Linear Sweep Control Word \n(NLSCW  and PLSCW)  \nWhen linear sweep b it is enabled, Register 0x07 provides the \nnegative linear sweep control word (NLSCW) and Register 0x08 \nprovides the positive linear sweep control word (PLSCW). Each of the linear sweep control words contains a 32 -bit delta frequency  \ntuning word (FDFTW  and RDFTW) and an 8 -bit sweep ramp \nrate word (FSRRW  and RSRRW). See the Modes of Operation  \nsection for more details.  \n \n RAM Segment Control Words (RSCW0, RSCW 1, RSCW2, \nand RSCW3)  \nWhen linear sweep is disabled, Register  0x07, Register 0x08, \nRegister 0x09, and Register 0x0A act as the RAM segment \ncontrol words for each of the RAM segments. Each of the RAM \nsegment control words is comprised of a RAM segment addres s \nramp rate, a final address value, a beginning address value, a \nRAM segment mode control, and a no-dwell b it. Note the \ndiscontinuities of the a ddress registers, since  they may make \nprogramming a little more challenging.  \nRAM Segment Address Ramp Rate, RSCW <39:24>  \nFor RAM modes that step through address values, such as \nramping, this 16 -bit word defines the number of SYNC_CLK \ncycles the RAM controller dwells at each address. A value of 0 is invalid. Any other value from 1 to 65 ,535 can be used.  \nRAM Segment Final Address RSCW<9:8>, RSCW<23:16>  \nThis discontinuous 10 -bit sequence defines the final address \nvalue for the given RAM segment. The order in which the bits \nare previously listed is MSB first: RSCW<9> is the MSB and \nRSCW<16> is the LSB of the final addre ss value.  \nRAM Segment Beginning Address RSCW<3:0>,  \nRSCW <15:10>  \nThis discontinuous 10 -bit sequence defines the final address \nvalue for the given RAM segment. The order in which the bits \nare previously listed is MSB first: RSCW<3> is the MSB and \nRSCW<10> is the LSB of the final address value.  \nRAM Segment No -Dwell Bit RSCW<4>  \nThis bit sets the no -dwell feature of sweeping profiles. In \nprofiles that sweep from a defined beginning to a defined end, the RAM controller can either dwell at the final address unti l \nthe next profile is selected or, when this bit is set, the RAM controller return s to the beginning address and dwells there \nuntil the next profile is selected.  \nRAM Segment Mode Control RSCW<7:5>  \nThis 3 -bit sequence determines the RAM segment’s mode of \noperation. There are only five possible RAM modes, so only \nvalues of 0  to 4 are valid  (see Table 7). \nAD9954  Data Sheet  \n \nRev. C | Page 32 of 40 LAYOUT CONSIDERATION S \nFor the best performance, the  following layout guidelines \nshould be observed. Always separate the analog power supply \n(AVDD) and the digital power supply (DVDD), even if just \nfrom two different voltage regulators driven by a common supply. Likewise, the ground connections (AGND  and DGND) \nshould be kept separate as far back to the source as possible ( for \nexample , separate the ground planes on a localized board, even \nif the grounds connect to a common point in the system). Bypass capacitors should be placed as close to device pins as possible. Usually a multitiered bypassing scheme consisting of a \nsmall high frequency capacitor (100 pF) placed close to the supply pin and progressively larger capacitors (0.1 µF  and 10 µF) \nfurther back to the actual supply source works best.   \n \n \nData Sheet  AD9954  \n \nRev. C | Page 33 of 40 DETAILED PROGRAMMING EXAMPLES  \nSINGLE -TONE MODE  \n1. Write to Control Register 1 instructing the part to \nautoclear the phase accumulator whenever the phase offset \nword changes and issues an I/O update. Set Bit 13 in the \nCFR1 register. The address for CFR1 is 0; therefore, an \ninstruction byte of 0x00 is sent and 0x00 00 00 20 for data. \nNote that users must write to all four bytes of the register.  \n2. Write to Control Register 2 setting the clock multiplier \nvalue to 20, and the VCO range bit to its upper value. In CFR2, Bit  7 to Bit 3 control the multiply value. To get a \nmultiplied value of 20 from 5 bits, the binary value is \n10100. As previously mentioned, also send Bit 2 to put the VCO into its upper range (to get 400  MHz). Therefore, the \ninstruction byte is 0x01 and 0x00 00 A4 for data.  \n3. Calculate the tuning word to generate a 122  MHz output \nfrom a 400 MSPS clock, load it into FTW0, and latch the  \ndata written to the I/O buffers into their respective registers. The frequency tuning word equation becomes (122 MHz/ 400 MHz) × 2\n32, which yiel ds 0x4E 14 7A E1. \nSend the Instruction Byte 0x04 and four data bytes of 0x4E 14 7A E1. Issue an I/O update, which transfers the data into the part.  \nWhenever a phase change is desired, calculate and write the phase offset word to the part and issue an I/O update. \nFor example, if the first value is 45°, the phase offset word \nis (45/360) × 2\n14, or in decimal, 2048. Therefore, write an \ninstruction byte of 0x05 and Data Byte 0x0800. When an  \nI/O update is issued, the phase accumulator clears, which \nstarts it fr om a known phase of 0°. It again accumulates at a \n122 MHz rate, except now phase shifting each and every sample by 45°.  \nIn this example, the part is programmed to output a 122  MHz \nsingle -tone carrier, the device is clocked with a 20  MHz crystal \noscillator , and the clock multiplier is used to push the internal \nsystem clock up to 400 MHz. Phase offsets are then added to \nthe carrier.  \nThe programming steps include the following:  \nLINEAR SWEEP MODE \nIn this example, the part is programmed to generate a chirp \nfrom 61.53 MHz to 62.73 MHz. The chirp up is in 1.20 µs,  \nthe chirp down is in 1.8  µs, and the chirp is made as finely \nlinearized as possible. Therefore, users must calculate and \nprogram:  \n• FTW0 for  61.53 MHz (the start frequency)  \n• FTW1 for 62.73 MHz (the stop frequency)  \n• CFR1 to put the part into linear sweep mode  \n• The positive linear sweep control word (PLSCW), to make \nas linearized a chirp in 1.20 µs  \n• The negative linear sweep control word (NLSCW), t o make \nas linearized a chirp in 1.80 µs  The last example programmed the clock multiplier; therefore, start with a 400 MSPS clock. FTW0 is (61.53/400) × 2\n32 or \n0x27611340, and FTW1 is (62.73/400) × 232 or 0x2825AEE6.  \nTo turn the linear sweep on, set CFR1<21>.  \nThe PLSCW and NLSCW are five bytes wide: one byte for the ramp rate and four bytes for the incremental frequency value. To begin, calculate the ramp rate , and c over 1.2  MHz on both \nsweeps. The ramp rate tells the part how many SYNC_CLK cycles (for SYS CLK cycles) to send at each incremental value. \nWhen the shortest time possible is spent at each incremental \nfrequency, the most linearized sweep is achieved; therefore, the part \nshould only spend one SYNC_CLK period at each incremental frequency, which ens ures that the smallest frequency steps possible \nare taken. For a 400 MSPS SYSCLK, the result is a 100  MHz \nSYNC_CLK rate or a 10 ns SYNC_CLK period. This means on the finest resolution, 120 incremental steps squeeze into the rising sweep (1.2 µs/10 ns) and 180 on the falling sweep (1.8 µs/10 ns).  \nFor the rising delta frequency, a 1.2 MHz/120 steps is calculated,  \nwhich means each step is approximately 10  kHz for the rising \ndelta frequency and approximately 666.6666 Hz for the falling \ndelta frequency. The log ic in the linear sweep block ensures that \nFTW1 on a rising sweep or FTW0 on a falling sweep is not exceeded. If the exact incremental tuning word is not achieved using the 32 -bit resolution, round up, not down, to ensure the \nentire range during the sweep i s covered. To calculate  the rising \ndelta frequency word, simply calculate (10 K/400 M) × 2\n32 = \n0x0001A36F. Combining the rising ramp rate, first byte, and the \nrising delta frequency, the second byte to fifth byte yields the \nPLSCW: 0x010001A36F. Likewise, t he NLSCW works out to \n0x0100001BF4. Table 14 is a summary table of instruction and \ndata bytes to write to.  \nTable 14. Linear Sweep  Example Write Instructions  \nRegister  Instruction Byte  Data Byte  \nCFR1  0x00  0x00200000  \nFTW0  0x04  0x27611340  \nFTW1  0x06  0x2825AEE6  \nNLSCW  0x07  0x0100001BF4 \nRLSCW  0x08  0x010001A36F  \n \nRAM MODE  \nThis example programs the RAM. Use the RAM on the AD9954 to simulate the nonlinear filter shape of a Gaussian filter response  \non the FSK data. Begin by plotting the filter response from F0 to \nF1 and from F1 to F0. The transition time specification  (see \nTable 1) tells how long it takes to transition from F0 to F1 and \nfrom F1 to F0, either as an actual time value or as a fraction of \nthe symbol rate. Both ways show how long it can take to change symbo ls, and for this application, it is 100 ns. To program the \nRAM, decide how many RAM segments to  use, program the \nRAM segment control word for each of those segments, and load the RAM data for each of those segments.  \nAD9954  Data Sheet  \n \nRev. C | Page 34 of 40 Because there is a ramp -up, but no ramp -down, RAM mode, \ntwo RAM segments are generated ; one for the transition from \nF0 to F1 , and one for the transition from F1 to F0. Step through \nthe intermediary frequencies as quickly as possible, because the \nfaster the steps, the less the output frequency d eviates from the \nideal frequency response of the filter. The fastest the AD9954 can step through the values in the RAM is at the SYNC_CLK \nrate, or ¼ of the SYSCLK rate, which works out to 10 ns, \nassuming the maximum SYSCLK rate of 400 MSPS. Dividing the to tal transition time of 100 ns by the time for each transition,  \n100 steps can be taken. The intermediary frequencies are solved \nby looking at the instantaneous frequency on the curve every 10 ns and by recording that value. Th is gives 200 frequency \nvalues, 100 representing the change from F0 to F1 and 100 \nrepresenting the change from F1 to F0. This is the information needed to program the RAM.  \nBegin by programming CFR1 to set the RAM enable bit. Calculate and program RSCW0 and RSCW1. Each of the RAM \nsegment  control words has an address ramp rate (16 bits), a \nfinal address (10 bits), a beginning address (10 bits), a mode \ncontrol value (3 bits), and a no- dwell flag. Stepping through the \nintermediary frequencies as quickly as possible was previously discussed; therefore, the ramp rate for each word is 0x0000. \nDefine RAM Segment 0 to occupy the RAM space from \nAddress 0 to Address 99, which gives 100 values. Define RAM \nSegment 1 to occupy Address 100 to Address 199 (also 100 \nvalues). Look at the modes of operation  choice and recognize \nthat the ramp -up mode is used to step through each of the \naddresses and then holds the final value in the profile. \nTherefore, for each RSCW , the mode control bits are b’001. \nBecause  staying at the last value is recommended, the no -dwell \nbit is 0. To form the data for each RSCW , combine these values. For RSCW0, it is 0x0100630020. For RSCW1, it is 0x0100C79021. Because the words that comprise the RSCW are not contiguous, care must be taken in calculating the RSCW . \nMake a chart of each o f the subwords in order: address ramp \nrate, final address, beginning address, mode, and no dwell. \nWrite the binary values for each subword, and then, with a copy of the register map printed out, write each of the binary bits into the map. When this is comp leted, the individual bytes can be read from \nthe map. For example, Table 15 shows how RSCW1 would appear.  Table 15. RAM Mode Register Table S ettings  \nRAM  \nSegment  \nControl  \nWord  \nNo. 1  \n(RSCW1)  \n(0x08)  <7:0>  RAM  \nSegment 1  \nMode Control  \n<2:0>  \n001 No- \nDwell  \nActive  \n0 RAM Segment 1  \nBeginning  \nAddress <9:6>  \n0001  \n<15:8>  RAM Segment 1  \nBeginning  \nAddress <5:0>  \n100100  RAM Segment 1  \nFinal Address <9:8> \n00 \n<23:16>  RAM Segment 1 Final Address <7:0>  \n11000111  \n<31:24>  RAM Segment 1  Address Ramp Rate  \n<15:8>  00000000  \n<39:32>  RAM Segment 1 Address Ramp Rate  \n<7:0>  00010000  \nThe RSCW0 and RSCW1 values must be loaded into their \nregisters before attempting to write data to RSCW0 and \nRSCW1; therefore, issue an I/O update . \nThe next step is to convert each of the intermediary frequencies \ninto a frequency tuning word according to  \n322× =SYSCLKfiftw  \nwhere:  \nfi is the desired intermediary frequency .  \nSYSCLK  is the system clock rate.  \nOnce this is complete, the result for each profile should be a \nvector of 100 32 -bit words. To write RAM Segment 0, select \nProfile 0 (PS0 = 0, PS1 = 0) , and then write the instruction byte \nb’00001011, which indicates a RAM write operation is going to \nbe performed. The serial port I/O controller recognizes this and polls the profile select pins, thus determining that Profile 0 is \nthe target storage locatio n for the data out of RSCW0 previously \nentered. It now knows to put the first word at Address 0, the last \nword at Address 99, and that there are 100 words in total. \nProceed to load all 100 32 -bit frequency words into the RAM. \nWhen this is done, write the d ata to RAM Segment 1. First, \nchange to Profile 1 (PS0 = 1, PS1 = 0), and then write the RAM instruction byte again. The device now knows to write the first word at Address 100, the last word at Address 199, and again that there are 100 words in total. Write all 100 32- bit words of \nRAM Segment 1 and issue an I/O update . Whenever the PS0 \npin is toggled (from 0 to 1), the part steps through the RAM segment, which is the Gaussian -shaped pattern programmed \ninto the RAM.  \n \nData Sheet  AD9954  \n \nRev. C | Page 35 of 40 SUGGESTED APPLICATION CIRCUITS  \n \n03374-012LPF AD9954\nREFCLKRF/IF INPUTMODULATED/\nDEMODULATED\nSIGNAL\n \nFigure 31. Synchronized LO for Upconversion/Down conversion  \n \n03374-013FILTERPHASE\nCOMPARATORLOOP\nFILTER\nAD9954\nTUNING\nWORDREF\nSIGNAL VCO\n \nFigure 32. Digitally Programmable Divide -by-N Function in PLL  \n \n03374-014TUNING WORD\nCMOS LEVEL CLOCKAD9954 DDS\nAD9954\nON-CHIP\nCOMPARATORIOUTIOUT LPF\nLPF\n \nFigure 33. Frequency Agile Clock Generator  \n03374-015CRYSTAL\nFREQUENCY\nTUNING\nWORDPHASE\nOFFSET\nWORD 2I/I-BAR\nBASEBANDFREQUENCY\nTUNING\nWORDPHASE\nOFFSET\nWORD 1\nQ/Q-BAR\nBASEBANDSYNC_IN\nAD9954 DDSREFCLKREFCLK\nREFCLKLPF\nSYNC_OUT CRYSTAL OUTAD9954 DDSIOUTIOUT\nLPF\nIOUTIOUTRF OUT\n \nFigure 34. Two AD9954s Synchronized to Provide I and  \nQ Carriers with Independent Phase Offsets for Nulling  \n \n \n \n \nAD9954  Data Sheet  \n \nRev. C | Page 36 of 40 EVALUATION BOARD SCHEMATICS  \nC1\n0.1µFC20.1µF C3\n0.1µFC80.1µF C11\n0.1µFC40.1µF C5\n0.1µFC36\n39pF\nC35\n39pF\nC6\n0.1µFC70.1µF\nGNDAVDDC10\n0.1µFC12\n0.1µF\nGNDDVDD\nC9\n0.1µFC46\n7.5pFC4333pF\nC33\nSEE\nNOTE 2C3833pFC4122pFR1450ΩC4239pF\nC45\n22pFC44\n39pFC39\n7.5pFC37\n22pFC40\n39pF\nL6\n20nHL4\n18nHL5\n12nH\nL8\n20nHL7\n18nHL9\n12nH\nGNDDVDD_I/ORESET_DUT1\nPWRDWNCTRL_DUT1\nDVDD\nGND\nGND36\n35\n34\n33\n32\n31\n30\n29\n28\n27\n26\n251\n2\n3\n4\n3\n15\n45\n6\n7\n8\n9\n10\n11\n12\n4AVDD\n5\n63\n2\n1AVDD\nAVDD\nAVDDGNDAD9954\nU7DUT 1\nJ5\nCOMP_OUT_DUT1FUD_DUT1\nDVDD\nGND\nAVDD\nGND\nGNDAVDD\nXTAL_DUT2\nCLKMODESEL_DUT1\nJ2\nW1\n4\n1 23\n48\n47\n46\n45\n44\n43\n42\n41\n40\n39\n38\n37PS1_ DUT1\nPS0_ DUT1\nOSK_DUT1\nSYNC MULTI_DUT2\nSYNC MULTI_DUT1\nDVDD_I/O\nGND\nSDIO\nSCLK\nCSB_DUT1\nI/O_SYNC _DUT1SDO13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24AVDD\nAVDD\nAVDDGND\nGND\nAVDD\nGND\nGNDAVDD\nAVDDGNDNOTE 2\nNOTE 1NOTE 4NOTE 3\nGND AVDDFILTER_IN_DUT1\nJ1FILTER_OUT_DUT1J3REF_CLK_DUT1BALUN\nT1\nJ4CRYSTAL OUT\nDUT2GND\nGND\nXTAL_DUT2×1 25MHz\nNOTES\n1.THE FULL-SCALE DAC OUTPUT CURRENT IS CONTROLLED BY MEANS OF AN EXTERNAL\nRESISTANCE (R SET) CONNECTED BETWEEN THE DAC_R SET PIN AND GROUND. RESISTOR\nVALUES FOR FULL-SCALE CURRENTS ARE: 3.92kΩ = 10mA, 5.23kΩ = 7.5mA, 7.87kΩ = 5.0mA,15.8kΩ = 2.5mA.\n2.C33 IS USED FOR A SIMULATED CAPACITANCE LOAD FOR THE COMPARATOR OUT. THE\nCAPACITANCE VALUE SHOULD NOT EXCEED 10pF.\n3.CAPACITORS C48 AND C49 SHOULD BE SOLDERED IN PLACE WHEN THE REF_CLK_DUT1\nINPUT IS USED. CAPACITORS C35 AND C36 SHOULD BE SOLDERED IN PLACE WHEN\nCRYSTAL ×1 IS USED IN CONJUNCTION WITH THE INTERNAL OSCILLATOR.\n4.USE EITHER RESISTORS R4 AND R5 (COMPARATOR INPUTS) OR R6 AND R7 (FILTERED\nOUTPUT) FOR THE IOUT AND IOUT. DO NOT USE BOTH SETS AT THE SAME TIME.RESET\nPWRDWNCTL\nDVDD\nDGND\nAGND\nCOMP_IN\nCOMP_IN\nAVDD\nCOMP_OUT\nAVDD\nAVDDAGNDI/O UPDATE\nDVDD\nDGND\nAVDD\nAGND\nAGNDAVDD\nOSC/REFCLKOSC/REFCLK\nCRYSTAL OUT\nCLKMODESELECT\nLOOP_FILTER\nPS1\nPS0\nOSK\nSYNC _CLK\nSYNC _IN\nDVDD_I/O\nDGND\nSDIO\nSCLK\nCS\nIOSYNCSDOAVDD\nAGND\nAGND\nAVDD\nAGND\nAVDD\nAVDD\nIOUT\nIOUT\nAGND\nDAC _RSETDACB P\nC47\n1µFR10\n3.92k ΩR5\n0ΩR4\n0ΩR8\n25ΩR3\n243Ω\nR6\n0ΩR150Ω\nR9\n25Ω R70Ω\nC3013pFC50\n13pF\nL1\n39nH\nC3127pFC52\n6.8pF\nL2\n56nH\nC29\n33pFC32\n22pFC51\n2.2pF\nL3\n68nHC34\n0.01µFC49\n0.1µFC48\n0.1µF\n03374 -033\n \nFigure 35. Evaluation Board Channel 1   \nData Sheet  AD9954  \n \nRev. C | Page 37 of 40 \nC21\n0.1µFC20\n0.1µFC19\n0.1µFC18\n0.1µFC23\n0.1µFC16\n0.1µFC15\n0.1µFC14\n0.1µFC13\n0.1µF\nGNDAVDDC24\n0.1µFC22\n0.1µF\nGNDDVDD\nC17\n0.1µF\nGNDDVDD_I/ORESET_DUT2\nPWRDWNCTRL_DUT2\nDVDD\nGND\nGND36\n35\n34\n33\n32\n31\n30\n29\n28\n27\n26\n251\n2\n3\n4\n3\n15\n45\n6\n7\n8\n9\n10\n11\n12\n4AVDD\n5\n63\n2\n1AVDD\nAVDD\nAVDDGNDRESET\nPWRDWNCTL\nDVDD\nDGND\nAGND\nAD9954\nU8DUT 2\nCOMP_IN\nCOMP_IN\nAVDD\nCOMP_OUT_DUT2\nJ9COMP_OUT\nAVDD\nAVDDAGNDFUD_DUT2\nDVDD\nGND\nAVDD\nGND\nGNDAVDD\nXTAL_OUT\nCLKMODESEL_DUT2I/O UPDATE\nDVDD\nDGND\nAVDD\nAGND\nAGNDAVDD\nOSC/REFCLKOSC/REFCLK\nCRYSTAL OUT\nCLKMODESELECT\nLOOP_FILTER\nJ14\nW3\n4\n1 23\n48\n47\n46\n45\n44\n43\n42\n41\n40\n39\n38\n37PS1\nPS0\nOSK\nSYNC_CLK\nSYNC_IN\nDVDD_I/O\nDGND\nSDIO\nSCLK\nCS\nIOSYNCSDOPS1_DUT2\nPS0_DUT2\nOSK_DUT2\nSYNCMULTI_DUT1\nSYNCMULTI_DUT2\nDVDD_I/O\nGND\nSDIO\nSCLK\nCSB_DUT2\nI/O_SYNC_DUT2SDO13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24AVDD\nAGND\nAGND\nAVDD\nAGND\nAVDD\nAVDDAVDD\nAVDD AVDDGND\nGND\nAVDD\nGND\nGNDAVDD\nAVDD\nIOUT\nIOUT\nAGND\nDAC _RSETDACB P\nGNDNOTE 2\nNOTE 1NOTE 3\nAVDDGND\nCOMP_IN\nJ10\nGND AVDDFILTER_IN_DUT2COMP_IN\nJ11\nAVDDGND\nJ12FILTER_IOUT_DUT2J6REF_CLK_DUT2BALUN\nT4\nJ7CRYSTAL OUT\nDUT2GNDAVDD\nXTAL_OUTXTAL_DUT2\nNOTES\n1.THE FULL-SCALE DAC OUTPUT CURRENT IS CONTROLLED BY MEANS OF AN EXTERNAL\nRESISTANCE (R SET) CONNECTED BETWEEN THE DAC_R SET PIN AND GROUND. RESISTOR\nVALUES FOR FULL-SCALE CURRENTS ARE: 3.92kΩ = 10mA, 5.23kΩ = 7.5mA, 7.87kΩ = 5.0mA,\n15.8kΩ = 2.5mA.\n2.C58 IS USED FOR A SIMULATED CAPACITANCE LOAD FOR THE COMPARATOR OUT. THE\nCAPACITANCE VALUE SHOULD NOT EXCEED 10pF.\n3.FOR CRYSTAL OUT CLOCK OPERATION REMOVE T4, TERMINATE THE OSC/REFCLK TO\nEITHER AVDD (R30) OR GND (R31) AND SOLDER R21 IN PLACE. DO NOT USE R30 OR R31\nSIMULTANEOUSLY.1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n2550\n49\n48\n47\n46\n45\n44\n43\n42\n41\n40\n39\n38\n37\n36\n35\n34\n33\n32\n31\n30\n29\n28\n27\n26P1\nP2\nP3\nP4\nP5\nP6\nP7\nP8\nP9\nP10\nP11\nP12\nP13\nP14\nP15\nP16\nP17\nP18\nP19\nP20\nP21\nP22\nP23\nP24\nP25P50\nP49\nP48\nP47\nP46\nP45\nP44\nP43\nP42\nP41\nP40\nP39\nP38\nP37\nP36\nP35\nP34\nP33\nP32\nP31\nP30\nP29\nP28\nP27\nP26RESET_DUT1\nCLKMODESEL_DUT1\nPWRDWNCTRL_DUT1\nI/O_SYNC_DUT1\nFUD_DUT1\nOSK_DUT1\nPS1_DUT1\nPS0_DUT1\nCS_DUT2\nRESET_DUT2\nCLKMODESEL_DUT2\nPWRDWNCTRL_DUT2\nI/O_SYNC_DUT2\nFUD_DUT2\nOSK_DUT2\nPS1_DUT2\nPS0_DUT2\nRB_ENABLE\nSDIO\nSDO\nSCLK\nGNDU13CS_DUT1\nC65\n0.1µF\nC66\n0.1µF\nC58\nSEE NOTE 2R24\n10kΩ\nR11\n3.3kΩ\nR25\n10kΩ\nR2\n3.3kΩ\nC62\n1µFC61\n0.01µFC64\n0.1µFC63\n0.1µF\nR15\n3.92k ΩR9\n25ΩR22\n25ΩR16\n243ΩR21\n0ΩR30\n0Ω\nR31\n0Ω\nR18\n50Ω\nC59\n13pFC53\n13pF\nL10\n39nH\nC57\n27pFC60\n6.8pF\nL12\n56nH\nC56\n33pFC55\n22pFC54\n2.2pF\nL11\n68nH\n03374 -034\n \nFigure 36. Evaluation Board Channel 2  \n \nAD9954  Data Sheet  \n \nRev. C | Page 38 of 40 5\n4\n3\n2\n1VCC GND\nDVDDDVDD_I/O\nAVDD\n6\n5\n4\n3\n2789111\n15\n16\n17\n18\n191D\n74LVC574A 74LVC574A 74LVC574A\n74LVC14A 74LVC14AU12 U128D\n6\n5\n4\n3\n2789\n1D8D\n1D8DC1ENW2\nU9\n111\nC1ENU10\n111\nC1ENU11\n141312\n15\n16\n17\n18\n19141312\n1516\n17\n18\n19141312\n5\n6\n7\n8\n94321\n28\n29\n30\n31\n3227\n33\n34\n35\n36262520\n21\n22\n23\n2410\n11\n12\n13\n16\n17\n1814\n15\n19A3\nA4A5\nA6\nA7A2A1A0C0\n28\n29\n30\nC2\nB327\n33\n34\n35\nC3262520\n21\n22\n23\n24B6\nB7\nB5\nB4\n16\n17\n18C1\n15\n196\n5\n4\n3\n2\n6 54 3 2 1789\nPS1_DUT2\nOSK_DUT1\nOSK_DUT2\nFUD_DUT1\nFUD_DUT2PS0_DUT2PS1_DUT1PS0_DUT1\nPWRDWNCTRL_DUT2\nCLKMODESEL_DUT1\nCLKMODESEL_DUT2\nRESET_DUT1\nRESET_DUT2PWRDWNCTRL_DUT1I/O_SYNC_DUT2I/O_SYNC_DUT1\nCSB_DUT2\nREF_CLKCSB_DUT1SCLKSDIVCC : 20\nGND : 10VCC\nGND\nVCC : 20\nGND : 10VCC : 20GND : 10TB5\nU3\nC68\n0.1µFC69\n0.1µFC700.1µF C71\n0.1µFC720.1µF\nGNDVCCC26\n10µF\nGNDDVDD_I/O\nC2810µFSCLK1\nGNDVCCC25\n10µF\nGNDAVDD\nC2710µF\nGNDDVDDJ15R32\n0Ω\nR36\n10kΩ\nR3710kΩDIGITAL LOGIC\nREF CLK\n74LVC14AU12\n8\nVCCGND\nCLOCK FCLOCK ACLOCK D\nVCCSCLK1\nVCC9\n74LVC14AU12\n10 11\n74LVC14AC36CRPXU12\nU43\n12SDI SDIO\nSDORB_ENABLE74LVC125A\nU6\n910\n8\n74LVC125AU654\n6\n74LVC125AU6R35\n10kΩVCC\nR34\n10kΩ\n03374-035\n \nFigure 37. Evaluation Board Interface Logic  \nData Sheet  AD9954  \n \nRev. C | Page 39 of 40 OUTLINE DIMENSIONS \n \nFOR PROPER CONNECTION OF\nTHE EXPOSED PAD, REFER TO\nTHE PIN CONFIGURATION AND\nFUNCTION DESCRIPTIONS\nSECTION OF THIS DATA SHEET.\nCOMPLIANT TO JEDEC S TANDARDS MS-026-ABC0.50 BSC\nLEAD PITCH0.27\n0.22\n0.179.00\nBSC SQ\n7.00\nBSC SQ37 37 48 48\n1\n13121\n12\n24 13 242536\n2536\n1.05\n1.00\n0.950.20\n0.09\n0.08 MAX\nCOPLANARIT Y\nVIEW  A\nROTATED 90 ° CCWSEATING\nPLANE0° MIN\n7°\n3.5°\n0° 0.15\n0.050.75\n0.60\n0.451.20\nMAX\nVIEW  ATOP VIEW\n(PINS DOWN)BOT TOM VIEW\n(PINS UP)\nPIN 1\n3.50\nSQ\nEXPOSED\nPAD\n011708-A \nFigure 38. 48 -Lead Thin Quad Flat Package, Exposed Pad [TQFP_EP]  \n(SV-48-4) \nDimensions shown in millimeters  \n \nORDERING GUIDE  \nModel1 Temperature \nRange  Package Description  Ordering Quantity  Package Option  \nAD9954YSVZ  −40°C to +105°C  48-Lead Thin Quad Flat Package, Exposed Pad [TQFP_EP]   SV-48-4  \nAD9954YSVZ -REEL7  −40°C to +105°C  48-Lead Thin Quad Flat Package, Exposed Pad [TQFP_EP]  500 SV-48-4  \nAD9954/PCBZ  Evaluation Board    \n \n1 Z = RoHS Compliant Part.  \n \n \nAD9954 Data Sheet  \nNOTES \n©2003–2 017 Analog Devices, Inc. All rights reserved. Trademarks and   \nregistered trademarks are the property of their respective owners. \nD03374-0-2/17(C)  \n"}]
!==============================================================================!
### Component Summary: AD9954YSVZ-REEL7

#### Key Specifications:
- **Voltage Ratings**: 
  - AVDD, DVDD = 1.8 V ± 5%
  - DVDD_I/O = 3.3 V ± 5%
- **Current Ratings**: 
  - Full-Scale Output Current: 5 mA (typical), 10 mA (maximum)
- **Power Consumption**: 
  - Single-Tone Mode (Comparator Off): 162-171 mW
  - With RAM or Linear Sweep Enabled: 175-190 mW
  - Full-Sleep Mode: 20-27 mW
- **Operating Temperature Range**: 
  - -40°C to +105°C
- **Package Type**: 
  - 48-lead Thin Quad Flat Package (TQFP_EP)
- **Moisture Sensitive Level**: 
  - Level 1 (JEDEC J-STD-020E)
- **Special Features**: 
  - Integrated 14-bit DAC
  - Programmable phase/amplitude dithering
  - 32-bit frequency tuning accuracy
  - Phase noise better than -120 dBc/Hz
  - Automatic linear and nonlinear frequency sweeping
  - Multichip synchronization capability

#### Description:
The **AD9954** is a high-performance Direct Digital Synthesizer (DDS) designed for generating frequency-agile analog output sinusoidal waveforms up to 160 MHz. It features an integrated 14-bit Digital-to-Analog Converter (DAC) and operates with an internal clock speed of 400 MSPS. The device allows for precise frequency and phase tuning, making it suitable for applications requiring rapid frequency changes and fine adjustments.

#### Typical Applications:
- **Agile Local Oscillator (LO) Frequency Synthesis**: Used in RF and microwave applications where frequency agility is crucial.
- **Programmable Clock Generators**: Ideal for generating precise clock signals in various digital systems.
- **FM Chirp Source for Radar and Scanning Systems**: Utilized in radar systems for generating frequency-modulated signals.
- **Automotive Radars**: Employed in advanced driver-assistance systems (ADAS) for vehicle detection and navigation.
- **Test and Measurement Equipment**: Used in signal generation for testing electronic devices.
- **Acousto-Optic Device Drivers**: Drives acousto-optic devices for applications in telecommunications and laser systems.

This summary encapsulates the essential characteristics and applications of the AD9954YSVZ-REEL7, providing a clear understanding of its capabilities and use cases in electronic systems.