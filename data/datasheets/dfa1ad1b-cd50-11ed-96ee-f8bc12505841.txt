[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of AT32F407VGT7 production of ARTERY TECHNOLOGY from the text:AT32F 407 Series Data sheet  \n2022. 11.24 1 Ver 2.03 \nARM®-based 32-bit Cortex®-M4 MCU +FPU  with 2 56 to 1024 K B Flash,  \nsLib,  17 timers, 3 ADC s, 21 communication interfaces  (USBFS and \nEthernet ) \nFeature  \n\uf06e Core: ARM® 32-bit Cortex®-M4 CPU  with \nFPU \n− 240 MHz  maximum frequency, with a \nmemory protection unit (MPU) , single-cycle \nmultiplication and hardware division  \n− Floating point unit (FPU)  and  \n− DSP instructions  \n\uf06e Memories  \n− 256 to 1024 K Bytes of internal Flash \nmemory  \n− sLib: set any  part of main Flash as a secure \nlibrary that is code -excutable but  non-\nreadable  \n− SPIM  interface : interface up to  16 Mbytes of \nthe external SPI Flash  \n− Up to 96+128 K Bytes of SRAM  \n− External memory controller (XMC) with 16-\nbit data bus, supporting  multiplexed  \nPSRAM /NOR  and NAND memories  \n\uf06e XMC as LCD parallel interface, compatible \nwith 8080/6800  modes  \n\uf06e Powe r control (PWC)  \n− 2.6 to 3.6  V power  supply  \n− Power on reset ( POR ), low voltage reset \n(LVR), and power voltage monitoring (PVM ) \n− Low pow er modes: Sleep, Deepsleep , and \nStandby modes  \n− VBAT supply for LEXT, RTC, and forty-two \n16-bit battery powered  registers  (BPR)  \n\uf06e Clock and reset management  (CRM)  \n− 4 to 25 MHz crystal oscillator (HEXT)  \n− 48 MHz  internal factory -trimmed high speed \ninternal clock (HICK),  offers  1 % accuracy at \nTA = 25 ° C  and 2.5 %  accuracy at T A = -40 \nto +105 ° C, with auto maitc  clock calibration \n(ACC)  \n− 32 kHz crystal (LEXT)  \n− Low speed  internal clock (LICK)  \n\uf06e Analog  \n− 3 x 12 -bit 2 MSPS A/D converte rs, up to 16 \ninput channels  \n− Temperature sensor  (VTS) and internal  \nreference voltage (V INTRV) \n− 2 x 12 -bit D/A converters  \n\uf06e DMA : 14-channel DMA controller  \uf06e Up to 80 fast GPIOs \n− All mappable on 16  external interrupts \n(EXINT)  \n− Almost all 5 V -tolerant  \n\uf06e Up to 1 7 timers  (TMR)  \n− Up to 2 x 16-bit motor control PWM \nadvanced timers with dead -time generator \nand emergency brake  \n− Up to 8 x 16-bit + 2 x 32-bit timers, each with \nup to 4 IC/OC/P WM or pulse counter and \nquadrature encoder input  \n− 2 x 16 -bit basic timers to drive the DAC  \n− 2 x watchdog timers ( general WDT  and \nwindow ed WWDT ) \n− SysTick timer: a 24 -bit downcounter  \n\uf06e Up to 21 communication interfaces  \n− Up to 3 x I2C interfaces (SMBus/PMBus)  \n− Up to  8 x USART s (ISO7816  interface , LIN, \nIrDA capability, modem control ) \n− Up to 4 x SPIs (50 M bit/s), four with \nmultiplexed I2S (I2S2/I2S3 support full -\nduplex ) \n− Up to 2 x CAN  interface s (2.0B  Active ) \n− USB 2.0 full speed interface  supporting \ncrystal -less \n− Up to 2 x  SDIO  interfaces  \n− 10/100M Ethernet MAC with dedicated DMA \nand buffer (4 KBytes): IEEE1588 hardware \nsupport, MI I/RMII available  \n\uf06e CRC  calculation unit , 96-bit unique ID  (UID)  \n\uf06e Debug mode  \n− Serial wire debug (SWD) and JTAG interface  \n− Cortex®-M4 Embedded Trace Macro cell \n(ETM)  \n\uf06e Operating temperature s: -40 to +105 ° C  \n\uf06e Packages  \n− LQFP100 14 x 14 mm  \n− LQFP64 10 x 10 mm  \nTable  1. Device summary  \nInternal Flash  Part number  \n1024  KBytes  AT32F 407RGT7, AT32F 407VGT7  \n512 K Bytes  AT32F 407RET7, AT32F 407VET7 \n256 KBytes AT32F 407RCT7, AT32F 407VCT7 \nAT32F 407 Series Data sheet  \n2022. 11.24 2 Ver 2.03 \nContents  \n1 Descriptions  ................................ ................................ ................................ ...........  9 \n2 Functionality overview  ................................ ................................ .........................  11 \n2.1 ARM® Cortex®-M4 with FPU  ................................ ................................ ....................  11 \n2.2 Memory  ................................ ................................ ................................ ..................  12 \n2.2.1  Internal Flash memory  ................................ ................................ ...............................  12 \n2.2.2  Memory protection unit (MPU)  ................................ ................................ ...................  12 \n2.2.3  Embedded SRAM  ................................ ................................ ................................ ....... 12 \n2.2.4  External memory controller  (XMC)  ................................ ................................ .............  12 \n2.3 Interrupts  ................................ ................................ ................................ ................  13 \n2.3.1  Nested vectored interrupt controller (NVIC)  ................................ ...............................  13 \n2.3.2 External interrupts (EXINT)  ................................ ................................ ........................  13 \n2.4 Power control (PWC)  ................................ ................................ ..............................  13 \n2.4.1  Power supply schemes  ................................ ................................ ..............................  13 \n2.4.2  Reset and power voltage monitoring (POR / LVR / PVM)  ................................ .........  13 \n2.4.3  Voltage regulator (LDO)  ................................ ................................ .............................  13 \n2.4.4  Low-power modes  ................................ ................................ ................................ ...... 14 \n2.5 Boot modes  ................................ ................................ ................................ ............  14 \n2.6 Clocks  ................................ ................................ ................................ ....................  15 \n2.7 General -purpose inputs / outputs (GPIOs ) ................................ .............................  15 \n2.8 Remap capability  ................................ ................................ ................................ .... 15 \n2.9 Direct Memory Access Controller (DMA)  ................................ ................................  16 \n2.10  Timers (TMR)  ................................ ................................ ................................ .........  16 \n2.10.1  Advanced timers (TMR1 and TM R8) ................................ ................................ .........  17 \n2.10.2  General -purpose timers (TMRx)  ................................ ................................ ................  17 \n2.10.3  Basic timers (TMR6 and TMR7) ................................ ................................ .................  18 \n2.10.4  SysTick timer  ................................ ................................ ................................ ..............  18 \n2.11  Watchdog (WDT)  ................................ ................................ ................................ .... 18 \n2.12  Window watchdog (WWDT)  ................................ ................................ ...................  18 \n2.13  Real-time clock (RTC) and battery powered registers (BPR)  ................................ .. 18 \n2.14  Communication interfaces  ................................ ................................ ......................  19 \n2.14.1  Serial peripheral interface (SPI) / Inter -integrated sound interface (I2S) ...................  19 \nAT32F 407 Series Data sheet  \n2022. 11.24 3 Ver 2.03 \n2.14.2  Universal synchronous / asynchronous receive r transmitters (USART)  ...................  19 \n2.14.3  Inter-integrated -circuit interface (I2C) ................................ ................................ .........  20 \n2.14.4  Secure digital input / output interface (SDIO)  ................................ ............................  20 \n2.14.5  Controller area network (CAN)  ................................ ................................ ...................  20 \n2.14.6  Universal serial bus full -speed (USBFS) ................................ ................................ .... 20 \n2.14.7  Ethernet MAC interface (EMAC)  ................................ ................................ ................  20 \n2.15  Cyclic redundancy check (CRC) calculation unit  ................................ ....................  21 \n2.16  Analog -to-digital converter (ADC)  ................................ ................................ ...........  21 \n2.16.1  Temperature sensor (V TS) ................................ ................................ ..........................  21 \n2.16.2  Internal reference voltage (V INTRV) ................................ ................................ .............  22 \n2.17  Digital -to-analog converter (DAC)  ................................ ................................ ...........  22 \n2.18  Debug  ................................ ................................ ................................ .....................  22 \n2.18.1  Serial wire (SWD) / JTAG port  ................................ ................................ ...................  22 \n2.18.2  Embedded Trace Macrocell (ETM)  ................................ ................................ ............  22 \n3 Pin functional definitions  ................................ ................................ ....................  23 \n4 Memory mapping  ................................ ................................ ................................ . 32 \n5 Electrical characteristics  ................................ ................................ ....................  33 \n5.1 Parameter conditions ................................ ................................ ..............................  33 \n5.1.1  Minimum and maximum values  ................................ ................................ .................  33 \n5.1.2  Typical values  ................................ ................................ ................................ .............  33 \n5.1.3  Typical curves  ................................ ................................ ................................ .............  33 \n5.1.4  Power supply scheme  ................................ ................................ ................................  33 \n5.2 Absolute maximum values  ................................ ................................ ......................  34 \n5.2.1  Ratings  ................................ ................................ ................................ .......................  34 \n5.2.2  Electrical sensitivity  ................................ ................................ ................................ .... 35 \n5.3 Specification  ................................ ................................ ................................ ...........  36 \n5.3.1  General operating conditions  ................................ ................................ .....................  36 \n5.3.2  Operating conditions at power -up / power -down  ................................ .......................  36 \n5.3.3  Embedded reset and power control block characteristics  ................................ .........  37 \n5.3.4  Memory characteristics  ................................ ................................ ..............................  38 \n5.3.5  Supply current characteristics  ................................ ................................ ....................  39 \n5.3.6  External clock source characteristics  ................................ ................................ .........  48 \nAT32F 407 Series Data sheet  \n2022. 11.24 4 Ver 2.03 \n5.3.7  Internal clock source characteristics  ................................ ................................ ..........  52 \n5.3.8 PLL characteristics  ................................ ................................ ................................ ..... 53 \n5.3.9  Wakeup time from low -power mode ................................ ................................ ...........  53 \n5.3.10  EMC characteristics  ................................ ................................ ................................ ... 54 \n5.3.11  GPIO port characteri stics ................................ ................................ ...........................  55 \n5.3.12  NRST pin characteristics  ................................ ................................ ............................  57 \n5.3.13  XMC characteristics  ................................ ................................ ................................ ... 57 \n5.3.14  TMR  timer characteristics  ................................ ................................ ..........................  65 \n5.3.15  SPI / I2S characteristics  ................................ ................................ ..............................  66 \n5.3.16  I2C interface characteristics  ................................ ................................ .......................  69 \n5.3.17  SDIO characteristics ................................ ................................ ................................ ... 70 \n5.3.18  USBFS characteristics  ................................ ................................ ...............................  71 \n5.3.19  EMAC characteristics  ................................ ................................ ................................ . 72 \n5.3.20  12-bit ADC charact eristics  ................................ ................................ ..........................  74 \n5.3.21  Internal reference voltage (V INTRV) characteristics  ................................ .....................  78 \n5.3.22  Temperature sensor (V TS) characteristics  ................................ ................................ .. 78 \n5.3.23  12-bit DAC  specifications  ................................ ................................ ...........................  79 \n6 Package information  ................................ ................................ ...........................  81 \n6.1 LQFP100 package information  ................................ ................................ ...............  81 \n6.2 LQFP64 package information  ................................ ................................ .................  83 \n6.3 Device marking  ................................ ................................ ................................ ....... 84 \n6.4 Thermal characteristics  ................................ ................................ ..........................  84 \n7 Part numbering  ................................ ................................ ................................ .... 85 \n8 Document revision history  ................................ ................................ .................  86 \nAT32F 407 Series Data sheet  \n2022. 11.24 5 Ver 2.03 \nList of Tables  \nTable 1. Device summary  ................................ ................................ ................................ ....................  1 \nTable 2. AT32F407 features and peripheral counts  ................................ ................................ ...........  10 \nTable 3. Bootloader pin configurations  ................................ ................................ ..............................  15 \nTable 4. Timer feature comparison  ................................ ................................ ................................ .... 16 \nTable 5. USART / UART feature comparison  ................................ ................................ ....................  19 \nTable 6. AT32F407 series pin definitions  ................................ ................................ ...........................  25 \nTable 7. XMC pin definition  ................................ ................................ ................................ ................  30 \nTable 8.  Voltage characteristics  ................................ ................................ ................................ .........  34 \nTable 9. Current characteristics  ................................ ................................ ................................ .........  34 \nTable 10. Thermal characteristics  ................................ ................................ ................................ ...... 34 \nTable 11. ESD values  ................................ ................................ ................................ .........................  35 \nTable 12. Latch -up values  ................................ ................................ ................................ ..................  35 \nTable 13. General operating conditions  ................................ ................................ .............................  36 \nTable 14. Operating conditions at power -up / power -down  ................................ ...............................  36 \nTable 15. Embedded reset and power management block characteristics  ................................ ....... 37 \nTable 16. Internal Flash memory characteristics  ................................ ................................ ...............  38 \nTable 17. Internal Flash memory endurance and data retention  ................................ .......................  38 \nTable 18. Typical current consumption in Run mode ................................ ................................ .........  40 \nTable 19. Typical current consumption in Sleep mode  ................................ ................................ ...... 41 \nTable 20. Maximum current consumption in Run mode  ................................ ................................ .... 42 \nTable 21. Maximum current consumption in Sleep mode  ................................ ................................ . 43 \nTable 22. Typical and maximum current consumptions in Deepsleep and Standby modes  .............  43 \nTable 23. Typical and maximum current consumptions on V BAT ................................ .......................  45 \nTable 24. Peripheral current consumption  ................................ ................................ .........................  46 \nTable 25. HEXT 4 -25 MHz crystal characteristics(1)(2) ................................ ................................ ....... 48 \nTable 26.  HEXT external source characteristics  ................................ ................................ ................  49 \nTable 27. LEXT 32.768 kHz crystal characteristics(1)(2) ................................ ................................ ..... 50 \nTable 28. LEXT external source  characteristics  ................................ ................................ ................  51 \nTable 29. HICK clock characteristics  ................................ ................................ ................................ . 52 \nTable 30. LICK clock characteristics  ................................ ................................ ................................ .. 52 \nTable 31. PLL characteristics  ................................ ................................ ................................ .............  53 \nTable 32. Low -power mode wakeup time  ................................ ................................ ..........................  53 \nTable 33. EMS characteri stics ................................ ................................ ................................ ...........  54 \nTable 34. GPIO static characteristics  ................................ ................................ ................................ . 55 \nAT32F 407 Series Data sheet  \n2022. 11.24 6 Ver 2.03 \nTable 35. Output voltage characteristics ................................ ................................ ............................  56 \nTable 36. Input AC characteristics  ................................ ................................ ................................ ..... 56 \nTable 37. NRST pin characteristics ................................ ................................ ................................ .... 57 \nTable 38. Asynchronous mult iplexed PSRAM / NOR read timings  ................................ ...................  58 \nTable 39. Asynchronous multiplexed PSRAM / NOR write timings  ................................ ...................  59 \nTable 40. Synchronous multiple xed PSRAM / NOR read timings  ................................ .....................  61 \nTable 41. Synchronous multiplexed PSRAM write timings  ................................ ................................  62 \nTable 42. NAND Flash read and write timin gs ................................ ................................ ...................  63 \nTable 43. TMR characteristics  ................................ ................................ ................................ ...........  65 \nTable 44. SPI characteristics  ................................ ................................ ................................ .............  66 \nTable 45. I2S characteristics  ................................ ................................ ................................ ..............  68 \nTable 46. SD / MMC characteristics  ................................ ................................ ................................ .. 70 \nTable 47. USBFS startup time  ................................ ................................ ................................ ...........  71 \nTable 48. USBFS DC electrical characteristics  ................................ ................................ .................  71 \nTable 49. USBFS electrical characteristics  ................................ ................................ ........................  71 \nTable 50. EMAC DC electrical characteristics  ................................ ................................ ...................  72 \nTable 51. Dynamic characteristics: EMAC signals for SMI  ................................ ...............................  72 \nTable 52. Dynamic  characteristics: EMAC signals for RMII  ................................ ..............................  72 \nTable 53. Dynamic characteristics: EMAC signals for MII  ................................ ................................ . 73 \nTable 54. ADC characteristic s ................................ ................................ ................................ ............  74 \nTable 55. R AIN max for f ADC = 14 MHz  ................................ ................................ ................................  75 \nTable 56. R AIN max for f ADC = 28 MHz  ................................ ................................ ................................  75 \nTable 57. ADC accuracy(1) ................................ ................................ ................................ .................  76 \nTable 58. Internal reference voltage characteristics  ................................ ................................ ..........  78 \nTable 59. Temperature senso r characteristics  ................................ ................................ ...................  78 \nTable 60. DAC characteristics  ................................ ................................ ................................ ............  79 \nTable 61. LQFP100 – 14 x 14 mm 100 pin low -profile quad flat package mechani cal data  .............  82 \nTable 62. LQFP64 – 10 x 10 mm 64 pin low -profile quad flat package mechanical data  .................  84 \nTable 63. Package thermal charac teristics  ................................ ................................ ........................  84 \nTable 64. AT32F407 series part numbering  ................................ ................................ .......................  85 \nTable 65. Document revision history  ................................ ................................ ................................ .. 86 \nAT32F 407 Series Data sheet  \n2022. 11.24 7 Ver 2.03 \nList of figures  \nFigure 1. AT32F407 block diagram  ................................ ................................ ................................ ... 11 \nFigure 2. AT32F407  LQFP100 pinout  ................................ ................................ ...............................  23 \nFigure 3. AT32F407  LQFP64 pinout  ................................ ................................ ................................ . 24 \nFigure 4 . Memory map  ................................ ................................ ................................ .......................  32 \nFigure 5 . Power supply scheme  ................................ ................................ ................................ ........  33 \nFigure 6. Power on reset and low voltage reset waveform  ................................ ...............................  38 \nFigure 7 . Typical current consumption in Deepsleep mode vs. temperature at different V DD ..........  44 \nFigure 8 . Typical current consumption in Standby mode vs. temperature at different V DD ..............  44 \nFigure 9. Typical current consumption on V BAT with LEXT and RTC ON vs. temperature at different \nVBAT ................................ ................................ ................................ ................................ ................  45 \nFigure 10 . HEXT typical application with an 8 MHz crystal  ................................ ...............................  48 \nFigure 11 . HEXT exter nal source AC timing diagram  ................................ ................................ ........  49 \nFigure 12 . LEXT t ypical application with a 32.768 kHz crystal  ................................ .........................  50 \nFigure 13 . LEXT external source AC timing diagram  ................................ ................................ ........  51 \nFigure 14. HICK clock frequency accuracy vs. temperature  ................................ .............................  52 \nFigure 15 . Recommended NRST pin protection  ................................ ................................ ...............  57 \nFigure 16 . Asynchronous multiplexed PSRAM / NOR read waveforms  ................................ ...........  58 \nFigure 17 . Asynchronous multiplexed PSRAM / NOR write waveforms  ................................ ...........  59 \nFigure 18 . Synchronous multiplexed PSRAM / NOR read timings  ................................ ...................  61 \nFigure 19 . Synchronous multiplexed PSRAM write timings  ................................ ..............................  62 \nFigure 20 . NAND controller read waveforms  ................................ ................................ .....................  64 \nFigure 21 . NAND controller write waveforms  ................................ ................................ ....................  64 \nFigure 22 . NAND controller common memory read waveforms  ................................ .......................  64 \nFigure 23 . NAND controller for common memory write waveforms  ................................ ..................  65 \nFigure 24 . SPI timing diagram - slave mode and CPHA = 0  ................................ .............................  67 \nFigure 25 . SPI timing diagram - slave mode and CPHA = 1  ................................ .............................  67 \nFigure 26 . SPI timing diagram - master mode  ................................ ................................ ...................  67 \nFigure 27 . I2S slave timing diagram (Philips protocol)  ................................ ................................ ...... 68 \nFigure 28 . I2S master timing diagram (Philips protocol)  ................................ ................................ .... 69 \nFigure 29 . SDIO high -speed mode  ................................ ................................ ................................ .... 70 \nFigure 30. SD default mode  ................................ ................................ ................................ ...............  70 \nFigure 31 . USBFS timings: definition of data signal rise and fall time  ................................ ..............  71 \nFigure 32. EMAC SMI timing diagram  ................................ ................................ ...............................  72 \nAT32F 407 Series Data sheet  \n2022. 11.24 8 Ver 2.03 \nFigure 33. EMAC RMI I timing diagram  ................................ ................................ ..............................  73 \nFigure 34. EMAC MII timing diagram  ................................ ................................ ................................  73 \nFigure 35 . ADC accuracy characteristics  ................................ ................................ ..........................  76 \nFigure 36 . Typical connection diagram using the ADC  ................................ ................................ ..... 77 \nFigure 37 . Power supply and reference decoupling (with external V REF pin) ................................ .... 77 \nFigure 38 . Power supply and reference decoupling (wit hout external V REF pin) ...............................  78 \nFigure 39 . VTS vs. temperature  ................................ ................................ ................................ ..........  79 \nFigure 40 . LQFP100 – 14 x 14 mm 100 pin low -profile quad flat package outline  ...........................  81 \nFigure 41 . LQFP64 – 10 x 10 mm 64 pin low -profile quad flat package outline  ...............................  83 \nFigure 42 . Marking exampl e ................................ ................................ ................................ ..............  84 \nAT32F 407 Series Data sheet  \n2022. 11.24 9 Ver 2.03 \n1 Description s \nThe AT32F 407 is based on the high -performance ARM®Cortex®-M4 32-bit RISC  core operating at \na frequency of up to  240 MHz. The Cortex®-M4 core features a single -precision Floating Point U nit \n(FPU)  which supports all ARM® single -precision data processing instructions and data type s. It also \nimplements a full set of DSP instructions and a memory protection unit (MPU) to enhance \napplication security.  \nThe AT32F 407 incorporates  high-speed embedded m emories (up to 1 024 K Bytes o f internal Flash \nmemory, 96+128 K Bytes of SRAM ), the external memory  (up to 16 M Bytes of SPI Flash ), and a \nwide range of enhanced GPIO s and peripherals connected to two APB buses.  Any block of the \nembedded Flash memory can be pr otected by the “sLib” (security library) , func tioning as a security \narea that is code -excutable only.  \nThe AT32F 407 offers three 12-bit ADC s, two 12 -bit DAC s, eight general -purpose 16 -bit timers plus \ntwo general -purpos e 32-bit timers, and up to two  PWM time rs for motor control. It supports  \nstandard and advanced communication interfaces : up to three I2Cs, four SPIs (all multiplexed as \nI2Ss), two SDIOs, eight  USARTs /UARTs , an USB FS, two  CAN s, and an Ethernet  MAC . \nThe AT32F 407 operates in the -40 to +105 °C temperature range, from a 2.6 to 3.6 V power \nsupply. A comprehensive set of power -saving mode allows the design of low -power application.  \nThe AT32F 407 offers devices in different package types. They are fully pin -to-pin, software and \nfunctionality compatible  among the AT32F407 series devices, except that  the configurations of \nperipherals are not completely identical, d epending on the package types.  \nAT32F 407 Series Data sheet  \n2022. 11.24 10 Ver 2.03 \nTable 2. AT32F 407 features and peripheral counts  \nPart Number  AT32F 407xxT7  \nRC RE RG VC VE VG \nCPU frequency  (MHz)  240 Int. Flash(1)(2) \nZW (KBytes)  256 256 256 256 256 256 \nNZW ( KBytes ) 0 256 768 0 256 768 \nTotal  (KBytes ) 256 512 1024  256 512 1024  \nSRAM(2) (KBytes ) 96 + 128  Timers  Advanced  2 2 \n32-bit general -purpose  2 2 \n16-bit general -purpose 8 8 \nBasic  2 2 \nSysTick  1 1 \nWDT  1 1 \nWWDT  1 1 \nRTC 1 1 Communication  I2C 3 3 \nSPI/I2S 4/4 (2 full -duplex)  4/4 (2 full -duplex)  \nUSART  + UART  4 + 4 4 + 4 \nSDIO  2 2 \nUSBFS device  1 1 \nCAN  2 2 \nEthernet MAC  1 1 Analog  12-bit ADC \nnumbers /chann els 3 \n16 16 \n12-bit DAC numbers  2 \nXMC  1(3) 1 \nSPIM(4) 1 ch / up to 16 MB  \nGPIO  51 80 \nOperating temperatures  -40 to + 105 ° C \nPackages  LQFP64  \n10 x 10 mm  LQFP100  \n14 x 14 mm  \n(1) ZW = zero wait -state , up to SYSCLK 2 40 MHz  \nNZW = non -zero wait -state  \n(2) The intern al Flash and SRAM sizes are configurable with User System Data . Take the AT32F 407VGT7 as an \nexample, on which the Flash/SRAM can be configured into two options below : \n- ZW: 256 K Bytes , NZW: 768 K Bytes , SRAM: 96 K Bytes ; \n- ZW: 128 K Bytes , NZW: 896 K Bytes , SRAM: 224 K Bytes . \n(3) For LQFP64 package, XMC  only support s the  LCD panel with 8 -bit mode.  \n(4) SPIM = External four-wire SPI Flash memory  extension , for both program  execution  and data storage with \nencryption capability.  \nAT32F 407 Series Data sheet  \n2022. 11.24 11 Ver 2.03 \n2 Functionality o verview  \n2.1 ARM® Cortex®-M4 with F PU \nThe ARM® Cortex®-M4 processor is the latest generation of ARM® processors for embedded \nsystems. It is a  32-bit RISC processor featuring  exceptional code efficiency , outstanding \ncomputational  performance and  advanced interrupt response mechanism . The pro cessor supports \na set of DSP instructions which enable efficient signal processing and complex algorithm execution. \nIts single -precision FPU (floating point unit) speeds up floating point calculation  while avoiding \nsaturation.  Figure 1 shows the general block diagram of the AT32F 407. \nFigure 1. AT32F 407 block diagram  \n@VDD\n@VDDA@VDDA@VBAT@VDDARM\nCortex-M4\n (Fmax: 240 MHz)\nAHB Bus Matrix (Fmax: 240 MHz)\nDMA1\n7 channels\nDMA2\n7 channelsSRAM\ncontrollerFlash\ncontrollerFlash\nSRAMXMC\nAPB2\nbridgeAPB1\nbridge\nAPB2 Bus (Fmax: 120 MHz)APB1 Bus (Fmax: 120 MHz)CRM\nTMR2/5\nTMR3/4\nTMR6/7TMR12/13/14\nRTC\nWWDTPWC\nUSART2/3\nUART4/5\nUSBFS1\nCAN1/2BPR\nDAC\ncontrollerDAC1\nDAC2WDTIOMUX\nEXINTGPIOA/B/C/D/E\nTMR1/8\nUSART1/6\nI2C1/2TMR9/10/11\nADCIF1\nADCIF2\nADCIF3ADC2ADC1\nADC3HICK 48 MHz\nLICKPLL\nFmax:240 MHz\nLEXT\n32 kHzPOR/LVR\nPVM\nLDO 1.2VSWD/JTAG\nNVICHCLKFCLK\nPCLK1\nPCLK2HEXT 4~25 MHz\nTemp. \nsensorSDIO1/2\nSPI1 / I2S1\nSPI4 / I2S4SPI3 / I2S3SPI2 / I2S2ETM\nUART7/8\nI2C3\nACCSRAM 1280 \nBytes(2)Ethernet MAC\n10/100M\nEthernet DMA\nSRAM 4 KB\n \nAT32F 407 Series Data sheet  \n2022. 11.24 12 Ver 2.03 \n2.2 Memory  \n2.2.1  Internal Flash memory  \nUp to 1024 KB ytes of embedded Flash is available for storing programs and data.  Any part of the \nembedded Flash memory can be protected by the sLib  (secu rity library) , a security area that is  \ncode -excutable only but non -readable. “sLib” is a mechanism designed to protect the intelligence  of \nsolution venders and facilitate  the second -level development by customers.  \nAdditionally, there is  an external four -wire SPI Flash memory interface available for accessing up to \n16MB. The external SPI Flash memory is used as an extended Flash memory bank 3. Ciphertext \nprotection feature is also supported. Therefore it is possible to select wheter to encrypt data by \nsettin g the user system data. The range to be encrypted is configured through the corresponding \nregister.  \nThere is another 18 -KByte boot code area  in which the boodloader is stored.  \nA User System Data  block is included, which is used to configure  the hardware b ehaviors such as \nread/ erase/ write protection and watchdog  self-enable . User System Data  allows to set erase/write \nand read protection individual ly. \n2.2.2  Memory protection unit (MPU ) \nThe memory protection unit (MPU ) is used to manage the CPU accesses to memory t o prevent one \ntask to accidentally corrupt the memory or resources used by any other active task. This memory \narea consists of  up to 8 protected areas that can in turn be divided up into 8 subareas. The \nprotection area sizes are between 32 bytes and the entire 4 gigabytes of addressable memory.  The \nMPU is especially suited to the applications where some critical or certified code has to be \nprotected  against the misbehavior of other tasks. It is usually managed by an RTOS ( real-time \noperating system).  \n2.2.3  Embedd ed SRAM  \nThe device offers u p to 224 KB ytes of embedded SRAM that is accessible  (read/write) at CPU \nclock speed with 0 wait states.  \n2.2.4  External memory controller  (XMC)  \nAT32F 407 embeds an XMC block (external memory controller). It has two Chip Select outputs  \nsupporting  the following modes: multiplexed PSRAM/ NOR and 16-bit/8-bit NAND  memory . \nMain features : \n\uf06c Write buffer  \n\uf06c Code execution from external memory of the multiplexed PSRAM/ NOR  \nThe XMC can be configured to interface with most graphic LCD controllers. It supp orts the Intel \n8080 and Motorola 6800 modes.  \nAT32F 407 Series Data sheet  \n2022. 11.24 13 Ver 2.03 \n2.3 Interrupts  \n2.3.1  Nested vectored interrupt controller (NVIC)  \nThe AT32F 407 embed a nested vectored interrupt controller able to manage 16 priority levels and \nhandle maskable interrupt channels plus the 16 interrupt lin es of the Cortex®-M4 with FPU.  This \nhardware block provides flexible interrupt management features with minimal interrupt latency.  \n2.3.2  External interrupt s (EXINT ) \nThe external interrupt  (EXINT), which is connected directly with NVIC,  consists of 20 edge detect or \nlines used to generate interrupt requests. Each line can be independently configured to select the \ntrigger event (rising edge, falling edge, both) and can be masked independently. A pending register \nmaintains the status of the interrupt requests. The ex ternal interrupt lines connects up to 16 GPIOs.  \n2.4 Power control (PWC)  \n2.4.1  Power supply schemes  \n\uf06c VDD = 2.6～3.6 V : an external power supply for GPIO s and the internal block such as regulator  \n(LDO) , provided externally through V DD pins.  \n\uf06c VDDA = 2.6～3.6 V: an external analog power supply  for ADC and DAC. V DDA and V SSA must be \nthe same voltage potential as  VDD and V SS, respectively.  \n\uf06c VBAT = 1.8～3.6 V: power  supply  for VBAT domain through  the ex ternal battery or super \ncapacitor , or from V DD when the ex ternal battery or super capacitor is not present . VBAT \n(through power switch) supplies  for RTC, external crystal  32 kHz  (LEXT),  and battery powered  \nregisters (BPR)  when V DD is not present.  \n2.4.2  Reset and p ower voltage monitoring (POR  / LVR / PVM)  \nThe device has an integrated power -on reset (POR)/ low voltage  reset (PDR) circuitry. It is always \nactive, and allows  proper op eration starting from/down to 2.6 V. The device remains in reset mode \nwhen V DD is below a specified threshold (VLVR) without the need for an external reset circuit.  \nThe device embed s a power  voltage monitor (PVM ) that monitors the V DD power supply and \ncomp ares it to the V PVM threshold. An interrupt can be generated when V DD drops below the V PVM \nthreshold and/or when V DD rises above  the V PVM threshold. The PVM  is enabled by software.  \n2.4.3  Voltage regulator  (LDO)  \nThe LDO has three operation modes: normal, low -powe r, and power down.  \n\uf06c Normal mode : It is used in Run/Sleep mode  and in the Deepsleep  mode ; \n\uf06c Low-power mode : It can be used in the Deepsleep  mode ; \n\uf06c Power down mode : It is used in Standby mode: The LDO output is in high impedance and the \nkernel circuitry is power ed down  but the contents of the registers and SRAM are lost.  \nThis LDO operates always in its normal mode after reset.  \nAT32F 407 Series Data sheet  \n2022. 11.24 14 Ver 2.03 \n2.4.4  Low-power modes  \nThe AT32F 407 supports three low -power modes:  \n\uf06c Sleep  mode  \nIn Sleep mode, only the CPU is stopped. All peripherals continue t o operate and can wake up \nthe CPU when an interrupt/event occurs.  \n\uf06c Deepsleep  mode  \nDeepsleep  mode achieves the lowest power consumption while retaining the content of SRAM \nand registers. All clocks in the LDO domain are stopped,  disabling  the PLL, the HICK c lock, \nand the H EXT crystal. The voltage regulator can also be  put in normal or low -power mode.  \nThe device can be woken up from Deepsleep  mode by any of the EXINT  line. The EXINT  line \nsource can be one of the 16 external lines, the PVM  output, the RTC alarm , the USB FS or the \nEthernet MAC wakeup.  \n\uf06c Standby  mode  \nThe Standby mode is used to achieve the lowest power consumption. The internal voltage \nregulator is switched off so that the entire LDO domain is powered off. The PLL, the HICK  \nclock  and the HEXT  crystal  are also switched off. After entering Standby mode, SRAM and \nregister contents are lost except for RTC register, the BPR domain register  and Standby \ncircuitry.  \nThe device leaves  Standby mode when an external reset (NRST pin), a  WDT  reset, a rising \nedge on  the WKUP pin, or an RTC alarm occurs.  \nNote:  The RTC and the corresponding clock sources are not stopped by entering Deepsleep  or Standby mode.  \nWDT depends on User System Data  setting.  \n2.5 Boot modes  \nAt startup, boot pins are used to select one of three boot o ptions:  \n\uf06c Boot from the internal  Flash. For the AT32F 407xG, user has an option to boot from any of two \nmemory banks. By default, boot from Flash memory Bank 1 is selected. User can choose to \nboot from Flash memory Bank 2 by setting the User System Data  area; \n\uf06c Boot from  boot memory ; \n\uf06c Boot from embedded SRAM . \nThe b ootloader is stored in boot memory . It is used to reprogram the Flash memory through \nUSART1, USART2, or USB FS1. If SPIM_IO0/1 pin  is configured to be shared with USBFS1 pin, \nthen SPIM Flash memory Bank 3 cannot be program med through USB FS1. Table 3 provides \nAT32F407 pin configurations  related to the Bootloader.  \nAT32F 407 Series Data sheet  \n2022. 11.24 15 Ver 2.03 \nTable 3. Bootloader pin configurations  \nInterface  Part number  Pin \nUSART1  All part numbers  PA9: USART1_ TX \nPA10: USART1_RX  \nUSART2  AT32F 407VGT7  PD5: USART2_TX ( remapped ) \nPD6: USART2_RX ( remapped ) \nPart numbers except AT32F 407VGT7 PA2: USART2_TX  \nPA3: USART2_RX  \nUSBFS1 All part numbers  PA11: USBFS 1_D- \nPA12: USBFS 1_D+ \n \n2.6 Clocks  \nOn reset, t he internal 48 MHz clock (HICK ), aftering being divided by 6 (that is 8 MHz) , is selected \nas the default CPU clock . The application can select a n external 4  to 25  MHz clock (HEXT ) as a \nsystem clock. This clock can be  monitored for failure. If failure is detected, HEXT will be s witched \noff and the system automatically switches back to the internal HICK . A software interrupt is \ngenerated. Similarly, the system take the same action once HEXT fails when it is used as the \nsource of PLL . \nSeveral prescalers are are available to allow  the configuration of the AHB and the APB (APB1 and \nAPB2) frequency. The maximum frequency of the AHB domain is 240 MHz. The maximum allowed \nfrequency of the APB domains are 120 MHz.  \nThe AT32F 407 embeds  an automatic clock calibration (ACC) block, which calib rates the internal 48 \nMHz HICK clock , assur ing the most precise accuracy of the HICK  over the full operating \ntemperatures.  \n2.7 General -purpose inputs  / outputs (GPIO s) \nEach of the GPIO pins can be configured by software as output (push -pull or open -drain), as input \n(with or without pull -up or pull -down), or as mutilple  function. Most of the GPIO pins are shared with \ndigital or analog multiple  functions. All GPIOs are high current -capable.  \nThe GPIO ’s configuration can be locked, if needed, in order to avoid spur ious writing to the GPIO ’s \nregisters by following a specific sequence.  \n2.8 Remap capability  \nThis feature allows the use of a maximum number of peripherals in a given application. Indeed, \nalternate  functions are available not only on the default pins but also o n other  specific pins onto \nwhich they are remappable. This has the advantage of making board  design and port usage much \nmore flexible.  \nFor details refer to Table 6; it shows the list of remappable multiple  functions  and the pins onto \nwhich they can be remapped. See the AT32F407  reference  manual for software considerations.  \nAT32F 407 Series Data sheet  \n2022. 11.24 16 Ver 2.03 \n2.9 Direct Memory Access Controller ( DMA ) \nThe device featurs two flexible 1 4-channel general -purpose DMAs (7 channels for DMA1 and 7 \nchannels for DMA2 ). They  are able to manage memory -to-memory, peripheral -to-memory, and \nmemory -to-peripheral transfers. The two DMA controllers support circular buffer management, \nremoving the need for user code intervention when the controller reaches the end of the buffe r. \nEach channel is connected to  dedicated hardware DMA request logic , with support for software \ntrigger on each channel. Configuration is made by software and transfer sizes between source and \ndestination are independent.  \nThe DMA can be used with the main peripherals: SPI,  I2C, USART , advanced,  general -purpose, \nand basic  timers TM Rx, DAC, I2S, SDIO , and ADC.  \n2.10 Timers  (TMR)  \nThe AT32F 407 device  include s two advanced  timers, ten  general -purpose timers, two basic timers  \nand a SysTick timer.  \nThe table below compar es the features of the advanced , general -purpose, and basic timers.  \nTable 4. Timer feature comparison  \nTimer  Counter \nresolution  Counter type  Prescaler \nfactor  DMA request \ngeneration  Capture/compare \nchannels  Complementary \noutputs  \nTMR1, TM R8 16-bit Up, down, \nup/down  Any integer \nbetween 1 \nand 65536  Yes 4 Yes \nTMR2, TMR5  32-bit Up, down, \nup/down  Any integer \nbetween 1 \nand 65536  Yes 4 No \nTMR3, TMR4  16-bit Up, down, \nup/down  Any integer \nbetween 1 \nand 65536  Yes 4 No \nTMR9, TMR12  16-bit Up Any int eger \nbetween 1 \nand 65536  No 2 No \nTMR10, TMR11 \nTMR13, TMR14  16-bit Up Any integer \nbetween 1 \nand 65536  No 1 No \nTMR6, TMR7  16-bit Up Any integer \nbetween 1 \nand 65536  Yes 0 No \n \nAT32F 407 Series Data sheet  \n2022. 11.24 17 Ver 2.03 \n2.10.1  Advanced timers (TMR1 and TMR8)  \nThe two advanced  timers (TMR1  and TMR8) can each be seen three -phase PWM  generators \nmultiplexed on 6 channels. They have complementary  PWM outputs with programmable dead -time \ninsertion . They can also be seen as a complete general -purpose timer. The ir four  independent \nchannels can be used for:  \n\uf06c Input captu re \n\uf06c Output compare  \n\uf06c PWM generation (edge or center -aligned modes)  \n\uf06c One-cycle  mode output  \nIf configured as a standard 16 -bit timer, it has the same features as the TMRx timer. If configured \nas the 16 -bit PWM generator, it has full modulation capability (0 -100% ). \nIn debug mode, the advanced  timer counter can be frozen and the PWM outputs disabled to turn \noff any power switch driven by these outputs.  \nMany features are shared with those of the general -purpose timers  which have the same \narchitecture. The advanced  timers can ther efore work together with the general -purpose  timers via \nthe timer link feature for synchronization or event chaining.  \n2.10.2  General -purpose timers (TMRx)  \nThere are 10 synchronizable general -purpose timers embedded in the AT32F 407. \n\uf06c TMR2, TMR3, TMR4 , and TMR5  \nThe AT32F 407 has four  full- featured general -purpose timers: TMR2, TMR3, TMR4, and \nTMR5.The TMR2 and TMR5 timers are based on a 32 -bit auto -reload up/down counter and a \n16-bit prescaler. The TMR3 and TMR4 timers are based on a 16 - bit auto -reload  up/down \ncounter and a 16 -bit prescaler. They can offer  four independent channels on the largest \npackage. Each channel can be used for input capture/output compare, PWM or one-cycle  \nmode output.  \nThese g eneral -purpose timers can w ork together, or with the advanced  timers via the timer link \nfeature for synchronization or event chaining. In debug mode, their counter s can be frozen. \nAny of these general -purpose timers can be used to generate PWM outputs.  Each t imer has \nindividual DMA request mechanism.  \nThese timers  are capable of handling incremental quadrature encoder signals and the digital \noutputs  coming  from 1 to 3 hall -effect sensors.  \n\uf06c TMR9 and TMR12  \nTMR9  and TMR12 are based on a 16 -bit auto -reload upcounter, a 16 -bit prescaler, and two \nindependent channels for input capture/output compare, PWM, or one-cycle  mode output. \nThey can be synchronized with the TMR2, TMR3, TMR4, and TMR5 full -featured general -\npurpose timers. They can also be used as simple time bases.  \nAT32F 407 Series Data sheet  \n2022. 11.24 18 Ver 2.03 \n\uf06c TMR10, TMR11, TMR13, and TMR14  \nThese timers are based on a 16 -bit auto -reload upcounter, a 16 -bit prescaler, and one \nindependent channels for input capture/output compare, PWM, or one-cycle  mode output. \nThey can be synchronized with the TMR2, TMR3, TMR4, and TMR5 full -featured general -\npurpose timers. Th ey can also be used as simple time bases.  \n2.10.3  Basic timers (TMR6 and TMR7)  \nThese two timers are mainly used for DAC trigger generation. Each of them  can also be used as a \ngeneric 16 -bit time base.  \n2.10.4  SysTick timer  \nThis timer is dedicated to real -time operating sy stems, but could also be used as a standard down \ncounter. It features  include : \n \n\uf06c A 24-bit down counter  \n\uf06c Autoreload capability  \n\uf06c Maskable system interrupt generation when the counter reaches 0  \n\uf06c Programmable clock source  \n2.11 Watchdog (WDT)  \nThe watchdog consists of  a 12-bit downcounter and 8 -bit prescaler. It is clocked by an independent \ninternal LICK clock . As it operates independently from the main clock, it can operate in Deepsleep \nand Standby modes. It can be used either as a watchdog to reset the device when a n error occurs, \nor as a free running timer for application timeout management. It is self-enabling or not  through the \nUser System Data  configura tion. The counter can be frozen in debug mode.  \n2.12 Window watchdog (WWDT)  \nThe window watchdog  embeds  a 7-bit downcounter  that can be set as free running. It can be used \nas a watchdog to reset the device when a problem occurs. It is clocked from the main clock. It has \nan early warning interrupt capability and the counter can be frozen in debug mode.  \n2.13 Real-time clock (RTC) and  battery powered  registers  (BPR)  \nThe RTC and the battery powered  registers (BPR) are supplied through  a power switch that is \npowered either from VDD When present or from the  VBAT pin. The battery powered  registers are \nforty-two 16 -bit registers used to sto re 84 bytes of user application data . RTC and BPR  are not \nreset by a system or power reset, and they are not reset when the device wakes up from the \nStandby mode.  \nThe real -time clock provides a continuous -running counter. The RTC provides  lock calendar \nfunction, and pr ovides an alarm interrupt and periodic interrupt  functions through software . It is \nclocked by a 32.768 kHz  external oscillator  (LEXT) , the internal low -power clock (LICK) , or the \nhigh-speed external clock (HEXT) divided by 128. The RTC can be calibrated using a divi ded-by-64 \noutput of TAMPER pin to compensate for any natural quartz deviation. The RTC features a 32 -bit \nprogrammable counter that allows long time measurement with the help of the c ompare register. A \n20-bit prescaler is used for the  time base clock and is by default configured to generate a time base \nof 1 second from a clock at 32.768 kHz.  \nAT32F 407 Series Data sheet  \n2022. 11.24 19 Ver 2.03 \n2.14 Communication interface s \n2.14.1  Serial peripheral interface (SPI)  / Inter -integrated sound  interface  \n(I2S) \nThere are u p to four SPIs are able to communic ate up to 50 Mbits/s in slave and master modes in \nfull-duplex and simplex communication modes. The 3 -bit prescaler generates eight  master mode \nfrequencies and the frame is configurable to 8 bits or 16 bits. The hardware CRC \ngeneration/verification supports  basic SD Card/MMC /SDHC  modes.  All SPIs can be served by the \nDMA controller.  \nFour standard I2S interfaces (multiplexed with SPI) are available, that can be operated in master or \nslave mode  in half -duplex mode and I2S2 and I2S3 also in full duplex mode. These interfaces can \nbe configured to operate with 16/ 24/32 bit resolution, as input or output channels. Audio sampling \nfrequencies from 8 kHz up to 192 kHz are supported. When I2S configured in master mode, the \nmaster clock can be output to the external DAC/ CODEC at 256 times the sampling frequency.  All \nI2Ss can be served by  the DMA controller.  \n2.14.2  Universal synchronous  / asynchronous receiver transmitters \n(USART)  \nThe AT32F 407 embeds four universal synchronous/asynchronous receiver transmitters (USART1, \nUSART2, USART3, and USART6) and 4  universal asynchronous receiver transmitters (UART4 , \nUART5, UART7, and UART8 ). \nThese eight  interfaces provide asynchronous communication, IrDA SIR ENDEC support, \nmultiprocessor communication mode, single -wire half -duplex communicat ion mode, and have LIN \nMaster/Slave capability.These eight  interfaces are able to communicate at speeds of up to 7.5 \nMbit/s.  \nUSART1, USART2, and USART3 provide hardware management of the CTS and RTS signals . \nUSART1, USART2, USART3, and USART6  also provide Smart Card mode (ISO 7816 compliant) \nand SPI -like communication capability. All interfaces can be served by the DMA controller . \nTable  5. USART  / UART  feature comparison  \nUSART/UART  name  USART1  USART2  USART3  UART4  UART5  USART6  UART7  UART8  \nHardware flow control for modem  Yes Yes Yes - - - - - \nContinuous communication using DMA  Yes Yes Yes Yes Yes Yes Yes Yes \nMultiprocessor communication  Yes Yes Yes Yes Yes Yes Yes Yes \nSynchronous mode  Yes Yes Yes - - Yes - - \nSmartcard mode  Yes Yes Yes - - Yes - - \nSingle -wire half -duplex communication  Yes Yes Yes Yes Yes Yes Yes Yes \nIrDA SIR  ENDEC blcok  Yes Yes Yes Yes Yes Yes Yes Yes \nLIN mode  Yes Yes Yes Yes Yes Yes Yes Yes \n \nAT32F 407 Series Data sheet  \n2022. 11.24 20 Ver 2.03 \n2.14.3  Inter -integrated -circuit interface (I2C) \nUp to three  I2C bus interfaces can  operate in multi -master and slave m odes. They support standard  \nmode (max. 100 kHz ) and fast  mode (max. 4 00 kHz). The I2C bus  frequency can be increased up \nto 1 MHz. For more details, please contact your local Artery sales office for technical support.  \nThey support 7/10 -bit addressing mode and 7 -bit dual addressing mode (as slave). A hardware \nCRC generation/verification is included.  \nThey can be served by DMA and they support SMBu s 2.0/PMBus. \n2.14.4  Secure digital input  / output  interface  (SDIO ) \nTwo SD/SDIO/MMC hos t interface s are available to support  MultiMediaCard System Specification \nVersion 4.2 in three different data bus modes: 1 -bit (default), 4 -bit and 8 -bit. The interface allows \ndata transfer at up to 48 MHz in 8 -bit mode, and is compliant with SD Memory Car d Specifications \nVersion 2.0.  \nThe two different data bus modes  supported in the SDIO Card Specification V ersion 2.0 are : 1-bit \n(default) and 4 -bit. \nThe current version supports only one SD/SDIO/MMC4.2 card at any one time and a stack of \nMMC4.1 or previous.  \nIn addition to  SD/SDIO/MMC /eMMC , this interface is fully compliant with the CE -ATA digital \nprotocol Rev1.1.  \n2.14.5  Controller area network (CAN)  \nTwo CAN s are compliant with specifications 2.0A and B (active) with a bit rate up to 1 Mbit/s. It can \nreceive and tra nsmit standard frames with 11 -bit identifiers as well as extended frames with 29 -bit \nidentifiers. Each CAN  has three transmit mailboxes, two rece ive buffer areas  with 3 stages , and 14 \nscalable filter banks.  \n2.14.6  Universal serial bus  full-speed  (USB FS) \nAT32F 407 embeds a USB device peripheral compatible with the USB full -speed 12 Mbit/s. It has \nsoftware -configurable endpoint setting and suspend/resume support. The dedicated 48 MHz clock \nis generated from the internal main PLL  or direct from the 48 MHz HICK . \n2.14.7  Ethern et MAC interface  (EMAC)  \nThe AT32F407 devices provide an IEEE -802.3 -2002 -compliant media access controller  (MAC) for \nEthernet LAN communications through an industry -standard media -independent  interface (MII) or a \nreduced media -independent interface (RMII). The AT32F407 requires an external physical interface \ndevice (PHY) to connect to the physical LAN bus  (such as twisted -pair and  fibers). The PHY is \nconnected to the AT32F407 MAC  port using as many  as 17 signals (MII) or 9 signals (RMII) and \ncan be clocked by the 25 MHz (MII) or 50 MHz  (RMII) output from the AT32F407. \nThe EMAC  includes the following features:  \n\uf06c 10 and 100 Mbit/s rates  \n\uf06c Dedicated DMA controller allowing high -speed transfers between the dedicated SRAM  and the \ndescriptors  \n\uf06c Tagged MAC frame (VLAN sup port) \nAT32F 407 Series Data sheet  \n2022. 11.24 21 Ver 2.03 \n\uf06c Half-duplex (CSMA/CD) and full -duplex operation  \n\uf06c MAC con trol sublayer (control frames)  \n\uf06c 32-bit CRC generation and removal  \n\uf06c Several address filtering modes for physical and multicast address (multicast and  group \naddresses)  \n\uf06c 32-bit status code for each tr ansmitted or received frame  \n\uf06c Internal FIFOs to buffer transmit and receive frames. The transmit FIFO and the  receive FIFO \nare both 2 K bytes each , that is 4 K Bytes in total  \n\uf06c Hardware PTP (precision time protocol) in line with IEEE 1588 , with the timestamp com parator \nconnected to the TM R2 trigger input  \n\uf06c Interrupt trigger when system time becomes greater than target time  \n2.15 Cyclic redundancy check (CRC) calculation unit  \nThe CRC (cyclic redundancy check) calculation unit is used to get a CRC code from a 32 -bit data \nword and a fixed generator polynomial.  Among other applications, CRC -based techniques are used \nto verify data transmission or storage integrity.  \n2.16 Analog -to-digital converter (ADC ) \nThree 12 -bit analog -to-digital converters are embedded into AT32F 407 devices a nd they share up \nto 16 external channels, performing conversions in single  or sequence modes. In sequence  mode, \nautomatic conversion is performed on a selected group of analog inputs.  \nAdditional logic functions embedded in the ADC interface allow:  \n\uf06c Simultan eous sample and hold  \n\uf06c Interleaved sample and hole  \n\uf06c Single sample  \nThe ADC can be served by the DMA controller.  \nThe voltage monitoring  feature allows very precise monitoring of the converted voltage of one, \nsome or all selected channels. An interrupt is genera ted when the converted voltage is outside the \nprogrammed thresholds.  \nThe events generated by the general -purpose timers (TMRx) and the advanced  timers (TMR1  and \nTMR8) can be intern ally connected to the ADC regular trigger and injection trigger, respectivel y, to \nallow the application to synchronize A/D conversion and timers.  \n2.16.1  Temperature sensor  (VTS) \nThe temperature sensor has to generate a voltage  VTS that varies linearly with temperature. The \ntemperature sensor is internally connected to the ADC1_IN16 input  channel which is used to \nconvert the sensor output voltage into a digital value.  \nThe offset of this line varies from chip to chip due to process variation. The internal temperature \nsensor is more suited to applications that detect temperature variations i nstead of absolute \ntemperatures. If accurate temperature readings are needed, an external temperature sensor part \nshould be used.  \nAT32F 407 Series Data sheet  \n2022. 11.24 22 Ver 2.03 \n2.16.2  Internal reference voltage (V INTRV) \nThe internal reference voltage (V INTRV) provides a stable voltage source for ADC.  The VINTRV is \ninternally connected to the ADC1_IN17  input channel.  \n2.17 Digital -to-analog converter (DAC ) \nThe two 12 -bit buffered DACs can be used to convert two digital signals into two analog voltage \nsignal outputs.  \nThe DAC has  the following features:  \n\uf06c Two DAC convert ers: each with an output channel   \n\uf06c 8-bit or 12 -bit monotonic output  \n\uf06c Left- or right -alignment data in 12 -bit mode  \n\uf06c Synchronized update capability  \n\uf06c Noise-wave generation  \n\uf06c Triangular -wave generation  \n\uf06c Dual DAC output s independent or simultaneous conversions  \n\uf06c DMA cap ability for each DAC  \n\uf06c External triggers for conversion  \n\uf06c Input voltage reference V REF+ \nSeveral  DAC trigger inputs are  availabel  in the AT32F 407. DAC outputs  can be  triggered through \nthe timer update output. The timer update outpu can also be connected to diff erent DMA channels.  \n2.18 Debug  \n2.18.1  Serial wire  (SWD) / JTAG port  \nThe ARM® SWJ -DP interface is embedded, consisting of a serial wire debug port  and JTAG . It \nenables either a serial wire debug or a JTAG probe to be connected to the target  for programming \nand debug op eration . The JTAG TMS and TCK pins are shared respectively with SWDIO and \nSWCLK . \n2.18.2  Embedded Trace Macrocell (ETM)  \nThe ARM® Embedded Trace Macrocell (ETM ) provides a greater visibility of the instruction and \ndata flow inside the CPU core by streaming compress ed data at a very high rate from the \nAT32F 407 through a small number of ETM pins to an external hardware trace port analyzer (TPA) \ndevice. The TPA is connected to a  host computer using USB or any other high -speed channel. \nReal-time instruction and data flo w activity can be recorded and then formatted for display on the \nhost computer that runs debugger software. TPA hardware is commercially available from common \ndevelopment tool vendors. It operates with third party debugger software tools.  \nAT32F 407 Series Data sheet  \n2022. 11.24 23 Ver 2.03 \n3 Pin functional  definitions  \nFigure 2. AT32F 407 LQFP100  pinout  \nLQFP1001\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24PE2\nPE3\nPE4\nPE5\nPE6\nVBAT\nTAMPER_RTC/PC13\nLEXT_IN/PC14\nLEXT_OUT/PC15\nVSS_5\nVDD_5\nHEXT_IN\nHEXT_OUT\nNRST\nPC0\nPC1\nPC2\nPC3\nVSSA\nVREF-\nVREF+\nVDDA\nWKUP/PA0\nPA1\n25 PA2\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50PA3\nVSS_4\nVDD_4\nPA4\nPA5\nPA6\nPA7\nPC4\nPC5\nPB0\nPB1\nPB2\nPE7\nPE8\nPE9\nPE10\nPE11\nPE12\nPE13\nPE14\nPE15\nPB10\nPB11\nVSS_1\nVDD_174\n73\n72\n71\n70\n69\n68\n67\n66\n64\n63\n62\n61\n60\n59\n58\n57\n56\n55\n54\n53\n52\n51VDD_2\nVSS_2\nNC\nPA13\nPA12\nPA11\nPA10\nPA9\nPA8\nPC9\nPC8\nPC7\nPC6\nPD15\nPD14\nPD13\nPD12\nPD11\nPD10\nPD9\nPD8\nPB15\nPB14\nPB13\nPB12767778798081828384858687888990919293949596979899\nPA14PA15PC10PC11PC12PD0PD1PD2PD3PD4PD5PD6PD7PB3PB4PB5PB6PB7BOOT0PB8PB9PE0PE1VSS_3100VDD_3\n75\n65\n \nAT32F 407 Series Data sheet  \n2022. 11.24 24 Ver 2.03 \nFigure 3. AT32F 407 LQFP64  pinout  \nLQFP641\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16VBAT\nTAMPER_RTC/PC13\nLEXT_IN/PC14\nLEXT_OUT/PC15\nHEXT_IN/PD0\nHEXT_OUT/PD1\nNRST\nPC0\nPC1\nPC2\nPC3\nVSSA/VREF-\nVDDA/VREF+\nWKUP/PA0\nPA1\nPA2\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32PA3\nVSS_4\nVDD_4\nPA4\nPA5\nPA6\nPA7\nPC4\nPC5\nPB0\nPB1\nPB2\nPB10\nPB11\nVSS_1\nVDD_147\n46\n45\n44\n43\n42\n41\n40\n38\n37\n36\n35\n34\n33VDD_2\nVSS_2\nPA13\nPA12\nPA11\nPA10\nPA9\nPA8\nPC9\nPC8\nPC7\nPC6\nPB15\nPB14\nPB13\nPB12495051525354555657585960616263\nPA14PA15PC10PC11PC12PD2PB3PB4PB5PB6PB7BOOT0PB8PB9VSS_364VDD_3\n48\n39\n \nAT32F 407 Series Data sheet  \n2022. 11.24 25 Ver 2.03 \nThe table below  is the pin definition of the AT32F 407. ”-” presents there is no such pinout on th e \nrelated package. The multi -functions list follows priority from high to low. In principle , the analog \nsignals have priority over the digital signals, and the digital output signals have priority over the \ndigital input signals.  \nTable 6. AT32F 407 series pin definitions  \nPin \nnumber  \nPin name  \nType(1) \nI IO level(2) \nMain \nfunction(3) Multi -functions(4) LQFP64  \nLQFP100  \nDefault  Remap  \n- 1 PE2 I/O FT PE2 SPI4_SCK(7) / I2S4_CK(7) /  \nXMC_A23 / TRACECK  - \n- 2 PE3 I/O FT PE3 XMC_A19 / TRACED0  - \n- 3 PE4 I/O FT PE4 SPI4_ CS(7) / I2S4_WS(7) /  \nXMC_A20 / TRACED1  - \n- 4 PE5 I/O FT PE5 SPI4_MISO(7) /  \nXMC_A21 / TRACED2  TMR9_CH1  \n- 5 PE6 I/O FT PE6 SPI4_MOSI(7) / I2S4_SD(7) /  \nXMC_A22 / TRACED3  TMR9_CH2  \n1 6 VBAT S - VBAT - - \n2 7 TAMPER -RTC /  \nPC13(5) I/O TC PC13(6) TAMPER -RTC - \n3 8 LEXT_IN  / \nPC14(5) I/O TC PC14(6) LEXT_IN  - \n4 9 LEXT_OUT  / \nPC15(5) I/O TC PC15(6) LEXT_OUT  - \n- 10 VSS_5 S - VSS_5 - - \n- 11 VDD_5 S - VDD_5 - - \n- 12 HEXT_IN  I - HEXT_IN  - - \n- 13 HEXT_OUT  O - HEXT_OUT  - - \n5 - HEXT_IN  /  \nPD0(8) I/O TC HEXT_IN  - PD0(8) \n6 - HEXT_OUT  /  \nPD1(8) I/O TC HEXT_OUT  - PD1(8) \n7 14 NRST  I/O - NRST  - - \n8 15 PC0 I/O FTa PC0 ADC123_IN10 / SDIO2_D0(7) - \n9 16 PC1 I/O FTa PC1 ADC123_IN11 / SDIO2_D1(7) /  \nEMAC _MDC  - \n10 17 PC2 I/O FTa PC2 ADC123_IN12 / SDI O2_D2(7) /  \nEMAC _MII_TXD2  UART8_TX / XMC_NWE  \n11 18 PC3 I/O FTa PC3 ADC123_IN13 / SDIO2_D3(7) /  \nXMC_A0 / EMAC _MII_TX_CLK  UART8_RX  \n- 19 VSSA S - VSSA - - \n- 20 VREF- S - VREF- - - \n12 - VSSA / VREF- S - VSSA / VREF- - - \n- 21 VREF+ S - VREF+ - - \n- 22 VDDA S - VDDA - - \n13 - VDDA / VREF+ S - VDDA / VREF+ - - \nAT32F 407 Series Data sheet  \n2022. 11.24 26 Ver 2.03 \nPin \nnumber  \nPin name  \nType(1) \nI IO level(2) \nMain \nfunction(3) Multi -functions(4) LQFP64  \nLQFP100  \nDefault  Remap  \n14 23 PA0 / WKUP  I/O TC PA0 ADC123_IN0 / WKUP  /  \nUSART2_CTS(7) /  \nEMAC _MII_CRS_WKUP /  \nTMR2_CH1(7) / TMR2_ EXT(7) /  \nTMR5_CH1 / TMR8_ EXT UART4_TX  \n15 24 PA1 I/O FTa PA1 ADC123_IN1 / USART2_RTS(7) /  \nEMAC_MII_RX_CLK /  \nEMAC _RMII_REF_CLK /  \nTMR2_CH2(7) / TMR5_CH2  UART4_RX  \n16 25 PA2 I/O FTa PA2 ADC123_IN2  / USART2_TX(7) /  \nEMAC _MDIO / TMR2_CH3(7) /  \nTMR5_CH3 / TMR9_CH1(7) SDIO2_CK / XMC_D4  \n17 26 PA3 I/O FTa PA3 ADC123_IN3 / USART2_RX(7) /  \nEMAC _MII_COL / TMR2_CH4(7) /  \nTMR5_CH4 / TMR9_CH2(7) I2S2_MCK /  \nSDIO2_CMD / XMC_D5  \n18 27 VSS_4 S - VSS_4 - - \n19 28 VDD_4 S - VDD_4 - - \n20 29 PA4 I/O FTa PA4 DAC 1_OUT / ADC12_IN4 /  \nUSART2_CK(7) /  \nSPI1_ CS(7) / I2S1_WS(7) /  \nSDIO2_D4  USART6_TX /  \nSPI3_ CS / I2S3_WS /  \nSDIO2_D0 / XMC_D6  \n21 30 PA5 I/O FTa PA5 DAC 2_OUT / ADC12_IN5 /  \nSPI1_SCK(7) / I2S1_CK(7) /  \nSDIO2_D5  USART6_RX /  \nSDIO2_D1 / XMC_D7  \n22 31 PA6 I/O FTa PA6 ADC12_IN6 / SPI1_MISO(7) /  \nSDIO2_D6 / TMR3_CH1(7) /  \nTMR8_ BRK / TMR13_CH1  I2S2_MCK / SDIO2_D2 /  \nTMR1_ BRK \n23 32 PA7 I/O FTa PA7 ADC12_IN7 /  \nSPI1_MOSI(7) / I2S1_SD(7) /  \nSDIO2_D7 / E MAC _MII_RX_DV(7) /  \nEMAC _RMII_CRS_DV(7) /  \nTMR3_CH2(7) / TMR8_CH1C  /  \nTMR14_CH1  SDIO2_D3 /  TMR1_ CH1C  \n24 33 PC4 I/O FTa PC4 ADC12_IN14 /  \nSDIO2_CK(7) / XMC_NE4 /  \nEMAC _MII_RXD0(7) /  \nEMAC _RMII_RXD0(7) - \n25 34 PC5 I/O FTa PC5 ADC12_IN15 / SDIO2_CMD(7) / \nEMAC _MII_RXD1(7) /  \nEMAC _RMII_RXD1(7) XMC_NOE  \n26 35 PB0 I/O FTa PB0 ADC12_IN8 /  \nI2S1_MCK(7) / EMAC _MII_RXD2(7) /  \nTMR3_CH3(7) / TMR8_CH2C  TMR1_ CH2C  \n27 36 PB1 I/O FTa PB1 ADC12_IN9 /  \nSPIM_SCK / EMAC _MII_RXD3(7) /  \nTMR3_CH4(7) / TMR8_CH3C  TMR1_ CH3C  \n28 37 PB2 I/O FT PB2 /  \nBOOT1(10) - - \n- 38 PE7 I/O FT PE7 UART7_RX(7) / XMC_D4(7) TMR1_ EXT \n- 39 PE8 I/O FT PE8 UART7_TX(7) / XMC_D5(7) TMR1_ CH1C  \n- 40 PE9 I/O FT PE9 XMC_D6(7) TMR1_CH1  \nAT32F 407 Series Data sheet  \n2022. 11.24 27 Ver 2.03 \nPin \nnumber  \nPin name  \nType(1) \nI IO level(2) \nMain \nfunction(3) Multi -functions(4) LQFP64  \nLQFP100  \nDefault  Remap  \n- 41 PE10  I/O FT PE10  XMC_D7(7) TMR1_ CH2C  \n- 42 PE11  I/O FT PE11  XMC_D8  SPI4_SCK / I2S4_CK  /  \nTMR1_CH2  \n- 43 PE12  I/O FT PE12  XMC_D9  SPI4_ CS / I2S4_WS  /  \nTMR1_ CH3C  \n- 44 PE13  I/O FT PE13  XMC_D10  SPI4_MISO  / TMR1_CH3  \n- 45 PE14  I/O FT PE14  XMC_D1 1 SPI4_MOSI / I2S4_SD /  \nTMR1_CH4  \n- 46 PE15  I/O FT PE15  XMC_D12  TMR1_ BRK \n29 47 PB10  I/O FT PB10  USART3_TX(7) / I2C2_SCL(9) /  \nEMAC _MII_RX_ER  I2S3_MCK / SPIM_IO0 /  \nTMR2_CH3  \n30 48 PB11  I/O FT PB11  USART3_RX(7) / I2C2_SDA(9) /  \nEMAC _MII_TX_EN /  \nEMAC _RMII _TX_EN  SPIM_IO1  / TMR2_CH4  \n31 49 VSS_1 S - VSS_1 - - \n32 50 VDD_1 S - VDD_1 - - \n33 51 PB12  I/O FT PB12  USART3_CK(7) / CAN2_RX(7) /  \nI2C2_SMBA(9) /  \nSPI2_ CS(9) / I2S2_WS(9) /  \nEMAC_MII_TXD0 / EMAC _RMII_TXD0 /  \nTMR1_B RK(7) XMC_D13  \n34 52 PB13  I/O FT PB13  USART3_CTS(7) / CAN2_TX(7) / \nSPI2_SCK(9) / I2S2_CK(9) /  \nEMAC _MII_TXD1 / E MAC _RMII_TXD1 /  \nTMR1_CH1C(7) - \n35 53 PB14  I/O FT PB14  USART3_RTS(7) /  \nSPI2_MISO(9) / I2S2_SDEXT(9) /  \nTMR1_ CH2C(7) / TMR12_CH1  XMC_D0  \n36 54 PB15  I/O FT PB15  SPI2_MOSI(9) / I2S2_SD(9) /  \nTMR1_ CH3C(7) / TMR12_CH2  - \n- 55 PD8 I/O FT PD8 XMC_D13(7) USART3_TX /  \nEMAC _MII_RX_DV /  \nEMAC _RMII_CRS_DV  \n- 56 PD9 I/O FT PD9 XMC_D14  USART3_RX /  \nEMAC _MII_RXD0 /  \nEMAC _RMII_RXD0  \n- 57 PD10  I/O FT PD10  XMC_D15  USART3_CK /  \nEMAC _MII_RXD1 /  \nEMAC _RM II_RXD1  \n- 58 PD11  I/O FT PD11  XMC_A16  USART3_CTS /  \nEMAC _MII_RXD2  \n- 59 PD12  I/O FT PD12  XMC_A17  USART3_RTS /  \nEMAC _MII_RXD3  /  \nTMR4_CH1  \n- 60 PD13  I/O FT PD13  XMC_A18  TMR4_CH2  \n- 61 PD14  I/O FT PD14  XMC_D0(7) TMR4_CH3  \n- 62 PD15  I/O FT PD15  XMC_D1(7) TMR 4_CH4  \n37 63 PC6 I/O FT PC6 USART6_TX(7) / I2S2_MCK(7) /  \nSDIO1_D6 / TMR8_CH1  XMC_D1  / TMR3_CH1  \nAT32F 407 Series Data sheet  \n2022. 11.24 28 Ver 2.03 \nPin \nnumber  \nPin name  \nType(1) \nI IO level(2) \nMain \nfunction(3) Multi -functions(4) LQFP64  \nLQFP100  \nDefault  Remap  \n38 64 PC7 I/O FT PC7 USART6_RX(7) / I2S3_MCK(7) /  \nSDIO1_D7 / TMR8_CH2  TMR3_CH2  \n39 65 PC8 I/O FT PC8 USART6_CK / I2S4_MCK(7) /  \nSDIO1_D0 / TMR8_CH3  TMR3_CH3  \n40 66 PC9 I/O FT PC9 I2C3_SDA(7) / SDIO1_D1 /  \nTMR8_CH4  TMR3_CH4  \n41 67 PA8 I/O FT PA8 CLKOUT / USART1_CK /  \nI2C3_SCL / USBFS _SOF /  \nSPIM_ CS / TMR1_CH1(7) - \n42 68 PA9 I/O FT PA9 USART1_TX(7) / I2C3_SMBA /  \nTMR1_CH2(7) - \n43 69 PA10  I/O FT PA10  USART1_RX(7) / TMR1_CH3(7) I2S4_MCK  \n44 70 PA11  I/O TC PA11  USBFS1 _D- / USART1_CTS /  \nCAN1_RX(7) / SPIM_IO0(7) /  \nTMR1_CH4(7) - \n45 71 PA12  I/O TC PA12  USBFS1 _D+ / USART1_RTS /  \nCAN1_TX(7) / SPIM_IO1(7) /  \nTMR1_ EXT(7) - \n46 72 PA13  I/O FT JTMS -\nSWDIO  - PA13  \n- 73 Not connected  \n47 74 VSS_2 S - VSS_2 - - \n48 75 VDD_2 S - VDD_2 - - \n49 76 PA14  I/O FT JTCK -\nSWCLK  - PA14  \n50 77 PA15  I/O FT JTDI  SPI3_ CS(7) / I2S3_WS(7) PA15 /  \nSPI1_ CS / I2S1_WS /  \nTMR2_CH1 / TMR2_ EXT \n51 78 PC10  I/O FT PC10  UART4_TX(7) / SDIO1_D2  USART3_TX /   \nSPI3_SCK / I2S3_CK  \n52 79 PC11  I/O FT PC11  UART4_RX(7) / SDIO1_D3  USART3_RX /  \nSPI3_MISO / I2S3_SDEXT  /  \nXMC_D2  \n53 80 PC12  I/O FT PC12  UART5_TX(7) / SDIO1_CK  USART3_CK /  \nSPI3_MOSI / I2S3_SD /  \nXMC_D3  \n- 81 PD0 I/O FT PD0 XMC_D2(7) CAN1_RX  \n- 82 PD1 I/O FT PD1 XMC_D3(7) CAN1_TX  \n54 83 PD2 I/O FT PD2 UART5_RX(7) / SDIO1_ CMD  /  \nTMR3_ EXT XMC_NWE  \n- 84 PD3 I/O FT PD3 XMC_CLK  USART2_CTS  \n- 85 PD4 I/O FT PD4 XMC_NOE(7) USART2_RTS  \n- 86 PD5 I/O FT PD5 XMC_NWE(7) USART2_TX  \n- 87 PD6 I/O FT PD6 XMC_NWAIT  USART2_R X \n- 88 PD7 I/O FT PD7 XMC_NE1 / XMC_NCE2  USART2_CK  \nAT32F 407 Series Data sheet  \n2022. 11.24 29 Ver 2.03 \nPin \nnumber  \nPin name  \nType(1) \nI IO level(2) \nMain \nfunction(3) Multi -functions(4) LQFP64  \nLQFP100  \nDefault  Remap  \n55 89 PB3 I/O FT JTDO  SPI3_SCK(7) / I2S3_CK(7) PB3 / UART7_RX /  \nSPI1_SCK / I2S1_CK /  \nSWO / TMR2_CH2  \n56 90 PB4 I/O FT NJTRST  SPI3_MISO(7) / I2S3_SDEXT(7) PB4 /  \nSPI1_MISO / I2C3_SDA /  \nUART7_TX / TMR3_ CH1 \n57 91 PB5 I/O FT PB5 SPI3_MOSI(7) / I2S3_SD(7) /  \nI2C1_SMBA(7) / EMAC _PPS_OUT  SPI1_MOSI / I2S1_SD /  \nCAN2_RX / TMR3_CH2  \n58 92 PB6 I/O FT PB6 I2C1_SCL(7) / SPIM_IO3 /  \nTMR4_CH1(7) USART1_TX / I2S1_MCK /  \nSPI4_ CS / I2S4_WS /  \nCAN2_TX  \n59 93 PB7 I/O FT PB7 I2C1_SDA(7) / XMC_NADV /  \nSPIM_IO2 / TMR4_CH2(7) USART1_RX /  \nSPI4_SCK / I2S4_CK  \n60 94 BOOT0  I - BOOT0  - - \n61 95 PB8 I/O FT PB8 SDIO1_D4 / EMAC _MII_TXD3 /  \nTMR4_CH3(7) / TMR10_CH1  UART5_RX / SPI4_MISO /  \nI2C1_SCL / CAN1_RX  \n62 96 PB9 I/O FT PB9 SDIO1 _D5 / TMR4_CH4(7) /  \nTMR11_CH1  UART5_TX /  \nSPI4_MOSI / I2S4_SD /  \nI2C1_SDA / CAN1_TX  \n- 97 PE0 I/O FT PE0 UART8_RX(7) / XMC_LB  /  \nTMR4_ EXT - \n- 98 PE1 I/O FT PE1 UART8_TX(7) / XMC_ UB - \n63 99 VSS_3 S - VSS_3 - - \n64 100 VDD_3 S - VDD_3 - - \n(1) I = input, O = output, S = supply.  \n(2) TC = standard  3.3 V GPIO , FT = general 5 V-tolerant  GPIO , FTa = 5 V -tolerant GPIO  with analog functionalities . FTa pin is \n5 V-tolerant when configured as input floating, input pull -up, or input pull -down mode. However, it is not  5 V-tolerant when \nconfigured as analog mode. Meanwhile, its input level should not higher than V DD + 0.3 V.  \n(3) Function availability depends on the chosen device.  \n(4) If several peripherals share the same GPIO  pin, to avoid conflict between these multiple  functions only  one peripheral \nshould be enabled at a time through the peripheral clock enable bit (in the corresponding RCC peripheral clock enable \nregister).  \n(5) PC13, PC14, and PC15 are supplied through the power switch. Since the switch only drives  a limited amount of cu rrent (3 \nmA), the use of GPIOs PC13 to PC15 in output mode is limited not to be used as a current source (e.g. to drive an LED).  \n(6) Main function after the first battery powered  domain power -up. Later on, it depends on the contents of the battery powered  \nregisters even  after reset (because these registers are not reset by the main reset). For details on how to manage these \nGPIOs, refer to the  battery powered  domain and register description sections in the AT32F 407 reference manual.  \n(7) This multiple  function can b e remapped by software to some other port pins (if available on the used package). For more \ndetails, refer to the multi-function GPIO  and debug configuration section in the AT32F 407 reference manual.  \n(8) For the LQFP64 package, the pins number 5 and 6 are conf igured as HEXT_IN  and HEXT_OUT  after reset, the  \nfunctionality of PD0 and PD1 can be remapped by software on these pins. However, for the LQFP100  package, PD0 and \nPD1 are available by default, so there is no need for remapping. For more details, refer to multi-function GPIO  and debug \nconfiguration section in the AT32F 407 reference manual.  \n(9) SPI2, I2S2, and I2C2 are not available when the Ethernet  MAC  is being used.  \n(10) If the device boots from Flash and leaves PB2 not used, it is recommended  to pull PB2  down to gr ound . \nAT32F 407 Series Data sheet  \n2022. 11.24 30 Ver 2.03 \nTable 7. XMC  pin definition  \nPins XMC  \nLQFP64  Multiplexed  \nPSRAM /NOR  LCD NAND  \nPE2 A23 A23 - - \nPE3 A19 A19 - - \nPE4 A20 A20 - - \nPE5 A21 A21 - - \nPE6 A22 A22 - - \nPC2 NWE  NWE  NWE  Yes \nPC3 - A0 - Yes \nPA2 DA4 D4 D4 Yes \nPA3 DA5 D5 D5 Yes \nPA4 DA6 D6 D6 Yes \nPA5 DA7 D7 D7 Yes \nPC4 NE4 NE4 - Yes \nPC5 NOE  NOE  NOE  Yes \nPE7 DA4 D4 D4 - \nPE8 DA5 D5 D5 - \nPE9 DA6 D6 D6 - \nPE10  DA7 D7 D7 - \nPE11  DA8 D8 D8 - \nPE12  DA9 D9 D9 - \nPE13  DA10  D10 D10 - \nPE14  DA11  D11 D11 - \nPE15  DA12  D12 D12 - \nPB12 DA13  D13 D13 Yes \nPB14  DA0 D0 D0 Yes \nPD8 DA13  D13 D13 - \nPD9 DA14  D14 D14 - \nPD10  DA15  D15 D15 - \nPD11  A16 A16 CLE - \nPD12  A17 A17 ALE - \nPD13  A18 A18 - - \nPD14  DA0 D0 D0 - \nPD15  DA1 D1 D1 - \nPC6 DA1 D1 D1 Yes \nPC11  DA2 D2 D2 Yes \nPC12  DA3 D3 D3 Yes \nPD0 DA2 D2 D2 - \nPD1 DA3 D3 D3 - \nAT32F 407 Series Data sheet  \n2022. 11.24 31 Ver 2.03 \nPins XMC  \nLQFP64  Multiplexed  \nPSRAM /NOR  LCD NAND  \nPD2 NWE  NWE  NWE  Yes \nPD3 CLK - - - \nPD4 NOE  NOE  NOE  - \nPD5 NWE  NWE  NWE  - \nPD6 NWAIT  - NWAIT  - \nPD7 NE1 NE1 NCE2  - \nPB7 NADV  - - Yes \nPE0 LB - - - \nPE1 UB - - - \nAT32F 407 Series Data sheet  \n2022. 11.24 32 Ver 2.03 \n4 Memory mapping  \nFigure 4. Memory map  \n \nCode\n0x0000_00000x1FFF_FFFFSRAM\n0x2000_00000x3FFF_FFFFPeripherals\n0x4000_00000x5FFF_FFFFExternal memory \ncontroller\n(XMC)\n0x6000_00000x9FFF_FFFFXMC Registers\n0xA000_00000xA000_0FFFReserved\n0xA000_10000xDFFF_FFFFCortex-M4 internal \nperipherals\n0xE000_00000xFFFF_FFFF\nAliased to Flash or boot code \narea depending on \nBOOT pins0x0000_00000x0003_FFFFReserved\n0x0004_00000x07FF_FFFFInternal Flash memory \nBank 10x0800_00000x0807_FFFFInternal Flash memory \nBank 20x0808_00000x080F_FFFFReserved\n0x0810_00000x083F_FFFFExternal SPI Flash \nmemory Bank3\n0x0840_00000x093F_FFFFReserved\n0x0940_00000x1FFF_AFFFBoot code area\n0x1FFF_B0000x1FFF_F7FFUser system data\n0x1FFF_F8000x1FFF_F82FReserved\n0x1FFF_F8300x1FFF_FFFFSRAM\n0x2000_00000x2003_7FFFReserved\n0x2003_80000x21FF_FFFFBit-band alias of\nSRAM0x2200_00000x226F_FFFFPeripherals\n0x4000_00000x4002_37FFReserved\n0x4002_38000x41FF_FFFFBit-band alias of \nperipherals0x4200_00000x4246_FFFF\nReserved\n0x2270_00000x3FFF_FFFFReserved\n0x4247_00000x5FFF_FFFF \nAT32F 407 Series Data sheet  \n2022. 11.24 33 Ver 2.03 \n5 Electrical characteristics  \n5.1 Parameter conditions  \n5.1.1  Minimum and maximum values  \nThe minimum and maximum values are guaranteed in the worst conditions . Data based on \ncharacterization results, design simulation and/or technology characteristics are indicated in the \ntable footnotes and are not tested in production.  \n5.1.2  Typical values  \nTypical data are based on T A = 25 ° C, V DD = 3.3 V.  \n5.1.3  Typical curves  \nAll typical curves are given only as design guidelines and are not tested.  \n5.1.4  Power supply scheme  \nFigure 5. Power supply scheme  \nBackup circuitry\n(OSC 32K,RTC ,Wake -up logic\nBackup registers )Level shifterIO\nLogic\nKernel logic\n(CPU ,\nDigital\n＆ Memories )\nRegulator\nADC /\nDACRCs,PLL,\n...5 x 100 nF\n+ 1 x 4.7 µF\n100 nF\n+ 1 µF100 nF\n+ 1 µFPower switch\nOUT\nIN\nVSSAVREF-VREF+VDDA\nVREFVDDVDD\nVSS_1/2/…/5VDD_1/2/…/5GPIOVBAT\n1.8-3.6v\n \nCaution:  In this figure, the 4.7μF  capacitor must be connected to VDD_3. \nAT32F 407 Series Data sheet  \n2022. 11.24 34 Ver 2.03 \n5.2 Absolute maximum  values  \n5.2.1  Ratings  \nIf stresses were out of the absolute maximum ratings liste d in Table 8, Table  9, and Table 10, it \nmay cause permanent damage to the device. These are maximum stress ratings only that the \ndevice  could bear, but the functional operation of the device under these conditions is not implied. \nExposure to maximum rating conditions for an extended period  of time  may affect device reliability.  \nTable 8. Voltage characteristics  \nSymbol  Ratings  Min Max Unit \nVDD-VSS External main supply voltage (including VDDA and \nVDD) -0.3 4.0 \nV \nVIN Input vo ltage on FT GPIO  \nVSS-0.3 6.0 Input vo ltage on FTa GPIO  (set as input floating, \ninput pull -up, or input pull -down  mode)  \nInput voltage on TC GPIO  \nVSS-0.3 4.0 \nInput vo ltage on FTa GPIO  (set as analog mode)  \n|ΔV DDx| Variations between different V DD power pins  - 50 \nmV \n|VSSx-VSS| Variations betwee n all the different ground pins  - 50 \nTable  9. Current characteristics  \nSymbol  Ratings  Max Unit \nIVDD Total current into V DD/VDDA power lines (source)  150 \nmA IVSS Total current out of V SS ground lines (sink)  150 \nIIO Output current sunk by any GPIO  and control pin  25 \nOutput current source by any GPIO s and control pin  -25 \nTable 10. Thermal characteristics  \nSymbol  Ratings  \nMin Value  Unit \nTSTG Storage temperature range  -60 ~ +150  \n°C \nTJ Maximum junction temperature  125 \n \nAT32F 407 Series Data sheet  \n2022. 11.24 35 Ver 2.03 \n5.2.2  Electrical sensitivity  \nBased on thre e different tests ( HBM, CDM , and LU) using specific measurement methods, the \ndevice is stressed in order to determine its performance in terms of electrical sensitivity.  \nElectrostatic discharge (ESD)  \nElectrostatic discharges are applied to the pins of each  sample according to each pin combination. \nThis test conforms to the JS -001-2017/JS -002-2018 standard.  \nTable 11. ESD value s \nSymbol  Parameter  Conditions  Class  Max(1) Unit \nVESD(HBM)  Electrostatic discharge voltage \n(human body model)  TA = +25 °C , conforming to  \nJS-001-2017  3A 5000  \nV \nVESD(CDM)  Electrostatic discharge voltage \n(charge device model)  TA = +25 °C , conforming to  \nJS-002-2018 III 1000  \n(1)  Guaranteed by characterization results, not tested in production.  \n \nStatic l atch-up \nTests compliant with EIA/JESD78E IC latch -up standard are required to assess the latch -up \nperformance:  \n\uf06c A supply overvolta ge is applied to each power supply pin ; \n\uf06c A current injection is applied to each input, output and configurable GPIO  pin. \nTable 12. Latch-up values  \nSymbol  Parameter  Conditions  Level /Class  \nLU Static latch -up class  TA = +105 °C, conforming to  \nEIA/JESD78E  II level A (200 mA)  \n \nAT32F 407 Series Data sheet  \n2022. 11.24 36 Ver 2.03 \n5.3 Specification  \n5.3.1  General operating conditions  \nTable 13. General operati ng conditions  \nSymbol  Parameter  Conditions  Min Max Unit \nfHCLK Internal AHB clock frequency  Flash memory \nbank 3  (SPIM) \nnot used  3.1 V ≤ VDD ≤ 3.6 V 0 240 \nMHz 2.6 V ≤ VDD < 3.1 V 0 180 \nFlash memory \nbank 3 (SPIM) \nused  3.1 V ≤ VDD ≤ 3.6 V 0 180 \n2.6 V ≤ VDD < 3.1 V 0 160 \nfPCLK1  Interna l APB1 clock frequency  - 0 120 MHz \nfPCLK2 Internal APB2 clock frequency  - 0 120 MHz \nVDD Standard operating voltage  - 2.6 3.6 V \nVDDA Analog operating voltage  Must be the same potential as VDD(1) 2.6 3.6 V \nVBAT Backup operating voltage  - 1.8 3.6 V \nPD Power dissipation: T A = 105 °C LQFP100  - 326 \nmW \nLQFP64  - 309 \nTA Ambient temperature  - -40 105 °C \n \n5.3.2  Operating conditions at power -up / power -down  \nTable 14. Operating conditions at power -up / power -down  \nSymbol  Parameter  Conditions  Min Max Unit \ntVDD VDD rise time rate  \n- 0 ∞(1) ms/V \nVDD fall time rate  20 ∞ μs/V \n(1)  If V DD rising time rate  is slower than 120 ms/V, the code should access th e backup registers after  VDD higher \nthan VPOR + 0.1V.  \n \nAT32F 407 Series Data sheet  \n2022. 11.24 37 Ver 2.03 \n5.3.3  Embedded reset and power control block characteristics  \nTable 15. Embedded reset and power management  block characteristics  \nSymbol  Parameter  Conditions  Min Typ Max Unit \nVPVM Power voltage monitoring  \nlevel selection  PVMSEL [2:0] = 001  (rising edge )(1) 2.19 2.28 2.37 V \nPVMSEL [2:0] = 001  (falling edge )(1) 2.09 2.18 2.27 V \nPVMSEL [2:0] = 010  (rising edge )(2) 2.28 2.38 2.48 V \nPVMSEL [2:0] = 010  (falling edge )(2) 2.18 2.28 2.38 V \nPVMSEL  [2:0] = 011  (rising edge )(2) 2.38 2.48 2.58 V \nPVMSEL  [2:0] = 011  (falling edge )(2) 2.28 2.38 2.48 V \nPVMSEL  [2:0] = 100  (rising edge )(2) 2.47 2.58 2.69 V \nPVMSEL [2:0] = 100  (falling edge )(2) 2.37 2.48 2.59 V \nPVMSEL [2:0] = 101  (rising edge )(2) 2.57 2.68 2.79 V \nPVMSEL [2:0] = 101  (falling edge )(2) 2.47 2.58 2.69 V \nPVMSEL [2:0] = 110  (rising edge )(2) 2.66 2.78 2.9 V \nPVMSEL [2:0] = 110  (falling edge )(2) 2.56 2.68 2.8 V \nPVMSEL [2:0] = 111  (rising edge ) 2.76 2.88 3 V \nPVMSEL [2:0] = 111  (falling edge ) 2.66 2.78 2.9 V \nVHYS_P(2) PVM  hysteresis  - - 100 - mV \nVPOR(2) Power on reset threshold  - 2.03 2.18 2.35 V \nVLVR(2) Low voltage reset \nthreshold  - 1.85(3) 2.02 2.2 V \nVLVRhyst(2) LVR hysteresis  - - 160 - mV \nTRESTTEMPO(2) Reset temporization : CPU \nstarts execution after V DD \nkeeps higher than V POR for \nTRSTTEMPO  - - 13 - ms \n(1)  PVMSEL [2:0] = 001  may be not available for its voltage detector level may be lower than VPOR/PDR . \n(2)  Guaranteed by design, not tested in production.  \n(3)  The product behavior is gua ranteed by design down to the minimum VLVR value.  \nAT32F 407 Series Data sheet  \n2022. 11.24 38 Ver 2.03 \nFigure 6. Power on reset  and low voltage  reset waveform  \nResetVDD\nLVRPOR\nTRSTTEMPOVLVRhyst\nt\n \n5.3.4  Memory characteristics  \nTable 16. Internal Flash memory characteristics  \nSymbol  Parameter  Conditions  Typ(1) \nUnit \nfHCLK \n240 200 144 72 48 8 MHz \nTPROG Programming time  - 50 μs \ntERASE  Page (2 KB) erase time  - 50 ms \ntME Mass erase time  AT32F 407xC 0.8 \ns AT32F 407xE 1.4 \nAT32F 407xG 1.4 \nIDD Supply current  Programming \nmode  35.5 29.9 22.5 13.4 9.9 3.7 \nmA \nErase mode  57.4 49.2 38.8 25.4 20.6 11.4 \n(1)  Guaranteed by design, not tested in production.  \nTable 17. Internal Flash memory endurance and data retention  \nSymbol  Parameter  Conditions  Min(1) Typ Max Unit \nNEND Endurance  TA = -40 ~ 105 °C 100 - - kcycles  \ntRET Data r etention  TA = 105 °C 10 - - years  \n(1)  Guaranteed by design, not tested in production.  \n \nAT32F 407 Series Data sheet  \n2022. 11.24 39 Ver 2.03 \n5.3.5  Supply current characteristics  \nThe current consumption is subjected to  several parameters and factors such as the operating \nvoltage, ambient temperature, GPIO  pin loading, device software configuration, operating \nfrequencies, GPIO  pin switching rate, and executed binary code.  The current consumption is  \nobtained by characterization results, not tested in production.  \nTypical and maximum current consumption  \nThe MCU is placed un der the following conditions:  \n\uf06c All GPIO  pins are in analog mode . \n\uf06c Prefetch ON . (Reminder: this bit must be set before clock setting and bus prescaling .) \n\uf06c When the peripherals are enabled:  \n− If fHCLK > 120 MHz , fPCLK1  = fHCLK/2, fPCLK2  = fHCLK/2, f ADCCLK  = fPCLK 2/4  \n− If fHCLK ≤ 120 MHz, fPCLK 1 = fHCLK, fPCLK 2 = fHCLK, fADCCLK  = fPCLK 2/4 \n\uf06c Code executes in ZW area.  \n\uf06c Unless otherwise specified , the typical values are measured  with VDD = 3.3 V  and TA = 25 ° C  \ncondition  and the maximum values are measured with VDD = 3.6 V. \nAT32F 407 Series Data sheet  \n2022. 11.24 40 Ver 2.03 \nTable 18. Typical current consumption in Run mode  \nSymbol  Parameter  Conditions  fHCLK Typ \n大值 Unit All peripherals \nenabled  All peripherals \ndisabled  \nIDD Supply current \nin Run mode  High speed e xternal \ncrystal (HEXT)(1)(2) 240 MHz  100.7  41.0 \nmA 200 MHz  84.7 34.6 \n144 MHz  62.0 25.7 \n120 MHz 62.5 23.3 \n108 MHz 56.7 21.3 \n72 MHz  39.2 15.4 \n48 MHz  27.1 11.1 \n36 MHz  21.0 8.99 \n24 MHz  14.9 6.86 \n16 MHz  10.8 5.44 \n8 MHz  6.25 3.58 \n4 MHz  4.29 2.95 \n2 MHz  3.31 2.63 \n1 MHz  2.83 2.47 \n500 kHz 2.59 2.39 \n125 kHz 2.40 2.34 \nHigh speed internal  clock \n(HICK)(2) 240 MHz  100.5  41.0 \nmA 200 MHz  84.6 34.6 \n144 MHz  61.9 25.6 \n120 MHz 62.5 23.2 \n108 MHz 56.6 21.2 \n72 MHz  39.2 15.4 \n48 MHz 27.0 11.1 \n36 MHz  20.9 8.91 \n24 MHz  14.8 6.78 \n16 MHz  10.7 5.36 \n8 MHz  6.16 3.49 \n4 MHz  4.20 2.86 \n2 MHz  3.22 2.54 \n1 MHz  2.74 2.39 \n500 kHz 2.50 2.31 \n125 kHz 2.32 2.25 \n(1)  External clock is 8 MHz . \n(2)  PLL is on when f HCLK > 8 MHz.  \nAT32F 407 Series Data sheet  \n2022. 11.24 41 Ver 2.03 \nTable 19. Typical current consumption in Sleep mode  \nSymbol  Parameter  Conditions  fHCLK Typ \n大值 Unit All peripherals \nenabled  All peripherals \ndisabled  \nIDD Supply current \nin Sleep mode  High speed e xternal \ncrystal (HEXT)(1)(2) 240 MHz  85.3 12.5 \nmA 200 MHz  71.7 10.8 \n144 MHz  52.5 8.52 \n120 MHz 53.7 8.07 \n108 MHz 48.7 7.54 \n72 MHz  33.9 6.29 \n48 MHz  23.5 5.07 \n36 MHz  18.3 4.45 \n24 MHz  13.1 3.83 \n16 MHz  9.59 3.42 \n8 MHz  5.66 2.57 \n4 MHz  4.00 2.45 \n2 MHz 3.17 2.39 \n1 MHz  2.76 2.36 \n500 kHz 2.55 2.34 \n125 kHz 2.40 2.33 \nHigh speed internal  clock \n(HICK)(2) 240 MHz  85.3 12.4 \nmA 200 MHz  71.7 10.8 \n144 MHz  52.6 8.44 \n120 MHz 53.7 7.99 \n108 MHz 48.7 7.45 \n72 MHz  33.8 6.20 \n48 MHz  23.4 4.97 \n36 MHz  18.2 4.35 \n24 MHz  13.0  3.74 \n16 MHz  9.51 3.33 \n8 MHz  5.57 2.48 \n4 MHz  3.91 2.36 \n2 MHz  3.08 2.30 \n1 MHz  2.67 2.27 \n500 kHz 2.47 2.25 \n125 kHz 2.31 2.24 \n(1)  External clock is 8 MHz . \n(2)  PLL is on w hen f HCLK > 8 MHz.  \n \nAT32F 407 Series Data sheet  \n2022. 11.24 42 Ver 2.03 \nTable 20. Maximum current consumption in Run mode  \nSymbol  Parameter  Conditions  fHCLK Max \n Unit \nTA = 85 °C TA = 105 °C \nIDD Supply current in  \nRun mode  High speed e xternal \ncrystal (HEXT)(1), all \nperipherals enabled  240 MHz  115.5  126.5  \nmA 200 MHz  99.2 110.2  \n144 MHz  75.9 87.4 \n120 MHz 76.7 86.5 \n108 MHz 70.7 81.3 \n72 MHz  52.5 62.8 \n48 MHz  39.9 50.0 \n36 MHz  33.5 43.5 \n24 MHz  27.1 37.0 \n16 MHz  22.8 32.6 \n8 MHz  18.0 27.8 \nHigh speed e xternal \ncrystal (HE XT)(1), all \nperipherals disabled  240 MHz  53.4 63.5 \nmA 200 MHz  46.9 57.0 \n144 MHz  37.8 47.7 \n120 MHz 35.4 45.3 \n108 MHz 33.3 43.2 \n72 MHz  27.3 37.1 \n48 MHz  22.9 32.6 \n36 MHz  20.7 30.4 \n24 MHz  18.5 28.2 \n16 MHz  17.0 26.7 \n8 MHz  15.2 24.8 \n(1)  External clock is 8 MHz and PLL is on when f HCLK > 8 MHz.  \nAT32F 407 Series Data sheet  \n2022. 11.24 43 Ver 2.03 \nTable 21. Maximum current consumption in Sleep mode  \nSymbol  Parameter  Conditions  fHCLK Max \n Unit \nTA = 85 °C TA = 105 °C \nIDD Supply current in  \nSleep  mode High speed e xternal \ncrystal (HEXT)(1), all \nperipherals enabled  240 MHz  99.8 110.4  \nmA 200 MHz  86.0 96.4 \n144 MHz  66.2 78.0 \n120 MHz 67.7 76.5 \n108 MHz 62.5 72.7 \n72 MHz  47.0 57.0 \n48 MHz  36.1 46.0 \n36 MHz  30.6 40.4 \n24 MHz  25.1 34.8 \n16 MHz  21.5 31.1 \n8 MHz  17.3 26.9 \nHigh speed e xternal \ncrystal (HEXT)(1), all \nperipherals disabled  240 MHz  23.9 33.5 \nmA 200 MHz  22.3 31.8 \n144 MHz  20.0 29.4 \n120 MHz 19.6 29.0 \n108 MHz 19.0 28.4 \n72 MHz  17.7 27.1 \n48 MHz  16.4 25.8 \n36 MHz  15.8 25.2 \n24 MHz  15.2 24.6 \n16 MHz  14.8 24.2 \n8 MHz  13.9 23.3 \n(1)  External clock is 8 MHz and PLL is on when f HCLK > 8 MHz.  \nTable 22. Typical and maximum current consumptions in Deepsleep  and Standby modes  \nSymb\nol Parameter  Conditions  Typ(1) Max(2) \nUnit VDD/VBAT  \n= 2.6 V VDD/VBAT  \n= 3.3 V TA =  \n25 °C  TA =  \n85 °C TA =  \n105 °C \nIDD Supply \ncurrent in \nDeepsleep  \nmode  LDO in Run mode,  \nHICK  and HEXT  OFF (no \nWDT ) 1.35 1.36 \nRefer to \nnote (3) 13.6 23.7 \nmA \nLDO in low -power mode,  \nHICK  and HEXT  OFF (no \nWDT ) 1.33 1.34 13.1 22.8 \nSupply \ncurrent in \nStandby \nmode  LEXT  and RTC OFF  3.93 5.72 7.49 10.4 14.9 \nμA \nLEXT and RTC ON  4.55 6.48 8.34 11.5 16.5 \n(1)  Typical values are measured at TA = 25 ° C . \n(2)  Guaranteed by characterization results, not tested in production.  \n(3)  The value may be several times the typical values due to process variation.  \nAT32F 407 Series Data sheet  \n2022. 11.24 44 Ver 2.03 \nFigure 7. Typical current consumption in Deepsleep  mode vs. temperature at different V DD \n \nFigure 8. Typical current consumption in Standby mode vs. temperature at different V DD \n \n\nAT32F 407 Series Data sheet  \n2022. 11.24 45 Ver 2.03 \nTable 23. Typical and maximum current consumptions on V BAT \nSymbol  Parameter  Conditions  Typ(1) Max(2) \nUnit VBAT =  \n2.0 V VBAT =  \n2.6 V VBAT =  \n3.3 V  TA =  \n25 °C  TA =  \n85 °C TA =  \n105 °C \nIDD_VBAT  Supply current \nof VBAT LEXT and RTC ON ,  \nVDD < V LVR 0.47 0.59 0.77 0.92 1.34 2.04 μA \n(1)  Typical  values are measured at T A = 25 ° C.  \n(2)  Guaranteed by characterization results, not tested in production.  \n \nFigure 9. Typical current consumption on V BAT with LEXT  and RTC ON vs. temperature at \ndifferent V BAT \n \n\nAT32F 407 Series Data sheet  \n2022. 11.24 46 Ver 2.03 \nOn-chip peripheral current con sumption  \nThe MCU is placed under the following conditions:  \n\uf06c All GPIO  pins are in analog mode . \n\uf06c The given value is calculated by measuring the current consumption  difference between “all \nperipherals clocked OFF” and “ only one peripheral clocked ON”.  \nTable 24. Peripheral current consumption  \nPeripheral  Typ Unit \nAHB DMA1  9.34 \nμA/MHz  DMA2  9.39 \nGPIOA  1.41 \nGPIOB  1.41 \nGPIOC  1.47 \nGPIOD  1.43 \nGPIOE  1.44 \nXMC  26.89  \nCRC  1.53 \nSDIO1  19.62  \nSDIO2  20.40  \nEMAC  \nEMAC_TX  \nEMAC_RX  \nEMAC_PTP  30.78  \nAPB1  TMR 2 9.11 \nTMR 3 6.52 \nTMR 4 6.54 \nTMR 5 8.82 \nTMR 6 0.77 \nTMR 7 0.75 \nTMR12  3.89 \nTMR13  2.45 \nTMR14  2.48 \nSPI2 /I2S2 5.19 \nSPI3 /I2S3 4.95 \nSPI4/I2S4 2.62 \nUSAR T2 2.60 \nUSAR T3 2.57 \nUAR T4 2.60 \nUAR T5 2.63 \nAT32F 407 Series Data sheet  \n2022. 11.24 47 Ver 2.03 \nPeripheral  Typ Unit \nAPB1  I2C1 2.47 \nμA/MHz  I2C2 2.54 \nUSBFS  6.40 \nCAN 1 3.77 \nCAN2  3.77 \nDAC 1/2 2.30 \nWWDT  0.34 \nPWC  0.34 \nBPR 68.36  \nAPB2  IOMUX  2.32 \nSPI1/I2S1 2.82 \nUSAR T1 2.53 \nUSAR T6 2.64 \nUART7  2.80 \nUART8  2.85 \nI2C3 2.48 \nTMR1  8.99 \nTMR8  8.72 \nTMR9  3.78 \nTMR10  2.62 \nTMR11  2.56 \nADC1  5.17 \nADC2  5.24 \nADC3  5.18 \nACC  0.95 \n \nAT32F 407 Series Data sheet  \n2022. 11.24 48 Ver 2.03 \n5.3.6  External clock source characteristics  \nHigh -speed external clock generated from a crystal  / ceramic resonator  \nThe high -speed external ( HEXT ) clock can be supplied with a 4 t o 25 MHz crystal/ceramic \nresonator oscillator. All the information given in this paragraph are based on characterization \nresults obtained with typical external components specified in the table below. In the application, \nthe resonator and the load capacito rs have to be placed as close as possible to the oscillator pins \nin order to minimize output distortion and startup stabilization time. Refer to the crystal resonator \nmanufacturer for more details on the resonator characteristics (frequency, package, accur acy).  \nTable 25. HEXT  4-25 MHz crystal  characteristics(1)(2)  \nSymbol  Parameter  Conditions  Min Typ Max Unit \nfHEXT_IN  Oscillator frequency  - 4 8 25 MHz \ntSU(HEXT )(3) Startup time  VDD is stabilized  - 2 - ms \n(1)  Oscillator  characteristics given by the cryst al/ceramic resonator manufacturer.  \n(2)  Guaranteed by characterization results, not tested in production.  \n(3)  tSU(HEXT ) is the startup time measured from the moment HEXT  is enabled (by software) to a stabilized 8 MHz \noscillation is reached. This value is measured f or a standard crystal resonator and it can vary significantly with \nthe crystal manufacturer  \n \nFor CL1 and CL2, it is recommended to use high -quality external ceramic capacitors in the 5 pF to 25 \npF range (typ.), designed for high -frequency applications, and  selected to match the requirements \nof the crystal or resonator. C L1 and C L2 are usually the same size. The crystal manufacturer typically \nspecifies a load capacitance which is the series combination of C L1 and C L2. PCB and MCU pin \ncapacitance must be incl uded (10 pF can be used as a rough estimate of the combined pin and \nboard capacitance) when sizing C L1 and C L2. \nFigure 10. HEXT typical application with an 8 MHz crystal  \nBias\nControlled\ngain\nCL2CL1\n8 MHz\ncrystalHEXT_IN\nHEXT_OUTRFfHEXT\n \nAT32F 407 Series Data sheet  \n2022. 11.24 49 Ver 2.03 \nHigh -speed external clock generated from an external source  \nThe characteristics given in the table below  result from tests performed using a high -speed exte rnal \nclock source . \nTable 26. HEXT  external source  characteristics  \nSymbol  Parameter  Conditions  Min Typ Max Unit \nfHEXT _ext User external clock source frequency(1) \n- 1 8 25 MHz \nVHEXT H HEXT_IN  input pin high level voltage  0.7V DD - VDD \nV \nVHEXT L HEXT_IN  input pin low level voltage  VSS - 0.3V DD \ntw(HEXT ) \ntw(HEXT ) HEXT_IN  high or low time(1) 5 - - \nns \ntr(HEXT ) \ntf(HEXT ) HEXT_IN  rise or fall time(1) - - 20 \nCin(HEXT ) HEXT_IN  input capacitance(1) - - 5 - pF \nDuCy (HEXT ) Duty cycle  - 45 - 55 % \nIL HEXT_IN  Input leakage current  VSS ≤ VIN ≤ VDD - - ±1 μA \n(1)  Guaranteed by design, not tested in production.  \nFigure 11. HEXT  external source  AC timing diagram  \n90%\n10%VHEXTLVHEXTH\ntr(HEXT) tf(HEXT) tW(HEXT) tW(HEXT)t\nExternal\nclock sourceILHEXT_INfHEXT_extTHEXT\n \n \nAT32F 407 Series Data sheet  \n2022. 11.24 50 Ver 2.03 \nLow-speed external clock generated from a crystal  / ceramic resonator  \nThe low -speed  external ( LEXT ) clock can be supplied with a 32.768 kHz crystal/ceramic resonator \noscillator. All the information given in this paragraph are based on characterization results obtained \nwith typical external components specified in the table below . In the application, the resonator and \nthe load capacitors have to be placed as close as possible to the oscillator pins in order to minimize \noutput distortion and startup stabilization time. Refer to the crystal resonator manufacturer for more \ndetails on the reso nator characteristics (frequency, package, accuracy).  \nTable 27. LEXT  32.768 kHz crystal  characteristics(1)(2) \nSymbol  Parameter  Conditions  Min Typ Max Unit \ntSU(LEXT ) Startup time  VDD is stabilized  - 150 - ms \n(1)  Oscillator  characteristics given by the crystal/ceramic resonator manufacturer.  \n(2)  Guaranteed by characterization results, not tested in production.  \n \nFor C L1 and C L2, it is recommended to use high -quality ceramic capacitors in the 5 pF to 15 pF \nrange selected to match the requirements of the crystal or resonator. C L1 and C L2, are usually the \nsame size. The crystal manufacturer typically specifies a load capacitance which is the series \ncombination of C L1 and C L2. \nLoad capacitance C L has the following formula: C L = C L1 x C L2 / (C L1 + C L2) + C stray where C stray is \nthe pin capacitance and board or trace PCB -related capacitance. Typically, it is between 2 pF and 7 \npF. \nFigure 12. LEXT t ypical application with a 32.768 kHz crystal  \nBias\nControlled\ngain\nCL2CL1\n32.768 kHz\ncrystalLEXT_IN\nLEXT_OUTRFfLEXT\n \nNote:  No exter nal resistor is required between LEXT _IN and LEXT _OUT  and it is also prohibited to add it.  \n \nAT32F 407 Series Data sheet  \n2022. 11.24 51 Ver 2.03 \nLow-speed external clock generated from an external source  \nThe characteristics given in the table below result from tests performed using a low -speed external \nclock  source . \nTable 28. LEXT external source  characteristics  \nSymbol  Parameter  Conditions  Min Typ Max Unit \nfLEXT _ext User External clock source frequency(1) \n- - 32.768  1000  kHz \nVLEXT H LEXT_IN  input pin high level voltage  0.7V DD - VDD \nV \nVLEXT L LEXT_IN  input pin low level voltage  VSS - 0.3V DD \ntw(LEXT ) \ntw(LEXT ) LEXT_IN  high or low time(1) 450 - - \nns \ntr(LEXT ) \ntf(LEXT ) LEXT_IN  rise or fall time(1) - - 50 \nCin(LEXT ) LEXT_IN  input capacitance(1) - - 5 - pF \nDuCy (LEXT ) Duty cycle  - 30 - 70 % \nIL LEXT_IN  input leakage current  VSS ≤ VIN ≤ VDD - - ±1 μA \n(1)  Guaranteed by design, not tested in production.  \nFigure 13. LEXT external source  AC timing diagram  \n90%\n10%VLEXTLVLEXTH\ntr(LEXT) tf(LEXT) tW(LEXT) tW(LEXT)t\nExternal\nclock sourceILLEXT_INfLEXT_extTLEXT\n \n \nAT32F 407 Series Data sheet  \n2022. 11.24 52 Ver 2.03 \n5.3.7  Internal clock source characteristics  \nHigh -speed internal  clock  (HICK ) \nTable 29. HICK  clock characteristics \nSymbol  Parameter  Conditions  Min Typ Max Unit \nfHICK Frequency  - - 48 - MHz \nDuCy (HICK ) Duty cycle  - 45 - 55 % \nACC HICK Accuracy of the HICK  \noscillator  User -trimmed with the \nRCC_CTRL register  - - 1(1) \n% \nACC -trimmed  - - 0.25(1) \nFactory -\ncalibrated(2) TA = -40 ~ 10 5 °C -2.5  2 \n% TA = -40 ~ 85 °C  -2.5 - 2 \nTA = 0 ~ 70 °C  -1.5 - 1.5 \nTA = 25 °C  -1 - 1 \ntSU(HICK )(2) HICK  oscillator startup \ntime - - - 10 μs \nIDD(HICK )(2) HICK  oscillator power \nconsumpt ion - - 240 290 μA \n(1)  Guaranteed by design, not tested in production.  \n(2)  Guaranteed by characterization results, not tested in production.  \nFigure 14. HICK  clock  frequency accuracy vs . temperature  \n \nLow-speed internal  clock  (LICK ) \nTable 30. LICK  clock  characteristics \nSymbol  Parameter  Conditions  Min Typ Max Unit \nfLICK(1) Frequency  - 30 40 60 kHz \n(1)  Guaranteed by characterization results, not tested in production.  \n\nAT32F 407 Series Data sheet  \n2022. 11.24 53 Ver 2.03 \n5.3.8  PLL characteristics  \nTable 31. PLL character istics  \nSymbol  Parameter  Min Typ Max(1) Unit \nfPLL_IN  PLL input clock (2) 2 8 16 MHz \nPLL input clock duty cycle  40 - 60 % \nfPLL_OUT  PLL multiplier output clock  16 - 240 MHz \ntLOCK PLL lock time  - - 200 μs \nJitter  Cycle -to-cycle jitter  - - 300 ps \n(1)  Guarante ed by characterization results, not tested in production.  \n(2)  Take care of using the appropriate multiplier factors so as to have PLL input clock values compatible with the \nrange defined by f PLL_OUT . \n \n5.3.9  Wakeup time from low -power mode  \nThe wakeup times given in the table below  is measured on a wakeup phase with the HICK . The \nclock source used to wake up the device depends from the current operating mode:  \n\uf06c Sleep mode: the clock source is the clock that was set before entering Sleep mode . \n\uf06c Deepsleep  or Standby mode: t he clock source is the HICK . \nTable 32. Low-power mode wakeup tim e \nSymbol  Parameter  \nConditions  Typ Unit \ntWUSLEEP(1) Wakeup from Sleep mode  3.3 μs \ntWUDEEPSLEEP(1) Wakeup from Deepsleep  mode  (regulator in normal  mode)  280 \nμs \nWakeup fro m Deepsleep  mode  (regulator in low -power mode)  320 \ntWUSTDBY(1) Wakeup from Standby mode  8 ms \n(1)  The wakeup times are measured from the wakeup event to the point in which the user application code reads \nthe first instruction.  \nAT32F 407 Series Data sheet  \n2022. 11.24 54 Ver 2.03 \n5.3.10  EMC characteristics  \nSusceptibil ity tests are performed on a sample basis during device characterization.  \nFunctional EMS (electromagnetic susceptibility ) \n\uf06c EFT: A Burst of Fast Transient voltage (positive and negative) is applied to V DD and V SS \nthrough a coupling/decoupling network , until a functional disturbance occurs. This test is \ncompliant with the IEC 61000 -4-4 standard.  \nTable 33. EMS characteristics  \nSymb\nol Parameter  Conditions  Level /Class  \nVEFT Fast transient voltage burst limits to be \napplied through coupling/deco upling \nnetwork  conforms to IEC 61000 -4-4 on \nVDD and V SS pins to induce a functional \ndisturbance, V DD and V SS input has one \n47 μF capacitor and each  VDD and V SS pin \npair 0.1  μF VDD = 3.3 V , LQFP 100, TA = +25 °C , fHCLK \n= 240 MHz , conforms to IEC 61000 -4-4 \n4A (4kV)  \nVDD = 3.3 V , LQFP 100, TA = +25 °C , fHCLK \n= 72 MHz, conforms to IEC 61000 -4-4 \n \nEMC characterization and optimization are performed at component level with a typical application \nenvironment . It should be noted that good EMC performance is highly dependent on the user \napplication and the software in particular.  Therefore it is recommended that the user applies EMC \nsoftware optimization and prequalification tests in relation with the EMC level requested for his \napplication.  \nAT32F 407 Series Data sheet  \n2022. 11.24 55 Ver 2.03 \n5.3.11  GPIO  port characteristics  \nGeneral input  / output characteristics  \nAll GPIO s are CMOS and TTL compliant.  \nTable 34. GPIO  static characteristics  \nSymb\nol Parameter  Conditions  Min Typ Max Unit \nVIL GPIO  input low level voltage  - –0.3 - 0.28 * V DD \n+ 0.1  V \nVIH TC GPIO  input high level voltage  - \n0.31 * V DD  \n+ 0.8  - VDD + 0.3  \nV FTa GPIO  input high level voltage  Analog mode  \nFT GPIO input high level voltage  - \n- 5.5 \nFTa GPIO  input high level voltage  Input floating, input pull -\nup, or input pull -down \nmode  \nVhys TC GPIO  Schmitt trigger voltage \nhysteresis(1) \n- 200 - - mV \nFT and FTa GPIO  Schmitt trigger  \nvoltage hysteresis(1) 5% V DD - - - \nIlkg Input leakage current(2) VSS ≤ VIN ≤ VDD \nTC GPIO s - - ±1 \nμA VSS ≤ VIN ≤ 5.5V \nFT and FTa GPIO  - - ±1 \nRPU Weak pull -up equivalent resistor  VIN = V SS 60 70 100 kΩ \nRPD Weak pull -down equivalent \nresistor(3) VIN = V DD 60 70 100 kΩ \nCIO GPIO  pin capacitance  - - 9 - pF \n(1)  Hysteresis volt age between Schmitt trigger switching levels. Guaranteed by characterization results.  \n(2)  Leakage could be higher than max if negative current is injected on adjacent pins.  \n(3)  The pull -down resistor of BOOT0 exists permanently.  \n \nAll GPIO s are CMOS and TTL complia nt (no software configuration required). Their characteristics \ncover more than the strict CMOS -technology or TTL parameters.  \nOutput driving current  \nIn the user application, the number of GPIO  pins which can drive current must be controlle d to \nrespect the a bsolute maximum rating defined  in Section 5.2.1 : \n\uf06c The sum of the currents sourced by all GPIO s on V DD, plus the maximum Run consumption of \nthe MCU sourced on V DD, cannot exceed the absolute maximum rating I VDD (see Table  9). \n\uf06c The sum of the currents sunk by all GPIO s on V SS, plus the maximum Run consumption of the \nMCU sunk on V SS, cannot exceed the absolute maximum rating I VSS (see Table  9). \nAT32F 407 Series Data sheet  \n2022. 11.24 56 Ver 2.03 \nOutput voltage levels  \nAll GPIO s are CMOS and TTL compliant.  \nTable 35. Output voltage characteristics  \nSymbol  Parameter  Conditions  Min Max Unit \nMaximum sourcing/sinking stre ngth \nVOL Output low level voltage  \nCMOS standard , IIO = 15 mA  - 0.4 \nV \nVOH Output high level voltage  VDD-0.4 - \nVOL Output low level voltage  \nTTL standard, I IO = 6 mA  - 0.4 \nV \nVOH Output high level voltage  2.4 - \nLarge sourcing/sinking strength  \nVOL Output low level voltage  \nCMOS standard, I IO = 6 mA  - 0.4 \nV \nVOH Output hi gh level voltage  VDD-0.4 - \nVOL Output low level voltage  \nTTL standard, I IO = 3 mA  - 0.4 \nV \nVOH Output high level voltage  2.4 - \nVOL(1) Output low level voltage  \nIIO = 20 mA  - 1.3 \nV \nVOH(1) Output high level voltage  VDD-1.3 - \nNormal sourcing/sinking strength  \nVOL Output low level voltage  \nCMOS standard, I IO = 4 mA  - 0.4 \nV \nVOH Output high level voltage  VDD-0.4 - \nVOL Output low level voltage  \nTTL standard, I IO = 2 mA  - 0.4 \nV \nVOH Output high level voltage  2.4 - \nVOL(1) Output low level voltage  \nIIO = 10 mA  - 1.3 \nV \nVOH(1) Output high level voltage  VDD-1.3 - \n(1)  Guaranteed by characterization results.  \n \nInput AC characteristics  \nThe definition and values of input AC characteristics are given as follows.  \nTable 36. Input  AC characteristics  \nSymbol  Parameter  Min Max Unit \ntEXINT pw Pulse width of external  signals detected by EXINT controller  10 - ns \n \nAT32F 407 Series Data sheet  \n2022. 11.24 57 Ver 2.03 \n5.3.12  NRST pin characteristics  \nThe NRST pin input driver uses CMOS technology. It is connected to a per manent pull -up resistor, \nRPU (see the table below).  \nTable 37. NRST pin characteristics  \nSymbol  Parameter  Conditions  Min Typ Max Unit \nVIL(NRST)(1) NRST  input low level voltage  - -0.5 - 0.8 \nV \nVIH(NRST)(1) NRST  input high level voltage  - 2 - VDD + 0.3  \nVhys(NRST)  NRST  Schmitt trigger voltage  \nhysteresis  - - 500 - mV \nRPU Weak pull -up equivalent resistor  VIN = V SS 30 40 50 kΩ \nVF(NRST)(1) NRST  input filtered pu LEXT  - - - 33.3 μs \nVNF(NRST)(1) NRST  input not filtered pu LEXT  - 66.7 - - μs \n(1)  Guaranteed by design.  \nFigure 15. Recommended NRST pin protection  \n0.1 µF\nVDD\nRPUInternal Reset NRST(2)External\nreset circuit(1)\nFilter\n \n(1)  The reset network protects the device against parasitic resets.  \n(2)  The user must ensure that the level on the NRST pin can go below the V IL (NRST) max level specified in Table \n37. Otherwise the reset will not be taken into account by the device.  \n \n5.3.13  XMC  characteristics  \nAsynchronous waveforms and timings  of PSRAM  / NOR  \nThe results shown in these tables are obtain ed with the following XMC configuration:  \n\uf06c AddressSetupTime = 0  \n\uf06c Address HoldTime = 1  \n\uf06c DataSet upTime = 1  \nAT32F 407 Series Data sheet  \n2022. 11.24 58 Ver 2.03 \nTable 38. Asynchronous multiplexed PSRAM  / NOR read timings \nSymbol  Parameter  Min Max Unit \ntw(NE) XMC _NE low time  7tHCLK - 2 7tHCLK + 2 ns \ntv(NOE_NE)  XMC _NE low to XMC _NOE low  3tHCLK - 0.5 3tHCLK + 1.5  ns \ntw(NOE) XMC _NOE low time  4tHCLK - 1 4tHCLK + 2 ns \nth(NE_NOE)  XMC _NOE high to XMC _NE high hold time  -1 - ns \ntv(A_NE)  XMC _NE low to XMC _A valid  - 0 ns \ntv(NADV_NE)  XMC _NE low to XMC _NADV low  3 5 ns \ntw(NADV)  XMC _NADV low time  tHCLK - 1.5 tHCLK + 1.5  ns \nth(AD_NADV)  XMC _AD (address) valid hol d time after XMC _NADV \nhigh tHCLK + 3 - ns \nth(A_NOE)  Address hold time after XMC _NOE high  tHCLK + 3 - ns \nth(UBLB _NOE) XMC _UB/LB  hold time after XMC _NOE high  0 - ns \ntv(UBLB _NE) XMC _NE low to XMC _UB/LB  valid - 0 ns \ntsu(Data_NE) Data to XMC _NE high setup t ime 2tHCLK + 24 - ns \ntsu(Dat a_NOE) Data to XMC _NOE high setup time  2tHCLK + 25 - ns \nth(Data_NE) Data hold time after XMC _NE high  0 - ns \nth(Dat a_NOE) Data hold time after XMC _NOE high  0 - ns \nFigure 16. Asynchronous multiplexed PSRAM  / NOR read waveforms  \ntw(NE)\ntw(NADV)th(A_NOE) tv(A_NE)\nDataXMC_NE\nXMC_NOE\nXMC_NWE\nXMC_A[25:16]\nXMC_UB/LB\nXMC_AD[15:0]\nXMC_NADVtv(UBLB_NE)\nUB/LBAddress\nth(UBLB_NOE)\ntv(A_NE)tv(NOE_NE)\ntw(NOE)th(NE_NOE)\nAddress\ntv(NADV_NE) th(AD_NADV)tsu(Data_NE)\ntsu(Data_NOE)th(Data_NE)\nth(Data_NOE)\n \nAT32F 407 Series Data sheet  \n2022. 11.24 59 Ver 2.03 \nTable 39. Asynchronous multiplexed PSRAM  / NOR write timings \nSymbol  Parameter  Min Max Unit \ntw(NE) XMC _NE low time  5tHCLK - 1 5tHCLK + 2 ns \ntv(NWE_NE)  XMC _NE low to XMC _NWE low  2tHCLK 2tHCLK + 1 ns \ntw(NWE)  XMC _NWE low time  2tHCLK - 1 2tHCLK + 2 ns \nth(NE_NWE)  XMC _NWE high to XMC _NE high hold time  tHCLK - 1 - ns \ntv(A_NE)  XMC _NE low to XMC _A valid  - 7 ns \ntv(NADV_NE)  XMC _NE low to XMC _NADV low  3 5 ns \ntw(NADV)  XMC _NADV low time  tHCLK - 1 tHCLK + 1 ns \nth(AD_NADV)  XMC _AD (address) valid hold time after XMC _NADV \nhigh tHCLK - 3 - ns \nth(A_NWE)  Address hold time after XMC _NWE high  4tHCLK + 2.5  - ns \nth(UBLB _NWE)  XMC _UB/LB  hold time after XMC_NWE high  tHCLK - 1.5 - ns \ntv(UBLB _NE) XMC _NE low to XMC _UB/LB  valid - 1.6 ns \ntv(Data_NADV)  XMC _NADV high to Data valid  - tHCLK + 1.5  ns \nth(Data_NWE)  Data hold time after XMC _NWE high  tHCLK - 5 - ns \nFigure 17. Asynchronous multiplexed PSRAM  / NOR write waveforms  \ntw(NE)\ntw(NADV)th(A_NWE) tv(A_NE)\nDataXMC_NE\nXMC_NOE\nXMC_NWE\nXMC_A[25:16]\nXMC_UB_LB\nXMC_AD[15:0]\nXMC_NADVtv(UBLB_NE)\nUBLBAddress\nth(UBLB_NWE)\ntv(A_NE)tw(NWE)\nAddress\ntv(NADV_NE) th(AD_NADV)th(Data_NWE)tv(NWE_NE)\ntv(Data_NADV)th(NE_NWE)\n \nAT32F 407 Series Data sheet  \n2022. 11.24 60 Ver 2.03 \nSynchronous waveforms and timings  of PSRAM  / NOR  \nThe results shown in these tables are obtained with the following XMC  configuration:  \n\uf06c Burst AccessMode = XMC_B urstAccessMo de_En able; \n\uf06c Mem oryType = XMC_M emoryTyp e_CRAM ; \n\uf06c WriteB urst = XMC _WriteBurst_ Enable; \n\uf06c CLKPrescale = 1; (1 memory cycle= 2 HCLK cycles) ( Note: CLKPrescale  refers to the  CLKPSC bit \nin XMC_B K1TMG x register. Refer to the AT32F 407 reference manual. ) \n\uf06c DataLaten cy = 1 for NOR Flash; DataLat ency = 0  for PSRAM (Note: DataLat ency refers to the  \nDATLAT bit in XMC_B K1TMG x register. Refer to the AT32F 407 reference manual. ) \nAT32F 407 Series Data sheet  \n2022. 11.24 61 Ver 2.03 \nTable 40. Synchronous multiplexed PSRAM  / NOR  read timings \nSymbol  Parameter  Min Max Unit \ntw(CLK) XMC _CLK period  20 - ns \ntd(CLKL -NEL) XMC _CLK low to XMC _NE low  - 1.5 ns \ntd(CLKH -NEH) XMC _CLK low to XMC _NE high  tHCLK + 2 - ns \ntd(CLKL -NAD VL) XMC _CLK low to XMC _NADV low  - 4 ns \ntd(CLKL -NADVH)  XMC _CLK low to XMC _NADV high  5 - ns \ntd(CLKL -AV) XMC _CLK low to XMC _A valid  - 0 ns \ntd(CLKH -AIV) XMC _CLK low to XMC _A invalid  tHCLK + 2 - ns \ntd(CLKL -NOEL) XMC _CLK high  to XMC _NOE low   tHCLK + 1 ns \ntd(CLKH -NOEH)  XMC _CLK low to XMC _NOE high  tHCLK + 0.5 - ns \ntd(CLKL -ADV) XMC _CLK low to XMC _AD valid  - 12 ns \ntd(CLKL -ADIV) XMC _CLK low to XMC _AD invalid  0 - ns \ntsu(ADV -CLKH) XMC _AD valid data before XMC _CLK high  6 - ns \nth(CLKH -ADV) XMC _AD valid data after XMC _CLK high  tHCLK - 10 - ns \ntsu(NWAITV-CLKH) XMC _NWAIT valid before XMC _CLK high  8 - ns \nth(CLKH -NWAITV) XMC _NWAIT valid after XMC _CLK high  6 - ns \nFigure 18. Synchronous multiplexed PSRAM  / NOR  read timings  \nXMC_CLK\nXMC_NE\nXMC_NADV\nXMC_A[25:16]\nXMC_NOE\nXMC_AD[15:0]\nXMC_NWAIT\n(WAITCFG = 1, WAITPOL = 0)\n(WAITCFG = 0, WAITPOL = 0)XMC_NWAITtw(CLK)\nData latency = 0BUSTURN = 0\ntd(CLKL-NEL)\ntd(CLKL-NADVL) td(CLKL-NADVH)\ntd(CLKL-AIV) td(CLKL-AV)\ntd(CLKH-NOEL) td(CLKL-NOEH)\ntd(CLKL-ADV)\nAddress[15:0]td(CLKL-ADIV)\ntsu(ADV-CLKH)\nD1 D2th(CLKH-ADV)\ntsu(ADV-CLKH) th(CLKH-ADV)\ntsu(NWAITV-CLKH)\nth(CLKH-NWAITV) tsu(NWAITV-CLKH)\ntsu(NWAITV-CLKH)th(CLKH-NWAITV)\nth(CLKH-NWAITV)td(CLKL-NEH)tw(CLK)\nD3\n \nAT32F 407 Series Data sheet  \n2022. 11.24 62 Ver 2.03 \nTable 41. Synchronous multiplexed PSRAM write timings \nSymbol  Parameter  Min Max Unit \ntw(CLK)  XMC _CLK period  20 - ns \ntd(CLKL -NEL) XMC _CLK low to XMC _NE low - 2 ns \ntd(CLKH -NEH) XMC _CLK low to XMC _NE high tHCLK + 2 - ns \ntd(CLKL -NADVL)  XMC _CLK low to XMC _NADV low  - 4 ns \ntd(CLKL -NADVH)  XMC _CLK low  to XMC _NADV high  5 - ns \ntd(CLKL -AV) XMC _CLK low to XMC _A valid  - 0 ns \ntd(CLKH -AIV) XMC _CLK low to XMC _A invalid  tHCLK + 2 - ns \ntd(CLKL -NWEL)  XMC _CLK low to XMC _NWE low  - 1 ns \ntd(CLKH -NWEH)  XMC _CLK low to XMC _NWE high  tHCLK + 1 - ns \ntd(CLKL -ADV) XMC _CLK low to XMC _AD valid  - 12 ns \ntd(CLKL -ADIV) XMC _CLK low to XMC _AD invalid  3 - ns \ntd(CLKL -Data) XMC _AD valid aft er XMC _CLK low  - 6 ns \ntd(CLKL -UBLBH ) XMC_CLK low to XMC _UB/LB  high tHCLK + 1 - ns \ntsu(NWAITV -CLKH) XMC_NWAIT valid before XMC_CLK high  7 - ns \nth(CLKH -NWAITV)  XMC_NWAIT valid after XMC_CLK high  2 - ns \nFigure 19. Synchronous multiplex ed PSRAM write timings  \nXMC_CLK\nXMC_NE\nXMC_NADV\nXMC_A[25:16]\nXMC_NWE\nXMC_AD[15:0]\nXMC_NWAIT\n(WAITCFG = 0, WAITPOL = 0)tw(CLK)\nData latency = 0BUSTURN = 0\ntd(CLKL-NEL)\ntd(CLKL-NADVL) td(CLKL-NADVH)\ntd(CLKL-AIV) td(CLKL-AV)\ntd(CLKL-NWEL) td(CLKL-NWEH)\ntd(CLKL-ADV)\nAddress[15:0]td(CLKL-ADIV)\ntd(CLKL-Data)\nD1 D2\ntsu(NWAITV-CLKH) th(CLKH-NWAITV)td(CLKL-NEH)\nXMC_UB/LBtd(CLKL-UBLBH)tw(CLK)\ntd(CLKL-Data)\n \nAT32F 407 Series Data sheet  \n2022. 11.24 63 Ver 2.03 \nNAND controller waveforms and timings  \nhe results shown in this table are obtained with the following XMC  configuration:  \n\uf06c COM.XMC_SetupTime = 0x01 ; (Note: STP in XMC_BKxTMGMEM)  \n\uf06c COM.XMC_WaitSetupTime = 0x03 ; (Note: OP in XMC_BKxTMGMEM)  \n\uf06c COM.XMC_HoldSetupTime = 0x02 ; (Note: HLD in XMC_BKxTMGMEM)  \n\uf06c COM.XMC_HiZSetupTime = 0x01 ; (Note: WRSTP in XMC_BKxTMGMEM)  \n\uf06c ATT.XMC_SetupTime = 0x01 ; (Note: STP in XMC_BKxTMGATT)  \n\uf06c ATT.XMC_WaitSetupTime = 0x03 ; (Note: OP in XMC_BKxTM GATT)  \n\uf06c ATT.XMC_HoldSetupTime = 0x02 ; (Note: HLD in XMC_BKxTMGATT)  \n\uf06c ATT.XMC_HiZSetupTime = 0x01 ; (Note: WRSTP in XMC_BKxTMGATT)  \n\uf06c Bank = XMC_Bank_NAND ; \n\uf06c MemoryDataWidth = XMC_MemoryDataWidth_16b ; (Note: Memory data width  = 16 bits) \n\uf06c ECC = XMC_ECC_Enable ; (Note: e nable ECC calculation ) \n\uf06c ECCPageSize = XMC_ECCPageSize_512Bytes ; (Note: ECC page size  = 512  Bytes ) \n\uf06c DLYCRSetupTime = 0 ; (Note: DLYCR in XMC_BKxCTRL)  \n\uf06c DLYARSetupTime = 0 ; (Note: DLYAR in XMC_BKxCTRL)  \nTable 42. NAND Flash read and write timings \nSymbol  Parameter  Min Max Unit \ntw(NOE)  XMC_NWE low width  4THCLK - 1.5 4THCLK + 1.5 ns \ntsu(D -NOE) XMC_D valid data before XMC_NOE high  25 - ns \nth(NOE -D) XMC_D valid data after XMC_NOE high  14 - ns \ntd(ALE -NOE) XMC_ALE valid before XMC_NOE low  - 3THCLK + 2 ns \nth(NO E-ALE) XMC _NOE high to XMC_ALE invalid  3THCLK + 4.5 - ns \ntw(NWE)  XMC_NWE low width  4THCLK - 1 4THCLK + 2.5 ns \ntv(NWE -D) XMC_NWE low to XMC_D valid  - 0 ns \nth(NWE -D) XMC_NWE high to XMC_D invalid  10THCLK + 4 - ns \ntd(D-NWE) XMC_D valid before XMC_NWE high  6THCLK + 12 - ns \ntd(ALE -NWE) XMC_ALE valid before XMC_NWE low  - 3THCLK + 1.5 ns \nth(NW E-ALE) XMC_NWE high to XMC_ALE invalid  3THCLK + 4.5 - ns \nAT32F 407 Series Data sheet  \n2022. 11.24 64 Ver 2.03 \nFigure 20. NAND controller read waveforms  \nth(NOE -ALE)Low \nXMC _D[15:0]XMC _NOE (NRE )XMC _NWEXMC _NCEx\nALE(XMC _A17)\nCLE(XMC _A16)\ntsu(D-NOE ) th(NOE -D)d(ALE-NOE )t\n \nFigure 21. NAND controller write waveforms  \ntv(NWE -D)th(NWE -D)th(NWE -ALE)td(ALE-NWE )\nXMC _D[15:0]XMC _NOEXMC _NWEALE(XMC _A17\nCLE(XMC _A16Low XMC _NCEx\n \nFigure 22. NAND controller common memory read waveforms  \nth(NOE -ALE)Low \nXMC _D[15:0]XMC _NOEXMC _NWEXMC _NCEx\nALE(XMC _A17\nCLE(XMC _A16\ntsu(D-NOE ) th(NOE -D)tw(NOE )d(ALE-NOE )t\n \nAT32F 407 Series Data sheet  \n2022. 11.24 65 Ver 2.03 \nFigure 23. NAND controller for common memory write waveforms  \ntv(NWE -D)th(NWE -D)td(D-NWE )tw(NWE ) th(NOE -ALE)td(ALE-NOE )Low \nXMC _D[15:0]XMC _NOEXMC _NWEXMC _NCEx\nALE(XMC _A17\nCLE(XMC _A16\n \n5.3.14  TMR  timer characteristics  \nThe parameters given in the table below  are guaranteed by design.  \nTable 43. TMR characteristics  \nSymbol  Parameter  Conditions  Min Max Unit \ntres(TMR)  Timer resolution time  - 1 - tTMRxCLK  \nfTMRxCLK  = 240 MHz  4.17 - ns \nfEXT Timer external clock frequency on \nCH1 to CH4  - 0 fTMRxCLK /2 MHz \n50 MHz \n \nAT32F 407 Series Data sheet  \n2022. 11.24 66 Ver 2.03 \n5.3.15  SPI / I2S characteristics  \nThe parameters  are listed in Table 44 for SPI and in Table 45 for I2S. \nTable 44. SPI characteristics  \nSymbol  Parameter  Conditions  Min Max Unit \nfSCK \n(1/tc(SCK) )(1) SPI clock frequency(2)(3) VDD = 3.3 V, T A = 25 °C - 50 \nMHz VDD = 3.3 V, T A = 105 °C - 36 \nVDD = 2.6 V, T A = 105 °C - 30 \ntr(SCK)  \ntf(SCK) SPI clo ck rise and fall time  Capacitive load: C = 30 pF  - 8 ns \ntsu(CS)(1) CS setup time  Slave mode  4tPCLK - ns \nth(CS)(1) CS hold time  Slave mode  2tPCLK - ns \ntw(SCKH)(1) \ntw(SCKL)(1) SCK high and low time  Master mode, fPCLK = 100 MHz , \nprescaler  = 4 15 25 ns \ntsu(MI)(1) \nData input setup time  Master mode  5 - \nns \ntsu(SI)(1) Slave mode  5 - \nth(MI)(1) \nData input setup time  Master mode  5 - \nns \nth(SI)(1) Slave mode  4 - \nta(SO)(1)(4 ) Data output access time  Slave mode, f PCLK = 20 MHz  0 3tPCLK ns \ntdis(SO)(1)(5 ) Data output disable time  Slave mode  2 10 ns \ntv(SO)(1) Data output valid time  Slave mode (after enable edge)  - 25 ns \ntv(MO)(1) Data output valid time  Master mode (after enable edge)  - 5 ns \nth(SO)(1) \nData output hold time  Slave mode (after enable edge)  15 - \nns \nth(MO)(1) Master mode (after enable edge)  2 - \n(1)  Guaranteed by characterization results, not tested in production.  \n(2)  The maximum SPI clock frequency should not exceed fPCLK/2. \n(3)  The maximum SPI clock frequency  is highly related with devices and the PCB layou t. For more details about the \ncomplete solution, please contact your local Artery  sales representative . \n(4)  Min time is for the minimum time to drive the output and the max time is for the maximum time to validate the \ndata.  \n(5)  Min time is for the minimum time to invalidate the output and the max time is for the maximum time to put the \ndata in Hi -Z. \nAT32F 407 Series Data sheet  \n2022. 11.24 67 Ver 2.03 \nFigure 24. SPI timing diagram - slave mode and CP HA = 0  \nMSB in LSB inLSB out MSB out \nth(SI) tsu(SI)ta(SO) tdis(SO)th(SO) tv(SO)tsu(CS)tc(SCK)\ntw(SCKH)\ntw(SCKL)CPHA=0\nCPOL=1CPHA=0\nCPOL=0SCK input\nMISO output\nMOSI inputCS input\nth(CS)\n \nFigure 25. SPI timing diagram - slave mode  and CPHA = 1  \nMSB in LSB inMSB out LSB out\ntsu(SI) th(SI)ta(SO)tv(SO)th(SO)tdis(SO)tc(SCK) th(CS) tsu(CS)CS input\nMOSI inputMISO outputCPHA=1\nCPOL=1CPHA=1\nCPOL=0SCK input\ntw(SCKH)tw(SCKL)\n \nFigure 26. SPI timing diagram - master mode  \nMSB out LSB outMSB in LSB in\ntv(MO) th(MO)tw(SCKH)\ntw(SCKL)tsu(MI)tc(SCK)\nth(MI)\nMOSI outputMISO inputCPHA=1\nCPOL=1CPHA=1\nCPOL=0SCK outputCPHA=0\nCPOL=0\nCPHA=0\nCPOL=1SCK outputHigh \nCS input\n \n \nAT32F 407 Series Data sheet  \n2022. 11.24 68 Ver 2.03 \nTable 45. I2S characteristics  \nSymbol  Parameter  Conditions  Min Max Unit \nfCK \n1/tc(CK) I2S clock fr equency  Master mode (data: 16 bits,  \naudio frequency = 48 kHz)  1.522  1.525  \nMHz \nSlave mode  0 6.5 \ntr(CK)  \ntf(CK) I2S clock rise and fall \ntime Capacitive load: C = 50 pF  - 8 \nns tv(WS)(1) WS valid time  Master mode  3 - \nth(WS)(1) WS hold time  Master mode  2 - \ntsu(WS)(1) WS setup time  Slave mode  4 - \nth(WS)(1) WS hold time  Slave mode  0 - \ntw(CKH)(1) \nCK high and low time  Master f PCLK = 16 MHz,  \naudio frequency = 48 kHz  312.5  - \ntw(CKL)(1) 345 - \ntsu(SD_MR)(1) \nData input setup time  Master receiver  6.5 - \ntsu(SD_SR)(1) Slave receiver  1.5 - \nth(SD_MR)(1)(2) \nData input hold time  Master receiver  0 - \nth(SD_SR)(1)(2) Slave receiver  0.5 - \ntv(SD_ST)(1)(2) Data output valid time  Slave transmitter (after enable  edge)  - 18 \nth(SD_ST)(1) Data output hold t ime Slave transmitter (after enable  edge)  11 - \ntv(SD_MT)(1)(2) Data output valid time  Master transmitter (after enable  edge)  - 3 \nth(SD_MT)(1) Data output hold time  Master transmitter (after enable  edge)  0 - \n(1)  Guaranteed by design and/or characterizatio n results.  \n(2)  Depends on fPCLK. For example, if f PCLK=8 MHz, then T PCLK = 1/f PCLK =125 ns.  \nFigure 27. I2S slave timing diagram (Philips protocol)  \nLSB receive(2)MSB receive Bitn receive LSB receiveLSB transmit(2)MSB transmit Bitn transmit LSBtransmit\ntsu(SD_SR) th(SD_SR)tV(SD_ST)th(SD_ST)th(WS)tw(CKL)tw(CKH )tc(CK)\nSDreceiveSDtransmitWSinputCPOL =0\nCPOL =1CK Iutput\ntsu(WS)\n \n(1)  LSB transmit/receive of the previously transmitted byte. No LSB transmit/receive is sent before the first byte.  \nAT32F 407 Series Data sheet  \n2022. 11.24 69 Ver 2.03 \nFigure 28. I2S master timing diagram (Philips protocol)  \nLSB receive(2)MSB receive Bitn receive LSB receiveLSB transmit(2)MSB transmit Bitn transmit LSBtransmit\ntsu(SD_MR) th(SD_MR)tV(SD_MT)th(SD_MT)th(WS)tw(CKL)tw(CKH )tc(CK)\nSDreceiveSDtransmitWSoutputCPOL =0\nCPOL =1CK output\ntv(WS)\ntf(CK)tr(CK)\n \n(1)  LSB transmit/receive of the previously transmitted byte. No LSB transmit/receive is sent before the fir st byte.  \n \n5.3.16  I2C interface characteristics  \nGPIO  pins SDA and SCL have limitation as follows: they  are not ”true” open -drain. When \nconfigured as open -drain, the PMOS connected between the GPIO  pin and V DD is disabled, but is \nstill present.  \nI2C bus interface  can support standard  mode (max. 100 kHz ) and fast  mode (max. 4 00 kHz). The \nI2C bus frequency can be increased up to 1 MHz. For more complete information, please contact \nyour local Artery sales office for technical support.  \nAT32F 407 Series Data sheet  \n2022. 11.24 70 Ver 2.03 \n5.3.17  SDIO characteristics  \nFigure 29. SDIO high -speed mode  \ntISUtIHtOHtOVtCtW(CKL) tW(CKH )tftr\nCK\nD,CWD\n(output )\nD,CWD\n(input )\n \nFigure 30. SD default mode  \nCK\nD,CMD\n(output )tOVD tOVD\n \nTable 46. SD / MMC characteristics  \nSymbol  Parameter  Conditions  Min Max Unit \nfPP Clock freque ncy in data transfer mode  - 0 48 MHz \ntW(CKL)  Clock low time, f PP = 16 MHz  - 32 - \nns tW(CKH)  Clock high time, f PP = 16 MHz  - 30 - \ntr Clock rise time  - - 4 \ntf Clock fall time  - - 5 \nCMD , D inputs (referenced to CK)  \ntISU Input setup time  - 2 - \nns \ntIH Input hold time  - 0 - \nCMD, D outputs (referenced to CK) in MMC and SD HS mode  \ntOV Output valid time  - - 6 \nns \ntOH Output hold time  - 0 - \nCMD, D outputs (referenced to CK) in SD default mode(1) \ntOVD Output valid default time  - - 7 \nns \ntOHD  Output hol d default time  - 0.5 - \n(1)  Refer to SDIO_CLKC TRL, the SDIO clock control register to control the CK output.  \n \nAT32F 407 Series Data sheet  \n2022. 11.24 71 Ver 2.03 \n5.3.18  USBFS  characteristics  \nTable 47. USBFS  startup time  \nSymbol  Parameter  Max Unit \ntSTARTUP(1) USBFS  transceiver startup time  1 μs \n(1)  Guaranteed by design, not tested in production.  \nTable 48. USBFS  DC electrical characteristics  \nSymbol  Parameter  Conditions  Min(1) Typ Max(1) Unit \nInput \nlevels  VDD USBFS  operating voltage  - 3.0(2)  3.6 V \nVDI(3) Differential input sensiti vity I (USBFS_D+ , USBFS_D -) 0.2  - \nV VCM(3) Differential common mode \nrange  Includes VDI range  0.8  2.5 \nVSE(3) Single ended receiver \nthreshold  - 1.3  2.0 \nOutput \nlevels  VOL Static output level low  RL of 1.24 kΩ to 3.6 V(4) -  0.3 \nV \nVOH Static output  level high  RL of 15 kΩ to VSS(4) 2.8  3.6 \nRPU USBFS_D+  internal pull -\nup VIN = VSS 0.97 1.24 1.58 kΩ \n(1)  All the voltages are measured from the local ground potential.  \n(2)  The AT32F 407 USB functionality is ensured down to 2. 7 V but not the full USB electrical c haracteristics which \nare degraded in the 2. 7 to 3.0 V V DD voltage range.  \n(3)  Guaranteed by characterization results, not tested in production.  \n(4)  RL is the load connected on the USB drivers.  \nFigure 31. USBFS  timings: definition of data signal  rise and fall time  \nCrossover\npoints\nVCRS\nVSSDiffierential\ndata lines\ntftr\n \nTable 49. USBFS  electrical characteristics  \nSymbol  Parameter  Conditions  Min(1) Max(1) Unit \ntr Rise time (2) CL ≤ 50 pF 4 20 ns \ntf Fall Time (2) CL ≤ 50 pF 4 20 ns \ntrfm Rise/ fall time m atching  tr/tf 90 110 % \nVCRS Output signal crossover voltage  - 1.3 2.0 V \n(1)  Guaranteed by design, not tested in production.  \n(2)  Measured from 10% to 90% of the data signal. For more detailed information , please refer to USB Specification \n- Chapter 7 (version 2.0 ). \nAT32F 407 Series Data sheet  \n2022. 11.24 72 Ver 2.03 \n5.3.19  EMAC  characteristics  \nOperating voltage  \nTable  50. EMAC  DC electrical characteristics  \nSymbol  Parameter  Min(1) Max(1) Unit \nVDD Ethernet operating voltage  3.0 3.6 V \n(1)  All the voltages are measured from the local ground potential.  \n \nSMI (s tation management interface)  \nTable 51. Dynamic characteristics: EMAC signals for SMI  \nSymbol  Parameter  Min Typ Max Unit \ntMDC MDC cycle time (1.96  MHz, fAHB = 200 MHz)  509 510 511 \nns td(MDIO) MDIO write data valid time  13.5 14.5 15.5 \ntsu(MDIO) Read data setup time  35 - - \nth(MDIO) Read data hold time  0 - - \nFigure  32. EMAC  SMI timing diagram  \n \n \nRMII  \nTable  52. Dynamic characteristics: EMAC signals for RMII  \nSymbol  Parameter  Min Typ Max Unit \ntsu(RXD ) Receive data setup time  4 - - \nns tih(RXD ) Receive data hold time  2 - - \ntsu(DV) Carrier sense set -up time  4 - - \ntih(DV) Carrier sense hold time  2 - - \ntd(TXEN ) Transmit enable valid delay time  8 10 16 \ntd(TXD) Transmit data valid delay time  7 10 16 \ntMDC\ntd(MDIO)\ntsu(MDIO) th(MDIO)EMAC_MDC\nEMAC_MDIO(O)\nEMAC_MDIO(I) \nAT32F 407 Series Data sheet  \n2022. 11.24 73 Ver 2.03 \nFigure  33. EMAC  RMII timing diagram  \n \n \nMII \nTable  53. Dynamic characteristics: EMAC signals for MII  \nSymbol  Parameter  Min Typ Max Unit \ntsu(RXD ) Receive data setup time  10 - - \nns tih(RXD ) Receive data hold time  10 - - \ntsu(DV) Data valid setup time  10 - - \ntih(DV) Data valid hold time  10 - - \ntsu(ER) Error setup time  10 - - \ntih(ER) Error hold time  10 - - \ntd(TXEN ) Transmit enable valid delay time  14 16 18 \ntd(TXD) Transmit data valid delay time  13 16 20 \nFigure  34. EMAC  MII timing diagram  \n \ntd(TXEN )\ntd(TXD)\ntsu(RXD)\ntsu(CRS)tih(RXD)\ntih(CRS)RMII _REF_CLK\nRMII _TX_EN\nRMII _TXD[1:0]\nRMII _RXD [1:0]\nRMII _CRS _DV \ntd(TXEN )\ntd(TXD)tsu(RXD)\ntsu(ER)\ntsu(DV)tih(RXD)\ntih(ER)\ntih(DV)MII_RX_CLK\nMII_TX_EN\nMII_TXD[3:0]MII_RXD [3:0]\nMII_RX_DV\nMII_RX_ER\nMII_TX_CLK\n \nAT32F 407 Series Data sheet  \n2022. 11.24 74 Ver 2.03 \n5.3.20  12-bit ADC characteristics  \nUnless otherwise specified, the parameters given in the table below  are preliminary values derived \nfrom tests performed under ambient temperature, f PCLK2 frequency and V DDA supply voltage \nconditions summarized in Table 13. \nNote:  It is recommended to perform a calibration after each power -up. \nTable 54. ADC  characteristics  \nSymbol  Parameter  Conditions  Min Typ Max Unit \nVDDA Power supply  - 2.6 - 3.6 V \nVREF+ Positive reference voltage(3) - 2.0 - VDDA V \nIDDA Current on the V DDA input pin  - - 380(1) 445 μA \nIVREF Current on the V REF+ input pin(3) - - 200(1) 220 μA \nfADC ADC  clock frequency  - 0.6 - 28 MHz \nfS(2) Sampling  rate - 0.05 - 2 MHz \nfTRIG(2) External trigger frequency  fADC = 28 MHz  - - 1.65 MHz \n- - - 17 1/fADC \nVAIN Conversion voltage range(3) - 0 (V SSA or VREF-\ntied to ground) ) - VREF+ V \nRAIN(2) External input impedance  - See Table 55 and Table 56 for details  Ω \nCADC(2) Internal sample and hold \ncapacitor  - - 10 - pF \ntCAL(2) Calibration time  fADC = 28 MHz  6.61 μs \n- 185 1/fADC \ntlat(2) Injection trigger conversion \nlatency  fADC = 28 MHz  - - 107 ns \n- - - 3(4) 1/fADC \ntlatr(2) Regular trigger conversion \nlatency  fADC = 28 MHz  - - 71.4 ns \n- - - 2(4) 1/fADC \ntS(2) Sampling time  fADC = 28 MHz  0.053  - 8.55 μs \n- 1.5 - 239.5  1/fADC \ntSTAB(2) Power -up time  - 42 1/fADC \ntCONV(2) Total conversion time (including \nsampling time)  fADC = 28 MHz  0.5 - 9 μs \n- 14 to 252 (tS for sampling + 12.5  for \nsuccessive approximation ) 1/fADC \n(1)  Guaranteed by characterization results, not tested in production.  \n(2)  Guaranteed by design, not tested in prod uction.  \n(3)  VREF+ can be internally connected to VDDA and VREF- can be internally connected to VSSA, depending on the \npackage.  \n(4)  For external triggers, a delay of 1/fPCLK2 must be added to the latency specified in Table 54. \nAT32F 407 Series Data sheet  \n2022. 11.24 75 Ver 2.03 \nTable 55 and Table 56 are used to determine the maximum external impedance  allowed  for an error \nbelow 1/4 of LSB.  \nTable 55. RAIN max for f ADC = 14 M Hz \nTS (Cycle ) tS (μs) RAIN max (k Ω)(1) \n1.5 0.11 0.25 \n7.5 0.54 1.3 \n13.5 0.96 2.5 \n28.5 2.04 5.0 \n41.5 2.96 8.0 \n55.5 3.96 10.5 \n71.5 5.11 13.5 \n239.5  17.11  40 \n(1)  Guaranteed by design.  \n \nTable 56. RAIN max for f ADC = 28 MHz \nTS (Cycle ) tS (μs) RAIN max (k Ω)(1) \n1.5 0.05 0.1 \n7.5 0.27 0.6 \n13.5 0.48 1.2 \n28.5 1.02 2.5 \n41.5 1.48 4.0 \n55.5 1.98 5.2 \n71.5 2.55 7.0 \n239.5  8.55 20 \n(1)  Guaranteed by design.  \nAT32F 407 Series Data sheet  \n2022. 11.24 76 Ver 2.03 \nTable 57. ADC  accuracy(1) \nSymbol  Parameter  Test Conditions  Typ(2) Max(2) Unit \nET Total unadjusted error  fPCLK2  = 56 MHz,  \nfADC = 28 MHz , RAIN < 10 k Ω, \nVDDA = 3.0 to 3.6 V, T A = 25 °C  \nMeasurements made after ADC calibration  \nVREF+ = V DDA ±1.5 ±2.5 \nLSB EO Offset error  +0.5 ±1.5 \nEG Gain error  +1 +2/-0.5 \nED Differential linea rity error  ±0.6 ±0.9 \nEL Integral linearity error  ±0.8 ±1.5 \nET Total unadjusted error  \nfPCLK2  = 56 MHz,  \nfADC = 28 MHz , RAIN < 10 k Ω, \nVDDA = 2.6 to 3.6 V , TA = -40 ~ 10 5 °C \nMeasurements made after ADC calibration  ±2 ±4 \nLSB EO Offset error  +0.5 ±2 \nEG Gain error  +1 +2.5/-1.5 \nED Differential linearity error  ±0.6 ±1.2 \nEL Integral linearity error  ±1 ±2 \n(1)  ADC DC accuracy values are measured after internal calibration.  \n(2)  Guaranteed by characterization results, not tested in production.  \nFigure 35. ADC accuracy characteristics  \n1234567409340944095\n1 2 3   4      5      6 7 4093 4094 4095 4096（2）\n（3）\n（1）\n0\nVSSA VDDA[1LSB IDEAL =——VREF+\n4096(or—— depending on package )VDDA\n4096\nEO]\nETEG\nEL\n1LSB IDEALED\n \n(1)  Example of an actual transfer curve.  \n(2)  Ideal transfer curve.  \n(3)  End point correlation line.  \n(4)  ET = Maximum deviation between the actual and the ideal transfer curves.  \nEO = Deviation between the first actual tr ansition and the first ideal one.  \nEG = Deviation between the last ideal transition and the last actual one.  \nED = Maximum deviation between actual steps and the ideal one.  \nEL = Maximum deviation between any actual transition and the end point correlation li ne. \nAT32F 407 Series Data sheet  \n2022. 11.24 77 Ver 2.03 \nFigure 36. Typical connection diagram using the ADC  \n12-bit\ncoverterSample and hold ADC\ncoverter\nRADC\nCADC(1)VDD\nVT\n0.6V\nVT\n0.6VIL\nVAIN\nRAIN(1)ADCx _INx\nCparasitic\n \n(1)  Refer to Table 54 for the values of RAIN and CADC. \n(2)  Cparasiti c represents the capacitance of the PCB (dependen t on soldering and PCB layout quality) plus the pad \ncapacitance (roughly 7 pF). A high C parasitic  value will downgrade conversion accuracy. To remedy  this, f ADC \nshould be reduced.  \n \nGeneral PCB design guidelines  \nPower supply decoupling should be performed a s shown in Figure 37 or Figure 38.depending \non whether VREF+ is connected to VDDA or not. The 10 0 nF capacitors should be ceramic (good \nquality). They should be placed them  as close as possible to the chip.  \nIf HEXT  is enabled while  ADC  uses any input channel  of ADC123_IN10 ~13, following PCB layout \nguide line below benefits to isolate the high frequency interference from HEXT  emitting to ADC \ninput signals nearby.  \n\uf06c Use differen t PCB layers to rou te ADC_IN  signal apart from HEXT  path \n\uf06c Do not route ADC_IN  signals and HEXT  path parallel  \nFigure 37. Power supply and reference decoupling (with external VREF pin) \nVDDA\nVREF+\nVSSA1 μF // 100 nF1 μF // 100 nFVDDA\nVREF+\n1 μF // 100 nF\nVREF + not  c onnec te d t o  VDDA VREF + connected to  VDDAVSSAVREF- VREF-\n \n(1)  VREF input is available  only on 100 -pin package  and above. \nAT32F 407 Series Data sheet  \n2022. 11.24 78 Ver 2.03 \nFigure 38. Power supply and reference decoupling (without external VREF pin) \nVDDA/VREF+\nVSSA/VREF-1 μF // 100 nF\n \n(1)  VREF input  is available only on 100 -pin package  and above. \n5.3.21  Internal reference voltage  (VINTRV) characteristics  \nTable 58. Internal reference voltage  characteristics  \nSymbol  Parameter  Conditions  Min Typ Max Unit \nVINTRV Internal reference voltage  - 1.16 1.20 1.24 V \nTCoeff(1) Temperature coefficient  - - - 120 ppm/°C  \nTS_VINTR V ADC sampling time when reading the \ninternal reference voltage  - - 5.1 17.1 μs \n(1)  Guaranteed by design, not tested in production.  \n \n5.3.22  Temperature sensor (VTS) characteristics  \nTable 59. Temperature sensor characteristics  \nSymbol  Parameter  Min Typ Max Unit \nTL(1) VTS linearity with temperature  - ±2 ±4 ºC \nAvg_Slope(1(2)) Average slope  -4.11 -4.26 -4.41 mV/ºC  \nV25(1)(2) Voltage at 25 ºC  1.19 1.28 1.37 V \ntSTART(3) Startup time  - - 100 μs \nTS_temp(3) ADC sampling time when reading the  temperature  - 8.6 17.1 μs \n(1)  Guaranteed by characterization results, not tested in production.  \n(2)  The temperature sensor output voltage changes linearly with temperature. The offset of this line varies from chip \nto chip due to process variation (up to 50 ° C from one chip to another). The internal temperature sensor is more \nsuited to applications that detect temperature variations instead of absolute temperatures. If accurate \ntemperature readings are needed, an external temperature sensor part should be used.  \n(3)  Guaranteed by design, not tested in production.  \n \nObtain the temperature using the following formula:  \nTemperature (in °C) = {(V 25 - VTS) / Avg_Slope} + 25.  \nWhere,  \nV25 = V TS value for 25° C and  \nAvg_Slope = Average Slope for curve between Temperature vs. V SENSE  (given in m V/° C).  \nAT32F 407 Series Data sheet  \n2022. 11.24 79 Ver 2.03 \nFigure 39. VTS vs. temperature  \n \n5.3.23  12-bit DAC  specifications  \nTable 60. DAC  characteristics  \nSymbol  Parameter  Comments  Min Typ Max Unit \nVDDA Analog supply voltage  - 2.6 - 3.6 V \nVREF+(3) Reference supply voltage  - 2.0 - 3.6 V \nVSSA Ground  - 0 - 0 V \nRLOAD(1) Resistive load with buffer ON  - 5 - - kΩ \nRO(2) Impedance output with buffer  OFF - - 13.2 16 kΩ \nCLOAD(1) Capacitive load  - - - 50 pF \nDAC_OUT(1) Lower DAC_OUT voltage with buffer ON  - 0.15 - - V \nHigher DAC _OUT voltage with buffer ON  - - - VREF+ - \n0.2 V \nLower DAC_OUT voltage with buffer OFF  - - 0.5 3.5 mV \nHigher DAC_OUT voltage with buffer OFF  - - - VREF+ - \n1.5 mV  V \nIDDA DC curren t consumption in quiescent mode  With no load, \nVREF+ = 3.6 V  - 480 625 μA \nIVREF(3) DC current consumption in quiescent mode  With no load, \nVREF+ = 3.6 V  - 330 340 μA \nDNL(2) Differential non linearity  - - ±0.4 ±0.8 LSB \nINL(2) Integral non linearity (difference between \nmeasured value and a line drawn between \nDAC_OUT  min and DAC_O UT max) - - ±0.8 ±1.5 LSB \nOffset(2) Offset error (difference between measured \nvalue at Code (0x800) and the ideal value = \nVREF+/2) - - 15 30 mV \n- 20 35 LSB \nGain error(2) Gain error  - - 0.1 0.25 % \ntSETTLING   Settling time  CLOAD ≤ 50 pF, - 1 4 μs  \n0.901.001.101.201.301.401.501.601.70\n-40-35-30-25-20-15-10-505101520253035404550556065707580859095100105Vsense (V)\nTemperature (℃)\nAT32F 407 Series Data sheet  \n2022. 11.24 80 Ver 2.03 \nSymbol  Parameter  Comments  Min Typ Max Unit \nRLOAD ≥ 5 kΩ \nUpdate rate  Max frequency for a correct DAC_OUT \nchange when small variation in the input code \n(from code i to i+1 LSB)  CLOAD ≤ 50 pF, \nRLOAD ≥ 5 kΩ - - 1 MSPS  \ntWAKEUP  Wakeup time  from off state (setting the EN  bit \nin the DAC Control register)  CLOAD ≤ 50 pF, \nRLOAD ≥ 5 kΩ  - 1.2 4 μs \n(1)  Guaranteed by design, not tested in production.  \n(2)  Guaranteed by characterization results, not tested in production.  \n(3)  VREF+ can be internally connected to V DDA and V REF- can be internally connected to V SSA, depending on th e \npackage.  \n \nAT32F 407 Series Data sheet  \n2022. 11.24 81 Ver 2.03 \n6 Package information  \n6.1 LQFP100  package information  \nFigure 40. LQFP100 – 14 x 14 mm 100  pin low -profile quad flat package outline  \n  \n \n\nAT32F 407 Series Data sheet  \n2022. 11.24 82 Ver 2.03 \nTable 61. LQFP100 – 14 x 14 mm 100  pin low -profile quad flat package mechani cal data  \nSymbol  Millimeters  \nMin Typ Max \nA - - 1.60 \nA1 0.05 - 0.15 \nA2 1.35 1.40 1.45 \nb 0.17 0.20 0.26 \nc 0.10 0.127  0.20 \nD 15.75  16.00  16.25  \nD1 13.90  14.00  14.10  \nE 15.75  16.00  16.25  \nE1 13.90  14.00  14.10  \ne 0.50 BSC.  \nL 0.45 0.60 0.75 \nL1 1.00 REF. \n \n \n \nAT32F 407 Series Data sheet  \n2022. 11.24 83 Ver 2.03 \n6.2 LQFP64  package information  \nFigure 41. LQFP64 – 10 x 10 mm 64  pin low -profile quad flat package outline  \n  \n \n\nAT32F 407 Series Data sheet  \n2022. 11.24 84 Ver 2.03 \nTable 62. LQFP64 – 10 x 10 mm 64  pin low -profile quad flat package mechanical data  \nSymbol  millimeters  \nMin Typ Max \nA - - 1.60 \nA1 0.05 - 0.15 \nA2 1.35 1.40 1.45 \nb 0.17 0.20 0.27 \nc 0.09 - 0.20 \nD 11.75  12.00  12.25  \nD1 9.90 10.00  10.10  \nE 11.75  12.00  12.25  \nE1 9.90 10.00  10.10  \ne 0.50 BSC.  \nΘ 3.5° REF. \nL 0.45 0.60 0.75 \nL1 1.00 REF. \nccc 0.08 \n \n6.3 Device  marki ng \nFigure 42. Marking example  \n \n(1)  Not In S cale.  \n \n6.4 Thermal characteristics  \nTable 63. Package thermal characteristics  \nSymbol  Parameter  Value  Unit \nΘJA Thermal resistance junction -ambient  \nLQFP100 – 14 × 14 mm/ 0.5 mm pitch  61.2 \n° C/W  \nThermal resistance junction -ambient  \nLQFP64 – 10 × 10 mm/ 0.5 mm pitch  64.6 \n\nAT32F 407 Series Data sheet  \n2022. 11.24 85 Ver 2.03 \n7 Part numbering  \nTable 64. AT32F 407 series part numbering  \nExample : AT32  F 4 0 7 V G T 7 \nProduct family  \nAT32  = ARM®-based 32 -bit microcontrol ler \n \nProduct type  \nF = General -purpose  \n \nCore  \n4 = Cortex®-M4 \n \nProduct series  \n0 = Main Stream  \n \nProduct application  \n7 = Ethernet MAC  series  \n \nPin count  \nR = 64 pins \nV = 100  pins \n \nInternal Flash memory size  \nC = 256 K Bytes of the internal Flash memory  \nE = 512 K Bytes of the internal Flash memory  \nG = 1 M Bytes of the internal Flash memory  \n \nPackage  \nT = LQFP  \n \nTemperature range  \n7 = -40 ° C  to +105 °C \n \n \nFor a list of available options (speed, package, etc.) or for more  information concerning  this device, \nplease contact you r local Artery sales office.  \nAT32F 407 Series Data sheet  \n2022. 11.24 86 Ver 2.03 \n8 Document r evision history  \nTable 65. Document revision history  \nDate  Version  Change  \n2020.1.8  1.00 Initial release  \n2020. 2.10 1.01 Modified the max. frequency of the system and the internal AHB clock as 240 \nMHz; and the internal APB clock as 120 MHz  \n2020.4.22  1.02 1. Modified the minimum value of V REF+ of ADC and DAC as 2.0 V  \n2. Modified conditions and max. frequencies of the internal AHB clock in Table 13 \n3. Updated c urrent values in sector 5.3.4  \n4. Removed the original note (9) of Table 6 \n5. Modified the parameter descriptions, conditions, and the maximum values of \nthe SPI clock frequ ency in Table 44 \n2020.8.7  1.03 Corrected values in Table 59 \n2021.7.20  2.00 1. Modified paragraph orders and descriptions of the whole document  \n2. Added Table 6 note (10) \n2022.1.27  2.01 Added  Section 6.3 device marking example  \n2022.6.10  2.02 1. Added max value and notes (at TA = 25 °C) in Table 22 and Table 23  \n2. Added min and max values in D, D1, E  and E1 lines of all package mechanic \ndata tables.  \n2022.11.24 2.03 Updated Figure 37 and Figure 38. \n \n  \nAT32F 407 Series Data sheet  \n2022. 11.24 87 Ver 2.03 \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \nIMPORTANT NOTICE – PLEASE READ CAREFULLY  \nPurchasers understand and agree that purchasers are  solely responsible for the selection and use of Artery ’s products and services.  \nArtery ’s products and services are provided “AS IS ” and Artery provides no warranties express, implied or statutory, including, without \nlimitation, any implied warranties of m erchantability, satisfactory quality, non -infringement, or fitness for a particular purpose with respect to \nthe Artery ’s products and services.  \nNotwithstanding anything to the contrary, purchasers acquires no right, title or interest in any Artery ’s produc ts and services or any intellectual \nproperty rights embodied therein. In no event shall Artery ’s products and services provided be construed as (a) granting purchasers, expressly \nor by implication, estoppel or otherwise, a license to use third  party ’s prod ucts and services;  or (b) licensing the third parties ’ intellectual \nproperty rights; or (c) warranting the third party ’s products and services and its intellectual property rights.  \nPurchasers hereby agrees that Artery ’s products are not authorized for use as, and purchasers shall not integrate, promote, sell or otherwise \ntransfer any Artery ’s product to any customer or end user for use as critical components in (a) any medical, life saving or life support device \nor system, or (b) any safety device or system  in any automotive application and mechanism (including but not limited to automotive brake or \nairbag systems), or (c) any nuclear facilities, or (d) any air traffic control device, application or system, or (e) any weap ons device, application \nor system, o r (f) any other device, application or system where it is reasonably foreseeable that failure of the Artery ’s products as used in \nsuch device, application or system would lead to death, bodily injury or catastrophic property damage.  \n© 2022 ARTERY Technolog y – All rights reserved\n \n'}]
!==============================================================================!
### Component Summary: AT32F407VGT7

#### Key Specifications:
- **Voltage Ratings**: 
  - Operating Voltage: 2.6V to 3.6V
  - Backup Voltage (VBAT): 1.8V to 3.6V
- **Current Ratings**: 
  - Supply Current in Run Mode: Up to 100.7 mA (at 240 MHz)
  - Supply Current in Sleep Mode: 85.3 mA (at 240 MHz)
  - Supply Current in Deepsleep Mode: 1.35 mA
  - Supply Current in Standby Mode: 3.93 µA
- **Power Consumption**: 
  - Power Dissipation: 326 mW (at 105 °C)
- **Operating Temperature Range**: -40 °C to +105 °C
- **Package Type**: LQFP100 (14 x 14 mm)
- **Special Features**: 
  - ARM Cortex-M4 core with FPU and DSP instructions
  - Up to 1024 KB Flash memory and 96+128 KB SRAM
  - 3 x 12-bit ADCs, 2 x 12-bit DACs
  - 17 timers, 21 communication interfaces including USB and Ethernet
  - Memory Protection Unit (MPU)
  - Low-power modes: Sleep, Deepsleep, and Standby
- **Moisture Sensitive Level**: MSL 3 (JEDEC J-STD-020E)

#### Description:
The **AT32F407VGT7** is a high-performance 32-bit microcontroller based on the ARM Cortex-M4 architecture, featuring a Floating Point Unit (FPU) and Digital Signal Processing (DSP) capabilities. It operates at a maximum frequency of 240 MHz and includes a comprehensive set of peripherals, making it suitable for a wide range of applications.

#### Typical Applications:
The AT32F407VGT7 is designed for various applications, including:
- **Embedded Systems**: Ideal for applications requiring high processing power and efficiency.
- **Industrial Control**: Suitable for motor control, automation, and robotics due to its extensive timer and PWM capabilities.
- **Consumer Electronics**: Can be used in smart devices, wearables, and IoT applications.
- **Data Acquisition**: The integrated ADCs make it suitable for sensor interfacing and data collection.
- **Communication Systems**: With support for USB, Ethernet, and multiple serial interfaces, it is well-suited for networking applications.

This microcontroller's combination of performance, low power consumption, and rich peripheral set makes it a versatile choice for developers looking to implement complex functionalities in their designs.