[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': "Give me information about the component of AD73311LARUZ-RL production of ANALOG DEVICES from the text:REV. A\nInformation furnished by Analog Devices is believed to be accurate and\nreliable. However, no responsibility is assumed by Analog Devices for its\nuse, nor for any infringements of patents or other rights of third partieswhich may result from its use. No license is granted by implication or\notherwise under any patent or patent rights of Analog Devices.a\nAD73311L\nOne Technology Way, P.O. Box 9106, Norwood, MA 02062-9106,  U.S.A.\nTel: 781/329-4700 World Wide Web Site: http://www.analog.comFax: 781/326-8703 © Analog Devices, Inc., 2000Low Cost, Low Power CMOS\nGeneral Purpose Analog Front End\nFUNCTIONAL BLOCK DIAGRAM\nAD73311L\nAGND1 AGND2 DGNDDVDD AVDD2 AVDD1\nVINP\nVINN\nVOUTP\nVOUTN\nREFCAP\nREFOUTSDI\nSDIFS\nSCLK\nSDOSDOFS\nSE\nMCLK\nRESET1-BIT\nDAC\nREFERENCESERIAL\nI/O\nPORT\nINTERPOLATORDECIMATOR\nSWITCHED-\nCAPACITOR\nLOW-PASS FILTERCONTINUOUS\nTIME\nLOW-PASS FILTER+6/–15dB\nPGA0/38dB\nPGAANALOG\nSIGMA-DELTA\nMODULATOR\nDIGITAL\nSIGMA-DELTA\nMODULATORANALOG\nLOOPBACK/\nSINGLE-ENDED\nENABLEFEATURES\n16-Bit A/D Converter\n16-Bit D/A Converter\nProgrammable Input/Output Sample Rates76 dB ADC SNR\n77 dB DAC SNR\nProgrammable Sampling Rate\n64 kS/s Maximum Sample Rate\n–90 dB Crosstalk\nLow Group Delay (25 ms Typ per ADC Channel,\n50 ms Typ per DAC Channel)\nProgrammable Input/Output Gain\nFlexible Serial Port Which Allows Up to Eight Devices\nto Be Connected in Cascade\nSingle (+3 V) Supply Operation\n33 mW Max Power Consumption at 2.7 VOn-Chip Reference\n20-Lead SOIC/SSOP/TSSOP Packages\nAPPLICATIONS\nGeneral Purpose Analog I/O\nSpeech Processing\nCordless and Personal CommunicationsTelephony\nActive Control of Sound and Vibration\nData CommunicationsGENERAL DESCRIPTION\nThe AD73311L is a complete front-end processor for general\npurpose applications including speech and telephony. It features\na 16-bit A/D conversion channel and a 16-bit D/A conversionchannel. Each channel provides 70 dB signal-to-noise ratio over\na voiceband signal bandwidth. The ﬁnal channel bandwidth can\nbe reduced, and signal-to-noise ratio improved, by externaldigital ﬁltering in a DSP engine.\nThe AD73311L is suitable for a variety of applications in the\nspeech and telephony area, including low bit rate, high quality\ncompression, speech enhancement, recognition and synthesis.\nThe low group delay characteristic of the part makes it suitable\nfor single or multichannel active control applications.\nThe gains of the A/D and D/A conversion channels are prog ram-\nmable over 38 dB and 21 dB ranges respectively. An on-chipreference voltage is included to allow single supply operation.\nA serial port (SPORT) allows easy interfacing of single or cas-\ncaded devices to industry standard DSP engines.\nThe AD73311L is available in 20-lead SOIC, SSOP and\nTSSOP packages.\nREV. A –2–AD73311L–SPECIFICATIONS1(AVDD = DVDD = 2.7 V to 3.3 V; DGND = AGND = 0 V, f DMCLK = 16.384 MHz,\nFS = 8 kHz; T A = T MIN to T MAX, unless otherwise noted.)\n AD73311LA\nParameter Min Typ Max Unit Test Conditions/Comments\nREFERENCE\nREFCAP\nAbsolute Voltage, V REFCAP 1.08 1.2 1.32 V\nREFCAP TC 50 ppm/ °C 0.1 µF Capacitor Required from\nREFOUT REFCAP to AGND2\nTypical Output Impedance 145 Ω\nAbsolute Voltage, V REFOUT 1.08 1.2 1.32 V Unloaded\nMinimum Load Resistance 1 k Ω\nMaximum Load Capacitance 100 pF\nADC SPECIFICATIONS\nMaximum Input Range at VIN2, 31.578 V p-p Measured Differentially\n–2.85 dBm Max Input = (1.578/1.2) × VREFCAP\nNominal Reference Level at VIN 1.0954 V p-p Measured Differentially\n(0 dBm0) –6.02 dBm\nAbsolute Gain\nPGA = 0 dB –2.2 –0.6 +1.0 dB 1.0 kHz, 0 dBm0\nPGA = 38 dB –1.0 dB 1.0 kHz, 0 dBm0\nGain Tracking Error ±0.1 dB 1.0 kHz, +3 dBm0 to –50 dBm0\nSignal to (Noise + Distortion) Refer to Figure 5a\nPGA = 0 dB 71 76 dB 300 Hz to 3400 Hz\n70 74 dB 0 Hz to f SAMP/2\n72 dB 300 Hz to 3400 Hz; f SAMP = 64 kHz\n56 dB 0 Hz to f SAMP/2; f SAMP = 64 kHz\nPGA = 38 dB 60 dB 300 Hz to 3.4 kHz\n59 dB 0 Hz to f SAMP/2\nTotal Harmonic Distortion\nPGA = 0 dB –85 –75 dB 300 Hz to 3.4 kHz\nPGA = 38 dB –85 dB 300 Hz to 3.4 kHz\nIntermodulation Distortion –82 dB PGA = 0 dB\nIdle Channel Noise –76 dBm0 PGA = 0 dB\nCrosstalk –100 dB ADC Input Signal Level: 1.0 kHz, 0 dBm0\nDAC Input at Idle\nDC Offset –20 +2 +25 mV PGA = 0 dB\nPower Supply Rejection –84 dB Input Signal Level at AVDD and DVDD\nPins 1.0 kHz, 100 mV p-p Sine Wave\nGroup Delay4, 525 µs 64 kHz Output Sample Rate\nInput Resistance at VIN2, 445 k Ω6DMCLK = 16.384 MHz\nDAC SPECIFICATIONS\nMaximum Voltage Output Swing2\nSingle-Ended 1.578 V p-p PGA = 6 dB\n–2.85 dBm Max Output = (1.578/1.2) × VREFCAP\nDifferential 3.156 V p-p PGA = 6 dB\n3.17 dBm Max Output = 2 × ((1.578/1.2) × VREFCAP\nNominal Voltage Output Swing (0 dBm0)\nSingle-Ended 1.0954 V p-p PGA = 6 dB\n–6.02 dBm\nDifferential 2.1909 V p-p PGA = 6 dB\n0 dBm\nOutput Bias Voltage41.08 1.2 1.32 V REFOUT Unloaded\nAbsolute Gain –1.8 –0.7 +0.4 dB 1.0 kHz, 0 dBm0\nGain Tracking Error ±0.1 dB 1.0 kHz, +3 dBm0 to –50 dBm0\nSignal to (Noise + Distortion) Refer to Figure 5b\nPGA = 0 dB 70 77 dB 300 Hz to 3.4 kHz Frequency Range\n76 dB 300 Hz to 3400 Hz; f SAMP = 64 kHz\nPGA = 6 dB 77 dB 300 Hz to 3.4 kHz Frequency Range\n77 dB 300 Hz to 3400 Hz; f SAMP = 64 kHz\nTotal Harmonic Distortion\nPGA = 0 dB –80 –70 dB\nPGA = 6 dB –80 dB\nIntermodulation Distortion –76 dB PGA = 0 dB\nIdle Channel Noise –82 dBm0 PGA = 0 dB\nCrosstalk –100 dB ADC Input Signal Level: AGND; DAC\nOutput Signal Level: 1.0 kHz, 0 dBm0\nREV. A –3–AD73311L\nAD73311LA\nParameter Min Typ Max Unit Test Conditions/Comments\nDAC SPECIFICATIONS (Continued)\nPower Supply Rejection –81 dB Input Signal Level at AVDD and DVDD\nPins: 1.0 kHz, 100 mV p-p Sine Wave\nGroup Delay4, 525 µs 64 kHz Input Sample Rate, Interpolator\nBypassed (CRE:5 = 1)\nOutput DC Offset2, 7–30 +5 +50 mV PGA = 6 dB\nMinimum Load Resistance, R L2, 8\nSingle-Ended 150 Ω\nDifferential 150 Ω\nMaximum Load Capacitance, C L2, 8\nSingle-Ended 500 pF\nDifferential 100 pF\nFREQUENCY RESPONSE\n(ADC AND DAC)9 Typical Output Normalized to f SAMP\n00 d B0.03125 –0.1 dB\n0.0625 –0.25 dB\n0.125 –0.6 dB\n0.1875 –1.4 dB\n0.25 –2.8 dB\n0.3125 –4.5 dB Channel Frequency Response Is\n0.375 –7.0 dB Programmable by Means of External\n0.4375 –9.5 dB Digital Filtering\n> 0.5 < –12.5 dB\nLOGIC INPUTS\nVINH, Input High Voltage V DD – 0.8 V DD V\nVINL, Input Low Voltage 0 0.8 V\nIIH, Input Current 10 µA\nCIN, Input Capacitance 10 pF\nLOGIC OUTPUT\nVOH, Output High Voltage V DD – 0.4 V DD V |IOUT| ≤ 100 µA\nVOL, Output Low Voltage 0 0.4 V |IOUT| ≤ 100 µA\nThree-State Leakage Current –10 +10 µA\nPOWER SUPPLIES\nAVDD1, AVDD2 2.7 3.3 VDVDD 2.7 3.3 V\nIDD10See Table I\nNOTES\n1Operating temperature range is as follows: –40°C to +105 °C. Therefore, T MIN = –40°C and T MAX = +105 °C.\n2Test conditions: Input PGA set for 0 dB gain, Output PGA set for 6 dB gain, no load on analog outputs (unless otherwise noted).\n3At input to sigma-delta modulator of ADC.\n4Guaranteed by design.\n5Overall group delay will be affected by the sample rate and the external digital ﬁltering.\n6The ADC ’s input impedance is inversely proportional to DMCLK and is approximated by: (4 × 1011)/DMCLK.\n7Between VOUTP and VOUTN.\n8At VOUT output.\n9Frequency responses of ADC and DAC measured with input at audio reference level (the input level that produces an output level of –10 dBm0), with 38 dB preampli ﬁer\nbypassed and input gain of 0 dB.\n10Test Conditions: no load on digital inputs, analog inputs ac coupled to ground, no load on analog outputs.\nSpeci ﬁcations subject to change without notice.\nTable I. Current Summary (AVDD = DVDD = 3.3 V)\nAnalog Internal Digital External Interface Total Current MCLK\nConditions Current Current Current (Max) SE ON Comments\nADC Only On 2 4.5 0.5 8.0 1 YES REFOUT Disabled\nADC and DAC On 5.6 4.8 0.5 12.5 1 YES REFOUT DisabledREFCAP Only On 0.65 0 0 1.0 0 NO REFOUT Disabled\nREFCAP and\n  REFOUT Only On 2.7 0 0 3.8 0 NOAll Sections Off 0 0.6 0 0.75 0 YES MCLK Active Levels Equal to\n0 V and DVDD\nAll Sections Off 1 µA 0.5 µA 0 20 µA 0 NO Digital Inputs Static and Equal\nto 0 V or DVDD\nThe above values are in mA and are typical values unless otherwise noted.\nREV. AAD73311L\n–4–Table II. Signal Ranges\nParameter Condition Signal Range\nVREFCAP 1.2 V ± 10%\nVREFOUT 1.2 V ± 10%\nADC Maximum Input Range at V IN 1.578 V p-p\nNominal Reference Level 1.0954 V p-p\nDAC Maximum Voltage\nOutput Swing\nSingle-Ended 1.578 V p-p\nDifferential 3.156 V p-p\nNominal Voltage\nOutput Swing\nSingle-Ended 1.0954 V p-p\nDifferential 2.1909 V p-p\nOutput Bias Voltage V REFOUT\nTIMING CHARACTERISTICS\nLimit at\nParameter T A = –40 /H11543C to +105 /H11543C Unit Description\nClock Signals See Figure 1\nt1 61 ns min MCLK Period\nt2 24.4 ns min MCLK Width High\nt3 24.4 ns min MCLK Width Low\nSerial Port See Figures 3 and 4\nt4 t1 ns min SCLK Period\nt5 0.4 × t1 ns min SCLK Width High\nt6 0.4 × t1 ns min SCLK Width Low\nt7 20 ns min SDI/SDIFS Setup Before SCLK Low\nt8 0 ns min SDI/SDIFS Hold After SCLK Low\nt9 10 ns max SDOFS Delay from SCLK High\nt10 10 ns min SDOFS Hold After SCLK High\nt11 10 ns min SDO Hold After SCLK High\nt12 10 ns max SDO Delay from SCLK High\nt13 30 ns max SCLK Delay from MCLK(AVDD = DVDD = 2.7 V to 3.6 V; AGND = DGND = 0 V; T A = T MlN to T MAX, unless otherwise noted)\nt1\nt2\nt3\nFigure 1. MCLK Timing100/H9262AIOL\n100/H9262AIOHCL\n15pF2.1VTO OUTPUT\nPIN\nFigure 2. Load Circuit for Timing Speciﬁcations\nt1t2 t3\nt13\nt5 t6\nt4MCLK\nSCLK *\nSCLK IS INDIVIDUALLY PROGRAMMABLE\nIN FREQUENCY (MCLK/4 SHOWN HERE ).*\nFigure 3. SCLK Timing\nREV. AAD73311L\n–5–t7\nt9 t10\nt11 t12THREE-\nSTATE\nTHREE-\nSTATE\nTHREE-\nSTATESE (I)\nSCLK (O)\nSDIFS (I)\nSDI (I)\nSDOFS (O)\nSDO (O)D15 D14 D1 D0 D15\nD15 D2 D1 D0 D15 D14t8\nt7t8\nFigure 4. Serial Port (SPORT)\nVIN – dBm0–85\n3.17–75 –65 –55 –45 –35 –25 –15 080\n70\n–10S/(N+D) – dB\n30\n20\n10\n050\n4060\n–5\nFigure 5a. S/(N+D) vs. V IN (ADC @ 3 V) over Voiceband\nBandwidth (300 Hz – 3.4 kHz)VIN – dBm0–85\n3.17–75 –65 –55 –45 –35 –25 –15 080\n70\n–10S/(N+D) – dB\n30\n20\n10\n050\n4060\n–5\nFigure 5b. S/(N+D) vs. V IN (DAC @ 3 V) over Voiceband\nBandwidth (300 Hz – 3.4 kHz)\nREV. AAD73311L\n–6–ABSOLUTE MAXIMUM RATINGS *\n(TA = 25 °C unless otherwise noted)\nAVDD, DVDD to GND  . . . . . . . . . . . . . . .  –0.3 V to +4.6 V\nAGND to DGND  . . . . . . . . . . . . . . . . . . . .  –0.3 V to +0.3 V\nDigital I/O Voltage to DGND  . . . –0.3 V to (DVDD + 0.3 V)\nAnalog I/O Voltage to AGND  . . .  –0.3 V to (AVDD + 0.3 V)\nOperating Temperature Range\n Industrial (A Version)  . . . . . . . . . . . . . . . –40°C to +105 °C\nStorage Temperature Range  . . . . . . . . . . . . –65°C to +150 °C\nMaximum Junction Temperature  . . . . . . . . . . . . . . . .  150 °C\nSOIC, θJA Thermal Impedance  . . . . . . . . . . . . . . . . .  75 °C/W\nLead Temperature, Soldering\nVapor Phase (60 sec)  . . . . . . . . . . . . . . . . . . . . . . . .  215 °C\nInfrared (15 sec) . . . . . . . . . . . . . . . . . . . . . . . . . . . .  220 °C\nSSOP, θJA Thermal Impedance  . . . . . . . . . . . . . . . . 126 °C/W\nLead Temperature, Soldering\nVapor Phase (60 sec)  . . . . . . . . . . . . . . . . . . . . . . . .  215 °C\nInfrared (15 sec) . . . . . . . . . . . . . . . . . . . . . . . . . . . .  220 °C\nTSSOP, θJA Thermal Impedance  . . . . . . . . . . . . . . . 143 °C/W\nLead Temperature, Soldering\nVapor Phase (60 sec)  . . . . . . . . . . . . . . . . . . . . . . . .  215 °C\nInfrared (15 sec) . . . . . . . . . . . . . . . . . . . . . . . . . . . .  220 °C\n*Stresses above those listed under Absolute Maximum Ratings may cause perma-\nnent damage to the device. This is a stress rating only; functional operation of thedevice at these or any other conditions above those listed in the operational sectionsof this speci ﬁcation is not implied. Exposure to absolute maximum rating condi-\ntions for extended periods may affect device reliability.PIN CONFIGURATION\n14\n13\n12\n1117\n16\n1520\n1918\n10981\n23\n4\n765\nTOP VIEW\n(Not to Scale)VOUTP\nSDOFSSDIFSSDISE\nVOUTN\nAVDD1\nAGND1\nAD73311L\nSCLKMCLKSDO VINP\nVINN\nREFOUT\nREFCAP\nAVDD2\nAGND2 DGNDDVDDRESET\nCAUTION\nESD (electrostatic discharge) sensitive device. Electrostatic charges as high as 4000 V readilyaccumulate on the human body and test equipment and can discharge without detection.\nAlthough the AD73311L features proprietary ESD protection circuitry, permanent damage may\noccur on devices subjected to high energy electrostatic discharges. Therefore, proper ESD\nprecautions are recommended to avoid performance degradation or loss of functionality.WARNING!\nESD SENSITIVE DEVICEORDERING GUIDE\nTemperature Package\nModel Range Option1\nAD73311LAR –40°C to +105 °C R-20\nAD73311LARS –40°C to +105 °C RS-20\nAD73311LARU –40°C to +105 °C RU-20\nEVAL-AD73311LEB Evaluation Board2\nNOTES\n1R = 0.3' Small Outline IC (SOIC), RS = Shrink Small Outline Package (SSOP),\nRU = Thin Small Shrink Outline Package (TSSOP).\n2The AD73311L evaluation board features a cascade of two codecs interfaced to\nan ADSP-2185L DSP. The board features a DSP software monitor whichallows interface to a PC serial port.\nREV. AAD73311L\n–7–PIN FUNCTION DESCRIPTIONS\nPin\nNumber Mnemonic Function\n1 VOUTP Analog Output from the Positive Terminal of the Output Channel.\n2 VOUTN Analog Output from the Negative Terminal of the Output Channel.3 AVDD1 Analog Power Supply Connection for the Output Driver.\n4 AGND1 Analog Ground Connection for the Output Driver.\n5 VINP Analog Input to the Positive Terminal of the Input Channel.6 VINN Analog Input to the Negative Terminal of the Input Channel.\n7 REFOUT Buffered Reference Output, which has a nominal value of 1.2 V.\n8 REFCAP A Bypass Capacitor to AGND2 of 0.1 µF is required for the on-chip reference. The capacitor should\nbe ﬁxed to this pin.\n9 AVDD2 Analog Power Supply Connection.10 AGND2 Analog Ground/Substrate Connection.\n11 DGND Digital Ground/Substrate Connection.\n12 DVDD Digital Power Supply Connection.13 RESET Active Low Reset Signal. This input resets the entire chip, resetting the control registers and clearing\nthe digital circuitry.\n14 SCLK Output Serial Clock whose rate determines the serial transfer rate to/from the codec. It is used to clock\ndata or control information to and from the serial port (SPORT). The frequency of SCLK is equal tothe frequency of the master clock (MCLK) divided by an integer number —this integer number being\nthe product of the external master clock rate divider and the serial clock rate divider.\n15 MCLK Master Clock Input. MCLK is driven from an external clock signal.\n16 SDO Serial Data Output of the Codec. Both data and control information may be output on this pin and are\nclocked on the positive edge of SCLK. SDO is in three-state when no information is being transmitted\nand when SE is low.\n17 SDOFS Framing Signal Output for SDO Serial Transfers. The frame sync is on bit wide and is active one\nSCLK period before the ﬁrst bit (MSB) of each output word. SDOFS is referenced to the positive\nedge of SCLK. SDOFS is in three-state when SE is low.\n18 SDIFS Framing Signal Input for SDI Serial Transfers. The frame sync is one bit wide and is valid one\nSCLK period before the ﬁrst bit (MSB) of each input word. SDIFS is sampled on the negative edge of\nSCLK and ignored when SE is low.\n19 SDI Serial Data Input of the Codec. Both data and control information may be input on this pin and are\nclocked on the negative edge of SCLK. SDI is ignored when SE is low.\n20 SE SPORT Enable. Asynchronous input enable pin for the SPORT. When SE is set low by the DSP, the\noutput pins of the SPORT are three-stated and the input pins are ignored. SCLK is also disabled\ninternally in order to decrease power dissipation. When SE is brought high, the control and data regis-\nters of the SPORT are at their original values (before SE was brought low); however, the timing\ncounters and other internal registers are at their reset values.\nREV. AAD73311L\n–8–TERMINOLOGY\nAbsolute Gain\nAbsolute gain is a measure of converter gain for a known signal.\nAbsolute gain is measured (differentially) with a 1 kHz sine waveat 0 dBm0 for the DAC and with a 1 kHz sine wave at 0 dBm0\nfor the ADC. The absolute gain speci ﬁcation is used for gain\ntracking error speci ﬁcation.\nCrosstalk\nCrosstalk is due to coupling of signals from a given channel\nto an adjacent channel. It is de ﬁned as the ratio of the ampli-\ntude of the coupled signal to the amplitude of the input signal.Crosstalk is expressed in dB.\nGain Tracking Error\nGain tracking error measures changes in conve rter output for\ndifferent signal levels relative to an absolute signal level. Theabsolute signal level is 0 dBm0 (equal to absolute gain) at 1 kHz\nfor the DAC and 0 dBm0 (equal to absolute gain) at 1 kHz for\nthe ADC. Gain tracking error at 0 dBm0 (ADC) and 0 dBm0(DAC) is 0 dB by de ﬁnition.\nGroup Delay\nGroup delay is de ﬁned as the derivative of radian phase with\nrespect to radian frequency, d ø(f)/df. Group delay is a measure\nof average delay of a system as a function of frequency. A linear\nsystem with a constant group delay has a linear phase response.\nThe deviation of group delay from a constant indicates the degreeof nonlinear phase response of the system.\nIdle Channel Noise\nIdle channel noise is de ﬁned as the total signal energy measured\nat the output of the device when the input is grounded (measuredin the frequency range 300 Hz –3400 Hz).\nIntermodulation Distortion\nWith inputs consisting of sine waves at two frequencies, fa and\nfb, any active device with nonlinearities will cr eate distortion\nproducts at sum and difference frequencies of mfa ± nfb where\nm, n = 0, 1, 2, 3, etc. Intermodulation terms are those for which\nneither m nor n are equal to zero. For ﬁnal testing, the second\norder terms include (fa + fb) and (fa – fb), while the third order\nterms include (2fa + fb), (2fa – fb), (fa + 2fb) and (fa – 2fb).\nPower Supply Rejection\nPower supply rejection measures the susceptibility of a device to\nnoise on the power supply. Power supply rejection is measured\nby modulating the power supply with a sine wave and measuring\nthe noise at the output (relative to 0 dB).\nSample Rate\nThe sample rate is the rate at which the ADC updates its out-\nput register and the DAC updates its output from its input\nregister. It is ﬁxed relative to the DMCLK (= DMCLK/256)\nand therefore may only be changed by changing the DMCLK.\nSNR+THD\nSignal-to-noise ratio plus harmonic distortion is de ﬁned to be\nthe ratio of the rms value of the measured input signal to therms sum of all other spectral components in the frequency range\n300 Hz –3400 Hz, including harmonics but excluding dc.ABBREVIATIONS\nADC Analog-to-Digital Converter.\nALB Analog Loop-Back.BW Bandwidth.CRx A Control Register where x is a placeholder for an\nalpha betic character (A –E). There are ﬁve read/\nwrite control registers on the AD73311L —desig-\nnated CRA through CRE.\nCRx:n A bit position, where n is a placeholder for a\nnumeric character (0 –7), within a control register;\nwhere x is a placeholder for an alphabetic charac-\nter (A –E). Position 7 represents the MSB and\nPosition 0 represents the LSB.\nDAC Digital-to-Analog Converter.DLB Digital Loop-Back.DMCLK Device (Internal) Master Clock. This is the\ninternal master clock resulting from the external\nmaster clock (MCLK) being divided by the on-chip\nmaster clock divider.\nFSLB Frame Sync Loop-Back —where the SDOFS of\nthe ﬁnal device in a cascade is connected to the\nRFS and TFS of the DSP and the SDIFS of ﬁrst\ndevice in the cascade. Data input and outputoccur simultaneously. In the case of nonFSLB,\nSDOFS and SDO are connected to the Rx Port\nof the DSP while SDIFS and SDI are connectedto the Tx Port.\nPGA Programmable Gain Ampli ﬁer.\nSC Switched Capacitor.SNR Signal-to-Noise Ratio.SPORT Serial Port.THD Total Harmonic Distortion.VBW Voice Bandwidth.\nREV. AAD73311L\n–9–FUNCTIONAL DESCRIPTION\nEncoder Channel\nThe encoder channel consists of an input con ﬁguration block, a\nswitched capacitor PGA and a sigma-delta analog-to-digital\nconverter (ADC). An on-board digital ﬁlter, which forms part\nof the sigma-delta ADC, also performs critical system-levelﬁltering. Due to the high level of oversampling, the input anti-\nalias requirements are reduced such that a simple single pole\nRC stage is suf ﬁcient to give adequate attenuation in the band\nof interest.\nInput Conﬁguration Block\nThe input con ﬁguration block consists of a multiplexing arrange-\nment that allows selection of various input con ﬁgurations. This\nincludes ADC input selection from either the VINP, VINN pins\nor from the DAC output via the Analog Loop-Back (ALB)\narrangement. Differential inputs can be inverted and it is alsopossible to use the device in single-ended mode, which allows\nthe option of using the VINP, VINN pins as two separate\nsingle-ended inputs, either of which can be selected undersoftw are control.\nProgrammable Gain Ampliﬁer\nThe encoder section ’s analog front end comprises a switched\ncapacitor PGA that also forms part of the sigma-delta modulator.The SC sampling frequency is DMCLK/8. The PGA, w hose\nprogrammable gain settings are shown in Table III, may be\nused to increase the signal level applied to the ADC from lowoutput sources such as microphones, and can be used to avoid\nplacing external ampli ﬁers in the circuit. The input signal level\nto the sigma-delta modulator should not exceed the maximuminput voltage permitted.\nThe PGA gain is set by bits IGS0, IGS1 and IGS2 (CRD:0 –2)\nin Control Register D.\nTable III. PGA Settings for the Encoder Channel\nIGS2 IGS1 IGS0 Gain (dB)\n00 0 0\n00 1 6\n01 0 1 2\n01 1 1 810 0 2 0\n10 1 2 6\n11 0 3 2\n11 1 3 8\nADC\nThe ADC consists of an analog sigma-delta modulator and adigital antialiasing decimation ﬁlter. The sigma-delta modu-\nlator noise-shapes the signal and produces 1-bit samples at a\nDMCLK/8 rate. This bitstream, representing the analog input\nsignal, is input to the antialiasing decimation ﬁlter. The decima-\ntion ﬁlter reduces the sample rate and increases the resolution.\nAnalog Sigma-Delta Modulator\nThe AD73311L input channel employs a sigma-delta c onver-\nsion technique, which provides a high resolution 16-bit output\nwith system ﬁltering being implemented on-chip.\nSigma-delta converters employ a technique known as over-\nsampling, w here the sampling rate is many times the highest\nfrequency of interest. In the case of the AD73311L, the initialsampling rate of the sigma-delta modulator is DMCLK/8. The\nmain effect of oversampling is that the quantization noise isspread over a very wide bandwidth, up to F\nS/2 = DMCLK/16\n(Figure 6a). This means that the noise in the band of interest is\nmuch reduced. Another complementary feature of sigma-deltaconverters is the use of a technique called noise-shaping. This\ntechnique has the effect of pushing the noise from the band of\ninterest to an out- of-band position (Figure 6b). The combi-\nnation of these techniq ues, followed by the application of a\ndigital ﬁlter, reduces the noise in band suf ﬁciently to ensure\ngood dynamic performance from the part (Figure 6c).\nBAND\n OF\nINTERESTFS/2\nDMCLK/16\na.\nBAND\n OF\nINTERESTNOISE-SHAPING\nFS/2\nDMCLK/16\nb.\nBAND\n OF\nINTERESTFS/2\nDMCLK/16DIGITAL FILTER\nc.\nFigure 6. Sigma-Delta Noise Reduction\nFigure 7 shows the various stages of ﬁltering that are employed\nin a typical AD73311L application. In Figure 7a we see the\ntransfer function of the external analog antialias ﬁlter. Even\nthough it is a single RC pole, its cutoff frequency is suf ﬁciently\nfar away from the initial sampling frequency (DMCLK/8) that\nit takes care of any signals that could be aliased by the sampling\nfrequency. This also shows the major difference between theinitial oversampling rate and the bandwidth of interest. In Figure\n7b, the signal and noise-shaping responses of the sigma- delta\nmodulator are shown. The signal response provides furtherrejection of any high frequency signals while the noise-shaping\nwill push the inherent quantization noise to an out-of-band\nposition. The detail of Figure 7c shows the response of thedigital decimation ﬁlter (Sinc-cubed response) with nulls every\nmultiple of DMCLK/256, which is the decimation ﬁlter update\nrate. The ﬁnal detail in Figure 7d shows the application of a\nﬁnal antialias ﬁlter in the DSP engine. This has the advantage\nof being implemented according to the user ’s requirements and\navailable MIPS. The ﬁltering in Figures 7a through 7c is imple-\nmented in the AD73311L.\nREV. AAD73311L\n–10–FB = 4kHz FSINIT = DMCLK/8\na. Analog Antialias Filter Transfer Function\nFB = 4kHz FSINIT = DMCLK/8SIGNAL TRANSFER FUNCTION\nNOISE TRANSFER FUNCTION\nb. Analog Sigma-Delta Modulator Transfer Function\nFB = 4kHz FS INTER  = DMCLK/256\nc. Digital Decimator Transfer Function\nFB = 4kHz FS FINAL  = 8kHz FSINTER  = DMCLK/256\nd. Final Filter LPF (HPF) Transfer Function\nFigure 7. AD73311L ADC Frequency Responses\nDecimation Filter\nThe digital ﬁlter used in the AD73311L carries out two impor-\ntant functions. Firstly, it removes the out-of-band quantization\nnoise, which is shaped by the analog modulator and secondly, itdecimates the high frequency bitstream to a lower rate 15-bit word.\nThe antialiasing decimation ﬁlter is a sinc-cubed digital ﬁlter\nthat reduces the sampling rate from DMCLK/8 at the modula-\ntor to an output rate at the SPORT of DMCLK/M (where M\ndepends on the sample rate setting —M = 256 @ 64 kHz; M =\n512 @ 32 kHz, M = 1024 @ 16 kHz, M = 2048 @ 8 kHz), and\nincreases the resolution from a single bit to 15 bits. Its Z trans-form is given as: [(1 –Z\n–N)/(1–Z–1)]3 where N is determined by\nthe sampling rate (N = 32 @ 64 kHz, N = 64 @ 32 kHz, N =\n128 @ 16 kHz, N = 256 @ 8 kHz). This ensures a minimalgroup delay of 25 µs at the 64 kHz sampling rate.ADC Coding\nThe ADC coding scheme is in twos complement format (see\nFigure 8). The output words are formed by the decimationﬁlter, which grows the word length from the single-bit output of\nthe sigma-delta modulator to a 15-bit word, which is the 16-bit\ntransfer being used as a flag bit to indicate either control or datain the frame.\nVINN\nVINPVREF + (VREF /H11547 0.32875)\nVREF\nVREF – (VREF /H11547 0.32875)\n10...00 00...00 01...11\nADC CODE DIFFERENTIAL\nVINN\nVINPVREF + (VREF /H11547 0.6575)\nVREF\nVREF – (VREF /H11547 0.6575)\n10...00 00...00 01...11\nADC CODE SINGLE-ENDEDANALOG\nINPUT\nANALOG\nINPUT\nFigure 8. ADC Transfer Function\nDecoder Channel\nThe decoder channel consists of a digital interpolator, digital\nsigma-delta modulator, a single bit digital-to-analog converter\n(DAC), an analog smoothing ﬁlter and a programmable gain\nampli ﬁer with differential output.\nDAC Coding\nThe DAC coding scheme is in twos complement format with\n0x7FFF being full-scale positive and 0x8000 being full-scale\nnegative.\nInterpolation Filter\nThe anti-imaging interpolation ﬁlter is a sinc-cubed digital ﬁlter\nwhich up-samples the 16-bit input words from the SPORT\ninput rate of DMCLK/M (where M depends on the sample ratesetting —M = 256 @ 64 kHz; M = 512 @ 32 kHz, M = 1024 @\n16 kHz, M = 2048 @ 8 kHz), to a rate of DMCLK/8 while\nﬁltering to attenuate images produced by the interpolation pro-\ncess. Its Z transform is given as: [(1 –Z\n–N)/(1–Z–1)]3 where N is\ndetermined by the sampling rate (N = 32 @ 64 kHz, N = 64 @\n32 kHz, N = 128 @ 16 kHz, N = 256 @ 8 kHz). The DACreceives 16-bit samples from the host DSP processor at a rate of\nDMCLK/M. If the host processor fails to write a new value to\nthe serial port, the existing (previous) data is read again. Thedata stream is ﬁltered by the anti-imaging interpolation ﬁlter,\nbut there is an option to bypass the interpolator for the mini-\nmum group delay con ﬁguration by setting the IBYP bit (CRE:5) of\nControl Register E. The interpolation ﬁlter has the same charac-\nteristics as the ADC ’s antialiasing decimation ﬁlter.\nREV. AAD73311L\n–11–The output of the interpolation ﬁlter is fed to the DAC ’s digital\nsigma-delta modulator, which converts the 16-bit data to 1-bitsamples at a rate of DMCLK/8. The modulator noise- shapes\nthe signal so that errors inherent to the process are minimized\nin the passband of the converter. The bitstream output of thesigma-delta modulator is fed to the single bit DAC where it is\nconverted to an analog voltage.\nAnalog Smoothing Filter and PGA\nThe output of the single-bit DAC is sampled at DMCLK/8,\ntherefore it is necessary to ﬁlter the output to reconstruct the\nlow frequency signal. The decoder ’s analog smoothing ﬁlter\nconsists of a continuous-time ﬁlter preceded by a third-order\nswitched-capacitor ﬁlter. The continuous-time ﬁlter forms part\nof the output programmable gain ampli ﬁer (PGA). The PGA\ncan be used to adjust the output signal level from –15 dB to\n+6 dB in 3 dB steps, as shown in Table IV. The PGA gain is\nset by bits OGS0, OGS1 and OGS2 (CRD:4-6) in Control\nRegister D.\nTable IV. PGA Settings for the Decoder Channel\nOGS2 OGS1 OGS0 Gain (dB)\n00 0 + 6\n00 1 + 3\n01 0 001 1 –3\n10 0 –6\n10 1 –9\n11 0 –12\n11 1 –15\nDifferential Output Ampliﬁers\nThe decoder has a differential analog output pair (VOUTP and\nVOUTN). The output channel can be muted by setting theMUTE bit (CRD:7) in Control Register D. The output signal\nis dc-biased to the codec ’s on-chip voltage reference.\nVoltage Reference\nThe AD73311L reference, REFCAP, is a bandgap reference\nthat provides a low noise, temperature-compensated reference\nto the DAC and ADC. A buffered version of the reference is\nalso made available on the REFOUT pin and can be used tobias other external analog circuitry. The reference has a default\nnominal value of 1.2 V.\nThe reference output (REFOUT) can be enabled for biasing\nexternal circuitry by setting the RU bit (CRC:6) of CRC.\nSerial Port (SPORT)\nThe codec communicates with a host processor via the bidirec-\ntional synchronous serial port (SPORT) which is compatible\nwith most modern DSPs. The SPORT is used to transmit andreceive digital data and control information.\nIn both transmit and receive modes, data is transferred at the\nserial clock (SCLK) rate with the MSB be ing transferred ﬁrst.\nDue to the fact that the SPORT uses a common serial register forserial input and ou tput, communications between an AD73311L\ncodec and a host processor (DSP engine) must always be initi-\nated by the codec itself. This ensures that there is no danger ofthe information being sent to the codec being corrupted by\nADC samples being output by the codec.SPORT Overview\nThe AD73311L SPORT is a flexible, full-duplex, synchronous\nserial port whose protocol has been designed to allow up to eightAD73311L devices to be connected, in cascade, to a single DSP\nvia a six-wire interface. It has a very flexible architecture that can\nbe con ﬁgured by programming two of the internal control regis-\nters. The AD73311L SPORT has three distinct modes of opera-\ntion: Control M ode, Data Mode and Mixed Control/Data Mode.\nIn Control Mode (CRA:0 = 0), the device ’s internal con ﬁgura-\ntion can be programmed by writing to the ﬁve internal control\nregisters. In this mode, control information can be written to or\nread from the codec. In Data Mode (CRA:0 = 1), information\nthat is sent to the device is used to update the decoder section(DAC), while the encoder section (ADC) data is read from the\ndevice. In this mode, only DAC and ADC data is written to or\nread from the device. Mixed mode (CRA:0 = 1 and CRA:1 = 1)allows the user to choose whether the information being sent to\nthe device contains either control information or DAC data.\nThis is achieved by using the MSB of the 16-bit frame as a flagbit. Mixed mode reduces the resolution to 15 bits with the MSB\nbeing used to indicate whether the information in the 16-bit\nframe is control information or DAC/ADC data.\nThe SPORT features a single 16-bit serial register that is used\nfor both input and output data transfers. As the input and out-\nput data must share the same register there are some precautions\nthat must be observed. The primary precaution is that no infor-mation must be written to the SPORT without reference to an\noutput sample event, which is when the serial register will be\noverwritten with the latest ADC sample word. Once the SPORTstarts to output the latest ADC word then it is safe for the DSP\nto write new control or data words to the codec. In certain con-\nﬁgurations, data can be written to the device to coincide with\nthe output sample being shifted out of the serial register —see\nsection on interfacing devices. The serial clock rate (CRB:2 –3)\ndeﬁnes how many 16-bit words can be written to a device before\nthe next output sample event will happen.\nThe SPORT block diagram, shown in Figure 9, details the six\ncontrol registers (A –F), external MCLK to internal DMCLK\ndivider and serial clock divider. The divider rates are controlledby the setting of Control Register B. The AD73311L features a\nmaster clock divider that allows users the flexibility of dividing\nexternally available high frequency DSP or CPU clocks to gener-ate a lower frequency master clock internally in the codec which\nmay be more suitable for either serial transfer or sampling rate\nrequirements. The master clock divider has ﬁve divider options\n(÷1 default condition, ÷2, ÷3, ÷4, ÷5) that are set by loading\nthe master clock divider ﬁeld in Register B with the a ppropriate\ncode. Once the internal device master clock (DMCLK) hasbeen set using the master clock divider, the sample rate and\nserial clock settings are derived from DMCLK.\nThe SPORT can work at four different serial clock (SCLK) rates:\nchosen from DMCLK, D MCLK/2, DMCLK/4 or DMCLK/8,\nwhere DMCLK is the internal or device master clock resulting\nfrom the external or pin master clock being divided by the\nmaster clock divider. When working at the lower SCLK rate ofDMCLK/8, which is intended for interfacing with s lower DSPs,\nthe SPORT will support a maximum of two devices in cascade\nwith the sample rate of DMCLK/256.\nREV. AAD73311L\n–12–SPORT Register Maps\nThere are two register banks for the AD73311L: the control\nregister bank and the data register bank. The control registerbank consists of six read/write registers, each eight bits wide.\nTable IX shows the control register map for the AD73311L.\nThe ﬁrst two control registers, CRA and CRB, are reserved for\ncontrolling the SPORT. They hold settings for parameters such\nas bit rate, internal master clock rate and device count (used\nwhen more than one AD73311L is connected in cascade froma single SPORT). The other three registers; CRC, CRD and\nCRE are used to hold control settings for the ADC, DAC,\nReference and Power Control sections of the device. Control\nregisters are w ritten to on the negative edge of SCLK. The\ndata register bank consists of two 16-bit registers that are the\nDAC and ADC registers.\nMaster Clock Divider\nThe AD73311L features a programmable master clock divider\nthat allows the user to reduce an externally available master\nclock, at pin MCLK, by one of the ratios 1, 2, 3, 4 or 5 toproduce an internal master clock signal (DMCLK) that is used\nto calculate the sampling and serial clock rates. The master\nclock divider is programmable by setting CRB:4-6. Table V showsthe division ratio corresponding to the various bit settings. The\ndefault divider ratio is divide-by-one.\nTable V. DMCLK (Internal) Rate Divider Settings\nMCD2 MCD1 MCD0 DMCLK Rate\n0 0 0 MCLK\n0 0 1 MCLK/2\n0 1 0 MCLK/3\n0 1 1 MCLK/41 0 0 MCLK/5\n1 0 1 MCLK\n1 1 0 MCLK\n1 1 1 MCLK\nSerial Clock Rate Divider\nThe AD73311L features a programmable serial clock divider thatallows users to match the serial clock (SCLK) rate of the data to\nthat of the DSP engine or host processor. The maximum SCLK\nrate available is DMCLK and the other available rates are:DMCLK/2, DMCLK/4 and DMCLK/8. The slowest rate\n(DMCLK/8) is the default SCLK rate. The serial clock dividerFigure 9. SPORT Block Diagram\nis programmable by setting bits CRB:2 –3. Table VI shows the\nserial clock rate corresponding to the various bit settings.\nTable VI. SCLK Rate Divider Settings\nSCD1 SCD0 SCLK Rate\n0 0 DMCLK/8\n0 1 DMCLK/4\n1 0 DMCLK/2\n1 1 DMCLK\nSample Rate Divider\nThe AD73311L features a programmable sample rate dividerthat allows users flexibility in matching the codec ’s ADC and\nDAC sample rates to the needs of the DSP software. The maxi-\nmum sample rate available is DMCLK/256 which offers the\nlowest conversion group delay, while the other available rates\nare: DMCLK/512, DMCLK/1024 and DMCLK/2048. The\nslowest rate (DMCLK/2048) is the default sample rate. Thesample rate divider is programmable by setting bits CRB:0-1.\nTable VII shows the sample rate corresponding to the various\nbit settings.\nTable VII. Sample Rate Divider Settings\nDIR1 DIR0 SCLK Rate\n0 0 DMCLK/2048\n0 1 DMCLK/1024\n1 0 DMCLK/512\n1 1 DMCLK/256\nDAC Advance Register\nThe loading of the DAC is internally synchronized with theunloading of the ADC data in each sampling interval. Thedefault DAC load event happens one SCLK cycle before the\nSDOFS flag is raised by the ADC data being ready. However,\nthis DAC load position can be advanced before this time bymodifying the contents of the DAC Advance ﬁeld in Control\nRegister E (CRE:0 –4). The ﬁeld is ﬁve bits wide, allowing 31\nincrements of weight 1/(DMCLK/8); see Table VIII. In certaincircumstances this can reduce the group delay when the ADC\nand DAC are used to process data in series. Appendix E details\nhow the DAC advance feature can be used.\nNOTE: The DAC advance register should be changed before\nthe DAC section is powered up.SERIAL PORT\n(SPORT)\nSERIAL REGISTERSCLK\nDIVIDERMCLK\nDIVIDER\nCONTROL\nREGISTER BCONTROL\nREGISTER ACONTROL\nREGISTER CCONTROL\nREGISTER DCONTROL\nREGISTER EMCLK(EXTERNAL)\nSE\nRESET\nSDIFS\nSDIDMCLK\n(INTERNAL)\n3\n8\n88\n882SCLK\nSDOFS\nSDO\nSERIAL REGISTER\nCONTROL\nREGISTER F8\nREV. AAD73311L\n–13–Table X. Control Word Description\n1 5 1 4 1 3 1 2 1 1 1 0 9876543210\nC/D R/W Device Address Register Address Register Data\nControl Frame Description\nBit 15 Control/ Data When set high, it signi ﬁes a control word in Program or Mixed Program/Data Modes. When\nset low, it signi ﬁes a data word in Mixed Program/Data Mode or an invalid control word in\nProgram Mode.\nBit 14 Read/ Write When set low, it tells the device that the data ﬁeld is to be written to the register selected by\nthe register ﬁeld setting provided the address ﬁeld is zero. When set high, it tells the device\nthat the selected register is to be written to the data ﬁeld in the input serial register and that\nthe new control word is to be output from the device via the serial output.\nBits 13 –11 Device Address This 3-bit ﬁeld holds the address information. Only when this ﬁeld is zero is a device selected.\nIf the address is not zero, it is decremented and the control word is passed out of the devicevia the serial output.\nBits 10 –8 Register Address This 3-bit ﬁeld is used to select one of the ﬁve control registers on the AD73311L.\nBits 7 –0 Register Data This 8-bit ﬁeld holds the data that is to be written to or read from the selected register p rovided\nthe address ﬁeld is zero.Table IX. Control Register Map\nAddress (Binary) Name Description Type Width Reset Setting (Hex)\n000 CRA Control Register A R/ W 8 0x00\n001 CRB Control Register B R/ W 8 0x00\n010 CRC Control Register C R/ W 8 0x00\n011 CRD Control Register D R/ W 8 0x00\n100 CRE Control Register E R/ W 8 0x00\n101 CRF Control Register F R/ W 8 0x00\n110 to 111 ReservedTable VIII. DAC Timing Control\nDA4 DA3 DA2 DA1 DA0 Time Advance *\n000000  n s\n00001 488.2 ns\n00010 976.5 ns\n——————11110 14.64 µs\n11111 15.13 µs\n*DMCLK = 16.384 MHz.\nOPERATION\nResetting the AD73311L\nThe pin RESET  resets all the control registers. All registers are\nreset to z ero indicating that the default SCLK rate (DMCLK/8)\nand sample rate (DMCLK/2048) are at a minimum to ensure\nthat slow speed DSP engines can communicate effectively. As\nwell as resetting the control registers using the RESET  pin, the\ndevice can be reset using the RESET  bit (CRA:7) in  C ontrol\nRegister A. Both hardware and software resets require 4 DMCLK\ncycles. On reset, DATA/ PGM  (CRA:0) is set to 0 (default condi-\ntion) thus enabling Program Mode. The reset conditions ensurethat the device must be programmed to the correct settings after\npower-up or reset. Fo llowing a reset, the SDOFS will be asserted\n2048 DMCLK cycles after RESET  going high. The data that\nis output following RESET  and during Program Mode is ran-\ndom and contains no valid information until either Data or\nMixed Mode is set.\nPower Management\nThe individual functional blocks of the AD73311L can be\nenabled separately by programming the power control register\nCRC. It allows certain sections to be powered down if not\nrequired, which adds to the device ’s flexibility in that the user\nneed not incur the penalty of having to provide power for a\ncertain section if it is not necessary to their design. The power\ncontrol register provides individual control settings for the majorfunctional blocks and also a global override that allows all sec-\ntions to be powered up by setting the bit. Using this method the\nuser could, for example, individually enable a certain section,\nsuch as the reference (CRC:5), and disable all others. The glo-\nbal power-up (CRC:0) can be used to enable all sections but if\npower-down is required using the global control, the referencewill still be enabled, in this case, because its individual bit is set.\nRefer to Table XIII for details of the settings of CRC.\nREV. AAD73311L\n–14–Table XI. Control Register A Description\nCONTROL REGISTER A\n7654321 0\nRESET DC2 DC1 DC0 SLB DLB MM DATA/ PGM\nBit Name Description\n0 DATA/ PGM Operating Mode (0 = Program; 1 = Data Mode)\n1 MM Mixed Mode (0 = Off; 1 = Enabled)\n2 DLB Digital Loop-Back Mode (0 = Off; 1 = Enabled)\n3 SLB SPORT Loop-Back Mode (0 = Off; 1 = Enabled)4 DC0 Device Count (Bit 0)\n5 DC1 Device Count (Bit 1)\n6 DC2 Device Count (Bit 2)\n7 RESET Software Reset (0 = Off; 1 = Initiates Reset)\nTable XII. Control Register B Description\nCONTROL REGISTER B\n76543210\nCEE MCD2 MCD1 MCD0 SCD1 SCD0 DIR1 DIR0\nBit Name Description\n0 DIR0 Decimation/Interpolation Rate (Bit 0)\n1 DIR1 Decimation/Interpolation Rate (Bit 1)\n2 SCD0 Serial Clock Divider (Bit 0)3 SCD1 Serial Clock Divider (Bit 1)\n4 MCD0 Master Clock Divider (Bit 0)\n5 MCD1 Master Clock Divider (Bit 1)6 MCD2 Master Clock Divider (Bit 2)\n7 CEE Control Echo Enable (0 = Off; 1 = Enabled)\nTable XIII. Control Register C Description\nCONTROL REGISTER C\n76543 2 1 0\n– RU PUREF PUDAC PUADC –– PU\nBit Name Description\n0 PU Power-Up Device (0 = Power Down; 1 = Power On)\n1 Reserved Must Be Programmed to Zero (0)\n2 Reserved Must Be Programmed to Zero (0)\n3 PUADC ADC Power (0 = Power Down; 1 = Power On)4 PUDAC DAC Power (0 = Power Down; 1 = Power On)\n5 PUREF REF Power (0 = Power Down; 1 = Power On)\n6 RU REFOUT Use (0 = Disable REFOUT; 1 = Enable\nREFOUT)\n7 Reserved Must Be Programmed to Zero (0)\nREV. AAD73311L\n–15–Table XIV. Control Register D Description\nCONTROL REGISTER D\n76543210\nMUTE OGS2 OGS1 OGS0 RMOD IGS2 IGS1 IGS0\nBit Name Description\n0 IGS0 Input Gain Select (Bit 0)\n1 IGS1 Input Gain Select (Bit 1)\n2 IGS2 Input Gain Select (Bit 2)\n3 RMOD Reset ADC Modulator (0 = Off; 1 = Reset Enabled)4 OGS0 Output Gain Select (Bit 0)\n5 OGS1 Output Gain Select (Bit 1)\n6 OGS2 Output Gain Select (Bit 2)\n7 MUTE Output Mute (0 = Mute Off; 1 = Mute Enabled)\nTable XV. Control Register E Description\nCONTROL REGISTER E\n76543210\n–– IBYP DA4 DA3 DA2 DA1 DA0\nBit Name Description\n0 DA0 DAC Advance Setting (Bit 0)\n1 DA1 DAC Advance Setting (Bit 1)2 DA2 DAC Advance Setting (Bit 2)\n3 DA3 DAC Advance Setting (Bit 3)\n4 DA4 DAC Advance Setting (Bit 4)5 IBYP Interpolator Bypass (0 = Bypass Disabled;\n1 = Bypass Enabled)\n6 Reserved Must Be Programmed to Zero (0)\n7 Reserved Must Be Programmed to Zero (0)\nTable XVI. Control Register F Description\nCONTROL REGISTER F\n76543210\nALB INV SEEN –––––\nBit Name Description\n0 Reserved Must Be Programmed to Zero (0)\n1 Reserved Must Be Programmed to Zero (0)\n2 Reserved Must Be Programmed to Zero (0)3 Reserved Must Be Programmed to Zero (0)\n4 Reserved Must Be Programmed to Zero (0)\n5 SEEN Single-Ended Enable (0 = Disabled; 1 = Enabled)6 INV Input Invert (0 = Disabled; 1 = Enabled)\n7 ALB Analog Loopback of Output to Input (0 = Disabled; 1 = Enabled)\nREV. AAD73311L\n–16–Operating Modes\nThere are ﬁve operating modes available on the AD73311L.\nTwo of these —Digital Loop-Back and Sport Loop-Back —are\nprovided as diagnostic modes with the other three, Program,\nData and Mixed Program/Data, being available for generalpurpose use. The device con ﬁguration —register settings —can\nbe changed only in Program and Mixed Program/Data Modes.\nIn all modes, transfers of information to or from the deviceoccur in 16-bit packets, therefore the DSP engine ’s SPORT will\nbe programmed for 16-bit transfers.\nProgram (Control) Mode\nIn Program Mode, CRA:0 = 0, the user writes to the control\nregisters to set up the device for desired operation —SPORT\noperation, cascade length, power management, input/output\ngain, etc. In this mode, the 16-bit information packet sent to thedevice by the DSP engine is interpreted as a control word whose\nformat is shown in Table X. In this mode, the user must address\nthe device to be programmed using the address ﬁeld of the control\nword. This ﬁeld is read by the device and if it is zero (000 bin)\nthen the device recognizes the word as being addressed to it. If the\naddress ﬁeld is not zero, it is then decremented and the control\nword is passed out of the device —either to the next device in a\ncascade or back to the DSP engine. This 3-bit address format\nallows the u ser to uniquely address any one of up to eight devices\nin a cascade; please note that this addressing scheme is valid only\nin sending control information to the device —a different format\nis used to send DAC data to the device(s). In a single codecconﬁguration, all control word add resses must be zero, other-\nwise they will not be recognized; in a multi-codec con ﬁguration\nall addresses from zero to N-1 (where N = number of devices in\ncascade) are valid.\nFollowing reset, when the SE pin is enabled, the codec responds\nby raising the SDOFS pin to indicate that an output sample\nevent has occurred. Control words can be written to the device tocoincide with the data being sent out of the SPORT, as shown in\nFigure 10, or they can lag the output words by a time interval\nthat should not exceed the sample interval. After reset, outputframe sync pulses will occur at a slower default sample rate, which\nis DMCLK /2048, until Control Register B is programmed after\nwhich the SDOFS pulses will occur at a rate set by the DIR0-1 bitsof CRB. This is to allow slow controller devices to establish\ncommunication with the AD73311L. During Prog ram Mode,\nthe data output by the device is random and should not be inter-\npreted as ADC data.\nData Mode\nOnce the device has been con ﬁgured by programming the cor-\nrect settings to the various control registers, the device may exitProgram Mode and enter Data Mode. This is done by program-\nming the DATA/ PGM  (CRA:0) bit to a 1 and MM (CRA:1) to\n0. Once the device is in Data Mode, the 16-bit input data frameis now interpreted as DAC data rather than a control frame. This\ndata is therefore loaded directly to the DAC register. In Data\nMode, as the entire input data frame contains DAC data, thedevice relies on counting the number of input frame syncsreceived at the SDIFS pin. When that number equals the device\ncount stored in the device count ﬁeld of CRA, the device knows\nthat the present data frame being received is its own DAC update\ndata. When the device is in normal Data Mode (i.e., mixedmode disabled), it must receive a hardware reset to reprogram\nany of the control register settings. In a single codec con ﬁgura-\ntion, each 16-bit data frame sent from the DSP to the device isinterpreted as DAC data. The default device count is 1, therefore\neach input frame sync will cause the 16-bit data frame to be\nloaded to the DAC register.\nMixed Program/Data Mode\nThis mode allows the user to send control words to the device\nalong with the DAC data. This permits adaptive control of the\ndevice whereby control of the input/output gains can be effectedby interleaving control words along with the normal flow of\nDAC data. The standard data frame remains 16 bits, but now\nthe MSB is used as a flag bit to indicate whether the remaining15 bits of the frame represent DAC data or control information.\nIn the case of DAC data, the 15 bits are loaded with MSB justi-\nﬁcation and LSB set to 0 to the DAC register. Mixed mode is\nenabled by setting the MM bit (CRA:1) to 1 and the DATA/ PGM\nbit (CRA:0) to 1. In the case where control setting changes will\nbe required during normal operation, this mode allows theability to load both control and data information with the slight\ninconvenience of formatting the data. Note that the output\nsamples from the ADC will also have the MSB set to zero toindicate it is a data word.\nDigital Loop-Back\nThis mode can be used for diagnostic purposes and allows the\nuser to feed the ADC samples from the ADC register directly tothe DAC register. This forms a loop-back of the analog input to\nthe analog output by reconstructing the encoded s ignal using\nthe decoder channel. The serial interface will continue to work,which allows the user to control gain settings, etc. O nly when\nDLB is enabled with Mixed Mode operation can the user dis able\nthe DLB, otherwise the device must be reset.\nSport Loop-Back\nThis mode allows the user to verify the DSP inte rfacing and\nconnection by writing words to the SPORT of the device and\nhave them returned back unchanged at the next sample interval.The frame s ync and data word that are sent to the device are\nreturned via the output port. Again, SLB mode can only be\ndisabled when used in conjunction with mixed mode, otherwisethe device must be reset.\nAnalog Loop-Back\nIn Analog L oop-Back mode, the differential DAC output is\nconnected, via a loop-back switch, to the ADC input (see Figure\n12). This mode allows the ADC channel to check functionality\nof the DAC channel as the reconstructed output signal can be\nmonitored using the ADC as a sampler. Analog Loop-Back isenabled by setting the ALB bit (CRF:7).\nREV. AAD73311L\n–17–SE\nSDOFS\nSAMPLE WORD (DEVICE 1) SAMPLE WORD (DEVICE 1) SDOSCLK\nSDIFS\nSDI DATA (CONTROL) WORD (DEVICE 1) DATA (CONTROL) WORD (DEVICE 1)\nFigure 10. Interface Signal Timing for Single Device Operation\nSAMPLE WORD (DEVICE 2) SAMPLE WORD (DEVICE 1)\nSAMPLE WORD (DEVICE 1) DATA (CONTROL) WORD (DEVICE 2)\nDATA (CONTROL) WORD (DEVICE 2) DATA (CONTROL) WORD (DEVICE 1)\nSE\nSDOFS(2)\nSDO(2)SCLK\nSDOFS(1)\nSDIFS(2)\nSDO(1)\nSDI(2)\nSDIFS(1)\nSDI(1)\nFigure 11. Interface Signal Timing for Cascade of Two Devices\nREV. AAD73311L\n–18–ANALOG\nLOOP-BACK\nSELECT INVERTSINGLE-\nENDED\nENABLE\n+6/–15dB\nPGACONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFCAPREFOUTREFERENCE0/38dB\nPGA\nVREFVINNVINP\nAD73311LVOUTP\nVOUTN\nFigure 12. Analog Loop-Back Connectivity\nINTERFACING\nThe AD73311L can be interfaced to most modern DSP engines\nusing conventional serial port connections and an extra enable\ncontrol line. Both serial input and output data use an accompa-nying frame synchronization signal which is active high one\nclock cycle before the start of the 16-bit word or during the last\nbit of the previous word if transmission is continuous. The serialclock (SCLK) is an output from the codec and is used to de ﬁne\nthe serial transfer rate to the DSP ’s Tx and Rx ports. Two primary\nconﬁgurations can be used: the ﬁrst is shown in Figure 13, where\nthe DSP ’s Tx data, Tx frame sync, Rx data and Rx frame sync\nare connected to the codec ’s SDI, SDIFS, SDO and SDOFS,\nrespectively. This con ﬁguration, referred to as indirectly coupled\nor nonframe sync loop-back, has the effect of decoupling the\ntransmission of input data from the receipt of output data. The\ndelay between receipt of codec output data and transmission ofinput data for the codec is determined by the DSP ’s software\nlatency. When programming the DSP serial port for this con-\nﬁguration, it is necessary to set the Rx F\nS as an input and the Tx\nFS as an output generated by the DSP. This con ﬁguration is\nmost useful when operating in mixed mode, as the DSP has the\nability to decide how many words (either DAC or control) can be\nsent to the codec(s). This means that full control can be imple-\nmented over the device con ﬁguration as well as updating the\nDAC in a given sample interval. The second con ﬁguration\n(shown in Figure 14) has the DSP ’s Tx data and Rx data con-\nnected to the codec ’s SDI and SDO, respectively while the\nDSP ’s Tx and Rx frame syncs are connected to the codec ’s\nSDIFS and SDOFS. In this con ﬁguration, referred to as directly\ncoupled or frame sync loop-back, the frame sync signals are\nconnected together and the input data to the codec is forced tobe synchronous with the output data from the codec. The DSP\nmust be programmed so that both the Tx F\nS and Rx F S areinputs as the codec SDOFS will be input to both. This con ﬁgura-\ntion guarantees that input and output events occur simultaneouslyand is the simplest con ﬁguration for operation in normal Data\nMode. Note that when programming the DSP in this con ﬁgura-\ntion it is advisable to preload the Tx register with the ﬁrst control\nword to be sent before the codec is taken out of reset. This\nensures that this word will be transmitted to coincide with the\nﬁrst output word from the device(s).\nSDIFS\nSDI\nSCLK\nSDO\nSDOFSTFS\nDT\nSCLK\nDR\nRFSADSP-218x\nDSPAD73311L\nCODEC\nFigure 13. Indirectly Coupled or Nonframe Sync Loop-\nBack Conﬁguration\nCascade Operation\nThe AD73311L has been designed to support up to eight codecs\nin a cascade connected to a single serial port (see Figure 37).The SPORT interface protocol has been designed so that device\naddressing is built into the packet of information sent to the device.\nThis allows the cascade to be formed with no extra hardwareoverhead for control signals or addressing. A cascade can be\nformed in either of the two modes previously discussed.\nThere may be some restrictions in cascade operation due to the\nnumber of devices con ﬁgured in the cascade and the serial clock\nrate chosen. Table XVII details the requirements for SCLK rate\nfor cascade lengths from 1 to 8 devices. This assumes a directly\ncoupled frame sync arrangement as shown in Figure 13.\nTable XVII. Cascade Options\n        Number of Devices in Cascade\nS C L K 12345678\nDMCLK \x13\x13\x13\x13\x13\x13\x13\x13\nDMCLK/2 \x13\x13\x13\x13\x13\x13\x13\x13\nDMCLK/4 \x13\x13\x13\x13 XXXX\nDMCLK/8 \x13\x13 XXXXXX\nSDIFS\nSDI\nSCLK\nSDO\nSDOFSTFS\nDT\nSCLK\nDR\nRFSADSP-218x\nDSPAD73311L\nCODEC\nFigure 14.  Directly Coupled or Frame Sync Loop-\nBack Conﬁguration\nREV. AAD73311L\n–19–When using the indirectly coupled frame sync con ﬁguration in\ncascaded operation it is necessary to be aware of the restrictionsin sending data to all devices in the cascade. Effectively the time\nallowed is given by the sampling interval (256/DMCLK) which\nis 15.625 µs for a sample rate of 64 kHz. In this interval, the\nDSP must transfer N ×16 bits of information where N is the\nnumber of devices in the cascade. Each bit will take 1/SCLK\nand, allowing for any latency between the receipt of the Rxinterrupt and the transmission of the Tx data, the relationship\nfor successful operation is given by:\n256/DMCLK > ((N × 16/SCLK ) + T\nINTERRUPT LATENCY )\nThe interrupt latency will include the time between the ADC\nsampling event and the Rx interrupt being generated in theDSP —this should be 16 SCLK cycles.\nIn Cascade Mode, each device must know the number of devices\nin the cascade because the Data and Mixed modes use a method\nof counting input frame sync pulses to decide when they shouldupdate the DAC register from the serial input register. Control\nRegister A c ontains a 3-bit ﬁeld (DC0 –2) that is programmed\nby the DSP during the programming phase. The default condi-\ntion is that the ﬁeld contains 000b, which is equivalent to a\nsingle device in cascade (see Table XVIII). However, for cascade\noperation this ﬁeld must contain a binary value that is one less\nthan the number of devices in the cascade.\nTable XVIII. Device Count Settings\nDC2 DC1 DC0 Cascade Length\n000 1\n001 2\n010 3011 4\n100 5\n101 6110 7\n111 8\nPERFORMANCE\nAs the AD73311L is designed to provide high performance, low\ncost conversion, it is important to understand the means by\nwhich this high performance can be achieved in a typical applica-\ntion. T his section will, by means of spectral graphs, outline the\ntypical performance of the device and highlight some of the\noptions available to users in achieving their desired samplerate, either directly in the device or by doing some post-processing\nin the DSP, while also showing the advantages and disadvan-\ntages of the different approaches.\nEncoder Section\nThe AD73311L offers a variable sampling rate from a ﬁxed\nMCLK frequency —with 64 kHz, 32 kHz, 16 kHz and 8 kHz\nbeing available with a 16.384 MHz external clock. Each of thesesampling rates preserves the same sampling rate in the ADC ’s\nsigma-delta modulator, w hich ensures that the noise performance\nis optimized in each case. The examples below will show theperformance of a 1 kHz sine wave when converted at the various\nsample rates.The range of sampling rates is aimed to offer the user a degree\nof flexibility in deciding how their analog front end is to be\nimplemented. The high sample rates of 64 kHz and 32 kHz aresuited to those applications, such as active control, where low\nconversion group delay is essential. On the other hand, the\nlower sample rates of 16 kHz and 8 kHz are better suited forapplications such as telephony, where the lower sample rates\nresult in lower DSP overhead.\nFigure 15 shows the spectrum of the 1 kHz test tone sampled at\n64 kHz. The plot shows the characteristic shaped noise floor ofa sigma-delta converter, which is initially flat in the band of\ninterest but then rises with increas ing frequency. If a suitable\ndigital ﬁlter is applied to this spectrum, it is possible to eliminate\nthe noise floor in the higher frequencies. This signal can then be\nused in DSP algorithms or can be further processed in a deci-\nmation algorithm to reduce the effective sample rate. Figure 16shows the resulting spectrum following the ﬁltering and decima-\ntion of the spectrum of Figure 15 from 64 kHz to an 8 kHz rate.\nFREQUENCY – Hz0 0.50dB–20\n1.0 1.5 2.0 2.5 3.0 3.5–100\n–140–120–40\n–60\n–80\n/H11547 104\nFigure 15. FFT (ADC 64 kHz Sampling)\nFREQUENCY – Hz0 5000\n–20dB–40\n–60\n–80\n–100\n–120\n1000 1500 2000 2500 3000 3500 4000\nFigure 16. FFT (ADC 8 kHz Filtered and Decimated from\n64 kHz)\nREV. AAD73311L\n–20–The AD73311L also features direct sampling at the lower rate\nof 8 kHz. This is achieved by the use of extended decimation\nregisters within the decimator block, which allows for the in creased\nword growth associated with the higher effective oversam pling\nratio. Figure 17 details the spectrum of a 1 kHz test tone co nverted\nat an 8 kHz rate.\nFREQUENCY – Hz0 5000dB50\n100\n1000 1500 2000 2500 3000 3500 4000150\nFigure 17. FFT (ADC 8 kHz Direct Sampling)\nThe device features an on-chip master clock divider circuit that\nallows the sample rate to be reduced as the sampling rate of the\nsigma-delta converter is proportional to the output of the MCLK\nDivider (w hose default state is divide by 1).\nThe decimator ’s frequency response (Sinc3) gives some pass-\nband attenuation (up to F S/2) which continues to roll off above\nthe Nyquist frequency. If it is required to implement a digitalﬁlter to create a sharper cutoff characteristic, it may be prudent\nto use an initial sample rate of greater than twice the Nyquist\nrate in order to avoid aliasing due to the smooth roll-off of theSinc3 ﬁlter response.\nIn the case of voiceband processing where 4 kHz represents the\nNyquist frequency, if the signal to be measured were externally\nbandlimited, an 8 kHz sampling rate would suf ﬁce. However, if\nit is required to limit the bandwidth using a digital ﬁlter, it may\nbe more appropriate to use an initial sampling rate of 16 kHz\nand to process this sample stream with a ﬁltering and decimat-\ning algorithm to achieve a 4 kHz bandlimited signal at an 8 kHz\nrate. Figure 18 details the initial 16 kHz sampled tone.\nFREQUENCY – Hz0 10000\n–20dB–40\n–60\n–80\n–100\n–120\n2000 3000 4000 5000 6000 7000 8000–140\nFigure 18. FFT (ADC 16 kHz Direct Sampling)Figure 19 details the spectrum of the ﬁnal 8 kHz sampled\nﬁltered tone.\nFREQUENCY  Hz0 5000\n–20dB–40\n–60\n–80\n–100\n–120\n1000 1500 2000 2500 3000 3500 4000–140\nFigure 19. FFT (ADC 8 kHz Filtered and Decimated from\n16 kHz)\nEncoder Group Delay\nWhen programmed for high sampling rates, the AD73311L\noffers a very low level of group delay, which is given by thefollowing relationship:\nGroup Delay (Decimator ) = Order × ((M – 1 )/2) × T\nDEC\nwhere:\nOrder  is the order of the decimator (= 3),\nM is the decimation factor (= 32 @ 64 kHz, = 64 @ 32 kHz,\n= 128 @ 16 kHz , = 256 @ 8 kHz) and\nTDEC is the decimation sample interval (= 1/2.048e6) (based\non DMCLK = 16.384 MHz) => Group Delay (Decimator @64 kHz) = 3 × (32 – 1)/2 × (1/2.048e6) = 22.7 µs\nIf ﬁnal ﬁltering is implemented in the DSP, the ﬁnal ﬁlter’s\ngroup delay must be taken into account when calculating overall\ngroup delay.\nDecoder Section\nThe decoder section updates (samples) at the same rate as the\nencoder section. This rate is programmable as 64 kHz, 32 kHz,\n16 kHz or 8 kHz (from a 16.384 MHz MCLK). The decodersection represents a reverse of the process that was described in\nthe encoder section. In the case of the decoder section, signals\nare applied in the form of samples at an initial low rate. Thissample rate is then increased to the ﬁnal digital sigma-delta\nmodulator rate of DMCLK/8 by interpolating new samples\nbetween the original samples. The interpolating ﬁlter also has the\naction of canceling images due to the interpolation process using\nspectral nulls that exist at integer multiples of the initial sam-\npling rate. Figure 20 shows the spectral response of the decoder\nsection samp ling at 64 kHz. Again, its sigma-d elta modulator\nshapes the noise so it is reduced in the voice bandwidth dc –4k H z .\nFor improved voiceband SNR, the user can implement an initialanti-imaging ﬁlter, preceded by 8 kHz to 64 kHz interpolation,\nin the DSP.\nREV. AAD73311L\n–21–FREQUENCY – Hz0 0.50dB–20\n1.0 1.5 2.0 2.5 3.0 3.5–100–10\n–30\n–40\n–50\n–60\n–70\n–80\n–90\n/H11547 104\nFigure 20. FFT (DAC 64 kHz Sampling)\nAs the AD73311L can be operated at 8 kHz (see Figure 21) or\n16 kHz sampling rates, which make it particularly suited for\nvoiceband processing, it is important to understand the action ofthe interpolator ’s Sinc3 response. As was the case with the encoder\nsection, if the output signal ’s frequency response is not bounded\nby the Nyquist frequency it may be necessary to perform some\ninitial digital ﬁltering to eliminate signal energy above Nyquist to\nensure that it is not imaged at the integer multiples of the sampling\nfrequ ency. If the user chooses to bypass the inter polator, per-\nhaps to reduce group delay, images of the original signal will be\ngenerated at integer intervals of the sampling frequency. In this\ncase these images must be removed by external analog ﬁltering.\nFREQUENCY – Hz0 5000\n–10dB–20\n–30\n–40\n–50\n–60\n1000 1500 2000 2500 3000 3500 4000–70\n–80\n–90\n–100\nFigure 21. FFT (DAC 8 kHz Sampling)\nFigure 22 shows the output spectrum of a 1 kHz tone being\ngenerated at an 8 kHz sampling rate with the interpolator\nbypassed.FREQUENCY – Hz0 0.50dB–20\n1.0 1.5 2.0 2.5 3.0 3.5–100–10\n–30\n–40\n–50\n–60\n–70\n–80\n–90\n/H11547 104\nFigure 22. FFT (DAC 8 kHz Sampling—Interpolator\nBypassed)\nDecoder Group Delay\nThe interpolator roll-off is mainly due to its sinc-cubed function\ncharacteristic, which has an inherent group delay given by the\nequation:\nGroup Delay  (Interpolator ) = Order  × (L – 1)/2) × TINT\nwhere:\nOrder  is the interpolator order (= 3),\nL is the interpolation factor (= 32 @ 64 kHz, = 64 @ 32 kHz,\n= 128 @ 16 kHz, = 256 @ 8 kHz) and\nTINT is the interpolation sample interval (= 1/2.048e6)\n=> Group Delay (Interpolator @ 64 kHz)= 3 × (32 – 1)/2 × (1/2.048e6)\n= 22.7 µs\nThe analog section has a group delay of approximately 25 µs.\nOn-Chip Filtering\nThe primary function of the system ﬁltering ’s sinc-cubed (Sinc3)\nresponse is to eliminate aliases or images of the ADCs or DAC ’s\nresampling, respectively. Both modulators are sampled at a\nnominal rate of DMCLK/8 (which is 2.048 MHz for a DMCLK\nof 16.384 MHz) and the simple, external RC antialias ﬁlter is\nsufﬁcient to provide the required stopband rejection above the\nNyquist frequency for this sample rate. In the case of the ADC\nsection, the decimating ﬁlter is required to both decrease sample\nrate and increase sample resolution. The process of changing\nsample rate (resampling) leads to aliases of the original sampled\nwaveform appearing at integer multiples of the new sample rate.These aliases would get mapped into the required signal pass-\nband without the application of some further antialias ﬁltering.\nIn the AD73311L, the sinc-cubed response of the decimatingﬁlter cre ates spectral nulls at integer multiples of the new sample\nrate. These nulls coincide with the aliases of the original waveform\nwhich were created by the dow n-sampling process, therefore\nreducing or elim inating the aliasing due to sample rate reduction.\nREV. AAD73311L\n–22–FREQUENCY – Hz20\n–10007 1I/O CHANNEL GAIN\n234560\n–20\n–40\n–60\n–80\n/H11547 104\nFigure 23. Codec Uncompensated Input-to-Output\nFrequency Response (f SAMP = 64 kHz)\nIn the DAC section, increasing the sampling rate by interpola-\ntion creates images of the original waveform at intervals of theoriginal sampling frequency. These images may be suf ﬁciently\nrejected by external circuitry, but the sinc-cubed ﬁlter in the\ninterpolator again nulls the output spectrum at integer intervalsof the original sampling rate which corresponds with the images\ndue to the interpolation process.\nThe spectral response of a sinc-cubed ﬁlter shows the character-\nistic nulls at integer intervals of the sampling frequency. Itspassband characteristic (up to Nyquist frequency) features a\nroll-off that continues up to the sampling frequency, where the\nﬁrst null occurs. In many applications this smooth response will\nnot give suf ﬁcient attenuation of frequencies outside the band of\ninterest, therefore, it may be necessary to implement a ﬁnal ﬁlter\nin the DSP which will equalize the passband rolloff and providea sharper transition band and greater stopband attenuation.\nFREQUENCY – Hz20\n–10007 1I/O CHANNEL GAIN\n234560\n–20\n–40\n–60\n–80\n/H11547 104\nFigure 24. Codec Compensated Input-to-Output\nFrequency Response (f SAMP = 64 kHz)DESIGN CONSIDERATIONS\nThe AD73311L features both differential inputs and outputs on\neach channel to provide optimal performance and avoid common-\nmode noise. It is also possible to interface either inputs or outputs\nin single-ended mode. This section details the choice of inputand output con ﬁgurations and also gives some tips towards\nsuccessful con ﬁguration of the analog interface sections.\nCONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFOUT\nREFERENCEVREF\nREFCAP\n0.1/H9262F0/38dB\nPGA\n+6/–15dB\n     PGAVINP\nVINNANTIALIAS\nFILTER\n0.047/H9262F100/H9024\n0.047/H9262F\n100/H9024\nAD73311LVOUTP\nVOUTN\nFigure 25. Analog Input (DC-Coupled)\nAnalog Inputs\nThe analog input (encoder) section of the AD73311L can be\ninterfaced to external circuitry in either ac-coupled or dc-coupled\nmodes.\nIt is also possible to drive the ADCs in either differe ntial or\nsingle-ended modes. If the single-ended mode is chosen it is\npossible, using software control, to multiplex between two single-\nended inputs connected to the positive and negative input pins.\nThe primary c oncerns in interfacing to the ADC are ﬁrstly to\nprovide adequate antialias ﬁltering and to ensure that the signal\nsource will drive the switche d-capacitor input of the ADC cor-\nrectly. The sigma-delta design of the ADC and its oversamplingcharacteristics simplify the antialias requirements but it must be\nremembered that the single pole RC ﬁlter is primarily intended\nto eliminate aliasing of frequencies above the Nyquist f requency of\nthe sigm a-delta modulator ’s sampling rate (typically 2.048 MHz).\nIt may still require a more speci ﬁc digital ﬁlter implementa-\ntion in the DSP to provide the ﬁnal signal frequ ency response\ncharacteristics. It is recommended that for optimum performance\nthe capacitors used for the antialiasing ﬁlter be of high quality\ndielectric (NPO). The second issue mentioned above is interfacingthe signal source to the ADC ’s switched capacitor input load.\nThe SC input presents a complex dynamic load to a signal\nsource, therefore, it is important to understand that the slew\nrate characteristic is an important consideration when choosing\nexternal buffers for use with the AD73311L. The internal inverting\nop amps on the AD73311L are speci ﬁcally designed to interface\nto the ADC ’s SC input stage.\nThe AD73311L ’s on-chip 38 dB preampli ﬁer can be enabled\nwhen there is not enough gain in the input circuit; the preampli-\nﬁer is con ﬁgured by bits IGS0-2 of CRD. The total gain must be\nconﬁgured to ensure that a full-scale input signal produces a signal\nlevel at the input to the sigma-delta modulator of the ADC that\ndoes not exceed the maximum input range.\nREV. AAD73311L\n–23–The dc biasing of the analog input signal is accom plished with\nan on-chip voltage reference. If the input signal is not biased at\nthe inter nal reference level (via REFOUT), it must be ac-coupled\nwith external coupling capacitors. C IN should be 0.1 µF or larger.\nThe dc biasing of the input can then be accomplished usingresistors to REFOUT as in Figures 27 through 29.\nREFCAPREFOUT\nREFERENCE0/38dB\nPGA\nOPTIONAL\nBUFFER\n0.1/H9262FVREF\nAD73311LVINP\nVINN\nVOUTP\nVOUTN+6/15dB\n     PGACONTINUOUS\nTIME\nLOW-PASS\nFILTER\nFigure 26. Analog Input (DC-Coupled) Using External\nAmpliﬁers\nThe AD73311L ’s ADC inputs are biased about the internal\nreference level  (REFCAP level), therefore it may be neces-\nsary to bias external signals to this level using the bufferedREFOUT level as the reference. This is applicable in either dc-\nor ac-coupled con ﬁgurations. In the case of dc coupling, the signal\n(biased to REFOUT) may be applied directly to the inputs(using ampli ﬁer bypass), as shown in Figure 25, or it may be\nconditioned in an external op amp where it can also be biased\nto the reference level using the buffered REFOUT signal asshown in Figure 26.\nIn the case of ac-coupling, a capacitor is used to couple the\nsignal to the input of the ADC. The ADC input must be biased\nto the internal reference (REFCAP) level which is done byconnecting the input to the REFOUT pin through a 10 k Ω\nresistor as shown in Figure 27.\nCONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFOUT\nREFERENCEVREF\nREFCAP\n0.1/H9262F10k/H9024\nVOUTP\nVOUTNVINP\n0.047/H9262F100/H90240.1/H9262F\n10k/H9024VINN0.047/H9262F100/H90240.1/H9262F\n0/38dB\nPGA\nAD73311L+6/–15dB\n     PGA\nFigure 27. Analog Input (AC-Coupled) DifferentialIf the ADC is being connected in single-ended mode, the\nAD73311L should be programmed for single-ended mode using\nthe SEEN and INV bits of CRF, and the inputs con nected as\nshown in Figure 28. When ope rated in single-ended input mode,\nthe AD73311L can multiplex one of the two inputs to the ADCinput, as shown in Figures 28 and 29.\nCONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFOUT\nREFERENCE0/38dB\nPGA\nVREF\nREFCAP\n0.1/H9262FVINNVINP\n0.047\n/H9262F100/H90240.1/H9262F\nVOUTP\nVOUTN10k/H9024\nAD73311L+6/–15dB\n     PGA\nFigure 28. Analog Input (AC-Coupled) Single-Ended\nCONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFOUT\nREFERENCE0/38dB\nPGA\nVREF\nREFCAP\n0.1/H9262FVINNVINP\n0.047\n/H9262F100/H90240.1/H9262F\nVOUTP\nVOUTN10k/H9024\nAD73311L+6/15dB\n     PGA\nFigure 29. Analog Input (AC-Coupled) Single-Ended\n(Alternate Input)\nInterfacing to an Electret Microphone\nFigure 30 details an interface for an electret microphone which\nmay be used in some voice applications. Electret microphones\ntypically feature a FET ampli ﬁer whose output is accessed on\nthe same lead that supplies power to the microphone; therefore,\nthis output signal must be capacitively coupled to remove the\npower supply (dc) component. In this circuit the AD73311Linput channel is being used in single-ended mode w here the\ninternal inverting ampli ﬁer provides suitable gain to scale the\ninput signal relative to the ADC ’s full-scale input range. The\nbuffe red internal reference level at REFOUT is used via an\nexternal buffer to provide power to the el ectret microphone.\nThis provides a quiet, stable supply for the microphone. If thisis not a concern, the microphone can be powered from the\nsystem power supply.\nREV. AAD73311L\n–24–VINNVINP\nVOUTP\nVOUTNELECTRET\nMICROPHONE10/H9262FRA\nRB\nR1R25V\nC2C1\nAD73311LCONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFCAPREFOUT\nREFERENCEVREF0/38dB\nPGA\nCREFCAP+6/–15dB\n     PGA\nFigure 30. Electret Microphone Interface Circuit\nAnalog Output\nThe AD73311L ’s differential analog output (VOUT) is pro-\nduced by an on- chip differential ampli ﬁer. The differential\noutput can be ac-coupled or dc-coupled directly to a load that\ncan be a headset or the input of an external ampli ﬁer (the speci-\nﬁed minimum resistive load on the output section is 150 Ω). It\nis possible to connect the outputs in either a differential or a\nsingle-ended con ﬁguration but please note that the e ffective\nmaximum output voltage swing (peak to peak) is halved in thecase of single-ended connection. Figure 31 shows a simple cir cuit\nproviding a differential output with ac coupling. The capacitors\nin this circuit (C\nOUT) are optional; if used, their value can be\nchosen as follows:\n    CfROUT\nC LOAD=1\n2π\nwhere fC = desired cutoff frequency.\nCONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFCAPREFOUT\nREFERENCE\nCREFCAPCOUTRLOADCOUTVINNVINP\nVOUTP\nVOUTN\nAD73311L+6/–15dB\n     PGA\nFigure 31. Example Circuit for Differential OutputFigure 32 shows an example circuit for providing a single-ended\noutput with ac coupling. The capacitor of this circuit (C OUT) is\nnot optional if dc current drain is to be avoided.\nRLOADCOUT\nCONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFCAPREFOUT\nREFERENCE\nCREFCAPVINNVINP\nVOUTP\nVOUTN\nAD73311L+6/–15dB\n     PGA\nFigure 32. Example Circuit for Single-Ended Output\nDifferential-to-Single-Ended Output\nIn some appl ications it may be desirable to convert the full\ndifferential output of the decoder channel to a single-endedsignal. The circuit of Figure 33 shows a scheme for doing this.\nRLOADRI\nRIRF\nRFCONTINUOUS\nTIME\nLOW-PASS\nFILTER\nREFCAPREFOUT\nREFERENCE\nCREFCAPVINNVINP\nVOUTP\nVOUTN\nAD73311L+6/–15dB\n     PGA\nFigure 33. Example Circuit for Differential-to-Single-\nEnded Output Conversion\nDigital Interfacing\nThe AD73311L is designed to easily interface to most common\nDSPs. The SCLK, SDO, SDOFS, SDI and SDIFS must be\nconnec ted to the SCLK, DR, RFS, DT and TFS pins of the\nDSP respectively. The SE pin may be controlled from a parallel\noutput pin or flag pin such as FL0 –2 on the ADSP-218x (or XF\non the TMS320C5x) or, where SPORT power-down is notrequired, it can be permanently strapped high using a suitable\npull-up resistor. The RESET  pin may be connected to the system\nhardware reset structure or it may also be controlled using a\ndedicated control line. In the event of tying it to the global sys-\ntem reset, it is necessary to operate the device in mixed mode,\nwhich allows a sof tware reset, otherwise there is no conven ient\nway of resetting the device. Figures 34 and 35 show typical\nconnections to an ADSP-218x and TMS320C5x respectively.\nREV. AAD73311L\n–25–TFS\nDT\nSCLK\nDR\nRFSADSP-218x\nDSPSDIFS\nSDI\nSCLK\nSDO\nSDOFS\nFL0FL1RESET\nSEAD73311L\nCODEC\nFigure 34. AD73311L Connected to ADSP-218x\nFSX\nDT\nCLKX\nDR\nFSRTMS320C5x\nDSPSDIFS\nSDI\nSCLK\nSDO\nSDOFS\nXF RESET\nSECLKR AD73311L\nCODEC\nFigure 35. AD73311L Connected to TMS320C5x\nCascade Operation\nWhere it is required to con ﬁgure a cascade of up to eight\ndevices, it is necessary to ensure that the timing of the SE and\nRESET  signals are synchronized at each device in the cascade.\nA simple D-type flip-flop is suf ﬁcient to sync each signal to the\nmaster clock MCLK, as in Figure 36.\n1/2\n74HC74\nCLKDQDSP CONTROL\nTO SE\nMCLKSE SIGNAL SYNCHRONIZED\nTO MCLK\n1/2\n74HC74\nCLKDQDSP CONTROL\nTO RESET\nMCLKRESET  SIGNAL SYNCHRONIZED\nTO MCLK\nFigure 36. SE and RESET  Sync Circuit for Cascaded\nOperation\nConnection of a cascade of devices to a DSP, as shown in Fig-\nure 37, is no more complicated than connecting a single device.Instead of connecting the SDO and SDOFS to the DSP ’s Rx\nport, these are now daisy-chained to the SDI and SDIFS of the\nnext device in the cascade. The SDO and SDOFS of the ﬁnal\ndevice in the cascade are connected to the DSP ’s Rx port tocomplete the cascade. SE and RESET  on all devices are fed\nfrom the signals that were synchronized with the MCLK usingthe circuit as described above. The SCLK from only one device\nneed be connected to the DSP ’s SCLK input(s) as all devices\nwill be running at the same SCLK frequency and phase.\nTFS\nDT\nDR\nRFSSDIFS\nSDI\nSCLK\nSDO\nSDOFSSCLK\nDEVICE 1MCLK\nSE\nRESET\nSDIFS\nSDI\nSCLK\nSDO\nSDOFSDEVICE 2MCLK\nSE\nRESET\n74HC74Q1\nQ2D1\nD2FL0 FL1ADSP-218x\nDSPAD73311L\nCODEC\nAD73311L\nCODEC\nFigure 37. Connection of Two AD73311Ls Cascaded to\nADSP-218x\nGrounding and Layout\nSince the analog inputs to the AD73311L are differential, most\nof the volt ages in the analog modulator are common-mode\nvoltages. The excellent common-mode rejection of the part will\nremove common-mode noise on these inputs. The analog anddigital supplies of the AD73311L are ind ependent and separately\npinned out to minimize coupling betw een analog and digital\nsections of the device. The digital ﬁlters on the encoder section\nwill provide rejection of broadband noise on the power supplies,\nexcept at integer multiples of the modulator sampling frequency.\nThe digital ﬁlters also remove noise from the analog inputs\nprovided the noise source does not saturate the analog modula-\ntor. However, because the resolution of the AD73311 ’s ADC is\nhigh, and the noise levels from the AD73311L are so low, caremust be taken with regard to grounding and layout.\nThe printed circuit board that houses the AD73311L should be\ndesigned so the analog and digital sections are separated and\nconﬁned to certain sections of the board. The AD73311L pin\nconﬁguration offers a major advantage in that its analog and\ndigital interfaces are connected on opposite sides of the package.\nThis facilitates the use of ground planes that can be easily\nseparated, as shown in Figure 38. A minimum etch technique\nis generally best for ground planes as it gives the best shielding.\nDigital and analog ground planes should be joined in only oneplace.  If this connection is close to the device, it is recommended\nto use a ferrite bead inductor as shown in Figure 38.\nREV. AAD73311L\n–26–DIGITAL GROUND\nANALOG GROUND\nFigure 38. Ground Plane Layout\nAvoid running digital lines under the device for they will couple\nnoise onto the die. The analog ground plane should be allowed\nto run under the AD73311L to avoid noise coupling. The powersupply lines to the AD73311L should use as large a trace as\npossible to provide low impedance paths and reduce the effects\nof glitches on the power supply lines. Fast switching signals suchas clocks should be shielded with digital ground to avoid radiat-\ning noise to other sections of the board, and clock signals should\nnever be run near the analog inputs. Traces on opposite sides ofthe board should run at right angles to each other. This will\nreduce the effects of feedthrough through the board. A microstrip\ntechnique is by far the best but is not always possible with adouble-sided board. In this technique, the component side of\nthe board is dedicated to ground planes while signals are placed\non the other side.\nGood decoupling is important when using high speed devices.\nAll analog and digital supplies should be decoupled to AGND\nand DGND respectively, with 0.1 µF ceramic capacitors in\nparallel with 10 µF tantalum capacitors. To achieve the best\nfrom these decoupling capacitors, they should be placed as close\nas possible to the device, ideally right up against it. In systems\nwhere a common supply voltage is used to drive both the AVDDand DVDD of the AD73311, it is recommended that the system ’s\nAVDD supply be used. This supply should have the recom-\nmended analog supply decoupling between the AVDD pins ofthe AD73311L and AGND and the recommended digital sup-\nply decoupling capacitors between the DVDD pin and DGND.\nDSP Programming Considerations\nThis section discusses some aspects of how the serial port of the\nDSP should be con ﬁgured and the implications of whether Rx\nand Tx interrupts should be enabled.\nDSP SPORT Con ﬁguration\nFollowing are the key settings of the DSP SPORT required for\nthe successful operation with the AD73311L:\n•Conﬁgure for external SCLK.\n•Serial Word Length = 16 bits.\n•Transmit and Receive Frame Syncs required with every word.\n•Receive Frame Sync is an input to the DSP.\n•Transmit Frame Sync is an:\nInput —in Frame Sync Loop-Back Mode\nOutput —in Nonframe Sync Loop-Back Mode.\n•Frame Syncs occur one SCLK cycle before the MSB of the\n•serial word.\n•Frame Syncs are active high.\nDSP SPORT Interrupts\nIf SPORT interrupts are enabled, it is important to note that the\nactive signals on the frame sync pins do not necessarily corre-spond with the positions in time of where SPORT interrupts are\ngenerated.On ADSP-218x processors, it is necessary to enable SPORT\ninterrupts and use Interrupt Service Routines (ISRs) to handle\nTx/Rx activity, while on the TMS320C5x processors it is pos-sible to poll the status of the Rx and Tx registers, which means\nthat Rx/Tx activity can be monitored using a single ISR that\nwould ideally be the Tx ISR as the Tx interrupt will typicallyoccur before the Rx ISR.\nDSP SOFTWARE CONSIDERATIONS WHEN\nINTERFACING TO THE AD73311L\nIt is important when choosing the operating mode and hardware\nconﬁguration of the AD 73311L to be aware of their i mplications\nfor DSP software operation. The user has the flexibility of choosing\nfrom either FSLB or nonFSLB when deciding on DSP to AFE\nconnectivity. There is also a choice to be made between usingautobuffering of input and output samples or simply choosing to\naccept them as individual interrupts. As most modern DSP engines\nsupport these modes, this appendix will attempt to discuss thesetopics in a generic DSP sense.\nOperating Mode\nThe AD73311L supports two basic operating modes: Frame Sync\nLoop Back (FSLB) and nonFSLB (see Interfacing section). Asdescribed previously, FSLB has some limitations when used in\nMixed Mode but is very suitable for use with the autobuffering\nfeature that is offered on many modern DSPs. Autobufferingallows the user to specify the number of input or output words\n(samples) that are transferred before a speci ﬁc Tx or Rx SPORT\ninterrupt is generated. Given that the AD73311L outputs two\nsample words per sample period, it is possible u sing autobuffering\nto have the DSP ’s SPORT generate a single interrupt on receipt\nof the second of the two sample words. Additionally, both samplescould be stored in a data buffer within the data memory store.\nThis technique has the advantage of reducing the number of both\nTx and Rx SPORT interrupts to a single one at each sampleinterval. The user also knows where each sample is stored. The\nalternative is to handle a larger number of SPORT interrupts\n(twice as many in the case of a single AD73311L) while alsohaving some status flags to indicate where each new sample\ncomes from (or is destined for).\nMixed-Mode Operation\nTo take full advantage of Mixed-Mode operation, it is necessary\nto con ﬁgure the DSP/Codec interface in nonFSLB and to disable\nautobuffering. This allows a variable numbers of words to be sent\nto the AD73311L in each sample period —the extra words being\ncontrol words which are typically used to update gain settings in\nadaptive control applications. The recommended sequence for\nupdating control registers in mixed-mode is to send the controlword(s) ﬁrst before the DAC update word.\nIt is possible to use Mixed-Mode operation when con ﬁgured in\nFSLB, but it is necessary to replace the DAC update with a control\nword write in each sample period which may cause some discon-tinuity in the output signal due to a sample point being missed\nand the previous sample being repeated. This how ever may be\nacceptable in some cases as the effect may be masked by gain\nchanges, etc.\nREV. AAD73311L\n–27–Interrupts\nThe AD73311L transfers and receives information over the\nserial connection from the DSP ’s SPORT. This occurs following\nreset—during the initialization phase —and in both Data-Mode\nand Mixed-Mode. Each transfer of data to or from the DSP cancause a SPORT interrupt to occur. However, even in FSLB\nconﬁguration where serial transfers in and out of the DSP are\nsynch ronous, it is important to note that Tx and Rx interrupts do\nnot occur at the same time due to the way that Tx and Rx inter-\nrupts are generated internally within the DSP ’s SPORT. This is\nespecially important in time-critical control loop applications whereit may be necessary to use Rx interrupts only, as the relative\npositioning of the Tx interrupts relative to the Rx interrupts in a\nsingle sample interval are not suitable for quick update of newDAC positions.\nInitialization\nFollow ing res et, the AD73311L is in its default condition,\nwhich ensures that the device is in Control Mode and must be\nprogrammed or initialized from the DSP to start conversions. As\ncommunications between AD73311L and the DSP are interrupt\ndriven, it is usually not practical to embed the initialization codesinto the body of the initialization routine. It is more practical to\nput the sequence of initialization codes in a data (or program)\nmemory buffer and to access this buffer with a pointer that isupdated on each interrupt. If a circular buffer is used, it allows\nthe interrupt routine to check when the circular buffer pointer\nhas wrapped around —at which point the initialization sequence\nis complete.\nIn FSLB con ﬁgurations, a single control word per codec per\nsample period is sent to the AD73311L whereas in nonFSLB, it\nis possible to initialize the device in a single sample period providedthe SCLK rate is programmed to a high rate. It is also possible\nto use autobuffering, in which case an interrupt is generated when\nthe entire initialization sequence has been sent to the AD73311L.\nRunning the AD73311L with ADCs or DACs in Power-Down\nThe programm ability of the AD73311L allows the user flexibility\nin choosing which sections of the AD73311L need be powered\nup. This allows better matching of the power consumption to theapplication requirements as the AD73311L offers an ADC and\na DAC in any combination. The AD73311L always interfaces to\nthe DSP in a standard way regardless of  whether the ADC orDAC sections are enabled or disabled. Theref ore, the DSP will\nexpect to receive an ADC samples per sample period and to\ntransmit two DAC samples per sample period. If the ADC isdisabled (in power-down), its sample value will be invalid. Like-\nwise, a sample sent to a DAC that is disabled will have no effect.\nThere are two distinct phases of operation of the AD73311L:\ninitialization of the device via the control registers, and operation\nof the converter sections of each codec. The initialization phase\ninvolves programming the control registers of the AD73311L to\nensure the required oper ating characteristics such as sampling\nrate, serial clock rate, I/O gain, etc. There are several ways in\nwhich the DSP can be programmed to initialize the AD73311L.\nThese range from hard-coding a sequence of DSP SPORT Txregister writes with constants used for the initialization words, to\nputting the initialization sequence in a circular data b uffer and\nusing an autobuffered transmit sequence.Hard-coding involves creating a sequence of writes to the DSP ’s\nSPORT Tx buffer which are separated by loops or instructions\nthat idle and wait for the next Tx interrupt to occur as shown in\nthe code below.\nax0 = b#1000000100000100;\ntx0 = ax0;idle; {wait for tx register to send current word}\nThe circular buffer approach can be useful if a long initialization\nseque nce is required. The list of initialization w ords is put into\nthe buffer in the required order.\n.VAR/DM/RAM/CIRC init_cmds[8]; {Codec init sequence}\n.VAR/DM/RAM  stat_flag;\n.INIT init_cmds:\nb # 1 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 ,\nb # 1 0 0 0 0 0 1 0 1 1 1 1 1 0 0 1 ,b # 1 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 ,\nb # 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 ,\nb # 1 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 ,b # 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 ,\nb # 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0 0 ,\nb # 1 0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 ,\nand the DSP program initializes pointers to the top of the buffer\ni3 = ^init_cmds;                  l3 = %init_cmds;\nand puts the ﬁrst entry in the DSP ’s transmit buffer so it is\navailable at the ﬁrst SDOFS pulse.\nax0 = dm(i3,m1);\ntx0 = ax0;\nThe DSP ’s transmit interrupt is enabled.\nimask = b#0001000000;\nAt each occurrence of an SDOFS pulse, the DSP ’s transmit\nbuffer contents are sent to the SDI pin of the AD73311L. Thisalso causes a subsequent DSP Tx interrupt which transfers the\ninitialization word, pointed to by the circular buffer pointer, to\nthe Tx buffer. The buffer pointer is updated to point to the nextunsent initialization word. When the circular buffer pointer w raps\naround, which happens after the last word has been accessed, it\nindicates that the initialization phase is complete. This can bedone “manually ” in the DSP using a simple address check or auto-\nbuffered mode can be used to the complete transfer automatically.\ntxcdat: ar = dm(stat_flag);\nar = pass ar;if eq rti;\nena sec_reg;\nax0 = dm (i3, m1);tx0 = ax0;\nax0 = i3;\nay0 = ^init_cmds;ar = ax0 - ay0;\nif gt rti;\nax0 = 0x00;dm (stat_flag) = ax0;\nrti;\nREV. AAD73311L\n–28–In the main body of the program, the code loops waiting for the\ninitialization sequence to be completed.\ncheck_init:\nax0 = dm (stat_flag);\naf = pass ax0;\nif ne jump check_init;\nIf the AD73311L is used in a cascade of two or more codec\nunits, it is important to observe some restrictions in the sequence\nof sending initialization words to the two codecs. It is preferable\nto send groups of control words for the corresponding controlregisters in each codec and it is essential to send the control\nwords in descending order —last device ﬁrst . . . ﬁrst device last.\nControl Registers A and B contain settings, such as samplingrate, serial clock rate etc., which critically require synchronous\nupdate in each codec.Once the device has been initialized, Control Register A on each\ncodecs is written with a control word which c hanges the Operating\nMode from Program Mode to either Data Mode or Mixed Control\nData Mode. The device count ﬁeld, which defau lts to 000b, will\nhave to be programmed to the required setting —depending on the\nnumber of devices in cascade.  In Data Mode or Mixed Mode,\nthe main function of the device is to return ADC samples from\neach codec and to accept DAC words for each codecs. D uring\neach sample interval, ADC samples will be returned from the\ndevice equal to the number of devices in cascade, while in the\nsame interval DAC update samples will be sent to the deviceagain the number of DAC words being equal to the number of\ndevices in the cascade.\nIn order to reduce the number of interrupts and to reduce\ncomplexity, autobuffering can be used to ensure that only oneinterrupt is generated during each sampling interval.\nREV. AAD73311L\n–29–Conﬁguring an AD73311L to Operate in Data Mode\nThis section describes the typical sequence of control words that\nare required to be sent to an AD73311L to set it up for data modeoperation. In this sequence, Registers B, C and A are programmed\nbefore the device enters data mode. This des cription panel refers\nto Table XIX.\nAt each sampling event, an SDOFS pulse will be observed that\nwill cause a control (programming) word to be sent to the device\nfrom the DSP.\nStep 1: The ﬁrst output sample event following device reset.\nThe SDOFS signal is raised, which prepares the DSP RxRegister to accept the ADC word from the AD73311L. As the\nAD73311L ’s SDOFS is coupled to the DSP ’s TFS and RFS, and\nto the SDIFS of the AD73311L, this event also forces a new con-trol word to be output from the DSP Tx Register to the AD73311L.\nStep 2: We observe the status of the channel following the\ntransmission of the control word. The DSP has received the\nADC word (invalid because the ADC is not yet powered up)from the AD 73311L and the AD73311L has received the control\nword destined for Control Register B. At this stage, the eight LSBs\nof the control word are loaded to Control Register B, which setsthe internal MCLK divider ratio to 1, SCLK rate to DMCLK/8.APPENDIX A\nStep 3: The next ADC sample event that occurs raises theSDOFS line of the AD73311L. The DSP Tx Register containsthe control word to be written to the AD73311L.\nStep 4: Following transmission of the control word, the DSP\nRx Register contains the ADC word that during Program Mode\nis a copy of the control word written at the previous samplinginterval where the device address ﬁeld (Bits 13 –11) have been\ndecremented from 000b to 111b. The AD73311L has received a\ncontrol word that is addressed to Control Register C, which turnson power to the ADC, DAC, REFCAP and buffered REFOUT.\nSteps 5 and 6: The programming phase is completed by send-\ning a control word addressed to Control Register A, which sets\nthe device in Data Mode.\nStep 7: The AD73311L provides its ﬁrst valid ADC sample as\nthe ADC has been powered up and data mode is enabled. In\ndata mode all words sent to the device are interpreted as DAC\nwords. Likewise, all words received from the device are inter-\npreted as ADC words.\nStep 8: The ﬁrst DAC word has been transmitted to the device\nand is loaded to the internal DAC register.\nSteps 9 and 10: Another ADC read and DAC write cycle.\nTable XIX.\nStep DSP Tx AD73311L DSP Rx\n1 1000000100001011 0000000000000000 xxxxxxxxxxxxxxxx\n2 1000001011111001 1000000100001011 0000000000000000\n3 1000001011111001 1000000100001011 xxxxxxxxxxxxxxxx\n4 1000000000000001 1000001001111001 10111001000010115 1000000000000001 1000001011111001 xxxxxxxxxxxxxxxx\n6 DAC WORD N 1000000000000001 10111010111110017 DAC WORD N ADC RESULT N xxxxxxxxxxxxxxxx\n8 DAC WORD N+1 DAC WORD N ADC RESULT N9 DAC WORD N+1 ADC RESULT N+1 xxxxxxxxxxxxxxxx\n10 DAC WORD N+2 DAC WORD N+1 ADC RESULT N+1\nREV. AAD73311L\n–30–APPENDIX B\nConﬁguring an AD73311L to Operate in Mixed Mode\nThis section describes a typical sequence of control words that\nwould be sent to an AD73311L to con ﬁgure it for operation in\nmixed mode. It is not intended to be a de ﬁnitive initialization\nsequence, but will show users the typical input/output eventsthat occur in the programming and Operation Phases\n1. This\ndescription panel refers to Table XX.\nSteps 1 –3 detail the transfer of the control words to Control\nRegister A, which programs the device for Mixed-Mode opera-tion. In Step 1, we have the ﬁrst output sample event following\ndevice reset. The SDOFS signal is raised which prepares the\nDSP Rx register to accept the ADC word from the AD73311L.The device is con ﬁgured as nonFSLB, which means that the\nDSP has control over what is transmitted to the device and in\nthis case we will not transmit to the device until the output wordhas been received from the AD73311L.\nIn Step 2 the DSP has now received the ADC word. Typically,\nan interrupt will be generated following reception of the output\nwords by the DSP. The transmit register of the DSP is loadedwith the control word destined for the AD73311L. This gener-\nates a transmit frame-sync (TFS) that is input to the SDIFS\ninput of the AD73311L to indicate the start of transmission.\nIn Step 3 the device has received a control word that addresses\nControl Register A and programs the channels into Mixed\nMode-MM and PGM /DATA set to one. Following Step 3, the\ndevice has been programmed into mixed-mode although none ofthe analog sections have been powered up (controlled by Con-\ntrol Register C). Steps 4 –6 detail update of Control Register B\nin mixed-mode. In Steps 4, 5 the ADC sample, which is invalidas the ADC section is not yet powered up, is transferred to the\nDSP ’s Rx section. In the subsequent interrupt service routinethe Tx register is loaded with the control word setting for Con-\ntrol Register B which programs DMCLK = MCLK, the sam-\npling rate to DMCLK/256, SCLK = DMCLK/2.\nSteps 7 –10 are similar to Steps 4 –6 except that Control Register\nC is programmed to power up all analog sections (ADC, DAC,Reference = 1.2 V, REFOUT). In Step 10, a DAC word is sent\nto the device. As the channels are in mixed mode, the serial port\ninterrogates the MSB of the 16-bit word sent to determine whetherit contains DAC data or control information.\nSteps 7 –10 illustrate the implementation of Control Register\nupdate and DAC update in a single sample period. Note that\nthis combination is not possible in the FSLB con ﬁguration\n2.\nSteps 11 –15 illustrate a Control Register readback cycle. In Step\n13, the device has received a Control Word that addresses Con-\ntrol Register C for readback (Bit 14 of the Control Word = 1).When the device receives the readback request, the register\ncontents are loaded to the serial register as shown in Step 14.\nSDOFS is raised in the device, which causes the readback wordto be shifted out toward the DSP. In Step 15, the DSP has\nreceived the readback word (note that the address ﬁeld in the\nreadback word has been decremented to 111b). Steps 16 –18\ndetail an ADC and DAC update cycle using the nonFSLB con-\nﬁguration. In this case no Control Register update is required.\nNOTES\n1This s equence assumes that the DSP SPORT's Rx and Tx interrupts are enabled.\nIt is important to ensure there is no latency (separation) between control wordsin a cascade con ﬁguration. This is especially the case when programming\nControl Registers A and B.\n2Mixed mode operation with the FSLB con ﬁguration is more restricted in that\nonly a single word can be sent per sample period.\nREV. AAD73311L\n–31–Table XX. Mixed Mode Operation\nStep DSP  Tx AD73311L DSP Rx\n1 DON ’T CARE OUTPUT CH1 DON ’T CARE\nxxxxxxxxxxxxxxxx 0000000000000000 xxxxxxxxxxxxxxxx\n2 CRA-CH1 DON ’T CARE OUTPUT CH1\n1000101011111001 xxxxxxxxxxxxxxxx 0000000000000000\n3 DON ’T CARE CRA-CH1 DON ’T CARE\nxxxxxxxxxxxxxxxx 1000000000010011 xxxxxxxxxxxxxxxx\n4 DON ’T CARE ADC RESULT CH1 DON ’T CARE\nxxxxxxxxxxxxxxxx 0000000000000000 xxxxxxxxxxxxxxxx\n5 CRB-CH1 DON ’T CARE ADC RESULT CH1\n1000100100001001 xxxxxxxxxxxxxxxx 0000000000000000\n6 DON ’T CARE CRB-CH1 DON ’T CARE\nxxxxxxxxxxxxxxxx 1000000100001011 xxxxxxxxxxxxxxxx\n7 DON ’T CARE ADC RESULT CH1 DON ’T CARE\nxxxxxxxxxxxxxxxx 0000000000000000 xxxxxxxxxxxxxxxx\n8 CRC-CH1 DON ’T CARE ADC RESULT CH1\n1000101011111001 xxxxxxxxxxxxxxxx 0000000000000000\n9 DAC WORD CRC-CH1 DON ’T CARE\n0111111111111111 1000001011111001 xxxxxxxxxxxxxxxx\n10 DAC WORD DAC WORD DON ’T CARE\n1000000000000000 0111111111111111 xxxxxxxxxxxxxxxx\n11 DON ’T CARE ADC RESULT CH1 DON ’T CARE\nxxxxxxxxxxxxxxxx 0000000000000000 xxxxxxxxxxxxxxxx\n12 CRC-CH1 DON ’T CARE ADC RESULT CH1\n10000010xxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000\n13 DON ’T CARE CRC-CH1 DON ’T CARE\nxxxxxxxxxxxxxxxx 10000010xxxxxxxx xxxxxxxxxxxxxxxx\n14 DON ’T CARE READBACK CH 1 DON ’T CARE\nxxxxxxxxxxxxxxxx 1100001011111001 xxxxxxxxxxxxxxxx\n15 DON ’T CARE DON ’T CARE READBACK CH 1\nxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 1111001011111001\n16 DON ’T CARE ADC RESULT CH1 DON ’T CARE\nxxxxxxxxxxxxxxxx ???????????????? xxxxxxxxxxxxxxxx\n17 DAC WORD CH 1 DON ’T CARE ADC RESULT CH1\n0111111111111111 xxxxxxxxxxxxxxxx ????????????????\n18 DAC WORD CH 1 DAC WORD CH 1 DON ’T CARE\n1000000000000000 0111111111111111 xxxxxxxxxxxxxxxx\nREV. AAD73311L\n–32–Conﬁguring a Cascade of Two AD73311Ls to Operate in\nData Mode1\nThis section describes the typical sequence of control words that\nare required to be sent to a cascade of two AD73311Ls to setthem up for data mode operation. In this sequence Registers B,\nC and A are programmed before the device enters data mode.\nThis description panel refers to Table XXI.\nAt each sampling event, a pair of SDOFS pulses will be observed\nwhich will cause a pair of control (programming) words to be\nsent to the device from the DSP. It is advisable that each pair of\ncontrol words should program a single register in each device.The sequence to be followed is Device 2 followed by Device 1.\nIn Step 1, we have the ﬁrst output sample event following device\nreset. The SDOFS signal is raised on both devices simultaneo usly,\nwhich prepares the DSP Rx register to accept the ADC wordfrom Device 2, while SDOFS from Device 1 becomes an SDIFS\nto Device 2. As the SDOFS of Device 2 is coupled to the DSP ’s\nTFS and RFS, and to the SDIFS of Device 1, this event alsoforces a new control word to be output from the DSP Tx regis-\nter to Device 1.\nIn Step 2, we observe the status of the devices following the\ntransmission of the ﬁrst control word. The DSP has received the\noutput word from Device 2, while Device 2 has received the\noutput word from Device 1. Device 1 has received the Control\nword destined for Device 2. At this stage, the SDOFS of bothdevices are again raised because Device 2 has received Device\n1’s output word, and as it is not a valid control word addressed\nto Device 2, it is passed on to the DSP. Likewise, Device 1 hasreceived a control word destined for Device 2-address ﬁeld is\nnot zero-and it decrements the address ﬁeld of the control word\nand passes it on.\nStep 3 shows completion of the ﬁrst series of control word\nwrites. The DSP has now received both output words and each\ndevice has received a control word that addresses control register\nB and sets the internal MCLK divider ratio to 1, SCLK rate toDMCLK/2 and sampling rate to DMCLK/256. Note that both\ndevices are updated simultaneously as both receive the addressed\ncontrol word at the same time. This is an important factor incascaded operation as any latency between updating the SCLK\nor DMCLK of devices can result in corrupted operation. This\nwill not happen in the case of an FSLB con ﬁguration as shown\nhere, but must be taken into account in a nonFSLB con ﬁgura-\ntion. One other important observation of this sequence is that\nthe data words are received and transmitted in reverse order,i.e., the ADC words are received by the DSP, Device 2 ﬁrst,\nthen Device 1 and, similarly, the transmit words from the DSP\nare sent to Device 2 ﬁrst, then to Channel 1. This ensures that\nall devices are updated at the same time. Steps 4 –6 are similar toAPPENDIX C\nSteps 1 –3 but, instead, program Control Register C to power-up\nthe analog sections of the device (ADCs, DACs and reference).\nSteps 7 –9 are similar to Steps 1 –3 but, instead, program Con-\ntrol Register A, with a device count ﬁeld equal to two devices in\ncascade and sets the PGM /DATA bit to one to put the device\nin data mode.\nIn Step 10, the programming phase is complete and we now\nbegin actual device data read and write. The words loaded into\nthe serial registers of the two devices at the ADC sampling\nevent now contain valid ADC data and the words written to thedevices from the DSP ’s Tx register will now be interpreted as\nDAC words. The DSP Tx register contains the DAC word for\nDevice 2.\nIn Step 11, the ﬁrst DAC word has been transmitted into the\ncascade and the ADC word from Device 2 has been read from\nthe cascade. The DSP Tx register now contains the DAC\nword for Device 1. As the words being sent to the cascade are\nnow being interpreted as 16-bit DAC wor ds, the addressing\nscheme now changes from one where the address was embed-\nded in the transmitted word, to one where the serial port nowcounts the SDIFS pulses. When the number of SDIFS pulses\nreceived equals the value in the Device count ﬁeld of Control\nRegister A, the length of the cascade-each device updates itsDAC register with the present word in its serial register. In\nStep 11 each device has received only one SDIFS pulse; Device\n2 received one SDIFS from the SDOFS of Device 1 when itsent its ADC word, and Device 1 received one SDIFS pulse\nwhen it received the DAC word for Device 2 from the DSP ’s\nTx register. Therefore, each device raises its SDOFS line topass on the current word in its serial register, and each device\nnow receives another SDIFS pulse.\nStep 12 shows the completion of an ADC read and DAC write\ncycle. Following Step 11, each device has received two SDIFSpulses that equal the setting of the device count ﬁeld in Control\nRegister A. The DAC register in each device is now updated\nwith the contents of the word that accompanied the SDIFSpulse that satis ﬁed the device count requirement. The internal\nframe sync counter is now reset to zero and will begin counting\nfor the next DAC update cycle. Steps 10 –12 are repeated on\neach sampling event.\nNOTE\n1This sequence assumes that the DSP SPORT ’s Rx and Tx interrupts are\nenabled. It is important to ensure that there is no latency (separation) betweencontrol words in a cascade con ﬁguration. This is especially the case when\nprogramming Control Registers A and B, as they must be updated synchro-nously in each channel.\nREV. AAD73311L\n–33–Table XXI. Data Mode Operation\nDSP AD733111L AD73311L DSP\nStep Tx Device 1 Device 2 Rx\n1 CRB-CH2 OUTPUT CH1 OUTPUT CH2 DON ’T CARE\n1000100100001011 0000000000000000 0000000000000000 xxxxxxxxxxxxxxxx\n2 CRB-CH1 CRB-CH2 OUTPUT CH1 OUTPUT CH2\n1000000100001011 1000100100001011 0000000000000000 0000000000000000\n3 CRC-CH2 CRB-CH1 CRB-CH2 OUTPUT CH1\n1000101011111001 1000000100001011 1000000100001011 0000000000000000\n4 CRC-CH2 OUTPUT CH1 OUTPUT CH2 DON ’T CARE\n1000101011111001 1000000100001011 1000000100001011 xxxxxxxxxxxxxxxx\n5 CRC-CH1 CRC-CH2 OUTPUT CH2 OUTPUT CH2\n1000001011111001 1000101011111001 1011100100001011 1011100100001011\n6 CRA-CH2 CRC-CH1 CRC-CH2 OUTPUT CH1\n1000100000010001 1000001011111001 1000001011111001 1011000100001011\n7 CRA-CH2 OUTPUT CH1 OUTPUT CH2 DON ’T CARE\n1000100000010001 1000001011111001 1000001011111001 xxxxxxxxxxxxxxxx\n8 CRA-CH1 CRA-CH2 OUTPUT CH2 OUTPUT CH2\n1000000000010001 1000100000010001 1011101011111001 1011101011111001\n9 CRB-CH2 CRA-CH1 CRA-CH2 OUTPUT CH1\n0111111111111111 1000000000010001 1000000000010001 1011001011111001\n10 DAC WORD CH 2 ADC RESULT CH1 ADC RESULT CH2 DON ’T CARE\n0111111111111111 ???????????????? ???????????????? xxxxxxxxxxxxxxxx\n11 DAC WORD CH 1 DAC WORD CH 2 ADC RESULT CH1 ADC RESULT CH2\n1000000000000000 0111111111111111 ???????????????? ????????????????\n12 DON ’T CARE DAC WORD CH 1 DAC WORD CH 2 ADC RESULT CH1\nxxxxxxxxxxxxxxxx 1000000000000000 0111111111111111 ????????????????\nREV. AAD73311L\n–34–APPENDIX D\nConﬁguring a cascade of two AD73311Ls to Operate in Mixed\nMode\nThis section describes a typical sequence of control words that\nwould be sent to a cascade of two AD73311Ls to con ﬁgure\nthem for operation in mixed mode. It is not intended to be a\ndeﬁnitive initialization sequence, but will show users the typical\ninput/output events that occur in the programming and opera-\ntion phases.1 This description panel refers to Table XXII.\nSteps 1 –5 detail the transfer of the control words to Control\nRegister A, which programs the devices for Mixed-Mode opera-tion. In Step 1, we have the ﬁrst output sample event following\ndevice reset. The SDOFS signal is simultaneously raised on both\ndevices, which prepares the DSP Rx register to accept the ADCword from Device 2 while SDOFS from Device 1 becomes an\nSDIFS to Device 2. The cascade is con ﬁgured as nonFSLB,\nwhich means that the DSP has control over what is transmittedto the cascade\n2 and in this case we will not transmit to the\ndevices until both output words have been received from the\nAD73311Ls.\nIn Step 2, we observe the status of the devices following the\nreception of the Device 2 output word. The DSP has received\nthe ADC word from Device 2, while Device 2 has received the\noutput word from Device 1. At this stage, the SDOFS of Device2 is again raised because Device 2 has received Channel 1 ’s\noutput w ord and, as it is not addressed to Device 2, it is passed\non to the DSP.\nIn Step 3 the DSP has now received both ADC words. Typi-\ncally, an interrupt will be generated following reception of the\ntwo output words by the DSP (this involves programming the\nDSP to use autobuffered transfers of two words). The transmitregister of the DSP is loaded with the control word destined for\nDevice 2. This generates a transmit frame-sync (TFS) that is\ninput to the SDIFS input of the AD73311L (Device 1) to indi-cate the start of transmission.\nIn Step 4, Device 1 now contains the Control Word destined for\nDevice 2. The address ﬁeld is decremented, SDOFS1 is raised\n(internally) and the Control word is passed on to Channel 2.The Tx register of the DSP has now been updated with the\nControl Word destined for Device 1 (this can be done using\nautobuffering of transmit or by handling transmit interruptsfollowing each word sent).\nIn Step 5 each device has received a control word that addresses\nControl Register A and sets the device count ﬁeld equal to two\ndevices and programs the devices into Mixed Mode —MM and\nPGM /DATA set to one. Following Step 5, the device has been\nprogrammed into mixed-mode although none of the analog\nsections have been powered up (controlled by Control RegisterC). Steps 6 –10 detail update of Control Register B in mixed-\nmode. In Steps 6 –8 the ADC samples, which are invalid as theADC section is not yet powered up, are transferred to the DSP ’s\nRx section. In the subsequent interrupt service routine the Tx\nRegister is loaded with the control word for Device 2. In Steps\n9–10, Devices 1 and 2 are loaded with a control word setting for\nControl Register B which programs DMCLK = MCLK, the\nsampling rate to DMCLK/256, SCLK = DMCLK/2.\nSteps 11 –17 are similar to Steps 6 –12 except that Control Reg-\nister C is programmed to power up all analog sections (ADC,DAC, Reference = 2.4 V, REFOUT). In Steps 16 –17, DAC\nwords are sent to the device —both DAC words are necessary\nas each device will only update its DAC when the device hascounted a number of SDIFS pulses, accompanied by DAC words\n(in mixed-mode, the MSB = 0), that is equal to the device count\nﬁeld of Control Register A\n3. As the devices are in mixed mode,\nthe serial port interrogates the MSB of the 16-bit word sent to\ndetermine whether it contains DAC data or control information.\nDAC words should be sent in the sequence Channel 2 followedby Device 1.\nSteps 11 –17 illustrate the implementation of Control Register\nupdate and DAC update in a single sample period. Note that\nthis combination is not possible in the FSLB con ﬁguration.\n2\nSteps 18 –25 illustrate a Control Register readback cycle. In Step\n22, both devices have received a Control Word that addresses\nControl Register C for readback (Bit 14 of the Control Word =\n1). When the devices receive the readback request, the registercontents are loaded to the serial registers as shown in Step 23.\nSDOFS is raised in both devices, which causes these readback\nwords to be shifted out toward the DSP. In Step 24, the DSPhas received the Device 2 readback word while Device 2 has\nreceived the Device 1 readback word (note that the address ﬁeld\nin both words has been decremented to 111b). In Step 25, theDSP has received the Device 1 readback word (its address ﬁeld\nhas been further decremented to 110b).\nSteps 26 –30 detail an ADC and DAC update cycle using the\nnonFSLB con ﬁguration. In this case no Control Register update\nis required.\nNOTES\n1This sequence assumes that the DSP SPORT ’s Rx and Tx interrupts are\nenabled. It is important to ensure there is no latency (separation) betweencontrol words in a cascade con ﬁguration. This is especially the case when\nprogramming Control Registers A and B.\n2Mixed mode operation with the FSLB con ﬁguration is more restricted in that\nthe number of words sent to the cascade equals the number of devices in thecascade, which means that DAC updates may need to be substituted with aregister write or read.\n3In mixed mode, DAC update is done using the same SDIFS counting scheme\nas in normal data mode with the exception that only DAC words (MSB set tozero) are recognized as being able to increment the frame sync counters.\nREV. AAD73311L\n–35–Table XXII. Mixed Mode Operation\nDSP AD73311L AD73311L DSP\nStep Tx Device 1 Device 2 Rx\nDON ’T CARE OUTPUT CH1 OUTPUT CH2 DON ’T CARE\n1 xxxxxxxxxxxxxxxx 0000000000000000 0000000000000000 xxxxxxxxxxxxxxxx\nDON ’T CARE DON ’T CARE OUTPUT CH1 OUTPUT CH2\n2 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000 0000000000000000\nCRA-CH2 DON ’T CARE DON ’T CARE OUTPUT CH1\n3 1000101011111001 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000\nCRA-CH1 CRA-CH2 DON ’T CARE DON ’T CARE\n4 1000000000010011 1000100000010011 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx\nDON ’T CARE CRA-CH1 CRA-CH2 DON ’T CARE\n5 xxxxxxxxxxxxxxxx 1000000000010011 1000000000010011 xxxxxxxxxxxxxxxx\nDON ’T CARE ADC RESULT CH1 ADC RESULT CH2 DON ’T CARE\n6 xxxxxxxxxxxxxxxx 0000000000000000 0000000000000000 xxxxxxxxxxxxxxxx\nDON ’T CARE DON ’T CARE ADC RESULT CH1 ADC RESULT CH2\n7 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000 0000000000000000\nCRB-CH2 DON ’T CARE DON ’T CARE ADC RESULT CH1\n8 1000100100001011 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000\nCRB-CH1 CRB-CH2 DON ’T CARE DON ’T CARE\n9 1000000100001011 1000100100001011 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx\nDON ’T CARE CRB-CH1 CRB-CH2 DON ’T CARE\n10 xxxxxxxxxxxxxxxx 1000000100001011 1000000100001011 xxxxxxxxxxxxxxxx\nDON ’T CARE ADC RESULT CH1 ADC RESULT CH2 DON ’T CARE\n11 xxxxxxxxxxxxxxxx 0000000000000000 0000000000000000 xxxxxxxxxxxxxxxx\nDON ’T CARE DON ’T CARE ADC RESULT CH1 ADC RESULT CH2\n12 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000 0000000000000000\nCRC-CH2 DON ’T CARE DON ’T CARE ADC RESULT CH1\n13 1000101011111001 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000\nCRC-CH1 CRC-CH2 DON ’T CARE DON ’T CARE\n14 1000001011111001 1000101011111001 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx\nDAC WORD CH 2 CRC-CH1 CRC-CH2 DON ’T CARE\n15 0111111111111111 1000001011111001 1000001011111001 xxxxxxxxxxxxxxxx\nDAC WORD CH 1 DAC WORD CH 2 DON ’T CARE DON ’T CARE\n16 1000000000000000 0111111111111111 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx\nDON ’T CARE DAC WORD CH 1 DAC WORD CH 2 DON ’T CARE\n17 xxxxxxxxxxxxxxxx 1000000000000000 0111111111111111 xxxxxxxxxxxxxxxx\nDON ’T CARE ADC RESULT CH1 ADC RESULT CH2 DON ’T CARE\n18 xxxxxxxxxxxxxxxx 0000000000000000 0000000000000000 xxxxxxxxxxxxxxxx\nDON ’T CARE DON ’T CARE ADC RESULT CH1 ADC RESULT CH2\n19 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000 0000000000000000\nCRC-CH2 DON ’T CARE DON ’T CARE ADC RESULT CH1\n20 11001010xxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 0000000000000000\nCRC-CH1 CRC-CH2 DON ’T CARE DON ’T CARE\n21 10000010xxxxxxxx 11001010xxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx\nDON ’T CARE CRC-CH1 CRC-CH2 DON ’T CARE\n22 xxxxxxxxxxxxxxxx 10000010xxxxxxxx 10000010xxxxxxxx xxxxxxxxxxxxxxxx\nDON ’T CARE READBACK CH 1 READBACK CH 2 DON ’T CARE\n23 xxxxxxxxxxxxxxxx 1100001011111001 1100001011111001 xxxxxxxxxxxxxxxx\nDON ’T CARE DON ’T CARE READBACK CH 1 READBACK CH 2\n24 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 1111101011111001 1111101011111001\nDON ’T CARE DON ’T CARE DON ’T CARE READBACK CH 1\n25 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx 1111001011111001\nDON ’T CARE ADC RESULT CH1 ADC RESULT CH2 DON ’T CARE\n26 xxxxxxxxxxxxxxxx ???????????????? ???????????????? xxxxxxxxxxxxxxxx\nDON ’T CARE DON ’T CARE ADC RESULT CH1 ADC RESULT CH2\n27 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx ???????????????? ????????????????\nDAC WORD CH 2 DON ’T CARE DON ’T CARE ADC RESULT CH1\n28 0111111111111111 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx ????????????????\nDAC WORD CH 1 DAC WORD CH 2 DON ’T CARE DON ’T CARE\n29 1000000000000000 0111111111111111 xxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxx\nDON ’T CARE DAC WORD CH 1 DAC WORD CH 2 DON ’T CARE\n30 xxxxxxxxxxxxxxxx 1000000000000000 0111111111111111 xxxxxxxxxxxxxxxx\nREV. AAD73311L\n–36–PRINTED IN U.S.A.C00689a–2.5–8/00 (rev. A)APPENDIX E\nDAC Timing Control Example\nThe AD73311 ’s DAC is loaded from the DAC register contents\njust before the ADC register contents are loaded to the serial\nregister (SDOFS going high). This default DAC load positioncan be advanced in time to occur earlier with respect to the S DOFS\ngoing high. Figure 39 shows an example of the ADC unload and\nDAC load sequence. At time t\n1 the SDOFS is raised to indicate\nthat a new ADC word is ready. Following the SDOFS pulse,\n16 bits of ADC data are clocked out on SDO in the subsequent\n16 SCLK cycles ﬁnishing at time t 2 where the DSP ’s SPORT\nwill have received the 16-bit word. The DSP may process this\ninformation and generate a DAC word to be sent to the AD73311.\nTime t 3 marks the beginning of the sequence of sending the\nDAC word to the AD73311. This sequence ends at time t 4\nwhere the DAC register will be updated from the 16 bits in theAD73311 ’s serial register. However, the DAC will not be updated\nfrom the DAC register until time t\n5, which may not be acceptable in\ncertain applications. In order to reduce this delay and load the\nDAC at time t 6, the DAC advance register can be programmed with\na suitable setting corresponding to the required time advance (refer\nto Table VIII for details of DAC Timing Control settings).ADC\nWORD\nDAC\nWORD\nt6t4 t5 t3 t2 t1SE\nSCLK\nSDOFS\nSDO\nSDIFS\nSDI\nDAC\nREGISTER\nUPDATE\nDAC LOAD\nFROM DAC\nREGISTER\nFigure 39. DAC Timing Control\n20-Lead Shrink Small Outline IC (RS-20)\n20 11\n10 10.295 (7.50)\n0.271 (6.90)0.311 (7.9)\n0.301 (7.64)\n0.212 (5.38)0.205 (5.21)\nPIN 1\nSEATING\nPLANE0.008 (0.203)\n0.002 (0.050)0.07 (1.78)\n0.066 (1.67)\n0.0256\n(0.65)\nBSC0.078 (1.98)\n0.068 (1.73)\n0.009 (0.229)0.005 (0.127)0.037 (0.94)\n0.022 (0.559)8/H11543\n0/H1154320-Lead Thin Shrink Small Outline IC (RU-20)\n20 11\n10 10.256 (6.50)\n0.246 (6.25)0.177 (4.50)0.169 (4.30)\nPIN 10.260 (6.60)\n0.252 (6.40)\nSEATING\nPLANE0.006 (0.15)\n0.002 (0.05)\n0.0118 (0.30)0.0075 (0.19) 0.0256 (0.65)\nBSC0.0433 (1.10)\nMAX\n0.0079 (0.20)\n0.0035 (0.090)0.028 (0.70)0.020 (0.50)8/H11543\n0/H1154320-Lead Small Outline IC (R-20)\nSEATING\nPLANE0.0118 (0.30)\n0.0040 (0.10)0.0192 (0.49)0.0138 (0.35)0.1043 (2.65)0.0926 (2.35)\n0.0500\n(1.27)\nBSC\n0.0125 (0.32)\n0.0091 (0.23)0.0500 (1.27)0.0157 (0.40)8/H11543\n0/H115430.0291 (0.74)\n0.0098 (0.25)/H11547 45/H1154320 11\n10 10.5118 (13.00)\n0.4961 (12.60)\n0.4193 (10.65)0.3937 (10.00)0.2992 (7.60)0.2914 (7.40)\nPIN 1OUTLINE DIMENSIONS\nDimensions shown in inches and (mm).\n"}]
!==============================================================================!
### Component Summary: AD73311LARUZ-RL

#### Key Characteristics and Specifications:
- **Voltage Ratings:**
  - Analog Supply Voltage (AVDD): 2.7 V to 3.3 V
  - Digital Supply Voltage (DVDD): 2.7 V to 3.3 V

- **Current Ratings:**
  - Maximum Power Consumption: 33 mW at 2.7 V

- **Power Consumption:**
  - 33 mW Max Power Consumption at 2.7 V

- **Operating Temperature Range:**
  - -40°C to +105°C

- **Package Type:**
  - 20-Lead SOIC, SSOP, or TSSOP

- **Special Features:**
  - 16-Bit A/D and D/A Converters
  - Programmable Input/Output Sample Rates
  - 76 dB ADC Signal-to-Noise Ratio (SNR)
  - 77 dB DAC Signal-to-Noise Ratio (SNR)
  - Programmable Gain Amplifier (PGA) with 0 to 38 dB gain
  - On-chip reference voltage
  - Flexible Serial Port for cascading up to eight devices
  - Low group delay (typical 25 ms for ADC, 50 ms for DAC)

- **Moisture Sensitive Level:**
  - MSL Level 1 (JEDEC J-STD-020E)

#### Description:
The **AD73311L** is a low-cost, low-power CMOS general-purpose analog front end designed for applications such as speech processing and telephony. It integrates a 16-bit analog-to-digital converter (ADC) and a 16-bit digital-to-analog converter (DAC), making it suitable for high-quality audio applications. The device features programmable gain amplifiers, allowing for flexible signal conditioning, and includes an on-chip reference voltage for single-supply operation.

#### Typical Applications:
- **General Purpose Analog I/O:** The AD73311L can be used in various analog signal processing applications.
- **Speech Processing:** Ideal for applications requiring high-quality audio input and output, such as voice recognition and synthesis.
- **Telephony:** Suitable for cordless and personal communication devices.
- **Active Control of Sound and Vibration:** Can be utilized in systems requiring precise audio control.
- **Data Communications:** Effective in applications where analog signals need to be converted to digital formats and vice versa.

This component is particularly advantageous in systems where space and power efficiency are critical, making it a popular choice in modern electronic designs.