[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of L6566A production of ST MICROELECTRONICS from the text:This is information on a product in full production. March 2012 Doc ID 13794 Rev 4 1/52\n52L6566A\nMulti-mode controller for SMPS with PFC front-end\nDatasheet − production data\nFeatures\n■Selectable multi-mode operation: fixed \nfrequency or quasi-resonant\n■Onboard 700 V high-voltage startup\n■Advanced light load management\n■Low quiescent current (< 3 mA)\n■Adaptive UVLO\n■Line feedforward for constant power capability vs. mains voltage\n■Pulse-by-pulse OCP, shutdown on overload (latched or auto-restart)\n■Transformer saturation detection\n■Switched supply rail for PFC controller\n■Latched or auto-restart OVP \n■Brownout protection\n■-600/+800 mA totem pole gate-driver with active pull-down during UVLO\n■SO16N packageApplications\n■Notebook, TV and LCD monitor adapters\n■High power chargers\n■PDP/LCD TVs\n■Consumer appliances, such as DVD players, VCRs, set-top boxes\n■IT equipment, games, auxiliary power supplies\n■Power supplies in excess of 150 W\n \nFigure 1. Block diagramSO16N\n+ -\n+-ZERO CURRENT\nDETECTOR50 mV\n100 mVVCC915\n7\nZCDCOMP VFF\nCS\nGD4\n11\nGND3LINE VOLTAGE\nFEEDFORWARD\n1.5 V\n+ -\n+\n-4.5V\nDIS\n8LATCHLEB\n14VReference\nvoltages\n5VCC10\nInternal supplyVREF\nUVLOVOLTAGE\nREGULATOR\n&\nADAPTIVE UVLO\nVcc_PFC6\nIC_LATCH\nDISABLE\nUVLOIC_LATCHQ\n12+-AC_FAIL\n13\nAC_FAILUVLO_SHFVCC\n5.7V1\nHVSOFT-START\n&\nFAULT MNGT14SS\nOSC\nMODE/SC+-\nOSCILLATOR R\nSQ\nMODE SELECTION\n&\nTURN-ON LOGIC\nOVERVOLTAGE\nPROTECTION7.7V\nOCP PWMTIME\nOUT\nTIME\nOUT+\n-Vth\nBURST-MODELOW CLAMP\n&D I S A B L E\nOFF2\nOFF2Icharge\nHiccup-mode\nOCP logic400 uA\nDRIVEROCP2+\n- 6.4VVCC\n1m AOVPL OVP\nOVPL\nOVPOCP2\n+-\n0.450V\n0.485VAC_OK16\n15 µA3V\nwww.st.com\nContents L6566A\n2/52 Doc ID 13794 Rev 4Contents\n1 Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5\n2 Pin settings  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7\n2.1 Connections . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7\n2.2 Pin description  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7\n3 Electrical data  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\n3.1 Maximum rating  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\n3.2 Thermal data  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\n4 Electrical characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11\n5 Application information  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.1 High-voltage startup generator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n5.2 Zero current detection and triggering block; oscillator block  . . . . . . . . . . 19\n5.3 Burst-mode operation at no load or very light load . . . . . . . . . . . . . . . . . . 225.4 Adaptive UVLO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\n5.5 PWM control block . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n5.6 PWM comparator, PWM latch and voltage feedforward blocks  . . . . . . . . 255.7 Hiccup-mode OCP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28\n5.8 PFC interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29\n5.9 Latched disable function . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30\n5.10 Soft-start and delayed latched shutdown upon overcurrent . . . . . . . . . . . 31\n5.11 OVP block . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 335.12 Brownout protection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\n5.13 Slope compensation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38\n5.14 Summary of L6566A power management functions  . . . . . . . . . . . . . . . . 38\n6 Application examples and ideas  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43\n7 Package mechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46\nL6566A Contents\nDoc ID 13794 Rev 4 3/528 Order codes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n9 Revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\nList of tables L6566A\n4/52 Doc ID 13794 Rev 4List of tables\nTable 1. Pin functions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8\nTable 2. Absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 11\nTable 3. Thermal data. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . 11\nTable 4. Electrical characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 12\nTable 5. L6566A light load management features  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40Table 6. L6566A protection. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40\nTable 7. External circuits that determine IC behavior upon OVP and OCP . . . . . . . . . . . . . . . . . . . 44Table 8. SO16N dimentions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46\nTable 9. Order codes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . 49\nTable 10. Document revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\nL6566A List of figures\nDoc ID 13794 Rev 4 5/52List of figures\nFigure 1. Block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . . 1\nFigure 2. Typical system block diagram. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7\nFigure 3. Pin connection (through top view)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8\nFigure 4. Multi-mode operation with QR option active . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16Figure 5. High-voltage startup generator: internal schematic  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17Figure 6. Timing diagram: normal power-up and power-down sequences  . . . . . . . . . . . . . . . . . . . . 18Figure 7. Timing diagram showing short-circuit behavior (SS pin clamped at 5 V) . . . . . . . . . . . . . . 19Figure 8. Zero current detection block, triggering block, oscillator block and related logic . . . . . . . . 19Figure 9. Drain ringing cycle skipping as the load is gradually reduced  . . . . . . . . . . . . . . . . . . . . . . 20Figure 10. Operation of ZCD, triggering and oscillator blocks (QR option active) . . . . . . . . . . . . . . . . 22Figure 11. Load-dependent operating modes: timing diagrams  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23Figure 12. Addition of an offset to the current sense lowers the burst-mode operation threshold. . . . 24Figure 13. Adaptive UVLO block . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 24\nFigure 14. Possible feedback configurations that can be used with the L6566A. . . . . . . . . . . . . . . . . 25Figure 15. Externally controlled burst-mode operation by driving the COMP pin: timing diagram. . . . 26Figure 16. Typical power capability change vs. input voltage in QR flyback converters . . . . . . . . . . . 27Figure 17. Left: overcurrent setpoint vs. VFF voltage; right: line feedforward function block. . . . . . . . 28Figure 18. Hiccup-mode OCP: timing diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3 0\nFigure 19. Possible interfaces between the L6566A and a PFC controller . . . . . . . . . . . . . . . . . . . . . 31Figure 20. Operation after latched disable activation: timing diagram . . . . . . . . . . . . . . . . . . . . . . . . . 32Figure 21. Soft-start pin operation under different operating conditions and settings . . . . . . . . . . . . . 33Figure 22. OVP function: internal block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  34\nFigure 23. OVP function: timing diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 34\nFigure 24. Maximum allowed duty cycle vs. switching frequency for correct OVP detection. . . . . . . . 36Figure 25. Brownout protection: internal block diagram and timing diagram . . . . . . . . . . . . . . . . . . . . 37Figure 26. AC voltage sensing with the L6566A  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38\nFigure 27. Slope compensation waveforms. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  39\nFigure 28. Typical low-cost application schematic. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  43\nFigure 29. Typical full-feature application schematic (QR operation)  . . . . . . . . . . . . . . . . . . . . . . . . . 43Figure 30. Typical full-feature application schematic (FF operation) . . . . . . . . . . . . . . . . . . . . . . . . . . 44Figure 31. Frequency foldback at light load (FF operation)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45Figure 32. Latched shutdown upon mains overvoltage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45Figure 33. Package drawing  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 47\nFigure 34. Recommended footprint (dimensions are in mm). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48\nDescription L6566A\n6/52 Doc ID 13794 Rev 41 Description \nThe L6566A is an extremely versatile current-mode primary controller IC specifically \ndesigned for high-performance offline flyback converters operated from front-end power \nfactor correction (PFC) stages in applications in compliance with EN61000-3-2 or JEITA-MITI regulations.\nBoth fixed-frequency (FF) and quasi-resonant (QR) operation are supported. The user can \nchoose either of the two depending on application needs. \nThe device features an externally programmable oscillator; it defines the converter\'s \nswitching frequency in FF mode and the maximum allowed switching frequency in QR mode.\nWhen FF operation is selected, the IC works like a standard current-mode controller with a \nmaximum duty cycle limited to 70% (min.).\nQR operation, when selected, occurs and is achieved through a transformer \ndemagnetization sensing input that triggers MOSFET turn-on. Under some conditions, ZVS (zero-voltage switching) can be achieved. The converter\'s power capability rise with the input voltage is compensated by line voltage feedforward. At medium and light load, as the QR operating frequency equals the oscillator frequency, a function (valley skipping) is activated to prevent further frequency rise and keep the operation as close to ZVS as possible.\nWith either FF or QR operation, at very light load the IC enters a controlled burst-mode \noperation that, along with the built-in non-dissipative high-voltage startup circuit and a reduced quiescent current, helps keep the consumption from the mains low and meet energy saving recommendations.\nTo allow the meeting of energy saving recommendations in two-stage power-factor-\ncorrected systems as well, the L6566A provides an interface with the PFC controller that enables the re-regulator to be turned off at light load.\nAn innovative adaptive UVLO helps minimize the issues related to fluctuations in the self-\nsupply voltage due to transformer parasites.\nThe protection functions included in this device are: not-latched input undervoltage \n(brownout), output OVP (auto-restart or latch-mode selectable), a first-level OCP with delayed shutdown to protect the system during overload or short-circuit conditions (auto-restart or latch-mode selectable), and a second-level OCP which is invoked when the transformer saturates or the secondary diode fails short. A latched disable input allows easy implementation of OTP with an external NTC, while an internal thermal shutdown prevents IC overheating.\nProgrammable soft-start, leading-edge blanking on the current sense input for greater noise \nimmunity, slope compensation (in FF mode only), and a shutdown function for externally controlled burst-mode operation or remote ON/OFF control are all features of this device.\nL6566A Description\nDoc ID 13794 Rev 4 7/52Figure 2. Typical system block diagram\nRectified\nMains\nVoltageVoutdc \nL6562A\nL6563S\nL6564 \n PWM/QR controller i s turned off in c ase of PFC\' s\nanomalous oper ation, for safety\nPFC i s automatically turned off at light\nload to e ase compli ance with\nenergy saving specific ations.L6566APFC PRE-REGULATOR  FLYBACK DC-DC CONVERTER\nPin settings L6566A\n8/52 Doc ID 13794 Rev 42 Pin settings\n2.1 Connections\nFigure 3. Pin connection (through top view)\n2.2 Pin descriptionN.C.\nGND\nGD\nVcc\nVcc_PFC\nDISVFF\nSS\nOSC\nMODE/SC\nCOMPCS VREFHVS AC_OK\nZCD1\n2\n3\n4\n5\n67816\n15\n14\n13\n12\n1110\n9N.C.\nGND\nGD\nVcc\nVcc_PFC\nDISVFF\nSS\nOSC\nMODE/SC\nCOMPCS VREFHVS AC_OK\nZCD1\n2\n3\n4\n5\n67816\n15\n14\n13\n12\n1110\n9\nTable 1. Pin functions \nN° Pin Function\n1H V SHigh-voltage startup. The pin, able to withstand 700 V, is to be tied directly to the \nrectified mains voltage. A 1 mA internal current source charges the capacitor \nconnected between the Vcc pin (5) and GND pin (3) until the voltage on the Vcc pin \nreaches the turn-on threshold, it is then shut down. Normally, the generator is re-enabled when the Vcc voltage falls below 5 V, to ensure a low power throughput \nduring short-circuit. Otherwise, when a latched protection is tripped, the generator \nis re-enabled 0.5 V below the turn-on threshold, to keep the latch supplied; or, when the IC is turned off by the COMP pin (9) pulled low, the generator is active \njust below the UVLO threshold to allow a faster restart. \n2N . C .Not internally connected. Provision for clearance on the PCB to meet safety \nrequirements.\n3G N DGround. Current return for both the signal part of the IC and the gate-drive. All of \nthe ground connections of the bias components should be tied to a track going to this pin and kept separate from any pulsed current return.\n4G DGate driver output. The totem pole output stage is able to drive power MOSFETs \nand IGBTs with a peak current capability of 800 mA source/sink.\nL6566A Pin settings\nDoc ID 13794 Rev 4 9/525V c cSupply voltage of both the signal part of the IC and the gate-driver. The internal \nhigh-voltage generator charges an electrolytic capacitor connected between this \npin and GND (pin 3) as long as the voltage on the pin is below the turn-on threshold \nof the IC, after which it is disabled and the chip is turned on. The IC is disabled as the voltage on the pin falls below the UVLO threshold. This threshold is reduced at \nlight load to counteract the natural reduction of the self-supply voltage. Sometimes \na small bypass capacitor (0.1 µF typ.) to GND may be useful in order to get a clean bias voltage for the signal part of the IC.\n6V c c _ P F CSupply pin output. This pin is intended for supplying the PFC controller IC in \nsystems comprising a PFC pre-regulator or other compatible circuitry. It is internally connected to the Vcc pin (5) via a controlled switch. The switch is closed as the IC \nstarts up and opens when the voltage at the COMP pin is lower than a threshold \n(light load), whenever the IC is shut down (either latched or not) and during UVLO. If not used, the pin is left floating.\n7C SInput to the PWM comparator. The current flowing in the MOSFET is sensed \nthrough a resistor, the resulting voltage is applied to this pin and compared with an internal reference to determine MOSFET turn-off. The pin is equipped with 150 ns \nmin. blanking time after the gate-drive output goes high for improved noise \nimmunity. A second comparison level located at 1.5 V latches the device off and reduces its consumption in case of transformer saturation or secondary diode \nshort-circuit. The information is latched until the voltage on the Vcc pin (5) goes \nbelow the UVLO threshold, and so resulting in intermittent operation. A logic circuit improves sensitivity to temporary disturbances. \n8D I SIC’s latched disable input. Internally, the pin connects a comparator that, when the \nvoltage on the pin exceeds 4.5 V, latches off the IC and brings its consumption to a lower value. The latch is cleared as the voltage on the Vcc pin (5) goes below the \nUVLO threshold, but the HV generator keeps the Vcc voltage high (see pin 1 \ndescription). It is then necessary to recycle the input power to restart the IC. For a quick restart, pull pin 16 (AC_OK) below the disable threshold (see pin 16 \ndescription). Bypass the pin with a capacitor to GND (pin 3) to reduce noise pick-\nup. Ground the pin if the function is not used.\n9C O M PControl input for loop regulation. The pin is driven by the phototransistor (emitter-\ngrounded) of an optocoupler to modulate its voltage by modulating the current \nsunk. A capacitor placed between the pin and GND (3), as close to the IC as possible to reduce noise pick-up, sets a pole in the output-to-control transfer \nfunction. The dynamic of the pin is in the 2.5 to 5 V range. A voltage below an \ninternally defined threshold activates burst-mode operation. The voltage at the pin is bottom-clamped at about 2 V. If the clamp is externally overridden and the \nvoltage is pulled below 1.4 V, the IC shuts down.\n10 VREFAn internal generator furnishes an accurate voltage reference (5 V ± 2%) that can \nbe used to supply few mA to an external circuit. A small film capacitor (0.1 µF typ.), \nconnected between this pin and GND (3), is recommended to ensure the stability of \nthe generator and to prevent noise from affecting the reference. This reference is internally monitored by a separate auxiliary reference and any failure or drift causes \nthe IC to latch off.Table 1. Pin functions  (continued)\nN° Pin Function\nPin settings L6566A\n10/52 Doc ID 13794 Rev 411 ZCDTransformer demagnetization sensing input for quasi-resonant operation and OVP \ninput. The pin is externally connected to the transformer’s auxiliary winding through \na resistor divider. A negative-going edge triggers MOSFET turn-on if QR mode is \nselected. \nA voltage exceeding 5 V shuts the IC down and brings its consumption to a lower \nvalue (OVP). Latch-off or auto-restart mode is selectable externally. This function is strobed and digitally filtered to increase noise immunity.\n12 MODE/SCOperating mode selection. If the pin is connected to the VREF pin (7) \nquasi-resonant operation is selected and the oscillator (pin 13, OSC) determines the maximum allowed operating frequency.\nFixed-frequency operation is selected if the pin is not tied to VREF , in which case \nthe oscillator determines the actual operating frequency, the maximum allowed \nduty cycle is set at 70% min. and the pin delivers a voltage ramp synchronized to \nthe oscillator when the gate-drive output is high; the voltage delivered is zero while the gate-drive output is low. The pin is to be connected to pin CS (7) via a resistor \nfor slope compensation.\n13 OSCOscillator pin. The pin is an accurate 1 V voltage source, and a resistor connected \nfrom the pin to GND (pin 3) defines a current. This current is internally used to set \nthe oscillator frequency that defines the maximum allowed switching frequency of \nthe L6566A, if working in QR mode, or the operating switching frequency if working in FF mode.\n14 SSSoft-start current source. At startup, a capacitor Css between this pin and GND \n(pin 3) is charged with an internal current generator. During the ramp, the internal reference clamp on the current sense pin (7, CS) rises linearly starting from zero to \nits final value, therefore causing the duty cycle to increase progressively, starting \nalso from zero. During soft-start the adaptive UVLO function and all functions monitoring the COMP pin are disabled. The soft-start capacitor is discharged \nwhenever the supply voltage of the IC falls below the UVLO threshold. The same \ncapacitor is used to delay IC shutdown (latch-off or auto-restart mode selectable) after detecting an overload condition (OLP).\n15 VFFLine voltage feedforward input. The information on the converter’s input voltage is \nfed into the pin through a resistor divider and is used to change the setpoint of the pulse-by-pulse current limitation (the higher the voltage, the lower the setpoint). \nThe linear dynamics of the pin ranges from 0 to 3 V. A voltage higher than 3 V \nmakes the IC stop switching. If feedforward is not desired, tie the pin to GND (pin 3) directly if a latch-mode OVP is not required (see pin 11, ZCD) or through a resistor \nif a latch-mode OVP is required. Bypass the pin with a capacitor to GND (pin 3) to \nreduce noise pick-up.\n16 AC_OKBrownout protection input. A voltage below 0.45 V shuts down (not latched) the IC, \nlowers its consumption, opens the Vcc_PFC pin (6), and clears the latch set by \nlatched protection (DIS > 4.5 V, SS > 6.4 V, VFF > 6.4 V). IC operation is re-enabled as the voltage exceeds 0.45 V. The comparator is provided with current \nhysteresis: an internal 15 µA current generator is ON as long as the voltage on the \npin is below 0.45 V and is OFF if this value is exceeded. Bypass the pin with a capacitor to GND (pin 3) to reduce noise pick-up. Tie to Vcc with a 220 to 680 k Ω \nresistor if the function is not used.Table 1. Pin functions  (continued)\nN° Pin Function\nL6566A Electrical data\nDoc ID 13794 Rev 4 11/523 Electrical data\n3.1 Maximum rating\n3.2 Thermal dataTable 2. Absolute maximum ratings\nSymbol Pin Parameter Value Unit\nVHVS 1 Voltage range (referred to ground) -0.3 to 700 V\nIHVS 1 Startup current Self-limited\nVCC 5 IC supply voltage (Icc = 20 mA) Self-limited\nVVcc_PFC 6 Voltage range -0.3 to Vcc V\nIVcc_PFC 6 Max. source current (continuous) 30 mA\nVmax 7, 8, 10, 14 Analog inputs and outputs -0.3 to 7 V\nVmax 9, 15, 16 Maximum pin voltage (Ipin ≤  1 mA) Self-limited \nIZCD 11 Zero current detector max. current ±5 mA\nVMODE/SC 12 Voltage range -0.3 to 5.3 V\nVOSC 13 Voltage range -0.3 to 3.3 V\nPTOT Power dissipation @TA = 50 °C 0.75 W\nTSTG Storage temperature -55 to 150 °C\nTJ Junction operating temperature range -40 to 150 °C\nTable 3. Thermal data\nSymbol Parameter Value Unit\nRthJA Thermal resistance junction to ambient 120 °C/W\nElectrical characteristics L6566A\n12/52 Doc ID 13794 Rev 44 Electrical characteristics\n(TJ = -25 to 125 °C, VCC = 12 V, CO = 1 nF; MODE/SC = VREF, RT = 20 k Ω from OSC to \nGND, unless otherwise specified.)\nTable 4. Electrical characteristics \nSymbol Parameter Test condition Min. Typ. Max. Unit\nSupply voltage\nVcc Operating range after turn-onVCOMP > VCOMPL 10.6 23\nV\nVCOMP  = VCOMPO 82 3\nVccOn Turn-on threshold(1)13 14 15 V\nVccOff Turn-off threshold(1) VCOMP  > VCOMPL 9.4 10 10.6\nV(1) VCOMP  = VCOMPO 7.2 7.6 8.0\nHys Hysteresis VCOMP  > VCOMPL 4V\nVZ Zener voltage Icc = 20 mA, IC disabled 23 25 27 V\nSupply current\nIstart-up Startup current Before turn-on, Vcc = 13 V 200 250 µA\nIq Quiescent current After turn-on, VZCD = VCS = 1 V 2.6 2.8 mA\nIcc Operating supply current MODE/SC open 4 4.6 mA\nIqdis Quiescent currentIC disabled (2)330 2500\nµA\nIC latched off 440 500\nHigh-voltage startup generator\nVHV Breakdown voltage IHV < 100 µA 700 V\nVHVstart Start voltage IVcc < 100 µA 65 80 100 V\nIcharge Vcc charge current VHV > VHvstart , Vcc > 3 V 0.55 0.85 1 mA\nIHV, ON ON-state currentVHV > VHvstart , Vcc > 3 V 1.6\nmA\nVHV > VHvstart , Vcc = 0 0.8\nIHV, OFF OFF-state leakage current VHV = 400 V 40 µA\nVCCrestart Vcc restart voltageVcc falling 4.4 5 5.6\nV(1) IC latched off 12.5 13.5 14.5\n(1) Disabled by \nVCOMP < VCOMPOFF9.4 10 10.6\nReference voltage\nVREF Output voltage(1) TJ = 25 °C; IREF = 1 mA 4.95 5 5.05 V\nVREF Total variationIREF = 1 to 5 mA, \nVcc = 10.6 to 23 V4.9 5.1 V\nL6566A Electrical characteristics\nDoc ID 13794 Rev 4 13/52IREF Short-circuit current VREF = 0 10 30 mA\nSink capability in UVLO Vcc = 6 V; Isink = 0.5 mA 0.2 0.5 V\nVOV Overvoltage threshold 5.3 5.7 V\nInternal oscillator\nfsw Oscillation frequencyOperating range 10 300\nkHzTJ = 25 °C, VZCD = 0, \nMODE/SC = open95 100 105\nVcc=12 to 23 V, VZCD = 0,\nMODE/SC = open93 100 107\nVOSC Voltage reference(1)0 . 9 711 . 0 3V\nDmax Maximum duty cycleMODE/SC = open,\nVCOMP = 5 V70 75 %\nBrownout protection\nVth Threshold voltage Voltage falling (turn-off) 0.432 0.450 0.468 V\n Voltage rising (turn-on) 0.452 0.485 0.518 V\nIHys Current hysteresis Vcc > 5 V, VVFF =  0 . 3  V 1 21 51 8µ A\nVAC_OK_CL Clamp level(1) IAC_OK = 100 µA 3 3.15 3.3 V\nLine voltage feedforward\nIVFF Input bias currentVVFF = 0 to 3 V, VZCD < VZCDth -1 µA\nVZCD > VZCDth -0.7 -1 mA\nVVFF Linear operation range 0 to 3 V\nVOFF IC disable voltage 3 3.15 3.3 V\nVVFFlatch Latch-off/clamp level VZCD > VZCDth 6.4 V\nKc Control voltage gain (3)VVFF = 1 V, VCOMP = 4 V 0.4 V/V\nKFF Feedforward gain (3)VVFF = 1 V, VCOMP = 4 V 0.04 V/V\nCurrent sense comparator\nICS Input bias current VCS = 0 -1 µA\ntLEB Leading edge blanking 150 250 300 ns\ntd(H-L) Delay to output 100 ns\nVCSx Overcurrent setpointVCOMP = VCOMPHI , VVFF = 0 V 0.92 1 1.08\nV VCOMP = VCOMPHI , VVFF = 1.5 V 0.45 0.5 0.55\nVCOMP = VCOMPHI , VVFF = 3.0 V 0 0.1\nVCSdis Hiccup-mode OCP level(1)1.4 1.5 1.6 VTable 4. Electrical characteristics  (continued)\nSymbol Parameter Test condition Min. Typ. Max. Unit\nElectrical characteristics L6566A\n14/52 Doc ID 13794 Rev 4PWM control\nVCOMPHI Upper clamp voltage ICOMP  = 0 5.7 V\nVCOMPLO Lower clamp voltage ISOURCE = -1 mA 2.0 V\nVCOMPSH Linear dynamics upper limit(1) VVFF =  0  V 4 . 855 . 2V\nICOMP Max. source current VCOMP  = 3.3 V 320 400 480 µA\nRCOMP Dynamic resistance VCOMP  = 2.6 to 4.8 V 25 k Ω\nVCOMPBM Burst-mode threshold(1) 2.52 2.65 2.78\nV(1) MODE/SC = open 2.7 2.85 3\nHys Burst-mode hysteresis 20 mV\nICLAMPL Lower clamp capability VCOMP  = 2 V -3.5 -1.5 mA\nVCOMPOFF Disable threshold Voltage falling 1.4 V\nZero current detector/overvoltage protection\nVZCDH Upper clamp voltage IZCD = 3 mA 5.4 5.7 6 V\nVZCDL Lower clamp voltage IZCD = - 3 mA -0.4 V\nVZCDA Arming voltage(1) positive-going edge 85 100 115 mV\nVZCDT Triggering voltage(1) negative-going edge 30 50 70 mV\nIZCD Internal pull-upVCOMP < VCOMPSH -1\nµA\nVZCD < 2 V, VCOMP = VCOMPHI -130 -100 -70\nIZCDsrc Source current capability VZCD = VZCDL -3 mA\nIZCDsnk Sink current capability VZCD = VZCDH 3m A\nTBLANK1 Turn-on inhibit time After gate-drive going low 2.5 µs\nVZCDth OVP threshold 4.85 5 5.15 V\nTBLANK2 OVP strobe delay After gate-drive going low 2 µs\nLatched shutdown function\nIOTP Input bias current VDIS = 0 to VOTP -1 µA\nVOTP Disable threshold(1)4.32 4.5 4.68 V\nThermal shutdown\nVth Shutdown threshold 180 °C\nHys Hysteresis 40 °C\nVCC_PFC function\nIleak OFF-state leakage current VCOMP = 2.5 V, VVcc_PFC = 0 1 µA\nVVcc -\nVVcc_PFCON-state voltage dropoutVCOMP = 4 V, I VCC_PFC = 10 \nmA0.15 0.3 VTable 4. Electrical characteristics  (continued)\nSymbol Parameter Test condition Min. Typ. Max. Unit\nL6566A Electrical characteristics\nDoc ID 13794 Rev 4 15/52VCOMPOLevel for pin 6 open and lower \nUVLO off threshold (COMP \nvoltage falling)(1) 2.61 2.75 2.89 V\n(1) MODE/SC = open 3.02 3.15 3.28\nVCOMPLLevel for pin 6 closed and \nhigher UVLO off threshold \n(COMP voltage rising)(1) 2 . 93 . 0 53 . 2 V\n(1) MODE/SC = open 3.41 3.55 3.69\nTdelay Pin 6 change of state delay Closed-to-open 10 ms\nMode selection/slope compensation\nMODE th Threshold for QR operation 3 V\nSCpkRamp peak\n(MODE/SC = open)RS-COMP  = 3 k Ω to GND, GD \npin high, VCOMP  = 5 V1.7 V\nSCvyRamp starting value\n(MODE/SC = open)RS-COMP  = 3 k Ω to GND,\nGD pin high0.3 V\nRamp voltage\n(MODE/SC = open)GD pin low 0 V\nSource capability\n(MODE/SC = open)VS-COMP = VS-COMPpk 0.8 mA\nSoft-start\nISS1\nCharge currentTJ = 25 °C, VSS < 2 V, \nVCOMP  = 4 V14 20 26\nµA\nISS2TJ = 25 °C, VSS > 2 V, \nVCOMP  = VCOMPHi3 . 556 . 5\nISSdis Discharge current VSS >  2  V 3 . 556 . 5 µ A\nVSSclamp High saturation voltage VCOMP  = 4 V 2 V\nVSSDIS Disable level(1) VCOMP  = VCOMPHi 4 . 8 555 . 1 5V\nVSSLAT Latch-off level VCOMP  = VCOMPHi 6.4 V\nGate driver\nVGDH Output high-voltage IGDsource  = 5 mA, Vcc = 12 V 9.8 11 V\nVGDL Output low-voltage IGDsink  = 100 mA 0.75 V\nIsourcepk Output source peak current -0.6 A\nIsinkpk Output sink peak current 0.8 A\ntf Fall time 40 ns\ntr Rise time 50 ns\nVGDclamp Output clamp voltage IGDsource  = 5 mA; Vcc = 20 V 10 11.3 15 V\nUVLO saturation Vcc = 0 to V ccon, Isink = 1 mA 0.9 1.1 V\n1. Parameters tracking one another.\n2. See Table 6 on page 41  and Table 7 on page 45 .\n3. The voltage feedforward block output is given by: Table 4. Electrical characteristics  (continued)\nSymbol Parameter Test condition Min. Typ. Max. Unit\n()VFF FF COMP cs VK5.2 VKc V − − =\nApplication information L6566A\n16/52 Doc ID 13794 Rev 45 Application information\nThe L6566A is a versatile peak-current-mode PWM controller specific to offline flyback \nconverters. The device allows either fixed-frequency (FF) or quasi-resonant (QR) operation, \nselectable with the MODE/SC pin (12): forcing the voltage on the pin over 3 V (e.g. by tying it to the 5 V reference externally available at the VREF pin, 10) activates QR operation, otherwise the device is FF-operated.\nIrrespective of the operating option selected by pin 12, the device is able to work in different \nmodes, depending on the converter\'s load conditions. If QR operation is selected (see Figure 4 ):\n1. QR mode at heavy load. Quasi-resonant operation lies in synchronizing MOSFET turn-\non to the transformer\'s demagnetization by detecting the resulting negative-going edge of the voltage across any winding of the transformer. The system then works close to the boundary between discontinuous (DCM) and continuous conduction (CCM) of the transformer. As a result, the switching frequency is different for different line/load conditions (see the hyperbolic-like portion of the curves in Figure 4 ). Minimum turn-on \nlosses, low EMI emission, and safe behavior in short-circuit are the main benefits of this kind of operation. \n2. Valley-skipping mode at medium/light load. The externally programmable oscillator of \nthe L6566A, synchronized to MOSFET turn-on, enables the designer to define the maximum operating frequency of the converter. As the load is reduced, MOSFET turn-on no longer occurs on the first valley but on the second one, the third one, and so on. In this way the switching frequency no longer increases (piecewise linear portion in Figure 4 ). \n3. Burst-mode with no or very light load. When the load is extremely light or disconnected, \nthe converter enters a controlled on/off operation with constant peak current. Decreasing the load then results in frequency reduction, which can go down even to a few hundred hertz, therefore minimizing all frequency-related losses and making it easier to comply with energy saving regulations or recommendations. Having the peak current very low, no issue of audible noise arises.\nFigure 4. Multi-mode operation with QR option active\n \n00fsw\n Pinmax Input voltage \nPinfosc\nBurst-modeValley-skipping\nmode\nQuasi-resonant mode\nL6566A Application information\nDoc ID 13794 Rev 4 17/52If FF operation is selected:\n1. FF mode from heavy to light load. The system operates exactly like a standard current \nmode, at a frequency fsw determined by the externally programmable oscillator: both \nDCM and CCM transformer operations are possible, depending on whether the power that it processes is greater or less than:\nEquation 1\nwhere Vin is the input voltage to the converter, V\nR the reflected voltage (i.e. the \nregulated output voltage times the primary-to-secondary turn ratio) and Lp the inductance of the primary winding. Pin\nT is the power level that marks the transition from \ncontinuous to discontinuous operation mode of the transformer.\n2. Burst-mode with no or very light load. This kind of operation is activated in the same \nway and results in the same behavior as previously described for QR operation. \nThe L6566A is specifically designed for flyback converters operated from front-end power \nfactor correction (PFC) stages in applications in compliance with EN61000-3-2 or JEITA-MITI regulations. Pin 6 (Vcc_PFC) provides the supply voltage to the PFC control IC.\n5.1 High-voltage startup generator\nFigure 5  shows the internal schematic of the high-voltage startup generator (HV generator). \nIt is made up of a high-voltage N-channel FET, with a gate biased by a 15 M Ω resistor, with \na temperature-compensated current generator connected to its source.\nFigure 5. High-voltage startup generator: internal schematicLpf2V VinVVin\nPin\nsw2\nRR\nT⎟⎟\n⎠⎞\n⎜⎜\n⎝⎛\n+=\nL6566A 15 M Ω\nGNDHV\nVcc 5\n31\nIchargeVcc_OK\nIHV\nCONTRO LHV_EN\nApplication information L6566A\n18/52 Doc ID 13794 Rev 4With reference to the timing diagram of Figure 6 , when power is first applied to the converter \nthe voltage on the bulk capacitor (Vin) builds up and, at about 80 V, the HV generator is enabled to operate (HV_EN is pulled high) so that it draws about 1 mA. This current, minus the device’s consumption, charges the bypass capacitor connected from pin Vcc (5) to ground and causes its voltage to rise almost linearly. \nFigure 6. Timing diagram: normal power-up and power-down sequences\nAs the Vcc voltage reaches the startup threshold (14 V typ.) the low-voltage chip starts operating and the HV generator is cut off by the Vcc_OK signal asserted high. The device is powered by the energy stored in the Vcc capacitor until the self-supply circuit (typically an auxiliary winding of the transformer and a steering diode) develops a voltage high enough to sustain the operation. The residual consumption of this circuit is just the one on the 15 M Ω \nresistor ( ≈10 mW at 400 Vdc), typically 50-70 times lower, under the same conditions, as \ncompared to a standard startup circuit made with external dropping resistors.\nAt converter power-down the system loses regulation as soon as the input voltage is so low \nthat either peak current or maximum duty cy cle limitation is tripped. Vcc then drops and \nstops IC activity as it falls below the UVLO threshold (10 V typ.). The Vcc_OK signal is de-asserted as the Vcc voltage goes below a threshold Vcc\nrestart  located at about 5 V. The HV \ngenerator can now restart. However, if Vin < Vinstart, as illustrated in Figure 6 , HV_EN is de-\nasserted too and the HV generator is disabled. This prevents converter restart attempts and ensures monotonic output voltage decay at power-down in systems where brownout protection (see \nSection 5.12 ) is not used.\nThe low restart threshold Vccrestart  ensures that, during short-circuits, the restart attempts of \nthe device have a very low repetition rate, as shown in the timing diagram of Figure 7 on \npage 19 , and that the converter works safely with extremely low power throughput. \nVcc\n(pin 5)\nGD\n(pin 4)\nHV_ENVcc ON\nVcc OFF\nVcc restart\nt\nt\nttVin\nVHVstart\nIcharge\n0.85 mAt\ntVcc_OK\n Power-on  Power-off  Normal\noperationregulation is lost here\nVcc_PFC\n(pin 6) heavy loadlight load\nL6566A Application information\nDoc ID 13794 Rev 4 19/52Figure 7. Timing diagram showing short-circ uit behavior (SS pin clamped at 5 V)\nFigure 8. Zero current detection block, triggering block, oscillator block and \nrelated logic Vcc\n(pin 5)\nGD\n(pin 4)\nVcc_OKVcc ON\nVcc OFF\nVcc restart\nIcharge\n0.85 mAShort circuit occurs here\nt\nt\nt\nt Trep \n < 0.03T rep \n \n100 mV\n50 mVDRIV ER\n+-5.7VZCDPWM\nGDR\nSQBLANKING\nTIMECOMP\n+Vin\nQL6566A\n5V-+MONO\nSTABLERZ1blanking\nSTART\nRZ2CSVFF\nTURN-ON\nLOGIC\n4:1\nCounterStrobe\nFAULT\nS/HResetline\nFFWD\nOSCILLATOR\nOSC\nRT91 5\n7\n4\n1311\nRs\nApplication information L6566A\n20/52 Doc ID 13794 Rev 45.2 Zero current detection and triggering block; oscillator block\nThe zero current detection (ZCD) and triggering blocks switch on the external MOSFET if a \nnegative-going edge falling below 50 mV is applied to the input (pin 11, ZCD). To do so the triggering block must be previously armed by a positive-going edge exceeding 100 mV.\nThis feature is typically used to detect transformer demagnetization for QR operation, where \nthe signal for the ZCD input is obtained from the transformer’s auxiliary winding used also to supply the L6566A. The triggering block is blanked for T\nBLANK = 2.5 µs after MOSFET turn-\noff to prevent any negative-going edge that follows leakage inductance demagnetization from triggering the ZCD circuit erroneously. \nThe voltage at the pin is both top and bottom limited by a double clamp, as illustrated in the \ninternal diagram of the ZCD block of \nFigure 8 . The upper clamp is typically located at 5.7 V, \nwhile the lower clamp is located at -0.4 V. The interface between the pin and the auxiliary winding is a resistor divider. Its resistance ratio is properly chosen (see \nSection 5.11 ) and \nthe individual resistance values (RZ1, RZ2) are such that the current sourced and sunk by \nthe pin be within the rated capability of the internal clamps ( ± 3 mA).\nAt converter power-up, when no signal is coming from the ZCD pin, the oscillator starts up \nthe system. The oscillator is programmed externally by means of a resistor (RT) connected \nfrom pin OSC (13) to ground. With good approximation the oscillation frequency fosc is:\nEquation 2\n(with fosc in kHz and RT in kW). As the device is turned on, the oscillator starts immediately; \nat the end of the first oscillator cycle, the vo ltage on the ZCD pin being zero, the MOSFET is \nturned on, therefore starting the first switching cycle right at the beginning of the second oscillator cycle. At any switching cycle, the MOSFET is turned off as the voltage on the \ncurrent sense pin (CS, 7) hits an internal reference set by the line feedforward block, and the transformer starts demagnetization. If this completes (so a negative-going edge appears on the ZCD pin) after a time exceeding one oscillation period T\nosc=1/fosc from the previous turn-\non, the MOSFET is turned on again - with some delay to ensure minimum voltage at turn-on – and the oscillator ramp is reset. If, instead, the negative-going edge appears before T\nosc \nhas elapsed, it is ignored and only the first negative-going edge after Tosc turns on the \nMOSFET and synchronizes the oscillator. In this way one or more drain ringing cycles are skipped (“valley-skipping mode”, \nFigure 9 ) and the switching frequency is prevented from \nexceeding fosc.\n         T3\noscR102f⋅≈\nFigure 9. Drain ringing cycle skipping as the load is gradually reduced\n         \n \nPin= P in\'\n(limit condition) Pin= P in\'\'< P in\' Pin= P in\'\'\'< P in\'\'tVDS\n TFW \n Tosc  TV  TON tVDS\n Tosc tVDS\n Tosc \nL6566A Application information\nDoc ID 13794 Rev 4 21/52Note: When the system operates in valley skipping-mode, uneven switching cycles may be \nobserved under some line/load conditions, due to the fact that the OFF-time of the MOSFET is allowed to change with discrete steps of one ringing cycle, while the OFF-time needed for cycle-by-cycle energy balance may fall in between. Therefore one or more longer switching cycles is compensated by one or more shorter cycles, and vice versa. However, this mechanism is absolutely normal and there is no appreciable effect on the performance of the converter or on its output voltage. \nIf the MOSFET is enabled to turn on but the amplitude of the signal on the ZCD pin is \nsmaller than the arming threshold for some reason (e.g. a heavy damping of drain oscillations, like in some single-stage PFC topologies, or when a turn-off snubber is used), MOSFET turn-on cannot be triggered. This case is identical to what happens at startup: at the end of the next oscillator cycle the MOSFET is turned on, and a new switching cycle takes place after skipping no more than one oscillator cycle.\nThe operation described so far does not consider the blanking time T\nBLANK  after MOSFET \nturn-off, and actually TBLANK  does not come into play as long as the following condition is \nmet:\nEquation 3\nwhere D is the MOSFET duty cycle. If this condition is not met, nothing changes substantially: the time during which MOSFET turn-on is inhibited is extended beyond T\nosc by \na fraction of TBLANK . As a consequence, the maximum switching frequency is a little lower \nthan the programmed value fosc and valley-skipping mode may take place slightly earlier \nthan expected. However this is quite unusual: setting fosc = 150 kHz, the phenomenon can \nbe observed at duty cycles higher than 60%. See Section 5.11  for further implications of \nTBLANK . \nIf the voltage on the COMP pin (9) saturates high, which reveals an open control loop, an \ninternal pull-up keeps the ZCD pin close to 2 V during MOSFET OFF-time to prevent noise from false triggering the detection block. When this pull-up is active, the ZCD pin may not be able to go below the triggering threshold, which would stop the converter. To allow auto-restart operation, while ensuring minimum operating frequency in these conditions, the oscillator frequency that retriggers MOSFET turn-on is that of the external oscillator divided by 128. Additionally, to prevent malfunction at converter startup, the pull-up is disabled during the initial soft-start (see \nSection 5.10 ). However, to ensure a correct startup, at the \nend of the soft-start phase, the output voltage of the converter must meet the condition:\nEquation 4\nwhere Ns is the turn number of the secondary winding, Naux the turn number of the auxiliary winding, and I\nZCD the maximum pull-up current (130 μA).oscBLANK\nTT1D −≤\nZCD1ZIRNauxNsVout >\nApplication information L6566A\n22/52 Doc ID 13794 Rev 4The operation described so far under different operating conditions for the converter is \nillustrated in the timing diagrams of Figure 10 .\nIf the FF option is selected, the operation is exactly equal to that of a standard current-mode \nPWM controller. It works at a frequency fsw = fosc; both DCM and CCM transformer operations are possible, depending on the operating conditions (input voltage and output load) and on the design of the power stage. The MOSFET is turned on at the beginning of each oscillator cycle and is turned off as the voltage on the current sense pin reaches an internal reference set by the line feedforward block. The maximum duty cycle is limited at 70% minimum. The signal on the ZCD pin in this case is used only for detecting feedback loop failures (see \nSection 5.11 ). \nFigure 10. Operation of ZCD, triggering and oscillator blocks (QR option active)\n         \n \na) full loadGD\n(pin 4)ZCD\nblanking\ntimeZCD\n(pin 11)\nOscillator\nramp\nPWM latch\nSet\nPWM latch\nResetON-enableArm /Trigger50 mV100 mV\narmed trigger\nb) light loadZCD\nblanking\ntime\nPWM latch\nSet\nPWM latch\nResetON-enableArm /Trigger50 mV100 mV\nOscillator\nramp\nGD\n(pin 4)ZCD\n(pin 11)\nc) start-upZCD\nblanking\ntime\nPWM latch\nSet\nPWM latch\nResetON-enableArm/Trigger50 mV100 mV\nOscillator\nramp\nGD\n(pin 4)ZCD\n(pin 11)\nL6566A Application information\nDoc ID 13794 Rev 4 23/525.3 Burst-mode operation at no load or very light load\nWhen the voltage at the COMP pin (9) falls 20 mV below a threshold fixed internally at a \nvalue, VCOMPBM , depending on the selected operating mode, the L6566A is disabled with \nthe MOSFET kept in OFF-state and its consumption reduced at a lower value to minimize Vcc capacitor discharge. \nThe control voltage now increases as a result of the feedback reaction to the energy delivery \nstop (the output voltage is slowly decaying), the threshold is exceeded and the device restarts switching again. In this way the converter works in burst-mode with a nearly constant peak current defined by the internal disable level. A load decreases and then causes a frequency reduction, which can go down even to a few hundred hertz, therefore minimizing all frequency-related losses and making it easier to comply with energy saving regulations. This kind of operation, shown in the timing diagrams of \nFigure 11  along with the \nothers previously described, is noise-free since the peak current is low. \nIf it is necessary to decrease the intervention threshold of the burst-mode operation, this can \nbe done by adding a small DC offset on the current sense pin as shown in Figure 12 . \nNote: The offset reduces the available dynamics of the current signal; thereby, the value of the \nsense resistor must be determined taking this offset into account.\nFigure 11. Load-dependent operating modes: timing diagrams\nGD\n(pin 4)VCOMPBM\nt\nt\ntCOMP\n(pin 9)\n20 mV\nhyster.\n QR Mode \n Valley -skipping Mode  Burst-mode fswfosc\n QR Mode  FF Mode  Burst-mode  FF Mode MODE/SC=Open\nMODE/SC=VREFMODE/SC=Open\nMODE/SC=VREF\nApplication information L6566A\n24/52 Doc ID 13794 Rev 4Figure 12. Addition of an offset to the current sense lowers the burst-mode \noperation threshold\n5.4 Adaptive UVLO\nA major problem when optimizing a converter for minimum no-load consumption is that the \nvoltage generated by the auxiliary winding under these conditions falls considerably as compared even to few mA load. This very often causes the supply voltage Vcc of the control IC to drop and go below the UVLO threshold so that the operation becomes intermittent, which is undesired. Furthermore, this must be traded off against the need of generating a voltage not exceeding the maximum allowed by the control IC at full load.\nTo help the designer overcome this problem, the device, besides reducing its own \nconsumption during burst-mode operation, also features a proprietary adaptive UVLO function. It consists of shifting the UVLO threshold downwards at light load, namely when the voltage at the COMP pin falls below a threshold V\nCOMPO  internally fixed (see \nSection 5.8 ), so as to have more headroom. To prevent any malfunction during transients \nfrom minimum to maximum load, the normal (higher) UVLO threshold is re-established when the voltage at the COMP pin exceeds V\nCOMPL  (see Section 5.8 ) and Vcc has \nexceeded the normal UVLO threshold (see Figure 13 ). The normal UVLO threshold ensures \nthat at full load the MOSFET is driven with a proper gate-to-source voltage. \n         RsL6566A\nRVref\nRc10\n4\n7 3Vcso= VrefR\nR + Rc\nFigure 13. Adaptive UVLO block\n         \n \nVCOM PL\nVCOM POVCOMP\n(pin 9)\nVcc\n(pin 5)\nQVcc OFF1\nVcc OFF2t\nt\nt\ntVcc_PFC\n(pin 6)Tdelay\n(*) Vcc OFF2 < Vcc OFF1is selected when Q is high\n+-UVLO\nVcc OFF1Vcc\nL6566ACOMPR\nS          Q+\n-\n+-\nVcc OFF2\n(*)SW5\n9\nVCOMPL\nVCOMPOVcc_PFC\nlogicVcc_PFC\n6\nL6566A Application information\nDoc ID 13794 Rev 4 25/525.5 PWM control block\nThe device is specific to secondary feedback. Typically, there is a TL431 on the secondary \nside and an optocoupler that transfers output voltage information to the PWM control on the primary side, crossing the isolation barrier. The PWM control input (pin 9, COMP) is driven directly by the phototransistor’s collector (the emitter is grounded to GND) to modulate the duty cycle (\nFigure 14 , left-hand side circuit).\nIn applications where a tight output regulation is not required, it is possible to use a primary-\nsensing feedback technique. In this approach the voltage generated by the self-supply winding is sensed and regulated. This solution, shown in \nFigure 14 , right-hand side circuit, \nis cheaper because no optocoupler or secondary reference is needed, but output voltage regulation, especially as a result of load changes, is quite poor. Ideally, the voltage generated by the self-supply winding and the output voltage should be related by the Naux/Ns turn ratio only. In fact, numerous non-idealities, mainly transformer parasitics, cause the actual ratio to deviate from the ideal one. Line regulation is quite good, in the range of ± 2%, whereas load regulation is about ± 5% and output voltage tolerance is in the range of ±10%.\nThe dynamic of the pin is in the 2.5 to 5 V range. The voltage at the pin is clamped \ndownwards at about 2 V. If the clamp is externally overridden and the voltage on the pin is pulled below 1.4 V, the L6566A shuts down. This condition is latched as long as the device is supplied. While the device is disabled, however, no energy is coming from the self-supply circuit, therefore the voltage on the Vcc capacitor decays and crosses the UVLO threshold after some time, which clears the latch and lets the HV generator restart. This function is intended for an externally controlled burst-mode operation at light load with a reduced output voltage, a technique typically used in multi-output SMPS, such as those for CRT TVs or monitors (see the timing diagram \nFigure 15 ).\nFigure 14. Possible feedback configurations that can be used with the L6566A\n Vout\nTL431L6566A\n9\nCOMPL6566A5     Vcc\nNaux9\nCOMPCs\nSecondary feedback Primary feedback\nApplication information L6566A\n26/52 Doc ID 13794 Rev 4Figure 15. Externally controlled burst-mode operation by driving the COMP pin: \ntiming diagram\n5.6 PWM comparator, PWM latch and voltage feedforward blocks\nThe PWM comparator senses the voltage across the current sense resistor Rs and, by \ncomparing it to the programming signal delivered by the feedforward block, determines the exact instant when the external MOSFET must be switched off. Its output resets the PWM latch, previously set by the oscillator or the ZCD triggering block, which asserts the gate-driver output low. The use of PWM latch avoids  spurious switching of the MOSFET that may \nresult from the noise generated (“double-pulse suppression”). \nCycle-by-cycle current limitation is realized with a second comparator (OCP comparator) \nthat also senses the voltage across the current sense resistor Rs and compares this voltage to a reference value V\nCSX. Its output is OR-ed with that of the PWM comparator (see the \ncircuit schematic in Figure 17 ). In this way, if the programming signal delivered by the \nfeedforward block and sent to the PWM comparator exceeds VCSX, it is the OCP comparator \nthat first resets the PWM latch instead of the PWM comparator. The value of Vcsx, thereby, determines the overcurrent setpoint along with the sense resistor Rs.\nThe power that QR flyback converters with a fixed overcurrent setpoint (like fixed-frequency \nsystems) are able to deliver changes considerably with the input voltage. Obviously, this is not a problem if the flyback converter runs off a fixed voltage bus generated by the PFC pre-regulator; however, with a tracking boost PFC (a “boost follower” PFC), the regulated output voltage at maximum mains voltage can be even twice the value at minimum mains voltage. In this case the issue remains, although it is not as great as without PFC and wide-range mains. With a 1: 2 voltage change, the maximum transferable power at maximum line can  Vcc\n(pin 5)\nGD\n(pin 4)\nVcc_OKVcc ON\nVcc OFF\nVcc restart\nIcharge\n0.85 mAStandby is commanded here\nt\nt\nt\nt\ntVcc_PFC\n(pin 6)tCOMP\n(pin 9)\ntVout\nL6566A Application information\nDoc ID 13794 Rev 4 27/52be 50% higher than at minimum line, as shown by the upper curve in the diagram of \nFigure 16 . The L6566A has the line feedforward function available to solve this issue.\nFigure 16. Typical power capability chan ge vs. input voltage in QR flyback \nconverters \nIt acts on the overcurrent setpoint V csx, so that it is a function of the converter’s input voltage \nVin (output of the PFC pre-regulator) sensed through a dedicated pin (15, VFF): the higher the input voltage, the lower the setpoint. This is illustrated in the diagram on the left-hand side of \nFigure 17 : it shows the relationship between the voltage on the VFF and V csx pin \n(with the error amplifier saturated high in an attempt to maintain the output voltage regulation): \nEquation 5\nNote: If the voltage on the pin exceeds 3 V, switching ceases but the soft-start capacitor is not \ndischarged. The schematic in Figure 17  also shows how the function is included in the \ncontrol loop.\nWith a proper selection of the external divider R1-R2, i.e. of the ratio k = R2 / (R1+R2), it is \npossible to achieve the optimum compensation described by the lower curve in the diagram of \nFigure 16 . \nThe optimum value of k, kopt, which minimizes the power capability variation over the input \nvoltage range, is the one that provides equal power capability at the extremes of the range. The exact calculation is complex, and non-idealities shift the real-world optimum value from the theoretical one. It is therefore more practical to provide a first cut value, easily calculated, and then to fine-tune experimentally.\nAssuming that the system operates exactly at the boundary between DCM and CCM, and \nneglecting propagation delays, the following expression for k\nopt can be found:Vin\nVinminPinlim@ V in\nPinlim@ V inmin\n1 1.5 2 2.5 3 3.5 40.511.522.5\n sy stem optimally  \ncompensatedsy stem not\n compensated k = 0\nk = k optk\nVin3k13V1 VVFF\ncsx −= −=\nApplication information L6566A\n28/52 Doc ID 13794 Rev 4Equation 6\nExperience shows that this value is typically lower than the real one. Once the maximum \npeak primary current, IPKpmax , occurring at minimum input voltage Vinmin has been found, \nthe value of Rs can be determined from (2):\nEquation 7\nThe converter is then bench tested to find the output power level Poutlim where regulation is \nlost (because overcurrent is being tripped) both at Vin = Vinmin and Vin = Vinmax. \nIf Pout lim @ Vin max > Pout lim @ Vin min the system is still undercompensated and k needs to \nincrease; if Pout lim @ Vin max < Pout lim @ Vin min the system is overcompensated and k \nneeds to decrease. This continues until the difference between the two values is acceptably low. Once the true k\nopt is found in this way, it is possible that Pout lim turns out slightly \ndifferent from the target; to correct this, the sense resistor Rs needs adjusting and the above tuning process is repeated with the new Rs value. Typically, a satisfactory setting is achieved in no more than a couple of iterations. \nIn applications where this function is not wanted, e.g. because the PFC stage regulates at a \nfixed voltage, the VFF pin can be simply grounded, directly or through a resistor, depending on whether one wants the OVP function to be auto-restart or latched mode (see \nSection 5.11 ). The overcurrent setpoint is then fixed at the maximum value of 1 V. If a lower \nsetpoint is desired to reduce the power dissipation on Rs, the pin can be also biased at a fixed voltage using a divider from VREF (pin 10).()R maxin minin maxin mininR\noptV V V V VV3 k⋅ + + ⋅⋅=\nmaxPKpmininopt\nIV3k1\nRs−\n=\nFigure 17. Left: overcurrent setpoint vs. VFF voltage; right: line feedforward function block\n         \n Vcsx [V]\n00 . 511 . 522 . 533 . 500.20.40.60.811.2\nVVFF [V]VCOMP= Upper clamp\n7\n915RsPFC Output Bus\nDRIVER4R\nSQR1B\nR2\nCOMPVFF CS\nGD\nL6566A1.5 V\n+-HiccupDISABLEVOLTAGE\nFEED\nFORWARDTo PFC\'s OV\nsensi ngOptional for\nOVP settings\nOCP\n+-PWM\n+-\nVcsx Clock/ZCDR1A\nL6566A Application information\nDoc ID 13794 Rev 4 29/52If the FF option is selected, the line feedforward function can be still used to compensate for \nthe total propagation delay Td of the current sense chain (internal propagation delay td(H-L) \nplus the turn-off delay of the external MOSFET), which in standard current mode PWM controllers is done by adding an offset on the current sense pin proportional to the input voltage. In that case, the divider ratio k, which is much smaller when compared to that used with the QR option selected, can be calculated with the following equation:\nEquation 8\nwhere Lp is the inductance of the primary winding. In case a constant maximum power capability vs. the input voltage is not required, the VFF pin can be grounded, directly or through a resistor (see \nSection 5.11 ), therefore fixing the overcurrent setpoint at 1 V, or \nbiased at a fixed voltage through a divider from VREF to get a lower setpoint.\nIt is possible to bypass the pin to ground with a small film capacitor (e.g. 1-10 nF) to ensure \na clean operation of the IC even in a noisy environment.\nThe pin is internally forced to ground during UVLO, after activating any latched protection \nand when the COMP pin is pulled below its low clamp voltage (see Section 5.5 ).\n5.7 Hiccup-mode OCP\nA third comparator senses the voltage on the current sense input and shuts down the device if the voltage on the pin exceeds 1.5 V, a level well above that of the maximum overcurrent setpoint (1 V). Such an anomalous condition is typically generated by either a short-circuit of the secondary rectifier or a shorted secondary winding, or a hard-saturated flyback transformer. \nTo distinguish an actual malfunction from a disturbance (e.g. induced during ESD tests), the \nfirst time the comparator is tripped, the protection circuit enters a “warning state”. If, in the next switching cycle, the comparator is not tripped, a temporary disturbance is assumed and the protection logic is reset in its idle state; if the comparator is tripped again a real malfunction is assumed and the L6566A is stopped. Depending on the time relationship between the detected event and the oscillator, occasionally the device may stop after the third detection. \nThis condition is latched as long as the device is supplied. While it is disabled, however, no \nenergy is coming from the self-supply circuit; so the voltage on the Vcc capacitor decays and crosses the UVLO threshold after some time, which clears the latch. If the internal startup generator is still off, then the Vcc voltage still needs to go below its restart voltage before the Vcc capacitor is charged again and the device restarted. Ultimately, this results in a low-frequency intermittent operation (hiccup-mode operation), with very low stress on the power circuit. This special condition is illustrated in the timing diagram of \nFigure 18 .LpRsTd3 kopt=\nApplication information L6566A\n30/52 Doc ID 13794 Rev 4Figure 18. Hiccup-mode OCP: timing diagram\n5.8 PFC interface\nThe device is specifically designed to minimize converter losses under light or no-load \nconditions, and a special function has been provided to help the designer meet energy saving requirements even in power-factor-corrected systems where a PFC pre-regulator precedes the isolated DC-DC converter.\nIn fact, EMC regulations require compliance with low-frequency harmonic emission limits at \nnominal load; no limit is envisaged when the converter operates with a light load. Then the PFC pre-regulator can be turned off, therefore saving the no-load consumption of this stage (0.5÷1 W).\nTo do so, the L6566A provides the Vcc_PFC pin (6): this pin is internally connected to the \nVcc pin (5) via a PNP transistor, normally closed, that opens when the voltage V\nCOMP  falls \nbelow VCOMPO , a threshold internally set at a value depending on whether QR operation or \nFF operation is selected. This pin is intended for supplying the PFC controller of the pre-regulator as shown in \nFigure 16 . The switch is thermally protected, so that the IC stops if an \nexternal failure causes the pin to be overloaded for too long a time or shorted to ground. Vcc\n(pin 5)\nGD\n(pin 4)\nOCP latchVcc ON\nVcc OFF\nVcc restartSecondary diode is shorted here\nt\nt\nt\ntVCS\n(pin 7)\nVcc_OK\nt1.5 V\nVcc_PFC\n(pin 6)\nt\nL6566A Application information\nDoc ID 13794 Rev 4 31/52Figure 19. Possible interfaces between the L6566A and a PFC controller\nTo prevent intermittent operation of the PFC stage, some hysteresis is provided: if the \ninternal switch is open, it is closed (which re-enables the PFC pre-regulator) when VCOMP  \nexceeds VCOMPL  > VCOMPO . Additionally, to reject VCOMP  undershoots during transients, \nVCOMP  must stay below VCOMPO  for more than 1024 oscillator cycles in order for the \nVcc_PFC pin to open. Entering burst-mode (VCOMP  < VCOMPBM ) opens Vcc_PFC \nimmediately.\nBesides pin 6 going open, when VCOMP  falls below VCOMPO  the UVLO threshold is set 2.4 V \nbelow to compensate for the drop of the voltage delivered by the self-supply circuit that occurs at light load (see \nSection 5.4 ).\n5.9 Latched disable function\nThe device is equipped with a comparator having the non-inverting input externally available at the DIS pin (8) and with the inverting input internally referenced to 4.5 V. As the voltage on the pin exceeds the internal threshold, the device is immediately shut down and its consumption reduced to a low value. \nThe information is latched and it is necessary to let the voltage on the Vcc pin go below the \nUVLO threshold to reset the latch and restart the device. To keep the latch supplied as long as the converter is connected to the input source, the HV generator is activated periodically so that Vcc oscillates between the startup threshold V\nccON and VccON - 0.5 V. Activating the \nHV generator in this way cuts its power dissipation approximately by three (as compared to the case of continuous conduction) and keeps peak silicon temperature close to the average value.\nTo let the L6566A restart it is then necessary to disconnect the converter from the input \nsource. Pulling pin 16 (AC_OK) below the disable threshold (see \nSection 5.12 ) stops the HV \ngenerator until Vcc falls below Vccrestart , so that the latch can be cleared and a quicker \nrestart is allowed as the input source is removed. This operation is shown in the timing diagram of \nFigure 20 . \nThis function is useful to easily implement a latched overtemperature protection by biasing \nthe pin with a divider from VREF , where the upper resistor is an NTC physically located close to a heating element like the MOSFET, or the transformer. The DIS pin is a high-impedance input, it is therefore prone to pick-up noise, which might give origin to undesired latch-off of the device. It is possible to bypass the pin to ground with a small film capacitor (e.g. 1-10 nF) to prevent any malfunctioning of this kind.  \nL6566AVcc_PFC65Vcc Vcc\nL6566AVcc_PFC6L65635Vcc RUN\n4.7k Ω22 k Ω\n10L6561\nL6562\nL6563\nApplication information L6566A\n32/52 Doc ID 13794 Rev 4Figure 20. Operation after latched di sable activation: timing diagram\n5.10 Soft-start and delayed latched shutdown upon overcurrent\nAt device startup, a capacitor (Css) connected between the SS pin (14) and ground is \ncharged by an internal current generator, ISS1, from zero up to about 2 V where it is \nclamped. During this ramp, the overcurrent setpoint progressively rises from zero to the value imposed by the voltage on the VFF pin 15, (see \nSection 5.6 ); MOSFET conduction \ntime increases gradually, therefore controlling the startup inrush current. The time needed for the overcurrent setpoint to reach its steady-state value, referred to as soft-start time, is approximately:\nEquation 9\nDuring the ramp (i.e. until VSS = 2 V) all the functions that monitor the voltage on the COMP \npin are disabled.\nThe soft-start pin is also invoked whenever the control voltage (COMP) saturates high, \nwhich reveals an open-loop condition for the feedback system. This condition very often occurs at startup, but may be also caused by either a control loop failure or a converter overload/short-circuit. A control loop failure results in an output overvoltage that is handled by the OVP function of the L6566A (see  \nSection 5.11 ). In the case of QR operation, a short-\ncircuit causes the converter to run at a very low frequency, then with very low power capability. This causes the self-supply system that powers the device to switch off, so that  \nVcc\n(pin 5)\nGD\n(pin 4)\nVinVcc ON\nVcc ON -0.5\nt\nt\ntt4.5V\nVcc OFFDIS\n(pin 8)\nVcc restart\nVHVstartHV generator is turned on\nHV generator turn-on is disabled here\nInput source is removed hereVcc_PFC\n(pin 6)\ntAC_OK\n(pin 16)\nVthDisable latch is reset hereRestart is quicker\nt\n⎟⎟\n⎠⎞\n⎜⎜\n⎝⎛− = =3V1ICss) V(VICssTVFF\n1SSVFF csx\n1SSSS\nL6566A Application information\nDoc ID 13794 Rev 4 33/52the converter works intermittently, which is ve ry safe. In case of overload the system has a \npower capability lower than that at nominal load but the output current may be quite high and overstressing the output rectifier. In the case of FF operation the capability is almost unchanged and both short-circuit and overload conditions are more critical to handle. \nThe L6566A, regardless of the operating option selected, makes it easier to handle such \nconditions: the 2 V clamp on the SS pin is removed and a second internal current generator I\nSS2 = ISS1 /4 keeps on charging Css. As the voltage reaches 5 V, the device is disabled, if it \nis allowed to reach 2 VBE over 5 V, the device is latched off. In the former case the resulting \nbehavior is identical to that under short-circuit illustrated in Figure 6 ; in the latter case the \nresult is identical to that of Figure 20 . See Section 5.9  for additional details.\nA diode, with the anode to the SS pin and the cathode connected to the VREF pin (10) is the \nsimplest way to select either auto-restart mode or latch-mode behavior upon overcurrent. If the overload disappears before the Css voltage reaches 5 V, the I\nSS2 generator is turned off \nand the voltage gradually brought back down to 2 V. Refer to Section 6  (Figure 7 ) for \nadditional hints.\nIf latch-mode behavior is desired also for conv erter short-circuit, make sure that the supply \nvoltage of the device does not fall below the UVLO threshold before activating the latch. \nFigure 21  shows soft-start pin behavior under different operating conditions and with \ndifferent settings (latch-mode or auto-restart).\n         \nNote: Unlike other PWM controllers provided with a soft-start pin, in the L6566A, grounding the SS \npin does not guarantee that the gate-driver is disabled. Figure 21. Soft-start pin operation under different operating conditions and settings\n         \ntVcc\n(pin 5)\nSS\n(pin 14)\nt\ntCOMP(pin 9)\nSTART-UP TEMPORARY\n OVERLOADOVERLOADtGD\n(pin 4)\nNORMAL\nOPERATIONNORMAL\nOPERATIONRESTARThere the IC\nshuts downhere the IC\nlatches  off Vcc falls below UVLO \nbefore latching off\nSHUTDOWN\nLATCHED\nAUTORESTART UVLO \n2V5V5V+2Vbe\ntVcc_PFC\n(pin 6)\nApplication information L6566A\n34/52 Doc ID 13794 Rev 45.11 OVP block\nThe OVP function of the L6566A monitors the voltage on the ZCD pin (11) in the MOSFET \nOFF-time, during which the voltage generated by the auxiliary winding tracks the converter output voltage. If the voltage on the pin exceeds an internal 5 V reference, a comparator is triggered, an overvoltage condition is assumed and the device is shut down. An internal current generator is activated that sources 1 mA out of the VFF pin (15). If the VFF voltage is allowed to reach 2 Vbe over 5 V, the L6566A is latched off. See \nSection 5.9  for more \ndetails on the IC’s behavior under these conditions. If the impedance externally connected to pin 15 is so low that the 5+2 V\nBE threshold cannot be reached or if some means is \nprovided to prevent that, the device is able to restart after the Vcc has dropped below 5 V. Refer to \nSection 6  (Table 7 ) for additional hints.\nFigure 22. OVP function: internal block diagram\nFigure 23. OVP function: timing diagram \nFault2-bit\ncounter\nR  Q1\nSMonostable\nM1STROBEOVPCOUT\n2 µs 0.5 µsMonostable\nM2-\n+5 VZCD\nCounter\nresetFF40kΩ\n5pFPWM latch\nQ\nQ SR11to triggering\nblockL6566A\n \ntGD\n(pin 4)\nVaux\n5Vt\ntt\nSTROBE\nt\nCOUNTER\nRESETt\nCOUNTER\nSTATUSt0\nZCD\n(pin 11)\n2 µs 0.5 µs\nOVP\ntFAULT00 00  →11  →22  →00  →11  →22  →33  →4 0\nNORMAL OPERATION TEMPORARY DISTURBANCE FEEDBACK LOOP FAILUREtCOUT\nVcc_PFC\n(pin 6)t\nL6566A Application information\nDoc ID 13794 Rev 4 35/52The ZCD pin is connected to the auxiliary winding through a resistor divider RZ1, RZ2 (see \nFigure 8 ). The divider ratio kOVP = RZ2 / (RZ1 + RZ2) is chosen equal to:\nEquation 10\nwhere VoutOVP is the output voltage value that is to activate the protection, Ns is the turn \nnumber of the secondary winding and Naux is the turn number of the auxiliary winding. The value of R\nZ1 is such that the current sourced by the ZCD pin be within the rated capability of \nthe internal clamp:\nEquation 11\nwhere Vinmax is the maximum DC input voltage and Ns the turn number of the primary \nwinding. See Section 5.2  for additional details. \nTo reduce sensitivity to noise and prevent the latch from being erroneously activated, first \nthe OVP comparator is active only for a small time window (typically, 0.5 µs), starting 2 µs after MOSFET turn-off, to reject the voltage spike associated to the positive-going edges of the voltage across the auxiliary winding Vaux; secondly, to stop the L6566A, the OVP comparator must be triggered for four consecutive switching cycles. A counter, which is reset every time the OVP comparator is not triggered in one switching cycle, is provided for this purpose. \nFigure 22  shows the internal block diagram, while the timing diagrams in Figure 23  illustrate \nthe operation. \nNote: To use the OVP function effectively, i.e. to ensure that the OVP comparator is always \ninterrogated during MOSFET OFF-time, the duty cycle D under open-loop conditions must fulfill the following inequality:\nEquation 12\nwhere TBLANK2  = 2 µs; this is also illustrated in the diagram of Figure 24 .NauxNs\nVout5k\nOVPOVP =\nmax31Z VinNpNaux\n1031R−⋅≥\n1 f TDsw2 BLANK ≤ +\nApplication information L6566A\n36/52 Doc ID 13794 Rev 4Figure 24. Maximum allowed duty cycle vs. switching frequency for correct OVP \ndetection\n         \n \n5.1041.1051.5.1052.1052.5.1053.1053.5.1054.1050.20.30.40.50.60.70.8\n0.725\nfsw  [Hz]Dmax\nL6566A Application information\nDoc ID 13794 Rev 4 37/525.12 Brownout protection \nBrownout protection is basically a not-latched device shutdown function activated when a \ncondition of mains undervoltage is detected. There are several reasons why it may be desirable to shut down a converter during a brownout condition, which occurs when the mains voltage falls below the minimum specification of normal operation. \nFirstly, a brownout condition may cause overheating of the PFC front-end due to an excess \nof RMS current. Secondly, brownout can also cause the PFC pre-regulator to work open loop. This could be dangerous to the PFC itself and the downstream converter, should the input voltage return abruptly to its rated value, given the slow response of PFC to transient events. Finally, spurious restarts may occur during converter power-down, therefore causing the output voltage not to decay to zero monotonically.\nThe L6566A shutdown upon brownout is accomplished by means of an internal comparator, \nas shown in the block diagram of \nFigure 25 , which shows the basic circuit usage. The \ninverting input of the comparator, available on the AC_OK pin (16), is supposed to sense a voltage proportional to either the RMS or the peak mains voltage; the non-inverting input is internally referenced to 0.485 V with 35 mV hysteresis. If the voltage applied on the AC_OK pin before the device starts operating does not exceed 0.485 V or if it falls below 0.45 V while the device is running, The AC_OK signal goes high, the Vcc_PFC pin is open and the device shuts down, with the soft-start capacitor discharged and the gate-drive output low. Additionally, in case the device has been latched off by some protection function (in which case Vcc is oscillating between V\nccON and VccON - 0.5 V), the AC_OK voltage falling below \n0.45 V clears the latch. This feature can be used to allow a quicker restart as the input source is removed.\nFigure 25. Brownout protection: internal block diagram and timing diagram\n \n-\n+L6566A\nAC_FAILAC_OKVcc\n165\n0.485V\n0.45V 15 µARH\nRLSensed\nvoltage\nVcc\n(pin 5)\nGD\n(pin 4)\nVoutVAC_OK\n(pin 16)\n0.45V\nIHYS\n15 µAt\nt\nt\nt\nt\nt\nt\ntVcc_PFC\n(pin 6)AC_FAILSensed voltage\nVsen ON\nVsen OFF\n0.485V\nApplication information L6566A\n38/52 Doc ID 13794 Rev 4While the brownout protection is active the startup generator keeps on working but, there \nbeing no PWM activity, the Vcc voltage continuously oscillates between the startup and the HV generator restart thresholds, as shown in the timing diagram of \nFigure 25 .\nThe brownout comparator is provided with current hysteresis in addition to voltage \nhysteresis: an internal 15 µA current sink is ON as long as the voltage applied on the AC_OK pin is such that the AC_FAIL signal is high. This approach provides an additional degree of freedom: it is possible to set the ON threshold and the OFF threshold separately by properly choosing the resistors of the external divider (see \nEquation 13  and 14 below). \nWith just voltage hysteresis, instead, fixing one threshold automatically fixes the other one depending on the built-in hysteresis of the comparator.\nWith reference to \nFigure 25 , the following relationships can be established for the ON \n(VsenON) and OFF (VsenOFF) thresholds of the sensed voltage:\nEquation 13\nwhich, solved for RH and RL, yield:\nEquation 14\n         \nIt is usually convenient to not use additional dividers connected to high-voltage rails because this could make it difficult to meet no-load consumption targets envisaged by energy-saving regulations. \nFigure 26  shows a simple voltage sensing technique that makes \nuse of the divider already used by the PFC control chip to sense the AC mains voltage with just the addition of an extra tap. \nThe small-signal NPN Q and the capacitor C\nF create a peak detector, so that the information \nof the RMS mains voltage can be found across CF. The tap position determines the DC \nvoltage to be sensed by the AC_OK pin. It is convenient to use a level as high as possible to minimize the effect of V\nBE changes with temperature. However, it may be necessary to limit \nthe maximum sensed voltage below 7 V to prevent Q’s emitter reverse breakdown; it would not be destructive because the reverse current would be quite small (the resistors seen by Figure 26. AC voltage sensing with the L6566A\n         L HOFF\nL6\nHON\nR45.0\nR45.0 Vsen\nR485.01015R485.0 Vsen=−+ ⋅ =−−\n45.0 Vsen45.0R R ;\n1015Vsen 078.1 VsenR\nOFFH L6OFF ON\nH−=\n⋅⋅ −=−\n \nL6566ARectified\ninput voltage\nRHSensed\nvoltage:\nVsen < 7V\nRLCF\n3MULTL6561\nL6562/A\nL6563Vcc\n5\nAC_OK\n16QQFor minimum\ntemperature drift\nL6566A Application information\nDoc ID 13794 Rev 4 39/52the base terminal are several ten kW) but this could distort the signal on the MULT pin of the \nPFC chip and adversely affect the operation of the pre-regulator. CF needs to be quite a big \ncapacitor (in the μF) to have small residual ripple superimposed on the DC level; as a rule-\nof-thumb, use a time constant (RL + RH)·CF at least 4-5 times the maximum line cycle \nperiod, then fine-tune if needed, considering also transient conditions such as mains missing cycles. \nIf temperature effects are critical, the NPN Q can be replaced by a PNP-NPN pair arranged \nas shown in \nFigure 26  on the right-hand side; other sensing techniques may also be \nadopted. \nThe voltage on the pin is clamped upwards at about 3.15 V; then, if the function is not used, \nthe pin must be connected to Vcc through a resistor (220 to 680 k Ω).\n5.13 Slope compensation\nThe MODE/SC pin (12), when not connected to VREF , provides a voltage ramp during \nMOSFET ON-time synchronous to that of the internal oscillator sawtooth, with 0.8 mA minimum current capability. This ramp is intended for implementing additive slope compensation on current sense. This is needed to avoid the sub-harmonic oscillation that arises in all peak-current-mode-controlled converters working at fixed frequency in continuous conduction mode with a duty cycle close to or exceeding 50%.\nFigure 27. Slope compensation waveforms\nThe compensation is realized by connecting a programming resistor between this pin and the current sense input (pin 7, CS). The CS pin must be connected to the sense resistor with another resistor to make a summing node on the pin. Since no ramp is delivered during MOSFET OFF-time (see \nFigure 27 ), no external component other than the programming \nresistor is needed to ensure a clean operation at light loads. \nNote: The addition of the slope compensation ramp reduces the available dynamics of the current \nsignal; therefore, the value of the sense resistor must be determined taking this into account. Note also that the burst-mode threshold (in terms of power) changes slightly.\nIf slope compensation is not required with FF operation, the pin is left floating. Internal\noscillator\nGD\n(pin 4)\nMODE/SC\n(pin 12)t\nt\nt\nApplication information L6566A\n40/52 Doc ID 13794 Rev 45.14 Summary of L6566A power management functions\nIt has been seen that the device is provided with a number of power management functions: \nmultiple operating mode upon loading conditions, protection functions, as well as interaction with the PFC pre-regulator. To help the user familiarize themselves with these functions, in the following tables all of the themes are summarized with their respective activation mechanisms and the resulting status of the most important pins. This may be useful not only for the correct use of the IC but also for diagnostic purposes: especially at the prototyping/debugging stage, it is quite common to bump into unwanted activation of some functions, and the following tables can be used as a sort of quick troubleshooting guide.\nTable 5. L6566A light load management features\nFeature DescriptionCaused \nbyIC\nbehaviorVcc_restar\nt\n(V)Consump.(Iqdis,mA) VREF\n(V)SSVCOMP\n(V)OSC\n(V)FMOD\nBurst\nmodeControlled \nON-OFF \noperation for \nlow power \nconsumptio\nn at light \nloadVCOMP  \n< \nVCOMPB\nM - HysPulse-\nskipping \noperationN.A. 1.34 mA 5Unchang\nedVCOMPBM\n-HYS to \nVCOMPBM0/1 0\nPFC \nmanage\nmentPFC OFF at \nlight load, \nON at heavy \nloadVCOMP  \n< \nVCOMP\nOVCC_PFC  \n= 0N.A. 5Unchang\nedunchange\nd10\nVCOMP  \n< \nVCOMPLVCC_PFC  \n= VCCVCC\nL6566A Application information\nDoc ID 13794 Rev 4 41/52Table 6. L6566A protection \nProtection Description Caused byIC \nbehaviorVcc \nrestartIC Iq VREF\nSSVCOMP OSC\nFMOD VFF\n(V) (mA) (V) (V) (V)\nOVPOutput \novervoltage \nprotectionVZCD>VZCDth \nfor 4 \nconsecutive \nswitching \ncyclesAuto\nrestart(1)52 . 2 5(6) Unchanged(\n6) 0 0 0 Unchanged\nVFF > \nVFFlatchLatched 13.5 0.33 0 0 0 0 0 0\nOLPOutput overload \nprotectionVCOMP  \n=VCOMPHi\nVSS > VSSDISAuto\nrestart(2)51 . 4 6 5(6) VSS \n<VSSLAT(3) VCOMPHi(6)0 0 Unchanged\nVCOMP  \n=VCOMPHi\nVSS > VSSLATLatched 13.5 0.33 0 0 0 0 0 0\nShort-circuit \nprotectionOutput short-\ncircuit protectionVCOMP  \n=VCOMPHi\nVSS > \nVSSDIS(4)Auto\nrestart51 . 4 6 0VSS \n<VSSLAT(6) VCOMPHi(5)0 Unchanged\nVCOMP  \n=VCOMPHi\nVSS > \nVSSLAT(6)Latched 13.5 0.33 0 0 0 0 0 0\n2nd OCPTransformer \nsaturation or \nshorted \nsecondary diode \nprotectionVCS > VCSDIS\nfor 2-3 \nconsecutive \nswitching \ncyclesLatched 5 0.33 0 0 0 0 0 0\nL6566A Application information\nDoc ID 13794 Rev 4 42/52OTPExternally \nsettable \novertemperature \nprotectionVDIS>VOTP Latched 13.5 0.33 0 0 0 0 0 0\nInternal thermal \nshutdownTj > 160 oCAuto \nrestart(5) 50 . 3 3 0 0 0 0 0 0\nBrownoutMains \nundervoltage \nprotectionVAC_OK  < VthAuto restart 5 0.33 0 0 0 0 0 Unchanged\nReference driftVREF drift \nprotectionVREF > V ov Latched 13.5 0.33 0 0 0 0 0 0\nShutdown1Gate driver \ndisableVFF > Voff Auto restart 5 2.5 5 Unchanged Unchanged 1 Unchanged Unchanged\nShutdown2Shutdown by \nVCOMP  lowVCOMP  < \nVCOMPOFFLatched 10 0.33 0 0 0 0 0 0\nAdaptive UVLOShutdown by Vcc \ngoing\nbelow Vccoff \n(lowering of \nVccoff threshold \nat light load)Vcc < 9.4 V \n(VCOMP  > \nVCOMPL )\nAuto restart 5V 0.18 0 0 0 0 0 0\nVcc < 7.2 V \n(VCOMP  > \nVCOMPO )\n1. Use One external diode from VFF (#15) to AC_OK (#16), cathode to AC_OK2\n2. Use one external diode from SS (#14) to VREF (#10), cathode to VREF\n3. If Css and the Vcc capacitor are such that Vcc falls below UVLO before latch tripping ( Figure 21 on page 33 )\n4. If Css and the Vcc capacitor are such that the latch is tripped before Vcc falls below UVLO ( Figure 21 on page 33 )\n5. When TJ < 110 oC\n6. Discharged to zero by Vcc going below UVLOTable 6. L6566A protection  (continued)\nProtection Description Caused byIC \nbehaviorVcc \nrestartIC Iq VREF\nSSVCOMP OSC\nFMOD VFF\n(V) (mA) (V) (V) (V)\nL6566A Application information\nDoc ID 13794 Rev 4 43/52It is worth remembering that “auto-restart” means that the device works intermittently as \nlong as the condition that is activating the function is not removed; “latched” means that the device is stopped as long as the unit is connected to the input power source and the unit must be disconnected for some time from the source in order for the device (and the unit) to restart. Optionally, a restart can be forced by pulling the voltage of pin 16 (AC_OK) below 0.45 V.\nApplication examples and ideas L6566A\n44/52 Doc ID 13794 Rev 46 Application examples and ideas\n         \n         Figure 28. Typical low-cost application schematic\n         \n PFC Pre-regulator Output bus\nIC1\nL6566AC3\nQ1R2\nD2\nR8C9D1\nC7  2.2 nF Y1 \nR9\nR10C8A,BT1\nZCDGD\nCSVcc AC_OK\nGNDVFF\nCOMPD4\nIC3R4\nD3\n1\n234\nC6R5C2\nSS\nC5VREF MODE/ SC\nC4 R6HVS FMOD\nOSCDIS\nTL431R1\nR3  470k\nR7Vout\nOptional f or\nQR operation4\n7\n35\n111516\n9 14 138\n10 121 6\nOptional f or\nQR operationOutput capacitor of  boost\nPFC Pre-regulator\nFigure 29. Typical full-feature application schematic (QR operation)\n         \n \n4\n7\n35 11 6\n8IC1\nL6566AVout\n9R4C3\nQ1R2\nD2\n1N4148\nR18D1\nC7  2.2 nF Y1 C8A,BT1\nZCD\nGD\nCSVcc\nDIS\nGNDVFF\nCOMPD4\nIC3 PC817AR3\nD3 1N4148\n34\nC6R5C2\n14\nSS13\nC516\n10\nVREF12\nMODE/ SC\nC4 R61HVS\nOSCAC_OKR1\nR12R13R14\nR8C9R9\nR101\n2\nTL431R7\nNTC2Vcc_PFCto Vcc pin of\nPFC controller\n15C1PFC Pre-regulator Output bus\nOutput capacitor of  boost\nPFC Pre-regulator\nto mains\nvoltage sensing\nL6566A Application examples and ideas\nDoc ID 13794 Rev 4 45/52         \n         Figure 30. Typical full-feature a pplication schematic (FF operation)\n         \n \n4\n7\n35 11 6\n8IC1\nL6566AVout\n9C3\nQ1R2\nD2\n1N4148\nR18D1\nC7  2.2 nF Y1 C8A,BT1\nZCD\nGD\nCSVcc\nDIS\nGND COMPD4\nIC3 PC817AR3\nR4\nD3 1N4148\n34\nC6R5C2\n14\nSS13\nC510\nVREF12MODE/ SC\nC4 R61HVS\nOSCR1\nR12R13R15\nR16R17\nR8C9R9\nR101\n2\nTL431R7\nNTC2Vcc_PFCto Vcc pin of\nPFC controllerC1PFC Pre-regulator Output bus\nOutput capacitor of  boost\nPFC Pre-regulator\nVFF16AC_OK\n15to mains\nv oltage sensing\nTable 7. External circuits that de termine IC behavior upon OVP and OCP\nOVP latched OVP auto-restart\nOCP latched                  \nOCP auto-restart         \n          \nL6566A\nVFF15\nRLRFFRH\nRFFneeded if R L< 4.7 k ΩSS VREF\n14 10 \nL6566AAC_OK\n16RH\nVFF15\nRL\nDiode needed if R L> 4.7 k ΩSS VREF\n14 10\nL6566ASS VREF\n14 101N4148\nVFF15\nRLRFFRH\nRFFneeded if R L< 4.7 k Ω \nL6566A16\n15SS VREF\n14 101N4148\nAC_OK\nRH\nVFFRL\nDiode needed if R L> 4.7 k Ω\nApplication examples and ideas L6566A\n46/52 Doc ID 13794 Rev 4Figure 31. Frequency foldback at light load (FF operation) \nFigure 32. Latched shutdown upon mains overvoltage R1\nL6566AVref\nRT10\n9\n13COMP\nOSCBC857MODE/SC\n12R2\nL6566AVcc\n5\n8\nVFFBC847\nDISVin\n15 L6566A8VFFBC857\nDISVin\n15Vr ef\n10\nRq\n>10 Rq\nL6566A Package mechanical data\nDoc ID 13794 Rev 4 47/527 Package mechanical data \nIn order to meet environmental requirements, ST offers these devices in different grades of \nECOPACK® packages, depending on their level of environmental compliance. ECOPACK \nspecifications, grade definitions and product status are available at: www.st.com . \nECOPACK is an ST trademark.\nTable 8. SO16N mechanical data\nDim.mm\nMin. Typ. Max.\nA 1.75\nA1 0.10 0.25\nA2 1.25\nb0 . 3 1 0 . 5 1\nc0 . 1 7 0 . 2 5\nD 9.80 9.90 10.00\nE 5 . 8 06 . 0 06 . 2 0\nE1 3.80 3.90 4.00\ne1 . 2 7\nh0 . 2 5 0 . 5 0L0 . 4 0 1 . 2 7\nk0 8 °\nccc 0.10\nPackage mechanical data L6566A\n48/52 Doc ID 13794 Rev 4Figure 33. Package drawing\n0016020_F\nL6566A Package mechanical data\nDoc ID 13794 Rev 4 49/52Figure 34. Recommended footprint (dimensions are in mm)\nOrder codes L6566A\n50/52 Doc ID 13794 Rev 48 Order codes\nTable 9. Order codes\nOrder codes Package Packaging\nL6566A SO16N Tube\nL6566ATR SO16N Tape and reel\nL6566A Revision history\nDoc ID 13794 Rev 4 51/529 Revision history\nTable 10. Document revision history\nDate Revision Changes\n20-Aug-2007 1 First release\n29-May-2008 2 Updated VMODE/SC value Table 2 on page 11\n02-Dec-2008 3 Updated Figure 1 on page 1 and Section 5.6 on page 27\n14-Mar-2012 4Modified: Table 4: Electrical characteristics  and Table 8: SO16N \nmechanical data ; replaced Figure 33: Package drawing  with a more \ndetailed version; added Figure 34: Recommended footprint \n(dimensions are in mm)\nL6566A\n52/52 Doc ID 13794 Rev 4 \nPlease Read Carefully:\nInformation in this document is provided solely in connection with ST products. STMicroelectronics NV and its subsidiaries (“ST ”) reserve the\nright to make changes, corrections, modifications or improvements, to this document, and the products and services described he rein at any\ntime, without notice.\nAll ST products are sold pursuant to ST’s terms and conditions of sale.Purchasers are solely responsible for the choice, selection and use of the ST products and services described herein, and ST as sumes no\nliability whatsoever relating to the choice, selection or use of the ST products and services described herein.\nNo license, express or implied, by estoppel or otherwise, to any intellectual property rights is granted under this document. I f any part of this\ndocument refers to any third party products or services it shall not be deemed a license grant by ST for the use of such third party products\nor services, or any intellectual property contained therein or considered as a warranty covering the use in any manner whatsoev er of such\nthird party products or services or any intellectual property contained therein.\nUNLESS OTHERWISE SET FORTH IN ST’S TERMS AND CONDITIONS OF SALE ST DISCLAIMS ANY EXPRESS OR IMPLIED\nWARRANTY WITH RESPECT TO THE USE AND/OR SALE OF ST PRODUCTS INCLUDING WITHOUT LIMITATION IMPLIED\nWARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE (AND THEIR EQUIVALENTS UNDER THE LAWS\nOF ANY JURISDICTION), OR INFRINGEMENT OF ANY PATENT, COPYRIGHT OR OTHER INTELLECTUAL PROPERTY RIGHT.\nUNLESS EXPRESSLY APPROVED IN WRITING BY TWO AUTHORIZED ST REPRESENTATIVES, ST PRODUCTS ARE NOT\nRECOMMENDED, AUTHORIZED OR WARRANTED FOR USE IN MILITARY, AIR CRAFT, SPACE, LIFE SAVING, OR LIFE SUSTAININGAPPLICATIONS, NOR IN PRODUCTS OR SYSTEMS WHERE FAILURE OR MALFUNCTION MAY RESULT IN PERSONAL INJURY,DEATH, OR SEVERE PROPERTY OR ENVIRONMENTAL DAMAGE. ST PRODUCTS WHICH ARE NOT SPECIFIED AS "AUTOMOTIVEGRADE" MAY ONLY BE USED IN AUTOMOTIVE APPLICATIONS AT USER’S OWN RISK.\nResale of ST products with provisions different from the statements and/or technical features set forth in this document shall immediately void\nany warranty granted by ST for the ST product or service described herein and shall not create or extend in any manner whatsoev er, any\nliability of ST.\nST and the ST logo are trademarks or register ed trademarks of ST in various countries.\nInformation in this document supersedes and replaces all information previously supplied.\nThe ST logo is a registered trademark of STMicroelectronics. All other names are the property of their respective owners.\n© 2012 STMicroelectronics - All rights reserved\nSTMicroelectronics group of companies\nAustralia - Belgium - Brazil - Canada - China - Czech Republic - Finland - France - Germany - Hong Kong - India - Israel - Ital y - Japan - \nMalaysia - Malta - Morocco - Philippines - Singapore - Spain - Sweden - Switzerland - United Kingdom - United States of America\nwww.st.com\n'}]
!==============================================================================!
### Component Summary: L6566A

**Manufacturer:** STMicroelectronics  
**Product Code:** L6566A  
**Description:** The L6566A is a versatile current-mode primary controller IC designed for high-performance offline flyback converters, particularly in applications that require power factor correction (PFC). It supports both fixed-frequency (FF) and quasi-resonant (QR) operation modes, making it suitable for various power supply designs.

#### Key Specifications:
- **Voltage Ratings:**
  - High-voltage startup: 700 V
  - Operating supply voltage (Vcc): 10.6 V to 23 V
  - Vcc_PFC: -0.3 V to Vcc

- **Current Ratings:**
  - Startup current: 200 µA to 250 µA
  - Quiescent current: < 3 mA
  - Gate driver output: 800 mA (source/sink)

- **Power Consumption:**
  - Quiescent current (operating): 4 mA (typical)
  - Power dissipation: 0.75 W at 50 °C

- **Operating Temperature Range:**
  - Junction temperature (TJ): -40 °C to 150 °C
  - Storage temperature (TSTG): -55 °C to 150 °C

- **Package Type:**
  - SO16N (16-pin surface mount)

- **Special Features:**
  - Selectable multi-mode operation (fixed frequency or quasi-resonant)
  - Advanced light load management with burst-mode operation
  - Adaptive undervoltage lockout (UVLO)
  - Line feedforward for constant power capability
  - Multiple protection features: pulse-by-pulse overcurrent protection (OCP), overvoltage protection (OVP), brownout protection, and transformer saturation detection.
  - Soft-start functionality and programmable oscillator for frequency control.

- **Moisture Sensitive Level (MSL):**
  - MSL according to JEDEC J-STD-020E: Not specified in the provided data.

#### Typical Applications:
- Power supplies for notebooks, TVs, and LCD monitors
- High-power chargers
- PDP/LCD TVs
- Consumer appliances (e.g., DVD players, VCRs, set-top boxes)
- IT equipment and gaming consoles
- Auxiliary power supplies for systems exceeding 150 W

### Summary:
The L6566A is a highly integrated controller designed for efficient power management in flyback converters, particularly in applications requiring compliance with energy-saving regulations. Its ability to operate in both fixed-frequency and quasi-resonant modes, along with advanced protection features, makes it suitable for a wide range of consumer electronics and industrial applications. The device's low quiescent current and adaptive UVLO enhance its performance in light load conditions, contributing to overall energy efficiency.