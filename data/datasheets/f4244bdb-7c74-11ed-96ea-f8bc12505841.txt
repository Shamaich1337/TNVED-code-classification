[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of TVP5158IPNPR production of TEXAS INSTRUMENTS from the text:TVP5158, TVP5157, TVP5156\nFour-Channel NTSC/PAL VideoDecoders\nWithIndependent Scalers,NoiseReduction, Auto\nContrast, andFlexibleOutputFormatter forSecurity and\nOtherMulti-Channel VideoApplications\nDataManual\nPRODUCTION DATAinformation iscurrentasofpublication date.\nProducts conform tospecifications perthetermsoftheTexas\nInstruments standard warranty. Production processing doesnot\nnecessarily includetestingofallparameters.\nLiterature Number:SLES243G\nJuly2009–RevisedApril2013\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nContents\n1Introduction ........................................................................................................................ 8\n1.1Features...................................................................................................................... 8\n1.2Applications .................................................................................................................. 9\n1.3Description................................................................................................................... 9\n1.4RelatedProducts............................................................................................................ 9\n1.5Trademarks ................................................................................................................ 10\n1.6Document Conventions ................................................................................................... 10\n1.7Ordering Information...................................................................................................... 10\n1.8Functional BlockDiagram................................................................................................ 11\n2Terminal Assignments ....................................................................................................... 12\n2.1Pinout....................................................................................................................... 12\n3Functional Description ....................................................................................................... 15\n3.1AnalogVideoProcessing andA/DConverters........................................................................ 15\n3.1.1AnalogVideoInput............................................................................................. 15\n3.1.2AnalogVideoInputClamping................................................................................. 16\n3.1.3A/DConverter................................................................................................... 16\n3.2DigitalVideoProcessing.................................................................................................. 16\n3.2.12xDecimation Filter............................................................................................ 16\n3.2.2Automatic GainControl........................................................................................ 16\n3.2.3Composite Processor.......................................................................................... 16\n3.2.3.1 ColorLow-Pass Filter.............................................................................. 17\n3.2.3.2 Y/CSeparation..................................................................................... 18\n3.2.4Luminance Processing......................................................................................... 19\n3.3AVIDCropping............................................................................................................. 20\n3.4Embedded Syncs.......................................................................................................... 20\n3.5Scaler....................................................................................................................... 21\n3.6NoiseReduction........................................................................................................... 21\n3.7AutoContrast.............................................................................................................. 21\n3.8OutputFormatter.......................................................................................................... 22\n3.8.1Non-Interleaved Mode......................................................................................... 22\n3.8.2Pixel-Interleaved Mode......................................................................................... 22\n3.8.2.1 2-ChPixel-Interleaved Mode..................................................................... 23\n3.8.2.2 4-ChPixel-Interleaved Mode..................................................................... 23\n3.8.2.3 Metadata InsertionforNon-Interleave ModeandPixel-Interleaved Mode................. 24\n3.8.3Line-Interleaved ModeSupport(TVP5158 only)........................................................... 25\n3.8.3.1 2-ChLine-Interleaved Mode...................................................................... 25\n3.8.3.2 4-ChLine-Interleaved Mode...................................................................... 26\n3.8.3.3 8-ChLine-Interleaved Mode...................................................................... 26\n3.8.3.4 HybridModes....................................................................................... 28\n3.8.3.5 Metadata InsertionforLine-Interleaved Mode................................................. 28\n3.9AudioSub-System (TVP5157 andTVP5158 Only)................................................................... 31\n3.9.1Features......................................................................................................... 31\n3.9.2AudioSub-System Functional Diagram..................................................................... 32\n3.9.3SerialAudioInterface.......................................................................................... 33\n3.9.4AnalogAudioInputClamping................................................................................. 33\n3.9.5AudioCascade Connection ................................................................................... 34\n3.10I2CHostInterface.......................................................................................................... 36\n3.10.1I2CWriteOperation............................................................................................. 37\n3.10.2I2CReadOperation............................................................................................ 37\n3.10.3VBUSAccess................................................................................................... 39\n3.11ClockCircuits.............................................................................................................. 40\n2Contents Copyright ©2009–2013,TexasInstruments Incorporated\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n3.12ResetMode................................................................................................................ 41\n4InternalControlRegisters................................................................................................... 42\n4.1Overview.................................................................................................................... 42\n4.2RegisterDefinitions....................................................................................................... 45\n5Electrical Specifications ..................................................................................................... 90\n5.1Absolute Maximum Ratings.............................................................................................. 90\n5.2Recommended Operating Conditions.................................................................................. 91\n5.3Reference ClockSpecifications ......................................................................................... 91\n5.4Electrical Characteristics ................................................................................................. 92\n5.5DCElectrical Characteristics ............................................................................................. 92\n5.6VideoA/DConverters Electrical Characteristics ...................................................................... 93\n5.7AudioA/DConverters Electrical Characteristics ...................................................................... 93\n5.8VideoOutputClockandDataTiming................................................................................... 94\n5.8.1VideoInputClockandDataTiming.......................................................................... 94\n5.9I2CHostPortTiming...................................................................................................... 95\n5.9.1I2SPortTiming.................................................................................................. 96\n5.10Miscellaneous Timings.................................................................................................... 96\n5.11PowerDissipation Ratings............................................................................................... 96\n6Application Information ...................................................................................................... 97\n6.14-ChD1Applications ..................................................................................................... 97\n6.28-ChCIFApplications ..................................................................................................... 97\n6.316-ChCIFApplications ................................................................................................... 98\n6.4Application CircuitExamples............................................................................................. 99\n6.5Designing withPowerPAD ™Devices................................................................................. 100\nRevison History........................................................................................................................ 101\nCopyright ©2009–2013,TexasInstruments Incorporated Contents 3\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nListofFigures\n1-1Functional BlockDiagram....................................................................................................... 11\n3-1VideoAnalogProcessing andADCBlockDiagram......................................................................... 15\n3-2Anti-Aliasing FilterFrequency Response..................................................................................... 16\n3-3Composite Processor BlockDiagram.......................................................................................... 17\n3-4ColorLow-Pass FilterFrequency Response................................................................................. 18\n3-5ColorLow-Pass FilterwithFilterCharacteristics, NTSC/PAL ITU-RBT.601Sampling................................. 18\n3-6ChromaTrapFilterFrequency Response, NTSCITU-RBT.601Sampling.............................................. 19\n3-7ChromaTrapFilterFrequency Response, PALITU-RBT.601Sampling................................................ 19\n3-8Luminance Edge-Enhancer PeakingBlockDiagram........................................................................ 20\n3-9PeakingFilterResponse, NTSC/PAL ITU-RBT.601Sampling............................................................ 20\n3-102-ChPixel-Interleaved ModeTimingDiagram................................................................................ 23\n3-114-ChPixel-Interleaved ModeTimingDiagram................................................................................ 24\n3-12Cascade Connection for16-ChCIFRecoding andMulti-ChCIFPreview............................................... 27\n3-13Cascade Connection for16-ChCIFRecoding andMulti-ChHalf-D1Preview........................................... 28\n3-14Cascade Connection for16-ChCIFRecoding and2-ChD1/Multi-Ch CIFPreview..................................... 28\n3-15StartCodein8-BitBT.656Interface........................................................................................... 29\n3-16StartCodein16-BitYCbCr4:2:2Interface................................................................................... 30\n3-17AudioSub-System Functional Diagram....................................................................................... 33\n3-18SerialAudioInterface TimingDiagram........................................................................................ 33\n3-19AudioCascade Connection..................................................................................................... 34\n3-20VBUSAccess..................................................................................................................... 39\n3-21ClockandCrystalConnectivity ................................................................................................. 40\n3-22ResetTiming...................................................................................................................... 41\n5-1VideoOutputClockandDataTiming.......................................................................................... 94\n5-2I2CHostPortTiming............................................................................................................. 95\n6-14-ChD1Application (SingleBT.656Interface)............................................................................... 97\n6-24-ChD1Application (16-BitYCbCr4:2:2Interface)......................................................................... 97\n6-38-ChCIFRealTimeEncoding andMulti-ChD1PreviewApplication..................................................... 98\n6-48-ChCIFRealTimeEncoding andMulti-ChD1PreviewApplication..................................................... 98\n6-5VideoInputConnectivity ....................................................................................................... 100\n6-6AudioInputConnectivity ....................................................................................................... 100\n4ListofFigures Copyright ©2009–2013,TexasInstruments Incorporated\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nListofTables\n1-1DeviceOptions..................................................................................................................... 9\n2-1Terminal Functions.............................................................................................................. 13\n3-1EAVandSAVSequence........................................................................................................ 20\n3-2Standard VideoResolutions.................................................................................................... 21\n3-3VideoResolutions Converted bytheScaler.................................................................................. 21\n3-4Summary ofLineFrequencies, DataRatesandPixelCountsforDifferentStandards................................. 22\n3-5OutputPortsConfiguration forNon-Interleaved Mode...................................................................... 22\n3-6OutputPortsConfiguration forPixel-Interleaved Mode..................................................................... 23\n3-7VDETStatuesInsertioninSAV/EAV Codes.................................................................................. 24\n3-8ChannelIDInsertioninHorizontal BlankingCode........................................................................... 24\n3-9ChannelIDInsertioninSAV/EAV CodeSequence.......................................................................... 24\n3-10OutputPortsConfiguration forLine-Interleaved Mode...................................................................... 25\n3-11DefaultSuper-Frame FormatandTiming..................................................................................... 29\n3-12BitAssignment of4-ByteStartCodeforActiveVideoLine................................................................. 30\n3-13BitFieldDefinition of4-ByteStartCodeforActiveVideoLine............................................................. 30\n3-14BitAssignment of4-ByteStartCodefortheDummyLine.................................................................. 31\n3-15SerialAudioOutputChannelAssignment..................................................................................... 35\n3-16I2CTerminal Description........................................................................................................ 36\n3-17I2CHostInterface DeviceAddresses.......................................................................................... 36\n3-18ResetMode....................................................................................................................... 41\n3-19ResetSequence.................................................................................................................. 41\n4-1Registers Summary.............................................................................................................. 42\n4-2Status1........................................................................................................................... 45\n4-3Status2........................................................................................................................... 46\n4-4ColorSubcarrier PhaseStatus................................................................................................ 46\n4-5ROMVersion..................................................................................................................... 46\n4-6RAMVersionMSB.............................................................................................................. 47\n4-7RAMVersionLSB............................................................................................................... 47\n4-8ChipIDMSB..................................................................................................................... 47\n4-9ChipIDLSB...................................................................................................................... 47\n4-10VideoStandard Status.......................................................................................................... 48\n4-11VideoStandard Select.......................................................................................................... 48\n4-12CVBSAutoswitch Mask......................................................................................................... 49\n4-13AutoContrastMode............................................................................................................. 49\n4-14Luminance Brightness.......................................................................................................... 49\n4-15Luminance Contrast............................................................................................................. 50\n4-16Brightness andContrastRangeExtender.................................................................................... 50\n4-17Chrominance Saturation........................................................................................................ 50\n4-18Chrominance Hue............................................................................................................... 51\n4-19ColorKiller........................................................................................................................ 51\n4-20Luminance Processing Control1.............................................................................................. 52\n4-21Luminance Processing Control2.............................................................................................. 52\n4-22PowerControl.................................................................................................................... 53\n4-23Chrominance Processing Control1........................................................................................... 54\n4-24Chrominance Processing Control2........................................................................................... 54\n4-25AGCGainStatus................................................................................................................ 55\n4-26Back-End AGCStatus.......................................................................................................... 55\nCopyright ©2009–2013,TexasInstruments Incorporated ListofTables 5\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n4-27StatusRequest.................................................................................................................. 55\n4-28AFEGainControl................................................................................................................ 55\n4-29LumaALCFreezeUpperThreshold.......................................................................................... 56\n4-30ChromaALCFreezeUpperThreshold....................................................................................... 56\n4-31AGCIncrement Speed.......................................................................................................... 56\n4-32AGCIncrement Delay........................................................................................................... 56\n4-33AGCDecrement Speed......................................................................................................... 57\n4-34AGCDecrement Delay......................................................................................................... 57\n4-35AGCWhitePeakProcessing.................................................................................................. 58\n4-36Back-End AGCControl......................................................................................................... 59\n4-37AFEFineGain................................................................................................................... 59\n4-38AVIDStartPixel.................................................................................................................. 60\n4-39AVIDPixelWidth................................................................................................................ 60\n4-40NoiseReduction MaxNoise.................................................................................................... 60\n4-41NoiseReduction Control........................................................................................................ 61\n4-42NoiseReduction NoiseFilterBeta............................................................................................ 61\n4-43Operation ModeControl........................................................................................................ 62\n4-44ColorPLLSpeedControl....................................................................................................... 62\n4-45SyncHeightLowThreshold.................................................................................................... 63\n4-46SyncHeightHighThreshold................................................................................................... 63\n4-47ClearLostLockDetect.......................................................................................................... 63\n4-48VSYNCFilterShift............................................................................................................... 63\n4-49656Version/F-bit Control....................................................................................................... 64\n4-50F-BitandV-BitDecodeControl................................................................................................ 65\n4-51F-BitandV-BitControl.......................................................................................................... 66\n4-52OutputTimingDelay............................................................................................................ 66\n4-53AutoContrastUserTableIndex............................................................................................... 67\n4-54BlueScreenYControl.......................................................................................................... 67\n4-55BlueScreenCbControl........................................................................................................ 67\n4-56BlueScreenCrControl......................................................................................................... 68\n4-57BlueScreenLSBControl....................................................................................................... 68\n4-58NoiseMeasurement ............................................................................................................. 68\n4-59WeakSignalHighThreshold................................................................................................... 68\n4-60WeakSignalLowThreshold................................................................................................... 68\n4-61NoiseReduction Y/U/VT0..................................................................................................... 69\n4-62VerticalLineCountStatus...................................................................................................... 69\n4-63OutputFormatter Control1..................................................................................................... 69\n4-64OutputFormatter Control2..................................................................................................... 70\n4-65InterruptControl................................................................................................................. 70\n4-66Embedded SyncOffsetControl1............................................................................................. 70\n4-67Embedded SyncOffsetControl2............................................................................................. 71\n4-68AVDOutputControl1........................................................................................................... 72\n4-69AVDOutputControl2........................................................................................................... 73\n4-70OFMModeControl.............................................................................................................. 74\n4-71OFMChannelSelect1.......................................................................................................... 75\n4-72OFMChannelSelect2.......................................................................................................... 76\n4-73OFMChannelSelect3.......................................................................................................... 76\n4-74OFMSuper-Frame Size........................................................................................................ 77\n6ListofTables Copyright ©2009–2013,TexasInstruments Incorporated\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n4-75OFMEAV2SAV Duration....................................................................................................... 77\n4-76MiscOFMControl............................................................................................................... 78\n4-77AudioSampleRateControl.................................................................................................... 78\n4-78AnalogAudioGainControl1................................................................................................... 79\n4-79AnalogAudioGainControl2................................................................................................... 80\n4-80AudioModeControl............................................................................................................. 81\n4-81AudioMixerSelect.............................................................................................................. 82\n4-82AudioMuteControl.............................................................................................................. 83\n4-83AnalogMixingRatioControl1................................................................................................. 83\n4-84AnalogMixingRatioControl2................................................................................................. 84\n4-85AudioCascade ModeControl.................................................................................................. 84\n4-86Super-Frame EAV2SAV DurationStatus..................................................................................... 84\n4-87Super-Frame SAV2EAV DurationStatus..................................................................................... 85\n4-88VBUSDataAccessWithNoVBUSAddressIncrement................................................................... 85\n4-89VBUSDataAccessWithVBUSAddressIncrement........................................................................ 85\n4-90VBUSAddressAccess......................................................................................................... 85\n4-91InterruptStatus.................................................................................................................. 86\n4-92InterruptMask.................................................................................................................... 87\n4-93InterruptClear.................................................................................................................... 88\n4-94DecoderWriteEnable.......................................................................................................... 88\n4-95DecoderReadEnable.......................................................................................................... 89\nCopyright ©2009–2013,TexasInstruments Incorporated ListofTables 7\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nFour-Channel NTSC/PALVideoDecoders\nCheckforSamples: TVP5158,TVP5157 ,TVP5156\n1Introduction\n1.1Features\n1234\n–Supportcrystalinterface withon-chip •Common DeviceFeatures\noscillator andsingleclockinputmode (TVP5158, TVP5157, andTVP5156)\n–Single27-MHzclockinputorcrystalforall –Fourseparate videodecoder channels\nstandards andallchannels havingthefollowing features foreach\nchannel –Internalphase-locked loop(PLL)forline-\nlockedclock(separate foreachchannel) and •Accepts NTSC(J,M,4.43)andPAL(B,D,\nsampling G,H,I,M,N,Nc,60)videodata\n–Standard programmable videooutputformat •Composite videoinputs,pseudo-\ndifferential videoinputstoimproved •ITU-RBT.656,8-bit4:2:2withembedded\nnoiseimmunity syncs\n•High-speed 10-bitADC •YCbCr16-bit4:2:2withembedded syncs\n•Fullydifferential CMOSanalog –Macrovision ™copyprotection detection\npreprocessing channels withclamping –3.3-Vcompatible I/O\n•Integrated anti-aliasing filter –128-pinTQFPpackage\n•2D5-line(5H)adaptive combfilter –Available incommercial (0°Cto70°C)\n•Noisereduction andautocontrast temperature range\n•Robustautomatic videostandard •Additional TVP5158 andTVP5157 Specific\ndetection (NTSC/PAL) andswitching Features\n•Programmable hue,saturation, –Integrated four-channel audioADCwith\nsharpness, brightness, andcontrast audiosamplerateof8kHzor16kHz\n•Luma-peaking processing –SupportMasterandSlavemodeI2SOutput\n•Patented architecture forlockingtoweak, –Supportaudiocascade connection\nnoisy,orunstable signals •Additional TVP5158 SpecificFeatures\n–Fourindependent scalerssupporthorizontal –Enhanced channelmultiplexing capability –\nand/orvertical2:1downscaling Line-interleaved mode\n–Channel multiplexing capabilities with –Four-channel D1multiplexed outputat8bit\nmetadata insertion at108MHz\n•Pixel-interleaved modesupports upto –Videocascade connection for8-ChCIF,8-Ch\nfour-channel D1multiplexed 8-bitoutput Half-D1,and8-ChCIF+1-ChD1outputs\nat108MHz–Alsoavailable inIndustrial (-40°Cto85°C)\n•Supports concurrent NTSCandPAL temperature range\ninputs•Qualified forAutomotive Applications\n(AEC-Q100 RevG–TVP5158IPNPQ1,\nTVP5158IPNPRQ1)\n1\nPleasebeawarethatanimportant noticeconcerning availability, standard warranty, anduseincriticalapplications of\nTexasInstruments semiconductor productsanddisclaimers theretoappearsattheendofthisdatasheet.\n2DaVinciisatrademark ofTexasInstruments.\n3Macrovision isatrademark ofMacrovision Corporation.\n4Allothertrademarks arethepropertyoftheirrespective owners.\nPRODUCTION DATAinformation iscurrentasofpublication date.Products conformto Copyright ©2009–2013,TexasInstruments Incorporatedspecifications perthetermsoftheTexasInstruments standard warranty. Production\nprocessing doesnotnecessarily includetestingofallparameters.\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n1.2Applications\n•Security andsurveillance digitalvideorecorders orserversandPCIproducts\n•Automotive infotainment videohub\n•Largeformatvideowalldisplays\n•Gamesystems\n1.3Description\nTheTVP5158, TVP5157, andTVP5156 devicesare4-channel high-quality NTSC/PAL videodecoders\nthatdigitizeanddecodeallpopularbase-band analogvideoformatsintodigitalvideooutput.Each\nchannelofthisdecoderincludes 10-bit27-MSPS A/Dconverter (ADC).Preceding eachADCinthe\ndevice,thecorresponding analogchannelcontainsananalogcircuitthatclampstheinputtoareference\nvoltageandappliesthegain.\nComposite inputsignalissampledat2xtheITU-RBT.601clockfrequency, line-locked alignment, andis\nthendecimated tothe1xpixelrate.CVBSdecoding usesfive-lineadaptive combfilteringforboththe\nlumaandchromadatapathstoreducebothcross-luma andcross-chroma artifacts.Achromatrapfilteris\nalsoavailable. OnCVBSinputs,theusercancontrolvideocharacteristics suchascontrast, brightness,\nsaturation, andhueviaanI2Chostportinterface. Furthermore, lumapeaking (sharpness) with\nprogrammable gainisincluded.\nAllfourchannels areindependently controllable. Thesedecoders shareasingleclockinputforall\nchannels andforallsupported standards.\nTVP5158 provides agluelessaudioandvideointerface toTIDaVinci™videoprocessors. Videooutput\nportssupport8-bitITU-RBT.656and16-bit4:2:2YCbCrwithembedded synchronization. TVP5158\nsupports multiplexed pixel-interleaved andline-interleaved modevideooutputswithmetadata insertion.\nTVP5158 andTVP5157 integrate 4-ChaudioADCstoreducetheBOMcostforsurveillance market.\nMultipleTVP5158 devicescanbecascade connected tosupportupto8-ChVideoor16-Chaudio\nprocessing.\nNoisereduction andautocontrastfunctions improvethevideoqualityunderlowlightcondition whichis\nverycriticalforsurveillance products.\nTheTVP5158, TVP5157, andTVP5156 canbeprogrammed byusingasingleI2Cserialinterface. I2C\ncommands canbesenttooneormoredecodercoressimultaneously, reducingtheamountofI2Cactivity\nnecessary toconfigure eachcore.Thisisespecially usefulforfastdownloading modifiedfirmware tothe\ndecodercores.\nTVP5158, TVP5157, andTVP5156 use1.1-V,1.8-V,and3.3-Vpowersuppliesfortheanalog/digital core\nandI/O.Thesedevicesareavailable ina128-pinTQFPpackage.\nTable1-1.DeviceOptions\nDeviceName 4-ChAudioADC Line-Interleaved Modes\nTVP5156 No No\nTVP5157 Yes No\nTVP5158 Yes Yes\n1.4RelatedProducts\n•TVP5154A\n•TVP5150AM1\n•TVP5146M2\n•TVP5147M1\nCopyright ©2009–2013,TexasInstruments Incorporated Introduction 9\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n1.5Trademarks\nDaVinci,PowerPAD aretrademarks ofTexasInstruments.\nMacrovision isatrademark ofMacrovision Corporation.\nOthertrademarks arethepropertyoftheirrespective owners.\n1.6Document Conventions\nThroughout thisdatamanual,severalconventions areusedtoconveyinformation. Theseconventions are\nasfollows:\n•Toidentifyabinarynumberorfield,alowercasebfollowsthenumbers. Forexample: 000bisa3-bit\nbinaryfield.\n•Toidentifyahexadecimal numberorfield,alowercasehfollowsthenumbers. Forexample: 8AFhisa\n12-bithexadecimal field.\n•Allothernumbers thatappearinthisdocument thatdonothaveeitheraborhfollowing thenumber\nareassumed tobedecimalformat.\n•Ifthesignalorterminalnamehasabarabovethename(forexample, RESETB), thenthisindicates\nthelogicalNOTfunction.Whenasserted, thissignalisalogiclow,0,or0b.\n•RSVDindicates thatthereferenced itemisreserved.\n1.7Ordering Information\nPACKAGED DEVICES(1)(2)\nTA PACKAGE OPTIONTQFP128-PinPowerPADTMPackage\nTVP5156PNP Tray\nTVP5156PNPR Tapeandreel\nTVP5157PNP Tray\n0°Cto70°C\nTVP5157PNPR Tapeandreel\nTVP5158PNP Tray\nTVP5158PNPR Tapeandreel\nTVP5158IPNP Tray\nTVP5158IPNPR Tapeandreel\n-40°Cto85°C\nTVP5158IPNPQ1(3)Tray\nTVP5158IPNPRQ1(3)Tapeandreel\n(1)Forthemostcurrentpackageandorderinginformation, seethePackage OptionAddendum attheendofthisdocument, orseetheTI\nwebsiteatwww.ti.com .\n(2)Package drawings, thermaldata,andsymbolization areavailable atwww.ti.com/packaging .\n(3)AEC-Q100 RevGcertified\n10Introduction Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\n10-Bit\nADCVIN_1_P\nVIN_1_NY/C\nSeparationNoise Reduction/\nAuto ContrastScaler\nVIN_2_P\nVIN_2_N\nVIN_3_P\nVIN_3_N\nVIN_4_P\nVIN_4_NOutput\nFormattorDVO_A_[7:0]\nDelay Match\nand Re-SyncCascade\nInputARM/Memory\nRegistersI C Host port2\nAudio\nADCAIN_1\nAIN_2\nAIN_3\nAIN_4Decimation Filter\nand MixerI C2\nI S Encoder2\nAudio Cascade InputBCLK_R\nLRCLK_R\nSD_R/SD_M\nSD_COY/C\nSeparation\nY/C\nSeparation10-Bit\nADC\n10-Bit\nADC\nY/C\nSeparation10-Bit\nADCScaler\nScaler\nScalerNoise Reduction/\nAuto Contrast\nNoise Reduction/\nAuto Contrast\nNoise Reduction/\nAuto ContrastDVO_B_[7:0]\nDVO_C_[7:0]\nDVO_D_[7:0]\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n1.8Functional BlockDiagram\nFigure1-1.Functional BlockDiagram\nCopyright ©2009–2013,TexasInstruments Incorporated Introduction 11\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\n96VSSA\n95AIN_1\n94AIN_2\n93 AIN_3\n92AIN_4\n91VDDA_1_8\n90VSS\n89 SD_M\n88SD_R\n87 VSS\n86LRCLK_R\n85BCLK_R\n84 VDD_1_1\n83SD_CO\n82VSS\n81VDD_3_3\n80 I2CA0\n79VSS\n78DVO_A_0\n77DVO_A_1\n76VDD_1_1\n75 DVO_A_2\n74DVO_A_3\n73VSS\n72DVO_A_4\n71 DVO_A_5\n70VDD_3_3\n69DVO_A_6\n68DVO_A_7\n67VDD_1_1\n66 I2CA1\n65VSS\n64VDD_1_1\n63DVO_B_0\n62DVO_B_1\n61 VSS\n60DVO_B_2\n59DVO_B_3\n58VDD_3_3\n57 DVO_B_4\n56DVO_B_5\n55VSS\n54DVO_B_6\n53 DVO_B_7\n52VDD_1_1\n51\nOCLK_N/CLKIN50OCLK_P\n49 VSS\n48I2CA2\n47VSS\n46DVO_C_0\n45 DVO_C_1\n44VDD_1_1\n43DVO_C_2\n42DVO_C_3\n41 VDD_3_3\n40DVO_C_4\n39DVO_C_5\n38VSS\n37 DVO_C_6\n36DVO_C_7\n35VDD_1_1\n34NC\n33 VSS1 VSS\n2 INTREQ\n3 RESETB\n4 SCL\n5 SDA\n6 VSS\n7 T1\n8 T2\n9 T3\n10T4\n11T5\n12 VSS\n13 VDD_1_1\n14 VSS\n15 VDD_3_3\n16 LRCLK_CI\n17 BCLK_CI\n18 VDD_1_1\n19 SD_CI\n20 VSS\n21 DVO_D_7\n22 DVO_D_6\n23 VDD_1_1\n24 DVO_D_5\n25 DVO_D_4\n26 VSS\n27 DVO_D_3\n28 DVO_D_2\n29 VDD_3_3\n30 DVO_D_1\n31 DVO_D_0\n32 VDD_1_197 OSC_OUT\n98 VSSA\n99 XTAL_IN\n100 XTAL_REF\n101 XTAL_OUT\n102 VDDA_1_8\n103 VDDA_1_1\n104 VSSA\n105 VSSA\n106 VDDA_1_1\n107 VDDA_1_8\n108 VIN_1_P\n109 VIN_1_N\n110 VSSA\n111 VSSA\n112 VIN_2_P\n113 VIN_2_N\n114 VDDA_1_8\n115 VDDA_1_8\n116 REXT_2K\n117 VSSA\n118 VSSA\n119 VDDA_1_1\n120 VDDA_1_8\n121 VIN_3_P\n122 VIN_3_N\n123 VSSA\n124 VSSA\n125 VIN_4_P\n126 VIN_4_N\n127 VDDA_1_8\n128 VDAA_3_3\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n2Terminal Assignments\n2.1Pinout\n128-PINTQFPPACKAGE\n(TOPVIEW)\n12Terminal Assignments Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable2-1.Terminal Functions\nTERMINAL\nI/O DESCRIPTION\nNAME NO.\nAnalogSection\nVIN_1_P 108 IAnalogvideoinputforADCchannel1.\nVIN_1_N 109 ICommon-mode reference inputforADCchannel1.\nVIN_2_P 112 IAnalogvideoinputforADCchannel2.\nVIN_2_N 113 ICommon-mode reference inputforADCchannel2.\nVIN_3_P 121 IAnalogvideoinputforADCchannel3.\nVIN_3_N 122 ICommon-mode reference inputforADCchannel3.\nVIN_4_P 125 IAnalogvideoinputforADCchannel4.\nVIN_4_N 126 ICommon-mode reference inputforADCchannels.\nREXT_2K 116 IExternalresistorforAFEbiasgenerator. Connectexternal1.8kΩresistortoground.\nAIN_1 95 IAnalogaudioinputforchannel1(NoConnectforTVP5156 Only)\nAIN_2 94 IAnalogaudioinputforchannel2(NoConnectforTVP5156 Only)\nAIN_3 93 IAnalogaudioinputforchannel3(NoConnectforTVP5156 Only)\nAIN_4 92 IAnalogaudioinputforchannel4(NoConnectforTVP5156 Only)\nExternalclockreference input.Itmaybeconnected toexternaloscillator with1.8-VcompatibleXTAL_IN 99 Iclocksignalor27.0-MHz crystaloscillator.\nXTAL_REF 100 GCrystalreference. Connected toanaloggroundinternally.\nExternalclockreference output.Notconnected ifXTAL_IN isdrivenbyanexternalsingle-XTAL_OUT 101 Oendedoscillator.\nAnalogPower\nVDDA_1_1 103,106,119 P1.1-Vanalogsupply\n91,102,107,\nVDDA_1_8 114,115,120, P1.8-Vanalogsupply\n127\nVDDA_3_3 128 P3.3-Vanalogsupplyforall4videochannels\n96,98,104,\n105,110,111,VSSA GAnalogground117,118,123,\n124\nDigitalPower\n1,6,12,14,20,\n26,33,38,47,\nVSS 49,55,61,65,GDigitalground\n73,79,82,87,\n90\n13,18,23,32,\nVDD_1_1 35,44,52,64,PDigitalcoresupply.Connectto1.1-Vdigitalsupply.\n67,76,84\n15,29,41,58,VDD_3_3 PDigitalI/Osupply.Connectto3.3-Vdigitalsupply.70,81\nDigitalSection\nINTREQ 2 OInterruptrequest.Interruptsignaltohostprocessor.\nRESETB 3 IReset.Anactivelowsignalthatcontrolstheresetstate.\nSCL 4 I/OI2Cserialclock(opendrain)\nSDA 5 I/OI2Cserialdata(opendrain)\nOSC_OUT 97 OBufferedcrystaloscillator output.1.8-Vcompatible.\nOCLK_P 51 OOutputdataclock+.Allfourdigitalvideooutputportsaresynchronized tothisclock.\nOutputdataclock-for2-Chtime-multiplexed modeordataclockinputfor8-ChvideocascadeOCLK_N/CLKIN 50 I/Omode\n68,69,71,72,DVO_A_[7:0] ODigitalvideooutputdatabus.74,75,77,78\nCopyright ©2009–2013,TexasInstruments Incorporated Terminal Assignments 13\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable2-1.Terminal Functions (continued)\nTERMINAL\nI/O DESCRIPTION\nNAME NO.\n53,54,56,57,DVO_B_[7:0] ODigitalvideooutputdatabus.59,60,62,63\n36,37,39,40, Digitalvideooutputdatabus.Incascademode,allpinsoperateasinputfromanotherDVO_C_[7:0] I/O42,43,45,46 TVP5158 device.\n21,22,24,25, Digitalvideooutputdatabus.Incascademode,allpinsoperateasinputfromanotherDVO_D_[7:0] I/O27,28,30,31 TVP5158 device.\nI2CA0 80 II2Cslaveaddressbit0\nI2CA1 66 II2Cslaveaddressbit1\nI2CA2 48 II2Cslaveaddressbit2\nDigitalAudioSection(Notsupported onTVP5156)\nI2Sbitclockforrecording. AlsoknownasI2Sserialclock(SCK).Supports masterandslaveBCLK_R 85 I/Omodes.\nI2Sleft/rightclockforrecording. AlsoknownasI2Swordselect(WS).Supports masterandLRCLK_R 86 I/Oslavemodes.\nSD_R 88 OI2Sserialdataoutputforrecording.\nSD_M 89 OI2Sserialdataoutputformixedaudioorrecording.\nSD_CO 83 OAudioserialdataoutputforcascademode\nLRCLK_CI 16 II2Sleft/rightclockinputforcascademode.AlsoknownasI2Swordselect(WS).\nBCLK_CI 17 II2Sbitclockinputforcascademode.AlsoknownasI2Sserialclock(SCK).\nSD_CI 19 IAudioserialdatainputforcascademode.\nNoConnect Pins\nT1,T2,T3,T4,7,8,9,10,11,NCFornormaloperation, noconnectT5,NC 34\n14Terminal Assignments Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nFrequency Response\n-35-30-25-20-15-10-505\n- 5 10 15 20 25\nFrequency (MHz)Gain(dB)\nAnti-Aliasing\nFilterAnalog\nCVBS Input\nClampADC\nReference & BiasOutput to\nDigital\nProcessing\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n3Functional Description\n3.1AnalogVideoProcessing andA/DConverters\nEachvideodecoder acceptsonecomposite videoinputandperforms videoclamping, anti-aliasing\nfiltering,videoamplification, A/Dconversion, andgainandoffsetadjustments tocenterthedigitizedvideo\nsignal.Figure3-1showsthevideoanalogprocessing andADCblockdiagram.\nFigure3-1.VideoAnalogProcessing andADCBlockDiagram\n3.1.1AnalogVideoInput\nSupports NTSC(J,M,4.43)andPAL(B,D,G,H,I,M,N,Nc,60)videostandards. Eachvideodecoder\nchannelsupports acomposite videoinputwithapseudo-differential pinwhichimproves thenoise\nimmunity andanalogperformance.\nEachvideodecoder inputshouldbeac-coupled througha0.1-µFcapacitor. Thenominalparallel\ntermination resistorbeforetheinputtothedeviceis75Ω.\nEachvideodecoderintegrates ananti-aliasing filtertoprovidegoodstop-band rejection ontheanalog\nvideoinputsignal.Figure3-2showsthefrequency response oftheanti-aliasing filter.\nFigure3-2.Anti-Aliasing FilterFrequency Response\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 15\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n3.1.2AnalogVideoInputClamping\nAninternalclamping circuitprovides dcrestoration forallfouranalogcomposite videoinputs.Thedc\nrestoration circuit(sync-tip clamp)restoressync-tipleveloftheac-coupled composite videosignaltoa\nfixeddclevelnearthebottomoftheA/Dconverter range.\n3.1.3A/DConverter\nAllADCshavearesolution of10bitsandcanoperateat27MSPS.EachA/Dchannelreceivesaclock\nfromtheon-chipphase-locked loop(PLL)atanominalfrequency of27MHz.AllADCreference voltages\naregenerated internally.\n3.2DigitalVideoProcessing\nDigitalVideoProcessing blockreceivesdigitizedvideosignalsfromtheADCsandperforms composite\nprocessing andYCbCrsignalenhancements. Thedigitaldataoutputcanbeprogrammed totwoformats:\nITU-RBT.6568-bit4:2:2withembedded syncsor16-bit4:2:2withembedded syncs.Thecircuitalso\ndetectspseudo-sync pulses,AGCpulses,andcolorstripinginMacrovision-encoded copy-protected\nmaterial.\n3.2.12xDecimation Filter\nAllinputsignalsareover-sampled byafactorof2(by27-MHzclock).TheA/Doutputsinitiallypass\nthroughdecimation filtersthatreducethedatarateto1xthepixelrate.Thedecimation filterisahalf-band\nfilter.Over-sampling anddecimation filteringcaneffectively increase theoverallsignal-to-noise ratioby\n3dB.\n3.2.2Automatic GainControl\nTheautomatic gaincontrol(AGC)canbeenabledandcanadjustthesignalamplitude controlled by14-bit\ndigitalgainstageaftertheADC.TheAGCalgorithms canuseuptofouramplitude references: sync\nheight,colorburstamplitude, composite peak,andlumapeak.\nThespecificamplitude references beingusedbytheAGCalgorithms canbecontrolled usingtheAGC\nwhitepeakprocessing registerlocatedatsubaddress 2Dh.Thegainincrement speedandgainincrement\ndelaycanbecontrolled usingtheAGCincrement speedregisterlocatedatsubaddress 29handtheAGC\nincrement delayregisterlocatedatsubaddress 2Ah.Thegaindecrement speedandgaindecrement delay\ncanbecontrolled usingtheAGCdecrement speedregisterlocatedatsubaddress 2BhandtheAGC\ndecrement delayregisterlocatedatsubaddress 2Ch.\n3.2.3Composite Processor\nThisComposite Processor circuitreceivesadigitizedcomposite signalfromtheADCsandperforms sync\nandY/Cseparation, chromademodulation forPAL/NTSC, andYUVsignalenhancements. Theslicelevels\nofthesyncseparator areadaptive. Theslicelevelscontinually adapttochanges intheback-porch and\nsync-tiplevels.The10-bitcomposite videoismultiplied bythesubcarriersignalsinthequadrature\ndemodulator togenerate UandVcolordifference signals.TheUandVsignalsarethensenttolow-pass\nfilterstoachievethedesiredbandwidth. Anadaptive5-linecombfilterseparates UVfromYbasedonthe\nuniquepropertyofcolorphaseshiftsfromlinetoline.Thechromaisre-modulated throughaquadrature\nmodulator andsubtracted fromline-delayed composite videotogenerate luma.ThisformofY/C\nseparation iscompletely complementary, thusthereisnolossofinformation. However, insome\napplications, itisdesirable tolimittheU/Vbandwidth toavoidcrosstalk. Inthatcase,notchfilterscanbe\nturnedon.Toaccommodate someviewingpreferences, apeakingfilterisalsoavailable inthelumapath.\nContrast, brightness, sharpness, hue,andsaturation controlsareprogrammable throughtheI2Chostport.\nFigure3-3showstheblockdiagramofComposite Processor.\n16Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nColor LPF\n2\n5 Line\nAdaptive\nComb FilterNotch\nFilter\nNotch\nFilterDelay\nDelayContrast\nBrightness\nSaturation\nAdjust\nColor LPF\n2Y\nCb\nCr\nU\nVNotch NotchDelayY\nPeaking\nNTSC/PAL\nRemodulation\nNTSC/PAL\nDemodulationLine\nDelayCVBS\nCVBSBurst\nAccumulator\n(U)\nBurst\nAccumulator\n(V)Filter Filter\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nFigure3-3.Composite Processor BlockDiagram\n3.2.3.1 ColorLow-Pass Filter\nHighfilterbandwidth preserves sharpcolortransitions andproduces crispcolorboundaries. However, for\nnonstandard videosourcesthathaveasymmetrical UandVsidebands,itisdesirable tolimitthefilter\nbandwidth toavoidUVcrosstalk. Thecolorlow-pass filterbandwidth isprogrammable toenableoneofthe\nthreenotchfilters.Figure3-4andFigure3-5represent thefrequency responses ofthewideband color\nlow-pass filters.\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 17\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nFigure3-4.ColorLow-Pass FilterFrequency Response\nFigure3-5.ColorLow-Pass FilterwithFilterCharacteristics, NTSC/PAL ITU-RBT.601Sampling\n3.2.3.2 Y/CSeparation\nY/Cseparation canbedoneusingadaptive 5-line(5-Hdelay)combfiltersorachromatrapfilter.The\ncombfiltercanbeselectively bypassed inthelumaorchromapath.Ifthecombfilterisbypassed inthe\nlumapath,thenchromatrapfiltersareusedwhichareshowninFigure3-6andFigure3-7.TheTI\npatented adaptive combfilteralgorithm reducesartifactssuchashangingdotsatcolorboundaries. It\ndetectsandproperlyhandlesfalsecolorsinhigh-frequency luminance imagessuchasamultiburst pattern\norcirclepattern.\n18Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nPeak\nDetectorBandpass\nFilterPeaking\nFilter\nDelayINGain\nOUT +x\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nFigure3-6.ChromaTrapFilterFrequency Response, NTSCITU-RBT.601Sampling\nFigure3-7.ChromaTrapFilterFrequency Response, PALITU-RBT.601Sampling\n3.2.4Luminance Processing\nThedigitizedcomposite videosignalpassesthrougheitheraluminance combfilterorachromatrapfilter,\neitherofwhichremoves chrominance information fromthecomposite signaltogenerate aluminance\nsignal.Theluminance signalisthenfedintotheinputofapeakingcircuit.Figure3-8showsthebasic\nfunctions oftheluminance datapath.Apeaking filter(edgeenhancer) amplifies high-frequency\ncomponents oftheluminance signal.Figure3-9showsthecharacteristics ofthepeakingfilteratfour\ndifferentgainsettingsthatareuser-programmable viatheI2Cinterface.\nFigure3-8.Luminance Edge-Enhancer PeakingBlockDiagram\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 19\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nFigure3-9.PeakingFilterResponse, NTSC/PAL ITU-RBT.601Sampling\n3.3AVIDCropping\nAVIDoractivevideocropping provides ameanstodecrease theamountofvideodataoutput.Thisis\naccomplished byhorizontally blankinganumberofAVIDpulsesandbyvertically blankinganumberof\nlinesperframe.Horizontal cropping canbeenabled/disabled usingbit-6ofaddressB1h.Whenline\ncropping isenabled, activevideoisreducedfrom720to704pixelsforunscaled videoandfrom360to\n352pixelsfordown-scaled video.\nWhenlinecroppingisenabled,theTVP5158 cropsanequalamountfromboththestartandendofactive\nvideo.Register8Chcanbeusedtodelayboththestartandendofactivevideo.Itallowsselecting which\n704pixelsoutof720areactuallybeingusedforactivevideowhenlinecroppingisenabled.\n3.4Embedded Syncs\nStandards withembedded syncsinsertSAVandEAVcodesintothedatastreamatthebeginning andend\nofhorizontal blanking. ThesecodescontaintheVandFbitswhichalsodefineverticaltiming.FandV\nchangeonEAV.Table3-1givestheformatoftheSAVandEAVcodes.\nHequals1alwaysindicates EAV.Hequals0alwaysindicates SAV.Thealignment ofVandFtotheline\nandfieldcountervariesdepending onthestandard. PleaserefertoITU-RBT.656formoreinformation on\nembedded syncs.\nThePbitsareprotection bits:\nP3=VxorH\nP2=FxorH\nP1=FxorV\nP0=FxorVxorH\nTable3-1.EAVandSAVSequence\n8-BITDATA\nD7(MSB) D6 D5 D4 D3 D2 D1 D0\nPreamble 1 1 1 1 1 1 1 1\nPreamble 0 0 0 0 0 0 0 0\nPreamble 0 0 0 0 0 0 0 0\nStatusword 1 F V H P3 P2 P1 P0\n20Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n3.5Scaler\nEachvideodecoderhasanindependent horizontal andverticalscaler,whichsupports D1tohalf-D1or\nCIFconversion. Table3-2givesthedetailsofvideoresolution including un-cropped andcropped. Table3-\n3showsthevideoresolutions converted bythescaler.\nTable3-2.Standard VideoResolutions\nUncropped Cropped\nFormat\nNTSC PAL NTSC PAL\nD1 720x480 720x576 704x480 704x576\nHalf-D1 360x480 360x576 352x480 352x576\nCIF 360x240 360x288 352x240 352x288\nTable3-3.VideoResolutions Converted bytheScaler\nActiveOutputScalingRatio Format Horizontal Scaling VerticalScaling TotalPixelResolution\nNTSC 1:1 1:1 858x525 720x480\nD1\nPAL 1:1 1:1 864x625 720x576\nNTSC 2:1 1:1 429x525 360x480\nD1toHalf-D1\nPAL 2:1 1:1 432x625 360x576\nNTSC 2:1 2:1 429x262 360x240\nD1toCIF\nPAL 2:1 2:1 432x312 360x288\n3.6NoiseReduction\nAvideosequence shotunderlowlightcondition, whichistypicalofvideosurveillance applications, can\ncontainlotsofnoise.Humaneyesareverysensitive tooscillating signals,thevisualqualitydegenerates\nsignificantly evenwhenthenoiselevelissmall.\nEachvideodecoderusesaTIproprietary spatialfiltertoreducevideonoise.Foreachframeofimage,the\nvideonoisefilter(VNF)produces anestimate oftheY/U/Vnoise.Basedonthenoiseestimates, the\nfirmware adjuststhethreshold forY/U/Vfiltering.Thefilteredvideoshowsimproved videoqualityand\nlowercompression bit-rate.Thefirmware canalsoutilizetheY/U/Vnoiseestimates tomakedecisions to\ndisablecolorifthevideonoiseisdetermined tobetoohigh.This"colorkiller"decisionbitcanbeusedto\ncontrolanothermodulethatimplements thecolorkillingfunction.\nTheNoiseReduction canbecontrolled usingI2Cregisters from5Chto5Fh.Thismodulecanalsobeset\ntobypassmodebyI2Cregister5Dh(Bit0).\n3.7AutoContrast\nTheAutoContrast (AC)modulecanadjustthepicturebrightness automatically ormanually (user\nprogrammable) forbetterimagequality.ThegoalofACprocessing istomakethedarkareabrighterand\nhigh-light areadimmer.Thismakesitpossiblefortheviewertoseedetailshiddenintheshadows. Italso\nprevents lossofdetailsinthewashed-out highlightarea.TheACprocessing ismostlyforvideo\nsurveillance applications.\nForeachframeofimage,theautocontrastmodulecollectsthestatistics ofitsY(luminance) values.The\nACalgorithm implemented inthefirmware processes thestatistics andgenerates alook-uptable(LUT).\nThisLUTisusedtomapeachincoming pixelYvaluetoanoutputpixelYvalueforthenextframeof\nimage.TheLUTisupdatedduringtheblankingperiodbetweentwoframes.\nTheAutoContrast Modecanbecontrolled byusingI2Cregisters 0Fh.Thismodulecanalsobesetto\ndisablemodebyI2Cregister0Fh(Bit1:0).\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 21\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n3.8OutputFormatter\nTheoutputformatter isresponsible forgenerating theoutputdigitalvideostream.Table3-4provides a\nsummary oflinefrequencies, datarates,andpixelcountsfordifferentinputstandards. TVP5158 supports\nnon-interleaved outputmode,pixel-interleaved outputmodeandline-interleaved outputmode.Thenon-\ninterleaved modeissimilartotheTVP5154A device,exceptthatasinglefixedclockoutputisused.Inthe\ninterleaved modes,thevideooutputdatafrommultipledecoderchannels aremultiplexed togetherand\nthenoutputtoasingle8-bitor16-bitport.Thevideooutputdatafromselected channels canbe\ninterleaved onapixelorlinebasis.\nTable3-4.Summary ofLineFrequencies, DataRatesandPixelCountsforDifferent Standards\nPixel ColorSubcarrier Horizontal LineStandards ActivePixels LinesperPixelsperLine Frequency Frequency Rate(ITU-RBT.601) perLine Frame(MHz) (MHz) (kHz)\nNTSC-J,M 858 720 525 13.5 3.579545 15.73426\nNTSC-4.43 858 720 525 13.5 4.43361875 15.73426\nPAL-M 858 720 525 13.5 3.57561149 15.73426\nPAL-60 858 720 525 13.5 4.43361875 15.73426\nPAL-B,D,G,H,I 864 720 625 13.5 4.43361875 15.625\nPAL-N 864 720 625 13.5 4.43361875 15.625\nPAL-Nc 864 720 625 13.5 3.58205625 15.625\n3.8.1Non-Interleaved Mode\nInthenon-interleaved mode,theYCbCrdigitaloutputisprogrammed as8-bitITU-RBT.656parallel\ninterface standard. Depending onwhichoutputmodeisselected, theoutputforeachchannelcanbeun-\nscaleddataorscaleddata.Alsoeachvideooutputportcanbeselectedtooutputthevideodatafromany\n1of4videodecoders. Table3-5showsthedetailedinformation aboutnon-interleaved mode.\nTable3-5.OutputPortsConfiguration forNon-Interleaved Mode\nVideoOutput Cascade I2CAddress: OCLKPortA PortB PortC PortDFormat Stage B0h (MHz)\n1-ChD1 n/a 00h 27 Any1of4ChAny1of4ChAny1of4ChAny1of4Ch\n1-ChHalf-D1 n/a 02h 27 Any1of4ChAny1of4ChAny1of4ChAny1of4Ch\n1-ChCIF n/a 03h 27 Any1of4ChAny1of4ChAny1of4ChAny1of4Ch\n3.8.2Pixel-Interleaved Mode\nEachvideodecodersupports multiplexing twoorfourchannels ITU-RBT.656formatdatatogetherona\npixelbasis.TheoutputfromeachvideodecoderchannelisstillITU-RBT.656format.Aftertheprocessing\ninoutputformatter, twoorfourchannels videodatahasbeeninterleaved togetherbystrictlyonepixel\nfromeachchannel.\nThepixel-interleaved modeisdedicated forthebackendchipwhichhaslimitedvideoinputports.Table3-\n6givestheoutputportconfiguration forpixel-interleaved mode.\n22Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nFF 00 Y0CLK (108MHz)\nCH1_D 00 XY\nCH2_DCb0\nCr50 Cb52 Cr52Cb20 Y 20 Cr20 Y21 Cb22 Y22\nCr92 Y93 Cb94 Y94 Cr94 Y95Y51 Y52 Y53\nFF 00 Y0 00 XY Cb0 Cb20 Y 20 Cr20 Y21 Cb22 Y22 Cr50 Cb52 Cr52 Y51 Y52 Y53 Cr92 Y93 Cb94 Y94 Cr94 Y95CH3_D\nCH4_D\nDVO_A_\n[7:0]\nFF 00 Y0 Y1 Y2 Y3CLK_P\n(27MHz )\nCH1_D 00 XY\nCH2_D\nDVO_A_\n[7:0]Cb0 Cr 0 Cb2 Cr2\nCb20 Y20 Cr20 Y21 Cb22 Y22 Cr22 Y23 Cb24 Y24 Cr24 Y25\nFF 00 Y0 Y1 Y2 Y3 00 XY Cb0 Cr 0 Cb2 Cr2 Cb20 Y20 Cr20 Y21 Cb22 Y22 Cr22 Y23 Cb24 Y24 Cr24 Y25CLK_N\n(27MHz )\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable3-6.OutputPortsConfiguration forPixel-Interleaved Mode\nVideoOutput Cascade I2CAddress: OCLKPortA PortB PortC PortDFormat Stage B0h (MHz)\n2-ChD1 n/a 50h 54 Any2of4ChAny2of4Ch Hi-Z Hi-Z\n4-ChD1 n/a 60h 108 All4Ch Hi-Z Hi-Z Hi-Z\n4-ChHalf-D1 n/a 62h 54 All4Ch Hi-Z Hi-Z Hi-Z\n4-ChCIF n/a 63h 54 All4Ch Hi-Z Hi-Z Hi-Z\n3.8.2.1 2-ChPixel-Interleaved Mode\nIn2-Chpixel-interleaved mode,thevideooutputdatawithD1resolution fromtwovideochannels is\nmultiplexed pixelbypixelat54MHz.TheoutputportsDVO_AandDVO_Bareusedinthismode.The\noutputclocksOCLK_P andOCLK_N aresynchronized witheachchannelsothatthebackend chipcan\nde-multiplexed eachvideochanneldataeasily.Thevideooutputfromeachchanneliscompatible with\nITU-RBT.656format.Figure3-10showsthetimingdiagramfor2-Chpixel-interleaved mode.\nFigure3-10.2-ChPixel-Interleaved ModeTimingDiagram\n3.8.2.2 4-ChPixel-Interleaved Mode\nIn4-Chpixel-interleaved mode,thevideooutputdatawithD1resolution fromfourvideochannels is\nmultiplexed pixelbypixelat108MHz.TheoutputDVO_Aisusedinthismode.TheoutputclockOCLK_P\nissynchronized withallfourchannels data.Eachchannelvideodataiscompatible withITU-RBT.656\nformat.Figure3-11showsthetimingdiagramfor4-Chpixel-interleaved mode.\nFigure3-11.4-ChPixel-Interleaved ModeTimingDiagram\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 23\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nIn4-Chpixel-interleaved mode,TVP5158 alsosupports Half-D1andCIFformatdatamultiplexed at54\nMHz.TheoutputDVO_Aisusedinthismode.TheoutputclockOCLK_P issynchronized withallfour\nchannels data.\n3.8.2.3 Metadata Insertion forNon-Interleave ModeandPixel-Interleaved Mode\nInnon-interleaved modeandpixel-interleaved mode,thevideodetection status(VDET)hasalsobeen\ninsertedinMSBofSAV/EAV controlbyte.Table3-7showsVDETstatusinsertioninSAV/EAV codes.\nTable3-7.VDETStatuesInsertion inSAV/EAV Codes\nCONDITION FVHVALUE SAV/EAV CODESEQUENCE\n4th\nFIELD VTIME HTIME F V H 1st 2nd 3rd\nVDET=1VDET=0\n1 Active SAV 0 0 0 FFh 00h 00h 80h 00h\n1 Active EAV 0 0 1 FFh 00h 00h 9Dh 1Dh\n1 Blank SAV 0 1 0 FFh 00h 00h ABh 2Bh\n1 Blank EAV 0 1 1 FFh 00h 00h B6h 36h\n2 Active SAV 1 0 0 FFh 00h 00h C7h 47h\n2 Active EAV 1 0 1 FFh 00h 00h DAh 5Ah\n2 Blank SAV 1 1 0 FFh 00h 00h ECh 6Ch\n2 Blank EAV 1 1 1 FFh 00h 00h F1h 71h\nInthepixel-interleaved mode,ChannelIDisinsertedinthehorizontal blankingcodeasTable3-8.The\nbackendchipcaneasilyidentifythevideodatafromwhichvideodecoderchannelbyinsertedChannelID.\nTable3-8.Channel IDInsertion inHorizontal Blanking Code\nHBLANKING CODEWITHCHANNEL ID\nCHANNEL\nY Cb Cr\nCh1 10h 80h 80h\nCh2 11h 81h 81h\nCh3 12h 82h 82h\nCh4 13h 83h 83h\nInthepixel-interleaved mode,Channel IDcanalsobeinsertedin4LSBsofSAV/EAV controlbyte\nreplacing protection bitsasTable3-9.\nTable3-9.Channel IDInsertion inSAV/EAV CodeSequence\nCONDITION FVHVALUE SAV/EAV CODESEQUENCE\n4th\nFIELD VTIMEHTIME F V H 1st 2nd 3rd\nCh1 Ch2 Ch3 Ch4\n1Active SAV 0 0 0 FFh 00h 00h 80h 81h 82h 83h\n1Active EAV 0 0 1 FFh 00h 00h 90h 91h 92h 93h\n1Blank SAV 0 1 0 FFh 00h 00h A0h A1h A2h A3h\n1Blank EAV 0 1 1 FFh 00h 00h B0h B1h B2h B3h\n2Active SAV 1 0 0 FFh 00h 00h C0h C1h C2h C3h\n2Active EAV 1 0 1 FFh 00h 00h D0h D1h D2h D3h\n2Blank SAV 1 1 0 FFh 00h 00h E0h E1h E2h E3h\n2Blank EAV 1 1 1 FFh 00h 00h F0h F1h F2h F3h\n24Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n3.8.3Line-Interleaved ModeSupport(TVP5158 only)\nTheTVP5158 supports 2-Ch,4-Ch,and8-Chline-interleaved modes.Intheline-interleaved mode,the\nvideochannels aremultiplexed togetheronaline-by-line basis.Compared tothepixel-interleaved mode,\ntheline-interleaved modesignificantly reducesthecodecomplexity andMIPSconsumption ofthebackend\nprocessor. The8-Chmodesrequireconnecting twoTVP5158 devicestogetherusingavideocascade\ninterface (seeSection3.8.3.3).TheTVP5158 alsosupports differentimageresolutions (forexample, D1,\nHalf-D1,andCIF)intheline-interleaved mode.Allsupported line-interleaved modesareshowninTable3-\n10.\nTable3-10.OutputPortsConfiguration forLine-Interleaved Mode\nCascade I2CAddress: OCLKVideoOutputFormat PortA PortB PortC PortDStage B0h (MHz)\n2-ChD1 n/a 90h 54 Any2of4ChAny2of4Ch Hi-Z Hi-Z\n2-ChHalf-D1 n/a 92h 27 Any2of4ChAny2of4Ch Hi-Z Hi-Z\n3-ChD1 n/a 80h 81/108 Any3of4Ch Hi-Z Hi-Z Hi-Z\n4-ChD1 n/a A0h 108 All4Ch Hi-Z Hi-Z Hi-Z\n4-ChHalf-D1 n/a A2h 54 All4Ch Hi-Z Hi-Z Hi-Z\n4-ChCIF n/a A3h 27 All4Ch Hi-Z Hi-Z Hi-Z\nAll4Ch All4Ch4-ChD1(16-bit) n/a A8h 54 Hi-Z Hi-Z(Ydata) (Cdata)\nAll4Ch All4Ch4-ChHalf-D1(16-bit) n/a AAh 27 Hi-Z Hi-Z(Ydata) (Cdata)\n6-ChHalf-D1 2-ChHalf-D11st 82h 81/108 Hi-Z Hi-ZOutput Input\n6-ChHalf-D1\n2-ChHalf-D12nd 86h 27 Hi-Z Hi-Z Hi-ZOutput\n8-ChHalf-D1 4-ChHalf-D11st B2h 108 Hi-Z Hi-ZOutput Input\n8-ChHalf-D1\n4-ChHalf-D12nd B6h 54 Hi-Z Hi-Z Hi-ZOutput\n8-ChCIF1st B3h 54 Hi-Z Hi-Z 4-ChCIFInputOutput\n8-ChCIF\n4-ChCIF2nd B7h 27 Hi-Z Hi-Z Hi-ZOutput\n4ChHalf-D14-ChHalf-D1+n/a E2h 81/108 +Any1of4 Hi-Z Hi-Z Hi-Z1-ChD1D1\n4-ChCIF+4-ChCIF+1-ChD1 n/a E3h 54 Hi-Z Hi-Z Hi-ZAny1of4D1\n6-ChHalf-D12-ChHalf-D11st C2h 108 +Any1of8 Hi-Z 1-ChD1InputInput 6-ChHalf-D1+D1\n1-ChD1\n2-ChHalf-D1 1-ChD12nd C6h 27 Hi-Z Hi-ZOutput Output\n8-ChCIF+1st F3h 81/108 Hi-Z 1-ChD1Input4-ChCIFInputAny1of8D1\n8-ChCIF+1-ChD1\n4-ChCIF 1-ChD12nd F7h 27 Hi-Z Hi-ZOutput Output\n3.8.3.1 2-ChLine-Interleaved Mode\nTVP5158 supports 2-Chline-interleaved modeat54MHz.ThevideooutputdatawithD1resolution from\nanytwovideochannels ismultiplexed togetheronalinebasis.TheoutputportsDVO_AandDVO_Bare\nusedinthismode.TheoutputclockOCLK_P issynchronized withbothoutputports.\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 25\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n3.8.3.2 4-ChLine-Interleaved Mode\nIn4-Chline-interleaved mode,thevideooutputdatafromall4channels ismultiplexed togetheronaline\nbasis.Theoutputresolution ofvideodatacanbeD1,Half-D1orCIF.ForD1andHalf-D1output\nresolutions, thevideooutputportcanbeconfigured tosupport8-bitBT.656or16-BitYCbCr4:2:2data\nwithembedded sync.PortDVO_Aisusedfor8-bitoutput.PortsDVO_AandDVO_Bareusedfor16-Bit\noutput.TheoutputclockOCLK_P issynchronized withallfouroutputports.\nTVP5158 supports multiplexing 4-ChCIFand1-ChD1datatogetherandthenoutputthroughDVO_Aat\n54MHz.1-ChD1canbefromanyoneof4videochannels. Intypicalsurveillance applications, CIF\nresolution isusedforrecording andD1resolution isusedforvideopreview.\nTVP5158 alsosupports multiplexing 4-ChHalf-D1and1-ChD1datatogetherandthenoutputthrough\nDVO_Aat108MHz.ThebackendchipcanuseHalf-D1togenerate CIFformatbydroppedonefield.\nPleasnotethattheline-interleaved modedoesNOTstrictlyoutputonelinefromeachdecoderchannel\nsequentially. Theorderofmultiplexed thevideolinedataisbasedontheavailability ofvideooutputdata\nfromeachdecoderchannel. Therefore, itispossible tooutputtwoconsecutive linesfromthesame\ndecoderchannelortoskiponedecoderchanneloutput.\n3.8.3.3 8-ChLine-Interleaved Mode\nTwoTVP5158 devicescanbecascadeconnected andworkassingle8-Chvideodecoder. Incascade\nmode,theportDVO_CandDVO_DofmasterTVP5158 (firststage)canbeconfigured asthevideoinput\ninterface. TheDVO_AandDVO_BofmasterTVP5158 areconfigured astheoutputinterface fortwo\ndevices.Thismodeisdedicated forthebackendchipwithextremely limitedinputports.\nInthevideocascademode,theopen-drain interruptrequest(INTREQ) outputsfromthefirstandsecond\nstagescanbecombined usingawired-OR connection.\nTypicalapplications withcascademodeshowinthefollowing diagrams.\nFigure3-12showstheCascade Connection for16-ChCIFRecoding andMulti-ChCIFPreview.\nFigure3-13showstheCascade Connection for16-ChCIFRecoding andMulti-ChHalf-D1Preview.\nFigure3-14showstheCascade Connection for16-ChCIFRecoding and2-ChD1/Multi-Ch CIF\nPreview.\n26Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nDM6467\nDaVinci HDDVO_A_[7:0]\nVPIF_A\nI2C\nH.264DVO_D_[7:0]\n4-Ch Half-D1\n8Bit@54MHz8Bit@108MHz\nDVO_A_[7:0]\nVPIF_B8-Ch Half-D1\nMulti-Ch Half-D1\nPreview16-Ch CIF RecordingTVP5158\nTVP5158OCLK_POCLKN/CLKINOCLK_P\nDVO_A_[7:0]\nDVO_D_[7:0]\n4-Ch Half-D1\n8Bit@54MHz8Bit@108MHz\nDVO_A_[7:0]8-Ch Half-D1\nOCLK_POCLKN/CLKINOCLK_P\nI2CTVP5158\nTVP5158VIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nDM6467\nDaVinci HDDVO_A_[7:0]\nVPIF_A\nI2C\nH.264DVO_D_[7:0]\n4-Ch CIF\n8Bit@27MHz8Bit@54MHz\nDVO_A_[7:0]\nVPIF_B8-Ch CIF\nMulti-Ch CIF\nPreview16-Ch CIF RecordingTVP5158\nTVP5158OCLK_POCLKN/CLKINOCLK_P\nDVO_A_[7:0]\nDVO_D_[7:0]\n4-Ch CIF\n8Bit@27MHz8Bit@54MHz\nDVO_A_[7:0]8-Ch CIF\nOCLK_POCLKN/CLKINOCLK_P\nI2CTVP5158\nTVP5158VIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nFigure3-12.Cascade Connection for16-ChCIFRecoding andMulti-Ch CIFPreview\nFigure3-13.Cascade Connection for16-ChCIFRecoding andMulti-Ch Half-D1Preview\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 27\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\n1-Ch D1\n8Bit@27MHz8-Ch CIF + 1-Ch D1\n8Bit@108MHz\n2-Ch D1/Multi-Ch CIF\nPreviewDM6467\nDaVinci HDDVO_A_[7:0]\nVPIF_A\nI2C\nH.264DVO_D_[7:0]\nDVO_A_[7:0]\nVPIF_B16-Ch CIF RecordingTVP5158\nTVP5158OCLK_POCLKN/CLKINOCLK_P\nDVO_ C_[7:0]\nDVO_B_[7:0]4-Ch CIF\n8Bit@ 27MHz\n8Bit@27MHz8Bit@108MHzDVO_A_[7:0]\nI2CDVO_D_[7:0]\nDVO_A_[7:0]TVP5158\nTVP5158OCLK_POCLKN/CLKINOCLK_P\nDVO_ C_[7:0]\nDVO_B_[7:0]8Bit@ 27MHz8-Ch CIF + 1-Ch D1\n4-Ch CIF\n1-Ch D1VIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nFigure3-14.Cascade Connection for16-ChCIFRecoding and2-ChD1/Multi-Ch CIFPreview\n3.8.3.4 HybridModes\nTheTVP5158 alsosupports multiplexing bothscaledandunscaled datastreamsintheline-interleaved\nmode.Inthesehybridmodes(4-ChHalf-D1+1-ChD1,4-ChCIF+1-ChD1,and8-ChCIF+1-ChD1),\ntheD1lineissplitintotwoequal-length halflinesandthenmultiplexed withtheotherCIFlines.Therefore,\nallvideodataisactuallymultiplexed byCIFlinelength.Inthesehybridmodes,thelinecropping mode\naffectsboththescaledandunscaled datastreams. Thelinecropping modeiscontrolled bybit6ofI2C\nregisterB1h.\n3.8.3.5 Metadata Insertion forLine-Interleaved Mode\nIntheline-interleaved mode,thevideodataisrearranged onaline-by-line basis.Therecanbeno\nguaranteed outputlineorder,becauseallanalogvideoinputsarenotsynchronized. Tobecompatible with\ngeneralbackendBT.656decoder, thevideodataisencapsulated onTVP5158 outputsothatallinputdata\nispreserved andoutputdataisunderstandable toaBT.656decoder.\nTopreventconfusion overimagelinecountandverticalblankingappearing haphazardly, SAV/EAV codes\nhaveFIDandVdatastrippedandreplaced withFID=V=0.Because verticalblankingintheinputis\nbeingmaskedout,artificialverticalsyncisinsertedeveryencapsulated frame(a.k.a.,superframe).Thus,\ntotheunaware BT.656decoder, thestreamappearstobeprogressive datawithtwolinesofvertical\nblanking. Thedefaultsuper-frame formatandtimingforeachline-interleaved outputformatisshownin\nTable3-11.\n28Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nFFh 00h 00h XYhSAV Channel Data\nSC3 SC2 SC1 SC0\nSAV for\nencapsulated\nframeCbY\nCrYFFh 00h 00h XYhEAV\nStart code for\nchannel dataEAV for\nencapsulated\nframeHorizontal Active Period (SAV2EAV)\nFFh 00h 00h XYh FFh 00h 00h XYhSC3 SC2 SC1 SC0\nY Y\nCb CrHorizontal Blanking Interval\n64 clock cycles (fixed)EAV2SAV Start Code\nFFh 00h 00h XYhSAV\nSC3 SC3 SC2 SC2Channel Data\nSC1 SC1 SC0 SC0\nSAV for\nencapsulated\nframeCb Y Cr YFFh 00h 00h XYhEAV\nStart code for\nchannel dataEAV for\nencapsulated\nframeHorizontal Active Period (SAV2EAV) Horizontal Blanking Interval\n64 clock cycles (fixed)EAV2SAV Start Code\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable3-11.DefaultSuper-Frame FormatandTiming\nOCLK EAV SAV SFHSIZE SFVSIZEVideoOutputFormats EAV2SAV (bytes) SAV2EAV (bytes)(MHz) (bytes) (bytes) (bytes) (bytes)\nCropping Enable n/a n/a 1 0 n/a 1 0 n/a n/a\n2-ChD1 54 4 280 248 4 1416 1448 1704 1052\n2-ChHalf-D1 27 4 128 112 4 712 728 848 1052\n108 4 848 816 4 1416 1448 2272 1577\n3-ChD1(1)\n81 4 280 248 4 1416 1448 1704 1577\n4-ChD1 108 4 280 248 4 1416 1448 1704 2102\n4-ChHalf-D1 54 4 128 112 4 712 728 848 2102\n4-ChCIF 27 4 128 112 4 712 728 848 1054\n4-ChD1(16bit) 54 4 136 120 4 708 724 852 2102\n4-ChHalf-D1(16bit) 27 4 60 52 4 356 364 424 2102\n108 4 416 400 4 712 728 1136 3152\n6-ChHalf-D1(1)\n81 4 128 112 4 712 728 848 3152\n8-ChHalf-D1 108 4 128 112 4 712 728 848 4095\n8-ChCIF 54 4 128 1121 4 712 728 848 2106\n6-ChHalf-D1+1-ChD1108 4 128 112 4 712 728 848 4095\n108 4 416 400 4 712 728 1136 3152\n4-ChHalf-D1+1-ChD1(1)\n81 4 128 112 4 712 728 848 3152\n4-ChCIF+1-ChD1 54 4 128 112 4 712 728 848 2104\n108 4 416 400 4 712 728 1136 3156\n8-ChCIF+1-ChD1(1)\n81 4 128 112 4 712 728 848 3156\n(1)Theoutputclockfrequency fortheseoutputformatscanbeselectedusingbit6ofI2CregisterB2h.Thedefaultclockfrequency is108\nMHz.\n4-ByteStartCode(SC3:SC0) isinsertedimmediately afterSAVcodeforencapsulated frame.Figure3-15\nandFigure3-16showthestartcodedetails.\nFigure3-15.StartCodein8-BitBT.656Interface\nFigure3-16.StartCodein16-BitYCbCr4:2:2Interface\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 29\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable3-12andTable3-13showthebitassignment andfielddefinition of4-BytestartcodeforActive\nVideoLine.\nTable3-12.BitAssignment of4-ByteStartCodeforActiveVideoLine\nBYTE 7 6 5 4 3 2 1 0\nSC[3] 1 BOP EOP RSVD VCS_ID CH_ID[1:0]\nSC[2] 0 BOL EOL VDET RSVD LN_ID[8:7]\nSC[1] ~LD_ID[6] LN_ID[6:0]\nSC[0] 1 F V H P3 P2 P1 P0\nTable3-13.BitFieldDefinition of4-ByteStartCodeforActiveVideoLine\nBIT NAME FUNCTION\n31 1 Alwayssetto1.\nActive-high beginning ofperiodflag.Sethighforfirstlineofbothactivevideoandverticalblankinginterval.\nInsplit-linemode,theBOPbitisthesameforbothhalvesofthesameline.\n30 BOP0:NotBOP\n1:BOP\nActive-high endofperiodflag.Sethighforlastlineofbothactivevideoandverticalblankinginterval.Insplit-\nlinemode,theEOPbitisthesameforbothhalvesofthesameline.\n29 EOP0:NotEOP\n1:EOP\n[28:27] RSVD Reserved\nVideocascadestageID.Setto0fornormaloperation. Incascademode,theback-end device(forexample,\nTMS320DM6467) interfaces tothefirststage.\n26 VCS_ID0:Firststage(channels 1to4)\n1:Secondstage(channels 5to8)\n2-bitChannelID.Videodecoderchannelnumber.\n00:Channel1\n[25:24] CH_ID[1:0] 01:Channel2\n10:Channel3\n11:Channel4\n23 0 Alwayssetto0.\nActive-high beginning oflineflag.Usedinsplit-linemodewhichmayberequiredforhybridformats(e.g.1-\nChD1+8-ChCIF).Sethighwhenthecurrentencapsulated lineofchanneldataincludesthebeginning ofa\nvideoline.22 BOL\n0:BOLnotincluded(2ndhalfofsplitline)\n1:BOLincluded(1sthalfofsplitlineorfullline)\nActive-high endoflineflag.Usedinsplit-linemodewhichmayberequiredforhybridformats(e.g.1-ChD1+\n8-ChCIF).Sethighwhenthecurrentlineofchanneldataincludestheendofavideoline.\n21 EOL0:EOLnotincluded(1sthalfofsplitline)\n1:EOLincluded(2ndhalfofsplitlineorfullline)\nActive-high videodetection status\n20 VDET 0:Videonotdetected\n1:Videodetected\n[19:18] RSVD Reserved\nTwoMSBsof9-bitLineID,activevideolinenumber.Linecounterresetsto000hatbeginning ofactive\n[17:16] LN_ID[8:7] video(thatis,resetsonceperfield).Duringtheverticalblankinginterval,thelinecountermayeither\ncontinuecountingorholdtheterminalcountdetermined attheendofactivevideo.\n15 ~LN_ID[6] Alwayssettothecomplement ofbit14(LN_ID[6]).\nSevenLSBsof9-bitLineID,activevideolinenumber.Linecounterresetsto000hatbeginning ofactive\n[14:8] LN_ID[6:0] video(thatis,resetsonceperfield).Duringtheverticalblankinginterval,thelinecountermayeither\ncontinuecountingorholdtheterminalcountdetermined attheendofactivevideo.\n30Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable3-13.BitFieldDefinition of4-ByteStartCodeforActiveVideoLine(continued)\nBIT NAME FUNCTION\n7 1 Alwayssetto1.\nF-bit\n6 F 0:Firstfieldofframe\n1:Secondfieldofframe\nV-bit\n5 V 0:whennotinverticalblanking\n1:duringverticalblanking\nH-bit.Alwayssetto0.\n4 H 0:SAV\n1:EAV(neverused)\n3 P3 P3=VXORH,Protection bitsusedforerrordetection/correction\n2 P2 P2=FXORH,Protection bitsusedforerrordetection/correction\n1 P1 P1=FXORV,Protection bitsusedforerrordetection/correction\n0 P0 P0=FXORVXORH,Protection bitsusedforerrordetection/correction\nNOTE\nForline-interleaved outputmode,ifnoneofvideodecoderchannels hasthedatareadyata\ngiventime,TVP5158 outputsthedummylineuntilanyoneofvideodecoderchannels is\nreadytooutputaline.Thebackendchipneedstokeeponlytheactivevideolineandignore\nthedummyline.\nThestartcodeofthedummylineisdifferentwithactivevideoline.Table3-14showsthebitassignment\nandfielddefinition of4-BytestartcodefortheDummyLine.\nTable3-14.BitAssignment of4-ByteStartCodefortheDummyLine\nBYTE 7 6 5 4 3 2 1 0\nSC[3] 0 0 0 0 0 0 0 1\nSC[2] 0 0 0 0 0 0 0 1\nSC[1] 0 0 0 0 0 0 0 1\nSC[0] 0 0 0 0 0 0 0 1\nNOTE\nTheDummyLinecanbedistinguished fromactivevideolinebylookingattheMSBofbyte\nSC[0].\n3.9AudioSub-System (TVP5157 andTVP5158 Only)\nTheaudiosub-system integrates a4-Chaudioanalog-to-digital converter, digitalprocessing, andI2S\nencoder. TVP5158 audiosub-system supports 4-Chmonoanalogaudioinputandstandard/multiple I2S\noutput.TVP5158 alsosupportsaudiocascadeconnection uptofourdevicescascadeconnected for16-Ch\naudioinput.\n3.9.1Features\n•Fourmonoanalogaudioinputchannels\n–Requires externalpassiveattenuator tosupport2.828-Vpp analogaudioinput\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 31\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n•Programmable GainAmplifier (PGA)\n–Gainrange:-12~0dB,GainStep:1.5dB\n•Integrated Anti-Aliasing Filter(AAF)\n•10-BitAnalog-to-Digital Converter\n•Integrates AudioHigh-pass filtertoeliminate lowfrequency hum\n•Digitalserialaudiointerface\n–16-BitLinearPCM,8-BitA-Lawand8-Bitµ-LawData\n–I2SorDSPFormat\n–MasterandSlavemodeoperation\n–Upto16slotsTDMoutput\n–64fsor256fssystemclock\n•Sampling Rate:16kHz,8kHz\n•AudioCascade connection\n–Upto4cascaded devices\n–I2Sformat\n–256fssystemclock\n•AudioMixingOutput\n–AudioADChasoneregistertosetmixratio\n–TheMixingoutputpinSD_Mcanalsobeusedforrecording. Combined withtherecording output\npinSD_R,twoI2Sbit-streams canbeoutputsimultaneously.\n3.9.2AudioSub-System Functional Diagram\nFigure3-17.AudioSub-System Functional Diagram\n32Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nLRCLK_R\nBCLK_R\nSD_R\n(a) I2S Format1/fs\nMSB MSB\nLRCLK_R\nBCLK_R\nSD_R\n(b) DSP Format1/fs\nMSB LSB MSBLSB\nLSBLSB\nLSBLSB\nData 1 Data 2\nData 1 Data 2\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n3.9.3SerialAudioInterface\nThetimingfortheTVP5158 serialaudiointerface isshowninFigure3-18.TheTVP5158 audiodata\noutput(SD_R)andframesyncpulse(LRCLK) arealignedwiththefallingedgeofthebitclock(BCLK).\nTheTVP5158 audiodataisdelayedoneBCLKcyclesfromthefallingedgeoftheframesyncpulse.Inthe\nDSPmode,theTVP5158 framesyncpulseishighforonlyoneBCLKcycle.\nFigure3-18.SerialAudioInterface TimingDiagram\n3.9.4AnalogAudioInputClamping\nAninternalclamping circuitprovides mid-level clamping ofallfouranalogaudioinputstoadclevelof\napproximately 0.625V.\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 33\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158\nFirst StageAIN_1\nAIN_2\nAIN_3\nAIN_4BCLK_R\nLRCLK_R\nSD_R\nSD_M\nSD_CISD_CO\nTVP5158\nSecond StageAIN_5\nAIN_6\nAIN_7\nAIN_8\nSD_CISD_CO\nTVP5158\nThird StageAIN_9\nAIN_10\nAIN_11\nAIN_12\nSD_CISD_CO\nTVP5158\nLast StageAIN_13\nAIN_14\nAIN_15\nAIN_16BCLK_R\nLRCLK_R\nSD_R\nSD_CISD_CORecord Output\n(AIN_13-AN_16)Record Output\n(AIN_9-AN_16)Record Output\n(AIN_5-AN_16)Record Output\n(AIN_1-AN_16)\nMix Output\nBCLK_CI\nLRCLK_CI\nSD_MBCLK_R\nLRCLK_R\nSD_R\nSD_MBCLK_R\nLRCLK_R\nSD_RBCLK_CI\nSD_MBCLK_R\nLRCLK_R\nSD_R\nSD_MLRCLK_CIBCLK_R\nLRCLK_R\nSD_RBCLK_CI\nSD_MBCLK_R\nLRCLK_R\nSD_R\nSD_MLRCLK_CI\nXTAL_IN\nOSC_OUTXTAL_IN\nOSC_OUTXTAL_IN\nOSC_OUTXTAL_OUT\nOSC_OUTXTAL_IN\nXTAL\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n3.9.5AudioCascade Connection\nFigure3-19.AudioCascade Connection\nTVP5158 supports uptofourdevicescascaded togetherforaudiocascadeconnection. TheI2Soutputof\nmasterTVP5158 (1ststage)combines allaudiochanneldatafromcascaded TVP5158 devices.\nKeyFeatures ofAudioCascade Connection\n•16-BitlinearPCMdata\n•I2Sformat\n•BitClock:256fs\n•Allcascadeinputsarealwaysinslavemode\n•Secondtofourthstageserialaudiooutputsarealwaysinmastermode\n•Firststageserialaudiooutputcanbeineithermasterorslavemode\n•Common clocksourceforallcascaded devicesisrequired\nTheSerialAudioOutputChannelAssignment shownonTable3-15.\n34Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable3-15.SerialAudioOutputChannel Assignment\nI2S\nLRCLK_R Left LRCLK_R Right\ntdm_ch tdm_out_pin Slot1Slot2Slot3Slot4Slot5Slot6Slot7Slot8Slot9Slot10Slot11Slot12Slot13Slot14Slot15Slot16\nSD_RAIN_1 AIN_2\n0\nSD_M\n0(2channel)\nSD_RAIN_1\n1\nSD_MAIN_2\nSD_RAIN_1AIN_3 AIN_2AIN_4\n0\nSD_M\n1(4channel)\nSD_RAIN_1 AIN_2\n1\nSD_MAIN_3 AIN_4\nSD_RAIN_1AIN_3AIN_5AIN_7 AIN_2AIN_4AIN_6AIN_8\n0\nSD_M\n2(8channel)\nSD_RAIN_1AIN_5 AIN_2AIN_6\n1\nSD_MAIN_3AIN_7 AIN_4AIN_8\nSD_RAIN_1AIN_3AIN_5AIN_7AIN_9AIN_11 AIN_2AIN_4AIN_6AIN_8AIN_10AIN_12\n0\nSD_M\n3(12channel)\nSD_RAIN_1AIN_5AIN_9 AIN_2AIN_6AIN_10\n1\nSD_MAIN_3AIN_7AIN_11 AIN_4AIN_8AIN_12\nSD_RAIN_1AIN_3AIN_5AIN_7AIN_9AIN_11AIN_13AIN_15 AIN_2AIN_4AIN_6AIN_8AIN_10AIN_12AIN_14AIN_16\n0\nSD_M\n4(16channel)\nSD_RAIN_1AIN_5AIN_9AIN_13 AIN_2AIN_6AIN_10AIN_14\n1\nSD_MAIN_3AIN_7AIN_11AIN_15 AIN_4AIN_8AIN_12AIN_16\nDSPFormat\ntdm_ch tdm_out_pin Slot1Slot2Slot3Slot4Slot5Slot6Slot7Slot8Slot9Slot10Slot11Slot12Slot13Slot14Slot15Slot16\nSD_RAIN_1AIN_2\n0\nSD_M\n0(2channel)\nSD_RAIN_1\n1\nSD_MAIN_2\nSD_RAIN_1AIN_3AIN_2AIN_4\n0\nSD_M\n1(4channel)\nSD_RAIN_1AIN_2\n1\nSD_MAIN_3AIN_4\nSD_RAIN_1AIN_3AIN_5AIN_7AIN_2AIN_4AIN_6AIN_8\n0\nSD_M\n2(8channel)\nSD_RAIN_1AIN_5AIN_2AIN_6\n1\nSD_MAIN_3AIN_7AIN_4AIN_8\nSD_RAIN_1AIN_3AIN_5AIN_7AIN_9AIN_11 AIN_2AIN_4AIN_6AIN_8AIN_10AIN_12\n0\nSD_M\n3(12channel)\nSD_RAIN_1AIN_5AIN_9AIN_2AIN_6AIN_10\n1\nSD_MAIN_3AIN_7AIN_11 AIN_4AIN_8AIN_12\nSD_RAIN_1AIN_3AIN_5AIN_7AIN_9AIN_11AIN_13AIN_15 AIN_2AIN_4AIN_6AIN_8AIN_10AIN_12AIN_14AIN_16\n0\nSD_M\n4(16channel)\nSD_RAIN_1AIN_5AIN_9AIN_13 AIN_2AIN_6AIN_10AIN_14\n1\nSD_MAIN_3AIN_7AIN_11AIN_15 AIN_4AIN_8AIN_12AIN_16\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 35\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n3.10I2CHostInterface\nTheI2Cstandard consistsoftwosignals,serialinput/output dataline(SDA)andinput/output clockline\n(SCL),whichcarryinformation betweenthedevicesconnected tothebus.TheinputpinsI2CA0,I2CA1\nandI2CA2areusedtoselecttheslaveaddresstowhichthedeviceresponds. Although theI2Csystem\ncanbemulti-mastered, theTVP5158 decoderfunctions asaslavedeviceonly.\nBothSDAandSCLmustbeconnected toIOVDDviapullupresistors. Whenthebusisfree,bothlinesare\nhigh.Theslaveaddressselectterminals (I2CA0,I2CA1andI2CA2)enabletheuseofuptoeightdevices\nonthesameI2Cbus.Atthetrailingedgeofreset,thestatusoftheI2CA0,I2CA1andI2CA2linesare\nsampledtodetermine thedeviceaddressused.Table3-16summarizes theterminalfunctions oftheI2C\nhostinterface. Table3-17showsthedeviceaddressselection options.\nTable3-16.I2CTerminal Description\nSIGNAL TYPE DESCRIPTION\nI2CA0 I Slaveaddressselection\nI2CA1 I Slaveaddressselection\nI2CA2 I Slaveaddressselection\nSCL I/O(opendrain) Input/output clockline\nSDA I/O(opendrain) Input/output dataline\nTable3-17.I2CHostInterface DeviceAddresses\nA6 A5 A4 A3 A2(I2CA2) A1(I2CA1) A0(I2CA0) R/W HEX\n1 0 1 1 0 0 0 1/0 B1/B0\n1 0 1 1 0 0 1 1/0 B3/B2\n1 0 1 1 0 1 0 1/0 B5/B4\n1 0 1 1 0 1 1 1/0 B7/B6\n1 0 1 1 1 0 0 1/0 B9/B8\n1 0 1 1 1 0 1 1/0 BB/BA\n1 0 1 1 1 1 0 1/0 BD/BC\n1 0 1 1 1 1 1 1/0 BF/BE\nDatatransferrateonthebusisupto400kbit/s.Thenumberofdevicesconnected tothebusis\ndependent onthebuscapacitance limitof400pF.ThedataontheSDAlinemustbestableduringthe\nhighperiodoftheSCLexceptforstartandstopconditions. Thehighorlowstateofthedatalinecanonly\nchangewiththeclocksignalontheSCLlinebeinglow.Ahigh-to-low transition ontheSDAlinewhilethe\nSCLishighindicates anI2Cstartcondition. Alow-to-high transition ontheSDAlinewhiletheSCLishigh\nindicates anI2Cstopcondition.\nEverybyteplacedontheSDAmustbe8bitslong.Thenumberofbyteswhichcanbetransferred is\nunrestricted. Eachbytemustbefollowedbyanacknowledge bit.Theacknowledge-related clockpulseis\ngenerated bytheI2Cmaster.\nTosimplifyprogramming ofeachofthe4decoder channels asingleI2Cwritetransaction canbe\ntransmitted toanyoneormoreofthe4coresinparallel.Thisreducesthetimerequiredtodownload\nfirmware ortoconfigure thedevicewhenallchannels aretobeconfigured inthesamemanner.Italso\nenablestheaddresses forallregisterstobecommonacrossalldecoders.\nI2Csubaddress FEhcontains4bitswitheachbitcorresponding tooneofthedecodercores.Ifadecoder\nwriteenablebitisset,thenI2Cwritetransactions aresenttothecorresponding decodercore.Formulti-\nbyteI2Cwritetransactions, thereareoptionstoauto-increment thesubaddress ortoauto-increment\nthroughtheselecteddecoders orboth.\n36Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nI2Csubaddress FFhcontains4bitswitheachbitcorresponding tooneofthedecodercores.Ifadecoder\nreadenablebitisset,thenI2Creadtransactions aresenttothecorresponding decodercore.\nIfmorethanonedecoderisenabledforreads,thenthelowestnumbered decoderthatisenabled\nresponds tothereadtransaction. Formulti-byte I2Creadtransactions, thereareoptionstoauto-increment\nthesubaddress ortoauto-increment throughtheselecteddecoders orboth.\n3.10.1I2CWriteOperation\nDatatransfers occurutilizingthefollowing formats.\nAnI2Cmasterinitiatesawriteoperation tothedecoderbygenerating astartcondition (S)followedbythe\ndecoderI2Caddress(asshownbelow),inMSBfirstbitorder,followedbya0toindicateawritecycle.\nAfterreceiving anacknowledge fromthedecoder, themasterpresents thesubaddress oftheregister,or\nthefirstofablockofregisters itwantstowrite,followedbyoneormorebytesofdata,MSBfirst.The\ndecoderacknowledges eachbyteaftercompletion ofeachtransfer.TheI2Cmasterterminates thewrite\noperation bygenerating astopcondition (P).\nStep1 0\nI2CStart(master) S\nStep2 7 6 5 4 3 2 1 0\nI2CGeneraladdress(master) 1 0 1 1 1 0 X 0\nStep3 9\nI2CAcknowledge (slave) A\nStep4 7 6 5 4 3 2 1 0\nI2CWriteregisteraddress(master) Addr Addr Addr Addr Addr Addr Addr Addr\nStep5 9\nI2CAcknowledge (slave) A\nStep6(1)7 6 5 4 3 2 1 0\nI2CWritedata(master) Data Data Data Data Data Data Data Data\nStep7(1)9\nI2CAcknowledge (slave) A\nStep8 0\nI2CStop(master) P\n(1)Repeatsteps6and7untilalldatahavebeenwritten.\n3.10.2I2CReadOperation\nThereadoperation consistsoftwophases.Thefirstphaseistheaddressphase.Inthisphase,anI2C\nmasterinitiatesawriteoperation tothedecoderbygenerating astartcondition (S)followed bythe\ndecoderslaveaddress, inMSBfirstbitorder,followedbya0toindicateawritecycle.Afterreceiving\nacknowledge fromthedecoder, themasterpresentsthesubaddress oftheregisterorthefirstofablockof\nregistersitwantstoread.Afterthecycleisacknowledged, themasterhastheoptionofgenerating astop\ncondition ornot.\nInthedataphase,anI2Cmasterinitiatesareadoperation tothedecoderbygenerating astartcondition\nfollowedbythedecoderI2Cslaveaddress(asshownbelowforareadoperation), inMSBfirstbitorder,\nfollowedbya1toindicateareadcycle.Afteranacknowledge fromthedecoder, theI2Cmasterreceives\noneormorebytesofdatafromthedecoder. TheI2Cmasteracknowledges thetransferattheendofeach\nbyte.Afterthelastdatabytehasbeentransferred fromthedecoder, themastergenerates anot\nacknowledge followedbyastop.\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 37\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nReadPhase1\nStep1 0\nI2CStart(master) S\nStep2 7 6 5 4 3 2 1 0\nI2CGeneraladdress(master) 1 0 1 1 X X X 0\nStep3 9\nI2CAcknowledge (slave) A\nStep4 7 6 5 4 3 2 1 0\nI2CReadregisteraddress(master) Addr Addr Addr Addr Addr Addr Addr Addr\nStep5 9\nI2CAcknowledge (slave) A\nStep6(1)0\nI2CStop(master) P\n(1)Step6isoptional.\nReadPhase2\nStep7 0\nI2CStart(master) S\nStep8 7 6 5 4 3 2 1 0\nI2CGeneraladdress(master) 1 0 1 1 X X X 1\nStep9 9\nI2CAcknowledge (slave) A\nStep10(1)7 6 5 4 3 2 1 0\nI2CReaddata(slave) Data Data Data Data Data Data Data Data\nStep11(1)9\nI2CNotAcknowledge (master) A\nStep12 0\nI2CStop(master) P\n(1)Repeatsteps10and11forallbytesread.Masterdoesnotacknowledge thelastreaddatareceived.\n38Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nI2C Registers VBUS Registers\n00h\nFFh00 0000h\nA0 3FFFhVBUS\nData\nVBUS\nAddressVBUS [23:0]Host\nProcessorI2C 40 3EEFh\nE0h\nE8hComb\nFilter RAM\nE1h\nEAh40 3E50h\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n3.10.3VBUSAccess\nTheTVP5158 videodecoderhasadditional internalregisters accessible throughanindirectaccesstoan\ninternal24-bitaddresswideVBUS.Figure3-20showstheVBUSregistersaccess.\nFigure3-20.VBUSAccess\nVBUSWrite\nSingleByte\nSB8ACKE8ACKVA0ACKVA1ACKVA2ACK P\nSB8ACKE0ACKSendDataACK P\nMultipleBytes\nSB8ACKE8ACKVA0ACKVA1ACKVA2ACK P\nSB8ACKE1ACKSendDataACK...SendDataACK P\nVBUSRead\nSingleByte\nSB8ACKE8ACKVA0ACKVA1ACKVA2ACK P\nSB8ACKE0ACK SB9ACKReadDataNAK P\nMultipleBytes\nSB8ACKE8ACKVA0ACKVA1ACKVA2ACK P\nSB8ACKE1ACK SB9ACKReadDataMACK ...ReadDataNAK P\nNOTE: Examples usedefaultI2Caddress\nACK: Acknowledge generated bytheslave\nMACK: Acknowledge generated bythemaster\nNAK: NoAcknowledge generated bythemaster\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 39\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nVSSA27-MHz\nCrystal\n27-MHz CLK\nOutput to other TVP5158\nXTAL_IN pin27-MHz CLK\nOutput to other TVP5158\nXTAL_IN pin0/c87\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n3.11ClockCircuits\nAnanalogclockmultiplier PLLisusedtogenerate asystemclockfromanexternal27-MHzcrystal\n(fundamental resonant frequency) orexternalclockreference input.Acrystalcanbeconnected across\nterminals 99(XTAL_IN) and101(XTAL_OUT), ora1.8-Vexternalclockinputcanbeconnected to\nterminal99.Fourhorizontal PLLsgenerate theline-locked sampleclockforeachvideodecodercorefrom\nthesystemclock.FourcolorPLLsgenerate thecolorsubcarrier frequency foreachvideodecodercore\nfromthecorresponding line-locked clock.FourverticalPLLsgenerate thefield/frame syncforeachvideo\ndecodercore.Afrequency synthesizer generates the32.768-MHz audiooversampling clockforeach\nanalogaudioinputfromthesystemclock.\nFigure3-21showsthereference clockconfigurations. Fortheexamplecrystalcircuitshown,theexternal\ncapacitors musthavethefollowing relationship:\nCL1=CL2=2CL–CSTRAY\nWhere,\nCSTRAYistheterminalcapacitance withrespecttoground\nCListhecrystalloadcapacitance specified bythecrystalmanufacturer\nFigure3-21.ClockandCrystalConnectivity\n40Functional Description Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nRESETB\n(Terminal 3)\nResetNormal operation\nInvalid I C Cycle2Valid260 µs (min)20 ms (min)\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n3.12ResetMode\nTerminal 3(RESETB) isactivelowsignaltoholdthedecoder intoreset.Table3-18showsthe\nconfiguration ofresetmode.Table3-19describes thestatusofthedecoder signalsduringand\nimmediately afterreset.Figure3-22showstheresettiming.\nAfterpower-up, thedeviceisinanunknown stateuntilproperlyreset.Anactive-low reset,ResetB,of\ngreaterthanorequalto20msisrequiredfollowing activeandstablesupplyramp-up. Toavoidpotential\nI2Cissues,keepSCLandSDAinactive(high)foratleast260µsafterresetgoeshigh.Thereareno\npowersequencing requirements exceptthatallpowersuppliesshouldbecomeactiveandstablewithin\n500msofeachother.\nTable3-18.ResetMode\nRESETB CONFIGURATION\n0 Resetsthedecoder\n1 Normaloperation\nTable3-19.ResetSequence\nSIGNALNAME DURING RESET RESETCOMPLETED\nDVO_A_[7:0], DVO_B_[7:0], DVO_C_[7:0], DVO_D_[7:0], OCLK_P, OCLK_N,Input High-impedanceINTREQ, I2CA[2:0], BCLK_R, LRCLK_R, SD_R,SD_M,SD_CO\nRESETB, SDA,SCL,LRCLK_CI, BCLK_CI, SD_CI,XTAL_IN Input Input\nXTAL_OUT, OSC_OUT Output Output\nFigure3-22.ResetTiming\nCopyright ©2009–2013,TexasInstruments Incorporated Functional Description 41\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n4InternalControlRegisters\n4.1Overview\nThedecoderisinitialized andcontrolled byasetofinternalregisters whichsetalldeviceoperating\nparameters. Communication between theexternalcontroller andthedecoderisthroughI2C.Table4-1\nshowsthesummary oftheseregisters. Thereserved registers mustnotbewritten.Reserved bitsinthe\ndefinedregisters mustbewrittenwith0s,unlessotherwise noted.Thedetailedprogramming information\nofeachregisterisdescribed inthefollowing sections.\nI2CregisterFEhcontrolswhichofthefourdecoders willreceiveI2Ccommands. I2CregisterFFhcontrols\nwhichdecodercoreresponds toI2Creads.Notethatforareadoperation, itisnecessary toperforma\nwritefirsttosetthedesiredsubaddress forreading.\nCompared toprevious videodecoder, TVP5154A, theTVP5158, TVP5157, andTVP5156 adddecoder\nautoincrement andaddressautoincrement bitscontrol.Ifdecoderautoincrement bitisset,thenext\nread/write isfrom/tothenextdecoderthatisenabled. Ifaddressauto-increment bitisset,theaddress\nincrements afterallthedecoders enabledread/writes arecompleted. ThedetailofI2Cregisters FEhand\nFFhisshownintheirregistersection.\nTable4-1.Registers Summary\nI2CREGISTER NAME DEFAULT R/W(1)\nSUBADDRESS\nStatus1 00h R\nStatus2 01h R\nColorSubcarrier PhaseStatus 02h R\nReserved 03h\nROMVersion 04h R\nRAMVersionMSB 05h R\nRAMVersionLSB 06h R\nReserved 07h\nChipIDMSB 08h 51h R\nChipIDLSB 09h 58h R\nReserved 0Ah-0Bh\nVideoStandard Status 0Ch R\nVideoStandard Select 0Dh 00h R/W\nCVBSAutoswitch Mask 0Eh 03h R/W\nAutoContrastMode 0Fh 03h R/W\nLuminance Brightness 10h 80h R/W\nLuminance Contrast 11h 80h R/W\nBrightness andContrastRangeExtender 12h 00h R/W\nChrominance Saturation 13h 80h R/W\nChrominance Hue 14h 00h R/W\nReserved 15h\nColorKiller 16h 10h R/W\nReserved 17h\nLuminance Processing Control1 18h 40h R/W\nLuminance Processing Control2 19h 00h R/W\nPowerControl 1Ah 00h R/W\nChrominance Processing Control1 1Bh 00h R/W\nChrominance Processing Control2 1Ch 0Ch R/W\n(1)R=Readonly,W=Writeonly,R/W=Readandwrite\n42InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-1.Registers Summary (continued)\nI2CREGISTER NAME DEFAULT R/W(1)\nSUBADDRESS\nReserved 1Dh-1Fh\nAGCGainStatus1 20h R\nAGCGainStatus2 21h R\nReserved 22h\nBack-End AGCStatus 23h R\nStatusRequest 24h 00h R/W\nAFEGainControl 25h F5h R/W\nLumaALCFreezeUpperThreshold 26h 00h R/W\nChromaALCFreezeUpperThreshold 27h 00h R/W\nReserved 28h\nAGCIncrement Speed 29h 06h R/W\nAGCIncrement Delay 2Ah 1Eh R/W\nAGCDecrement Speed 2Bh 04h R/W\nAGCDecrement Delay 2Ch 00h R/W\nAGCWhitePeakProcessing 2Dh F2h R/W\nBack-End AGCControl 2Eh 08h R/W\nReserved 2Fh-33h\nAFEFineGain 34h-35h 086Ah R/W\nReserved 36h-47h\nAVIDStartPixelLSBs 48h 7Ah/84h R/W\nAVIDStartPixelMSBs 49h 00h/00h R/W\nAVIDPixelWidth 4Ah-4Bh 02D0h/02D0h R/W\nReserved 4Ch-5Bh\nNR_Max_Noise 5Ch 28h R/W\nNR_Control 5Dh 09h R/W\nNR_Noise_Filter 5Eh-5Fh 0330h R/W\nOperation ModeControl 60h 00h R/W\nColorPLLSpeedControl 61h 09h R/W\nReserved 62h-7Bh\nSyncHeightLowThreshold 7Ch 02h R/W\nSyncHeightHighThreshold 7Dh 08h R/W\nReserved 7Eh-80h 03h R/W\nClearLostLockDetect 81h 00h R/W\nReserved 82h-84h\nV-SyncFilterShift 85h 03h R/W\nReserved 86h\n656Version/F BitControl 87h 00h R/W\nF-andV-BitDecodeControl 88h 00h R/W\nF-andV-BitControl 89h 16h R/W\nReserved 8Ah-8Bh\nOutputTimingDelay 8Ch 00h R/W\nReserved 8Dh-8Fh\nAutoContrastUserTableIndex 8Fh 04h R/W\nBlueScreenYControl 90h 10h R/W\nBlueScreenCbControl 91h 80h R/W\nBlueScreenCrControl 92h 80h R/W\nBlueScreenLSBControl 93h 00h R/W\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 43\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-1.Registers Summary (continued)\nI2CREGISTER NAME DEFAULT R/W(1)\nSUBADDRESS\nNoiseMeasurement LSB 94h R\nNoiseMeasurement MSB 95h R\nWeakSignalHighThreshold 96h 60h R/W\nWeakSignalLowThreshold 97h 50h R/W\nReserved 98h-9Dh\nNR_Y_T0 9Eh 0Ah R/W\nNR_U_T0 9Fh BCh R/W\nNR_V_T0 A0h BCh R/W\nReserved A1h\nVerticalLineCountStatus A2h-A3h R\nReserved A4h-A7H\nOutputFormatter Control1(writetoallfourdecodercores) A8h 44h R/W\nOutputFormatter Control2(writetoallfourdecodercores) A9h 40h R/W\nReserved AAh-ACh\nInterruptControl ADh 00h R/W\nEmbedded SyncOffsetControl1(writetoallfourdecodercores) AEh 01h R/W\nEmbedded SyncOffsetControl2(writetoallfourdecodercores) AFh 00h R/W\nAVDOutputControl1 B0h 00h R/W\nAVDOutputControl2 B1h 10h R/W\nOFMModeControl B2h 20h R/W\nOFMChannelSelect1 B3h E4h R/W\nOFMChannelSelect2 B4h E4h R/W\nOFMChannelSelect3 B5h 00h R/W\nOFMSuper-Frame SizeLSBs B6h 1Bh R/W\nOFMSuper-Frame SizeMSBs B7h 04h R/W\nOFMH-BlankDurationLSBs B8h 40h R/W\nOFMH-BlankDurationMSBs B9h 00h R/W\nMiscOfmControl BAh 00h R/W\nReserved BBh-BFh 00h R/W\nAudioSampleRateControl C0h 00h R/W\nAnalogAudioGainControl1 C1h 88h R/W\nAnalogAudioGainControl2 C2h 88h R/W\nAudioModeControl C3h C9h R/W\nAudioMixerSelect C4h 01h R/W\nAudioMuteControl C5h 00h R/W\nAudioMixingRatioControl1 C6h 00h R/W\nAudioMixingRatioControl2 C7h 00h R/W\nAudioCascade ModeControl C8h 00h R/W\nReserved C9h A5h R/W\nReserved CAh FFh R/W\nReserved CBh 7Eh R/W\nReserved CCh 01h R/W\nReserved CDh-CFh\nSuper-frame EAV2SAV durationstatusLSBs D0h R\nSuper-frame EAV2SAV durationstatusMSBs D1h R\nSuper-frame SAV2EAV durationstatusLSBs D2h R\nSuper-frame SAV2EAV durationstatusMSBs D3h R\n44InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-1.Registers Summary (continued)\nI2CREGISTER NAME DEFAULT R/W(1)\nSUBADDRESS\nReserved D4h-DFh\nVBUSDataAccessWithNoVBUSAddressIncrement E0h R/W\nVBUSDataAccessWithVBUSAddressIncrement E1h R/W\nReserved E2h-E7h\nVBUSAddressAccess E8h-EAh 000000h R/W\nReserved EBh-F1h R/W\nInterruptStatus F2h R\nReserved F3h\nInterruptMask F4h 00h R/W\nReserved F5h\nInterruptClear F6h 00h R/W\nDecoderWriteEnable FEh 0Fh R/W\nDecoderReadEnable FFh 01h R/W\n4.2Register Definitions\nTable4-2.Status1\nSubaddress 00h\nDefault Readonly\n7 6 5 4 3 2 1 0\nColorLine-alternating Fieldrate VerticalsyncHorizontal syncReserved Lostlockdetectsubcarrier lock TV/VCRstatusstatus status lockstatus lockstatusstatus\nLine-alternating status\n0Nonlinealternating\n1Linealternating\nFieldratestatus\n060Hz\n150Hz\nLostlockdetect\n0Nolostlocksincethisbitwaslastcleared\n1Lostlocksincethisbitwaslastcleared\nColorsubcarrier lockstatus\n0Colorsubcarrier isnotlocked\n1Colorsubcarrier islocked\nVerticalsynclockstatus\n0Verticalsyncisnotlocked\n1Verticalsyncislocked\nHorizontal synclockstatus\n0Horizontal syncisnotlocked\n1Horizontal syncislocked\nTV/VCRstatus\n0TV\n1VCR\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 45\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-3.Status2\nSubaddress 01h\nDefault Readonly\n7 6 5 4 3 2 1 0\nWeaksignal PALswitch FieldsequenceSignalpresent Colorkilled Macrovision detection [2:0]detection polarity status\nSignalpresent\n0Signalisnotpresent\n1Signalispresent\nWeaksignaldetection\n0Noweaksignal\n1Weaksignalmode\nPALswitchpolarity\n0PALswitchiszero\n1PALswitchisone\nFieldsequence status\n0Evenfield\n1Oddfield\nColorkilled\n0Colorkillerisnotactive\n1Colorkillerisactive\nMacrovision detection [2:0]\n000Nocopyprotection\n001AGCpulses/pseudo syncspresent(Type1)\n0102-linecolorstripe onlypresent\n011AGCpulses/pseudo syncsand2-linecolorstripe present(Type2)\n100Reserved\n101Reserved\n1104-linecolorstripe onlypresent\n111AGCpulses/pseudo syncsand4-linecolorstripe present(Type3)\nTable4-4.ColorSubcarrier PhaseStatus\nSubaddress 02h\nDefault Readonly\n7 6 5 4 3 2 1 0\nColorsubcarrier phase[7:0]\nThisregistershowsthecolorsubcarrier phase.\nTable4-5.ROMVersion\nSubaddress 04h\nDefault Readonly\n7 6 5 4 3 2 1 0\nROMversion[7:0]\nROMVersion[7:0]\nROMrevisionnumber=02hforPG1.1\n46InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-6.RAMVersionMSB\nSubaddress 05h\nDefault Readonly\n7 6 5 4 3 2 1 0\nRAMversionMSB[7:0]\nRAMversionMSB[7:0]\nThisregisteridentifies theMSBoftheRAMcoderevisionnumber.\nTable4-7.RAMVersionLSB\nSubaddress 06h\nDefault Readonly\n7 6 5 4 3 2 1 0\nRAMversionLSB[7:0]\nRAMversionLSB[7:0]\nThisregisteridentifies theLSBoftheRAMcoderevisionnumber.\nExample:\nPatchRelease=v02.01.22\nROMVersion=02h\nRAMVersionMSB=01h\nRAMVersionLSB=22h\nTable4-8.ChipIDMSB\nSubaddress 08h\nDefault Readonly\n7 6 5 4 3 2 1 0\nChipIDMSB[7:0]\nChipIDMSB[7:0]\nThisregisteridentifies theMSBofdeviceID.Value=51h\nTable4-9.ChipIDLSB\nSubaddress 09h\nDefault Readonly\n7 6 5 4 3 2 1 0\nChipIDLSB[7:0]\nChipIDLSB[7:0]\nThisregisteridentifies theLSBofdeviceID.Thisvalueequals58hforTVP5158,57hforTVP5157,and56hfor\nTVP5156.\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 47\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-10.VideoStandard Status\nSubaddress 0Ch\nDefault Readonly\n7 6 5 4 3 2 1 0\nAutoswitch Reserved Videostandard [2:0]\nThisregistercontainsinformation aboutthedetectedvideostandard thatthedeviceiscurrentlyoperating. Wheninautoswitch mode,this\nregistercanbetestedtodetermine whichvideostandard ashasbeendetected. Seesubaddress: 0Dh.\nAutoswitch Mode\n0Singlestandard set\n1Autoswitch modeenabled\nVideoStandard [2:0]\n00hReserved\n01h(M,J)NTSC\n02h(B,D,G,H,I,N)PAL\n03h(M)PAL\n04h(Combination-N) PAL\n05hNTSC4.43\n06hReserved\n07hPAL60\nTable4-11.VideoStandard Select\nSubaddress 0Dh\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved CVBSStandard [2:0]\nTheusercanforcethedevicetooperateinaparticular videostandard modebywritingtheappropriate valueintothisregister.Changing\nthesebitscausessomeregistersettingstoberesettotheirdefaults.Seesubaddress: 0Ch.\nCVBSStandard [2:0]\n00hCVBSAutoswitch mode(default)\n01h(M,J)NTSC\n02h(B,D,G,H,I,N)PAL\n03h(M)PAL\n04h(Combination-N) PAL\n05hNTSC4.43\n06hReserved\n07hPAL60\n48InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-12.CVBSAutoswitch Mask\nSubaddress 0Eh\nDefault 03h\n7 6 5 4 3 2 1 0\nReserved PAL60 Reserved NTSC4.43 (Nc)PAL (M)PAL PAL (M,J)NTSC\nAutoswitch modemask\nLimitsthevideoformatsbetweenwhichautoswitch ispossible.\nPAL60 0Autoswitch doesnotincludePAL60(default)\n1Autoswitch includesPAL60\nNTSC4.43 0Autoswitch doesnotincludeNTSC4.43(default)\n1Autoswitch includesNTSC4.43\n(Nc)PAL 0Autoswitch doesnotinclude(Nc)PAL(default)\n1Autoswitch includes(Nc)PAL\n(M)PAL 0Autoswitch doesnotinclude(M)PAL(default)\n1Autoswitch includes(M)PAL\nPAL 0Reserved\n1Autoswitch includes(B,D,G,H,I,N)PAL(default)\n(M,J)NTSC 0Reserved\n1Autoswitch includes(M,J)NTSC(default)\nTable4-13.AutoContrast Mode\nSubaddress 0Fh\nDefault 03h\n7 6 5 4 3 2 1 0\nReserved AutoContrastMode[1:0]\nAutoContrastMode[1:0]\n00hEnabled\n01hReserved\n02hUserMode\n03hDisabled (default)\nTable4-14.Luminance Brightness\nSubaddress 10h\nDefault 80h\n7 6 5 4 3 2 1 0\nBrightness [7:0]\nBrightness [7:0]\nThisregisterworksfortheluminance. Seesubaddress 12h.\n000000000(dark)\n10000000128(default)\n11111111255(bright)\nTheoutputblacklevelrelativetothenominalblacklevel(64outof1024)asafunctionoftheBrightness[7:0] settingisasfollows:\nBlackLevel=nominal_black_level +(MB+1)×(Brightness[7:0] -128)\nWhereMBisthebrightness multiplier settingintheBrightness andContrastRangeExtender registeratI2Csubaddress 12h.\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 49\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-15.Luminance Contrast\nSubaddress 11h\nDefault 80h\n7 6 5 4 3 2 1 0\nContrast[7:0]\nContrast[7:0]\nThisregisterworksfortheluminance. Seesubaddress 12h.\n000000000(minimum contrast)\n10000000128(default)\n11111111255(maximum contrast)\nThetotalluminance gainrelativetothenominalluminance gainasafunctionoftheContrast[7:0]settingisasfollows:\nLuminance Gain=(nominal_luminance_gain) ×[Contrast[7:0] /64/(2MC)+MC-1]\nWhereMCisthecontrastmultiplier settingintheBrightness andContrastRangeExtender registeratI2Csubaddress 12h.\nTable4-16.Brightness andContrast RangeExtender\nSubaddress 12h\nDefault 00h\n7 6 5 4 3 2 1 0\nContrastReserved Brightness multiplier [3:0]multiplier\nContrastmultiplier [4](MC)\nIncreases thecontrastcontrolrange.\n02xcontrastcontrolrange(default), Gain=n/64–1wherenisthecontrastcontroland64≤n≤255\n1Normalcontrastcontrolrange,Gain=n/128wherenisthecontrastcontroland0≤n≤255\nBrightness multiplier [3:0](MB)\nIncreases thebrightness controlrangefrom1xto16x.\n0h1x(default)\n1h2x\n3h4x\n7h8x\nFh16x\nNOTE:Thebrightness multiplier shouldbesetto3hfor8-bitoutputs.\nTable4-17.Chrominance Saturation\nSubaddress 13h\nDefault 80h\n7 6 5 4 3 2 1 0\nSaturation [7:0]\nSaturation [7:0]\nThisregisterworksforthechrominance.\n000000000(nocolor)\n10000000128(default)\n11111111255(maximum)\nThetotalchrominance gainrelativetothenominalchrominance gainasafunctionoftheSaturation [7:0]settingisasfollows:\nChrominance Gain=(nominal_chrominance_gain) ×(Saturation[7:0] /128)\n50InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-18.Chrominance Hue\nSubaddress 14h\nDefault 80h\n7 6 5 4 3 2 1 0\nHue[7:0]\nSaturation [7:0]\nThisregisterworksforthechrominance.\n00000000-180°\n100000000°(default)\n11111111+180°\nTable4-19.ColorKiller\nSubaddress 16h\nDefault 10h\n7 6 5 4 3 2 1 0\nReserved Automatic colorkiller Colorkillerthreshold [4:0]\nAutomatic colorkiller\n00 Automatic mode(default)\n01 Reserved\nColorkillerenabled,TheUVterminals areforcedtoazero10colorstate.\n11 Colorkillerdisabled\nColorkillerthreshold [4:0]:\nControlstheupperandlowercolorkillerhysteresis thresholds.\nNTSC-M,J(1)(2)PAL-B,D,G,H,I,M,N(1)(2)\nLowerThreshold UpperThreshold LowerThreshold UpperThreshold\n00000 1.0% 1.4% 0.8% 1.2%\n01000 3.0% 4.3% 2.4% 3.5%\n10000 5.0% 7.2% 4.0% 5.8%\n11000 7.0% 10.0% 5.6% 8.0%\n11111 8.8% 12.6% 7.0% 10.0%\n(1)Expressed asapercentofthenominalcolorburstamplitude (measured afterfront-end AGC).\n(2)Forpropercolorkilleroperation, thecolorPLLmustbelockedtothecolorburstfrequency.\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 51\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-20.Luminance Processing Control1\nSubaddress 18h\nDefault 40h\n7 6 5 4 3 2 1 0\nNTSC_Ped Reserved Luminance signaldelay[2:0]\nNTSC_Ped\nSpecifies whetherNTSCcomposite videoinputsarecompliant withNTSC-M orNTSC-J.\n0NTSC-M (714/286 ratio,w/pedestal) -default\n1NTSC-J(714/286 ratio,w/opedestal)\nLuminance signaldelay[2:0]\nLuminance signaldelaysrespecttochromasignalin1xpixelclockincrements.\n0113pixelclocksdelay\n0102pixelclocksdelay\n0011pixelclocksdelay\n0000pixelclocksdelay(default)\n111-1pixelclocksdelay\n110-2pixelclocksdelay\n101-3pixelclocksdelay\n1000pixelclocksdelay\nTable4-21.Luminance Processing Control2\nSubaddress 19h\nDefault 00h\n7 6 5 4 3 2 1 0\nLumafilterselect[1:0] Reserved Peakinggain[1:0] Trapfilterselect[1:0]\nLumafilterselected[1:0]\n00Luminance adaptivecombenable(default)\n01Luminance adaptivecombdisable(trapfilterselected)\n10Lumacomb/trap filterbypassed\n11Reserved\nPeakinggain[1:0]\n000(default)\n010.5\n101\n112\nTrapfilterselect[1:0]\nSelectsoneofthefourtrapfilterstoproducetheluminance signalbyremoving thechrominance signalfromthecomposite video\nsignal.Thestopbandofthechromatrapfilteriscentered atthechromasubcarrier frequency withthestop-band bandwidth\ncontrolled bythetwocontrolbits.\nTrapfilterstop-band bandwidth (MHz)\nFilterselect[1:0] NTSCITU-RBT.601 PALITU-RBT.601\n00=(default) 1.2129 1.2129\n01 0.8701 0.8701\n10 0.7183 0.7383\n11 0.5010 0.5010\n52InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-22.PowerControl\nSubaddress 1Ah\nDefault 00h\n7 6 5 4 3 2 1 0\nPwd_ach4 Pwd_ach3 Pwd_ach2 Pwd_ach1 Pwd_vpll Pwd_ref Pwd_ofm_clk Pwd_video\nPwd_ach4\nPowerdownaudiochannel4,activehigh\n0Normaloperation (default)\n1Audiochannel4powerdown\nPwd_ach3\nPowerdownaudiochannel3,activehigh\n0Normaloperation (default)\n1Audiochannel3powerdown\nPwd_ach2\nPowerdownaudiochannel2,activehigh\n0Normaloperation (default)\n1Audiochannel2powerdown\nPwd_ach1\nPowerdownaudiochannel1,activehigh\n0Normaloperation (default)\n1Audiochannel1powerdown\nPwd_vpll\nPowerdownvideoPLL,activehigh\n0Normaloperation (default)\n1VideoPLLpowerdown\nPwd_ref\nPowerdownbandgap reference, activehigh\n0Normaloperation (default)\n1Bandgap reference powerdown\nPwd_ofm_clk\nPowerdownOFMclock,activehigh\n0Normaloperation (default)\n1OFMclockpowerdown\nPwd_video\nPowerdownvideochannelcorresponding tocurrentdecodercore,activehigh\n0Normaloperation (default)\n1Powerdownvideochannelcorresponding tocurrentdecodercore\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 53\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-23.Chrominance Processing Control1\nSubaddress 1Bh\nDefault 00h\n7 6 5 4 3 2 1 0\nChroma\nReserved ColorPLLresetadaptivecomb Reserved Automatic colorgaincontrol[1:0]\nenable\nColorPLLreset\n0Colorsubcarrier PLLnotreset(default)\n1Colorsubcarrier PLLreset\nChrominance adaptivecombenable\nThisbitiseffectiveoncomposite videoonly.\n0Enabled(default)\n1Disabled\nAutomatic colorgaincontrol(ACGC)[1:0]\n00ACGCenabled(default)\n01Reserved\n10ACGCdisabled, ACGCsettothenominalvalue\n11ACGCfrozentothepreviously setvalue\nTable4-24.Chrominance Processing Control2\nSubaddress 1Ch\nDefault 0Ch\n7 6 5 4 3 2 1 0\nPALReserved WCF Chrominance filterselect[1:0]compensation\nPALcompensation\nThisbitisnoteffectivetoNTSCmode.\n0Disabled\n1Enabled(default)\nWideband chromaLPFfilter(WCF)\n0Disabled\n1Enabled(default)\nChrominance filterselect[1:0]\nThisregistertradeschromabandwidth forlessfalsecolor.\n00Disabled (default)\n01Notch1\n10Notch2\n11Notch3\n54InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-25.AGCGainStatus\nSubaddress 20h-21h\nDefault ReadOnly\nSubaddress 7 6 5 4 3 2 1 0\n20h FineGain[7:0]\n21h Reserved FineGain[13:8]\nTheseAGCgainstatusregistersareupdatedautomatically whentheAGCisenabled;inmanualgaincontrolmodetheseregistervalues\narenotupdated.\nBecause thisregisterisamulti-byte register,itisnecessary to"capture" thesettingintotheregistertoensurethatthevalueisnotupdated\nbetweenreadingthelowerandupperbytes.Tocausethisregisterto"capture" thecurrentsettingsbit0ofI2Cregister24h(Status\nRequest) shouldbesettoa1.Aftertheinternalprocessor hasupdatedthisregister,bit0ofregister24hiscleared,indicating thatboth\nbytesoftheAGCgainstatusregisterhavebeenupdatedandcanberead.Eitherbytemaybereadfirst,becausenofurtherupdateoccurs\nuntilbit0of24hissetto1again.\nTable4-26.Back-End AGCStatus\nSubaddress 23h\nDefault ReadOnly\n7 6 5 4 3 2 1 0\nGain[7:0]\nCurrentback-end AGCratio=Gain/128.\nTable4-27.StatusRequest\nSubaddress 24h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Capture\nCapture\nSettinga1inthisregistercausestheinterprocessor tocapturethecurrentsettingsoftheAGCstatus,noisemeasurement, and\ntheverticallinecountregisters. Because thiscaptureisnotimmediate, itisnecessary tocheckforcompletion ofthecaptureby\nreadingthe"capture" bitrepeatedly aftersettingitandwaitingforittobeclearedbytheinternalprocessor. Afterthe"capture" bitis\n0,theAGCstatus,noisemeasurement, andverticallinecounters(20h/21h, 94h/95h, andA2h/A3h) havebeenupdated, andcan\nbesafelyreadinanyorder.\nTable4-28.AFEGainControl\nSubaddress 25h\nDefault F5h\n7 6 5 4 3 2 1 0\nReserved ALC Reserved AGC\nReserved\nForfuturecompatibility, allreserved bitsmustbesettologic1.\nALC\nActive-high automatic levelcontrol(ALC)enable\n0ALCdisabled(manuallevelcontrol)\n1ALCenabled(default)\nAGC\nActive-high automatic gaincontrol(AGC)enable\n0AGCdisabled(manualgaincontrol)\n1AGCenabled(default)\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 55\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-29.LumaALCFreezeUpperThreshold\nSubaddress 26h\nDefault 00h\n7 6 5 4 3 2 1 0\nLumaALCfreeze[7:0]\nUpperhysteresis threshold forlumaALCfreezefunction.Thelowerhysteresis threshold fortheALCfreezefunctionisfixedat1countout\nof4096.Settingtheupperthreshold to00h(defaultcondition) disablestheALCfreezefunction.\nTable4-30.ChromaALCFreezeUpperThreshold\nSubaddress 27h\nDefault 00h\n7 6 5 4 3 2 1 0\nChromaALCfreeze[7:0]\nUpperhysteresis threshold forchromaALCfreezefunction.Thelowerhysteresis threshold fortheALCfreezefunctionisfixedat1count\noutof4096.Settingtheupperthreshold to00h(defaultcondition) disablestheALCfreezefunction.Recommend asettingof02horgreater\nwhenenabled.\nTable4-31.AGCIncrement Speed\nSubaddress 29h\nDefault 06h\n7 6 5 4 3 2 1 0\nReserved AGCincrement speed[3:0]\nAGCincrement speed\nControlsthefiltercoefficient ofthefirst-order, recursive automatic gaincontrol(AGC)algorithm whenever incrementing thegain.\n0000(fastest)\n1106(default)\n1117(slowest)\nTable4-32.AGCIncrement Delay\nSubaddress 2Ah\nDefault 1Eh\n7 6 5 4 3 2 1 0\nAGCincrement delay[7:0]\nAGCincrement delay[7:0]\nNumberofframestodelaygainincrements. AlsoseeAGCdecrement delayatsubaddress 2Ch.\n00000000 0\n00011110 30frames(default)\n11111111 255frames\n56InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-33.AGCDecrement Speed\nSubaddress 2Bh\nDefault 04h\n7 6 5 4 3 2 1 0\nReserved AGCdecrement speed[2:0]\nAGCdecrement speed\nControlsthefiltercoefficient ofthefirst-order recursive automatic gaincontrol(AGC)algorithm whendecrementing thegain.\nNOTE:Thisregisteraffectsthedecrement speedonlywhentheamplitude reference usedbytheAGCiseitherthecomposite peak\northelumapeak.\nAlsoseeAGCincrement speedatsubaddress 29h.\n1117(slowest)\n1106(default)\n0000(fastest)\nTable4-34.AGCDecrement Delay\nSubaddress 2Ch\nDefault 00h\n7 6 5 4 3 2 1 0\nAGCdecrement delay[7:0]\nAGCdecrement delay[7:0]\nNumberofframestodelaygaindecrements.\nNOTE:Thisregisteraffectsthedecrement delayonlywhentheamplitude reference usedbytheAGCiseitherthecomposite peak\northelumapeak.\nAlsoseeAGCincrement delayatsubaddress 2Ah.\n1110\n11030(default)\n000255\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 57\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-35.AGCWhitePeakProcessing\nSubaddress 2Dh\nDefault F2h\n7 6 5 4 3 2 1 0\nCompositeLumapeakAReserved ColorburstASyncheightALumapeakB ColorburstBSyncheightBpeak\nIfallfourbitsofthelowernibblearesettologic1(thatis,noamplitude reference selected), thenthefront-end analoganddigitalgainsare\nautomatically settonominalvalues.\nIfallfourbitsoftheuppernibblearesettologic1(thatis,noamplitude reference selected), thentheback-end gainissetautomatically to\nunity.Iftheinputsyncheightisgreaterthan100%andtheAGC-adjusted outputvideoamplitude becomes lessthan100%,thentheback-\nendscalefactorattemptstoincreasethecontrastintheback-end torestorethevideoamplitude to100%.\nLumapeakA\nUseofthelumapeakasavideoamplitude reference fortheback-end feed-forward typeAGCalgorithm\n0Enabled(default)\n1Disabled\nColorburstA\nUseofthecolorburstamplitude asavideoamplitude reference fortheback-end\n0Enabled(default)\n1Disabled\nSyncheightA\nUseofthesync-height asavideoamplitude reference fortheback-end feed-forward typeAGCalgorithm\n0Enabled(default)\n1Disabled\nLumapeakB\nUseofthelumapeakasavideoamplitude reference forfront-end feedback typeAGCalgorithm\n0Enabled(default)\n1Disabled\nComposite peak\nUseofthecomposite peakasavideoamplitude reference forfront-end feedback typeAGCalgorithm\n0Enabled(default)\n1Disabled\nColorburstB\nUseofthecolorburstamplitude asavideoamplitude reference forfront-end feedback typeAGCalgorithm\n0Enabled(default)\n1Disabled\nSyncheightB\nUseofthesync-height asavideoamplitude reference forfront-end feedback typeAGCalgorithm\n0Enabled(default)\n1Disabled\n58InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-36.Back-End AGCControl\nSubaddress 2Eh\nDefault 08h\n7 6 5 4 3 2 1 0\nReserved 1 Peak Color Sync\nThisregisterallowsdisabling theback-end AGCwhenthefront-end AGCusesspecificamplitude references (sync-height, colorburstor\ncomposite peak)todecrement thefront-end gain.Forexample, writing09htothisregisterdisablestheback-end AGCwhenever thefront-\nendAGCusesthesync-height todecrement thefront-end gain.\nPeak\nDisablesback-end AGCwhenthefront-end AGCusesthecomposite peakasanamplitude reference.\n0Enabled(default)\n1Disabled\nColor\nDisablesback-end AGCwhenthefront-end AGCusesthecolorburstasanamplitude reference.\n0Enabled(default)\n1Disabled\nSync\nDisablesback-end AGCwhenthefront-end AGCusesthesyncheightasanamplitude reference.\n0Enabled(default)\n1Disabled\nTable4-37.AFEFineGain\nSubaddress 34h-35h\nDefault 086Ah\nSubaddress 7 6 5 4 3 2 1 0\n34h FGAIN[7:0]\n35h Reserved FGAIN[13:8]\nFGAIN[13:0]\nThisfinegainappliestoCVBS.FineGain=(1/2048)×FGAINwhere0≤FGAIN≤16383.Thisregisterworksonlyinmanualgain\ncontrolmode.WhenAGCisactive,writingtoanyvalueisignored.\n00000000000000toReserved00001111111111\n00010000000000 0.5\n00100000000000 1\n00100001101010 1.052(default)\n00110000000000 1.5\n11111111111111 7.9995\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 59\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-38.AVIDStartPixel\nSubaddress 48h-49h\nDefault 007Ah/0084h\nSubaddress 7 6 5 4 3 2 1 0\n48h AVIDstart[7:0]\n49h Reserved AVIDactive Reserved AVIDstart[9:8]\nAVIDstart[9:0]\nAVIDstartpixelnumber,thisisaabsolutepixellocationfromHSstartpixel0.\nTheTVP5158 updatestheAVIDstartonlywhentheAVIDstartMSBbyteiswrittento.AVIDstartpixelregisteralsocontrolsthe\npositionofSAVcode.Iftheseregistersaremodified, thentheTVP5158 retainsthevaluesforeachvideostandard untilthedevice\nisreset.Thevaluesforaparticular videostandard shouldbesetbyforcingtheTVP5158 tothedesiredvideostandard firstusing\nregister0Dhthensettingthisregister.Thisshouldberepeated foreachvideostandard wherethedefaultvaluesneedtobe\nchanged.\nAVIDactive\n0AVIDoutactiveinVBLK(default)\n1AVIDoutinactiveinVBLK\nTable4-39.AVIDPixelWidth\nSubaddress 4Ah-4Bh\nDefault 02D0h\nSubaddress 7 6 5 4 3 2 1 0\n4Ah AVIDWidth[7:0]\n4Bh Reserved AVIDWidth[9:8]\nAVIDWidth[9:0]\nAVIDpixelwidth.Thenumberofpixelswidthofactivevideomustbeanevennumber.ThisisanabsolutepixellocationfromHS\nstartpixel0.\nTheTVP5158 updatestheAVIDpixelwidthonlywhentheAVIDpixelwidthMSBbyteiswrittento.AVIDPixelWidthregisteralso\ncontrolsthepositionofEAVcode.Iftheseregistersaremodified, thentheTVP5158 retainsthevaluesforeachvideostandard\nuntilthedeviceisreset.Thevaluesforaparticular videostandard shouldbesetbyforcingtheTVP5158 tothedesiredvideo\nstandard firstusingregister0Dhthensettingthisregister.Thisshouldberepeated foreachvideostandard wherethedefault\nvaluesneedtobechanged.\nTable4-40.NoiseReduction MaxNoise\nSubaddress 5Ch\nDefault 28h\n7 6 5 4 3 2 1 0\nReserved NR_Max_Noise [6:0]\nNR_Max_Noise [6:0]\nUser-defined maximum noiselevel\n0010100040(default)\n60InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-41.NoiseReduction Control\nSubaddress 5Dh\nDefault 09h\n7 6 5 4 3 2 1 0\nNR_Color_ Block_Width_Reserved Block_Width_Y Test_Bypass NR_BypassKiller_En UV\nNR_Color_Killer_En\nNoisereduction colorkillerenabled\n0Disabled (default)\n1Enabled\nBlock_Width_UV\nNumberofUVpixelvalueswhichthealgorithm usestogenerate thenoiseaverage.\n0128pixels\n1256pixels(default)\nBlock_Width_Y\nNumberofYpixelvalueswhichthealgorithm usestogenerate thenoiseaverage.\n0256pixels(default)\n1512pixels\nTest_Bypass\nTestmodebypass.Thistestbypassmodebypasses theNoiseReduction modulecompletely viahardwiresandhaszerodelayfor\nprocessing.\n0Bypassdisabled(default)\n1Bypassenabled\nNR_Bypass\nNoisereduction modulebypass.Thenoisereduction modulehasabypasscapability whichenablesittopassthroughtheincoming\ndataduringtheoutputactivevideoperiod,whilematching thedelayinoperation mode.\n0Bypassdisabled\n1Bypassenabled(default)\nTable4-42.NoiseReduction NoiseFilterBeta\nSubaddress 5Eh-5Fh\nDefault 0330h\nSubaddress 7 6 5 4 3 2 1 0\n5Eh NR_NoiseFilter [7:0]\n5Fh Reserved NR_NoiseFilter [9:8]\nNR_NoiseFilter [9:0]\nNoisereduction noisefiltersetting\n0000001100110000 816(default)\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 61\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-43.Operation ModeControl\nSubaddress 60h\nDefault 00h\n7 6 5 4 3 2 1 0\nV-PLLfreerunReserved H-PLLResponse Time V-bitcontrol FreezeC-PLL Reserved\nV-PLLfreerunmode\n0Disabled (default)\n1Enabled\nH-PLLResponse Time\nWhenintheNormalmode,thehorizontal PLL(H-PLL)response timeissettoitsslowestsetting.Thismodeimproves noise\nimmunity andprovidesamorestableoutputlinefrequency forstandard TVsignalsources(forexample, TVtuners,DVDplayers,\nvideosurveillance cameras, etc.).\nWhenintheFastmode,theH-PLLresponse timeissettoitsfastestsetting.ThismodeenablestheH-PLLtorespondmore\nquicklytolargevariations inthehorizontal timing(forexample, VCRheadswitching intervals). Thismodeisrecommended for\nVCRsandalsocameraslockedtotheACpower-line frequency.\nWhenintheAdaptive mode,theH-PLLresponse timeisautomatically adjustedbasedonthemeasured horizontal phaseerror.In\nthismode,theH-PLLresponse timetypicallyapproaches itsslowestsettingformoststandard TVsignalsourcesandapproaches\nitsfastestsettingformostVCRsignalsources.\n00Adaptive (default)\n01Reserved\n10Fast\n11Normal\nV-bitcontrolmode\n0Verticalblankingintervalremainsconstantastotalnumberoflinesperframevaries(default)\n1Activevideointervalremainsconstantastotalnumberoflinesperframevaries\nFreezeC-PLL\n0Normaloperation (default)\n1FreezecolorPLL\nTable4-44.ColorPLLSpeedControl\nSubaddress 61h\nDefault 09h\n7 6 5 4 3 2 1 0\nReserved CPLLspeed[3:0]\nCPLLspeed[3:0]\nColorPLLspeedcontrol\n0000\ntoReserved\n1000\n10019:Faster(default)\n101010\n101111:Slower\n1100\ntoReserved\n1111\n62InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-45.SyncHeightLowThreshold\nSubaddress 7Ch\nDefault 02h\n7 6 5 4 3 2 1 0\nVSyncupperthres[7:0]\nLowerhysteresis threshold forverticalsync-height detection (value/32×targetsyncheight).\nTable4-46.SyncHeightHighThreshold\nSubaddress 7Dh\nDefault 08h\n7 6 5 4 3 2 1 0\nVSyncupperthres[7:0]\nUpperhysteresis threshold forverticalsync-height detection (value/32×targetsyncheight).\nTable4-47.ClearLostLockDetect\nSubaddress 81h\nDefault 00h\n7 6 5 4 3 2 1 0\nClearlostlockReserveddetect\nClearlostlockdetect\nClearbit4(lostlockdetect)inthestatus1registeratsubaddress 00h\n0Noeffect(default)\n1Clearsbit4inthestatus1register(00h)\nTable4-48.VSYNCFilterShift\nSubaddress 85h\nDefault 03h\n7 6 5 4 3 2 1 0\nReserved VSYNCfiltershift[1:0]\nVSYNCfiltershift[1:0]\nUsedforadaptation ofVPLLtimeconstant\n000(fast)\n011\n102\n113(slow)\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 63\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-49.656Version/F-bit Control\nSubaddress 87h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved 656version F-control\n656version\n0TimingconfirmstoITU-RBT.656-4 specifications (default)\n1TimingconfirmstoITU-RBT.656-3 specifications\nF-control\n0Oddfieldcauses0→1transition inF-bitwheninTVP5146 F/Vmode(seeregister88h)\n1Evenfieldcauses0→1transition inF-bitwheninTVP5146 F/Vmode(seeregister88h)\n64InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-50.F-BitandV-BitDecodeControl\nSubaddress 88h\nDefault 03h\n7 6 5 4 3 2 1 0\nReserved VPLL Adaptive Reserved F-Mode[1:0]\nVPLL\nVPLLtimeconstantcontrol\n0VPLLadaptstimeconstants toinputsignal\n1VPLLtimeconstants fixed\nAdaptive\n0EnableFandVbitadaptation todetectedlinesperframe\n1DisableFandVbitadaptation todetectedlinesperframe\nF-Mode[1:0]\nF-bitcontrolmode\nAuto:Iflinesperframeisstandard decodeFandVbitsasper656standard fromlinecountelsedecodeFbitfrom00VSYNCinputandsetVbit=0\n01DecodeFandVfrominputsyncs\n10Reserved\n11AlwaysdecodeFandVbitsfromlinecount(TVP5146 compatible)\nThisregisterisusedinconjunction withregister89hasshown:\nReg88h Reg89h Standard LPF Non-standard LPFModeBit1Bit0Bit3Bit2 F V F V\n0 0 0 0 Reserved Reserved Reserved Reserved Reserved\n0 0 0 1 TVP5158 656 656 Toggle Switch9\n0 0 1 0 TVP5158 656 656 Pulse 0\n0 0 1 1 Reserved Reserved Reserved Reserved Reserved\n0 1 0 0 Reserved Reserved Reserved Reserved Reserved\n0 1 0 1 656 656 Toggle Switch9\n0 1 1 0 656 656 Pulse 0\n0 1 1 1 Reserved Reserved Reserved Reserved Reserved\n1 0 0 0 Reserved Reserved Reserved Reserved Reserved\n1 0 0 1 Reserved Reserved Reserved Reserved Reserved\n1 0 1 0 Reserved Reserved Reserved Reserved Reserved\n1 0 1 1 Reserved Reserved Reserved Reserved Reserved\nEven=11 1 0 0 TVP5146 656 656 SwitchOdd=toggle\n1 1 0 1 TVP5146 656 656 Toggle Switch\n1 1 1 0 TVP5146 656 656 Pulse Switch\n1 1 1 1 Reserved Reserved Reserved Reserved Reserved\n656 ITU-RBT.656standard\nToggle Togglesfromfieldtofield\nPulse Pulseslowfor1linepriortofieldtransition\nSwitch VbitswitcheshighbeforetheFbittransition andlowaftertheFbittransition\nSwitch9 Vbitswitcheshigh1linepriortoFbittransition, thenlowafter9lines\nReserved Notused\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 65\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-51.F-BitandV-BitControl\nSubaddress 89h\nDefault 16h\n7 6 5 4 3 2 1 0\nRabbit Reserved Fastlock FandV[1:0] PhaseDet HPLL\nRabbit\nEnable"rabbitear"\n0Disabled (default)\n1Enabled\nFastlock\nEnablefastlockwhereverticalPLLisresetanda2secondtimerisinitialized whenverticallockislost;duringtimeoutthedetected\ninputVSisoutput.\n0Disabled\n1Enabled(default)\nFandV[1:0]\nFandVcontrolbitsareonlyenabledforF-bitcontrolmode01and10(seeregister88h)\nFandV LinesPerFrame FBit VBit\nStandard ITU-RBT.656 ITU-RBT.656\n00 Nonstandard-even Forcedto1 Switchatfieldboundary\nNonstandard-odd Toggles Switchatfieldboundary\nStandard ITU-RBT.656 ITU-RBT.65601(default)Nonstandard Toggles Switchatfieldboundary\nStandard ITU-RBT.656 ITU-RBT.65610Nonstandard Pulsedmode Switchatfieldboundary\n11 Reserved\nPhaseDet\nEnableintegral-window phasedetector\n0Disabled\n1Enabled(default)\nHPLL\nEnablehorizontal PLLtofreerun\n0Disabled (default)\n1Enabled\nTable4-52.OutputTimingDelay\nSubaddress 8Ch\nDefault 00h\n7 6 5 4 3 2 1 0\nOutputtimingdelay[7:0]\nOutputtimingdelay[7:0]\nAdjustsdelayforAVIDstartandstop.\n00001111 +15pixeldelay\n00000001 +1pixeldelay\n00000000 0pixeldelay(default)\n11111111 -1pixeldelay\n11110000 -16pixeldelay\n66InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-53.AutoContrast UserTableIndex\nSubaddress 8Fh\nDefault 04h\n7 6 5 4 3 2 1 0\nReserved AC_User_Mode_Table [2:0] Reserved\nAC_User_Mode_Table [2:0]\nUsertableselection forautocontrastusermodewhentheregister0Fhsetsto02h.\n000Brighter1\n001Brighter2\n010Brighter3(Brightest)\n011Darker1\n100Darker2\n101Darker3(Darkest)\n110toReserved111\nTable4-54.BlueScreenYControl\nSubaddress 90h\nDefault 10h\n7 6 5 4 3 2 1 0\nYvalue[9:2]\nTheYvalueofthecolorscreenoutputwhenenabledbybit2or3oftheOutputFormatter 2registerisprogrammable usinga10-bitvalue.\nThe8MSBs,bits[9:2],arerepresented inthisregister.Theremaining twoLSBarefoundintheBlueScreenLSBregister.Thedefaultcolor\nscreenoutputisblack.\nThefollowing tableshowsthevaluesforregisters90h,91h,92hand93hforseveraldifferentscreencolors.\nScreenColor Reg90h Reg91h Reg92h Reg93h\nBlack(default) 10h 80h 80h 00h\nBlue 29h F0h 6Eh 00h\nGreen 91h 36h 22h 00h\nCyan AAh A6h 10h 00h\nRed 51h 5Ah F0h 00h\nMagenta 6Ah CAh DEh 00h\nYellow D2h 10h 92h 00h\nWhite EBh 80h 80h 00h\nNOTE:Thebluescreenoutputmodecanbeenabledordisabledusingbits3:2ofI2CregisterA9h.\nTable4-55.BlueScreenCbControl\nSubaddress 91h\nDefault 80h\n7 6 5 4 3 2 1 0\nCbvalue[9:2]\nTheCbvalueofthecolorscreenoutputwhenenabledbybit2or3oftheOutputFormatter 2registerisprogrammable usinga10-bitvalue.\nThe8MSBs,bits[9:2],arerepresented inthisregister.Theremaining twoLSBarefoundintheBluescreenLSBregister.Thedefaultcolor\nscreenoutputisblack.SeeTable4-54forexamplecolors.\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 67\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-56.BlueScreenCrControl\nSubaddress 92h\nDefault 80h\n7 6 5 4 3 2 1 0\nCrvalue[9:2]\nTheCrvalueofthecolorscreenoutputwhenenabledbybit2or3oftheOutputFormatter 2registerisprogrammable usinga10-bitvalue.\nThe8MSBs,bits[9:2],arerepresented inthisregister.Theremaining twoLSBarefoundintheBlueScreenLSBregister.Thedefaultcolor\nscreenoutputisblack.SeeTable4-54forexamplecolors.\nTable4-57.BlueScreenLSBControl\nSubaddress 93h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved YvalueLSB[1:0] CbvalueLSB[1:0] CrvalueLSB[1:0]\nThetwoLSBsfortheBluescreenY,Cb,andCrvaluesarerepresented inthisregister.SeeTable4-54forexamplecolors.\nTable4-58.NoiseMeasurement\nSubaddress 94h-95h\nDefault ReadOnly\nSubaddress 7 6 5 4 3 2 1 0\n94h NoiseMeasurement [7:0]\n95h NoiseMeasurement [15:8]\nNoisemeasurement [15:0]\nUsedbytheweaksignaldetection algorithm.\nBecause thisregisterisadouble-byte register,itisnecessary to"capture" thesettingintotheregistertoensurethatthevalueis\nnotupdatedbetweenreadingthelowerandupperbytes.Tocausethisregisterto"capture" thecurrentsettingsbit0ofI2Cregister\n24h(statusrequest)shouldbesettoa1.Aftertheinternalprocessor hasupdatedthisregister,bit0ofregister24hiscleared,\nindicating thatbothbytesofthenoisemeasurement registerhavebeenupdatedandcanberead.Eitherbytemaybereadfirst,\nbecausenofurtherupdateoccursuntilbit0of24hissetto1again.\nTable4-59.WeakSignalHighThreshold\nSubaddress 96h\nDefault 60h\n7 6 5 4 3 2 1 0\nLevel[7:0]\nThisregistercontrolstheupperthreshold ofthenoisemeasurement usedtodetermine whethertheinputsignalshouldbeconsidered a\nweaksignal.\nTable4-60.WeakSignalLowThreshold\nSubaddress 97h\nDefault 50h\n7 6 5 4 3 2 1 0\nLevel[7:0]\nThisregistercontrolsthelowerthreshold ofthenoisemeasurement usedtodetermine whethertheinputsignalshouldbeconsidered a\nweaksignal.\n68InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-61.NoiseReduction Y/U/VT0\nSubaddress 9Eh 9Fh A0h\nDefault 0Ah BCh BCh\nSubaddress 7 6 5 4 3 2 1 0\n9Eh NoiseReduction YT0[7:0]\n9Fh NoiseReduction UT0[7:0]\nA0h NoiseReduction VT0[7:0]\nTheseregisterscontrolhowmuchnoisefilteringisdoneforY/U/Vchannels. Thehigherthevalueis,themorenoisefilteringattheexpense\nofvideodetails.\nTable4-62.VerticalLineCountStatus\nSubaddress A2h-A3h\nDefault ReadOnly\nSubaddress 7 6 5 4 3 2 1 0\nA2h Verticalline[7:0]\nA3h Reserved Verticalline[9:8]\nThisstatusregisterisonlyupdatedwhenastatusrequestisinitiatedviabit0ofsubaddress 24h.\nVerticalline[9:0]represent thedetectedatotalnumberoflinesfromthepreviousframe.Thiscanbeusedwithnonstandard videosignals\nsuchasaVCRintrickmodetosynchronize downstream videocircuitry.\nNOTE:Thisregisterisnotdoublebuffered.\nBecause thisregisterisadouble-byte register,itisnecessary to"capture" thesettingintotheregistertoensurethatthevalueisnot\nupdatedbetweenreadingthelowerandupperbytes.Tocausethisregisterto"capture" thecurrentsettingsbit0ofI2Cregister24h(Status\nRequest) shouldbesettoa1.Aftertheinternalprocessor hasupdatedthisregister,bit0ofregister24hiscleared,indicating thatboth\nbytesoftheverticallinecountregisterhavebeenupdatedandcanberead.Eitherbytemaybereadfirst,becausenofurtherupdateoccurs\nuntilbit0of24hissetto1again.\nTable4-63.OutputFormatter Control1\nSubaddress A8h\nDefault 44h\n7 6 5 4 3 2 1 0\nYCbCrcodeReserved CbCrrange Reservedrange\nThisregistershouldbewrittentoallfourvideodecodercores.\nYCbCroutputcoderange\n0ITU-RBT.601codingrange(Yrangesfrom16to235.CbandCrrangefrom16to240.)\n1Extended codingrange(Y,CbandCrrangefrom1to254.)(default)\nCbCrrangeformat\n0Offsetbinarycode(2\'scomplement +512)(default)\n1Straightbinarycode(2\'scomplement)\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 69\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-64.OutputFormatter Control2\nSubaddress A9h\nDefault 40h\n7 6 5 4 3 2 1 0\nReserved Bluescreenoutput[1:0] Reserved\nThisregistershouldbewrittentoallfourvideodecodercores.\nBluescreenoutput[1:0]\nFullyprogrammable colorof"bluescreen"tosupportcleaninput/channel switching. Whenenabled,incaseoflostlock,orwhen\nforced,theTVP5158 waitsuntiltheendofthecurrentframe,thenswitchestheoutputdatatoaprogrammable color.Once\ndisplaying the"bluescreen",theinputscanbeswitched withoutcausingsnowornoisetobedisplayed onthedigitaloutputdata.\nOncetheinputshavesettledthe"bluescreen"canbedisabled, wheretheTVP5158 thenwaitsuntiltheendofthecurrentvideo\nframebeforere-enabling thevideostreamdatatotheoutputports.\n00Normaloperation (default)\n01BluescreenoutwhenTVP5158 detectslostlock\n10ForceBluescreenout\n11Reserved\nTable4-65.Interrupt Control\nSubaddress ADh\nDefault 00h\n7 6 5 4 3 2 1 0\nInt_Pol Int_Type Reserved\nInt_Pol\nInterruptpolarity\n0Activelow(default)\n1Activehigh(donotusewithopen-drain output)\nNOTE:Active-high outputshouldbeusedonlywhenpush-pull outputtypeisselected(Int_Type =1).\nInt_Type\nInterruptoutputtype\n0Open-drain output(default)\n1Push-pull output\nNOTE:Anexternalpullupresistorisrequiredwhenopendrainoutputisselected(IntType=0).\nTable4-66.Embedded SyncOffsetControl1\nSubaddress AEh\nDefault 01h\n7 6 5 4 3 2 1 0\nOffset[7:0]\nOffset[7:0]\nThisregisterallowsthelinepositionoftheembedded FandVbitsignalstobeoffsetfromthe656standard positions. Thisregister\nisonlyapplicable toinputvideosignalswithastandard numberoflinesperframe.\n01111111 +127lines\n⋮\n00000001 +1line(default)\n00000000 0line\n11111111 -1line\n⋮\n10000000 -128lines\n70InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-67.Embedded SyncOffsetControl2\nSubaddress AFh\nDefault 00h\n7 6 5 4 3 2 1 0\nOffset[7:0]\nOffset[7:0]\nThisregisterallowsthelinerelationship betweentheembedded FandVbitsignalstobeoffsetfromthe656standard positions,\nandmovesFrelativetoV.Thisregisterisonlyapplicable toinputvideosignalswithastandard numberoflinesperframe.\n00000010 +2lines(maximum settingforNTSCandPAL)\n⋮\n00000001 +1line\n00000000 0line\n11111111 -1line\n⋮\n11110001 -15lines(minimum settingforNTSC)\n⋮\n11101011 -21lines(minimum settingforPAL)\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 71\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-68.AVDOutputControl1\nSubaddress B0h\nDefault 00h\n7 6 5 4 3 2 1 0\nInterleave_mode Channel_Mux_Number Output_type VCS_ID Video_Res_Sel\nThisregistershouldbewrittentoallfourvideodecodercores.\nInterleave_mode\nInterleave modeformulti-channel formats\n00Non-interleaved (a.k.a.1-Chmode)–(default)\n01Pixel-interleaved mode(2-Chand4-Chonly)\n10Line-interleaved mode\n11Line-interleaved, hybridmode(adds1-ChD1toselected4-ChHalf-D1,4-ChCIFor8-ChCIFformat)\nChannel_Mux_Number\nNumberoftime-multiplexed channels\n001-Ch(reserved)\n012-Ch\n104-Ch(or4-ChHalf-D1orCIF+1-ChD1forline-interleaved, hybridmode)\n8-Chcascade(formatdependsonVCS_ID, line-interleaved modeonly)\n•Line-interleaved mode\n–1ststage:8-ChHalf-D1or8-ChCIF(videoportA)\n11 –2ndstage:4-ChHalf-D1or4-ChCIF(videoportA)\n•Line-interleaved, hybridmode\n–1ststage:8-ChCIF+1-ChD1(videoportA)\n–2ndstage:4-ChCIF(videoportA)and1-ChD1(videoportB)\nOutput_type\nOutputinterfacetype\n08-bitITU-RBT.656interface(default)\n116-bitITU-RBT.601interface(4-ChD1and4-ChHalf-D1line-interleaved modesonly)\nVCS_ID\nVideocascadestageID.Setto0fornormaloperation. Forline-interleaved modeonly.\n01ststage(channels 1to4)(default)\n12ndstage(channels 5to8)\nVideo_Res_Sel\nVideoresolution select.Effectsmulti-channel OFMonly.\n00D1(default)\n01Reserved\n10Half-D1\n11CIF\n72InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-69.AVDOutputControl2\nSubaddress B1h\nDefault 10h\n7 6 5 4 3 2 1 0\nChan_ID_ Chan_ID_ Video_Det_LLC_En Line_Crop_En Quan_Ctrl Line_ID_CtrlSAVEAV_En Blank_En SAVEAV_En\nThisregistershouldbewrittentoallfourvideodecodercores.\nLLC_En\nLine-locked clockenable,activehigh.Fornon-interleaved modeonly.ForusewithPortAonly.ForD1resolution only.\n0Line-locked clockdisabled(default)\n1Line-locked clockenabled\nLine_Crop_En\nAVDlinecroppingenable,activehigh.Effectsbothscaledandunscaled AVDoutputs.\n0Cropping disabled(unscaled: 720pixels/line, down-scaled: 360pixels/line) –(default)\n1Cropping enabled(unscaled: 704pixels/line, down-scaled: 352pixels/line)\nQuan_Ctrl\n10-bitto8-bitquantization control.Dithering algorithm basedontruncation errorfrompreviouspixel.\n00Enablesimpletruncation\n01Enabledithering(default)\n10Enablesimplerounding\n11Reserved\nLine_ID_Ctrl\nLineIDcontrol.Forline-interleaved modeonly.\n0LineIDcontinues countingthroughtheverticalblankinginterval-(default)\n1LineIDholdstheterminalcountfromtheendofactivevideothroughtheverticalblankinginterval\nChan_ID_SAVEAV_En\nChannelIDinsertedinSAV/EAV codesenable,activehigh.Forpixel-interleaved modeonly.Alwaysdisabledfor\nnon-interleaved andline-interleaved modes.\n0Disabled (default)\n1Enabled\nChan_ID_Blank_En\nChannelIDinsertedinblankinglevelenable,activehigh.Forpixel-interleaved modeonly.Alwaysdisabledfornon-interleaved and\nline-interleaved modes.\n0Disabled (default)\n1Enabled\nVideo_Det_SAVEAV_En\nVideodetection statusinsertedinSAV/EAV codesenable,activehigh.Fornon-interleaved andpixel-interleaved\nmodes.Alwaysenabledforline-interleaved mode.\n0VDETinsertiondisabled(default)\n1VDETinsertionenabled\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 73\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-70.OFMModeControl\nSubaddress B2h\nDefault 20h\n7 6 5 4 3 2 1 0\nVideo_Port_B_ Out_CLK_ Out_CLK_ Out_CLK_ Out_CLK_N_EOSC_OUT_En Out_CLK_P_En Video_Port_EnEn Freq_Ctl Pol_Sel Freq_Sel n\nThisregisteronlyneedstobewrittentovideodecodercore0.\nVideo_Port_B_En\nVideoportBoutputenablefor6-ChHalf-D1(2ndstage),activehigh\n0VideoPortBdisabled(default)\n1VideoPortBenabled\nOut_CLK_Freq_Ctl\nOutputclockfrequency controlfor4-ChHalf-D1+1-ChD1and8-ChCIF+1-ChD1line-interleaved, hybridoutputformatsonly.\nAffectsbothOCLK_P andOCLK_N.\n0108MHz(default)\n181MHz\nOSC_OUT_En\nOscillator outputenable,activehigh\n0OSC_OUT disabled\n1OSC_OUT enabled(default)\nOut_CLK_Pol_Sel\nOutputclockpolarityselect.AffectsbothOCLK_P andOCLK_N.\n0Non-inverted (default)\n1Inverted\nOut_CLK_Freq_Sel\nOutputclockfrequency selectfor2-chpixel-interleaved modeonly.AffectsbothOCLK_P andOCLK_N.\n054MHz(default)\n127MHz\nOut_CLK_P_En\nOutputdataclock+(OCLK_P) enable,activehigh\n0OCLK_P disabled(default)\n1OCLK_P enabled\nOut_CLK_N_En\nOutputdataclock-(OCLK_N) enable,activehigh\n0OCLK_N disabled(default)\n1OCLK_N enabled(for2-Chmodeonly)\nVideo_Port_En\nVideoportoutputenable,activehigh\n0Allfourvideoportsdisabled(default)\n1Allvideoportsrequiredforselectedoutputformatenabled\n74InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-71.OFMChannel Select1\nSubaddress B3h\nDefault E4h\n7 6 5 4 3 2 1 0\nChan_Sel_Port_D Chan_Sel_Port_C Chan_Sel_Port_B Chan_Sel_Port_A\nThisregisteronlyneedstobewrittentovideodecodercore0.OFMchannelselectbyvideoportin1-Chmode.\nChan_Sel_Port_D\nChannelselectforportD\n00Ch1\n01Ch2\n10Ch3\n11Ch4(default)\nChan_Sel_Port_C\nChannelselectforportC\n00Ch1\n01Ch2\n10Ch3(default)\n11Ch4\nChan_Sel_Port_B\nChannelselectforportB\n00Ch1\n01Ch2(default)\n10Ch3\n11Ch4\nChan_Sel_Port_A\nChannelselectforportA\n00Ch1(default)\n01Ch2\n10Ch3\n11Ch4\nNOTE:Eachvideoportmustbesettoadifferentchannel.\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 75\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-72.OFMChannel Select2\nSubaddress B4h\nDefault E4h\n7 6 5 4 3 2 1 0\n2nd_Chan_Sel_Port_B 1st_Chan_Sel_Port_B 2nd_Chan_Sel_Port_A 1st_Chan_Sel_Port_A\nThisregisteronlyneedstobewrittentovideodecodercore0.OFMchannelselectbyvideoportin2-Chmode.\n2nd_Chan_Sel_Port_B\nSecondchannelselectforportB\n00Ch1\n01Ch2\n10Ch3\n11Ch4(default)\n1st_Chan_Sel_Port_B\nFirstchannelselectforportB\n00Ch1\n01Ch2\n10Ch3(default)\n11Ch4\n2nd_Chan_Sel_Port_A\nSecondchannelselectforportA\n00Ch1\n01Ch2(default)\n10Ch3\n11Ch4\n1st_Chan_Sel_Port_A\nFirstchannelselectforportA\n00Ch1(default)\n01Ch2\n10Ch3\n11Ch4\nNOTE:Eachvideoportmustbesettoadifferentchannel.\nTable4-73.OFMChannel Select3\nSubaddress B5h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Hybrid_Chan_Sel [2:0]\nThisregisteronlyneedstobewrittentovideodecodercore0.\nHybrid_Chan_Sel [2:0]\nOFMchannelselectfor1-ChD1channelinvideocascademodeandhybridformatmode.\n000Ch1(default)\n001Ch2\n010Ch3\n011Ch4\n100Cascade inputfromPortC(forvideocascade1ststageonly)\n101Reserved\n110Reserved\n111Reserved\n76InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-74.OFMSuper-Frame Size\nSubaddress B6h-B7h\nDefault 041Bh\nSubaddress 7 6 5 4 3 2 1 0\nB6h Super_Frame_Size [7:0]\nB7h Reserved Ctrl_Mode [1:0] Super_Frame_Size [11:8]\nTheseregisterswritetodecodercore0only.\nCtrl_Mode [1:0]\nSuper-frame sizecontrolmode\n00Super-frame sizebasedon525-linestandard (default)\n01Super-frame sizebasedon625-linestandard\n10Reserved\n11Super-frame sizebasedonmanualsetting(seesubaddress B6h/B7h)\nSuper_Frame_Size [11:0]\nTotalnumberoflinespersuper-frame. Forline-interleaved modeonly.\n010000011011 1051(default)\nNOTE:HasnoeffectonportBinthevideocascadeinterface.\nTable4-75.OFMEAV2SAV Duration\nSubaddress B8h-B9h\nDefault 0040h\nSubaddress 7 6 5 4 3 2 1 0\nB8h OFM_EAV2SAV_Duration [7:0]\nEAV2SAV_OFM_EAV2SAV_ DurationB9h Horizontal_Freq_Tol Duration_ Reserved[9:8]Mode\nTheseregistersonlyneedtobewrittentovideodecodercore0.\nHorizontal_Freq_Tol\nNominalhorizontal frequency tolerance (%).Onlyhasanaffectwhenbit4issetto0.\n0000.5%(longestEAV2SAV duration) (default)\n0011.0%\n0101.5%\n0112.0%\n1002.5%\n1013.0%\n1103.5%\n1114.0%(shortest EAV2SAV duration)\nEAV2SAV_Duration_Mode\nEAV2SAV durationcontrolmode.\n0EAV2SAV durationautomatically controlled\n1EAV2SAV durationbasedonmanualsetting(seesubaddress B8h/B9h)\nOFM_EAV2SAV_Duration [9:0]\nEAV2SAV durationinOCLK_P clockcycles.Fornon-interleaved andline-interleaved modes.\n000100000064(default)\nNOTE\nSeeresultofautomatic EAV2SAV durationalgorithm atstatusregistersD0h-D1h.\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 77\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-76.MiscOFMControl\nSubaddress BAh\nDefault 00h\n7 6 5 4 3 2 1 0\nOFM_Soft_ReservedReset\nOFM_Soft_Reset\nSoftresetforOFMlogic.\nNOTE:Thisbitisautomatically clearedbyfirmwarewhentheresetiscompleted.\n0Normaloperation (default)\n1Resetoutputformatter logic\nNOTE:Incascademode,theOFMresetofthe1ststageshouldbeassertedaftertheOCLK_N outputofthe2ndstageisenabled.\nTable4-77.AudioSampleRateControl\nSubaddress C0h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Aud_SamRate_Set[2:0] Reserved\nAud_SamRate_Set[2:0]\nAudiosampleratecontrolbits\n00016kHz(default)\n0018kHz\n01022.05kHz\n01111.025kHz\n10024kHz\n10112kHz\n110Reserved\n111Reserved\n78InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-78.AnalogAudioGainControl1\nSubaddress C1h\nDefault 88h\n7 6 5 4 3 2 1 0\nAudio_Gain_Ctrl_CH2 Audio_Gain_Ctrl_CH1\nAudio_Gain_Ctrl_CH2\nAnalogaudiogaincontrolforaudioCh2.Seevaluesbelow.\nAudio_Gain_Ctrl_CH1\nAnalogaudiogaincontrolforaudioCh1\n0000-12.0dB\n0001-10.5dB\n0010-9dB\n0011-7.5dB\n0100-6dB\n0101-4.5dB\n0110-3dB\n0111-1.5dB\n10000dB(default)\n1001Reserved\n1010Reserved\n1011Reserved\n1100Reserved\n1101Reserved\n1110Reserved\n1111Reserved\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 79\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-79.AnalogAudioGainControl2\nSubaddress C2h\nDefault 88h\n7 6 5 4 3 2 1 0\nAudio_Gain_Ctrl_CH4 Audio_Gain_Ctrl_CH3\nAudio_Gain_Ctrl_CH4\nAnalogaudiogaincontrolforaudioCh4.Seevaluesbelow.\nAudio_Gain_Ctrl_CH3\nAnalogaudiogaincontrolforaudioCh3\n0000-12.0dB\n0001-10.5dB\n0010-9dB\n0011-7.5dB\n0100-6dB\n0101-4.5dB\n0110-3dB\n0111-1.5dB\n10000dB(default)\n1001Reserved\n1010Reserved\n1011Reserved\n1100Reserved\n1101Reserved\n1110Reserved\n1111Reserved\n80InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-80.AudioModeControl\nSubaddress C3h\nDefault C9h\n7 6 5 4 3 2 1 0\nSerial_IF_FormSD_M_En SD_R_En I2S_Mode BCLK_R_Freq Audio_Data_Format TDM_Pin_Selat\nSD_M_En\nSD_Moutputenable,activehigh\n0SD_Moutputdisabled\n1SD_Moutputenabled(default)\nSD_R_En\nSD_Routputenable,activehigh.\n0SD_Routputdisabled\n1SD_Routputenabled(default)\nI2S_Mode\nAudioserialI2Sinterfacemode\n0Slavemode(default)\n1Mastermode\nSerial_IF_Format\nAudioserialinterfaceformat\n0I2Sjustifiedmode(default)\n1DSPjustifiedmode\nBCLK_R_Freq\nAudioserialinterfaceBCLK_R clockfrequency\n0256fs\n164fs(standaloneoperation only)(default)\nAudio_Data_Format\nAudioserialinterfacedataformat\n0016-bitPCM(default)\n018-bitµ-Law\n108-bitA-Law\n11Reserved\nTDM_Pin_Sel\nTDMoutputpinselect\n0SD_Ronly\n1SD_RandSD_M(default)\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 81\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-81.AudioMixerSelect\nSubaddress C4h\nDefault 01h\n7 6 5 4 3 2 1 0\nAudio_Mixer_Sel [4:0] TDM_Chan_Number [2:0]\nAudio_Mixer_Sel [4:0]\nAudiomixeroutputselect\n00000Mixchannel(default)\n00001Ch1\n00010Ch2\n00011Ch3\n00100Ch4\n00101Ch5\n00110Ch6\n00111Ch7\n01000Ch8\n01001Ch9\n01010Ch10\n01011Ch11\n01100Ch12\n01101Ch13\n01110Ch14\n01111Ch15\n10000Ch16\n10001\ntoReserved\n11111\nTDM_Chan_Number [2:0]\nNumberofAudiochannels toTDM\n0002channels\n0014channels (default)\n0108channels\n01112channels\n10016channels\n101Reserved\n110Reserved\n111Reserved\n82InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-82.AudioMuteControl\nSubaddress C5h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Ch4_Mute Ch3_Mute Ch2_Mute Ch1_Mute\nCh4_Mute\nCh4Audiomuteenable,activehigh.Affectstheaudiomixeroutput(SD_M)only(seeFigure3-17).\n0Disabled (default)\n1Enabled\nCh3_Mute\nCh3Audiomuteenable,activehigh.Affectstheaudiomixeroutput(SD_M)only(seeFigure3-17).\n0Disabled (default)\n1Enabled\nCh2_Mute\nCh2Audiomuteenable,activehigh.Affectstheaudiomixeroutput(SD_M)only(seeFigure3-17).\n0Disabled (default)\n1Enabled\nCh1_Mute\nCh1Audiomuteenable,activehigh.Affectstheaudiomixeroutput(SD_M)only(seeFigure3-17).\n0Disabled (default)\n1Enabled\nTable4-83.AnalogMixingRatioControl1\nSubaddress C6h\nDefault 00h\n7 6 5 4 3 2 1 0\nAudio_Mixing_Ratio_CH2 Audio_Mixing_Ratio_CH1\nAudio_Mixing_Ratio_CH2\nAudiomixingratioforaudiochannel2.Seevaluesbelow.\nAudio_Mixing_Ratio_CH1\nAudiomixingratioforaudiochannel1\n00000.25(default)\n00010.31\n00100.38\n00110.44\n01000.5\n01010.63\n01100.75\n01110.88\n10001.00\n10011.25\n10101.5\n10111.75\n11002.00\n11012.25\n11102.5\n11112.75\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 83\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-84.AnalogMixingRatioControl2\nSubaddress C7h\nDefault 00h\n7 6 5 4 3 2 1 0\nAudio_Mixing_Ratio_CH4 Audio_Mixing_Ratio_CH3\nAudio_Mixing_Ratio_CH4\nAudiomixingratioforaudiochannel4.Seevaluesbelow.\nAudio_Mixing_Ratio_CH3\nAudiomixingratioforaudiochannel3\n00000.25(default)\n00010.31\n00100.38\n00110.44\n01000.5\n01010.63\n01100.75\n01110.88\n10001.00\n10011.25\n10101.5\n10111.75\n11002.00\n11012.25\n11102.5\n11112.75\nTable4-85.AudioCascade ModeControl\nSubaddress C8h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Audio_Cas_Mode_Ctrl\nAudio_Cas_Mode_Ctrl\nAudioCascade ModecontrolwhichiscascadestageID.Setto00forstandalone operation.\n00Firststage(channels 1to4)(default)\n01Secondstage(channels 5to8)\n10Thirdstage(channels 9to12)\n11Fourthstage(channels 13to16)\nTable4-86.Super-Frame EAV2SAV Duration Status\nSubaddress D0h-D1h\nDefault ReadOnly\nSubaddress 7 6 5 4 3 2 1 0\nD0h EAV2SAV [7:0]\nD1h Reserved EAV2SAV [9:8]\nEAV2SAV [9:0]\nSuper-frame EAV2SAV duration(bytes).Forline-interleaved modeonly.\n84InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-87.Super-Frame SAV2EAV Duration Status\nSubaddress D2h-D3h\nDefault ReadOnly\nSubaddress 7 6 5 4 3 2 1 0\nD2h SAV2EAV [7:0]\nD3h Reserved EAV2SAV [10:8]\nSAV2EAV [10:0]\nSuper-frame SAV2EAV duration(bytes).Forline-interleaved modeonly.\nTable4-88.VBUSDataAccessWithNoVBUSAddress Increment\nSubaddress E0h\nDefault 00h\n7 6 5 4 3 2 1 0\nVBUSdata[7:0]\nVBUSdata[7:0]\nVBUSdataregisterforVBUSsingle-byte read/write transaction\nTable4-89.VBUSDataAccessWithVBUSAddress Increment\nSubaddress E1h\nDefault 00h\n7 6 5 4 3 2 1 0\nVBUSdata[7:0]\nVBUSdata[7:0]\nVBUSdataregisterforVBUSmulti-byte read/write transaction. VBUSaddressisauto-incremented aftereachdatabyteread/write.\nTable4-90.VBUSAddress Access\nSubaddress E8h E9h EAh\nDefault 00h 00h 00h\nSubaddress 7 6 5 4 3 2 1 0\nE8h VBUSaddress[7:0]\nE9h VBUSaddress[15:8]\nEAh VBUSaddress[23:16]\nVBUSaccessaddress[23:0]\nVBUSisa24-bitwideinternalbus.Theuserneedstoprogramthe24-bitaddressoftheinternalregistertobeaccessed viahost\nportindirectaccessmode.\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 85\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-91.Interrupt Status\nSubaddress F2h\nDefault ReadOnly\n7 6 5 4 3 2 1 0\nReserved Sig_Present Weak_Sig V_Lock Macrovision Vid_Std Reserved\nThehostinterruptstatusregisterrepresents theinterruptstatusafterapplyingmaskbits.Therefore, thestatusbitsaretheresultofalogical\nANDbetweentherawstatusandmaskbits.TheexternalinterruptpinisderivedfromthisregisterasanORfunctionofallnon-masked\ninterrupts inthisregister.\nReadingdatafromthecorresponding registerdoesnotclearthestatusflagsautomatically. Theseflagsareresetusingthecorresponding\nbitsintheinterruptclearregister.\nSig_Present\nSignalpresentchangeinterrupt. Thisinterruptisassertedwhenever thereisachangeinthesignalpresentstatus(bit7ofregister\n01h).\n0Notavailable\n1Available\nWeak_Sig\nWeaksignalchangeinterrupt. Thisinterruptisassertedwhenever thereisachangeintheweaksignalstatus(bit6ofregister01h).\n0Notavailable\n1Available\nV_Lock\nVerticallockchangeinterrupt. Thisinterruptisassertedwhenever thereisachangeintheverticallockstatus(bit2ofregister00h).\n0Notavailable\n1Available\nMacrovision\nMacrovision changeinterrupt. Thisinterruptisassertedwhenever thereisachangeintheMacrovision detection status(bits2:0of\nregister01h).\n0Notavailable\n1Available\nVid_Std\nVideostandard changeinterrupt. Thisinterruptisassertedwhenever thereisachangeinthedetectedvideostandard (bits2:0of\nregister0Ch).\n0Notavailable\n1Available\n86InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-92.Interrupt Mask\nSubaddress F4h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Sig_Present Weak_Sig V_Lock Macrovision Vid_Std Reserved\nThehostinterruptmaskregistercanbeusedbytheexternalprocessor tomaskunnecessary interruptsourcesfortheinterruptstatus\nregisterbits,andfortheexternalinterruptpin.Theexternalinterruptisgenerated fromallnon-masked interruptflags.\nSig_Present\nSignalpresentchangeinterruptmask\n0Interruptdisabled(default)\n1Interruptenabled\nWeak_Sig\nWeaksignalchangeinterruptmask\n0Interruptdisabled(default)\n1Interruptenabled\nV_Lock\nVerticallockchangeinterruptmask\n0Interruptdisabled(default)\n1Interruptenabled\nMacrovision\nMacrovision changeinterruptmask\n0Interruptdisabled(default)\n1Interruptenabled\nVid_Std\nVideostandard changeinterruptmask\n0Interruptdisabled(default)\n1Interruptenabled\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 87\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nTable4-93.Interrupt Clear\nSubaddress F6h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Sig_Present Weak_Sig V_Lock Macrovision Vid_Std Reserved\nThehostinterruptclearregisterisusedbytheexternalprocessor tocleartheinterruptstatusbitsinthehostinterruptstatusregister.When\nnonon-masked interrupts remainsetintheregister,theexternalinterruptpinalsobecomes inactive.\nSig_Present\nSignalpresentchangeinterruptclear\n0Noeffect(default)\n1Clearinterruptbit\nWeak_Sig\nWeaksignalchangeinterruptclear\n0Noeffect(default)\n1Clearinterruptbit\nV_Lock\nVerticallockchangeinterruptclear\n0Noeffect(default)\n1Clearinterruptbit\nMacrovision\nMacrovision changeinterruptclear\n0Noeffect(default)\n1Clearinterruptbit\nVid_Std\nVideostandard changeinterruptclear\n0Noeffect(default)\n1Clearinterruptbit\nTable4-94.Decoder WriteEnable\nSubaddress FEh\nDefault 0Fh\n7 6 5 4 3 2 1 0\nDecoderAutoReserved AddrAutoIncr Decoder4Decoder3Decoder2Decoder1Incr\nThisregistercontrolswhichofthefourdecodercoresreceivesI2Cwritetransactions. A1inthecorresponding Decoderbitenablesthe\ndecodertoreceivewritecommands. Anycombination ofdecoders canbeconfigured toreceivewritecommands, allowingallfourdecoders\ntobeprogrammed concurrently.\nThefollowing tableshowshowtheaddressauto-increment anddecoderauto-increment functions operatewhenamulti-byte I2Cwrite\ntransaction occurs.Forthisexample, decoders 2,3and4areenabledforwrites,thesubaddress is0xA0and8bytesofdataarewritten.\nDecoder AutoIncr 0 0 1 1\nAddrAutoIncr 0 1 0 1\nData Dec Addr Dec Addr Dec Addr Dec Addr\n1st 2,3,4 A0 2,3,4 A0 2 A0 2 A0\n2nd 2,3,4 A0 2,3,4 A1 3 A0 3 A0\n3rd 2,3,4 A0 2,3,4 A2 4 A0 4 A0\n4th 2,3,4 A0 2,3,4 A3 2 A0 2 A1\n5th 2,3,4 A0 2,3,4 A4 3 A0 3 A1\n6th 2,3,4 A0 2,3,4 A5 4 A0 4 A1\n7th 2,3,4 A0 2,3,4 A6 2 A0 2 A2\n8th 2,3,4 A0 2,3,4 A7 3 A0 3 A2\n88InternalControlRegisters Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nTable4-95.Decoder ReadEnable\nSubaddress FFh\nDefault 01h\n7 6 5 4 3 2 1 0\nDecoderAutoReserved AddrAutoIncr Decoder4Decoder3Decoder2Decoder1Incr\nThisregistercontrolswhichofthefourdecodercoresresponds toI2Creadtransactions. A1inthecorresponding bitpositionenablesthe\ndecodertorespondtoreadcommands. A1inDecoderAutoIncrement readsthenextbytefromthenextenableddecoder. IfDecoderAuto\nIncrement is0andmorethanonedecoderisenabledforreading,thenonlythelowestnumbered decoderresponds. A1inAddressAuto\nIncrement causesthesubaddress toincrement afterread(s)ofthecurrentsubaddress arecompleted.\nThefollowing tableshowshowtheaddressauto-increment anddecoderauto-increment functions operatewhenamulti-byte I2Cread\ntransaction occurs.Forthisexample, decoders 2,3and4areenabledforreads,thesubaddress is0xA0,and8bytesofdataareread.\nDecoder AutoIncr 0 0 1 1\nAddrAutoIncr 0 1 0 1\nData Dec Addr Dec Addr Dec Addr Dec Addr\n1st 2 A0 2 A0 2 A0 2 A0\n2nd 2 A0 2 A1 3 A0 3 A0\n3rd 2 A0 2 A2 4 A0 4 A0\n4th 2 A0 2 A3 2 A0 2 A1\n5th 2 A0 2 A4 3 A0 3 A1\n6th 2 A0 2 A5 4 A0 4 A1\n7th 2 A0 2 A6 2 A0 2 A2\n8th 2 A0 2 A7 3 A0 3 A2\nCopyright ©2009–2013,TexasInstruments Incorporated InternalControlRegisters 89\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n5Electrical Specifications\n5.1Absolute Maximum Ratings(1)\noveroperating free-airtemperature range(unlessotherwise noted)\nVDD_3_3 toVSS_3_3 0.5Vto4.0V\nVDD_1_1 toVSS_1_1 -0.2Vto1.2V\nVDDSupplyvoltagerange VDDA_3_3 toVSSA_3_3 -0.3Vto3.6V\nVDDA_1_8 toVSSA_1_8 -0.2Vto2.0V\nVDDA_1_1 toVSSA_1_1 -0.2Vto1.2V\nVIDigitalinputvoltagerange VItoDGND -0.5Vto4.5V\nVODigitaloutputvoltagerange VOtoDGND -0.5Vto4.5V\nAnalogvideoinputvoltagerange AINtoAGND -0.2Vto2.5V\nAnalogaudioinputvoltagerange AINtoAGND -0.2Vto2.0V\nCommercial range 0°Cto70°C\nTAOperating free-airtemperature range\nIndustrial range -40°Cto85°C\nTstgStoragetemperature range -65°Cto150°C\nAllpins >500V\nJEDEC(3)Excluding VSSA,VDD1_1,>1000VXTAL_REF pins Human-body model\n(HBM) Allpins >500V\nAEC-Q100(4)Excluding VSSA,VDD1_1,VESDESDstressvoltage(2)>1000VXTAL_REF pins\nAllpins >250V\nJEDEC(5)Charged-device Excluding VSSA,VDD1_1,>500Vmodel(CDM) XTAL_REF pins\nAEC-Q100(6)Allpins >400V\n(1)Stresses beyondthoselistedunderabsolutemaximum ratingsmaycausepermanent damagetothedevice.Thesearestressratings\nonly,andfunctional operation ofthedeviceattheseoranyotherconditions beyondthoseindicated underrecommended operating\nconditions isnotimplied.Exposure toabsolute-maximum-rated conditions forextended periodsmayaffectdevicereliability.\n(2)Electrostatic discharge (ESD)tomeasure devicesensitivity/immunity todamagecausedbyelectrostatic discharges intothedevice.\n(3)LevellistedisthepassinglevelperANSI/ESDA/JEDEC JS-001-2010. JEDECdocument JEP155statesthat500VHBMallowssafe\nmanufacturing withastandard ESDcontrolprocess,andmanufacturing withlessthan500VHBMispossibleifnecessary precautions\naretaken.Pinslistedas1000Vmayactuallyhavehigherperformance.\n(4)TestedperAECQ100-002 revD\n(5)LevellistedisthepassinglevelperEIA-JEDEC JESD22-C101E. JEDECdocument JEP157statesthat250VCDMallowssafe\nmanufacturing withastandard ESDcontrolprocess.Pinslisteds250Vmayactuallyhavehigherperformance.\n(6)TestedperAECQ100-011 revB\n90Electrical Specifications Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n5.2Recommended Operating Conditions\nMINNOM MAXUNIT\nVDD_3_3 Supplyvoltage,digital 33.3 3.6V\nVDD_1_1 Supplyvoltage,digital 11.1 1.2V\nVDDA_3_3 Supplyvoltage,analog 33.3 3.6V\nVDDA_1_8 Supplyvoltage,analog 1.65 1.8 1.95V\nVDDA_1_1 Supplyvoltage,analog 11.1 1.2V\nVI(pp) Analogvideoinputvoltage(ac-coupling necessary)(1)1.2 V\nVI(pp) Analogaudioinputvoltage(ac-coupling necessary) 0.8 V\nVIH Inputvoltagehigh,digital(2)(3)0.7VDD_3_3 V\nVIL Inputvoltagelow,digital(4)(3)0.3VDD_3_3 V\nIOH Outputcurrent:DVOoutputs/OCLK_N(3)VOUT=2.4V -4 mA\nIOL Outputcurrent:DVOoutputs/OCLK_N(3)VOUT=0.4V 4 mA\nIOH Outputcurrent,OCLK_P(3)VOUT=2.4V -8 mA\nIOL Outputcurrent,OCLK_P(3)VOUT=0.4V 8 mA\nCommercial 0 70°C\nTA Operating free-airtemperature\nIndustrial -40 85°C\n(1)Specified basedonatypical100%ColorBarSignal\n(2)Exception: 0.7VDDA_1_8 forXTAL_IN terminal\n(3)Specified bydesign\n(4)Exception: 0.3VDDA_1_8 forXTAL_IN terminal\n5.3Reference ClockSpecifications\nMINNOMMAXUNIT\nFrequency 27 MHz\nFrequency tolerance(1)-50 50ppm\n(1)Thisnumberistherequiredspecification fortheexternalcrystal/oscillator andisnottested.\nCopyright ©2009–2013,TexasInstruments Incorporated Electrical Specifications 91\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n5.4Electrical Characteristics\n5.5DCElectrical Characteristics\nForminimum/maximum values:VDD_1_1 =1.0to1.2V,VDD_3_3 =3.0Vto3.6V,VDDA_1_1 =1.0Vto1.2V,\nVDDA_1_8 =1.65Vto1.95V,VDDA_3_3 =3.0Vto3.6V\nFortypicalvalues(TA=25°C):VDD_1_1 =1.1V,VDD_3_3 =3.3V,VDDA_1_1 =1.1V,VDDA_1_8 =1.8V,\nVDDA_3_3 =3.3V(1)\nPARAMETER TESTCONDITIONS MINTYP MAXUNIT\n2-ChD1modeat54MHz 33 mA\nIDD(33D) 3.3-VI/Odigitalsupplycurrent\n4-ChD1modeat108MHz 41 mA\n2-ChD1modeat54MHz 143 mA\nIDD(11D) 1.1-Vcoredigitalsupplycurrent\n4-ChD1modeat108MHz 156 mA\n2-ChD1modeat54MHz 4.5 mA\nIDD(33A) 3.3-Vanalogsupplycurrent\n4-ChD1modeat108MHz 4.5 mA\n2-ChD1modeat54MHz 172 mA\nIDD(18A) 1.8-Vanalogsupplycurrent\n4-ChD1modeat108MHz 168 mA\n2-ChD1modeat54MHz 14 mA\nIDD(11A) 1.1-Vanalogsupplycurrent\n4-ChD1modeat108MHz 17 mA\n2-ChD1modeat54MHz 606 mW Totalpowerdissipation, normalPTOToperation 4-ChD1modeat108MHz 643 mW\nPowerdissipation withaudiopoweredPAPWD 4-ChD1modeat108MHz 619 mWdown\nTotalpowerdissipation withpowerPDOWN 90 mWdown(I2Cregister1AhsettoFFh)\nIlkg Inputleakagecurrent 20µA\nCI Inputcapacitance(2)8pF\nVOH Outputvoltagehigh IOH=-4mA 0.8VDD_3_3 V\nVOL Outputvoltagelow IOL=4mA 0.2VDD_3_3 V\n(1)Typicalcurrentmeasurements madewith4-ChD1videooutputat108MHzwith4-Chaudio.\n(2)Specified bydesign\n92Electrical Specifications Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n5.6VideoA/DConverters Electrical Characteristics\nADCsamplerate=27MSPSforvideoCh1,Ch2,Ch3,Ch4\nPARAMETER TESTCONDITIONS MIN TYPMAXUNIT\nVideoADCconversion rate 27 MHz\nZiInputimpedance, analogvideoinputs(1)200 kΩ\nCiInputcapacitance, analogvideoinputs(1)10pF\nVi(PP)Full-scale inputrangeofADC(2)Ccoupling=0.1µF 1.4 V\nG Nominalanalogvideogain(1)-2.9 dB\nDNL Absolute differential non-linearity(3)AFEonly 0.75 1LSB\nINL Absolute integralnon-linearity AFEonly 12.5LSB\nFR Frequency response Multiburst (60IRE) -0.9 dB\nXTALK Inputcrosstalk(1)1MHz -50 dB\nSNR Signal-to-noise ratio(allchannels)(4)Fin=1MHz,1.0Vpp 54 dB\nNS Noisespectrum Lumaramp(100kHztofull,tiltnull) -51 dB\nDP Differential phase Modulated ramp 0.5 deg\nDG Differential gain Modulated ramp ±1.5 %\n(1)Specified bydesign\n(2)Fullrangevideo\n(3)Nomissingcodes\n(4)Basedon10-bitinternalADCtestmode\n5.7AudioA/DConverters Electrical Characteristics\nADCsamplerate=32.768MSPSforaudioCh1,Ch2,Ch3,Ch4\nPARAMETER TESTCONDITIONS MIN TYPMAXUNIT\nAudioADCconversion rate fS=16kHz 32.768 MHz\nZiInputimpedance, analogaudioinputs(1)0-dBPGAgain 20 kΩ\nCiInputcapacitance, analogaudioinputs(1)10pF\nVi(PP)Full-scale inputvoltagerangeofADC Ccoupling=2.2µF,0-dBPGAgain 1 V\nDNL Absolute differential non-linearity(2)AFEonly 0.75 1LSB\nINL Absolute integralnon-linearity AFEonly 12.5LSB\nXTALK Crosstalk betweenanytwochannels -50 dB\nSNR Signal-to-noise ratio(allchannels) fS=16kHz,VIN=-60dB,1kHz 56 dB\nSystemclockfrequency perchannel 512fS Hz\n(1)Specified bydesign\n(2)Nomissingcodes\nCopyright ©2009–2013,TexasInstruments Incorporated Electrical Specifications 93\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nt5\nValid Data Valid Data90%\n10%t3 t4\n90%\n10%OCLK_P\nDVO_x_[7:0]t1,t2\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n5.8VideoOutputClockandDataTiming\n10-pFloadfor27MHzand54MHz,6-pFloadfor108MHz\nNO. PARAMETER TESTCONDITIONS MINTYPMAXUNIT\nDutycycle,OCLK_P/OCLK_N ≤50%,OCLK_P/OCLK_N =108MHz 445055%\n90%to10%,OCLK_P/OCLK_N =27MHz 1.4ns\nt3Falltime,OCLK_P/OCLK_N\n90%to10%,OCLK_P/OCLK_N =108MHz 1.15ns\n10%to90%,OCLK_P/OCLK_N =27MHz 1.4ns\nt4Risetime,OCLK_P/OCLK_N\n10%to90%,OCLK_P/OCLK_N =108MHz 1.15ns\n90%to10%,Data=27MHz 3.4ns\nt1Falltime,Data\n90%to10%,Data=108MHz 2.9\n10%to90%,Data=27MHz 4.2ns\nt2Risetime,Data\n10%to90%,Data=108MHz 3.4\n50%,OCLK_P/OCLK_N =27MHz 1.9 4.86ns Propagation delayfromfallingedgeoft5OCLK_P/OCLK_N 50%,OCLK_P/OCLK_N =108MHz 0.22 1.5ns\nFigure5-1.VideoOutputClockandDataTiming\n5.8.1VideoInputClockandDataTiming\nNOTE\nVideoCascade Modes:Timingisensuredbydesignat27/54MHz inputfrequency withinputtrace\ndelays<2ns.\n94Electrical Specifications Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nSDA\nSCLStop Start\nData\nt1\nt6t7t2\nt8 t6t3t4\nt5Stop\nChange\nData\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n5.9I2CHostPortTiming(1)\nNO. PARAMETER MIN TYP MAXUNIT\nt1BusfreetimebetweenSTOPandSTART 1.3 µs\nt2DataHoldtime 0 0.9µs\nt3DataSetuptime 100 ns\nt4Setuptimefora(repeated) STARTcondition 0.6 µs\nt5SetuptimeforaSTOPcondition 0.6 ns\nt6Holdtime(repeated) STARTcondition 0.6 µs\nt7RisetimeSDAandSCLsignal 250ns\nt8FalltimeSDAandSCLsignal 250ns\nCbCapacitive loadforeachbusline 400pF\nfI2CI2Cclockfrequency 400kHz\n(1)Specified bydesign\nFigure5-2.I2CHostPortTiming\nCopyright ©2009–2013,TexasInstruments Incorporated Electrical Specifications 95\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\n5.9.1I2SPortTiming\nNOTE\nPhilipsI2Sbuscompliant (specified bydesign)–SeethePhilipsI2Sbusspecification\n5.10Miscellaneous Timings\nPARAMETER MINTYPMAXUNIT\ntRESETRESETB SignalLowTimeforvalidreset 20 ms\ntvalidI2Cvalidtime,Initialization timeafterresetuntilI2Cready 260 µs\n5.11PowerDissipation Ratings\nPARAMETER TESTCONDITIONS(1)MINTYPMAXUNIT\nThermalPADsolderedto4-layerθJA Junction-to-ambient thermalresistance, stillair 17.17 °C/WHigh-KPCB\nThermalPADsolderedto4-layerθJC Junction-to-case thermalresistance, stillair 0.12 °C/WHigh-KPCB\nTJ(max)Maximum junctiontemperature forreliableoperation 105°C\n(1)Exposed thermalpadmustbesolderedtoJEDECHigh-KPCBwithadequate groundplane(seeSection6.5).\n96Electrical Specifications Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nDM6467\nDaVinci HD4-Ch CIF + 1-Ch D1\n8Bit@54MHzVPIF-A\nI2CH.264/MPEG-4\n8-Ch CIF Recording\nMulti-Ch D1\nPreview VPIF-B4-Ch CIF + 1-Ch D1\n8Bit@54MHzDVO_A_[7:0]\nDVO_A_[7:0]I2CTVP5158\nTVP5158OCLK_P\nOCLK_PVIN_1\nVIN_2\nVIN_3\nVIN_4\nVIN_1\nVIN_2\nVIN_3\nVIN_4\nTVP5158\nMulti-Ch\nVideo DecoderDM6467\nDaVinci HD4-Ch D1\n16Bit@54MHzDVO_A_[7:0]\nDVO_B_[7:0]VPIF-A\nVPIF-B\nI2CH.264/MPEG-4\n4-Ch D1 Recording\nMulti-Ch D1\nPreviewOCLK_PVIN_1\nVIN_2\nVIN_3\nVIN_4\n4-Ch□D1\n8Bit@108MHz\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n6Application Information\n6.14-ChD1Applications\nFigure6-1.4-ChD1Application (SingleBT.656Interface)\nFigure6-2.4-ChD1Application (16-BitYCbCr4:2:2Interface)\n6.28-ChCIFApplications\nFigure6-3.8-ChCIFRealTimeEncoding andMulti-Ch D1PreviewApplication\nCopyright ©2009–2013,TexasInstruments Incorporated Application Information 97\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\n4-Ch□Half-D1□+□1-Ch□D1\n8Bit@108MHz\n4-Ch□Half-D1□+□1-Ch□D1\n8Bit@108MHz\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nNOTE:ThebackendDSPdropsonefieldofHalf-D1togetCIFformatvideo\nFigure6-4.8-ChCIFRealTimeEncoding andMulti-Ch D1PreviewApplication\n6.316-ChCIFApplications\nSeeSection3.8.3.3forthedetailsof16-ChCIFapplications.\n98Application Information Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nPlace R50, R51, R52 and R53 close to J1C71\n0.1 µF\nC73\n0.1 µFC72\n0.1 µFR50\n75/c87R54\n37.4 /c87\nR55\n37.4 /c87J1B\nRCA_Octal_stack3\n109\n11\n124R56\n37.4 /c87\nR57\n37.4 /c87R51\n75/c87\nR52\n75/c87\nR53\n75/c87\nR58\n1.8 k /c87C70\n0.1 µF\nPlace R54, R55, R56 and R57 close to J1U1A\nTVP5158DVO_A_078\nDVO_A_177\nDVO_A_275\nDVO_A_374\nDVO_A_472\nDVO_A_571\nDVO_A_669\nDVO_A_768\nDVO_B_063\nDVO_B_162\nDVO_B_260\nDVO_B_359\nDVO_B_457\nDVO_B_556\nDVO_B_654\nDVO_B_753\nOCLK_P51DVO_C_046\nDVO_C_145\nDVO_C_243\nDVO_C_342\nDVO_C_440\nDVO_C_539\nDVO_C_637\nDVO_C_736\nDVO_D_031\nDVO_D_130\nDVO_D_228\nDVO_D_327\nDVO_D_425\nDVO_D_524\nDVO_D_622\nDVO_D_721\nOCLK_N/CLKIN50VIN_1_P108\nVIN_1_N109\nVIN_2_P112\nVIN_2_N113\nVIN_3_P121\nVIN_3_N122\nVIN_4_P125\nVIN_4_N126\nREXT_2K116\n TVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\n6.4Application CircuitExamples\nNOTE:SystemlevelESDprotection isnotincludedinaboveapplication circuitbutisrecommended.\nFigure6-5.VideoInputConnectivity\nCopyright ©2009–2013,TexasInstruments Incorporated Application Information 99\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nU1B\nTVP5158AIN_195\nAIN_294\nAIN_393\nAIN_492SD_M89\nSD_R88\nLRCLK_R86\nSD_CO83BCLK_R85\nLRCLK_CI16\nBCLK_CI17\nSD_CI19R62\n5.6 k /c87R61\n5.6 k /c87\nR63\n5.6 k /c87C67\n2.2 µFC65\n2.2 µF\nC66\n2.2 µF\nC68\n2.2 µF\nR64\n5.6 k /c87J1A\nRCA_Octal_stack1\n65\n7\n82\nR65\n5.6 k /c87R67\n5.6 k /c87R66\n5.6 k /c87R60\n5.6 k /c87\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nNOTE:SystemlevelESDprotection isnotincludedinaboveapplication circuitbutisrecommended.\nNOTE:Resistordividermayvarydependent onexpected maxinputaudiolevels.Desiredanalogaudioinputlevelsshould\nnotexceed1Vpp.\nFigure6-6.AudioInputConnectivity\n6.5Designing withPowerPAD ™Devices\nTheTVP5158 deviceishousedinahigh-performance, thermally enhanced, 128-terminal PowerPAD\npackage. UseofthePowerPAD packagedoesnotrequireanyspecialconsiderations excepttonotethat\nthethermalpad,whichisanexposed diepadonthebottomofthedevice,isametallicthermaland\nelectrical conductor. Therefore, ifnotimplementing thePowerPAD PCBfeatures, theuseofsoldermasks\n(orotherassembly techniques) canberequired topreventanyinadvertent shortingbytheexposed\nthermalpadofconnection etchesorviasunderthepackage. Therecommended option,however, isnotto\nrunanyetchesorsignalviasunderthedevice,buttohaveonlyagrounded thermallandasinthe\nfollowing explanation. Although theactualsizeoftheexposed diepadmayvary,theminimum size\nrequiredforthekeep-out areaforthe128-terminal PFPPowerPAD packageis9mmx9mm.\nItisrecommended thattherebeathermalland,whichisanareaofsolder-tinned-copper, underneath the\nPowerPAD package. Thethermallandvariesinsize,depending onthePowerPAD packagebeingused,\nthePCBconstruction, andtheamountofheatthatneedstoberemoved. Inaddition,thethermallandmay\normaynotcontainnumerous thermalviasdepending onPCBconstruction.\nOtherrequirements forusingthermallandsandthermalviasaredetailedintheTIapplication note\nPowerPAD Thermally Enhanced Package application report(SLMA002 ).\nFortheTVP5158 device,thisthermallandmustbegrounded tothelow-impedance groundplaneofthe\ndevice.Thisimproves notonlythermalperformance butalsotheelectrical grounding ofthedevice.Itis\nalsorecommended thatthedevicegroundterminallandingpadsbeconnected directlytothegrounded\nthermalland.Thelandsizeshouldbeaslargeaspossiblewithoutshortingdevicesignalterminals. The\nthermallandcanbesolderedtotheexposedthermalpadusingstandard reflowsoldering techniques.\nWhilethethermallandcanbeelectrically floatedandconfigured toremoveheattoanexternalheatsink,it\nisrecommended thatthethermallandbeconnected tothelow-impedance groundplaneforthedevice.\nMoreinformation canbeobtainedfromtheTIapplication notePHYLayout(SLLA020).\n100Application Information Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nwww.ti.com SLES243G –JULY2009–REVISED APRIL2013\nRevision History\nNOTE:Pagenumbers forpreviousrevisions maydifferfrompagenumbers inthecurrentversion.\nREVISION COMMENTS\nSLES243 Initialrelease\nSLES243A Table2-1,XTAL_REF description change.\nFigure3-21,0-ΩresistoraddedinlinebetweenXTAL_REF pinandVSSA.\nSLES243B YUVreferences changedtoYCbCr.\nSection1,Trademarks added.\nTable2-1,XTAL_IN, XTAL_REF, andXTAL_OUT terminaldescriptions movedtoAnalogSection.\nSection3.1.2,AnalogVideoInputClamping description changed.\nSection3.9.4,AnalogAudioInputClamping description added.\nSection3.11,ClockCircuitdescription changed.\nSLES243C Section1.5,Trademarks added.\nSection1.6,Document Conventions added.\nSection1.7,Package optionsadded.\nSection3.9.3,SerialAudioInterface added.\nFigure3-18,SerialAudioInterface TimingDiagramadded.\nTable4-14,Luminance Brightness description modified.\nTable4-15,Luminance Contrastdescription modified.\nTable4-16,Brightness andContrastRangeExtender registeradded.\nTable4-17,Chrominance Saturation description modified.\nTable4-65,InterruptControlregisteradded.\nMinoreditorialchangesthroughout.\nSLES243D AEC-Q100 qualification added.\nSection3.8.3.3,Addedcomment aboutINTREQoutputsinvideocascademode\nSection3.10.3,AddedVBUSaccessinformation.\nTable4-1,AddedVBUSdataandaddressregisters.\nTable4-89,AddedVBUSdataregisterdescription.\nTable4-90,AddedVBUSaddressregisterdescription.\nTable3-5,AddedoutputformatsettingsforI2CaddressB0h.\nTable3-6,AddedoutputformatsettingsforI2CaddressB0h.\nTable3-10,Combined originalTable3-11withTable3-10.\nTable3-10,AddedoutputformatsettingsforI2CaddressB0h.\nSection3.8.3.4,AddedHybridModesection.\nTable3-11,Addeddefaultsuper-frame outputformattable.\nFigure3-15,Mademinoreditorialchanges.\nFigure3-16,Mademinoreditorialchanges.\nTable4-1,Addedsuper-frame EAV2SAV andSAV2EAV durationstatus(D0h-D3h)\nTable4-43,ModifiedTV/VCRmodedetection description.\nTable4-19,Modifieddefinition forcolorkillerthreshold control.\nTable4-43,Deletedobsoletestablesynccontrolbits.\nTable4-50,Changed thedefaultvalueforI2Caddress88hfrom00hto03h.\nTable4-86,Addedsuper-frame EAV2SAV durationstatus(subaddress: D0h-D1h)\nTable4-87,Addedsuper-frame SAV2EAV durationstatus(subaddress: D2h-D3h)\nSection5.11,Modifiedpackagethermalspecifications.\nMinoreditorialchangesthroughout\nCopyright ©2009–2013,TexasInstruments Incorporated Application Information 101\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nTVP5158,TVP5157,TVP5156\nSLES243G –JULY2009–REVISED APRIL2013 www.ti.com\nREVISION COMMENTS\nSLES243E Table4-1,AddedRAMversionMSBandLSBregisters(subaddress: 05h-06h).\nTable4-6,AddedRAMversionMSBregister(subaddress: 05h).\nTable4-7,AddedRAMversionLSBregister(subaddress: 06h).\nSection5.1,UpdatedVESDlimits.\nSLES243F Table3-11,Super-frame formatandtiminginformation modified.\nTable3-10,6-ChHalf-D1,6-ChHalf-D1+1-ChD1and3-ChD1formatsadded\nTable3-12,AddedBOPandEOPbits.\nTable3-13,Addeddefinitions forBOPandEOPbits.\nTable4-1,Changed defaultsettingforI2CregisterAEhfrom00hto01h.\nTable4-1,Corrected registernameforI2Cregister06h.\nTable4-43,Definitions forbits7and3ofI2Cregister60hadded.\nTable4-52,Outputtimingdelaycontrolrangemodified.\nTable4-54,Registersettingsforseveraldifferentscreencolorsprovided.\nTable4-63,YCbCroutputcoderangemodified.\nTable4-67,Embedded syncoffsetcontrolrangemodified.\nTable4-69,Definition forbit7ofI2CregisterB1hmodified.\nTable4-70,Definition forbit7ofI2CregisterB2hadded.\nTable4-75,Definition forbits7:5ofI2CregisterB9hadded.\nTable4-77,11.025kHz, 12kHz,22.05kHz and24kHzaudiosampleratesadded.\nTable4-82,Definition forbits3:0ofI2CregisterC5hmodified.\nTable4-91,Definition forbits5:0ofI2CregisterF2hmodified.\nTable4-92,Definition forbits5:0ofI2CregisterF4hmodified.\nTable4-93,Definition forbits5:0ofI2CregisterF6hmodified.\nSLES243G Section3.6,Changed I2Caddresses shownforNoiseReduction registers\n102Application Information Copyright ©2009–2013,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nProductFolderLinks:TVP5158 TVP5157 TVP5156\nPACKAGE OPTION ADDENDUM\nwww.ti.com 10-Dec-2020\nAddendum-Page 1PACKAGING INFORMATION\nOrderable Device Status\n(1)Package Type Package\nDrawingPinsPackage\nQtyEco Plan\n(2)Lead finish/\nBall material\n(6)MSL Peak Temp\n(3)Op Temp (°C) Device Marking\n(4/5)Samples\nTVP5157PNPR ACTIVE HTQFP PNP1281000RoHS & Green NIPDAU Level-3-260C-168 HR 0 to 70 TVP5157\nTVP5158IPNP ACTIVE HTQFP PNP12890RoHS & Green NIPDAU Level-3-260C-168 HR -40 to 85 TVP5158I\nTVP5158IPNPR ACTIVE HTQFP PNP1281000RoHS & Green NIPDAU Level-3-260C-168 HR -40 to 85 TVP5158I\nTVP5158PNP ACTIVE HTQFP PNP12890RoHS & Green NIPDAU Level-3-260C-168 HR 0 to 70 TVP5158\nTVP5158PNPR ACTIVE HTQFP PNP1281000RoHS & Green NIPDAU Level-3-260C-168 HR 0 to 70 TVP5158\n \n(1) The marketing status values are defined as follows:\nACTIVE: Product device recommended for new designs.\nLIFEBUY:  TI has announced that the device will be discontinued, and a lifetime-buy period is in effect.\nNRND: Not recommended for new designs. Device is in production to support existing customers, but TI does not recommend using this part in a new design.\nPREVIEW:  Device has been announced but is not in production. Samples may or may not be available.\nOBSOLETE:  TI has discontinued the production of the device.\n \n(2) RoHS:  TI defines "RoHS" to mean semiconductor products that are compliant with the current EU RoHS requirements for all 10 RoHS substances,  including the requirement that RoHS substance\ndo not exceed 0.1% by weight in homogeneous materials. Where designed to be soldered at high temperatures, "RoHS" products are suitable for use in specified lead-free processes. TI may\nreference these types of products as "Pb-Free".\nRoHS Exempt:  TI defines "RoHS Exempt" to mean products that contain lead but are compliant with EU RoHS pursuant to a specific EU RoHS exemption.\nGreen: TI defines "Green" to mean the content of Chlorine (Cl) and Bromine (Br) based flame retardants meet JS709B low halogen requirements of <=1000ppm threshold.  Antimony trioxide based\nflame retardants must also meet the <=1000ppm threshold requirement.\n \n(3) MSL, Peak Temp. - The Moisture Sensitivity Level rating according to the JEDEC industry standard classifications, and peak solder temperature.\n \n(4) There may be additional marking, which relates to the logo, the lot trace code information, or the environmental category on the device.\n \n(5) Multiple Device Markings will be inside parentheses. Only one Device Marking contained in parentheses and separated by a "~" will appear on a device. If a line is indented then it is a continuation\nof the previous line and the two combined represent the entire Device Marking for that device.\n \n(6) Lead finish/Ball material - Orderable Devices may have multiple material finish options. Finish options are separated by a vertical ruled line. Lead finish/Ball material values may wrap to two\nlines if the finish value exceeds the maximum column width.\n \nPACKAGE OPTION ADDENDUM\nwww.ti.com 10-Dec-2020\nAddendum-Page 2Important Information and Disclaimer: The information provided on this page represents TI\'s knowledge and belief as of the date that it is provided. TI bases its knowledge and belief on information\nprovided by third parties, and makes no representation or warranty as to the accuracy of such information. Efforts are underway to better integrate information from third parties. TI has taken and\ncontinues to take reasonable steps to provide representative and accurate information but may not have conducted destructive testing or chemical analysis on incoming materials and chemicals.\nTI and TI suppliers consider certain information to be proprietary, and thus CAS numbers and other limited information may not be available for release.\n \nIn no event shall TI\'s liability arising out of such information exceed the total purchase price of the TI part(s) at issue in this document sold by TI to Customer on an annual basis.\n \nTAPE AND REEL INFORMATION\n*All dimensions are nominal\nDevice Package\nTypePackage\nDrawingPinsSPQ Reel\nDiameter\n(mm)Reel\nWidth\nW1 (mm)A0\n(mm)B0\n(mm)K0\n(mm)P1\n(mm)W\n(mm)Pin1\nQuadrant\nTVP5157PNPR HTQFP PNP1281000 330.0 24.417.017.01.520.024.0 Q1\nTVP5158IPNPR HTQFP PNP1281000 330.0 24.417.017.01.520.024.0 Q1\nTVP5158PNPR HTQFP PNP1281000 330.0 24.417.017.01.520.024.0 Q1PACKAGE MATERIALS INFORMATION\nwww.ti.com 5-Jan-2022\nPack Materials-Page 1\n*All dimensions are nominal\nDevice Package Type Package Drawing Pins SPQ Length (mm) Width (mm) Height (mm)\nTVP5157PNPR HTQFP PNP 1281000 367.0 367.0 55.0\nTVP5158IPNPR HTQFP PNP 1281000 367.0 367.0 55.0\nTVP5158PNPR HTQFP PNP 1281000 367.0 367.0 55.0PACKAGE MATERIALS INFORMATION\nwww.ti.com 5-Jan-2022\nPack Materials-Page 2\nTRAY\nChamfer on Tray corner indicates Pin 1 orientation of packed units.\n*All dimensions are nominal\nDevice Package\nNamePackage\nTypePinsSPQUnit array\nmatrixMax\ntemperature\n(°C)L (mm) W\n(mm)K0\n(µm)P1\n(mm)CL\n(mm)CW\n(mm)\nTVP5158IPNP PNP HTQFP 128906 X 15 150 315135.9762015.420.321\nTVP5158PNP PNP HTQFP 128906 X 15 150 315135.9762015.420.321PACKAGE MATERIALS INFORMATION\nwww.ti.com 5-Jan-2022\nPack Materials-Page 3\n\n\nIMPORTANT NOTICE AND DISCLAIMER\nTI PROVIDES TECHNICAL AND RELIABILITY DATA (INCLUDING DATA SHEETS), DESIGN RESOURCES (INCLUDING REFERENCE \nDESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND OTHER RESOURCES “AS IS” \nAND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING WITHOUT LIMITATION ANY \nIMPLIED WARRANTIES OF MERCHANTABILIT Y, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT OF THIRD \nPARTY INTELLECTUAL PROPERTY RIGHTS.\nThese resources are intended for skilled developers designing with TI products. Y ou are solely responsible for (1) selecting the appropriate \nTI products for your application, (2) designing, validating and testing your application, and (3) ensuring your application meets applicable \nstandards, and any other safety, security, regulatory or other requirements.\nThese resources are subject to change without notice. TI grants you permission to use these resources only for development of an \napplication that uses the TI products described in the resource. Other reproduction and display of these resources is prohibited. No license \nis granted to any other TI intellectual property right or to any third party intellectual property right. TI disclaims responsibility for , and you \nwill fully indemnify TI and its representatives against, any claims, damages, costs, losses, and liabilities arising out of your use of these \nresources.\nTI’s products are provided subject to TI’s Terms of Sale or other applicable terms available either on ti.com or provided in conjunction with \nsuch TI products. TI’s provision of these resources does not expand or otherwise alter TI’s applicable warranties or warranty disclaimers for \nTI products.\nTI objects to and rejects any additional or different terms you may have proposed. IMPORTANT NOTICE\nMailing Address: Texas Instruments, Post Office Box 655303, Dallas, Texas 75265\nCopyright © 202 2, Texas Instruments Incorporated\n'}]
!==============================================================================!
### Component Summary: TVP5158IPNPR

#### Key Characteristics and Specifications:
- **Voltage Ratings:**
  - Digital Supply Voltage (VDD_3_3): 3.3V
  - Digital Core Voltage (VDD_1_1): 1.1V
  - Analog Supply Voltage (VDDA_3_3): 3.3V
  - Analog Supply Voltage (VDDA_1_8): 1.8V
  - Analog Supply Voltage (VDDA_1_1): 1.1V

- **Current Ratings:**
  - Digital Supply Current (IDD(33D)): 41 mA (at 4-Ch D1 mode, 108 MHz)
  - Core Digital Supply Current (IDD(11D)): 156 mA (at 4-Ch D1 mode, 108 MHz)
  - Analog Supply Current (IDD(33A)): 4.5 mA (at 4-Ch D1 mode, 108 MHz)
  - Analog Supply Current (IDD(18A)): 168 mA (at 4-Ch D1 mode, 108 MHz)

- **Power Consumption:**
  - Total Power Dissipation: 643 mW (at 4-Ch D1 mode, 108 MHz)

- **Operating Temperature Range:**
  - Commercial: 0°C to 70°C
  - Industrial: -40°C to 85°C

- **Package Type:**
  - 128-pin TQFP (Thin Quad Flat Package)

- **Special Features:**
  - Supports four independent video decoder channels.
  - Integrated 10-bit ADC for each channel.
  - Supports both NTSC and PAL video formats.
  - Features such as noise reduction, auto contrast, and flexible output formatting.
  - Supports audio processing with integrated 4-channel audio ADC.
  - Line-interleaved and pixel-interleaved output modes.
  - I2C interface for configuration and control.

- **Moisture Sensitive Level (MSL):**
  - MSL Level 3, according to JEDEC J-STD-020E.

#### Description:
The **TVP5158IPNPR** is a four-channel video decoder designed for high-quality NTSC/PAL video applications. It digitizes and decodes various base-band analog video formats into digital outputs. Each channel features a 10-bit, 27 MSPS analog-to-digital converter (ADC) and includes advanced video processing capabilities such as noise reduction and auto contrast adjustment. The device is particularly suited for applications requiring high-quality video processing, such as security and surveillance systems, automotive infotainment, and large-format video displays.

#### Typical Applications:
- **Security and Surveillance:** Used in digital video recorders (DVRs) and video servers for capturing and processing video feeds.
- **Automotive Infotainment:** Integrated into automotive video hubs for processing multiple video inputs.
- **Large Format Displays:** Employed in video wall systems for high-quality video output.
- **Gaming Systems:** Utilized in gaming consoles for video decoding and processing.

This component is ideal for applications that require robust video processing capabilities, flexibility in output formats, and integration of audio processing in a compact package.