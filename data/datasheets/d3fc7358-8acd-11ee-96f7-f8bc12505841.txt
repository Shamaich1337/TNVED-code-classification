[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of TVP5151IPBSR production of TEXAS INSTRUMENTS from the text:TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nUltralow-Power NTSC/PAL/SECAM VideoDecoder\nCheckforSamples: TVP5151\n1Introduction\n1.1Features\n1\n•Accepts NTSC(J,M,4.43),PAL(B,D,G,H,I, •Standard Programmable VideoOutputFormats\nM,N,Nc),andSECAM(B,D,G,K,K1,L)Video –ITU-RBT.656,8-Bit4:2:2WithEmbedded\n•Supports ITU-RBT.601Standard Sampling Syncs\n•High-Speed 9-BitAnalog-to-Digital Converter –8-Bit4:2:2WithDiscrete Syncs\n(ADC) •Macrovision ™CopyProtection Detection\n•TwoComposite InputsorOneS-VideoInput •Advanced Programmable VideoOutput\n•FullyDifferential CMOSAnalogPreprocessing Formats\nChannels WithClamping andAutomatic Gain –2×Oversampled RawVerticalBlanking\nControl(AGC)forBestSignal-to-Noise (S/N) Interval(VBI)DataDuringActiveVideo\nPerformance–SlicedVBIDataDuringHorizontal Blanking\n•Ultralow PowerConsumption orActiveVideo\n•48-Terminal PBGAPackage (ZQC)or •VBIModesSupported\n32-Terminal TQFPPackage (PBS)–Teletext(NABTS, WST)\n•Power-Down Mode:<1mW–Closed-Caption DecodeWithFIFOand\n•Brightness, Saturation, Hue,andSharpness Extended DataServices (XDS)\nControlThrough I2C–WideScreenSignaling, VideoProgram\n•Complementary 4-Line(3-HDelay)Adaptive System,CGMS-A, VerticalIntervalTime\nCombFiltersforBothCross-Luminance and Code\nCross-Chrominance NoiseReduction–Gemstar 1x/2xElectronic Program Guide\n•Patented Architecture forLockingtoWeak, Compatible Mode\nNoisy,orUnstable Signals–CustomConfiguration ModeThatAllows\n•Single27.000-MHz CrystalforAllStandards UsertoProgram SliceEngineforUniqueVBI\n•InternalPhase-Locked Loop(PLL)for DataSignals\nLine-Locked ClockandSampling •Power-On Reset\n•Subcarrier Genlock OutputforSynchronizing •Industrial Temperature Range\nColorSubcarrier ofExternal Encoder (TVP5151I): –40°Cto85°C\n•Variable DigitalI/OSupplyVoltageRangefrom\n1.8Vto3.3V\n1.2Description\nTheTVP5151 deviceisanultralow-power NTSC/PAL/SECAM videodecoder. Available inaspace-saving\n48-terminal PBGApackageora32-terminal TQFPpackage, theTVP5151 decoderconvertsNTSC,PAL,\nandSECAMvideosignalsto8-bitITU-RBT.656format.Discretesyncsarealsoavailable. Theoptimized\narchitecture oftheTVP5151 decoderallowsforultralowpowerconsumption. Thedecoderconsumes\n138-mWpowerundertypicaloperating conditions andconsumes lessthan1mWinpower-down mode,\nconsiderably increasing batterylifeinportableapplications. Thedecoderusesjustonecrystalforall\nsupported standards. TheTVP5151 decodercanbeprogrammed usinganI2Cserialinterface.\nTheTVP5151 decoder converts baseband analogvideointodigitalYCbCr4:2:2component video.\nComposite andS-videoinputsaresupported. TheTVP5151 decoderincludesone9-bitanalog-to-digital\nconverter (ADC)with2×sampling. Sampling isITU-RBT.601(27.0MHz,generated fromthe27.000-MHz\ncrystaloroscillator input)andislinelocked.Theoutputformatscanbe8-bit4:2:2or8-bitITU-RBT.656\nwithembedded synchronization.\n1\nPleasebeawarethatanimportant noticeconcerning availability, standard warranty, anduseincriticalapplications ofTexas\nInstruments semiconductor productsanddisclaimers theretoappearsattheendofthisdatasheet.\nPRODUCTION DATAinformation iscurrentasofpublication date. Copyright ©2009–2011,TexasInstruments IncorporatedProducts conform tospecifications perthetermsoftheTexas\nInstruments standard warranty. Production processing doesnot\nnecessarily includetestingofallparameters.\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nTheTVP5151 decoderutilizesTexasInstruments patented technology forlockingtoweak,noisy,or\nunstable signals.AGenlock/real-time control(RTC)outputisgenerated forsynchronizing downstream\nvideoencoders.\nComplementary four-lineadaptivecombfilteringisavailable forboththeluminance andchrominance data\npathstoreducebothcross-luminance andcross-chrominance artifacts; achrominance trapfilterisalso\navailable.\nVideocharacteristics including hue,brightness, saturation, andsharpness maybeprogrammed usingthe\nindustrystandard I2Cserialinterface. TheTVP5151 decodergenerates synchronization, blanking, lock,\nandclocksignalsinadditiontodigitalvideooutputs.TheTVP5151 decoder includes methods for\nadvanced verticalblanking interval(VBI)dataretrieval. TheVBIdataprocessor slices,parses,and\nperforms errorchecking onteletext,closedcaption,andotherdatainseveralformats.\nTheTVP5151 decoderdetectscopy-protected inputsignalsaccording totheMacrovision ™standard and\ndetectsType1,2,3,andcolorstripe processes.\nThemainblocksoftheTVP5151 decoderinclude:\n•Robustsyncdetector\n•ADCwithanalogprocessor\n•Y/Cseparation usingfour-lineadaptivecombfilter\n•Chrominance processor\n•Luminance processor\n•Videoclock/timing processor andpower-down control\n•Outputformatter\n•I2Cinterface\n•VBIdataprocessor\n•Macrovision detection forcomposite andS-video\n1.3Applications\nThefollowing isapartiallistofsuggested applications:\n•Digitaltelevisions\n•PDAs\n•Notebook PCs\n•Cellphones\n•Videorecorder/players\n•Internetappliances/web pads\n•Handheld games\n•Surveillance\n•Portablenavigation\n•Portablevideoprojectors\n2Introduction Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n1.4RelatedProducts\n•TVP5150AM1\n•TVP5154A\n•TVP5146M2\n•TVP5147M1\n•TVP5158\n1.5Trademarks\nTIandMicroStar Junioraretrademarks ofTexasInstruments.\nMacrovision isatrademark ofMacrovision Corporation.\nGemstarisatrademark ofGemstar-TV GuideInternational.\nOthertrademarks arethepropertyoftheirrespective owners.\n1.6Document Conventions\nThroughout thisdatamanual,severalconventions areusedtoconveyinformation. Theseconventions are:\n•Toidentifyabinarynumberorfield,alowercasebfollowsthenumbers. Forexample, 000bisa3-bit\nbinaryfield.\n•Toidentifyahexadecimal numberorfield,alowercasehfollowsthenumbers. Forexample, 8AFhisa\n12-bithexadecimal field.\n•Allothernumbers thatappearinthisdocument thatdonothaveeitheraborhfollowing thenumber\nareassumed tobedecimalformat.\n•Ifthesignalorterminalnamehasabarabovethename(forexample, RESETB), thisindicates the\nlogicalNOTfunction.Whenasserted, thissignalisalogiclow,0,or0b.\n•RSVDindicates thatthereferenced itemisreserved.\n1.7Ordering Information\nTA PACKAGED DEVICES(1)(2)PACKAGE OPTION\nTVP5151PBS Tray\nTVP5151PBSR Tapeandreel\n0°Cto70°C\nTVP5151ZQC Tray\nTVP5151ZQCR Tapeandreel\nTVP5151IPBS Tray\n–40°Cto85°C\nTVP5151IPBSR Tapeandreel\n(1)Forthemostcurrentpackageandorderinginformation, seethePackage OptionAddendum attheend\nofthisdocument, orseetheTIwebsiteatwww.ti.com .\n(2)Package drawings, thermaldata,andsymbolization areavailable atwww.ti.com/packaging .\nCopyright ©2009–2011,TexasInstruments Incorporated Introduction 3\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n1Introduction .............................................. 1 3.13ActiveVideo(AVID)Cropping...................... 16\n1.1Features.............................................. 1 3.14Embedded Syncs................................... 17\n1.2Description........................................... 1 3.15I2CHostInterface................................... 18\n1.3Applications.......................................... 2 3.16ClockCircuits....................................... 21\n3.17GenlockControl(GLCO)andRTC................. 22 1.4RelatedProducts..................................... 3\n3.18ResetandPowerDown............................ 23 1.5Trademarks.......................................... 3\n3.19ResetSequence.................................... 25 1.6Document Conventions.............................. 3\n3.20InternalControlRegisters.......................... 26 1.7Ordering Information................................. 3\n3.21RegisterDefinitions................................. 29 2DeviceDetails............................................ 5\n4Electrical Specifications ............................. 712.1Functional BlockDiagram............................ 5\n4.1Absolute Maximum Ratings........................ 712.2Terminal Assignments ............................... 6\n4.2Recommended Operating Conditions.............. 712.3Terminal Functions................................... 7\n4.3Reference ClockSpecifications .................... 71 3Functional Description ................................. 9\n4.4Electrical Characteristics ........................... 72 3.1AnalogFrontEnd.................................... 9\n4.5DCElectrical Characteristics ....................... 72 3.2Composite Processing BlockDiagram............... 9\n4.6AnalogElectrical Characteristics ................... 72 3.3Adaptive CombFiltering............................ 10\n4.7Clocks,VideoData,SyncTiming................... 73 3.4ColorLow-Pass Filter............................... 11\n4.8I2CHostInterface Timing........................... 74 3.5Luminance Processing............................. 12\n4.9ThermalSpecifications ............................. 74 3.6Chrominance Processing........................... 12\n5Example Register Settings.......................... 753.7TimingProcessor................................... 12\n5.1Example 1.......................................... 753.8VBIDataProcessor (VDP)......................... 125.2Example 2.......................................... 76\n3.9VBIFIFOandAncillaryDatainVideoStream.....136Application Information .............................. 77\n3.10RawVideoDataOutput............................ 146.1Application Example................................ 77\n3.11OutputFormatter................................... 147Revision History....................................... 78\n3.12Synchronization Signals............................ 14\n4Contents Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nM\nU\nXAIP1A\nAIP1BPGA\nA/D\nOutputFormatterYOUT[7:0]\nYCbCr 8-Bit\n4:2:2\nVBI Data\nProcessor (VDP)\nEmbedded Processor\nXTAL1/OSC\nXTAL2\nSCLK\nHorizontal andColor PLLsFID/GLCO\nVSYNC/PALI\nINTREQ/GPCL/VBLK\nHSYNC\nTiming ProcessorSCL\nSDAY/C Separation Chrominance\nProcessingLuminance\nProcessingMacrovision\nDetection\nHost\nInterface\nAVID/CLK_INPDN TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n2DeviceDetails\n2.1Functional BlockDiagram\nFigure2-1.Functional BlockDiagram\nCopyright ©2009–2011,TexasInstruments Incorporated DeviceDetails 5\nSubmitDocumentation Feedback\nABCDEFG\n12 3 4 5 6 7PBGA (ZQC) PACKAGE\n(BOTTOM VIEW)TQFP (PBS) PACKAGE\n(TOP VIEW)\n31 30 29 28 27\n24\n23\n22\n21\n20\n19\n18\n17\nSCLK\nIO_DVDD\nYOUT7/I2CSELYOUT6\nYOUT5\nYOUT4\nYOUT3\nYOUT2CH_AVDD\nCH_AGND\nREFM\nREFP\nPDN\nINTREQ/GPCL/VBLK\nAVID/CLK_IN\nHSYNC32 26 25\nVSYNC/PALI\nFID/GLCO\nSDA\nSCL\nDVDD\nDGND\nYOUT0\nYOUT1AIP1A\nAIP1B\nPLL_AGND\nPLL_AVDD\nXTAL1/OSC\nXTAL2\nAGND\nRESETB1\n2\n3\n4\n5\n6\n7\n8\n10 11 12 13 149 15 16TVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n2.2Terminal Assignments\nTheTVP5151 videodecoder ispackaged ina48-terminal PBGApackage ora32-terminal TQFP\npackage. Figure2-2showstheterminaldiagrams forbothpackages. Table2-1givesadescription ofthe\nterminals.\nFigure2-2.Terminal Diagrams\n6DeviceDetails Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n2.3Terminal Functions\nTable2-1.Terminal Functions\nTERMINAL\nNO. I/O DESCRIPTION\nNAME\nZQC PBS\nAnalogSection\nAGND E1 7GSubstrate. Connecttoanalogground.\nAnaloginput.Connecttothevideoanaloginputvia0.1-µFcapacitor. Themaximum input\nAIP1A A1 1Irangeis0-0.75VPP,andmayrequireanattenuator toreducetheinputamplitude tothe\ndesiredlevel.Ifnotused,connecttoAGNDviaa0.1-µFcapacitor (seeFigure6-1).\nAnaloginput.Connecttothevideoanaloginputvia0.1-µFcapacitor. Themaximum input\nAIP1B B1 2Irangeis0-0.75VPP,andmayrequireanattenuator toreducetheinputamplitude tothe\ndesiredlevel.Ifnotused,connecttoAGNDviaa0.1-µFcapacitor (seeFigure6-1).\nCH_AGND A3 31GAnalogground\nCH_AVDD A2 32PAnalogsupply.Connectto1.8-Vanalogsupply.\nB2,B3,\nB6,C4,\nC5,NC – –NoconnectD3–D6,\nE2–E5,\nF2,F5,F6\nPLL_AGND C2 3GPLLground.Connecttoanalogground.\nPLL_AVDD C1 4PPLLsupply.Connectto1.8-Vanalogsupply.\nA/Dreference negativeoutput.Connecttoanaloggroundthrougha1-µFcapacitor. Also,itREFM A4 30Oisrecommended toconnectdirectlytoREFPthrougha1-µFcapacitor (seeFigure6-1).\nA/Dreference positiveoutput.Connecttoanaloggroundthrougha1-µFcapacitor (seeREFP B4 29OFigure6-1).\nExternalclockreference input.Connecttoanaloggroundifanexternalsingle-endedXTAL1/OSC D2 5Ioscillator isconnected toAVID/CLK_IN pin.\nExternalclockreference output.Notconnected ifXTAL1orCLK_INisdrivenbyanexternalXTAL2 D1 6Osingle-ended oscillator.\nDigitalSection\nActivevideoindicatoroutput/external clkinput\nWhenXTAL1isusedasareference clockandthisterminalisleftunconnected, this\nterminalisinternally pulleddown.\nWhenXTAL1isusedasareference clockandAVIDoutputisrequired, thispinmustbeAVID/CLK_IN A6 26I/Olowuntilterminalisconfigured asanoutput.Thismaybedependent onexternalcircuitry\nconnected tothisterminal.\nWhenXTAL1isconnected toground,CLK_IN maybeconnected toanexternal\nsingle-ended oscillator froma1.8-Vto3.3-Vcompatible clocksignaldepending on\nIO_DVDD voltage.\nDGND E6 19GDigitalground\nDVDD E7 20PDigitalsupply.Connectto1.8-Vdigitalsupply.\nFID:Odd/even fieldindicatororverticallockindicator. Fortheodd/even indicator, a1\nindicates theoddfield.\nFID/GLCO C6 23OGLCO:ThisserialoutputcarriescolorPLLinformation. Aslavedevicecandecodethe\ninformation toallowchrominance frequency controlfromtheTVP5151 decoder. Datais\ntransmitted attheSCLKrateinGenlockmode.InRTCmode,SCLK/4isused.\nHSYNC A7 25OHorizontal synchronization signal\nCopyright ©2009–2011,TexasInstruments Incorporated DeviceDetails 7\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nTable2-1.Terminal Functions (continued)\nTERMINAL\nNO. I/O DESCRIPTION\nNAME\nZQC PBS\nThisterminalhasthreefunctions selectable bybit7ofI2Cregister03handbit1ofI2C\nregister0Fh:\n•INTREQ: Interruptrequestoutput\n•GPCL:General-purpose controllogicoutput.Inthismode,thestateofterminal27isINTREQ/B5 27O directlyprogrammed viaI2C.GPCL/VBLK\n•VBLK:Verticalblankingoutput.Inthismode,terminal27indicates theverticalblanking\nintervaloftheoutputvideo.Thebeginning andendtimesofthissignalare\nprogrammable viaI2C.\nAnexternalpulluporpulldown resistorisrequiredundercertainconditions (seeFigure6-1).\nIO_DVDD G2 10PDigitaloutputsupply,1.8Vto3.3V\nSCLK G1 9OSystemclockat2xthefrequency ofthepixelclock.\nPower-down terminal(activelow).Putsthedecoderinstandbymode.Preserves thevaluePDN A5 28 Ioftheregisters.\nActive-low reset.RESETB canbeusedonlywhenPDN=1.WhenRESETB ispulledlow,itRESETB F1 8Iresetsalltheregistersandrestartstheinternalmicroprocessor.\nSCL D7 21I/OI2Cserialclock(opendrain)\nSDA C7 22I/OI2Cserialdata(opendrain)\nVSYNC:Verticalsynchronization signal\nPALI:PALlineindicatororhorizontal lockindicator. ForthePALlineindicator:VSYNC/PALI B7 24O\n1=Noninverted line\n0=Invertedline\nG3 12\nF4 13\nG4 14\nYOUT[6:0] G5 15OITU-RBT.656output/YCbCr 4:2:2outputwithdiscretesyncs\nG6 16\nG7 17\nF7 18\nI2CSEL:Determines addressforI2C(sampled duringreset).Apulluporpulldown resistoris\nneeded(>1kΩ)toprogramtheterminaltothedesiredaddress.\n1=AddressisBAhYOUT7/I2CSEL F3 11I/O0=AddressisB8h\nYOUT7:Mostsignificant bit(MSB)ofITU-RBT.656output/YCbCr 4:2:2output\n8DeviceDetails Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3Functional Description\n3.1AnalogFrontEnd\nTheTVP5151 decoderhasananaloginputchannelthatacceptstwovideoinputsthatareac-coupled.\nThedecodersupports amaximum inputvoltagerangeof0.75V;therefore, anattenuation ofone-halfis\nneededformostinputsignalswithapeak-to-peak variation of1.5V.Thenominalparalleltermination\nbeforetheinputtothedeviceisrecommended tobe75Ω.Seetheapplication diagraminFigure6-1for\ntherecommended configuration. Thetwoanaloginputportscanbeconnected asfollows:\n•Twoselectable composite videoinputs,or\n•OneS-videoinput\nAninternalclamping circuitrestoresthesync-tipoftheac-coupled videosignaltoafixeddclevel.\nTheprogrammable gainamplifier(PGA)andtheautomatic gaincontrol(AGC)algorithm worktogetherto\nmakesurethattheinputsignalisamplified sufficiently toensuretheproperinputrangefortheADC.\nTheADChasninebitsofresolution andrunsatanominalspeedof27MHz.TheclockinputfortheADC\ncomesfromthehorizontal PLL.\n3.2Composite Processing BlockDiagram\nThecomposite processing blockprocesses NTSC/PAL/SECAM signalsintotheYCbCrcolorspace.\nFigure3-1showsthebasicarchitecture ofthisprocessing block.\nFigure3-1showstheluminance/chrominance (Y/C)separation processintheTVP5151 decoder. The\ncomposite videoismultiplied bysubcarrier signalsinthequadrature modulator togenerate thecolor\ndifference signalsCbandCr.CbandCrarethenlowpass(LP)filteredtoachievethedesiredbandwidth\nandtoreducecrosstalk.\nAnadaptive four-linecombfilterseparates CbCrfromY.Chrominance isremodulated throughanother\nquadrature modulator andsubtracted fromtheline-delayed composite videotogenerate luminance.\nBrightness, hue,saturation, andsharpness (usingthepeakingfilter)areprogrammable viaI2C.\nTheY/Cseparation isbypassed forS-videoinput.ForS-video,theremodulation pathisdisabled.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 9\nSubmitDocumentation Feedback\nLine\nDelay-Peaking\nQuadrature\nModulation\nQuadrature\nModulationNotch\nFilter\nColor\nLPF ↓2\n4-Line\nAdaptive\nComb\nFilter\nBurst\nAccumulator\n(Cr)Notch\nFilter\nLP\nFilter\nLP\nFilterDelayBrightness\nSaturation\nAdjust\nDelayCrY\nCb\nCb CrY\nBurst\nAccumulator\n(Cb)Delay\nColor\nLPF ↓2Composite+ DelayXGain Factor\nBandpassPeak\nDetector\nComposite\nSECAM Color\nDemodulationComposite\nCrCbSECAM LuminanceTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nFigure3-1.Composite Processing BlockDiagram (Comb/Trap FilterBypassed forSECAM)\n3.3Adaptive CombFiltering\nThefour-linecombfiltercanbeselectively bypassed intheluminance orchrominance path.Ifthecomb\nfilterisbypassed intheluminance path,thenchrominance trapfiltersareusedwhichareshownin\nFigure3-2andFigure3-3.TI\'spatented adaptivefour-linecombfilteralgorithm reducesartifactssuchas\nhanging dotsatcolorboundaries anddetectsandproperly handlesfalsecolorsinhigh-frequency\nluminance imagessuchasamultiburst patternorcirclepattern.\n10Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nFigure3-2.Chrominance TrapFilterFrequency Figure3-3.Chrominance TrapFilterFrequency\nResponse, NTSCITU-RBT.601Sampling Response, PALITU-RBT.601Sampling\n3.4ColorLow-Pass Filter\nInsomeapplications, itisdesirable tolimittheCb/Crbandwidth toavoidcrosstalk. Thisisespecially true\nincaseofvideosignalsthathaveasymmetrical Cb/Crsidebands. ThecolorLPfiltersprovided limitthe\nbandwidth oftheCb/Crsignals.\nColorLPfiltersareneededwhenthecombfilteringturnsoff,duetoextremecolortransitions intheinput\nimage.SeeSection3.21.25,Chrominance Control#2Register, fortheresponse ofthesefilters.Thefilters\nhavethreeoptionsthatallowthreedifferent frequency responses basedonthecolorfrequency\ncharacteristics oftheinputvideoasshowninFigure3-4.\nFigure3-4.ColorLow-Pass FilterwithFilterCharacteristics, NTSC/PAL ITU-RBT.601Sampling\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 11\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.5Luminance Processing\nTheluminance component isderivedfromthecomposite signalbysubtracting theremodulated\nchrominance information. Alinedelayexistsinthispathtocompensate forthelinedelayintheadaptive\ncombfilterinthecolorprocessing chain.Theluminance information isthenfedintothepeakingcircuit,\nwhichenhances thehighfrequency components ofthesignal,thusimproving sharpness.\n3.6Chrominance Processing\nForNTSC/PAL formats,thecolorprocessing beginswithaquadrature demodulator. TheCb/Crsignals\nthenpassthroughthegaincontrolstageforchrominance saturation adjustment. Anadaptivecombfilteris\nappliedtothedemodulated signalstoseparate chrominance andeliminate cross-chrominance artifacts.\nAnautomatic colorkillercircuitisalsoincludedinthisblock.Thecolorkillersuppresses thechrominance\nprocessing whentheburstamplitude fallsbelowaprogrammable threshold (seeI2Csubaddress 06h).The\nSECAMstandard issimilartoPALexceptforthemodulation ofcolorwhichisFMinsteadofQAM.\n3.7TimingProcessor\nThetimingprocessor isacombination ofhardware andsoftware runningintheinternalmicroprocessor\nthatservestocontrolhorizontal locktotheinputsyncpulseedge,AGCandoffsetadjustment inthe\nanalogfrontend,verticalsyncdetection, andMacrovision detection.\n3.8VBIDataProcessor (VDP)\nTheTVP5151 VDPslicesvariousdataservicessuchasteletext(WST,NABTS), closedcaptioning (CC),\nwidescreensignaling (WSS),etc.Theseservices areacquired byprogramming theVDPtoenable\nstandards intheVBI.TheresultsarestoredinaFIFOand/orregisters. Theteletextresultsarestoredonly\ninaFIFO.Table3-1listsasummary ofthetypesofVBIdatasupported according tothevideostandard. It\nsupportsITU-RBT.601sampling foreach.\nTable3-1.DataTypesSupported byVDP\nLINEMODEREGISTERNAME DESCRIPTION(D0h–FCh)BITS[3:0]\n0000b WSTSECAM Teletext,SECAM\n0001b WSTPALB Teletext,PAL,SystemB\n0010b WSTPALC Teletext,PAL,SystemC\n0011b WST,NTSCB Teletext,NTSC,SystemB\n0100b NABTS,NTSCC Teletext,NTSC,SystemC\n0101b NABTS,NTSCD Teletext,NTSC,SystemD(Japan)\n0110b CC,PAL ClosedcaptionPAL\n0111b CC,NTSC ClosedcaptionNTSC\n1000b WSS/CGMS-A Wide-screen signaling/Copy Generation Management System-Analog, PAL\n1001b WSS/CGMS-A Wide-screen signaling/Copy Generation Management System-Analog, NTSC\n1010b VITC,PAL Verticalintervaltimecode, PAL\n1011b VITC,NTSC Verticalintervaltimecode, NTSC\n1100b VPS,PAL Videoprogramsystem,PAL\n1101b Gemstar2xCustom1Electronic programguide\n1110b Reserved Reserved\n1111b ActiveVideo Activevideo/full field\n12Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nAtpower-up thehostinterface isrequiredtoprogramtheVDP-configuration RAM(VDP-CRAM) contents\nwiththelookuptable(seeSection3.21.64).ThisisdonethroughportaddressC3h.Eachreadfromor\nwritetothisaddressautoincrements aninternalcountertothenextRAMlocation. Toaccessthe\nVDP-CRAM, thelinemoderegisters (D0htoFCh)mustbeprogrammed withFFhtoavoidaconflictwith\ntheinternalmicroprocessor andtheVDPinbothwritingandreading.Fullfieldmodemustalsobe\ndisabled.\nAvailable VBIlinesarefromline6toline27ofbothfield1andfield2.EachlinecanbeanyVBImode.\nOutputdataisavailable eitherthroughtheVBI-FIFO (B0h)orthroughdedicated registers at90htoAFh,\nbothofwhichareavailable throughtheI2Cport.\n3.9VBIFIFOandAncillary DatainVideoStream\nSlicedVBIdatacanbeoutputasancillarydatainthevideostreamintheITU-RBT.656mode.VBIdatais\noutputduringthehorizontal blankingperiodfollowing thelinefromwhichthedatawasretrieved. Table3-2\nshowstheheaderformatandsequence oftheancillarydatainsertedintothevideostream.Thisformatis\nalsousedtostoreanyVBIdataintotheFIFO.ThesizeofFIFOis512bytes.Therefore, theFIFOcan\nstoreupto11linesofteletextdatawiththeNTSCNABTSstandard.\nTable3-2.Ancillary DataFormatandSequence\nD7 D0BYTENO. D6 D5 D4 D3 D2 D1 DESCRIPTION(MSB) (LSB)\n0 0 0 0 0 0 0 0 0\n1 1 1 1 1 1 1 1 1Ancillarydatapreamble\n2 1 1 1 1 1 1 1 1\n3 NEP EP 0 1 0DID2 DID1 DID0DataID(DID)\n4 NEP EP F5 F4 F3 F2 F1 F0Secondary dataID(SDID)\n5 NEP EP N5 N4 N3 N2 N1 N0Numberof32-bitdata(NN)\n6 Videoline[7:0] InternaldataID0(IDID0)\nData7 0 0 0 Match1Match2Videoline[9:8]InternaldataID1(IDID1)error\n8 1.Data Databyte\n9 2.Data Databyte\nFirstword\n10 3.Data Databyte\n11 4.Data Databyte\n... ... ...\nm–1.Data Databyte\nm.Data Databyte\nNthword\nRSVD CS[5:0] Checksum\n4(N+2)–11 0 0 0 0 0 0 0Fillbyte\nEP: EvenparityforD0–D5\nNEP: Negatedevenparity\nDID: 91h:SliceddataofVBIlinesoffirstfield\n53h:Sliceddataofline24toendoffirstfield\n55h:SliceddataofVBIlinesofsecondfield\n97h:Sliceddataofline24toendofsecondfield\nSDID: Thisfieldholdsthedataformattakenfromthelinemoderegisterofthecorresponding line.\nNN: NumberofDwordsbeginning withbyte8through4(N+2).Thisvalueisthenumberof\nDwordswhereeachDwordis4bytes.\nIDID0: Transaction videolinenumber[7:0]\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 13\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nIDID1: Bit0/1=Transaction videolinenumber[9:8]\nBit2=Match2flag\nBit3=Match1flag\nBit4=1ifanerrorwasdetectedintheEDCblock;0ifnot\nCS: SumofD0–D7ofDIDthroughlastdatabyte.\nFillbyte: Fillbytesmakeamultipleof4bytesfrombyte0tolastfillbyte.\n3.10RawVideoDataOutput\nTheTVP5151 decodercanoutputrawA/Dvideodataat2xsampling rateforexternalVBIslicing.Thisis\ntransmitted asanancillarydatablockduringtheactivehorizontal portionofthelineandduringvertical\nblanking.\n3.11OutputFormatter\nTheYCbCrdigitaloutputcanbeprogrammed as8-bit4:2:2or8-bitITU-RBT.656parallelinterface\nstandard.\nTable3-3.Summary ofLineFrequencies, DataRates,andPixelCounts\nCOLORACTIVE PIXEL HORIZONTALSTANDARDS PIXELSPER LINESPER SUB-CARRIERPIXELSPER FREQUENCY LINERATE(ITU-RBT.601) LINE FRAME FREQUENCYLINE (MHz) (kHz)(MHz)\nNTSC-J,M 858 720 525 13.5 3.579545 15.73426\nNTSC-4.43 858 720 525 13.5 4.43361875 15.73426\nPAL-M 858 720 525 13.5 3.57561149 15.73426\nPAL-B,D,G,H,I 864 720 625 13.5 4.43361875 15.625\nPAL-N 864 720 625 13.5 4.43361875 15.625\nPAL-Nc 864 720 625 13.5 3.58205625 15.625\nSECAM 864 720 625 13.5 4.40625/4.25 15.625\n3.12Synchronization Signals\nExternal(discrete) syncsareprovidedviathefollowing signals(seeFigure3-5andFigure3-6):\n•VSYNC(verticalsync)\n•FID/VLK(fieldindicatororverticallockindicator)\n•INTREQ/GPCL/VBLK (general-purpose outputorverticalblankingindicator)\n•PALI/HLK (PALswitchindicatororhorizontal lockindicator)\n•HSYNC(horizontal sync)\n•AVID(activevideoindicator) (ifsetasoutput)\nVSYNC,FID,PALI,andVBLKaresoftwaresetandprogrammable totheSCLKpixelcount.Thisallows\nanypossiblealignment totheinternalpixelcountandlinecount.Thedefaultsettingsfora525-/625-line\nvideooutputaregivenasanexample.\n14Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nComposite\nVideo525\nVSYNC\nINTREQ/GPCL/VBLKFID1 2 3 4 5 6 7 8 9 10 11 20 21 22525 Line\n262 263 264 265 266 267 268 269 270 271 272 273 282 283 284\n310 311 312 313 314 315 316 317 318 319 320 333 334 335 336\n622 623 624 625 1 2 3 4 5 6 7 20 21 22 23625 LineVSYNC\nINTREQ/GPCL/VBLKFID\nVSYNC\nINTREQ/GPCL/VBLKFID\nVSYNC\nINTREQ/GPCL/VBLKFID↔\nVBLK Start↔\nVBLK Stop\n↔\nVBLK Start↔\nVBLK Stop\n↔\nVBLK Start↔\nVBLK Stop\n↔\nVBLK Start↔\nVBLK StopComposite\nVideo\nComposite\nVideo\nComposite\nVideo TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nA.Linenumbering conforms toITU-RBT.470andITU-RBT.1700.\nFigure3-5.8-Bit4:2:2,TimingWith2×PixelClock(SCLK)Reference\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 15\nSubmitDocumentation Feedback\nNTSC 601 1436\nPAL 601 1436\nITU 656\nDatastreamCb\n3591437\n1437\nY\n7181438\n1438\nCr\n3591439\n1439\nY\n7191440\n1440\nFF1441\n1441\n001455\n1459\n101456\n1460\n80\nHSYNC\nAVIDITU-R BT.656 Timing\n1583\n1587\n101584\n1588\n801711\n1723\n101712\n1724\nFF1713\n1725\n001714\n1726\n001715\n1727\nXX0\n0\nCb\n01\n1\nY\n02\n2\nCr\n03\n3\nY\n1\n↔\nAVID Stop↔\nAVID Start↔\nHSYNC StartSECAM 1436 1437 1438 1439 1440 1441 1479 1480 1607 1608 1719 1720 1721 1722 172317\n2417\n2517\n2617\n27…\n……\n……\n…TVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nA.AVIDrisingedgeoccursfourSCLKcyclesearlywhenintheITU-RBT.656outputmode.\nFigure3-6.Horizontal Synchronization Signals\n3.13ActiveVideo(AVID)Cropping\nTheAVIDoutputsignalprovidesameanstoqualifyandcropactivevideobothhorizontally andvertically.\nThehorizontal startandstoppositionoftheAVIDsignaliscontrolled usingregisters 11h-12h and\n13h-14h, respectively. Theseregistersalsocontrolthehorizontal positionoftheembedded syncSAV/EAV\ncodes.\nAVIDverticaltimingiscontrolled bytheVBLKstartandstopregisters ataddresses 18hand19h.These\nVBLKregisters havenoeffectontheembedded verticalsynccodetiming.Figure3-7showsanAVID\napplication.\nNOTE\nTheabovesettingsalterAVIDoutputtiming,butthevideooutputdataisnotforcedtoblack\nleveloutsideoftheAVIDinterval.\n16Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nHSYNCAVID Start AVID StopVBLK Stop\nVBLK Start\nVSYNCAVID Cropped\nAreaActive Video Area TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nFigure3-7.AVIDApplication\n3.14Embedded Syncs\nStandards withembedded syncsinsertSAVandEAVcodesintothedatastream atthebeginning andend\nofhorizontal blanking. ThesecodescontaintheVandFbitsthatalsodefineverticaltiming.FandV\nchangeonEAV.Table3-4givestheformatoftheSAVandEAVcodes.\nHequals1alwaysindicates EAV.Hequals0alwaysindicates SAV.Thealignment ofVandFtotheline\nandfieldcountervariesdepending onthestandard. SeeITU-RBT.656formoreinformation onembedded\nsyncs.\nThePbitsareprotection bits:\nP3=VxorH\nP2=FxorH\nP1=FxorV\nP0=FxorVxorH\nTable3-4.EAVandSAVSequence\n8-BITDATA\nD7(MSB) D6 D5 D4 D3 D2 D1 D0\nPreamble 1 1 1 1 1 1 1 1\nPreamble 0 0 0 0 0 0 0 0\nPreamble 0 0 0 0 0 0 0 0\nStatusword 1 F V H P3 P2 P1 P0\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 17\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.15I2CHostInterface\nTheI2Cstandard consistsoftwosignals,serialinput/output dataline(SDA)andinput/output clockline\n(SCL),whichcarryinformation betweenthedevicesconnected tothebus.Athirdsignal(I2CSEL) isused\nforslaveaddressselection. Although theI2Csystemcanbemultimastered, theTVP5151 decoder\nfunctions onlyasaslavedevice.\nBothSDAandSCLmustbeconnected toapositivesupplyvoltageviaapullupresistor.Whenthebusis\nfree,bothlinesarehigh.Theslaveaddressselectterminal(I2CSEL) enablestheuseoftwoTVP5151\ndecoders tiedtothesameI2Cbus.Atpowerup,thestatusoftheI2CSELispolled.Depending onthe\nwriteandreadaddresses tobeusedfortheTVP5151 decoder, itcaneitherbepulledloworhighthrough\naresistor.Thisterminalismultiplexed withYOUT7andhencemustnotbetieddirectlytogroundor\nIO_DVDD. Table3-6summarizes theterminalfunctions oftheI2C-modehostinterface.\nTable3-5.WriteAddress\nSelection\nI2CSEL WRITEADDRESS\n0 B8h\n1 BAh\nTable3-6.I2CTerminal Description\nSIGNAL TYPE DESCRIPTION\nI2CSEL(YOUT7) I Slaveaddressselection\nSCL I/O(opendrain)Input/output clockline\nSDA I/O(opendrain)Input/output dataline\nDatatransferrateonthebusisupto400kbit/s.Thenumberofinterfaces connected tothebusis\ndependent onthebuscapacitance limitof400pF.ThedataontheSDAlinemustbestableduringthe\nhighperiodoftheSCLexceptforstartandstopconditions. Thehighorlowstateofthedatalinecanonly\nchangewiththeclocksignalontheSCLlinebeinglow.Ahigh-to-low transition ontheSDAlinewhilethe\nSCLishighindicates anI2Cstartcondition. Alow-to-high transition ontheSDAlinewhiletheSCLishigh\nindicates anI2Cstopcondition.\nEverybyteplacedontheSDAmustbeeightbitslong.Thenumberofbyteswhichcanbetransferred is\nunrestricted. Eachbytemustbefollowedbyanacknowledge bit.Theacknowledge-related clockpulseis\ngenerated bytheI2Cmaster.\n18Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.15.1I2CWriteOperation\nDatatransfers occurutilizingthefollowing illustrated formats.\nAnI2Cmasterinitiatesawriteoperation totheTVP5151 decoderbygenerating astartcondition (S)\nfollowedbytheTVP5151 I2Cslaveaddress(seethefollowing illustration), inMSBfirstbitorder,followed\nbya0toindicateawritecycle.Afterreceiving anacknowledge fromtheTVP5151 decoder, themaster\npresentsthesubaddress oftheregister,orthefirstofablockofregistersitwantstowrite,followedbyone\normorebytesofdata,MSBfirst.TheTVP5151 decoderacknowledges eachbyteaftercompletion ofeach\ntransfer.TheI2Cmasterterminates thewriteoperation bygenerating astopcondition (P).\nStep1 0\nI2CStart(master) S\nStep2 7 6 5 4 3 2 1 0\nI2Cslaveaddress(master) 1 0 1 1 1 0 X 0\nStep3 9\nI2CAcknowledge (slave) A\nStep4 7 6 5 4 3 2 1 0\nI2CWriteregisteraddress(master) Addr Addr Addr Addr Addr Addr Addr Addr\nStep5 9\nI2CAcknowledge (slave) A\nStep6 7 6 5 4 3 2 1 0\nI2CWritedata(master) Data Data Data Data Data Data Data Data\n9 Step7(1)\nI2CAcknowledge (slave) A\nStep8 0\nI2CStop(master) P\n(1)Repeatsteps6and7untilalldatahavebeenwritten.\n3.15.2I2CReadOperation\nThereadoperation consistsoftwophases.Thefirstphaseistheaddressphase.Inthisphase,anI2C\nmasterinitiatesawriteoperation totheTVP5151 decoderbygenerating astartcondition (S)followedby\ntheTVP5151 I2Cslaveaddress, inMSBfirstbitorder,followedbya0toindicateawritecycle.After\nreceiving anacknowledge fromtheTVP5151 decoder, themasterpresentsthesubaddress oftheregister\northefirstofablockofregisters itwantstoread.Afterthecycleisacknowledged, themasterterminates\nthecycleimmediately bygenerating astopcondition (P).\nTable3-7.ReadAddress\nSelection\nI2CSEL READADDRESS\n0 B9h\n1 BBh\nThesecondphaseisthedataphase.Inthisphase,anI2Cmasterinitiatesareadoperation tothe\nTVP5151 decoderbygenerating astartcondition followedbytheTVP5151 I2Cslaveaddress(seethe\nfollowing illustration ofareadoperation), inMSBfirstbitorder,followedbya1toindicateareadcycle.\nAfteranacknowledge fromtheTVP5151 decoder, theI2Cmasterreceivesoneormorebytesofdatafrom\ntheTVP5151 decoder. TheI2Cmasteracknowledges thetransferattheendofeachbyte.Afterthelast\ndatabytedesiredhasbeentransferred fromtheTVP5151 decodertothemaster,themastergenerates a\nnotacknowledge followedbyastop.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 19\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.15.2.1 ReadPhase1\nStep1 0\nI2CStart(master) S\nStep2 7 6 5 4 3 2 1 0\nI2Cslaveaddress(master) 1 0 1 1 1 0 X 0\nStep3 9\nI2CAcknowledge (slave) A\nStep4 7 6 5 4 3 2 1 0\nI2CWriteregisteraddress(master) Addr Addr Addr Addr Addr Addr Addr Addr\nStep5 9\nI2CAcknowledge (slave) A\nStep6 0\nI2CStop(master) P\n3.15.2.2 ReadPhase2\nStep7 0\nI2CStart(master) S\nStep8 7 6 5 4 3 2 1 0\nI2Cslaveaddress(master) 1 0 1 1 1 0 X 1\nStep9 9\nI2CAcknowledge (slave) A\nStep10 7 6 5 4 3 2 1 0\nI2CReaddata(slave) Data Data Data Data Data Data Data Data\n9 Step11(1)\nI2CNotAcknowledge (master) A\nStep12 0\nI2CStop(master) P\n(1)Repeatsteps10and11forallbytesread.Masterdoesnotacknowledge thelastreaddatareceived.\n20Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\n5\nXTAL1/OSC\n27.000-MHz\nCrystalCL1\nCL2\nXTAL26RTVP5151\nCLK_IN NC26IO_DVDD10\n5\nXTAL1/OSC\nXTAL26TVP5151\nCLK_IN NC26IO_DVDD10\n1.8 V to 3.3 V\n27.000-MHz\n1.8-V Clock5\nXTAL1/OSC\nXTAL26TVP5151\nCLK_IN26IO_DVDD10\n27.000-MHz\n1.8-V to 3.3-V\nClock\nNC NC1.8 V to 3.3 V 1.8 V to 3.3 V TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.15.2.3 I2CTimingRequirements\nTheTVP5151 decoderrequiresdelaysintheI2Caccesses toaccommodate itsinternalprocessor\'s timing.\nInaccordance withI2Cspecifications, theTVP5151 decoderholdstheI2Cclockline(SCL)lowtoindicate\nthewaitperiodtotheI2Cmaster.IftheI2Cmasterisnotdesigned tocheckfortheI2Cclocklineheld-low\ncondition, thenthemaximum delaysmustalwaysbeinsertedwhererequired. Thesedelaysareofvariable\nlength;maximum delaysareindicated inthefollowing diagram:\nNormalregisterwritingaddresses 00hto8Fh(addresses 90htoFFhdonotrequiredelays).\nSlave\nStart address Ack Subaddress Ack Data(XXh) Ack Wait64µsStop\n(B8h)\nThe64-µsdelayisforallregisters thatdonotrequireareinitialization. Delaysmaybemoreforsome\nregisters.\n3.16ClockCircuits\nAninternalline-locked PLLgenerates thesystemandpixelclocks.A27.000-MHz clockisrequiredto\ndrivethePLL.ThismaybeinputtotheTVP5151 decoder onterminal5(XTAL1), oracrystalof\n27.000-MHz fundamental resonant frequency maybeconnected acrossterminals 5and6(XTAL2).\nFigure3-8showsthereference clockconfigurations. Fortheexample crystalcircuitshown(a\nparallel-resonant crystalwith27.000-MHz fundamental frequency), theexternalcapacitors musthavethe\nfollowing relationship:\nCL1=CL2=2CL–CSTRAY\nwhereCSTRAYistheterminalcapacitance withrespecttoground,andCListhecrystalloadcapacitance\nspecified bythecrystalmanufacturer.\nFigure3-8showsthereference clockconfigurations.\nNOTE:Theresistor(R)inparallelwiththecrystalisrecommended tosupportawiderangeofcrystaltypes.A100-kΩresistor\nmaybeusedformostcrystaltypes.\nFigure3-8.Reference ClockConfigurations\nAnalternate methodtosupplyanexternalsourcewitha1.8-Vto3.3-Vpeak-to-peak levelistopullpin5\n(XTAL1/OSC) lowandconnecta1.8-Vto3.3-Vexternaloscillator clocksourcetopin26,AVID/CLK_IN,\ndepending onwhatIO_DVDD supplyvoltageisused.\nClocksourcefrequency shouldhaveanaccuracy of±50ppm(max).\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 21\nSubmitDocumentation Feedback\nSCLK\nGLCO\n23-Bit Frequency Control\nStart Bit DTO Reset BitMSB\n>128 SCLK\n1 SCLK7 SCLK 23 SCLK\n1 SCLKLSB\n22 21 0TVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.17Genlock Control(GLCO)andRTC\nAGenlockcontrolfunctionisprovided tosupportastandard videoencodertosynchronize itsinternal\ncoloroscillator forproperlyreproduced colorwithunstabletimebase sourcessuchasVCRs.\nThefrequency controlwordoftheinternalcolorsubcarrier digitallytunedoscillator (DTO)andthe\nsubcarrier phaseresetbitaretransmitted viaterminal23(GLCO).Thefrequency controlwordisa23-bit\nbinarynumber.Thefrequency oftheDTOcanbecalculated fromthefollowing equation:\nfdto=(fctrl/223)×fsclk\nwherefdtoisthefrequency oftheDTO,fctrlisthe23-bitDTOfrequency control,andfsclkisthefrequency of\ntheSCLK.\n3.17.1GLCOInterface\nAwriteof1tobit4ofthechrominance controlregisteratI2Csubaddress 1Ahcausesthesubcarrier DTO\nphaseresetbittobesentonthenextscanlineonGLCO.Theactive-low resetbitoccurssevenSCLKs\nafterthetransmission ofthelastbitofDTOfrequency control.Uponthetransmission oftheresetbit,the\nphaseoftheTVP5151 internalsubcarrier DTOisresettozero.\nAGenlockslavedevicecanbeconnected totheGLCOterminalandusestheinformation onGLCOto\nsynchronize itsinternalcolorphaseDTOtoachievecleanlineandcolorlock.\nFigure3-9showsthetimingdiagramoftheGLCOmode.\nFigure3-9.GLCOTiming\n22Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nRTCM\nS\nB\n16 CLKL\nS\nB\n21 0\n128 CLK\n22-Bit f   Frequency Controlsc\nStart\nBit\nReset\nBit2 CLK\n1 CLK2 CLK\n3 CLK1 CLK\nPAL\nSwitch44 CLK TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.17.2RTCMode\nFigure3-10showsthetimingdiagramoftheRTCmode.ClockratefortheRTCmodeisfourtimesslower\nthantheGLCOclockrate.ForColorPLLfrequency control,theupper22bitsareused.Eachfrequency\ncontrolbitistwoclockcycleslong.Theactive-low resetbitoccurssixCLKsafterthetransmission ofthe\nlastbitofPLLfrequency control.\nFigure3-10.RTCTiming\n3.18ResetandPowerDown\nTheRESETB andPDNterminals worktogethertoputtheTVP5151 decoderintooneofthetwomodes.\nTable3-8showstheconfiguration.\nAfterpower-up, thedeviceisinanunknown statewithitsoutputsundefined, untilitreceivesaRESETB\nsignalasdepictedinFigure3-11.AfterRESETB isreleased, outputsSCLKandYOUT0toYOUT7arein\nhigh-impedance stateuntilTVP5151 isinitialized andtheoutputsareactivated.\nNOTE\nI2CSCLandSDAsignalsmustnotchangestateuntiltheTVP5151 resetsequence hasbeen\ncompleted.\nTable3-8.ResetandPower-Down Modes\nPDN RESETB CONFIGURATION\n0 0 Reserved (unknown state)\n0 1 Powersdownthedecoder\n1 0 Resetsthedecoder\n1 1 Normaloperation\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 23\nSubmitDocumentation Feedback\nRESETBNormal Operation\nResetPLL_AVDD\nDVDD\nIO_DVDD\nSDAPDN\nSCLDatat1\nt2\nt3TVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nAfterRESETB isreleased, outputsSCLKandYOUT0toYOUT7arehigh-impedance untilthechipis\ninitialized andtheoutputsareactivated.\nFigure3-11.Power-On ResetTiming\nTable3-9.Power-On ResetTiming\nNO. PARAMETER MINMAXUNIT\nt1Delaytimebetweenpowersuppliesactiveandreset 20 ms\nt2RESETB pulseduration 500 ns\nt3DelaytimebetweenendofresettoI2Cactive 200 µs\n24Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.19ResetSequence\nTable3-10showstheresetsequence oftheTVP5151 pinsstatusduringresettimeandimmediately after\nresettime.\nTable3-10.ResetSequence\nIMMEDIATELY AFTERPINDESCRIPTION DURING RESETBRESETB\nFID/GLCO, HSYNC,INTREQ/GPCL/VBLK, SCLK,VSYNC/PALI, YOUT[6:0] High-impedance High-impedance\nAIP1A,AIP1B,AVID/CLK_IN, RESETB, PDN,SDA,SCL,XTAL1/OSC Input Input\nXTAL2 Output Output\nYOUT7/I2CSEL Input High-impedance\nTVP5151 ispincompatible withTVP5150/A/AM1, andthefollowing differences shouldbeconsidered\nwhenanupgradeisplanned.\n•IO_DVDD supplycanbeanyvoltagefrom1.8Vto3.3V.\n•AVID/CLK_IN isinputduringRESETB. Ifthisinputisusedastheclocksource,XTAL1/OSC pinmust\nbegrounded.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 25\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.20InternalControlRegisters\nTheTVP5151 decoderisinitialized andcontrolled byasetofinternalregistersthatsetalldeviceoperating\nparameters. Communication between theexternalcontroller andtheTVP5151 decoderisthroughI2C.\nTable3-11showsthesummary oftheseregisters. Thereserved registers mustnotbewritten.Reserved\nbitsinthedefinedregistersmustbewrittenwithzeros,unlessotherwise noted.Thedetailedprogramming\ninformation ofeachregisterisdescribed inthefollowing sections.\nTable3-11.Register Summary\nREGISTER ADDRESS DEFAULT R/W(1)\nVideoinputsourceselection #1 00h 00h R/W\nAnalogchannelcontrols 01h 15h R/W\nOperation modecontrols 02h 00h R/W\nMiscellaneous controls 03h 00h R/W\nAutoswitch mask 04h DCh R/W\nMiscellaneous outputcontrols 05h 00h R/W\nColorkillerthreshold control 06h 10h R/W\nLuminance processing control#1 07h 60h R/W\nLuminance processing control#2 08h 00h R/W\nBrightness control 09h 80h R/W\nColorsaturation control 0Ah 80h R/W\nHuecontrol 0Bh 00h R/W\nReserved 0Ch\nOutputsanddataratesselect 0Dh 47h R/W\nLuminance processing control#3 0Eh 00h R/W\nConfiguration sharedpins 0Fh 00h R/W\nReserved 10h\nActivevideocroppingstartpixelMSB 11h 00h R/W\nActivevideocroppingstartpixelLSB 12h 00h R/W\nActivevideocroppingstoppixelMSB 13h 00h R/W\nActivevideocroppingstoppixelLSB 14h 00h R/W\nGenlockandRTC 15h 01h R/W\nHorizontal syncstart 16h 80h R/W\nReserved 17h\nVerticalblankingstart 18h 00h R/W\nVerticalblankingstop 19h 00h R/W\nChrominance control#1 1Ah 0Ch R/W\nChrominance control#2 1Bh 14h R/W\nInterruptresetregisterB 1Ch 00h R/W\nInterruptenableregisterB 1Dh 00h R/W\nInterruptconfiguration registerB 1Eh 00h R/W\nReserved 1Fh-20h\nIndirectRegisterData 21h-22h 00h R/W\nIndirectRegisterAddress 23h 00h R/W\nIndirectRegisterRead/Write Strobe 24h 00h R/W\nReserved 25h-27h\nVideostandard 28h 00h R/W\nReserved 29h–2Bh\nCbgainfactor 2Ch R\n(1)R=Readonly,W=Writeonly,R/W=Readandwrite\n26Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nTable3-11.Register Summary (continued)\nREGISTER ADDRESS DEFAULT R/W(1)\nCrgainfactor 2Dh R\nMacrovision oncounter 2Eh 0Fh R/W\nMacrovision offcounter 2Fh 01h R/W\n656revisionselect 30h 00h R/W\nReserved 31h–7Dh\nPatchWriteAddress 7Eh 00h R/W(2)\nPatchCodeExecute 7Fh 00h R/W(2)\nDeviceIDMSB 80h 51h R\nDeviceIDLSB 81h 51h R\nROMversion 82h 04h R\nRAMversion 83h 00h R\nVerticallinecountMSB 84h R\nVerticallinecountLSB 85h R\nInterruptstatusregisterB 86h R\nInterruptactiveregisterB 87h R\nStatusregister#1 88h R\nStatusregister#2 89h R\nStatusregister#3 8Ah R\nStatusregister#4 8Bh R\nStatusregister#5 8Ch R\nReserved 8Dh\nPatchReadAddress 8Eh 00h R/W(2)\nReserved 8Fh\nClosedcaptiondata 90h–93h R\nWSSdata 94h–99h R\nVPSdata 9Ah–A6h R\nVITCdata A7h–AFh R\nVBIFIFOreaddata B0h R\nTeletextfilterandmask1 B1h–B5h 00h R/W\nTeletextfilterandmask2 B6h–BAh 00h R/W\nTeletextfiltercontrol BBh 00h R/W\nReserved BCh–BFh\nInterruptstatusregisterA C0h 00h R/W\nInterruptenableregisterA C1h 00h R/W\nInterruptconfiguration registerA C2h 04h R/W\nVDPconfiguration RAMdata C3h DCh R/W\nVDPconfiguration RAMaddresslowbyte C4h 0Fh R/W\nVDPconfiguration RAMaddresshighbyte C5h 00h R/W\nVDPstatus C6h R\nFIFOwordcount C7h R\nFIFOinterruptthreshold C8h 80h R/W\nFIFOreset C9h 00h W\nLinenumberinterrupt CAh 00h R/W\nPixelalignment LSB CBh 4Eh R/W\nPixelalignment HSB CCh 00h R/W\nFIFOoutputcontrol CDh 01h R/W\n(2)Theseregistersareusedforfirmwarepatchcodeandshouldnotbewrittentoorreadfromduring\nnormaloperation.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 27\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nTable3-11.Register Summary (continued)\nREGISTER ADDRESS DEFAULT R/W(1)\nReserved CEh\nFullfieldenable CFh 00h R/W\nD0h 00hLinemode R/WD1h–FBh FFh\nFullfieldmode FCh 7Fh R/W\nReserved FDh–FFh\n28Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21Register Definitions\n3.21.1VideoInputSourceSelection #1Register\nAddress 00h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Blackoutput Reserved Channel1 S-video\nsource selection\nselection\nChannel1sourceselection\n0=AIP1Aselected(default)\n1=AIP1Bselected\nTable3-12.AnalogChannel andVideoModeSelection\nADDRESS 00\nINPUT(S) SELECTED\nBIT1BIT0\nAIP1A(default) 0 0\nComposite\nAIP1B 1 0\nAIP1A(luminance),S-Video x 1AIP1B(chrominance)\nBlackoutput\n0=Normaloperation (default)\n1=Forceblackscreenoutput(outputssynchronized)\na.Forcedto10hinnormalmode\nb.Forcedto01hinextended mode\n3.21.2AnalogChannel Controls Register\nAddress 01h\nDefault 15h\n7 6 5 4 3 2 1 0\nReserved 1 0 1 Automatic gaincontrol\nAutomatic gaincontrol(AGC)\n00=AGCdisabled(fixedgainvalue)\n01=AGCenabled(default)\n10=Reserved\n11=AGCfrozentothepreviously setvalue\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 29\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.3Operation ModeControls Register\nAddress 02h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Colorburst TV/VCRmode Composite Color Luminance Power-down\nreference peakdisable subcarrier PLLpeakdisable mode\nenable frozen\nColorburstreference enable\n0=Colorburstreference forAGCdisabled(default)\n1=Colorburstreference forAGCenabled(notrecommended)\nTV/VCRmode\n00=Automatic modedetermined bytheinternaldetection circuit(default)\n01=Reserved\n10=VCR(nonstandard video)mode\n11=TV(standard video)mode\nWithautomatic detection enabled, unstable ornonstandard syncsontheinputvideoforcesthe\ndetectorintotheVCRmode.Thisturnsoffthecombfiltersandturnsonthechrominance trapfilter.\nComposite peakdisable\n0=Composite peakprotection enabled(default)\n1=Composite peakprotection disabled\nColorsubcarrier PLLfrozen\n0=Colorsubcarrier PLLincrements bytheinternally generated phaseincrement (default). GLCOpin\noutputsthefrequency increment.\n1=Colorsubcarrier PLLstopsoperating. GLCOpinoutputsthefrozenfrequency increment.\nLuminance peakdisable\n0=Luminance peakprocessing enabled(default)\n1=Luminance peakprocessing disabled\nPower-down mode\n0=Normaloperation (default)\n1=Power-down mode.A/Dsareturnedoffandinternalclocksarereducedtominimum.\n30Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.4Miscellaneous Controls Register\nAddress 03h\nDefault 00h\n7 6 5 4 3 2 1 0\nVBLK/GPCL GPCLlogicINTREQ/GPCL/ Lockstatus YCbCroutput HSYNC, Vertical Clockoutput\nselect level VBLKoutput (HVLK) enable VSYNC/PALI, blankingon/off enable\nenable (TVPOE) AVID,\nFID/GLCO\noutputenable\nVBLK/GPCL functionselect(affectsINTREQ/GPCL/VBLK outputonlyifbit1ofI2Cregister0Fhissetto\n1)\n0=GPCL(default)\n1=VBLK\nGPCLlogiclevel(affectsINTREQ/GPCL/VBLK outputonlyifbit7issetto0andbit5issetto1)\n0=GPCLissettologic0(default)\n1=GPCLissettologic1\nINTREQ/GPCL/VBLK outputenable\n0=Outputdisabled(default)\n1=Outputenabled(recommended)\nNote:TheINTREQ/GPCL/VBLK output(pin27)mustneverbeleftfloating.Anexternal10-kΩpulldown\nresistorisrequiredwhentheINTREQ/GPCL/VBLK outputisdisabled(bit5ofI2Cregister03hissetto0).\nLockstatus(HVLK)(configured alongwithregister0Fh,seeFigure3-12fortherelationship betweenthe\nconfiguration sharedpins)\n0=Terminal VSYNC/PALI outputsthePALindicator(PALI)signalandterminalFID/GLCO outputsthe\nfieldID(FID)signal(default)(ifterminals areconfigured tooutputPALIandFIDinregister0Fh).\n1=Terminal VSYNC/PALI outputsthehorizontal lockindicator (HLK)andterminalFIDoutputsthe\nverticallockindicator(VLK)(ifterminals areconfigured tooutputPALIandFIDinregister0Fh).\nTheseareadditional functions thatareprovidedforeaseofuse.\nYCbCroutputenable\n0=YOUT[7:0] highimpedance (default)\n1=YOUT[7:0] active\nNote:YOUT7mustbepulledhighorlowfordeviceI2Caddressselect.\nHSYNC,VSYNC/PALI, activevideoindicator(AVID),andFID/GLCO outputenables\n0=HSYNC,VSYNC/PALI, AVID,andFID/GLCO arehigh-impedance (default).\n1=HSYNC,VSYNC/PALI, AVID,andFID/GLCO areactive.\nNote:ThiscontrolbithasnoeffectontheFID/GLCO outputwhenitisprogrammed tooutputthe\nGLCOsignal(seebit3ofaddress0Fh).WhentheGLCOsignalisselected, theFID/GLCO outputis\nalwaysactive.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 31\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nVerticalblankingon/off\n0=Verticalblanking(VBLK)off(default)\n1=Verticalblanking(VBLK)on\nClockoutputenable\n0=SCLKoutputishighimpedance (default)\n1=SCLKoutputisenabled\nNote:Toachievelowestpowerconsumption, outputsplacedinthehigh-impedance stateshouldnotbe\nleftfloating.A10-kΩpulldown resistorisrecommended ifnotdrivenexternally.\nNote:Whenenablingtheoutputs,ensuretheclockoutputisnotaccidently disabled.\nTable3-13.DigitalOutputControl(1)\nREGISTER 03h,BIT3REGISTER C2h,BIT2YCbCrOUTPUT NOTES(TVPOE) (VDPOE)\n0 X Highimpedance AfterbothYCbCroutputenablebitsareprogrammed\nX 0 Highimpedance AfterbothYCbCroutputenablebitsareprogrammed\n1 1 Active AfterbothYCbCroutputenablebitsareprogrammed\n(1)VDPOEdefaultis1,andTVPOEdefaultis0.\n32Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nPin 24 M\nU\nXPALI 0\n1PALI/HLK/HVLK\nHLK/HVLKM\nU\nXVSYNC 0\n1VSYNC/PALI/HLK/HVLK0F(Bit 2)\nVSYNC/PALI\nPin 23M\nU\nXVLK/HVLK 1\n0\nGLCOFIDM\nU\nXFID/VLK/HVLK 0\n1FID/GLCO/VLK/HVLK\n0F(Bit 3)\nFID/GLCO 03(Bit 4)\nHVLKM\nU\nXHLK 0\n1 HVLK0F(Bit 4)\nLOCK24B\nM\nU\nXHVLK 1\n0 VLK\n0F(Bit 6)\nLOCK23\nPin 27M\nU\nXVBLK 1\n0\nINTREQGPCLM\nU\nXVBLK/GPCL 1\n0INTREQ/GPCL/VBLK\n03(Bit 7)\nVBKO 0F(Bit 1)\nINTREQ/GPCL/VBLK03(Bit 5)\nGPCL Ouput Enable TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nFigure3-12.Configuration SharedPins\nNOTE\nAlsoseetheconfiguration sharedpinsregisteratsubaddress 0Fh.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 33\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.5Autoswitch MaskRegister\nAddress 04h\nDefault DCh\n7 6 5 4 3 2 1 0\nReserved SEC_OFF N4.43_OFF PALN_OFF PALM_OFF Reserved\nN4.43_OFF\n0=NTSC4.43 isunmasked fromtheautoswitch process.Autoswitch doesswitchtoNTSC4.43.\n1=NTSC4.43 ismaskedfromtheautoswitch process. Autoswitch doesnotswitchtoNTSC4.43\n(default).\nPALN_OFF\n0=PAL-Nisunmasked fromtheautoswitch process.Autoswitch doesswitchtoPAL-N.\n1=PAL-Nismaskedfromtheautoswitch process.Autoswitch doesnotswitchtoPAL-N(default).\nPALM_OFF\n0=PAL-Misunmasked fromtheautoswitch process.Autoswitch doesswitchtoPAL-M.\n1=PAL-Mismaskedfromtheautoswitch process.Autoswitch doesnotswitchtoPAL-M(default).\nSEC_OFF\n0=SECAMisunmasked fromtheautoswitch process.Autoswitch doesswitchtoSECAM(default).\n1=SECAMismaskedfromtheautoswitch process.Autoswitch doesnotswitchtoSECAM.\n3.21.6Miscellaneous OutputControls Register\nAddress 05h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved AVID/CLK_IN Reserved\nfunctionselect\nAVID/CLK_IN functionselect\n0=CLK_IN(default)\n1=AVID\n3.21.7ColorKillerThreshold ControlRegister\nAddress 06h\nDefault 10h\n7 6 5 4 3 2 1 0\nReserved Automatic colorkiller Colorkillerthreshold\nAutomatic colorkiller\n00=Automatic mode(default)\n01=Reserved\n10=Colorkillerenabled,CbCrterminals forcedtoazerocolorstate\n11=Colorkillerdisabled\nColorkillerthreshold\n11111=–30dB(minimum)\n10000=–24dB(default)\n00000=–18dB(maximum)\n34Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.8Luminance Processing Control#1Register\nAddress 07h\nDefault 60h\n7 6 5 4 3 2 1 0\n2×luminance Pedestal notDisablerawLuminance bypass Luminance signaldelaywithrespecttochrominance signal\noutputenable present header enabledduring\nverticalblanking\n2×luminance outputenable\n0=Outputdependsonbit4,luminance bypassenabledduringverticalblanking(default).\n1=Outputs2xluminance samplesduringtheentireframe.Thisbittakesprecedence overbit4.\nPedestal notpresent\n0=7.5IREpedestalispresentontheanalogvideoinputsignal.\n1=Pedestal isnotpresentontheanalogvideoinputsignal(default).\nDisablerawheader\n0=Insert656ancillaryheadersforrawdata\n1=Disable656ancillaryheadersandinsteadforcedummyones(40h)(default)\nLuminance bypassenabledduringverticalblanking\n0=Disabled. Ifbit7,2×luminance outputenable,is0,normalluminance processing occursand\nYCbCrsamplesareoutputduringtheentireframe(default).\n1=Enabled. Ifbit7,2×luminance outputenable,is0,normalluminance processing occursand\nYCbCrsamples areoutputduringVACTIVE and2×luminance samples areoutputduringVBLK.\nLuminance bypassoccursforthedurationoftheverticalblankingasdefinedbyregisters18hand19h.\nLuminance bypassoccursforthedurationoftheverticalblankingasdefinedbyregisters18hand19h.\nLuminance signaldelaywithrespecttochrominance signalinpixelclockincrements (range–8to+7pixel\nclocks)\n1111=–8pixelclocksdelay\n1011=–4pixelclocksdelay\n1000=–1pixelclocksdelay\n0000=0pixelclocksdelay(default)\n0011=+3pixelclocksdelay\n0111=+7pixelclocksdelay\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 35\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.9Luminance Processing Control#2Register\nAddress 08h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Luminance filter Reserved Peakinggain MacAGCcontrol\nselect\nLuminance filterselect\n0=Luminance combfilterenabled(default)\n1=Luminance chrominance trapfilterenabled\nPeakinggain(sharpness)\n00=0(default)\n01=0.5\n10=1\n11=2\nInformation onpeakingfrequency:\nITU-RBT.601sampling rate:allstandards\nPeakingcenterfrequency is2.6MHz.\nMacAGCcontrol\n00=Automode\n01=Automode\n10=ForceMacrovision AGCpulsedetection off\n11=ForceMacrovision AGCpulsedetection on\n3.21.10 Brightness ControlRegister\nAddress 09h\nDefault 80h\n7 6 5 4 3 2 1 0\nBrightness[7:0]\nBrightness[7:0]: ThisregisterworksforCVBSandS-Videoluminance.\n11111111=255(bright)\n10000000=128(default)\n00000000=0(dark)\nTheoutputblacklevelrelativetothenominalblacklevel(64outof1024)asafunctionofthe\nBrightness[7:0] settingisasfollows:\nBlackLevel=nominal_black_level +(Brightness[7:0] –128)\n36Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.11 ColorSaturation ControlRegister\nAddress 0Ah\nDefault 80h\n7 6 5 4 3 2 1 0\nSaturation[7:0]\nSaturation[7:0]: ThisregisterworksforCVBSandS-Videochrominance.\n11111111=255(maximum)\n10000000=128(default)\n00000000=0(nocolor)\nThetotalchrominance gainrelativetothenominalchrominance gainasafunctionoftheSaturation[7:0]\nsettingisasfollows:\nChrominance Gain=nominal_chrominance_gain ×(Saturation[7:0] /128)\n3.21.12 HueControlRegister\nAddress 0Bh\nDefault 00h\n7 6 5 4 3 2 1 0\nHuecontrol\nHuecontrol(doesnotapplytoSECAM)\n01111111=+180degrees\n00000000=0degrees(default)\n10000000=–180degrees\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 37\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.13 OutputsandDataRatesSelectRegister\nAddress 0Dh\nDefault 47h\n7 6 5 4 3 2 1 0\nReserved YCbCroutput CbCrcode YCbCrdatapathbypass YCbCroutputformat\ncoderange format\nYCbCroutputcoderange\n0=ITU-RBT.601codingrange(Yrangesfrom16to235.UandVrangefrom16to240)\n1=Extended codingrange(Y,U,andVrangefrom1to254)(default)\nCbCrcodeformat\n0=Offsetbinarycode(2scomplement +128)(default)\n1=Straightbinarycode(2scomplement)\nYCbCrdatapathbypass\n00=Normaloperation (default)\n01=Decimation filteroutputconnects directlytotheYCbCroutputpins.Thisdataissimilartothe\ndigitizedcomposite data,buttheHBLANK areaisreplacedwithITU-RBT.656digitalblanking.\n10=Digitized composite (ordigitized S-videoluminance). A/Doutputconnects directlytoYCbCr\noutputpins.\n11=Reserved\nYCbCroutputformat\n000=8-bit4:2:2YCbCrwithdiscretesyncoutput\n001=Reserved\n010=Reserved\n011=Reserved\n100=Reserved\n101=Reserved\n110=Reserved\n111=8-bitITU-RBT.656interfacewithembedded syncoutput(default)\n38Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.14 Luminance Processing Control#3Register\nAddress 0Eh\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Luminance trapfilterselect\nLuminance filterstopbandbandwidth (MHz)\n00=Nonotch(default)\n01=Notch1\n10=Notch2\n11=Notch3\nLuminance filterselect[1:0]selectsoneofthefourchrominance trap(notch)filterstoproduceluminance\nsignalbyremoving thechrominance signalfromthecomposite videosignal.Thestopband ofthe\nchrominance trapfilteriscentered atthechrominance subcarrier frequency withstopband bandwidth\ncontrolled bythetwocontrolbits.Seethefollowing tableforthestopband bandwidths. TheWCFbitis\ncontrolled inthechrominance control#2register,seeSection3.21.25.\nNTSC/PAL/SECAMWCF FILTERSELECTITU-RBT.601\n00 1.2244\n01 0.8782\n0\n10 0.7297\n11 0.4986\n00 1.4170\n01 1.0303\n1\n10 0.8438\n11 0.5537\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 39\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.15 Configuration SharedPinsRegister\nAddress 0Fh\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved LOCK23 Reserved LOCK24B FID/GLCO VSYNC/PALI INTREQ/ Reserved, must\nGPCL/VBLK besetto0\nLOCK23(pin23)functionselect\n0=FID(default,ifbit3isselectedtooutputFID)\n1=Lockindicator(indicates whetherthedeviceislockedvertically)\nLOCK24B (pin24)functionselect\n0=PALI(default,ifbit2isselectedtooutputPALI)\n1=Lockindicator(indicates whetherthedeviceislockedhorizontally)\nFID/GLCO (pin23)functionselect(alsoseeregister03hforenhanced functionality)\n0=FID(default)\n1=GLCO\nVSYNC/PALI (pin24)functionselect(alsoseeregister03hforenhanced functionality)\n0=VSYNC(default)\n1=PALI\nINTREQ/GPCL/VBLK (pin27)functionselect\n0=INTREQ(default)\n1=GPCLorVBLKdepending onbit7ofregister03h\nSeeFigure3-12fortherelationship betweentheconfiguration sharedpins.\n3.21.16 ActiveVideoCropping StartPixelMSBRegister\nAddress 11h\nDefault 00h\n7 6 5 4 3 2 1 0\nAVIDstartpixelMSB[9:2]\nActivevideocroppingstartpixelMSB[9:2],setthisregisterfirstbeforesettingregister12h.TheTVP5151\ndecoderupdatestheAVIDstartvaluesonlywhenregister12hiswrittento.Thisstartpixelvalueisrelative\ntothedefaultvaluesoftheAVIDstartpixel.\n40Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.17 ActiveVideoCropping StartPixelLSBRegister\nAddress 12h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved AVIDactive AVIDstartpixelLSB[1:0]\nAVIDactive\n0=AVIDoutactiveinVBLK(default)\n1=AVIDoutinactiveinVBLK\nActivevideocropping startpixelLSB[1:0]:TheTVP5151 decoderupdatestheAVIDstartvaluesonly\nwhenthisregisteriswrittento.\nAVIDstart[9:0](combined registers11hand12h)\n0111111111=511\n0000000001=1\n0000000000=0(default)\n1111111111=–1\n1000000000=–512\n3.21.18 ActiveVideoCropping StopPixelMSBRegister\nAddress 13h\nDefault 00h\n7 6 5 4 3 2 1 0\nAVIDstoppixelMSB[9:2]\nActivevideocropping stoppixelMSB[9:2],setthisregisterfirstbeforesettingtheregister14h.The\nTVP5151 decoderupdatestheAVIDstopvaluesonlywhenregister14hiswrittento.Thisstoppixelvalue\nisrelativetothedefaultvaluesoftheAVIDstoppixel.\n3.21.19 ActiveVideoCropping StopPixelLSBRegister\nAddress 14h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved AVIDstoppixelLSB\nActivevideocroppingstoppixelLSB[1:0]:Thenumberofpixelsofactivevideomustbeanevennumber.\nTheTVP5151 decoderupdatestheAVIDstopvaluesonlywhenthisregisteriswrittento.\nAVIDstop[9:0](combined registers13hand14h)\n0111111111=511\n0000000001=1\n0000000000=0(default)(seeFigure3-6andFigure3-7)\n1111111111=–1\n1000000000=–512\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 41\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.20 Genlock andRTCRegister\nAddress 15h\nDefault 01h\n7 6 5 4 3 2 1 0\nReserved F/Vbitcontrol Reserved GLCO/RTC\nF/Vbitcontrol\nBIT5 BIT4 NUMBER OFLINES FBIT VBIT\nStandard ITU-RBT.656 ITU-RBT.656\n0 0Nonstandard even Forceto1 Switchatfieldboundary\nNonstandard odd Toggles Switchatfieldboundary\nStandard ITU-RBT.656 ITU-RBT.656\n0 1\nNonstandard Toggles Switchatfieldboundary\nStandard ITU-RBT.656 ITU-RBT.656\n1 0\nNonstandard Pulsemode Switchatfieldboundary\n1 1Illegal\nGLCO/RTC. Thefollowing tableshowsthedifferentmodes.\nBIT2 BIT1 BIT0GENLOCK/RTC MODE\n0 X 0GLCO\nRTCoutputmode00 X 1(default)\n1 X 0GLCO\n1 X 1RTCoutputmode1\nAllothervaluesarereserved.\nFigure3-9showsthetimingofGLCO,andFigure3-10showsthetimingofRTC.\n3.21.21 Horizontal SyncStartRegister\nAddress 16h\nDefault 80h\n7 6 5 4 3 2 1 0\nHSYNCstart\nHorizontal sync(HSYNC) start\n11111111=–127×4pixelclocks\n11111110=–126×4pixelclocks\n10000001=–1×4pixelclocks\n10000000=0pixelclocks(default)\n01111111=1×4pixelclocks\n01111110=2×4pixelclocks\n00000000=128×4pixelclocks\n42Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nUBT.656 EAV Code\nYOUT[7:0]\nHSYNCYVYF\nF0\n00\n0X\nY8\n01\n08\n01\n0F\nF0\n00\n0X\nYUY\nAVID\n128 SCLK\nNhbhs\nNhbStart of\nDigital LineStart of Digital\nActive LineBT.656 SAV Code TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nFigure3-13.Horizontal Sync\nTable3-14.ClockDelays\n(SCLKs)\nSTANDARD Nhbhs Nhb\nNTSC 28 272\nPAL 32 284\nSECAM 32 284\nDetailedtiminginformation isalsoavailable inSection3.12.\n3.21.22 VerticalBlanking StartRegister\nAddress 18h\nDefault 00h\n7 6 5 4 3 2 1 0\nVerticalblankingstart\nVerticalblanking(VBLK)start\n01111111=127linesafterstartofverticalblankinginterval\n00000001=1lineafterstartofverticalblankinginterval\n00000000=Sametimeasstartofverticalblankinginterval(default)(seeFigure3-5)\n11111111=1linebeforestartofverticalblankinginterval\n10000000=128linesbeforestartofverticalblankinginterval\nVerticalblankingisadjustable withrespecttothestandard verticalblankingintervals. Thesettinginthis\nregisterdetermines thetimingoftheINTREQ/GPCL/VBLK signalwhenitisconfigured tooutputvertical\nblank(seeregister03h).Thesettinginthisregisteralsodetermines thedurationoftheluminance bypass\nfunction(seeregister07h).\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 43\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.23 VerticalBlanking StopRegister\nAddress 19h\nDefault 00h\n7 6 5 4 3 2 1 0\nVerticalblankingstop\nVerticalblanking(VBLK)stop\n01111111=127linesafterstopofverticalblankinginterval\n00000001=1lineafterstopofverticalblankinginterval\n00000000=Sametimeasstopofverticalblankinginterval(default)(seeFigure3-5)\n11111111=1linebeforestopofverticalblankinginterval\n10000000=128linesbeforestopofverticalblankinginterval\nVerticalblankingisadjustable withrespecttothestandard verticalblankingintervals. Thesettinginthis\nregisterdetermines thetimingoftheINTREQ/GPCL/VBLK signalwhenitisconfigured tooutputvertical\nblank(seeregister03h).Thesettinginthisregisteralsodetermines thedurationoftheluminance bypass\nfunction(seeregister07h).\n3.21.24 Chrominance Control#1Register\nAddress 1Ah\nDefault 0Ch\n7 6 5 4 3 2 1 0\nReserved ColorPLLresetChrominance Chrominance Automatic colorgaincontrol\nadaptivecomb combfilter\nfilterenable enable(CE)\n(ACE)\nColorPLLreset\n0=ColorPLLnotreset(default)\n1=ColorPLLreset\nWhena1iswrittentothisbit,thecolorPLLphaseisresettozeroandthesubcarrier PLLphasereset\nbitistransmitted onterminal23(GLCO)onthenextline(NTSCorPAL).\nChrominance adaptivecombfilterenable(ACE)\n0=Disable\n1=Enable(default)\nChrominance combfilterenable(CE)\n0=Disable\n1=Enable(default)\nAutomatic colorgaincontrol(ACGC)\n00=ACGCenabled(default)\n01=Reserved\n10=ACGCdisabled\n11=ACGCfrozentothepreviously setvalue\n44Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.25 Chrominance Control#2Register\nAddress 1Bh\nDefault 14h\n7 6 5 4 3 2 1 0\nReserved WCF Chrominance filterselect\nWideband chrominance filter(WCF)\n0=Disable\n1=Enable(default)\nChrominance lowpassfilterselect\n00=Nonotch(default)\n01=Notch1\n10=Notch2\n11=Notch3\nChrominance outputbandwidth (MHz)\nNTSC/PAL/SECAMWCF FILTERSELECTITU-RBT.601\n00 1.2214\n01 0.8782\n0\n10 0.7297\n11 0.4986\n00 1.4170\n01 1.0303\n1\n10 0.8438\n11 0.5537\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 45\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.26 Interrupt ResetRegister B\nAddress 1Ch\nDefault 00h\n7 6 5 4 3 2 1 0\nSoftware Macrovision Reserved FieldrateLinealternation Colorlock H/Vlock TV/VCR\ninitialization detectchanged changedresetchangedresetchangedresetchangedresetchangedreset\nreset reset\nInterruptresetregisterBisusedbytheexternalprocessor toresettheinterruptstatusbitsininterrupt\nstatusregisterB.Bitsloadedwitha1allowthecorresponding interruptstatusbittoresetto0.Bitsloaded\nwitha0havenoeffectontheinterruptstatusbits.\nSoftware initialization reset\n0=Noeffect(default)\n1=Resetsoftwareinitialization bit\nMacrovision detectchangedreset\n0=Noeffect(default)\n1=ResetMacrovision detectchangedbit\nFieldratechangedreset\n0=Noeffect(default)\n1=Resetfieldratechangedbit\nLinealternation changedreset\n0=Noeffect(default)\n1=Resetlinealternation changedbit\nColorlockchangedreset\n0=Noeffect(default)\n1=Resetcolorlockchangedbit\nH/Vlockchangedreset\n0=Noeffect(default)\n1=ResetH/Vlockchangedbit\nTV/VCRchanged reset[TV/VCR modeisdetermined bycounting thetotalnumberoflines/frame. The\nmodeswitchestoVCRfornonstandard numberoflines]\n0=Noeffect(default)\n1=ResetTV/VCRchangedbit\n46Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.27 Interrupt EnableRegister B\nAddress 1Dh\nDefault 00h\n7 6 5 4 3 2 1 0\nSoftware Macrovision Reserved FieldrateLinealternation Colorlock H/Vlock TV/VCR\ninitialization detectchanged changed changed changed changed changed\noccurred\nInterruptenableregisterBisusedbytheexternalprocessor tomaskunnecessary interruptsourcesfor\ninterruptB.Bitsloadedwitha1allowthecorresponding interruptcondition togenerate aninterruptonthe\nexternal pin.Conversely, bitsloadedwithzerosmaskthecorresponding interrupt condition from\ngenerating aninterruptontheexternalpin.Thisregisteronlyaffectstheexternalpin,itdoesnotaffectthe\nbitsintheinterruptstatusregister.Agivencondition cansettheappropriate bitinthestatusregisterand\nnotcauseaninterruptontheexternalpin.Todetermine ifthisdeviceisdrivingtheinterruptpineither\nANDinterruptstatusregisterBwithinterruptenableregisterBorcheckthestateofinterruptBinthe\ninterruptBactiveregister.\nSoftware initialization occurred\n0=Disabled (default)\n1=Enabled\nMacrovision detectchanged\n0=Disabled (default)\n1=Enabled\nFieldratechanged\n0=Disabled (default)\n1=Enabled\nLinealternation changed\n0=Disabled (default)\n1=Enabled\nColorlockchanged\n0=Disabled (default)\n1=Enabled\nH/Vlockchanged\n0=Disabled (default)\n1=Enabled\nTV/VCRchanged\n0=Disabled (default)\n1=Enabled\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 47\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.28 Interrupt Configuration Register B\nAddress 1Eh\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Interrupt\npolarityB\nInterruptpolarityB\n0=InterruptBisactivelow(default).\n1=InterruptBisactivehigh.\nInterruptpolarityBmustbethesameasinterruptpolarityAofInterruptConfiguration RegisterAat\nAddressC2h.\nInterruptConfiguration RegisterBisusedtoconfigure thepolarityofinterruptBontheexternalinterrupt\npin.Whentheinterrupt Bisconfigured foractivelow,thepinisdrivenlowwhenactiveandhigh\nimpedance wheninactive(open-drain). Conversely, whentheinterruptBisconfigured foractivehigh,itis\ndrivenhighforactiveanddrivenlowforinactive.\nNote:Anexternalpullupresistor(4.7kΩto10kΩ)isrequiredwhenthepolarityoftheexternalinterrupt\nterminal(pin27)isconfigured asactivelow.\n3.21.29 IndirectRegister Data\nAddress 21h-22h\nDefault 00h\nAddress 7 6 5 4 3 2 1 0\n22h Data[15:8]\n21h Data[7:0]\nI2Cregisters 21hand22hcanbeusedtowritedatatoorreaddatafromindirectregisters. SeeI2C\nregisters23hand24h.\n3.21.30 IndirectRegister Address\nAddress 23h\nDefault 00h\n7 6 5 4 3 2 1 0\nADDR[7:0]\nADDR[7:0] =LSBofindirectaddress\n48Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.31 IndirectRegister Read/Write Strobe\nAddress 24h\nDefault 00h\n7 6 5 4 3 2 1 0\nR/W[7:0]\nThisregisterselectsthemostsignificant bitsoftheindirectregisteraddressandperforms eitheran\nindirectreadorwriteoperation. DatawillbewrittenfromarereadtoIndirectRegister Dataregisters\n21h-22h.\nR/W[7:0]:\n01h=readfrom00h-1FFh addressbank\n02h=writeto00h-1FFh addressbank\n03h=readfrom200h-3FFh addressbank\n04h=writeto200h-3FFh addressbank\n05h=readfrom300h-3FFh addressbank\n06h=writeto300h-3FFh addressbank\n3.21.32 VideoStandard Register\nAddress 28h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Videostandard\nVideostandard\n0000=Autoswitch mode(default)\n0001=Reserved\n0010=(M,J)NTSCITU-RBT.601\n0011=Reserved\n0100=(B,G,H,I,N)PALITU-RBT.601\n0101=Reserved\n0110=(M)PALITU-RBT.601\n0111=Reserved\n1000=(Combination-N) PALITU-RBT.601\n1001=Reserved\n1010=NTSC4.43ITU-RBT.601\n1011=Reserved\n1100=SECAMITU-RBT.601\nWiththeautoswitch coderunning,theapplication canforcethedevicetooperateinaparticular video\nstandard modebywritingtheappropriate valueintothisregister.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 49\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.33 CbGainFactorRegister\nAddress 2Ch\n7 6 5 4 3 2 1 0\nCbgainfactor\nThisisaread-only registerthatprovidesthegainappliedtotheCbintheYCbCrdatastream.\n3.21.34 CrGainFactorRegister\nAddress 2Dh\n7 6 5 4 3 2 1 0\nCrgainfactor\nThisisaread-only registerthatprovidesthegainappliedtotheCrintheYCbCrdatastream.\n3.21.35 Macrovision OnCounterRegister\nAddress 2Eh\nDefault 0Fh\n7 6 5 4 3 2 1 0\nMacrovision oncounter\nThisregisterallowstheusertodetermine howmanyconsecutive framesinwhichtheMacrovision AGC\npulsesaredetectedbeforethedecoderdecidesthattheMacrovision AGCpulsesarepresent.\n3.21.36 Macrovision OffCounterRegister\nAddress 2Fh\nDefault 01h\n7 6 5 4 3 2 1 0\nMacrovision offcounter\nThisregisterallowstheusertodetermine howmanyconsecutive framesinwhichtheMacrovision AGC\npulsesarenotdetectedbeforethedecoderdecidesthattheMacrovision AGCpulsesarenotpresent.\n3.21.37 656Revision SelectRegister\nAddress 30h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved 656revision\nselect\n656revisionselect\n0=AdherestoITU-RBT.656.4 andBT.656.5 timing(default)\n1=AdherestoITU-RBT.656.3 timing\n50Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.38 PatchWriteAddress\nAddress 7Eh\nDefault 00h\n7 6 5 4 3 2 1 0\nR/W[7:0]\nThisregisterisusedfordownloading firmwarepatchcode.Pleaserefertothepatchloadapplication note\nformoredetail.Thisregistermustnotbewrittentoorreadfromduringnormaloperation.\n3.21.39 PatchCodeExecute\nAddress 7Fh\nDefault 00h\n7 6 5 4 3 2 1 0\nR/W[7:0]\nWritingtothisregisterfollowing afirmwarepatchloadrestartstheCPUandinitiatesexecution ofthepatch\ncode.Thisregistermustnotbewrittentoorreadfromduringnormaloperation.\n3.21.40 MSBofDeviceIDRegister\nAddress 80h\nDefault 51h\n7 6 5 4 3 2 1 0\nMSBofdeviceID\nThisregisteridentifies theMSBofthedeviceID.Value=51h.\n3.21.41 LSBofDeviceIDRegister\nAddress 81h\nDefault 51h\n7 6 5 4 3 2 1 0\nLSBofdeviceID\nThisregisteridentifies theLSBofthedeviceID.Value=51h.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 51\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.42 ROMVersionRegister\nAddress 82h\nDefault 04h\n7 6 5 4 3 2 1 0\nROMversion[7:0]\nROMVersion[7:0]:Thisregisteridentifies theROMcoderevisionnumber.\n3.21.43 RAMVersionRegister\nAddress 83h\nDefault 00h\n7 6 5 4 3 2 1 0\nRAMversion[7:0]\nRAMVersion[7:0]:Thisregisteridentifies theRAMcoderevisionnumber.\nExample:\nPatchRelease=v01.25\nROMVersion=01h\nRAMVersion=25h\nNote:Useofthelatestpatchreleaseishighlyrecommended.\n3.21.44 VerticalLineCountMSBRegister\nAddress 84h\n7 6 5 4 3 2 1 0\nReserved VerticallinecountMSB\nVerticallinecountbits[9:8]\n3.21.45 VerticalLineCountLSBRegister\nAddress 85h\n7 6 5 4 3 2 1 0\nVerticallinecountLSB\nVerticallinecountbits[7:0]\nRegisters 84hand85hcanbereadandcombined toextractthedetectednumberoflinesperframe.This\ncanbeusedwithnonstandard videosignalssuchasaVCRinfast-forward orrewindmodesto\nsynchronize thedownstream videocircuitry.\n52Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.46 Interrupt StatusRegister B\nAddress 86h\n7 6 5 4 3 2 1 0\nSoftware Macrovision Reserved FieldrateLinealternation Colorlock H/Vlock TV/VCR\ninitialization detectchanged changed changed changed changed changed\nSoftware initialization\n0=Software initialization isnotready.\n1=Software initialization isready.\nMacrovision detectchanged\n0=Macrovision detectstatushasnotchanged.\n1=Macrovision detectstatushaschanged.\nFieldratechanged\n0=Fieldratehasnotchanged.\n1=Fieldratehaschanged.\nLinealternation changed\n0=Linealteration hasnotchanged.\n1=Linealternation haschanged.\nColorlockchanged\n0=Colorlockstatushasnotchanged.\n1=Colorlockstatushaschanged.\nH/Vlockchanged\n0=H/Vlockstatushasnotchanged.\n1=H/Vlockstatushaschanged.\nTV/VCRchanged\n0=TV/VCRstatushasnotchanged.\n1=TV/VCRstatushaschanged.\nInterruptstatusregisterBispolledbytheexternalprocessor todetermine theinterruptsourceforinterrupt\nB.Afteraninterrupt condition isset,itcanberesetbywritingtotheinterrupt resetregisterBat\nsubaddress 1Chwitha1intheappropriate bit.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 53\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.47 Interrupt ActiveRegister B\nAddress 87h\n7 6 5 4 3 2 1 0\nReserved InterruptB\nInterruptB\n0=InterruptBisnotactiveontheexternalterminal(default).\n1=InterruptBisactiveontheexternalterminal.\nTheinterruptactiveregisterBispolledbytheexternalprocessor todetermine ifinterruptBisactive.\n3.21.48 StatusRegister #1\nAddress 88h\n7 6 5 4 3 2 1 0\nPeakwhite Line-alternating FieldrateLostlockdetect Color VerticalsyncHorizontal syncTV/VCRstatus\ndetectstatus status status subcarrier locklockstatus lockstatus\nstatus\nPeakwhitedetectstatus\n0=Peakwhiteisnotdetected.\n1=Peakwhiteisdetected.\nLine-alternating status\n0=Nonlinealternating\n1=Linealternating\nFieldratestatus\n0=60Hz\n1=50Hz\nLostlockdetect\n0=Nolostlocksincestatusregister#1waslastread.\n1=Lostlocksincestatusregister#1waslastread.\nColorsubcarrier lockstatus\n0=Colorsubcarrier isnotlocked.\n1=Colorsubcarrier islocked.\nVerticalsynclockstatus\n0=Verticalsyncisnotlocked.\n1=Verticalsyncislocked.\nHorizontal synclockstatus\n0=Horizontal syncisnotlocked.\n1=Horizontal syncislocked.\nTV/VCR status.TVmodeisdetermined bydetecting standard line-to-line variations andspecific\nchrominance SCHphasesbasedonthestandard inputvideoformat.VCRmodeisdetermined by\ndetecting variations inthechrominance SCHphasescompared tothechrominance SCHphasesofthe\nstandard inputvideoformat.\n0=TV\n1=VCR\n54Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.49 StatusRegister #2\nAddress 89h\n7 6 5 4 3 2 1 0\nReserved Weaksignal PALswitch Fieldsequence AGCandoffset Macrovision detection\ndetection polarity status frozenstatus\nWeaksignaldetection\n0=Noweaksignal\n1=Weaksignalmode\nPALswitchpolarityoffirstlineofoddfield\n0=PALswitchis0.\n1=PALswitchis1.\nFieldsequence status\n0=Evenfield\n1=Oddfield\nAGCandoffsetfrozenstatus\n0=AGCandoffsetarenotfrozen.\n1=AGCandoffsetarefrozen.\nMacrovision detection\n000=Nocopyprotection\n001=AGCprocesspresent(Macrovision Type1present)\n010=Colorstripe processType2present\n011=AGCprocessandcolorstripe processType2present\n100=Reserved\n101=Reserved\n110=Colorstripe processType3present\n111=AGCprocessandcolorstripeprocessType3present\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 55\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.50 StatusRegister #3\nAddress 8Ah\n7 6 5 4 3 2 1 0\nAnaloggain Digitalgain\nAnaloggain:4-bitfront-end AGCanaloggainsetting\nDigitalgain:4MSBsof6-bitfront-end AGCdigitalgainsetting\nTheproductoftheanaloganddigitalgainisasfollows:\nGainProduct=(1+3×analog_gain /15)×(1+gain_step ×digital_gain /4096)\nWhere,\n0≤analog_gain ≤15\n0≤digital_gain ≤63\nThegain_step settingasafunctionoftheanalog_gain settingisshowninTable3-15.\nTable3-15.gain_step Setting\nanalog_gain gain_step\n0 61\n1 55\n2 48\n3 44\n4 38\n5 33\n6 29\n7 26\n8 24\n9 22\n10 20\n11 19\n12 18\n13 17\n14 16\n15 15\n3.21.51 StatusRegister #4\nAddress 8Bh\n7 6 5 4 3 2 1 0\nSubcarrier tohorizontal (SCH)phase\nSCH(colorPLLsubcarrier phaseat50%ofthefallingedgeofhorizontal syncoflineoneofoddfield;step\nsize360°/256)\n00000000=0.00°\n00000001=1.41°\n00000010=2.81°\n11111110=357.2°\n11111111=358.6°\n56Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.52 StatusRegister #5\nAddress 8Ch\n7 6 5 4 3 2 1 0\nAutoswitch Reserved Videostandard Sampling rate\nmode (SR)\nThisregistercontains information aboutthedetected videostandard atwhichthedeviceiscurrently\noperating. Whenautoswitch codeisrunning, thisregistermustbetestedtodetermine whichvideo\nstandard hasbeendetected.\nAutoswitch mode\n0=Forcedvideostandard\n1=Autoswitch mode\nVideostandard\nVIDEOSTANDARD [3:1] SR\nVIDEOSTANDARD\nBIT3 BIT2 BIT1 BIT0\n0 0 0 0Reserved\n0 0 0 1(M,J)NTSCITU-RBT.601\n0 0 1 0Reserved\n0 0 1 1(B,D,G,H,I,N)PALITU-RBT.601\n0 1 0 0Reserved\n0 1 0 1(M)PALITU-RBT.601\n0 1 1 0Reserved\n0 1 1 1PAL-NcITU-RBT.601\n1 0 0 0Reserved\n1 0 0 1NTSC4.43ITU-RBT.601\n1 0 1 0Reserved\n1 0 1 1SECAMITU-RBT.601\n3.21.53 PatchReadAddress\nAddress 8Eh\nDefault 00h\n7 6 5 4 3 2 1 0\nR/W[7:0]\nThisregistercanbeusedforpatchcoderead-back. Thisregistermustnotbewrittentoorreadfrom\nduringnormaloperation.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 57\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.54 ClosedCaptionDataRegisters\nAddress 90h–93h\nAddress 7 6 5 4 3 2 1 0\n90h Closedcaptionfield1byte1\n91h Closedcaptionfield1byte2\n92h Closedcaptionfield2byte1\n93h Closedcaptionfield2byte2\nTheseregisterscontaintheclosedcaptiondataarranged inbytesperfield.\n3.21.55 WSS/CGMS-A DataRegisters\nAddress 94h–99h\nNTSC\nAddress 7 6 5 4 3 2 1 0 BYTE\n94h b5 b4 b3 b2 b1 b0WSSfield1byte1\n95h b13 b12 b11 b10 b9 b8 b7 b6WSSfield1byte2\n96h b19 b18 b17 b16 b15 b14WSSfield1byte3\n97h b5 b4 b3 b2 b1 b0WSSfield2byte1\n98h b13 b12 b11 b10 b9 b8 b7 b6WSSfield2byte2\n99h b19 b18 b17 b16 b15 b14WSSfield2byte3\nTheseregisterscontainthewidescreensignaling (WSS/CGMS-A) dataforNTSC.\nForNTSC,thebitsare:\nBits0–1represent word0,aspectratio.\nBits2–5represent word1,headercodeforword2.\nBits6–13represent word2,copycontrol.\nBits14–19represent word3,CRC.\nPAL/SECAM\nAddress 7 6 5 4 3 2 1 0 BYTE\n94h b7 b6 b5 b4 b3 b2 b1 b0WSSfield1byte1\n95h b13 b12 b11 b10 b9 b8WSSfield1byte2\n96h Reserved\n97h b7 b6 b5 b4 b3 b2 b1 b0WSSfield2byte1\n98h b13 b12 b11 b10 b9 b8WSSfield2byte2\n99h Reserved\nForPAL/SECAM, thebitsare:\nBits0–3represent group1,aspectratio.\nBits4–7represent group2,enhanced services.\nBits8–10represent group3,subtitles.\nBits11–13represent group4,others.\n58Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.56 VPSDataRegisters\nAddress 9Ah–A6h\nAddress 7 6 5 4 3 2 1 0\n9Ah VPSbyte1\n9Bh VPSbyte2\n9Ch VPSbyte3\n9Dh VPSbyte4\n9Eh VPSbyte5\n9Fh VPSbyte6\nA0h VPSbyte7\nA1h VPSbyte8\nA2h VPSbyte9\nA3h VPSbyte10\nA4h VPSbyte11\nA5h VPSbyte12\nA6h VPSbyte13\nTheseregisterscontaintheentireVPSdatalineexcepttheclockrun-incodeandthestartcode.\n3.21.57 VITCDataRegisters\nAddress A7h–AFh\nAddress 7 6 5 4 3 2 1 0\nA7h VITCbyte1,framebyte1\nA8h VITCbyte2,framebyte2\nA9h VITCbyte3,secondsbyte1\nAAh VITCbyte4,secondsbyte2\nABh VITCbyte5,minutesbyte1\nACh VITCbyte6,minutesbyte2\nADh VITCbyte7,hourbyte1\nAEh VITCbyte8,hourbyte2\nAFh VITCbyte9,CRC\nTheseregisterscontaintheVITCdata.\n3.21.58 VBIFIFOReadDataRegister\nAddress B0h\n7 6 5 4 3 2 1 0\nFIFOreaddata\nThisaddressisprovided toaccessVBIdataintheFIFOthroughthehostport.Allformsofteletextdata\ncomedirectlyfromtheFIFO,whileallotherformsofVBIdatacanbeprogrammed tocomefromthe\nregisters orfromtheFIFO.CurrentstatusoftheFIFOcanbefoundataddressC6handthenumberof\nbytesintheFIFOislocatedataddressC7h.IfthehostportistobeusedtoreaddatafromtheFIFO,then\nthehostaccessenablebitataddressCDhmustbesetto1.TheformatusedfortheVBIFIFOisshownin\nSection3.9.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 59\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.59 TeletextFilterandMaskRegisters\nAddress B1h–BAh\nDefault 00h\nAddress 7 6 5 4 3 2 1 0\nB1h Filter1mask1 Filter1pattern1\nB2h Filter1mask2 Filter1pattern2\nB3h Filter1mask3 Filter1pattern3\nB4h Filter1mask4 Filter1pattern4\nB5h Filter1mask5 Filter1pattern5\nB6h Filter2mask1 Filter2pattern1\nB7h Filter2mask2 Filter2pattern2\nB8h Filter2mask3 Filter2pattern3\nB9h Filter2mask4 Filter2pattern4\nBAh Filter2mask5 Filter2pattern5\nForanNABTSsystem,thepacketprefixconsistsoffivebytes.Eachbytecontainsfourdatabits(D[3:0])\ninterlaced withfourHamming protection bits(H[3:0]):\n7 6 5 4 3 2 1 0\nD[3] H[3] D[2] H[2] D[1] H[1] D[0] H[0]\nOnlythedataportionD[3:0]fromeachbyteisappliedtoateletextfilterfunctionwiththecorresponding\npatternbitsP[3:0]andmaskbitsM[3:0].Hamming protection bitsareignoredbythefilter.\nForaWSTsystem(PALorNTSC),thepacketprefixconsistsoftwobytessothattwopatternsareused.\nPatterns3,4,and5areignored.\nThemaskbitsenablefilteringusingthecorresponding bitinthepatternregister.Forexample, a1inthe\nLSBofmask1meansthatthefiltermodulemustcompare theLSBofnibble1inthepatternregisterto\nthefirstdatabitonthetransaction. Ifthesematch,atrueresultisreturned. A0inabitofmask1means\nthatthefiltermodulemustignorethatdatabitofthetransaction. Ifallzerosareprogrammed inthemask\nbits,thefiltermatchesallpatternsreturning atrueresult(default00h).\nPatternandmaskforeachbyteandfilterarereferredas<1,2><P,M><1,2,3,4,5 >,where:\n<1,2>identifies thefilter1or2\n<P,M>identifies thepatternormask\n<1,2,3,4,5 >identifies thebytenumber\n60Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.60 TeletextFilterControlRegister\nAddress BBh\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Filterlogic Mode TTXfilter2TTXfilter1\nenable enable\nFilterlogicallowsdifferentlogictobeappliedwhencombining thedecisionoffilter1andfilter2asfollows:\n00=NOR(Default)\n01=NAND\n10=OR\n11=AND\nMode\n0=TeletextWSTPALmodeB(2headerbytes)(default)\n1=TeletextNABTSNTSCmodeC(5headerbytes)\nTTXfilter2enable\n0=Disabled (default)\n1=Enabled\nTTXfilter1enable\n0=Disabled (default)\n1=Enabled\nIfthefiltermatchesorifthefiltermaskisallzeros,atrueresultisreturned.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 61\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.61 Interrupt StatusRegister A\nAddress C0h\nDefault 00h\n7 6 5 4 3 2 1 0\nLockstate Lockinterrupt Reserved FIFOthreshold Lineinterrupt Datainterrupt\ninterrupt interrupt\nTheinterruptstatusregisterAcanbepolledbythehostprocessor todetermine thesourceofaninterrupt.\nAfteraninterruptcondition issetitcanberesetbywritingtothisregisterwitha1intheappropriate bit(s).\nLockstateinterrupt\n0=TVP5151 isnotlockedtothevideosignal(default).\n1=TVP5151 islockedtothevideosignal.\nLockinterrupt\n0=Atransition hasnotoccurred onthelocksignal(default).\n1=Atransition hasoccurred onthelocksignal.\nFIFOthreshold interrupt\n0=TheamountofdataintheFIFOhasnotyetcrossedthethreshold programmed ataddressC8h\n(default).\n1=TheamountofdataintheFIFOhascrossedthethreshold programmed ataddressC8h.\nLineinterrupt\n0=Thevideolinenumberhasnotyetbeenreached(default).\n1=Thevideolinenumberprogrammed inaddressCAhhasoccurred.\nDatainterrupt\n0=Nodataisavailable (default).\n1=VBIdataisavailable eitherintheFIFOorintheVBIdataregisters.\n62Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.62 Interrupt EnableRegister A\nAddress C1h\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Lockinterrupt Reserved FIFOthreshold Lineinterrupt Datainterrupt\nenable interruptenable enable enable\nTheinterruptenableregisterAisusedbythehostprocessor tomaskunnecessary interruptsources.Bits\nloadedwitha1allowthecorresponding interruptcondition togenerate aninterruptontheexternalpin.\nConversely, bitsloadedwitha0maskthecorresponding interruptcondition fromgenerating aninterrupt\nontheexternalpin.Thisregisteronlyaffectstheinterruptontheexternalterminal, itdoesnotaffectthe\nbitsininterruptstatusregisterA.Agivencondition cansettheappropriate bitinthestatusregisterandnot\ncauseaninterruptontheexternalterminal. Todetermine ifthisdeviceisdrivingtheinterruptterminal,\neitherperformalogicalANDofinterruptstatusregisterAwithinterruptenableregisterA,orcheckthe\nstateoftheinterruptAbitintheinterruptconfiguration registerataddressC2h.\nLockinterruptenable\n0=Disabled (default)\n1=Enabled\nFIFOthreshold interruptenable\n0=Disabled (default)\n1=Enabled\nLineinterruptenable\n0=Disabled (default)\n1=Enabled\nDatainterruptenable\n0=Disabled (default)\n1=Enabled\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 63\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.63 Interrupt Configuration Register A\nAddress C2h\nDefault 04h\n7 6 5 4 3 2 1 0\nReserved YCbCrenable InterruptA Interrupt\n(VDPOE) polarityA\nYCbCrenable(VDPOE)\n0=YCbCrpinsarehighimpedance.\n1=YCbCrpinsareactiveifotherconditions aremet(default)(seeTable3-13).\nInterruptA(readonly)\n0=InterruptAisnotactiveontheexternalpin(default).\n1=InterruptAisactiveontheexternalpin.\nInterruptpolarityAmustbethesameasinterruptpolarityBofInterruptConfiguration RegisterBat\nAddress1Eh.\nInterruptpolarityA\n0=InterruptAisactivelow(default).\n1=InterruptAisactivehigh.\nInterruptconfiguration registerAisusedtoconfigure thepolarityoftheexternalinterruptterminal. When\ninterruptAisconfigured asactivelow,theterminalisdrivenlowwhenactiveandhighimpedance when\ninactive(opendrain).Conversely, whentheterminalisconfigured asactivehigh,itisdrivenhighwhen\nactiveanddrivenlowwheninactive.\nNote:Anexternalpullupresistor(4.7kΩto10kΩ)isrequiredwhenthepolarityoftheexternalinterrupt\nterminal(pin27)isconfigured asactivelow.\n3.21.64 VDPConfiguration RAMRegister\nAddress C3h C4h C5h\nDefault DCh 0Fh 00h\nAddress 7 6 5 4 3 2 1 0\nC3h Configuration data\nC4h RAMaddress(7:0)\nC5h Reserved RAM\naddress8\nTheconfiguration RAMdataisprovided toinitializetheVDPwithinitialconstants. Theconfiguration RAM\nis512bytesorganized as32differentconfigurations of16byteseach.Thefirst12configurations are\ndefinedforthecurrentVBIstandards. Anadditional twoconfigurations canbeusedasacustom\nprogrammed modeforuniquestandards suchasGemstar.\nAddressC3hisusedtoreadorwritetotheRAM.TheRAMinternaladdresscounterisautomatically\nincremented witheachtransaction. Addresses C5handC4hmakeupa9-bitaddresstoloadtheinternal\naddresscounterwithaspecificstartaddress. ThiscanbeusedtowriteasubsetoftheRAMforonly\nthosestandards ofinterest.\nNOTE\nRegisters D0h–FBhmustallbeprogrammed withFFhbeforewritingorreadingthe\nconfiguration RAM.Fullfieldmode(CFh)mustbedisabledaswell.\n64Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\nThesuggested RAMcontentsareshowninTable3-16.Allvaluesarehexadecimal.\nTable3-16.VBIConfiguration RAMforSignalsWithPedestal\nINDEX ADDRESS 0123456789ABCDEF\nWSTSECAM 000 AAAAFFFFE72E20A6E4B40E070100\nWSTSECAM 010 AAAAFFFFE72E20A6E4B40E070100\nWSTPALB 020 AAAAFFFF272E20ABA47210070100\nWSTPALB 030 AAAAFFFF272E20ABA47210070100\nWSTPALC 040 AAAAFFFFE72E2022A4980D000100\nWSTPALC 050 AAAAFFFFE72E2022A4980D000100\nWSTNTSC 060 AAAAFFFF272E202363930D000100\nWSTNTSC 070 AAAAFFFF272E202363930D000100\nNABTS,NTSC 080 AAAAFFFFE72E20A263930D070150\nNABTS,NTSC 090 AAAAFFFFE72E20A263930D070150\nNABTS,NTSC-J 0A0 AAAAFFFFA72E20A363930D070100\nNABTS,NTSC-J 0B0 AAAAFFFFA72E20A363930D070100\nCC,PAL/SECAM 0C0 AA2AFF3F04516E02A47B09000270\nCC,PAL/SECAM 0D0 AA2AFF3F04516E02A47B09000270\nCC,NTSC 0E0 AA2AFF3F04516E02638C09000270\nCC,NTSC 0F0 AA2AFF3F04516E02638C09000270\nWSS/CGMS-A,100 5B55C5FF0716E42A4CD0F0003A0PAL/SECAM\nWSS/CGMS-A,110 5B55C5FF0716E42A4CD0F0003A0PAL/SECAM\nWSS/CGMS-A,120 38003F000716E43637C08000390NTSCC\nWSS/CGMS-A,130 38003F000716E43637C08000390NTSCC\nVITC,PAL/SECAM 140 000008F6D49A485080004C0\nVITC,PAL/SECAM 150 000008F6D49A485080004C0\nVITC,NTSC 160 000008F6D496394080004C0\nVITC,NTSC 170 000008F6D496394080004C0\nVPS,PAL 180 AAAAFFFFBACE2B8DA4DA0B070600\nVPS,PAL 190 AAAAFFFFBACE2B8DA4DA0B070600\nGemstar2x1A0 9999FFFF05516E056318138000006000Custom1\nGemstar2x1B0 ProgrammableCustom1\nCustom2 1C0 Programmable\nCustom2 1D0 Programmable\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 65\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.65 VDPStatusRegister\nAddress C6h\n7 6 5 4 3 2 1 0\nFIFOfullerror FIFOempty TTXavailable CCfield1CCfield2WSSavailable VPSavailable VITCavailable\navailable available\nTheVDPstatusregisterindicates whetherdataisavailable ineithertheFIFOordataregisters, andstatus\ninformation abouttheFIFO.Readingdatafromthecorresponding registerdoesnotclearthestatusflags\nautomatically. Theseflagsareonlyresetbywritinga1totherespective bit.However, bit6isupdated\nautomatically.\nFIFOfullerror\n0=NoFIFOfullerror\n1=FIFOwasfullduringawritetoFIFO.\nTheFIFOfullerrorflagissetwhenthecurrentlineofVBIdatacannotentertheFIFO.Forexample, if\ntheFIFOhasonlytenbytesleftandteletextisthecurrentVBIline,theFIFOfullerrorflagisset,butno\ndataiswrittenbecause theentireteletextlinedoesnotfit.However, ifthenextVBIlineisclosed\ncaptionrequiring onlytwobytesofdataplustheheader,thisgoesintotheFIFO,evenifthefullerror\nflagisset.\nFIFOempty\n0=FIFOisnotempty.\n1=FIFOisempty.\nTTXavailable\n0=Teletextdataisnotavailable.\n1=Teletextdataisavailable.\nCCfield1available\n0=Closedcaptiondatafromfield1isnotavailable.\n1=Closedcaptiondatafromfield1isavailable.\nCCfield2available\n0=Closedcaptiondatafromfield2isnotavailable.\n1=Closedcaptiondatafromfield2isavailable.\nWSSavailable\n0=WSSdataisnotavailable.\n1=WSSdataisavailable.\nVPSavailable\n0=VPSdataisnotavailable.\n1=VPSdataisavailable.\nVITCavailable\n0=VITCdataisnotavailable.\n1=VITCdataisavailable.\n66Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.66 FIFOWordCountRegister\nAddress C7h\n7 6 5 4 3 2 1 0\nNumberofwords\nThisregisterprovidesthenumberofwordsintheFIFO.Onewordequalstwobytes.\n3.21.67 FIFOInterrupt Threshold Register\nAddress C8h\nDefault 80h\n7 6 5 4 3 2 1 0\nNumberofwords\nThisregisterisprogrammed totriggeraninterruptwhenthenumberofwordsintheFIFOexceedsthis\nvalue(default80h).ThisinterruptmustbeenabledataddressC1h.Onewordequalstwobytes.\n3.21.68 FIFOResetRegister\nAddress C9h\nDefault 00h\n7 6 5 4 3 2 1 0\nAnydata\nWritinganydatatothisregisterresetstheFIFOandclearsanydatapresentinallVBIreadregisters.\n3.21.69 LineNumberInterrupt Register\nAddress CAh\nDefault 00h\n7 6 5 4 3 2 1 0\nField1enable Field2enable Linenumber\nThisregisterisprogrammed totriggeraninterruptwhenthevideolinenumbermatchesthisvalueinbits\n5:0.ThisinterruptmustbeenabledataddressC1h.Thevalueof0or1doesnotgenerate aninterrupt.\nField1enable\n0=Disabled (default)\n1=Enabled\nField2enable\n0=Disabled (default)\n1=Enabled\nLinenumberdefaultis00h.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 67\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n3.21.70 PixelAlignment Registers\nAddress CBh CCh\nDefault 4Eh 00h\nAddress 7 6 5 4 3 2 1 0\nCBh Switchpixel[7:0]\nCCh Reserved Switchpixel[9:8]\nTheseregisters forma10-bithorizontal pixelpositionfromthefallingedgeofsync,wheretheVDP\ncontroller initiatestheprogramfromonelinestandard tothenextlinestandard; forexample, theprevious\nlineofteletexttothenextlineofclosedcaption.Thisvaluemustbesetsothattheswitchoccursafterthe\nprevious transaction hasclearedthedelayintheVDP,butearlyenoughtoallowthenewvaluestobe\nprogrammed beforethecurrentsettingsarerequired.\n3.21.71 FIFOOutputControlRegister\nAddress CDh\nDefault 01h\n7 6 5 4 3 2 1 0\nReserved Hostaccess\nenable\nThisregisterisprogrammed toallowI2CaccesstotheFIFOortoallowallVDPdatatogooutthevideo\nportasancillarydata.\nHostaccessenable\n0=OutputFIFOdatatothevideooutputYOUT[7:0] asancillarydata\n1=ReadFIFOdataviaI2CregisterB0h(default)\n3.21.72 FullFieldEnableRegister\nAddress CFh\nDefault 00h\n7 6 5 4 3 2 1 0\nReserved Fullfieldenable\nThisregisterenablesthefullfieldmode.Inthismode,alllinesoutsidetheverticalblankareaandalllines\ninthelinemoderegistersprogrammed withFFhareslicedwiththedefinition ofregisterFCh.Valuesother\nthanFFhinthelinemoderegistersallowadifferentslicemodeforthatparticular line.\nFullfieldenable\n0=Disablefullfieldmode(default)\n1=Enablefullfieldmode\n68Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n3.21.73 LineModeRegisters\nAddress D0h D1h–FBh\nDefault 00h FFh\nAddress 7 6 5 4 3 2 1 0\nD0 Line6Field1\nD1 Line6Field2\nD2 Line7Field1\nD3 Line7Field2\nD4 Line8Field1\nD5 Line8Field2\nD6 Line9Field1\nD7 Line9Field2\nD8 Line10Field1\nD9 Line10Field2\nDA Line11Field1\nDB Line11Field2\nDC Line12Field1\nDD Line12Field2\nDE Line13Field1\nDF Line13Field2\nE0 Line14Field1\nE1 Line14Field2\nE2 Line15Field1\nE3 Line15Field2\nE4 Line16Field1\nE5 Line16Field2\nE6 Line17Field1\nE7 Line17Field2\nE8 Line18Field1\nE9 Line18Field2\nEA Line19Field1\nEB Line19Field2\nEC Line20Field1\nED Line20Field2\nEE Line21Field1\nEF Line21Field2\nF0 Line22Field1\nF1 Line22Field2\nF2 Line23Field1\nF3 Line23Field2\nF4 Line24Field1\nF5 Line24Field2\nF6 Line25Field1\nF7 Line25Field2\nF8 Line26Field1\nF9 Line26Field2\nFA Line27Field1\nFB Line27Field2\nTheseregistersprogramthespecificVBIstandard ataspecificlineinthevideofield.\nCopyright ©2009–2011,TexasInstruments Incorporated Functional Description 69\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\nBit7\n0=Disablefilteringofnullbytesinclosedcaptionmodes\n1=Enablefilteringofnullbytesinclosedcaptionmodes(default)\nInteletextmodes,bit7enablesthedatafilterfunctionforthatparticular line.Ifitissetto0,thedata\nfilterpassesalldataonthatline.\nBit6\n0=SendVBIdatatoregistersonly\n1=SendVBIdatatoFIFOandtheregisters. TeletextdataonlygoestoFIFO(default).\nBit5\n0=AllowVBIdatawitherrorsintheFIFO\n1=DonotallowVBIdatawitherrorsintheFIFO(default)\nBit4\n0=Donotenableerrordetection andcorrection\n1=Enableerrordetection andcorrection (default)\nBits[3:0]\n0000=WSTSECAM\n0001=WSTPALB\n0010=WSTPALC\n0011=WSTNTSC\n0100=NABTSNTSC\n0101=TTXNTSC-J\n0110=CCPAL\n0111=CCNTSC\n1000=WSS/CGMS-A PAL\n1001=WSS/CGMS-A NTSC\n1010=VITCPAL\n1011=VITCNTSC\n1100=VPSPAL\n1101=Gemstar2xCustom1\n1110=Custom2\n1111=Activevideo(VDPoff)(default)\nAvalueofFFhinthelinemoderegistersisrequiredforanylinetobeslicedaspartofthefullfieldmode.\n3.21.74 FullFieldModeRegister\nAddress FCh\nDefault 7Fh\n7 6 5 4 3 2 1 0\nFullfieldmode\nThisregisterprograms thespecificVBIstandard forfullfieldmode.ItcanbeanyVBIstandard. Individual\nlinesettingstakepriorityoverthefullfieldregister. ThisallowseachVBIlinetobeprogrammed\nindependently buthavetheremaining linesinfullfieldmode.Thefullfieldmoderegisterhasthesame\ndefinitions asthelinemoderegisters(default7Fh).\n70Functional Description Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n4Electrical Specifications\n4.1Absolute Maximum Ratings(1)\noveroperating free-airtemperature range(unlessotherwise noted)\nIO_DVDD toDGND –0.5Vto4.5V\nDVDDtoDGND –0.5Vto2.3V\nSupplyvoltagerange\nPLL_AVDD toPLL_AGND –0.5Vto2.3V\nCH_AVDD toCH_AGND –0.5Vto2.3V\nDigitalinputvoltagerange,VItoDGND –0.5Vto4.5V\nInputvoltagerange,XTAL1toPLL_GND –0.5Vto2.3V\nAnaloginputvoltagerangeAItoCH_AGND –0.2Vto2.0V\nDigitaloutputvoltagerange,VOtoDGND –0.5Vto4.5V\nCommercial 0°Cto70°C\nOperating free-airtemperature, TAIndustrial –40°Cto85°C\nStoragetemperature range,Tstg –65°Cto150°C\n(1)Stresses beyondthoselistedunderabsolutemaximum ratingsmaycausepermanent damagetothedevice.Thesearestressratings\nonly,andfunctional operation ofthedeviceattheseoranyotherconditions beyondthoseindicated underrecommended operating\nconditions isnotrecommended. Exposure toabsolute-maximum-rated conditions forextended periodsmayaffectdevicereliability.\n4.2Recommended Operating Conditions\nMINNOM MAXUNIT\n1.8IO_DVDD DigitalI/Osupplyvoltage 1.65 3.6V3.3\nDVDD Digitalsupplyvoltage 1.65 1.8 1.95V\nPLL_AVDD AnalogPLLsupplyvoltage 1.65 1.8 1.95V\nCH_AVDD Analogcoresupplyvoltage 1.65 1.8 1.95V\nVI(P-P) Analoginputvoltage(ac-coupling necessary) 0 0.75V\nVIH Digitalinputvoltagehigh(1)0.7IO_DVDD V\nVIL Digitalinputvoltagelow(1)0.3IO_DVDD V\nVIH_XTAL XTALinputvoltagehigh(1)0.7PLL_AVDD V\nVIL_XTAL XTALinputvoltagelow(1)0.3PLL_AVDD V\nIOH High-level outputcurrent(1)2mA\nIOL Low-level outputcurrent(1)–2mA\nIOH_SCLK SCLKhigh-level outputcurrent(1)4mA\nIOL_SCLK SCLKlow-level outputcurrent(1)–4mA\nCommercial 0 70\nTA Operating free-airtemperature °C\nIndustrial –40 85\n(1)Specified bydesign\n4.3Reference ClockSpecifications\nMINNOMMAXUNIT\nfFrequency 27 MHz\nΔfFrequency tolerance(1)–50 +50ppm\n(1)Specified bydesign\nCopyright ©2009–2011,TexasInstruments Incorporated Electrical Specifications 71\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n4.4Electrical Characteristics\nTypicalsupplyvoltages: DVDD=1.8V,PLL_AVDD =1.8V,CH_AVDD =1.8V,IO_DVDD =3.3V,\nForminimum/maximum values:TA=0°Cto70°Cforcommercial orTA=–40°Cto85°Cforindustrial,\nFortypicalvalues:TA=25°C(unlessotherwise noted)\n4.5DCElectrical Characteristics\nPARAMETER TESTCONDITIONS(1)MINTYP MAXUNIT\nIDD(IO_D) 3.3-VI/Odigitalsupplycurrent 100%colorbarinput 6.9 7.9mA\nIDD(D) 1.8-Vdigitalsupplycurrent 100%colorbarinput 30 33.5mA\nIDD(PLL_A) 1.8-VanalogPLLsupplycurrent 100%colorbarinput 5.7 7.9mA\nIDD(CH_A) 1.8-Vanalogcoresupplycurrent 100%colorbarinput 27.9 39.2mA\nPTOT Totalpowerdissipation, normalmode 100%colorbarinput 137 185mW\nPDOWN Totalpowerdissipation, power-down mode(2)100%colorbarinput 1mW\nCi Inputcapacitance(3)Bydesign 8 pF\nVOH Outputvoltagehigh(3)IOH=2mA 0.8IO_DVDD V\nVOL Outputvoltagelow(3)IOL=–2mA 0.22IO_DVDD V\nVOH_SCLK SCLKoutputvoltagehigh(3)IOH=4mA 0.8IO_DVDD V\nVOL_SCLK SCLKoutputvoltagelow(3)IOL=–4mA 0.22IO_DVDD V\nIIH High-level inputcurrent(4)VI=VIH ±20µA\nIIL Low-level inputcurrent(4)VI=VIL ±20µA\n(1)Measured with22-Ωseriestermination resistorsand10-pFload.\n(2)Assuredbydevicecharacterization\n(3)Specified bydesign\n(4)YOUT7isabidirectional terminalwithaninternalpulldown resistor.Thisterminalmaysinkmorethanthespecified currentwhenin\nRESETmode.\n4.6AnalogElectrical Characteristics\nPARAMETER TESTCONDITIONS MINTYPMAXUNIT\nZiInputimpedance, analogvideoinputs(1)500 kΩ\nCiInputcapacitance, analogvideoinputs(1)10 pF\nVi(pp)Inputvoltagerange(2)Ccoupling=0.1µF 0 0.75V\nΔGGaincontrolmaximum 12 dB\nΔGGaincontrolminimum 0 dB\nDNLAbsolute differential nonlinearity A/Donly 0.5 1LSB\nINLAbsolute integralnonlinearity A/Donly 12.5LSB\nFrFrequency response 6MHz,Specified bydesign –0.9 dB\nSNRSignal-to-noise ratio 6MHz,1.0VP-P 50 dB\nNSNoisespectrum 50%flatfield 50 dB\nDPDifferential phase Modulated ramp 0.5 °\nDGDifferential gain Modulated ramp 1.5 %\n(1)Specified bydesign\n(2)The0.75-Vmaximum appliestothesync-chrominance amplitude, notsync-white. Therecommended termination resistorsare37.4Ω,\nasseeninSection6.\n72Electrical Specifications Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nVOH YOUT[7:0], AVID,\nVSYNC, HSYNC,\nFID/GLCO VOLValid Data Valid DataSCLK\nt3t1 t2\nt5t4 TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n4.7Clocks,VideoData,SyncTiming\nPARAMETER TESTCONDITIONS(1)MINTYPMAXUNIT\nDutycycle,SCLK 475053%\nt1SCLKhightime ≥90% 18.5 ns\nt2SCLKlowtime ≤10% 18.5 ns\nt3SCLKfalltime 90%to10% 5ns\nt4SCLKrisetime 10%to90% 5ns\nt5Propagation delaytime 3 8ns\n(1)Measured with22-Ωseriestermination resistorsand10-pFload.\nFigure4-1.Clocks,VideoData,andSyncTiming\nCopyright ©2009–2011,TexasInstruments Incorporated Electrical Specifications 73\nSubmitDocumentation Feedback\nSDA\nSCLStop Start\nData\nt1\nt6t7t2\nt8 t6t3t4\nt5Stop\nChange\nDataTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n4.8I2CHostInterface Timing(1)\nNO. PARAMETER MIN TYP MAXUNIT\nt1BusfreetimebetweenSTOPandSTART 1.3 µs\nt2DataHoldtime 0 0.9µs\nt3DataSetuptime 100 ns\nt4Setuptimefora(repeated) STARTcondition 0.6 µs\nt5SetuptimeforaSTOPcondition 0.6 ns\nt6Holdtime(repeated) STARTcondition 0.6 µs\nt7RisetimeSDAandSCLsignal 250ns\nt8FalltimeSDAandSCLsignal 250ns\nCbCapacitive loadforeachbusline 400pF\nfI2CI2Cclockfrequency 400kHz\n(1)Specified bydesign\nFigure4-2.I2CHostInterface Timing\n4.9Thermal Specifications\nPARAMETER PACKAGE BOARD MINTYPMAXUNIT\nJEDECLow-K 125.3 ºC/W\nθJA Junction-to-ambient thermalresistance, stillair TQFP-32 (PBS)\nJEDECHigh-K 91.1 ºC/W\nθJC Junction-to-case thermalresistance, stillair TQFP-32 (PBS) 39.3 ºC/W\nTJ(MAX) Maximum junctiontemperature forreliableoperation TQFP-32 (PBS) 105ºC\n74Electrical Specifications Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nTVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n5Example Register Settings\nThefollowing example registersettingsareprovided onlyasareference. Thesesettings, giventhe\nassumed inputconnector, videoformat,andoutputformat,setuptheTVP5151 decoderandprovide\nvideooutput.Example registersettingsforotherfeaturesandtheVBIdataprocessor arenotprovided\nhere.\n5.1Example 1\n5.1.1Assumptions\nDevice:TVP5151\nInputconnector: Composite (AIP1A)\nVideoformat:NTSC-M, PAL(B,G,H,I),orSECAM\nNOTE\nNTSC-4.43, PAL-N,andPAL-Maremaskedfromtheautoswitch processbydefault.Seethe\nautoswitch maskregisterataddress04h.\nOutputformat:8-bitITU-RBT.656withembedded syncs\n5.1.2Recommended Settings\nRecommended I2Cwrites:Forthissetup,onlyonewriteisrequired. Allotherregisters aresetupby\ndefault.\nI2Cregisteraddress03h=Miscellaneous controlsregisteraddress\nI2Cdata09h=EnablesYCbCroutputandtheclockoutput\nNOTE\nHSYNC, VSYNC/PALI, AVID,andFID/GLCO arehighimpedance bydefault.Seethe\nmiscellaneous controlregisterataddress03h.\nCopyright ©2009–2011,TexasInstruments Incorporated Example RegisterSettings 75\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n5.2Example 2\n5.2.1Assumptions\nDevice:TVP5151\nInputconnector: S-video(AIP1A(luminance), AIP1B(chrominance))\nVideoFormat:NTSC(M,4.43),PAL(B,G,H,I,M,N,Nc)orSECAM(B,D,G,K1,L)\nOutputformat:8-bit4:2:2YCbCrwithdiscretesyncoutputs\n5.2.2Recommended Settings\nRecommended I2Cwrites:Thissetuprequiresadditional writestooutputthediscretesync4:2:2data\noutputs,theHSYNC,andtheVSYNC,andtoautoswitch betweenallvideoformatsmentioned above.\nI2Cregisteraddress00h=Videoinputsourceselection #1register\nI2Cdata01h=SelectstheS-Videoinput,AIP1A(luminance), andAIP1B(chrominance)\nI2Cregisteraddress03h=Miscellaneous controlsregisteraddress\nI2Cdata0Dh=EnablestheYCbCroutputdata,HSYNC,VSYNC/PALI, AVID,andFID/GLCO\nI2Cregisteraddress04h=Autoswitch maskregister\nI2CdataC0h=UnmaskNTSC-4.43, PAL-N,andPAL-Mfromtheautoswitch process\nI2Cregisteraddress0Dh=Outputsanddataratesselectregister\nI2Cdata40h=Enables8-bit4:2:2YCbCrwithdiscretesyncoutput\n76Example RegisterSettings Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nDVDDIO_DVDD\nIO_DVDDAVDDAVID\nAVDDHSYNCPDN\nIO_DVDDINTREQ/GPCL/VBLKPDN\nINTREQ/GPCL/VBLK\nAVID\nHSYNC\nVSYNC/PALI\nFID/GLCO\nSCLKOSC_IN\nYOUT[7:0]RESETBVSYNC/PALI\nSCL\nSCLKCH1_IN\nCH2_IN\nOSC_INSDAFID/GLCOC1\n1 µF\nC50.1 µFR1\nR5C4\n0.1 µF\nR2\n37.4Ω\nR6\n37.4ΩR3\n2.2 k /c87R4\n2.2 k /c87\nC10\n0.1 µFC6\n0.1 µF\nY1\n27.000 MHz ± 50 ppmC2\n1 µF\nC8\nCL1C3\n1 µF\nC9\nCL2S1\n1 2C7\n0.1 µF\nR7\n10 k /c87TVP51511\n2\n3\n425\n526\n627\n728\n829\n930\n1031\n1132\n12131415161718192021222324\nAIP1A\nAIP1B\nPLL_AGND\nPLL_AVDD\nXTAL1/OSC_IN\nXTAL2\nAGND\nRESETB\nSCLK\nIO_DVDD\nYOUT7/I2CSEL\nYOUT6\nYOUT5\nYOUT4\nYOUT3\nYOUT2YOUT1YOUT0DGNDDVDDSCLSDAFID/GLCOVSYNC/PALIHSYNC\nAVID/CLK_IN\nINTREQ/GPCL/VBLKPDNREFPREFM\nCH_AGNDCH_AVDD\nImplies I C address is BAh. If B8h is to be used,\nconnect pulldown resistor to digital ground.20.1 µF\nC1137.4Ω\n37.4Ω\nRAAF\nAAFIO_DVDD\n10 k\nSee Note I/c87\n10 k /c87\nSee Note H TVP5151\nwww.ti.com SLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011\n6Application Information\n6.1Application Example\nA.TheuseofINTREQ/GPCL/VBLK, AVID,HSYNC,andVSYNC/PALI isoptional.\nB.WhenOSC_INisconnected throughS1,removethecapacitors forthecrystal.\nC.PDNneedstobehigh,ifdevicehastobealwaysoperational.\nD.RESETB isoperational onlywhenPDNishigh.Thisallowsanactive-low resettothedevice.\nE.100-kΩresistor(R)inparallelwiththecrystalisrecommended formostcrystaltypes.\nF.Anti-aliasing filter(AAF)highlyrecommended forbestvideoquality.\nG.SystemlevelESDprotection isnotincludedinthisapplication circuit,butitishighlyrecommended ontheanalog\nvideoinputs.\nH.Anexternal10-kΩpulldown resistorisrequiredwhentheINTREQ/GPCL/VBLK output(pin27)isdisabled(bit5ofI2C\nregister03hissetto0).\nI.Anexternal 10-kΩpullupresistorisrequired whentheINTREQ/GPCL/VBLK output(pin27)isenabled and\nconfigured asanactive-low interrupt(bit5ofI2Cregister03hissetto1,bit1ofI2Cregister0Fhissetto0,andbit0\nofI2Cregister1Ehissetto0).\nFigure6-1.Application Example\nCopyright ©2009–2011,TexasInstruments Incorporated Application Information 77\nSubmitDocumentation Feedback\nTVP5151\nSLES241E –SEPTEMBER 2009–REVISED OCTOBER 2011 www.ti.com\n7Revision History\nTable7-1.Revision History\nREVISION COMMENTS\nSLES241 Initialrelease\nSection1.4,RelatedProducts added\nSection1.5,Trademarks modified\nSection3.16,Figure3-8changedtodepictvariousclockingoptions.Changed crystalparallelresistorrecommendation.\nSection3.21.10,Luminance Brightness description modified\nSLES241A\nSection3.21.11,Chrominance Saturation description modified\nSection3.21.50,StatusRegister#3description modified\nSection6.1,Changed recommendation forresistorinparallelwiththecrystal\nMinoreditorialchangesthroughout\nSection3.3,Figure3-2,Chromatrapfiltercharacteristics forNTSCadded.\nSection3.3,Figure3-3,Chromatrapfiltercharacteristics forPALadded.\nSection3.4,Figure3-4,Colorlow-pass filtercharacteristics added.\nSLES241B\nSection3.8,Table3-1,Modifiednameforregister1100b.\nSection3.20,Table3-11,AddedI2Cindirectregistersataddress21h-24h.\nSection4.9,AddedPowerDissipation Ratings.\nAEC-Q100 qualification added.\nSection3.13,Updateddescription.\nSection3.21.29,AddedIndirectRegisterData\nSection3.21.30,AddedIndirectRegisterAddress\nSLES241C\nSection3.21.31,AddedIndirectRegisterRead/Write Strobe\nSection3.21.38,AddedPatchWriteAddress\nSection3.21.39,AddedPatchCodeExecute\nSection3.21.53,AddedPatchReadAddress\nSLES241D Removed AEC-Q100 qualification.\nTable2-1,Modifieddescription forterminal27.\nTable3-11,Modifiedregisters82hand83h.\nSection3.21.4,Modifieddescription forbits7:5ofI2Cregister03h.\nSLES241ESection3.21.15,Removed supportfor1xoutputclockfrequency (bit0ofregister0Fh).\nSection3.21.42,Modifiedtheregisterdescription forregister82h.\nSection3.21.43,Modifiedtheregisterdescription forregister83h.\nFigure6-1,Addednoteconcerning ESDprotection. Addedpulldown andpullupresistorstopin27output.\n78RevisionHistory Copyright ©2009–2011,TexasInstruments Incorporated\nSubmitDocumentation Feedback\nPACKAGE OPTION ADDENDUM\nwww.ti.com 10-Dec-2020\nAddendum-Page 1PACKAGING INFORMATION\nOrderable Device Status\n(1)Package Type Package\nDrawingPinsPackage\nQtyEco Plan\n(2)Lead finish/\nBall material\n(6)MSL Peak Temp\n(3)Op Temp (°C) Device Marking\n(4/5)Samples\nTVP5151IPBS ACTIVE TQFP PBS 32250RoHS & Green NIPDAU Level-3-260C-168 HR -40 to 85 5151I\nTVP5151IPBSR ACTIVE TQFP PBS 321000RoHS & Green NIPDAU Level-3-260C-168 HR -40 to 85 5151I\nTVP5151PBS ACTIVE TQFP PBS 32250RoHS & Green NIPDAU Level-3-260C-168 HR 0 to 70 5151\nTVP5151PBSR ACTIVE TQFP PBS 321000RoHS & Green NIPDAU Level-3-260C-168 HR 0 to 70 5151\n \n(1) The marketing status values are defined as follows:\nACTIVE: Product device recommended for new designs.\nLIFEBUY:  TI has announced that the device will be discontinued, and a lifetime-buy period is in effect.\nNRND: Not recommended for new designs. Device is in production to support existing customers, but TI does not recommend using this part in a new design.\nPREVIEW:  Device has been announced but is not in production. Samples may or may not be available.\nOBSOLETE:  TI has discontinued the production of the device.\n \n(2) RoHS:  TI defines "RoHS" to mean semiconductor products that are compliant with the current EU RoHS requirements for all 10 RoHS substances,  including the requirement that RoHS substance\ndo not exceed 0.1% by weight in homogeneous materials. Where designed to be soldered at high temperatures, "RoHS" products are suitable for use in specified lead-free processes. TI may\nreference these types of products as "Pb-Free".\nRoHS Exempt:  TI defines "RoHS Exempt" to mean products that contain lead but are compliant with EU RoHS pursuant to a specific EU RoHS exemption.\nGreen: TI defines "Green" to mean the content of Chlorine (Cl) and Bromine (Br) based flame retardants meet JS709B low halogen requirements of <=1000ppm threshold.  Antimony trioxide based\nflame retardants must also meet the <=1000ppm threshold requirement.\n \n(3) MSL, Peak Temp. - The Moisture Sensitivity Level rating according to the JEDEC industry standard classifications, and peak solder temperature.\n \n(4) There may be additional marking, which relates to the logo, the lot trace code information, or the environmental category on the device.\n \n(5) Multiple Device Markings will be inside parentheses. Only one Device Marking contained in parentheses and separated by a "~" will appear on a device. If a line is indented then it is a continuation\nof the previous line and the two combined represent the entire Device Marking for that device.\n \n(6) Lead finish/Ball material - Orderable Devices may have multiple material finish options. Finish options are separated by a vertical ruled line. Lead finish/Ball material values may wrap to two\nlines if the finish value exceeds the maximum column width.\n \nImportant Information and Disclaimer: The information provided on this page represents TI\'s knowledge and belief as of the date that it is provided. TI bases its knowledge and belief on information\nprovided by third parties, and makes no representation or warranty as to the accuracy of such information. Efforts are underway to better integrate information from third parties. TI has taken and\nPACKAGE OPTION ADDENDUM\nwww.ti.com 10-Dec-2020\nAddendum-Page 2continues to take reasonable steps to provide representative and accurate information but may not have conducted destructive testing or chemical analysis on incoming materials and chemicals.\nTI and TI suppliers consider certain information to be proprietary, and thus CAS numbers and other limited information may not be available for release.\n \nIn no event shall TI\'s liability arising out of such information exceed the total purchase price of the TI part(s) at issue in this document sold by TI to Customer on an annual basis.\n \nPACKAGE MATERIALS INFORMATION\n  \nwww.ti.com 24-Feb-2023\nTAPE AND REEL INFORMATION\nReel Width (W1)REEL DIMENSIONS\nA0\nB0\nK0\nWDimension designed to accommodate the component length\nDimension designed to accommodate the component thickness\nOverall width of the carrier tape\nPitch between successive cavity centersDimension designed to accommodate the component widthTAPE DIMENSIONS\nK0 P1\nB0W\nA0 Cavity\nQUADRANT ASSIGNMENTS FOR PIN 1 ORIENTATION IN TAPE\nPocket QuadrantsSprocket Holes\nQ1 Q1 Q2 Q2\nQ3 Q3 Q4 Q4 User Direction of FeedP1Reel\nDiameter\n \n*All dimensions are nominal\nDevice Package\nTypePackage\nDrawingPinsSPQ Reel\nDiameter\n(mm)Reel\nWidth\nW1 (mm)A0\n(mm)B0\n(mm)K0\n(mm)P1\n(mm)W\n(mm)Pin1\nQuadrant\nTVP5151IPBSR TQFP PBS321000 330.0 16.4 7.27.21.512.016.0 Q2\nTVP5151PBSR TQFP PBS321000 330.0 16.4 7.27.21.512.016.0 Q2\nPack Materials-Page 1\nPACKAGE MATERIALS INFORMATION\n  \nwww.ti.com 24-Feb-2023\nTAPE AND REEL BOX DIMENSIONS\nWidth (mm)\nWLH\n \n*All dimensions are nominal\nDevice Package Type Package Drawing Pins SPQ Length (mm) Width (mm) Height (mm)\nTVP5151IPBSR TQFP PBS 321000 367.0 367.0 38.0\nTVP5151PBSR TQFP PBS 321000 367.0 367.0 38.0\nPack Materials-Page 2\nPACKAGE MATERIALS INFORMATION\n  \nwww.ti.com 24-Feb-2023\nTRAY\n \n \nL - Outer tray length without tabs KO - \nOuter \ntray \nheight\nW - \nOuter \ntray \nwidth\nP1 - Tray unit pocket pitch\nCW - Measurement for tray edge (Y direction) to corner pocket center\nCL - Measurement for tray edge (X direction) to corner pocket centerText\n \n \nChamfer on Tray corner indicates Pin 1 orientation of packed units.\n \n \n*All dimensions are nominal\nDevice Package\nNamePackage\nTypePinsSPQUnit array\nmatrixMax\ntemperature\n(°C)L (mm) W\n(mm)K0\n(µm)P1\n(mm)CL\n(mm)CW\n(mm)\nTVP5151IPBS PBS TQFP 3225010 X 25 150 315135.9762012.211.111.25\nTVP5151PBS PBS TQFP 3225010 X 25 150 315135.9762012.211.111.25\nPack Materials-Page 3\n\n\nIMPORTANT NOTICE AND DISCLAIMER\nTI PROVIDES TECHNICAL AND RELIABILITY DATA (INCLUDING DATA SHEETS), DESIGN RESOURCES (INCLUDING REFERENCE \nDESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND OTHER RESOURCES “AS IS” \nAND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING WITHOUT LIMITATION ANY \nIMPLIED WARRANTIES OF MERCHANTABILIT Y, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT OF THIRD \nPARTY INTELLECTUAL PROPERTY RIGHTS.\nThese resources are intended for skilled developers designing with TI products. Y ou are solely responsible for (1) selecting the appropriate \nTI products for your application, (2) designing, validating and testing your application, and (3) ensuring your application meets applicable \nstandards, and any other safety, security, regulatory or other requirements.\nThese resources are subject to change without notice. TI grants you permission to use these resources only for development of an \napplication that uses the TI products described in the resource. Other reproduction and display of these resources is prohibited. No license \nis granted to any other TI intellectual property right or to any third party intellectual property right. TI disclaims responsibility for , and you \nwill fully indemnify TI and its representatives against, any claims, damages, costs, losses, and liabilities arising out of your use of these \nresources.\nTI’s products are provided subject to TI’s Terms of Sale or other applicable terms available either on ti.com  or provided in conjunction with \nsuch TI products. TI’s provision of these resources does not expand or otherwise alter TI’s applicable warranties or warranty disclaimers for \nTI products.\nTI objects to and rejects any additional or different terms you may have proposed. IMPORTANT NOTICE\nMailing Address: Texas Instruments, Post Office Box 655303, Dallas, Texas 75265\nCopyright © 202 3, Texas Instruments Incorporated\n'}]
!==============================================================================!
### Component Summary: TVP5151IPBSR

**Key Characteristics and Specifications:**

- **Voltage Ratings:**
  - Digital I/O Supply Voltage (IO_DVDD): 1.8V to 3.3V
  - Digital Supply Voltage (DVDD): 1.65V to 1.95V
  - PLL Supply Voltage (PLL_AVDD): 1.65V to 1.95V
  - Analog Core Supply Voltage (CH_AVDD): 1.65V to 1.95V

- **Current Ratings:**
  - Typical Power Consumption: 138 mW (normal mode), <1 mW (power-down mode)
  - Digital Supply Current (IDD(D)): 30 to 33.5 mA
  - Analog PLL Supply Current (IDD(PLL_A)): 5.7 to 7.9 mA
  - Analog Core Supply Current (IDD(CH_A)): 27.9 to 39.2 mA

- **Power Consumption:**
  - Total Power Dissipation: 137 mW (typical), 185 mW (maximum)

- **Operating Temperature Range:**
  - Commercial: 0°C to 70°C
  - Industrial: -40°C to 85°C

- **Package Type:**
  - Available in TQFP (32-pin) and PBGA (48-terminal) packages.

- **Special Features:**
  - Supports multiple video formats (NTSC, PAL, SECAM).
  - Integrated 9-bit ADC with 2× oversampling.
  - Programmable video output formats (8-bit 4:2:2 or 8-bit ITU-R BT.656).
  - Macrovision™ copy protection detection.
  - I2C interface for configuration and control.
  - Advanced programmable video output formats and VBI data processing.
  - Power-down mode for ultralow power consumption.

- **Moisture Sensitive Level (MSL):**
  - MSL Level 3 per JEDEC J-STD-020E.

**Description:**
The TVP5151 is an ultralow-power video decoder designed to convert analog video signals (NTSC, PAL, SECAM) into digital formats. It features a high-speed 9-bit analog-to-digital converter (ADC) and supports various output formats, including 8-bit ITU-R BT.656 and 4:2:2 YCbCr. The device is optimized for low power consumption, making it suitable for portable applications.

**Typical Applications:**
- Digital televisions
- Portable navigation devices
- Video recorders and players
- Handheld gaming devices
- Internet appliances and web pads
- Surveillance systems
- Notebook PCs and PDAs

The TVP5151 is ideal for applications requiring efficient video processing and low power consumption, particularly in battery-operated devices. Its ability to handle multiple video standards and formats makes it versatile for various consumer electronics and multimedia applications.