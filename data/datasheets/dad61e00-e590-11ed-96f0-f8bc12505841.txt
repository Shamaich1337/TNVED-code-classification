[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of TMS320C28346ZFET production of TEXAS INSTRUMENTS from the text:TMS320C2834x Delfino Microcontrollers\n1 Features\n• High-Performance Static CMOS Technology\n– Up to 300 MHz (3.33-ns Cycle Time)\n– 1.1-V/1.2-V Core, 3.3-V I/O, 1.8-V PLL/\nOscillator Design\n• High-Performance 32-Bit CPU (TMS320C28x)\n– IEEE 754 Single-Precision Floating-Point Unit\n(FPU)\n– 16 × 16 and 32 × 32 MAC Operations\n– 16 × 16 Dual MAC\n– Harvard Bus Architecture\n– Fast Interrupt Response and Processing\n– Code-Efficient (in C/C++ and Assembly)\n• Six-Channel DMA Controller (for McBSP, XINTF,\nand SARAM)\n• 16-Bit or 32-Bit External Interface (XINTF)\n– More Than 2M × 16 Address Reach\n• On-Chip Memory\n– Up to 258K × 16 SARAM\n– 8K × 16 Boot ROM\n• Clock and System Control\n– On-Chip Oscillator\n– Watchdog Timer Module\n• Peripheral Interrupt Expansion (PIE) Block That\nSupports All 64 Peripheral Interrupts\n• Endianness: Little Endian\n• Enhanced Control Peripherals\n– Eighteen Enhanced Pulse Width Modulator\n(ePWM) Outputs\n• Dedicated 16-Bit Time-Based Counter With\nPeriod and Frequency Control\n• Single-Edge, Dual-Edge Symmetric, or\nDual-Edge Asymmetric Outputs\n• Dead-Band Generation\n• PWM Chopping by High-Frequency Carrier\n• Trip Zone Input\n• Up to 9 HRPWM Outputs With 55-ps MEP\nResolution at V DD = 1.1 V (65 ps at 1.2 V)– Six 32-Bit Enhanced Capture (eCAP) Modules\n• Configurable as 3 Capture Inputs or\n3 Auxiliary Pulse Width Modulator Outputs\n• Single-Shot Capture of up to Four Event\nTimestamps\n– Three 32-Bit Quadrature Encoder Pulse (QEP)\nModules\n– Six 32-Bit Timers and Nine 16-Bit Timers\n• Three 32-Bit CPU Timers\n• Serial Port Peripherals\n– Up to 2 CAN Modules\n– Up to 3 SCI (UART) Modules\n– Up to 2 McBSP Modules (Configurable as SPI)\n– Up to 2 SPI Modules\n– One Inter-Integrated Circuit (I2C) Bus\n• External ADC Interface\n• Up to 88 Individually Programmable, Multiplexed\nGPIO Pins With Input Filtering\n• Advanced Emulation Features\n– Analysis and Breakpoint Functions\n– Real-Time Debug Using Hardware\n• Package Options:\n– 256-Ball Plastic Ball Grid Array (BGA) (ZFE)\n– 179-Ball MicroStar BGA™ (ZHH)\n• Temperature Options:\n– T: –40°C to 105°C (ZFE, ZHH)\n– S: –40°C to 125°C (ZFE)\n– Q: –40°C to 125°C (ZFE)\n(AEC Q100 Qualification for Automotive\nApplications)\n2 Applications\n• Industrial AC Inverter Drives\n• Industrial Servo Amplifiers and Controllers\n• Computer Numerical Control (CNC) Machining\n• Uninterruptible and Server Power Supplies\n• Telecom Equipment Power\n• Solar Inverters\n3 Description\nThe TMS320C2834x (C2834x) Delfino™ microcontroller unit (MCU) devices build on TI\'s existing F2833x high-\nperformance floating-point microcontrollers. The C2834x delivers up to 300 MHz of floating-point performance,\nand has up to 516KB of on-chip RAM. Designed for real-time control applications, the C2834x is based on the\nC28x core, making it code-compatible with all C28x microcontrollers. The on-chip peripherals and low-latency\ncore make the C2834x an excellent solution for performance-hungry real-time control applications.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 1\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nAn IMPORTANT NOTICE at the end of this data sheet addresses availability, warranty, changes, use in safety-critical applications,\nintellectual property matters and other important disclaimers. PRODUCTION DATA.\nThe TMS320C28346, TMS320C28345, TMS320C28344, TMS320C28343, TMS320C28342, and\nTMS320C28341 devices, members of the Delfino™ MCU generation, are highly integrated, high-performance\nsolutions for demanding control applications.\nThroughout this document, the devices are abbreviated as C28346, C28345, C28344, C28343, C28342, and\nC28341, respectively. Device Comparison  provides a summary of features for each device.\nDevice Information (1)\nPART NUMBER PACKAGE BODY SIZE\nTMS320C28346ZFE BGA (256) 17.0 mm × 17.0 mm\nTMS320C28345ZFE BGA (256) 17.0 mm × 17.0 mm\nTMS320C28344ZFE BGA (256) 17.0 mm × 17.0 mm\nTMS320C28343ZFE BGA (256) 17.0 mm × 17.0 mm\nTMS320C28342ZFE BGA (256) 17.0 mm × 17.0 mm\nTMS320C28341ZFE BGA (256) 17.0 mm × 17.0 mm\nTMS320C28346ZEP BGA (256) 17.0 mm × 17.0 mm\nTMS320C28345ZEP BGA (256) 17.0 mm × 17.0 mm\nTMS320C28344ZEP BGA (256) 17.0 mm × 17.0 mm\nTMS320C28343ZEP BGA (256) 17.0 mm × 17.0 mm\nTMS320C28342ZEP BGA (256) 17.0 mm × 17.0 mm\nTMS320C28341ZEP BGA (256) 17.0 mm × 17.0 mm\nTMS320C28345ZHH BGA MicroStar (179) 12.0 mm × 12.0 mm\nTMS320C28343ZHH BGA MicroStar (179) 12.0 mm × 12.0 mm\nTMS320C28341ZHH BGA MicroStar (179) 12.0 mm × 12.0 mm\n(1) For more information on these devices, see Mechanical, Packaging, and Orderable Information .TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n2 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n3.1 Functional Block Diagram\nL0 SARAM 8K x 16\n(0-Wait)\nL1 SARAM 8K x 16\n(0-Wait)\nL2 SARAM 8K x 16\n(0-Wait)\nL3 SARAM 8K x 16\n(0-Wait)\nL4 SARAM 8K x 16\n(0-Wait)\nL5 SARAM 8K x 16\n(0-Wait)Boot ROM\n8K x 16\nDMA BusXINTF\nXWE0XZCS6XZCS7XZCS0XR/WXREADYXHOLDXHOLDAXD31:0\nXA19:1GPIO\nMUX\nMemory BusMemory Bus\nXCLKOUT\nXRD\nGPIO\nMUX88 GPIOs8 External Interrupts88 GPIOs\nADC\nSoCEXTADCCLK\nEXTSOCCPU Timer 0\nCPU Timer 1\nCPU Timer 2OSC,\nPLL,\nLPM,\nWDDMA\n6 Ch\nPIE\n(Interrupts)32-Bit CPU\n(300 MHz @ 1.2 V\n200 MHz @ 1.1 V)\nEMU1EMU0TRSTTDOTMSTDITCK\nXRSX2X1XCLKINFPU\nDMA BusMemory Bus\nFIFO\n(16 Levels)\nSCI-A/B/CFIFO\n(16 Levels)\nSPI-A/DFIFO\n(16 Levels)\nI2C16-Bit Peripheral Bus\nSPISOMIxSPISIMOx SPICLKx SPISTEx SCIRXDx SCITXDxSDAx SCLxMcBSP-A/B\nMRXxMDXxMCLKXxMCLKRxMFSXxMFSRx32-Bit Peripheral Bus\n(DMA accessible)\nePWM-1/../9\nHRPWM-1/../9eCAP-1/../6 eQEP-1/2/3\nEPWMxAEPWMxBESYNCIESYNCOTZx\nECAPxEQEPxAEQEPxBEQEPxIEQEPxSCAN-A/B\n(32-mbox)\nCANRXx CANTXxM0 SARAM 1K x 16\n(0-Wait)\nM1 SARAM 1K x 16\n(0-Wait)\nMemory Bus\n32-Bit Peripheral Bus\nGPIO MUX\n88 GPIOsXWE1H0 SARAM 32K x 16\n(1 Wait, Prefetch)\nH1 SARAM 32K x 16\n(1 Wait, Prefetch)\nH2 SARAM 32K x 16\n(1  Wait, Prefetch)\nH3 SARAM 32K x 16\n(1 Wait, Prefetch)\nH4 SARAM 32K x 16\n(1 Wait, Prefetch)\nH5 SARAM 32K x 16\n(1 Wait, Prefetch)L6 SARAM 8K x 16\n(1-Wait)\nL7 SARAM 8K x 16\n(1-Wait)DMA Bus\nFigure 3-1. Functional Block Diagramwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 3\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable of Contents\n1 Features ............................................................................ 1\n2 Applications ..................................................................... 1\n3 Description ....................................................................... 1\n3.1 Functional Block Diagram........................................... 3\n4 Revision History .............................................................. 5\n5 Device Comparison ......................................................... 6\n5.1 Related Products........................................................ 6\n6 Terminal Configuration and Functions .......................... 8\n6.1 Pin Diagrams.............................................................. 8\n6.2 Signal Descriptions................................................... 16\n7 Specifications ................................................................ 29\n7.1 Absolute Maximum Ratings (1) (2) ............................. 29\n7.2 ESD Ratings – Automotive....................................... 29\n7.3 ESD Ratings – Commercial...................................... 29\n7.4 Recommended Operating Conditions....................... 30\n7.5 Power Consumption Summary................................. 31\n7.6 Electrical Characteristics........................................... 34\n7.7 Thermal Resistance Characteristics......................... 35\n7.8 Thermal Design Considerations................................ 36\n7.9 Timing and Switching Characteristics....................... 37\n8 Detailed Description ...................................................... 86\n8.1 Brief Descriptions...................................................... 868.2 Peripherals................................................................ 92\n8.3 Memory Maps......................................................... 130\n8.4 Register Map........................................................... 136\n8.5 Interrupts................................................................. 139\n8.6 System Control....................................................... 144\n8.7 Low-Power Modes Block........................................ 151\n9 Applications, Implementation, and Layout ............... 152\n9.1 TI Design or Reference Design............................... 152\n10 Device and Documentation Support ........................ 153\n10.1 Getting Started...................................................... 153\n10.2 Device and Development Support Tool\nNomenclature............................................................ 153\n10.3 Tools and Software............................................... 155\n10.4 Documentation Support........................................ 156\n10.5 Support Resources............................................... 158\n10.6 Trademarks........................................................... 158\n10.7 Electrostatic Discharge Caution............................ 158\n10.8 Glossary................................................................ 159\n11 Mechanical, Packaging, and Orderable\nInformation .................................................................. 160\n11.1 Packaging Information.......................................... 160TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n4 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n4 Revision History\nChanges from August 22, 2018 to February 1, 2021 (from Revision E (August 2018) to Revision\nF (February 2021)) Page\n• Added Q1 Part Numbers................................................................................................................................ 0\n•Table 5-1 : Added Q1 Part Numbers.................................................................................................................... 6\n•Section 7.9.4.5.1.1  (SPI Master Mode External Timing (Clock Phase = 0)): Updated MIN value (for both BRR\nEVEN and BRR ODD) for Parameter 23, t d(SPC)M ............................................................................................ 56\n•Section 7.9.4.5.1.2  (SPI Master Mode External Timing (Clock Phase = 1)): Updated MIN value (for both BRR\nEVEN and BRR ODD) for Parameter 23, t d(SPC)M ............................................................................................ 58\n•Figure 10-1 : Added GPN information............................................................................................................. 153www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 5\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n5 Device Comparison\nTable 5-1. Device Comparison\nFEATURE TYPE(1)C28346\nC28346-Q1\n(300 MHz)C28345\n(200 MHz)C28344\n(300 MHz)C28343\nC28343-Q1\n(200 MHz)C28342\n(300 MHz)C28341\n(200 MHz)\nPackage type –256-ball ZFE\nBGA(2)256-ball ZFE\nBGA(2)179-ball ZHH\nBGA256-ball ZFE\nBGA(2)256-ball ZFE\nBGA(2)179-ball ZHH\nBGA256-ball ZFE\nBGA(2)256-ball ZFE\nBGA(2)179-ball ZHH\nBGA\nInstruction cycle – 3.33 ns 5 ns 3.33 ns 5 ns 3.33 ns 5 ns\nFloating-point unit – Yes Yes Yes Yes Yes Yes\nSingle-access RAM (SARAM)\n(16-bit word)– 258K 258K 130K 130K 98K 98K\nCode security for on-chip SARAM\nblocks– No No No No No No\nBoot ROM (8K ×16) – Yes Yes Yes Yes Yes Yes\n16-/32-bit External Interface\n(XINTF)1 Yes Yes Yes Yes Yes Yes\n6-channel Direct Memory Access\n(DMA)0 Yes Yes Yes Yes Yes Yes\nPWM channels 0ePWM1/2/3/\n4/5/6/7/8/9ePWM1/2/3/\n4/5/6/7/8/9ePWM1/2/3/\n4/5/6/7/8/9ePWM1/2/3/\n4/5/6/7/8/9ePWM1/2/3/\n4/5/6ePWM1/2/3/\n4/5/6\nHRPWM channels 0ePWM1A/2A/\n3A/4A/5A/6A/\n7A/8A/9AePWM1A/2A/\n3A/4A/5A/6A/\n7A/8A/9AePWM1A/2A/\n3A/4A/5A/6A/\n7A/8A/9AePWM1A/2A/\n3A/4A/5A/6A/\n7A/8A/9AePWM1A/2A/\n3A/4A/5A/6AePWM1A/2A/\n3A/4A/5A/6A\n32-bit capture inputs or auxiliary\nPWM outputs0 6 6 6 6 4 4\n32-bit QEP channels (four inputs/\nchannel)0 3 3 3 3 2 2\nWatchdog timer – Yes Yes Yes Yes Yes Yes\nExternal ADC interface – Yes Yes Yes Yes Yes Yes\n32-bit CPU timers – 3 3 3 3 3 3\nMultichannel Buffered Serial Port\n(McBSP)/SPI1 2 2 2 2 1 1\nSerial Peripheral Interface (SPI) 0 2 2 2 2 2 2\nSerial Communications Interface\n(SCI)0 3 3 3 3 3 3\nEnhanced Controller Area\nNetwork (eCAN)0 2 2 2 2 2 2\nInter-Integrated Circuit (I2C) 0 1 1 1 1 1 1\nGeneral-Purpose Input/Output\n(GPIO) pins (shared)– 88 88 88 88 88 88\nExternal interrupts – 8 8 8 8 8 8\nTemperature\noptionsT: –40°C to\n105°C– ZFE ZFE ZHH ZFE ZFE ZHH ZFE ZFE ZHH\nS: –40°C to\n125°C– ZFE ZFE – ZFE ZFE – ZFE ZFE –\nQ: –40°C to\n125°C\n(AEC Q100\nqualification)– ZFE ZFE – ZFE ZFE – ZFE ZFE –\n(1) A type change represents a major functional feature difference in a peripheral module. Within a peripheral type, there may be minor\ndifferences between devices that do not affect the basic functionality of the module. These device-specific differences are listed in the\nC2000 Real-Time Control Peripherals Reference Guide  and in the peripheral reference guides.\n(2) TMX samples will come with the ZEP designator. The designator will change to ZFE after TMS.\n5.1 Related Products\nFor information about other devices in the Delfino  family of products, see the following links:\nOriginal Delfino™ series:\nTMS320F2833x Delfino™ Microcontrollers\nThe F2833x series is the original Delfino MCU. It is the first C2000™ MCU that is offered with a floating-point unit\n(FPU). It has the first-generation ePWM timers that are used throughout the rest of the Delfino and Piccolo™\nfamilies. The 12.5-MSPS, 12-bit ADC is still class-leading for an integrated analog-to-digital converter. TheTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n6 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nF2833x has a 150-MHz CPU and up to 512KB of on-chip Flash. It is available in a 176-pin QFP or 179-ball BGA\npackage.\nTMS320C2834x Delfino™ Microcontrollers\nThe C2834x series removes the on-chip Flash memory and integrated ADC to enable the fastest available clock\nspeeds of up to 300 MHz. It is available in a 179-ball BGA or 256-ball BGA package.\nNewest Delfino™ series:\nTMS320F2837xD Delfino™ Microcontrollers\nThe F2837xD series sets a new standard for performance with dual subsystems. Each subsystem consists of a\nC28x CPU and a parallel control law accelerator (CLA), each running at 200 MHz. Enhancing performance are\nTMU and VCU accelerators . New capabilities include multiple 16-bit/12-bit mode ADCs, DAC, Sigma-Delta\nfilters, USB, configurable logic block (CLB), on-chip oscillators, and enhanced versions of all peripherals. The\nF2837xD is available with up to 1MB of Flash. It is available in a 176-pin QFP or 337-pin BGA package.\nTMS320F2837xS Delfino™ Microcontrollers\nThe F2837xS series is a pin-to-pin compatible version of F2837xD but with only one C28x-CPU-and-CLA\nsubsystem enabled. It is also available in a 100-pin QFP to enable compatibility with the Piccolo ™\nTMS320F2807x  series.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 7\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n6 Terminal Configuration and Functions\n6.1 Pin Diagrams\nThe 179-ball ZHH ball grid array (BGA) terminal assignments are shown in Figure 6-1  through Figure 6-4 . The\n256-ball ZFE plastic BGA terminal assignments are shown in Figure 6-5  through Figure 6-8 . Table 6-1  describes\nthe function(s) of each pin.\nEXTSOC3BGPIO19/\n/\nSCIRXDB/\nCANTXASPISTEAGPIO23/\nEQEP1I/\nMFSXA/\nSCIRXDBGPIO24/\nECAP1/\nEQEP2A/\nMDXB\nEXTSOC1A\nEXTSOC2A EXTSOC1BGPIO21/\nEQEP1B/\nMDRA/\nCANRXB\nGPIO20/\nEQEP1A/\nMDXA/\nCANTXBP P\nN N\nM M\nL LGPIO18/\nSPICLKA/\nSCITXDB/\nCANRXATDI\nGPIO16/\nSPISIMOA/\nCANTXB/\nTZ5\nGPIO12/\n/\nCANTXB/\nMDXBTZ1EXTSOC3A\nK K\nJ J\nH H\n1 2 3 4 56 7TDO\nVSS1 2 3 4 5 6 7\nEXTSOC2B\nTRST\nGPIO17/\nSPISOMIA/\nCANRXB/\nTZ6\nGPIO13/\n/\nCANRXB/\nMDRBTZ2GPIO15/\n/ /\nSCIRXDB/\nMFSXBTZ4□XHOLDAGPIO25/\nECAP2/\nEQEP2B/\nMDRBGPIO22/\nEQEP1S/\nMCLKXA/\nSCITXDBEXTADCCLK\nVDD\nVSS\nVSSVDDIOVDDIO\nVSS\nGPIO11/\nEPWM6B/\nSCIRXDB/\nECAP4VDD\nVDDVDD\nVSS\nVDDIO\nGPIO14/\n/ /\nSCITXDB/\nMCLKXBTZ3□XHOLDVDDVDD\nVSS\nVDDIOGPIO26/\nECAP3/\nEQEP2I/\nMCLKXBGPIO27/\nECAP4/\nEQEP2S/\nMFSXBGPIO33/\nSCLA/\nEPWMSYNCO/\nADCSOCBOGPIO32/\nSDAA/\nEPWMSYNCI/\nADCSOCAO\nFigure 6-1. C2834x 179-Ball ZHH MicroStar BGA Upper-Left Quadrant (Bottom VIew)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n8 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nGPIO49/\nECAP6/\nXD30/\nSPISOMIDVDDIOGPIO54/\nSPISIMOA/\nXD25/\nEQEP3A\nGPIO59/\nMFSRA/\nXD20/\nEPWM7BGPIO55/\nSPISOMIA/\nXD24/\nEQEP3B\nGPIO60/\nMCLKRB/\nXD19/\nEPWM8A\nVSSEMU1GPIO /\nMFSRB/\nXD18/\nEPWM8B61\nGPIO70/\nXD9TCK\nVDDEMU0\n8 9\n10 11 12 13 14P P\nN N\nM M\nL L\nK K\nJ J\nH HGPIO63/\nSCITXDC/\nXD16/\nEPWM9B\nGPIO68/\nXD11VSSXRSIO\nGPIO65/\nXD14VSS8 9 10 11 12 13 14\nXRS\nVSSTMS\nVDDGPIO67/\nXD12GPIO66/\nXD13GPIO62/\nSCIRXDC/\nXD17/\nEPWM9AVDDGPIO57/\n/\nXD22/\nEQEP3ISPISTEAGPIO50/\nEQEP1A/\nXD29/\nSPICLKDGPIO51/\nEQEP1B/\nXD28/\nSPISTED\nVSS\nVDDIO VDD VSS VDDGPIO64/\nXD15GPIO48/\nECAP5/\nXD31/\nSPISIMODGPIO52/\nEQEP1S/\nXD27\nGPIO53/\nEQEP1I/\nXD26GPIO56/\nSPICLKA/\nXD23/\nEQEP3SGPIO58/\nMCLKRA/\nXD21/\nEPWM7A\nVDDIO\nVDDIO\nVDDGPIO69/\nXD10Figure 6-2. C2834x 179-Ball ZHH MicroStar BGA Upper-Right Quadrant (Bottom View)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 9\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nGPIO9/\nEPWM5B/\nSCITXDB/\nECAP3GPIO10/\nEPWM6A/\nCANRXB/\nADCSOCBOGPIO8/\nEPWM5A/\nCANTXB/\nADCSOCAOVSS\nGPIO80/\nXA8GPIO7/\nEPWM4B/\nMCLKRA/\nECAP2\nVDDGPIO4/\nEPWM3AGPIO5/\nEPWM3B/\nMFSRA/\nECAP1GPIO3/\nEPWM2B/\nECAP5/\nMCLKRBGPIO46/\nXA6\nVDD VSS VDDIOGPIO85/\nXA13GPIO84/\nXA12G\nF\nE\nD\nGPIO1/\nEPWM1B/\nECAP6/\nMFSRBGPIO30/\nCANRXA/\nXA18GPIO29/\nSCITXDA/\nXA19VDDGPIO81/\nXA9\nGPIO0/\nEPWM1AGPIO31/\nCANTXA/\nXA17GPIO87/\nXA15VDDIO GPIO83/\nXA11\nGPIO39/\nXA16GPIO86/\nXA14VSSC\nB\nA\n1 2 3 4 5 6 7G\nF\nE\nD\nC\nB\nAVDD18 VDD\nVDDIO VDD\nVSS VSSGPIO82/\nXA101 2 3 4 5\n6 7VSSVDD\nVDDIOGPIO6/\nEPWM4A/\nEPWMSYNCI/\nEPWMSYNCOGPIO2/\nEPWM2A\nVDD\nGPIO47/\nXA7VDDIOFigure 6-3. C2834x 179-Ball ZHH MicroStar BGA Lower-Left Quadrant (Bottom View)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n10 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nGPIO71/\nXD8GPIO72/\nXD7\nGPIO73/\nXD6\nGPIO35/\nSCITXDA/\nXR/W\nGPIO34/\nECAP1\nXREADYGPIO75/\nXD4\nGPIO77/\nXD2VSS\nXCLKINGPIO41/\nXA1\nGPIO38/\nXWE0G\nF\nE\nD\nX1\nGPIO36/\nSCIRXDA/\nXZCS0GPIO40/\nXA0\nGPIO44/\nXA4GPIO78/\nXD1\nC\nB\nA\n8 9 10 11 12 13 14G\nF\nE\nD\nC\nB\nAXCLKOUT\nXRDX2VSS\nVDDIO8 910 11 12 13 14\nVDD18\nVDDGPIO79/\nXD0VDD\nVSS\nVSSKVDDIO\nGPIO45/\nXA5GPIO42/\nXA2\nGPIO43/\nXA3VDD\nGPIO28/\nSCIRXDA/\nXZCS6GPIO74/\nXD5\nXWE1VSS\nGPIO76/\nXD3\nVSSVDDVSS\nVDDIO\nGPIO37/\nECAP2/\nXZCS7\nVDD\nVSS\nVDDIOFigure 6-4. C2834x 179-Ball ZHH MicroStar BGA Lower-Right Quadrant (Bottom View)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 11\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nVSS1\nT VSS2\nR VSSVDDIO\nP VDD3 4 5 6 7 8\nVSS\nVSS\nNVSS\nVDDIO VDDIO VSS\nM\nVDDIOVSS\nVDDVDD\nVDD LVDDIO\nVDDVSS VSS VSS\nKVSS VDD VSS VSS VSS VSS\nJ VDDIO VDD VSS VSS VSSGPIO19/\n/\nSCIRXDB/\nCANTXASPISTEA\nGPIO33/\nSCLA/\nEPWMSYNCO/\nADCSOCBOGPIO21/\nEQEP1B/\nMDRA/\nCANRXB\nGPIO23/\nEQEP1I/\nMFSXA/\nSCIRXDBGPIO22/\nEQEP1S/\nMCLKXA/\nSCITXDBGPIO20/\nEQEP1A/\nMDXA/\nCANTXBGPIO32/\nSDAA/\nEPWMSYNCI/\nADCSOCAOGPIO27/\nECAP4/\nEQEP2S/\nMFSXB\nGPIO26/\nECAP3/\nEQEP2I/\nMCLKXBGPIO25/\nECAP2/\nEQEP2B/\nMDRBGPIO24/\nECAP1/\nEQEP2A/\nMDXBTDI\nEXTSOC3AEXTADCCLK\nEXTSOC2BTRST\nEXTSOC3B\nEXTSOC2ATDO\nGPIO17/\nSPISOMIA/\nCANRXB/\nTZ6\nGPIO15/\n/ /\nSCIRXDB/\nMFSXBTZ4□XHOLDA\nVDDIOGPIO14/\n/ /\nSCITXDB/\nMCLKXBTZ3□XHOLDGPIO13/\n/\nCANRXB/\nMDRBTZ2GPIO16/\nSPISIMOA/\nCANTXB/\nTZ5GPIO18/\nSPICLKA/\nSCITXDB/\nCANRXAEXTSOC1A EXTSOC1B VDD VDDIO VSS VDDFigure 6-5. C2834x 256-Ball ZFE Plastic BGA Upper-Left Quadrant (Bottom View)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n12 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nVDDIO9\nT VSS10\nR\nP11 12\nGPIO58/\nMCLKRA/\nXD21/\nEPWM7A13 14 15 16\nGPIO64/\nXD15GPIO59/\nMFSRA/\nXD20/\nEPWM7BGPIO57/\n/\nXD22/\nEQEP3ISPISTEAGPIO56/\nSPICLKA/\nXD23/\nEQEP3S\nN VSS VSS VDDIO VDDIO\nM VSS\nL VDD VDDIOTCK\nK VSS\nJGPIO63/\nSCITXDC/\nXD16/\nEPWM9BGPIO60/\nMCLKRB/\nXD19/\nEPWM8AVDDVSS\nVSS\nGPIO68/\nXD11GPIO66/\nXD13GPIO61/\nMFSRB/\nXD18/\nEPWM8BVSS VSS\nGPIO65/\nXD14\nGPIO69/\nXD10GPIO67/\nXD12GPIO62/\nSCIRXDC/\nXD17/\nEPWM9AVDDIO\nVSS\nVSS\nVDDIOGPIO53/\nEQEP1I/\nXD26\nGPIO55/\nSPISOMIA/\nXD24/\nEQEP3BGPIO54/\nSPISIMOA/\nXD25/\nEQEP3A\nVDD VDD VDD VDDIOGPIO50/\nEQEP1A/\nXD29/\nSPICLKD\nGPIO52/\nEQEP1S/\nXD27GPIO51/\nEQEP1B/\nXD28/\nSPISTED\nVSS VSS VSSGPIO49/\nECAP6/\nXD30/\nSPISOMIDGPIO48/\nECAP5/\nXD31/\nSPISIMOD\nVSS VSS VDD VSSXRS\nEMU0EMU1\nVSS VSS VSS VDDVSSTMSVDDIOXRSIOFigure 6-6. C2834x 256-Ball ZFE Plastic BGA Upper-Right Quadrant (Bottom View)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 13\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nVSSK\n1H\n2X1G\nVDD18F\n3 4 5 6 7 8GPIO81/\nXA9\nGPIO82/\nXA10E\nGPIO84/\nXA12GPIO85/\nXA13D\nGPIO39/\nXA16C\nVDDIOGPIO31/\nCANTXA/\nXA17B VSSGPIO30/\nCANRXA/\nXA18\nAVDD\nGPIO46/\nXA6GPIO47/\nXA7VDDIOVDD VSS VSS VSS\nGPIO80/\nXA8VSS\nVDDVSS VSS VSS\nGPIO83/\nXA11VDDIO\nVDDVSS VSS VSS\nGPIO86/\nXA14VDDIO VSS VDD VDDVDD\nGPIO87/\nXA15VSS VSS VDDIO VDDIO VSSVSS\nVSS VSSGPIO6/\nEPWM4A/\nEPWMSYNCI/\nEPWMSYNCO\nGPIO3/\nEPWM2B/\nECAP5/\nMCLKRBGPIO12/\n/\nCANTXB/\nMDXBTZ1\nGPIO9/\nEPWM5B/\nSCITXDB/\nECAP3\nVSSGPIO0/\nEPWM1AGPIO2/\nEPWM2AGPIO5/\nEPWM3B/\nMFSRA/\nECAP1GPIO8/\nEPWM5A/\nCANTXB/\nADCSOCAOGPIO11/\nEPWM6B/\nSCIRXDB/\nECAP4\nVSS VSSGPIO29/\nSCITXDA/\nXA19GPIO1/\nEPWM1B/\nECAP6/\nMFSRBGPIO4/\nEPWM3AGPIO7/\nEPWM4B/\nMCLKRA/\nECAP2GPIO10/\nEPWM6A/\nCANRXB/\nADCSOCBOFigure 6-7. C2834x 256-Ball ZFE Plastic BGA Lower-Left Quadrant (Bottom View)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n14 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n9H VSS\n10G\nF\n11 12 13 14 15 16E\nC\nB\nAD\nVSSVSS VSS VDD\nVSS\nVSSVSS VDD VSS\nVSS\nVSSVSS VDD VDDIO\nVDD VDD VDD VSS VDDIO\nVDD18VSS VDDIO VDDIO VSS VSS\nVDD VSS\nVDDIOVSS VSS VDDIO\nVSS VSSGPIO36/\nSCIRXDA/\nXZCS0VSSGPIO38/\nXWE0VSS\nXRDGPIO77/\nXD2GPIO74/\nXD5GPIO71/\nXD8\nGPIO34/\nECAP1/\nXREADYGPIO78/\nXD1GPIO75/\nXD4GPIO72/\nXD7\nGPIO28/\nSCIRXDA/\nXZCS6GPIO37/\nECAP2/\nXZCS7GPIO41/\nXA1GPIO43/\nXA3GPIO35/\nSCITXDA/\nXR/W\nX2 XCLKINGPIO40/\nXA0GPIO42/\nXA2GPIO44/\nXA4GPIO45/\nXA5XCLKOUTGPIO79/\nXD0GPIO76/\nXD3GPIO73/\nXD6GPIO70/\nXD9\nXWE1VSSFigure 6-8. C2834x 256-Ball ZFE Plastic BGA Lower-Right Quadrant (Bottom View)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 15\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n6.2 Signal Descriptions\nTable 6-1  describes the signals. The GPIO function (shown in Italics) is the default at reset. The peripheral\nsignals that are listed under them are alternate functions. Some peripheral functions may not be available in all\ndevices. See Table 5-1  for details. Inputs are not 5-V tolerant. All XINTF pins have a drive strength of 4 mA\n(typical). All GPIO pins are I/O/Z, 4-mA drive typical and have an internal pullup, which can be selectively\nenabled or disabled on a per-pin basis. This feature only applies to the GPIO pins. The pullups on GPIO0–\nGPIO11 and GPIO58–GPIO63 pins are not enabled at reset. The pullups on GPIO12–GPIO57 and GPIO64–\nGPIO87 are enabled upon reset.\nTable 6-1. Signal Descriptions\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nJTAG\nTRST M7 R8JTAG test reset with internal pulldown. TRST, when driven high, gives the scan system control of\nthe operations of the device. If this signal is not connected or driven low, the device operates in its\nfunctional mode, and the test reset signals are ignored.\nNOTE: TRST is an active high test pin and must be maintained low at all times during normal\ndevice operation. An external pulldown resistor is recommended on this pin. The value of this\nresistor should be based on drive strength of the debugger pods applicable to the design. A 2.2-kΩ\nresistor generally offers adequate protection. Because this is application-specific, TI recommends\nvalidating each target board for proper operation of the debugger and the application. (I, ↓)\nTCK P9 T11JTAG test clock. An external pullup resistor is required on this pin. A 2.2-kΩ resistor generally offers\nadequate protection.(I)\nTMS M8 P9JTAG test-mode select (TMS) with internal pullup. This serial control input is clocked into the TAP\ncontroller on the rising edge of TCK. (I, ↑)\nTDI L6 T8JTAG test data input (TDI) with internal pullup. TDI is clocked into the selected register (instruction\nor data) on a rising edge of TCK. (I, ↑)\nTDO N7 P8JTAG scan out, test data output (TDO). The contents of the selected register (instruction or data)\nare shifted out of TDO on the falling edge of TCK.\nEMU0 N9 P10Emulator pin 0. When TRST is driven high, this pin is used as an interrupt to or from the emulator\nsystem and is defined as input/output through the JTAG scan. This pin is also used to put the\ndevice into boundary-scan mode. With the EMU0 pin at a logic-high state and the EMU1 pin at a\nlogic-low state, a rising edge on the TRST pin would latch the device into boundary-scan mode.\nNOTE:  An external pullup resistor is recommended on this pin. The value of this resistor should be\nbased on the drive strength of the debugger pods applicable to the design. A 2.2-kΩ to 4.7-kΩ\nresistor is generally adequate. Because this is application-specific, TI recommends validating each\neach target board for proper operation of the debugger and the application.\nEMU1 L9 R10Emulator pin 1. When TRST is driven high, this pin is used as an interrupt to or from the emulator\nsystem and is defined as input/output through the JTAG scan. This pin is also used to put the\ndevice into boundary-scan mode. With the EMU0 pin at a logic-high state and the EMU1 pin at a\nlogic-low state, a rising edge on the TRST pin would latch the device into boundary-scan mode.\nNOTE:  An external pullup resistor is recommended on this pin. The value of this resistor should be\nbased on the drive strength of the debugger pods applicable to the design. A 2.2-kΩ to 4.7-kΩ\nresistor is generally adequate. Because this is application-specific, TI recommends validating each\ntarget board for proper operation of the debugger and the application.\nClock\nXCLKOUT B14 D16Output clock derived from SYSCLKOUT. XCLKOUT is either the same frequency, one-half the\nfrequency, one-fourth the frequency, or one-eighth the frequency of SYSCLKOUT. This is controlled\nby bit 19 (BY4CLKMODE), bits 18:16 (XTIMCLK), and bit 2 (CLKMODE) in the XINTCNF2 register.\nAt reset, XCLKOUT = SYSCLKOUT/8. The XCLKOUT signal can be turned off by setting\nXINTCNF2[CLKOFF] to 1. Unlike other GPIO pins, the XCLKOUT pin is not placed in high-\nimpedance state during a reset.\nXCLKIN D9 A12External Oscillator Input. This pin is to feed a clock from an external 3.3-V oscillator. In this case,\nthe X1 pin must be tied to V SSK. If a crystal/resonator is used (or if an external 1.8-V oscillator is\nused to feed clock to X1 pin), this pin must be tied to V SS. (I)\nX1 C8 A7Internal/External Oscillator Input. To use the internal oscillator, a quartz crystal may be connected\nacross X1 and X2. The X1 pin is referenced to the 1.8-V core digital power supply. A 1.8-V external\noscillator may be connected to the X1 pin. In this case, the XCLKIN pin must be connected to V SS.\nIf a 3.3-V external oscillator is used with the XCLKIN pin, X1 must be tied to V SSK. (I)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n16 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nX2 A8 A9Internal Oscillator Output. A quartz crystal may be connected across X1 and X2. If X2 is not used it\nmust be left unconnected. (O)\nReset\nXRS P8 T10Device Reset (in) and Watchdog Reset (out).\nDevice reset. XRS causes the device to terminate execution. The PC will point to the address\ncontained at the location 0x3FFFC0. When XRS is brought to a high level, execution begins at the\nlocation pointed to by the PC. This pin is driven low by the MCU when a watchdog reset occurs.\nDuring watchdog reset, the XRS pin is driven low for the watchdog reset duration of 512 OSCCLK\ncycles. (I/OD, ↑)\nThe output buffer of this pin is an open drain with an internal pullup. It is recommended that this pin\nbe driven by an open-drain device.\nXRSIO N8 T9XRS I/O Control (I) -  This pin must be connected to the XRS pin on the target board. When XRS is\nlow (reset), the level detected on this pin puts all output buffers on the device in high-impedance\nmode.\nExternal ADC Interface Signals\nEXTSOC1AN1 M2External ADC SOC Group 1 A Output. Trigger for external ADC, this signal is logical OR of\nePWM1/2/3 SOCA internal signals (O)\nEXTSOC1BM3 M3External ADC SOC Group 1 B Output. Trigger for external ADC, this signal is logical OR of\nePWM1/2/3 SOCB internal signals (O)\nEXTSOC2AM2 N1External ADC SOC Group 2 A Output. Trigger for external ADC, this signal is logical OR of\nePWM4/5/6 SOCA internal signals (O)\nEXTSOC2BP1 N2External ADC SOC Group 2 B Output. Trigger for external ADC, this signal is logical OR of\nePWM4/5/6 SOCB internal signals (O)\nEXTSOC3AN2 N3External ADC SOC Group 3 A Output. Trigger for external ADC, this signal is logical OR of\nePWM7/8/9 SOCA internal signals (O)\nEXTSOC3BP2 P2External ADC SOC Group3 B Output. Trigger for external ADC, this signal is logical OR of\nePWM7/8/9 SOCB internal signals (O)\nEXTADCCLK N3 R3 External ADC Clock Signal. Clock for external ADC support, derived from SYSCLK (O)\nGPIO and Peripheral Signals\nGPIO0\nEPWM1A\n-\n-B1 D2General-purpose input/output 0 (I/O/Z)\nEnhanced PWM1 Output A and HRPWM channel (O)\n-\n-\nGPIO1\nEPWM1B\nECAP6\nMFSRBC1 E1General-purpose input/output 1 (I/O/Z)\nEnhanced PWM1 Output B (O)\nEnhanced Capture 6 input/output (I/O)\nMcBSP-B receive frame synch (I/O)\nGPIO2\nEPWM2A\n-\n-F5 E2General-purpose input/output 2 (I/O/Z)\nEnhanced PWM2 Output A and HRPWM channel (O)\n-\n-\nGPIO3\nEPWM2B\nECAP5\nMCLKRBE4 E3General-purpose input/output 3 (I/O/Z)\nEnhanced PWM2 Output B (O)\nEnhanced Capture 5 input/output (I/O)\nMcBSP-B receive clock (I/O)\nGPIO4\nEPWM3A\n-\n-E2 F1General-purpose input/output 4 (I/O/Z)\nEnhanced PWM3 output A and HRPWM channel (O)\n-\n-\nGPIO5\nEPWM3B\nMFSRA\nECAP1E3 F2General-purpose input/output 5 (I/O/Z)\nEnhanced PWM3 output B (O)\nMcBSP-A receive frame synch (I/O)\nEnhanced Capture input/output 1 (I/O)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 17\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nGPIO6\nEPWM4A\nEPWMSYNCI\nEPWMSYNCOF3 F3General-purpose input/output 6 (I/O/Z)\nEnhanced PWM4 output A and HRPWM channel (O)\nExternal ePWM sync pulse input (I)\nExternal ePWM sync pulse output (O)\nGPIO7\nEPWM4B\nMCLKRA\nECAP2F2 G1General-purpose input/output 7 (I/O/Z)\nEnhanced PWM4 output B (O)\nMcBSP-A receive clock (I/O)\nEnhanced capture input/output 2 (I/O)\nGPIO8\nEPWM5A\nCANTXB\nADCSOCAOG4 G2General-purpose input/output 8 (I/O/Z)\nEnhanced PWM5 output A and HRPWM channel (O)\nEnhanced CAN-B transmit (O)\nADC start-of-conversion A (O)\nGPIO9\nEPWM5B\nSCITXDB\nECAP3G2 G3General-purpose input/output 9 (I/O/Z)\nEnhanced PWM5 output B (O)\nSCI-B transmit data(O)\nEnhanced capture input/output 3 (I/O)\nGPIO10\nEPWM6A\nCANRXB\nADCSOCBO G3 H1General-purpose input/output 10 (I/O/Z)\nEnhanced PWM6 output A and HRPWM channel (O)\nEnhanced CAN-B receive (I)\nADC start-of-conversion B (O)\nGPIO11\nEPWM6B\nSCIRXDB\nECAP4H3 H2General-purpose input/output 11 (I/O/Z)\nEnhanced PWM6 output B (O)\nSCI-B receive data (I)\nEnhanced CAP Input/Output 4 (I/O)\nGPIO12\nTZ1\nCANTXB\nMDXBH2 H3General-purpose input/output 12 (I/O/Z)\nTrip Zone input 1 (I)\nEnhanced CAN-B transmit (O)\nMcBSP-B transmit serial data (O)\nGPIO13\nTZ2\nCANRXB\nMDRBH4 J2General-purpose input/output 13 (I/O/Z)\nTrip Zone input 2 (I)\nEnhanced CAN-B receive (I)\nMcBSP-B receive serial data (I)\nGPIO14\nH5 J3General-purpose input/output 14 (I/O/Z)\nTZ3/ XHOLDTrip Zone input 3/External Hold Request. XHOLD, when active (low), requests the external interface\n(XINTF) to release the external bus and place all buses and strobes into a high-impedance state. To\nprevent this from happening when TZ3 signal goes active, disable this function by writing\nXINTCNF2[HOLD] = 1. If this is not done, the XINTF bus will go into high impedance anytime TZ3\ngoes low. On the ePWM side, TZn signals are ignored by default, unless they are enabled by the\ncode. The XINTF will release the bus when any current access is complete and there are no\npending accesses on the XINTF. (I)\nSCITXDB\nMCLKXBSCI-B Transmit (O)\nMcBSP-B transmit clock (I/O)\nGPIO15\nK2 K2General-purpose input/output 15 (I/O/Z)\nTZ4/ XHOLDA Trip Zone input 4/External Hold Acknowledge. The pin function for this option is based on the\ndirection chosen in the GPADIR register. If the pin is configured as an input, then TZ4 function is\nchosen. If the pin is configured as an output, then XHOLDA function is chosen. XHOLDA is driven\nactive (low) when the XINTF has granted an XHOLD request. All XINTF buses and strobe signals\nwill be in a high-impedance state. XHOLDA is released when the XHOLD signal is released.\nExternal devices should only drive the external bus when XHOLDA is active (low). (I/O)\nSCIRXDB\nMFSXBSCI-B receive (I)\nMcBSP-B transmit frame synch (I/O)\nGPIO16\nSPISIMOA\nCANTXB\nTZ5K4 L1General-purpose input/output 16 (I/O/Z)\nSPI slave in, master out (I/O)\nEnhanced CAN-B transmit (O)\nTrip Zone input 5 (I)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n18 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nGPIO17\nSPISOMIA\nCANRXB\nTZ6J5 L2General-purpose input/output 17 (I/O/Z)\nSPI-A slave out, master in (I/O)\nEnhanced CAN-B receive (I)\nTrip zone input 6 (I)\nGPIO18\nSPICLKA\nSCITXDB\nCANRXAL1 M1General-purpose input/output 18 (I/O/Z)\nSPI-A clock input/output (I/O)\nSCI-B transmit (O)\nEnhanced CAN-A receive (I)\nGPIO19\nSPISTEA\nSCIRXDB\nCANTXAP3 T4General-purpose input/output 19 (I/O/Z)\nSPI-A slave transmit enable input/output (I/O)\nSCI-B receive (I)\nEnhanced CAN-A transmit (O)\nGPIO20\nEQEP1A\nMDXA\nCANTXBL4 R4General-purpose input/output 20 (I/O/Z)\nEnhanced QEP1 input A (I)\nMcBSP-A transmit serial data (O)\nEnhanced CAN-B transmit (O)\nGPIO21\nEQEP1B\nMDRA\nCANRXBM4 T5General-purpose input/output 21 (I/O/Z)\nEnhanced QEP1 input B (I)\nMcBSP-A receive serial data (I)\nEnhanced CAN-B receive (I)\nGPIO22\nEQEP1S\nMCLKXA\nSCITXDBN4 R5General-purpose input/output 22 (I/O/Z)\nEnhanced QEP1 strobe (I/O)\nMcBSP-A transmit clock (I/O)\nSCI-B transmit (O)\nGPIO23\nEQEP1I\nMFSXA\nSCIRXDBP4 P5General-purpose input/output 23 (I/O/Z)\nEnhanced QEP1 index (I/O)\nMcBSP-A transmit frame synch (I/O)\nSCI-B receive (I)\nGPIO24\nECAP1\nEQEP2A\nMDXBP5 T6General-purpose input/output 24 (I/O/Z)\nEnhanced capture 1 (I/O)\nEnhanced QEP2 input A (I)\nMcBSP-B transmit serial data (O)\nGPIO25\nECAP2\nEQEP2B\nMDRBM5 R6General-purpose input/output 25 (I/O/Z)\nEnhanced capture 2 (I/O)\nEnhanced QEP2 input B (I)\nMcBSP-B receive serial data (I)\nGPIO26\nECAP3\nEQEP2I\nMCLKXBK6 P6General-purpose input/output 26 (I/O/Z)\nEnhanced capture 3 (I/O)\nEnhanced QEP2 index (I/O)\nMcBSP-B transmit clock (I/O)\nGPIO27\nECAP4\nEQEP2S\nMFSXBM6 T7General-purpose input/output 27 (I/O/Z)\nEnhanced capture 4 (I/O)\nEnhanced QEP2 strobe (I/O)\nMcBSP-B transmit frame synch (I/O)\nGPIO28\nSCIRXDA\nXZCS6A12 B13General-purpose input/output 28 (I/O/Z)\nSCI receive data (I)\nExternal Interface zone 6 chip select (O)\nGPIO29\nSCITXDA\nXA19C3 D1General-purpose input/output 29. (I/O/Z)\nSCI transmit data (O)\nExternal Interface Address Line 19 (O)\nGPIO30\nCANRXA\nXA18C2 C2General-purpose input/output 30 (I/O/Z)\nEnhanced CAN-A receive (I)\nExternal Interface Address Line 18 (O)\nGPIO31\nCANTXA\nXA17B2 B3General-purpose input/output 31 (I/O/Z)\nEnhanced CAN-A transmit (O)\nExternal Interface Address Line 17 (O)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 19\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nGPIO32\nSDAA\nEPWMSYNCI\nADCSOCAOP6 R7General-purpose input/output 32 (I/O/Z)\nI2C data open-drain bidirectional port (I/OD)\nEnhanced PWM external sync pulse input (I)\nADC start-of-conversion A (O)\nGPIO33\nSCLA\nEPWMSYNCO\nADCSOCBON6 P7General-purpose input/output 33 (I/O/Z)\nI2C clock open-drain bidirectional port (I/OD)\nEnhanced PWM external synch pulse output (O)\nADC start-of-conversion B (O)\nGPIO34\nECAP1\nXREADYA13 B14General-purpose input/output 34 (I/O/Z)\nEnhanced Capture input/output 1 (I/O)\nExternal Interface Ready signal\nGPIO35\nSCITXDA\nXR/ WB13 C15General-purpose input/output 35 (I/O/Z)\nSCI-A transmit data (O)\nExternal Interface read, not write strobe\nGPIO36\nSCIRXDA\nXZCS0B12 A13General-purpose input/output 36 (I/O/Z)\nSCI-A receive data (I)\nExternal Interface zone 0 chip select (O)\nGPIO37\nECAP2\nXZCS7D11 B12General-purpose input/output 37 (I/O/Z)\nEnhanced Capture input/output 2 (I/O)\nExternal Interface zone 7 chip select (O)\nGPIO38\n-\nXWE0C12 E15General-purpose input/output 38 (I/O/Z)\n-\nExternal Interface Write Enable 0 (O). XWE0 defaults back to GPIO38 upon reset, during which\ntime it will be high-impedance.\nGPIO39\n-\nXA16A2 B4General-purpose input/output 39 (I/O/Z)\n-\nExternal Interface Address Line 16 (O)\nGPIO40\n-\nXA0E10 C12General-purpose input/output 40 (I/O/Z)\n-\nExternal Interface Address Line 0\nGPIO41\n-\nXA1D10 B11General-purpose input/output 41 (I/O/Z)\n-\nExternal Interface Address Line 1 (O)\nGPIO42\n-\nXA2B10 C11General-purpose input/output 42 (I/O/Z)\n-\nExternal Interface Address Line 2 (O)\nGPIO43\n-\nXA3A10 B10General-purpose input/output 43 (I/O/Z)\n-\nExternal Interface Address Line 3 (O)\nGPIO44\n-\nXA4A9 C10General-purpose input/output 44 (I/O/Z)\n-\nExternal Interface Address Line 4 (O)\nGPIO45\n-\nXA5B9 C9General-purpose input/output 45 (I/O/Z)\n-\nExternal Interface Address Line 5 (O)\nGPIO46\n-\nXA6E7 B8General-purpose input/output 46 (I/O/Z)\n-\nExternal Interface Address Line 6 (O)\nGPIO47\n-\nXA7D6 C8General-purpose input/output 47 (I/O/Z)\n-\nExternal Interface Address Line 7 (O)\nGPIO48\nECAP5\nXD31\nSPISIMODM10 R11General-purpose input/output 48 (I/O/Z)\nEnhanced Capture input/output 5 (I/O)\nExternal Interface Data Line 31 (O)\nSPI-D slave in, master out (I/O)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n20 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nGPIO49\nECAP6\nXD30\nSPISOMIDP10 P11General-purpose input/output 49 (I/O/Z)\nEnhanced Capture input/output 6 (I/O)\nExternal Interface Data Line 30 (O)\nSPI-D slave out, master in (I/O)\nGPIO50\nEQEP1A\nXD29\nSPICLKDN10 T12General-purpose input/output 50 (I/O/Z)\nEnhanced QEP 1input A (I)\nExternal Interface Data Line 29 (O)\nSPI-D Clock input/output (I/O)\nGPIO51\nEQEP1B\nXD28\nSPISTEDN11 R12General-purpose input/output 51 (I/O/Z)\nEnhanced QEP 1input B (I)\nExternal Interface Data Line 28 (O)\nSPI-D slave transmit enable input/output (I/O)\nGPIO52\nEQEP1S\nXD27M11 P12General-purpose input/output 52 (I/O/Z)\nEnhanced QEP 1Strobe (I/O)\nExternal Interface Data Line 27 (O)\nGPIO53\nEQEP1I\nXD26L11 T13General-purpose input/output 53 (I/O/Z)\nEnhanced QEP1 lndex (I/O)\nExternal Interface Data Line 26 (O)\nGPIO54\nSPISIMOA\nXD25\nEQEP3AP12 R13General-purpose input/output 54 (I/O/Z)\nSPI-A slave in, master out (I/O)\nExternal Interface Data Line 25 (O)\nEnhanced QEP3 input A (I)\nGPIO55\nSPISOMIA\nXD24\nEQEP3BN12 P13General-purpose input/output 55 (I/O/Z)\nSPI-A slave out, master in (I/O)\nExternal Interface Data Line 24 (O)\nEnhanced QEP3 input B (I)\nGPIO56\nSPICLKA\nXD23\nEQEP3SP13 R14General-purpose input/output 56 (I/O/Z)\nSPI-A clock (I/O)\nExternal Interface Data Line 23 (O)\nEnhanced QEP3 strobe (I/O)\nGPIO57\nSPISTEA\nXD22\nEQEP3IN13 P15General-purpose input/output 57 (I/O/Z)\nSPI-A slave transmit enable (I/O)\nExternal Interface Data Line 22 (O)\nEnhanced QEP3 index (I/O)\nGPIO58\nMCLKRA\nXD21\nEPWM7AP14 N16General-purpose input/output 58 (I/O/Z)\nMcBSP-A receive clock (I/O)\nExternal Interface Data Line 21 (O)\nEnhanced PWM 7 output A and HRPWM channel (O)\nGPIO59\nMFSRA\nXD20\nEPWM7BM13 N15General-purpose input/output 59 (I/O/Z)\nMcBSP-A receive frame synch (I/O)\nExternal Interface Data Line 20 (O)\nEnhanced PWM 7 output B (O)\nGPIO60\nMCLKRB\nXD19\nEPWM8AM14 M16General-purpose input/output 60 (I/O/Z)\nMcBSP-B receive clock (I/O)\nExternal Interface Data Line 19 (O)\nEnhanced PWM 8 output A and HRPWM channel (O)\nGPIO61\nMFSRB\nXD18\nEPWM8BL12 M15General-purpose input/output 61 (I/O/Z)\nMcBSP-B receive frame synch (I/O)\nExternal Interface Data Line 18 (O)\nEnhanced PWM8 output B (O)\nGPIO62\nSCIRXDC\nXD17\nEPWM9AL13 M14General-purpose input/output 62 (I/O/Z)\nSCI-C receive data (I)\nExternal Interface Data Line 17 (O)\nEnhanced PWM9 output A and HRPWM channel (O)\nGPIO63\nSCITXDC\nXD16\nEPWM9BK13 L16General-purpose input/output 63 (I/O/Z)\nSCI-C transmit data (O)\nExternal Interface Data Line 16 (O)\nEnhanced PWM9 output B (O)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 21\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nGPIO64\n-\nXD15K12 L15General-purpose input/output 64 (I/O/Z)\n-\nExternal Interface Data Line 15 (O)\nGPIO65\n-\nXD14K14 L14General-purpose input/output 65 (I/O/Z)\n-\nExternal Interface Data Line 14 (O)\nGPIO66\n-\nXD13J11 K15General-purpose input/output 66 (I/O/Z)\n-\nExternal Interface Data Line 13 (O)\nGPIO67\n-\nXD12J12 K14General-purpose input/output 67 (I/O/Z)\n-\nExternal Interface Data Line 12 (O)\nGPIO68\n-\nXD11J13 J15General-purpose input/output 68 (I/O/Z)\n-\nExternal Interface Data Line 11 (O)\nGPIO69\n-\nXD10H13 J14General-purpose input/output 69 (I/O/Z)\n-\nExternal Interface Data Line 10 (O)\nGPIO70\n-\nXD9H12 H16General-purpose input/output 70 (I/O/Z)\n-\nExternal Interface Data Line 9 (O)\nGPIO71\n-\nXD8G12 H15General-purpose input/output 71 (I/O/Z)\n-\nExternal Interface Data Line 8 (O)\nGPIO72\n-\nXD7G13 H14General-purpose input/output 72 (I/O/Z)\n-\nExternal Interface Data Line 7 (O)\nGPIO73\n-\nXD6F14 G16General-purpose input/output 73 (I/O/Z)\n-\nExternal Interface Data Line 6 (O)\nGPIO74\n-\nXD5F13 G15General-purpose input/output 74 (I/O/Z)\n-\nExternal Interface Data Line 5 (O)\nGPIO75\n-\nXD4F12 G14General-purpose input/output 75 (I/O/Z)\n-\nExternal Interface Data Line 4 (O)\nGPIO76\n-\nXD3E13 F16General-purpose input/output 76 (I/O/Z)\n-\nExternal Interface Data Line 3 (O)\nGPIO77\n-\nXD2E11 F15General-purpose input/output 77 (I/O/Z)\n-\nExternal Interface Data Line 2 (O)\nGPIO78\n-\nXD1F10 F14General-purpose input/output 78 (I/O/Z)\n-\nExternal Interface Data Line 1 (O)\nGPIO79\n-\nXD0C14 E16General-purpose input/output 79 (I/O/Z)\n-\nExternal Interface Data Line 0 (O)\nGPIO80\n-\nXA8E6 B7General-purpose input/output 80 (I/O/Z)\n-\nExternal Interface Address Line 8 (O)\nGPIO81\n-\nXA9C5 C7General-purpose input/output 81 (I/O/Z)\n-\nExternal Interface Address Line 9 (O)\nGPIO82\n-\nXA10A5 B6General-purpose input/output 82 (I/O/Z)\n-\nExternal Interface Address Line 10 (O)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n22 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nGPIO83\n-\nXA11B5 C6General-purpose input/output 83 (I/O/Z)\n-\nExternal Interface Address Line 11 (O)\nGPIO84\n-\nXA12D5 A5General-purpose input/output 84 (I/O/Z)\n-\nExternal Interface Address Line 12 (O)\nGPIO85\n-\nXA13D4 B5General-purpose input/output 85 (I/O/Z)\n-\nExternal Interface Address Line 13 (O)\nGPIO86\n-\nXA14A3 C5General-purpose input/output 86 (I/O/Z)\n-\nExternal Interface Address Line 14 (O)\nGPIO87\n-\nXA15B3 A4General-purpose input/output 87 (I/O/Z)\n-\nExternal Interface Address Line 15 (O)\nXRD A14 D15External Interface Read Enable (O). The XRD pin is high-impedance on reset. It stays that way as\nlong as the XINTF clock is turned off (which happens on reset).\nXWE1 C13 E14External Memory Interface Write Enable for Upper 16-bits (O). The XWE1 pin is high-impedance on\nreset. It stays that way as long as the XINTF clock is turned off (which happens on reset).\nCPU and I/O Power Pins\nVDD18 E8 A6\nOscillator and PLL Power Pin (1.8 V)\nVDD18 C7 A11\nVSSKB8 A8Oscillator Kelvin Reference Ground. This pin should not be connected to Vss. See Figure 8-29\nthrough Figure 8-31  for proper application board connections.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 23\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nVDD D1 C1\nCPU and logic digital power pins (1.1 V/1.2 V)VDD E1 C16\nVDD G1 E6\nVDD K3 E7\nVDD M1 E8\nVDD N5 E9\nVDD P7 E10\nVDD J3 E11\nVDD J4 F5\nVDD K9 F12\nVDD L10 G5\nVDD N14 G12\nVDD K11 H5\nVDD H11 H12\nVDD H14 J5\nVDD G10 J12\nVDD E12 K3\nVDD D12 K5\nVDD C11 K12\nVDD C10 L3\nVDD B7 L5\nVDD C6 L12\nVDD E5 M6\nVDD C4 M7\nVDD M8\nVDD M9\nVDD M10\nVDD M11\nVDD P1\nVDD P16\nVDDIO D3 A3\nDigital I/O power pins (3.3 V)VDDIO F1 A14\nVDDIO J1 B9\nVDDIO L2 D5\nVDDIO K5 D6\nVDDIO K7 D8\nVDDIO K8 D11\nVDDIO P11 D12\nVDDIO L14 E4TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n24 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nVDDIO J14 E13\nDigital I/O power pinsVDDIO F11 F4\nVDDIO D14 F13\nVDDIO A11 J1\nVDDIO C9 J4\nVDDIO D7 J13\nVDDIO B6 J16\nVDDIO B4 L4\nVDDIO L13\nVDDIO M4\nVDDIO M13\nVDDIO N5\nVDDIO N6\nVDDIO N8\nVDDIO N11\nVDDIO N12\nVDDIO R9\nVDDIO T3\nVDDIO T14www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 25\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nVSS D2 A1\nDigital ground pinsVSS F4 A2\nVSS G5 A10\nVSS H1 A15\nVSS J2 A16\nVSS K1 B1\nVSS L3 B2\nVSS L5 B15\nVSS L7 B16\nVSS L8 C3\nVSS M9 C4\nVSS K10 C13\nVSS M12 C14\nVSS J10 D3\nVSS H10 D4\nVSS G14 D7\nVSS G11 D9\nVSS E14 D10\nVSS D13 D13\nVSS B11 D14\nVSS E9 E5\nVSS D8 E12\nVSS A7 F6\nVSS A6 F7\nVSS A4 F8\nVSS F9\nVSS F10TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n26 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nVSS F11\nDigital ground pinsVSS G4\nVSS G6\nVSS G7\nVSS G8\nVSS G9\nVSS G10\nVSS G11\nVSS G13\nVSS H4\nVSS H6\nVSS H7\nVSS H8\nVSS H9\nVSS H10\nVSS H11\nVSS H13\nVSS J6\nVSS J7\nVSS J8\nVSS J9\nVSS J10\nVSS J11\nVSS K1\nVSS K4\nVSS K6\nVSS K7\nVSS K8\nVSS K9\nVSS K10\nVSS K11\nVSS K13\nVSS K16\nVSS L6\nVSS L7\nVSS L8\nVSS L9\nVSS L10\nVSS L11\nVSS M5\nVSS M12\nVSS N4\nVSS N7\nVSS N9\nVSS N10\nVSS N13www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 27\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 6-1. Signal Descriptions (continued)\nNAMEZHH\nBALL #ZFE\nBALL #DESCRIPTION\nVSS N14\nDigital ground pinsVSS P3\nVSS P4\nVSS P14\nVSS R1\nVSS R2\nVSS R15\nVSS R16\nVSS T1\nVSS T2\nVSS T15\nVSS T16TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n28 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7 Specifications\nThis section provides the absolute maximum ratings and the recommended operating conditions.\n7.1 Absolute Maximum Ratings (1) (2)\nMIN MAX UNIT\nSupply voltage VDDIO with respect to V SS –0.3 4\nV VDD with respect to V SS –0.3 1.5\nVDD18 with respect to V SS –0.3 2.4\nInput voltage VIN (3.3 V) –0.3 4\nV\nVIN (1.8 V) –0.3 2.4\nOutput voltage VO –0.3 4 V\nInput clamp current IIK (VIN < 0 or V IN > V DDIO)(3)–20 20 mA\nOutput clamp current IOK (VO < 0 or V O > V DDIO) –20 20 mA\nJunction temperature TJ (4)–40 150 °C\nStorage temperature Tstg (4)–65 150 °C\n(1) Stresses beyond those listed under Absolute Maximum Ratings  may cause permanent damage to the device. These are stress ratings\nonly, and functional operation of the device at these or any other conditions beyond those indicated under Section 7.4  is not implied.\nExposure to absolute-maximum-rated conditions for extended periods may affect device reliability.\n(2) All voltage values are with respect to V SS, unless otherwise noted.\n(3) Continuous clamp current per pin is ±2 mA.\n(4) One or both of the following conditions may result in a reduction of overall device life:\n• long-term high-temperature storage\n• extended use at maximum temperature\nFor additional information, see Semiconductor and IC Package Thermal Metrics .\n7.2 ESD Ratings – Automotive\nVALUE UNIT\nTMS320C2834x in ZFE Package\nV(ESD) Electrostatic dischargeHuman body model (HBM), per AEC Q100-002(1)±2000\nV\nCharged-device model (CDM), per AEC Q100-011All pins ±500\nCorner pins on 256-ball\nZFE: A1, A16, T1, T16±750\n(1) AEC Q100-002 indicates HBM stressing is done in accordance wit hthe ANSI/ESDA/JEDEC JS-001 specification.\n7.3 ESD Ratings – Commercial\nVALUE UNIT\nTMS320C2834x in ZHH Package\nV(ESD) Electrostatic dischargeHuman-body model (HBM), per ANSI/ESDA/JEDEC JS-001(1)±2000\nV Charged-device model (CDM), per JEDEC specification JESD22-\nC101(2)±500\n(1) JEDEC document JEP155 states that 500-V HBM allows safe manufacturing with a standard ESD control process.\n(2) JEDEC document JEP157 states that 250-V CDM allows safe manufacturing with a standard ESD control process.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 29\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.4 Recommended Operating Conditions\nMIN NOM MAX UNIT\nDevice supply voltage, I/O, V DDIO 3.14 3.3 3.46 V\nDevice supply voltage CPU, V DD300-MHz devices 1.14 1.2 1.26\nV\n200-MHz devices 1.05 1.1 1.16\nSupply ground, V SS, VSSIO 0 V\nOscillator supply ground, V SSK 0 V\nPLL/oscillator supply, V DD18 1.71 1.8 1.89 V\nDevice clock frequency (system clock),\nfSYSCLKOUTC28346/C28344/C28342\n(VDD = 1.2 V ± 5%)2 300\nMHz\nC28345/C28343/C28341\n(VDD = 1.1 V ± 5%)2 200\nHigh-level input voltage, V IH (3.3 V) 2 VDDIO + 0.3 V\nHigh-level input voltage, V IH (1.8 V) 0.7 * V DD18 V\nLow-level input voltage, V IL (3.3 V) VSS – 0.3 0.8 V\nLow-level input voltage, V IL (1.8 V) 0.3 * V DD18 V\nHigh-level output source current,\nVOH = 2.4 V, I OHAll I/Os –4mA\nLow-level output sink current,\nVOL = V OL MAX, I OLAll I/Os 4mA\nJunction temperature, T J (1)T version –40 105\n°CS version –40 125\nQ version\n(AEC Q100 Qualification)–40 125\n(1) T A (Ambient temperature) is product- and application-dependent and can go up to the specified T J maximum of the device. See\nSection 7.8 , Thermal Design Considerations.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n30 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.5 Power Consumption Summary\n7.5.1 TMS320C28346/C28344 (1) Current Consumption by Power-Supply Pins at 300-MHz SYSCLKOUT\nMODE TEST CONDITIONSIDD IDDIO (2)IDD18\n25°C 105°C 125°C 25°C 105°C 125°C 25°C 105°C 125°C\nTypical OperationalThe following peripheral clocks are\nenabled:\n• ePWM1, ePWM2, ePWM3,\nePWM4, ePWM5, ePWM6,\nePWM7, ePWM8, ePWM9\n• eCAP1, eCAP2, eCAP3\n• eQEP1, eQEP2, eQEP3\n• eCAN-A\n• SCI-A, SCI-B (FIFO mode)\n• SPI-A (FIFO mode)\n• McBSP-A\n• I2C\n• XINTF\n• DMA\n• CPU-Timer 0, CPU-Timer 1,\nCPU-Timer 2\nAll PWM pins are toggled at\n300 kHz.\nAll I/O pins are left unconnected.\nXCLKOUT is turned off. Pullups on\noutput pins and XINTF pins are\ndisabled.(3)335 mA 555 mA 740 mA 75 mA 75 mA 80 mA 50 mA 47 mA 45 mA\nIDLEXCLKOUT is turned off.\nPeripheral clocks are off.205 mA 425 mA 610 mA 15 mA 15 mA 18 mA 50 mA 47 mA 45 mA\nSTANDBY Peripheral clocks are off. 140 mA 360 mA 545 mA 15 mA 15 mA 18 mA 50 mA 47 mA 45 mA\nHALTPeripheral clocks are off.\nInput clock is disabled.(4) 135 mA 355 mA 540 mA 15 mA 15 mA 18 mA 550 μA 550 μA 550 μA\n(1) The I DD numbers in this table are valid for the TMS320C28346 and TMS320C28344 devices only. For the TMS320C28342 device,\nsubtract the I DD current numbers for those peripherals that do not exist on this device (see Table 7-1 ) from the I DD current numbers\nshown in this table.\n(2) I DDIO current is dependent on the electrical loading on the I/O pins.\n(3) The following is done in a loop:\n• Data is continuously transmitted out of the SCI-A, SCI-B, SPI-A, McBSP-A, and eCAN-A ports.\n• Floating-point multiplication and addition are performed.\n• 32-bit read/write of the XINTF is performed.\n• DMA channels 1 and 2 transfer data from SARAM to SARAM.\n• GPIO19 is toggled.\n(4) If a quartz crystal or ceramic resonator is used as the clock source, the HALT mode shuts down the internal oscillator.\nNote\nThe I DD numbers in Section 7.5.1  are valid for the TMS320C28346 and TMS320C28344 devices only.\nFor the TMS320C28342 device, subtract the I DD current numbers for those peripherals that do not\nexist on this device (see Table 7-1 ) from the I DD current numbers shown in Section 7.5.1 .\nNote\nThe peripheral - I/O multiplexing implemented in the device prevents all available peripherals from\nbeing used at the same time. This is because more than one peripheral function may share an I/O pin.\nIt is, however, possible to turn on the clocks to all the peripherals at the same time, although such a\nconfiguration is not useful. If this is done, the current drawn by the device will be more than the\nnumbers specified in the current consumption tables.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 31\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.5.2 TMS320C28345/C28343 (1) Current Consumption by Power-Supply Pins at 200-MHz SYSCLKOUT\nMODE TEST CONDITIONSIDD IDDIO (2)IDD18\n25°C 105°C 125°C 25°C 105°C 125°C 25°C 105°C 125°C\nTypical operationThe following peripheral clocks are\nenabled:\n• ePWM1, ePWM2, ePWM3,\nePWM4, ePWM5, ePWM6,\nePWM7, ePWM8, ePWM9\n• eCAP1, eCAP2, eCAP3\n• eQEP1, eQEP2, eQEP3\n• eCAN-A\n• SCI-A, SCI-B (FIFO mode)\n• SPI-A (FIFO mode)\n• McBSP-A\n• I2C\n• XINTF\n• DMA\n• CPU-TImers 0, CPU-Timer 1,\nCPU-Timer 2\nAll PWM pins are toggled at 200 kHz.\nAll I/O pins are left unconnected.\nXCLKOUT is turned off. Pullups on\noutput pins and XINTF pins are\ndisabled.(3)200 mA 380 mA 500 mA 45 mA 45 mA 45 mA 45 mA 43 mA 40 mA\nIDLEPeripheral clocks are off. XCLKOUT is\nturned off.95 mA 275 mA 395 mA 15 mA 15 mA 18 mA 45 mA 43 mA 40 mA\nSTANDBY Peripheral clocks are off. 45 mA 225 mA 345 mA 15 mA 15 mA 18 mA 45 mA 43 mA 40 mA\nHALTPeripheral clocks are off. Input clock is\ndisabled.(4) 40 mA 220 mA 340 mA 15 mA 15 mA 18 mA 550 μA 550 μA 550 μA\n(1) The I DD numbers in this table are valid for the TMS320C28345 and TMS320C28343 devices only. For the TMS320C28341 device,\nsubtract the I DD current numbers for those peripherals that do not exist on this device (see Table 7-1 ) from the I DD current numbers\nshown in this table.\n(2) I DDIO current is dependent on the electrical loading on the I/O pins.\n(3) The following is done in a loop:\n• Data is continuously transmitted out of the SCI-A, SCI-B, SPI-A, McBSP-A, and eCAN-A ports.\n• Floating-point multiplication and addition are performed.\n• 32-bit read/write of the XINTF is performed.\n• DMA channels 1 and 2 transfer data from SARAM to SARAM.\n• GPIO19 is toggled.\n(4) If a quartz crystal or ceramic resonator is used as the clock source, the HALT mode shuts down the internal oscillator.\nNote\nThe I DD numbers in Section 7.5.2  are valid for the TMS320C28345 and TMS320C28343 devices only.\nFor the TMS320C28341 device, subtract the I DD current numbers for those peripherals that do not\nexist on this device (see Table 7-1 ) from the I DD current numbers shown in Section 7.5.2 .TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n32 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.5.3 Reducing Current Consumption\nMethods of reducing current consumption include the following:\n• Turn off the clock to any peripheral module that is not used in a given application because each peripheral\nunit has an individual clock-enable bit. Table 7-1  indicates the typical reduction in current consumption\nachieved by turning off the clocks.\n• Use any one of the three low-power modes to reduce current even further.\n• Turn off XCLKOUT, reducing I DDIO current consumption by 15 mA (typical).\n• Disable the pullups on pins that assume an output function and on XINTF pins for significant savings in I DDIO.\nNote\nThe TMS320C2834x devices are manufactured in a high-performance process node. Compared to\nthe previous generation of the C28x devices, this process has more leakage current. Leakage current\nis significantly impacted by the operating temperature, and the increase in current with temperature is\nnonlinear. The total power for a given operating condition includes switching/active power plus\nleakage power. Low-power HALT mode power is due to the leakage current alone.\nFigure 7-1  shows the typical leakage current across temperature.\nTemperature (°C) Vs Leakage current (mA)\n0100200300400500600\n-20 0 20 40 60 80 100 120 140\nTemperature (°C)Leakage current (mA)\nFigure 7-1. Temperature Versus Leakage Current (Typical)\nTable 7-1. Typical Current Consumption by Various\nPeripherals (1)\nPERIPHERAL\nMODULEIDD CURRENT\nREDUCTION (mA)\nI2C 5\neQEP 5\nePWM 3www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 33\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 7-1. Typical Current Consumption by Various\nPeripherals (1) (continued)\nPERIPHERAL\nMODULEIDD CURRENT\nREDUCTION (mA)\neCAP 1\nSCI 4\nSPI 4\neCAN 2\nMcBSP 8\nCPU-Timer 1\nXINTF 4(2)\nDMA 7\nFPU 8\n(1) All peripheral clocks (except CPU timer clocks) are disabled\nupon reset. Writing to or reading from peripheral registers is\npossible only after the peripheral clocks are turned on.\n(2) Operating the XINTF bus has a significant effect on IDDIO\ncurrent. It will increase considerably based on the following:\n• How many address/data pins toggle from one cycle to\nanother\n• How fast they toggle\n• Whether 16-bit or 32-bit interface is used and\n• The load on these pins.\n• Whether internal pullups are enabled on the XINTF pins.\n7.6 Electrical Characteristics\nover recommended operating conditions (unless otherwise noted)\nPARAMETER TEST CONDITIONS MIN TYP MAX UNIT\nVOH High-level output voltageIOH = IOH MAX 2.4\nV\nIOH = 50 μA VDDIO – 0.2\nVOL Low-level output voltage IOL = IOL MAX 0.4 V\nIILInput current\n(low level)Pin with pullup\nenabledVDDIO = 3.3 V, V IN = 0 V All I/Os (including XRS) –190 –100\nμA\nPin with pulldown\nenabledVDDIO = 3.3 V, V IN = 0 V ±15\nIIHInput current\n(high level)Pin with pullup\nenabledVDDIO = 3.3 V, V IN = V DDIO ±3\nμA\nPin with pulldown\nenabledVDDIO = 3.3 V, V IN = V DDIO 100 175\nIOZOutput current, pullup or pulldown\ndisabledVO = V DDIO or 0 V ±15 μA\nCI Input capacitance 2 pFTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n34 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.7 Thermal Resistance Characteristics\n7.7.1 ZHH Package\n°C/W(1) (2)AIR FLOW (lfm)(3)\nRΘJC Junction-to-case 10.3 0\nRΘJB Junction-to-board 21.2 0\nRΘJA\n(High k PCB)Junction-to-free air40.8 0\n32.4 150\n31.0 250\n29.1 500\nPsiJT Junction-to-package top0.4 0\n0.5 150\n0.6 250\n0.8 500\nPsiJB Junction-to-board21.0 0\n20.4 150\n20.2 250\n19.9 500\n(1) °C/W = degrees Celsius per watt\n(2) These values are based on a JEDEC-defined 2S2P system (with the exception of the Theta JC [RΘ JC] value, which is based on a\nJEDEC-defined 1S0P system) and will change based on environment as well as application. For more information, see these EIA/\nJEDEC standards:\n• JESD51-2, Integrated Circuits Thermal Test Method Environmental Conditions - Natural Convection (Still Air)\n• JESD51-3, Low Effective Thermal Conductivity Test Board for Leaded Surface Mount Packages\n• JESD51-7, High Effective Thermal Conductivity Test Board for Leaded Surface Mount Packages\n• JESD51-9, Test Boards for Area Array Surface Mount Package Thermal Measurements\n(3) lfm = linear feet per minute\n7.7.2 ZFE Package\n°C/W(1) (2)AIR FLOW (lfm)(3)\nRΘJC Junction-to-case 14 0\nRΘJB Junction-to-board 13.9 0\nRΘJA\n(High k PCB)Junction-to-free air30 0\n21.8 150\n20.6 250\n19.1 500\nPsiJT Junction-to-package top1.24 0\n2.63 150\n3.15 250\n4.05 500\nPsiJB Junction-to-board14 0\n13.6 150\n13.5 250\n13.4 500\n(1) °C/W = degrees Celsius per watt\n(2) These values are based on a JEDEC-defined 2S2P system (with the exception of the Theta JC [RΘ JC] value, which is based on a\nJEDEC-defined 1S0P system) and will change based on environment as well as application. For more information, see these EIA/\nJEDEC standards:\n• JESD51-2, Integrated Circuits Thermal Test Method Environmental Conditions - Natural Convection (Still Air)\n• JESD51-3, Low Effective Thermal Conductivity Test Board for Leaded Surface Mount Packageswww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 35\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n• JESD51-7, High Effective Thermal Conductivity Test Board for Leaded Surface Mount Packages\n• JESD51-9, Test Boards for Area Array Surface Mount Package Thermal Measurements\n(3) lfm = linear feet per minute\n7.8 Thermal Design Considerations\nBased on the end application design and operational profile, the I DD and I DDIO currents could vary. Systems that\nexceed the recommended maximum power dissipation in the end product may require additional thermal\nenhancements. Ambient temperature (T A) varies with the end application and product design. The critical factor\nthat affects reliability and functionality is T J, the junction temperature, not the ambient temperature. Hence, care\nshould be taken to keep T J within the specified limits. T case should be measured to estimate the operating\njunction temperature T J. Tcase is normally measured at the center of the package top-side surface. The thermal\napplication report Semiconductor and IC package thermal metrics  helps to understand the thermal metrics and\ndefinitions.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n36 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9 Timing and Switching Characteristics\n7.9.1 Timing Parameter Symbology\nTiming parameter symbols used are created in accordance with JEDEC Standard 100. To shorten the symbols,\nsome of the pin names and other related terminology have been abbreviated as follows:\nLowercase subscripts and their\nmeanings:Letters and symbols and their\nmeanings:\na access time H High\nc cycle time (period) L Low\nd delay time V Valid\nf fall time X Unknown, changing, or don\'t care level\nh hold time Z High impedance\nr rise time\nsu setup time\nt transition time\nv valid time\nw pulse duration (width)\n7.9.1.1 General Notes on Timing Parameters\nAll output signals from the 28x devices (including XCLKOUT) are derived from an internal clock such that all\noutput transitions for a given half-cycle occur with a minimum of skewing relative to each other.\nThe signal combinations shown in the following timing diagrams may not necessarily represent actual cycles. For\nactual cycle examples, see the appropriate cycle description section of this document.\n7.9.1.2 Test Load Circuit\nThis test load circuit is used to measure all switching characteristics provided in this document.\nTransmission Line\n4.0 pF 1.85 pFZ0 = 50 Ω(Α)Tester Pin ElectronicsData Sheet T iming Reference Point\nOutput\nUnder\nTest42 Ω 3.5 nH\nDevice Pin(B)\nA. Input requirements in this data sheet are tested with an input slew rate of < 4 Volts per nanosecond (4 V/ns) at the device pin.\nB. The data sheet provides timing at the device pin. For output timing analysis, the tester pin electronics and its transmission line effects\nmust be taken into account. A transmission line with a delay of 2 ns or longer can be used to produce the desired transmission line\neffect. The transmission line is intended as a load only. It is not necessary to add or subtract the transmission line delay (2 ns or longer)\nfrom the data sheet timing.\nFigure 7-2. 3.3-V Test Load Circuitwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 37\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.1.3 Device Clock Table\nThis section provides the timing requirements and switching characteristics for the various clock options\navailable. Section 7.9.1.3.1  and Section 7.9.1.3.2  list the cycle times of various clocks.\n7.9.1.3.1 Clocking and Nomenclature (300-MHz Devices)\nMIN NOM MAX UNIT\nOn-chip oscillator clock (crystal/resonator–X1/X2)tc(OSC) , Cycle time 33.3 125 ns\nFrequency 8 30 MHz\nXCLKIN(5)PLL enabledtc(CI), Cycle time (C8) 6.67 50 ns\nFrequency 2 150 MHz\nPLL disabledtc(CI), Cycle time (C8) 6.67 250 ns\nFrequency 4 150 MHz\nX1(5)PLL enabledtc(CI), Cycle time (C8) 10 50 ns\nFrequency 2 100 MHz\nPLL disabledtc(CI), Cycle time (C8) 10 250 ns\nFrequency 4 100 MHz\nSYSCLKOUTtc(SCO) , Cycle time 3.33 500 ns\nFrequency 2 300 MHz\nXCLKOUTtc(XCO) , Cycle time 13.3 2000 ns\nFrequency 0.5 75(4)MHz\nHSPCLK/EXTADCCLK(2)tc(HCO) , Cycle time 25 ns\nFrequency 40 MHz\nLSPCLK(1)tc(LCO) , Cycle time 6.67 13.3(3)ns\nFrequency 75(3)150 MHz\n(1) Lower LSPCLK and HSPCLK will reduce device power consumption.\n(2) This frequency is limited by GPIO switching characteristics.\n(3) This is the value if SYSCLKOUT = 300 MHz.\n(4) Although the maximum XCLKOUT frequency is 75 MHz, this value may not be attainable depending on SYSCLKOUT and available\nprescalers.\n(5) The input clock frequency and PLLCR[DIV] values should be chosen such that the output frequency of the PLL(VCOCLK) lies between\n400 MHz to 600 MHz.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n38 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.1.3.2 Clocking and Nomenclature (200-MHz Devices)\nMIN NOM MAX UNIT\nOn-chip oscillator clock (crystal/resonator–X1/X2)tc(OSC) , Cycle time 33.3 125 ns\nFrequency 8 30 MHz\nXCLKIN(5)PLL enabledtc(CI), Cycle time (C8) 6.67 50 ns\nFrequency 2 150 MHz\nPLL disabledtc(CI), Cycle time (C8) 6.67 250 ns\nFrequency 4 150 MHz\nX1(5)PLL enabledtc(CI), Cycle time (C8) 10 50 ns\nFrequency 2 100 MHz\nPLL disabledtc(CI), Cycle time (C8) 10 250 ns\nFrequency 4 100 MHz\nSYSCLKOUTtc(SCO) , Cycle time 5 500 ns\nFrequency 2 200 MHz\nXCLKOUTtc(XCO) , Cycle time 13.3 2000 ns\nFrequency 0.5 75(4)MHz\nHSPCLK/EXTADCCLK(1)tc(HCO) , Cycle time 8 ns\nFrequency 40 MHz\nLSPCLK(2)tc(LCO) , Cycle time 10 20(3)ns\nFrequency 50(3)100 MHz\n(1) This frequency is limited by GPIO switching characteristics.\n(2) Lower LSPCLK and HSPCLK will reduce device power consumption.\n(3) This is the value if SYSCLKOUT = 200 MHz.\n(4) Although the maximum XCLKOUT frequency is 75 MHz, this value may not be attainable depending on SYSCLKOUT and available\nprescalers.\n(5) The input clock frequency and PLLCR[DIV] values should be chosen such that the output frequency of the PLL(VCOCLK) lies between\n400 MHz to 600 MHz.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 39\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.2 Power Sequencing\nNo special requirements are placed on the power up/down sequence of the various power pins to ensure the\ncorrect reset state for all the modules. However, if the 3.3-V transistors in the level shifting output buffers of the\nI/O pins are powered prior to the 1.1-V/1.2-V transistors, it is possible for the output buffers to turn on, causing a\nglitch to occur on the pin during power up. To avoid this behavior, power the V DD pins prior to or simultaneously\nwith the V DDIO pins, ensuring that the V DD pins have reached 0.7-V before the V DDIO pins reach 0.7 V. The 1.8-V\nrail for the PLL and oscillator logic can be powered up along with V DD/VDDIO rails. The 1.8-V rail must be\npowered even if the PLL is not used. It should never be left unpowered. In any configuration, all the rails should\nramp up within t pup (5 ms, typical) to allow early stability of clocks and IOs.\nThere is a requirement on the XRS pin:\n• During power up, the XRS pin must be held low for t w(RSL1)  after the input clock is stable. This is to enable the\nentire device to start from a known condition.\nNo voltage larger than a diode drop (0.7 V) above V DDIO should be applied to any digital pin before powering up\nthe device. Voltages applied to pins on an unpowered device can bias internal P-N junctions in unintended ways\nand produce unpredictable results.\n7.9.2.1 Power Management and Supervisory Circuit Solutions\nLDO selection depends on the total power consumed in the end application. Go to the Power Management  page\nfor a list of TI power management ICs. Click the Reference designs  tab for specific power management\nreference designs.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n40 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\ntw(RSL1)\nth(boot-mode)(B)XCLKIN\nX1/X2\nXRS\nBoot-Mode\nPinsV (1.2□V/1.1□V)DD\nXCLKOUT\nI/O□PinsUser-Code□DependentUser-Code□Dependent\nBoot-ROM□Execution□StartsPeripheral/GPIO□Function\nBased□on□Boot□CodeGPIO□Pins□as□InputOSCCLK/64(A)\nGPIO□Pins□as□Input□(State□Depends□on□Internal□PU/PD)tOSCST\nUser-Code□DependentAddress/Data/\nControl\n(Internal)Address/Data□Valid.□Internal□Boot-ROM□Code□Execution□Phase\nUser-Code□Execution□Phase td(EX)OSCCLK/16V (3.3□V)DDIO\nV (1.8□V)DD18\ntpup\n(C)A. Upon power up, SYSCLKOUT is OSCCLK/8. Because the XTIMCLK, CLKMODE, and BY4CLKMODE bits in the XINTFCNF2 register\ncome up with a reset state of 1, SYSCLKOUT is further divided by 8 before it applies to XCLKOUT. This explains why XCLKOUT =\nOSCCLK/64 during this phase. Subsequently, boot ROM changes SYSCLKOUT to OSCLK/2. Because the XTIMCLK register is\nunchanged by the boot ROM, XCLKOUT is OSCCLK/16 during this phase.\nB. After reset, the boot ROM code samples Boot Mode pins. Based on the status of the Boot Mode pin, the boot code branches to\ndestination memory or boot code function. If boot ROM code executes after power-on conditions (in debugger environment), the boot\ncode execution time is based on the current SYSCLKOUT speed. The SYSCLKOUT will be based on user environment and could be\nwith or without PLL enabled.\nC. See Section 7.9.2  for requirements to ensure a high-impedance state for GPIO pins during power up.\nFigure 7-3. Power-on Resetwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 41\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.2.2 Reset ( XRS) Timing Requirements\nMIN NOM MAX UNIT\ntw(RSL1)  (1)Pulse duration, stable input clock to XRS high 64tc(OSCCLK) cycles\ntw(RSL2) Pulse duration, XRS low Warm reset 64tc(OSCCLK) cycles\ntw(WDRS)Pulse duration, reset pulse generated by\nwatchdog512t c(OSCCLK) cycles\ntd(EX) Delay time, address/data valid after XRS high 32tc(OSCCLK) cycles\ntOSCST  (2)Oscillator start-up time 1 10 ms\nth(boot-mode) Hold time for boot-mode pins 200t c(OSCCLK) cycles\ntpup Power-up time 5 ms\n(1) In addition to the t w(RSL1)  requirement, XRS must be low until V DD has reached the minimum operating voltage.\n(2) Dependent on crystal/resonator and board design.\nth(boot-mode)(A)tw(RSL2)XCLKIN\nX1/X2\nXRS\nBoot-Mode\nPinsXCLKOUT\nI/O PinsAddress/Data/\nControl\n(Internal)\nBoot-ROM Execution Starts\nUser-Code Execution StartsUser-Code Dependent\nUser-Code Execution Phase\n(Don’t Care)\nUser-Code DependentUser-Code Execution\nPeripheral/GPIO Function\nUser-Code DependentGPIO Pins as Input (State Depends on Internal PU/PD)GPIO Pins as Input Peripheral/GPIO Functiontd(EX)OSCCLK * 5OSCCLK/8\nA. After reset, the Boot ROM code samples BOOT Mode pins. Based on the status of the Boot Mode pin, the boot code branches to\ndestination memory or boot code function. If Boot ROM code executes after power-on conditions (in debugger environment), the Boot\ncode execution time is based on the current SYSCLKOUT speed. The SYSCLKOUT will be based on user environment and could be\nwith or without PLL enabled.\nFigure 7-4. Warm ResetTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n42 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nFigure 7-5  shows an example for the effect of writing into PLLCR register. In the first phase, PLLCR = 0x0003\nand SYSCLKOUT = OSCCLK × 2. The PLLCR is then written with 0x0007 (setting for OSCCLK × 8). Right after\nthe PLLCR register is written, the PLL lock-up phase begins. During this phase, SYSCLKOUT = OSCCLK/2.\nAfter the PLL lock-up is complete (which takes 2600  OSCCLK cycles), SYSCLKOUT reflects the new operating\nfrequency, OSCCLK × 4.\nOSCCLK\nSYSCLKOUTWrite□to□PLLCR\nOSCCLK□*□2\n(Current□CPU\nFrequency)OSCCLK/2\n(CPU□Frequency□While□PLL□is□Stabilizing\nWith□the□Desired□Frequency .□This□Period\n(PLL□Lock-up□T ime,□t p)□is\n2600□OSCCLK□Cycles□Long.)OSCCLK□*□4\n(Changed□CPU□Frequency)\nFigure 7-5. Example of Effect of Writing Into PLLCR Registerwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 43\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.3 Clock Requirements and Characteristics\n7.9.3.1 XCLKIN/X1 Timing Requirements – PLL Enabled\nNO. MIN MAX UNIT\nC9 tf(CI) Fall time, XCLKIN(1)4 ns\nC10 tr(CI) Rise time, XCLKIN(1)4 ns\nC11 tw(CIL) Pulse duration, XCLKIN low as a percentage of t c(OSCCLK)  (1)40% 60%\nC12 tw(CIH) Pulse duration, XCLKIN high as a percentage of t c(OSCCLK)  (1)40% 60%\n(1) This applies to the X1 pin also.\n7.9.3.2 XCLKIN/X1 Timing Requirements – PLL Disabled\nNO. MIN MAX UNIT\nC9 tf(CI) Fall time, XCLKIN(1)2ns\nC10 tr(CI) Rise time, XCLKIN(1)2ns\nC11 tw(CIL) Pulse duration, XCLKIN low as a percentage of t c(OSCCLK)  (1)45% 55%\nC12 tw(CIH) Pulse duration, XCLKIN high as a percentage of t c(OSCCLK)  (1)45% 55%\n(1) This applies to the X1 pin also.\nThe possible configuration modes are shown in Table 8-34 .\n7.9.3.3 XCLKOUT Switching Characteristics (PLL Bypassed or Enabled) (1) (2)\nNO. PARAMETER MIN TYP MAX UNIT\nC1 tc(XCO) Cycle time, XCLKOUT 13.3 ns\nC3 tf(XCO) Fall time, XCLKOUT 2 ns\nC4 tr(XCO) Rise time, XCLKOUT 2 ns\nC5 tw(XCOL) Pulse duration, XCLKOUT low H – 2 H + 2 ns\nC6 tw(XCOH) Pulse duration, XCLKOUT high H – 2 H + 2 ns\ntp PLL lock time 2600t c(OSCCLK)  (3)cycles\n(1) A load of 40 pF is assumed for these parameters.\n(2) H = 0.5t c(XCO)\n(3) OSCCLK is either the output of the on-chip oscillator or the output from an external oscillator.\n7.9.3.4 Timing Diagram\nC4C3\nXCLKOUT(B)XCLKIN(A)\nC5C9C10\nC1C8\nC6\nA. The relationship of XCLKIN to XCLKOUT depends on the divide factor chosen. The waveform relationship shown is intended to illustrate\nthe timing parameters only and may differ based on actual configuration.\nB. XCLKOUT configured to reflect SYSCLKOUT.\nFigure 7-6. Clock TimingTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n44 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4 Peripherals\n7.9.4.1 General-Purpose Input/Output (GPIO)\n7.9.4.1.1 GPIO - Output Timing\n7.9.4.1.1.1 General-Purpose Output Switching Characteristics\nPARAMETER MIN MAX UNIT\ntr(GPO) Rise time, GPIO switching low to high All GPIOs 11 ns\ntf(GPO) Fall time, GPIO switching high to low All GPIOs 11 ns\ntfGPO Toggling frequency, GPO pins 40 MHz\nGPIO\ntr(GPO)tf(GPO)\nFigure 7-7. General-Purpose Output Timingwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 45\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.1.2 GPIO - Input Timing\n7.9.4.1.2.1 General-Purpose Input Timing Requirements\nMIN MAX UNIT\ntw(SP) Sampling periodQUALPRD = 0 1tc(SCO)cycles\nQUALPRD ≠ 0 2tc(SCO)  * QUALPRD\ntw(IQSW) Input qualifier sampling window tw(SP) * (n(1) – 1) cycles\ntw(GPI)  (2)Pulse duration, GPIO low/highSynchronous mode 2tc(SCO)cycles\nWith input qualifier tw(IQSW)  + tw(SP) + 1t c(SCO)\n(1) "n" represents the number of qualification samples as defined by GPxQSELn register.\n(2) For t w(GPI) , pulse width is measured from V IL to V IL for an active low signal and V IH to V IH for an active high signal.\nGPIO Signal\n1\nSampling Window\nOutput From\nQualifier1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0\nSYSCLKOUT\nQUALPRD = 1\n(SYSCLKOUT/2)(SYSCLKOUT cycle  * 2 * QUALPRD) * 5(C)) (A)\nGPxQSELn = 1,0 (6 samples)\nSampling Period determined \nby GPxCTRL[QUALPRD](B)\n(D)tw(SP)\ntw(IQSW)\nA. This glitch will be ignored by the input qualifier. The QUALPRD bit field specifies the qualification sampling period. It can vary from 00 to\n0xFF. If QUALPRD = 00, then the sampling period is 1 SYSCLKOUT cycle. For any other value "n", the qualification sampling period in\n2n SYSCLKOUT cycles (that is, at every 2n SYSCLKOUT cycles, the GPIO pin will be sampled).\nB. The qualification period selected through the GPxCTRL register applies to groups of 8 GPIO pins.\nC. The qualification block can take either three or six samples. The GPxQSELn Register selects which sample mode is used.\nD. In the example shown, for the qualifier to detect the change, the input should be stable for 10 SYSCLKOUT cycles or greater. In other\nwords, the inputs should be stable for (5 × QUALPRD × 2) SYSCLKOUT cycles. This would ensure 5 sampling periods for detection to\noccur. Because external signals are driven asynchronously, an 13-SYSCLKOUT-wide pulse ensures reliable recognition.\nFigure 7-8. Sampling ModeTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n46 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.1.3 Sampling Window Width for Input Signals\nThe following section summarizes the sampling window width for input signals for various input qualifier\nconfigurations.\nSampling frequency denotes how often a signal is sampled with respect to SYSCLKOUT.\nSampling frequency = SYSCLKOUT/(2 * QUALPRD), if QUALPRD ≠ 0\nSampling frequency = SYSCLKOUT, if QUALPRD = 0\nSampling period = SYSCLKOUT cycle × 2 × QUALPRD, if QUALPRD ≠ 0\nIn the above equations, SYSCLKOUT cycle indicates the time period of SYSCLKOUT.\nSampling period = SYSCLKOUT cycle, if QUALPRD = 0\nIn a given sampling window, either 3 or 6 samples of the input signal are taken to determine the validity of the\nsignal. This is determined by the value written to GPxQSELn register.\nCase 1:\nQualification using three samples\nSampling window width = (SYSCLKOUT cycle × 2 × QUALPRD) × 2, if QUALPRD ≠ 0\nSampling window width = (SYSCLKOUT cycle) × 2, if QUALPRD = 0\nCase 2:\nQualification using six samples\nSampling window width = (SYSCLKOUT cycle × 2 × QUALPRD) × 5, if QUALPRD ≠ 0\nSampling window width = (SYSCLKOUT cycle) × 5, if QUALPRD = 0\nGPIOxnSYSCLK\ntw(GPI)\nFigure 7-9. General-Purpose Input Timingwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 47\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.1.4 Low-Power Mode Wakeup Timing\nThe wakeup signal fed to a GPIO pin to wake up the device must meet the minimum pulse width requirement.\nFurthermore, this signal must be free of glitches. If a noisy signal is fed to a GPIO pin, the wakeup behavior of\nthe device will not be deterministic and the device may not exit low-power mode for subsequent wakeup pulses.\nSection 7.9.4.1.4.1  shows the timing requirements, Section 7.9.4.1.4.2  shows the switching characteristics, and\nFigure 7-10  shows the timing diagram for IDLE mode.\n7.9.4.1.4.1 IDLE Mode Timing Requirements (1)\nMIN MAX UNIT\ntw(WAKE-INT) Pulse duration, external wake-up signalWithout input qualifier 2tc(SCO)cycles\nWith input qualifier 5tc(SCO)  + tw(IQSW)\n(1) For an explanation of the input qualifier parameters, see Section 7.9.4.1.2.1 .\n7.9.4.1.4.2 IDLE Mode Switching Characteristics (1)\nPARAMETER TEST CONDITIONS MIN MAX UNIT\ntd(WAKE-IDLE)Delay time, external wake signal to\nprogram execution resume (2)\n• Wake-up from SARAMWithout input qualifier 20tc(SCO)\ncycles With input qualifier20tc(SCO)  + tw(IQSW)\n(1) For an explanation of the input qualifier parameters, see Section 7.9.4.1.2.1 .\n(2) This is the time taken to begin execution of the instruction that immediately follows the IDLE instruction. execution of an ISR (triggered\nby the wake up) signal involves additional latency.\n7.9.4.1.4.3 IDLE Mode Timing Diagram\nWAKE INT(A)XCLKOUTAddress/Data\n(internal)td(WAKE−IDLE)\ntw(WAKE−INT)\nA. WAKE INT can be any enabled interrupt, WDINT, XNMI, or XRS.\nFigure 7-10. IDLE Entry and Exit TimingTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n48 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.1.4.4 STANDBY Mode Timing Requirements\nMIN MAX UNIT\ntw(WAKE-INT)Pulse duration, external\nwake-up signalWithout input qualification 3tc(OSCCLK)cycles\nWith input qualification(1)(2 + QUALSTDBY) * t c(OSCCLK)\n(1) QUALSTDBY is a 6-bit field in the LPMCR0 register.\n7.9.4.1.4.5 STANDBY Mode Switching Characteristics\nPARAMETER TEST CONDITIONS MIN MAX UNIT\ntd(IDLE-XCOL)Delay time, IDLE instruction\nexecuted to XCLKOUT low32tc(SCO) 45tc(SCO) cycles\ntd(WAKE-STBY)Delay time, external wake signal to\nprogram execution resume(1)\n• Wake up from SARAMWithout input qualifier 100t c(SCO)\ncycles\nWith input qualifier 100t c(SCO)  + tw(WAKE-INT)\n(1) This is the time taken to begin execution of the instruction that immediately follows the IDLE instruction. execution of an ISR (triggered\nby the wake up signal) involves additional latency.\n7.9.4.1.4.6 STANDBY Mode Timing Diagram\ntw(WAKE-INT)\ntd(WAKE-STBY)\ntd(IDLE−XCOL)Wake-up\nSignal\nX1/X2 or\nX1 or \nXCLKIN\nXCLKOUTSTANDBY Normal Execution STANDBY\nFlushing Pipeline(A)\n(B)(C)\n(D)(E)\n(F)\nDevice\nStatus\nA. IDLE instruction is executed to put the device into STANDBY mode.\nB. The PLL block responds to the STANDBY signal. SYSCLKOUT is held for 32 cycles before being turned off. This delay enables the CPU\npipeline and any other pending operations to flush properly. If an access to XINTF is in progress and its access time is longer than this\nnumber then it will fail.  TI recommends entering STANDBY mode from SARAM without an XINTF access in progress.\nC. Clock to the peripherals are turned off. However, the PLL and watchdog are not shut down. The device is now in STANDBY mode.\nD. The external wake-up signal is driven active.\nE. After a latency period, the STANDBY mode is exited.\nF. Normal execution resumes. The device will respond to the interrupt (if enabled).\nFigure 7-11. STANDBY Entry and Exit Timing Diagramwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 49\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.1.4.7 HALT Mode Timing Requirements\nMIN MAX UNIT\ntw(WAKE-GPIO) Pulse duration, GPIO wake-up signal toscst + 2t c(OSCCLK)  (1)cycles\ntw(WAKE-XRS) Pulse duration, XRS wakeup signal toscst + 8t c(OSCCLK) cycles\n(1) See Section 7.9.2.2  for an explanation of t oscst.\n7.9.4.1.4.8 HALT Mode Switching Characteristics\nPARAMETER MIN MAX UNIT\ntd(IDLE-XCOL) Delay time, IDLE instruction executed to XCLKOUT low 32tc(SCO) 45tc(SCO) cycles\ntp PLL lock-up time 2600t c(OSCCLK) cycles\ntd(WAKE-HALT)Delay time, PLL lock to program execution resume\n• Wake up from SARAM35tc(SCO) cycles\n7.9.4.1.4.9 HALT Mode Timing Diagram\ntd(IDLE−XCOL)X1/X2\n or XCLKIN\nXCLKOUTHALT HALT\nWake-up LatencyFlushing Pipeline\ntd(WAKE−HALT)(A)\n(B)(C)\n(D)(E)\nDevice\nStatus(F) (H)\n(G)\nPLL Lock-up T ime Normal\nExecution\ntw(WAKE-GPIO) tpGPIOn\nOscillator Start-up T ime\nA. IDLE instruction is executed to put the device into HALT mode.\nB. The PLL block responds to the HALT signal. SYSCLKOUT is held for 32 cycles before oscillator is turned off and the CLKIN to the core is\nstopped. This delay enables the CPU pipeline and any other pending operations to flush properly. If an access to XINTF is in progress\nand its access time is longer than this number then it will fail.  It is recommended to enter HALT mode from SARAM without an XINTF\naccess in progress.\nC. Clocks to the peripherals are turned off and the PLL is shut down. If a quartz crystal or ceramic resonator is used as the clock source,\nthe internal oscillator is shut down as well. The device is now in HALT mode and consumes absolute minimum power.\nD. When the GPIOn pin (used to bring the device out of HALT) is driven low, the oscillator is turned on and the oscillator wake-up sequence\nis initiated. The GPIO pin should be driven high only after the oscillator has stabilized. This enables the provision of a clean clock signal\nduring the PLL lock sequence. Because the falling edge of the GPIO pin asynchronously begins the wakeup process, care should be\ntaken to maintain a low noise environment prior to entering and during HALT mode.\nE. The wake-up signal fed to a GPIO pin to wake up the device must meet the minimum pulse width requirement. Furthermore, this signal\nmust be free of glitches. If a noisy signal is fed to a GPIO pin, the wake-up behavior of the device will not be deterministic and the device\nmay not exit low-power mode for subsequent wake-up pulses.\nF. Once the oscillator has stabilized, the PLL lock sequence is initiated, which takes 2,600 OSCCLK (X1/X2 or X1 or XCLKIN) cycles.\nG. Clocks to the core and peripherals are enabled. The HALT mode is now exited. The device will respond to the interrupt (if enabled), after\na latency.\nH. Normal operation resumes.\nFigure 7-12. HALT Wakeup Using GPIOnTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n50 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.2 Enhanced Control Peripherals\n7.9.4.2.1 Enhanced Pulse Width Modulator (ePWM) Timing\nPWM refers to PWM outputs on ePWM1–6. Section 7.9.4.2.1.1  shows the ePWM timing requirements and\nSection 7.9.4.2.1.2 , ePWM switching characteristics.\n7.9.4.2.1.1 ePWM Timing Requirements (1)\nMIN MAX UNIT\ntw(SYCIN) Sync input pulse widthAsynchronous 2tc(SCO)\ncycles Synchronous 2tc(SCO)\nWith input qualifier 1tc(SCO)  + tw(IQSW)\n(1) For an explanation of the input qualifier parameters, see Section 7.9.4.1.2.1 .\n7.9.4.2.1.2 ePWM Switching Characteristics\nPARAMETER TEST CONDITIONS MIN MAX UNIT\ntw(PWM) Pulse duration, PWMx output high/low 20 ns\ntw(SYNCOUT) Sync output pulse width 8tc(SCO) cycles\ntd(PWM)tzaDelay time, trip input active to PWM forced high\nDelay time, trip input active to PWM forced lowno pin load 25 ns\ntd(TZ-PWM)HZ Delay time, trip input active to PWM Hi-Z 20 ns\n7.9.4.2.2 Trip-Zone Input Timing\nPWM(B)TZ(A)SYSCLK\ntw(TZ)\ntd(TZ-PWM)HZ\nA.TZ - TZ1, TZ2, TZ3, TZ4, TZ5, TZ6\nB. PWM refers to all the PWM pins in the device. The state of the PWM pins after TZ is taken high depends on the PWM recovery software.\nFigure 7-13. PWM Hi-Z Characteristics\n7.9.4.2.2.1 Trip-Zone Input Timing Requirements (1)\nMIN MAX UNIT\ntw(TZ) Pulse duration, TZx input lowAsynchronous 1tc(SCO)\ncycles Synchronous 2tc(SCO)\nWith input qualifier 1tc(SCO)  + tw(IQSW)\n(1) For an explanation of the input qualifier parameters, see Section 7.9.4.1.2.1 .www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 51\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.2.3 High-Resolution PWM Timing\nSection 7.9.4.2.3.1  shows the high-resolution PWM switching characteristics.\n7.9.4.2.3.1 High-Resolution PWM Characteristics at SYSCLKOUT = (150–300 MHz)\nMIN TYP MAX UNIT\nMicro Edge Positioning (MEP) step size(1)VDD = 1.2 V 55 120 ps\nVDD = 1.1 V 65 140 ps\n(1) The MEP step size will be largest at high temperature and minimum voltage on V DD. MEP step size will increase with higher\ntemperature and lower voltage and decrease with lower temperature and higher voltage.\nApplications that use the HRPWM feature should use MEP Scale Factor Optimizer (SFO) estimation software functions. See the TI\nsoftware libraries for details of using SFO function in end applications. SFO functions help to estimate the number of MEP steps per\nSYSCLKOUT period dynamically while the HRPWM is in operation.\n7.9.4.2.4 Enhanced Capture (eCAP) Timing\nSection 7.9.4.2.4.1  shows the eCAP timing requirement and Section 7.9.4.2.4.2  shows the eCAP switching\ncharacteristics.\n7.9.4.2.4.1 Enhanced Capture (eCAP) Timing Requirements (1)\nMIN MAX UNIT\ntw(CAP) Capture input pulse widthAsynchronous 2tc(SCO)\ncycles Synchronous 2tc(SCO)\nWith input qualifier 1tc(SCO)  + tw(IQSW)\n(1) For an explanation of the input qualifier parameters, see Section 7.9.4.1.2.1 .\n7.9.4.2.4.2 eCAP Switching Characteristics\nPARAMETER TEST CONDITIONS MIN MAX UNIT\ntw(APWM) Pulse duration, APWMx output high/low 20 ns\n7.9.4.2.5 Enhanced Quadrature Encoder Pulse (eQEP) Timing\nSection 7.9.4.2.5.1  shows the eQEP timing requirement and Section 7.9.4.2.5.2  shows the eQEP switching\ncharacteristics.\n7.9.4.2.5.1 Enhanced Quadrature Encoder Pulse (eQEP) Timing Requirements (1)\nMIN MAX UNIT\ntw(QEPP) QEP input periodAsynchronous(2)/synchronous 2tc(SCO)cycles\nWith input qualifier 2[1t c(SCO)  + tw(IQSW) ]\ntw(INDEXH) QEP Index Input High timeAsynchronous(2)/synchronous 2tc(SCO)cycles\nWith input qualifier 2tc(SCO)  + tw(IQSW)\ntw(INDEXL) QEP Index Input Low timeAsynchronous(2)/synchronous 2tc(SCO)cycles\nWith input qualifier 2tc(SCO)  + tw(IQSW)\ntw(STROBH) QEP Strobe High timeAsynchronous(2)/synchronous 2tc(SCO)cycles\nWith input qualifier 2tc(SCO)  + tw(IQSW)\ntw(STROBL) QEP Strobe Input Low timeAsynchronous(2)/synchronous 2tc(SCO)cycles\nWith input qualifier 2tc(SCO)  + tw(IQSW)\n(1) For an explanation of the input qualifier parameters, see Section 7.9.4.1.2.1 .\n(2) Refer to the TMS320C2834x Delfino™ MCUs Silicon Errata  for limitations in the asynchronous mode.\n7.9.4.2.5.2 eQEP Switching Characteristics\nPARAMETER TEST CONDITIONS MIN MAX UNIT\ntd(CNTR)xin Delay time, external clock to counter increment 4tc(SCO) cyclesTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n52 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nPARAMETER TEST CONDITIONS MIN MAX UNIT\ntd(PCS-OUT)QEPDelay time, QEP input edge to position compare sync\noutput6tc(SCO) cycleswww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 53\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.2.6 ADC Start-of-Conversion Timing\n7.9.4.2.6.1 External ADC Start-of-Conversion Switching Characteristics\nPARAMETER MIN MAX UNIT\ntw(ADCSOCL) Pulse duration, ADCSOCxO low 32tc(HCO  ) cycles\n7.9.4.2.6.2 ADCSOCAO or ADCSOCBO Timing\nADCSOCAO\n or\nADCSOCBOtw(ADCSOCL)\nFigure 7-14. ADCSOCAO or ADCSOCBO Timing\n7.9.4.3 External Interrupt Timing\n7.9.4.3.1 External Interrupt Timing Requirements (1)\nMIN MAX UNIT\ntw(INT)  (2)Pulse duration, INT input low/highSynchronous 1tc(SCO)cycles\nWith qualifier 1tc(SCO)  + tw(IQSW)\n(1) For an explanation of the input qualifier parameters, see Section 7.9.4.1.2.1 .\n(2) This timing is applicable to any GPIO pin configured for ADCSOC functionality.\n7.9.4.3.2 External Interrupt Switching Characteristics (1)\nPARAMETER MIN MAX UNIT\ntd(INT) Delay time, INT low/high to interrupt-vector fetch tw(IQSW)  + 12t c(SCO) cycles\n(1) For an explanation of the input qualifier parameters, see Section 7.9.4.1.2.1 .\n7.9.4.3.3 External Interrupt Timing Diagram\nXNMI , XINT1, XINT2tw(INT)\nInterrupt V ectortd(INT)\nAddress bus \n(internal)\nFigure 7-15. External Interrupt TimingTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n54 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.4 I2C Electrical Specification and Timing\n7.9.4.4.1 I2C Timing\nTEST CONDITIONS MIN MAX UNIT\nfSCL SCL clock frequencyI2C clock module frequency is between\n7 MHz and 12 MHz and I2C prescaler and\nclock divider registers are configured\nappropriately400 kHz\nvil Low level input voltage 0.3 V DDIO V\nVih High level input voltage 0.7 V DDIO V\nVhys Input hysteresis 0.05 V DDIO V\nVol Low level output voltage 3-mA sink current 0 0.4 V\ntLOW Low period of SCL clockI2C clock module frequency is between\n7 MHz and 12 MHz and I2C prescaler and\nclock divider registers are configured\nappropriately1.3 μs\ntHIGH High period of SCL clockI2C clock module frequency is between\n7 MHz and 12 MHz and I2C prescaler and\nclock divider registers are configured\nappropriately0.6 μs\nlIInput current with an input voltage\nbetween 0.1 V DDIO and 0.9 V DDIO MAX–10 10 μAwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 55\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.5 Serial Peripheral Interface (SPI) Timing\nThis section contains both Master Mode and Slave Mode timing data.\n7.9.4.5.1 Master Mode Timing\nSection 7.9.4.5.1.1  lists the master mode timing (clock phase = 0) and Section 7.9.4.5.1.2  lists the master mode\ntiming (clock phase = 1). Figure 7-16  and Figure 7-17  show the timing waveforms.\n7.9.4.5.1.1 SPI Master Mode External Timing (Clock Phase = 0) (1) (2) (3) (4) (5)\nNO. PARAMETERBRR EVEN BRR ODD\nUNIT\nMIN MAX MIN MAX\n1 tc(SPC)M Cycle time, SPICLK 4tc(LSPCLK) 128t c(LSPCLK) 5tc(LSPCLK) 127t c(LSPCLK) ns\n2 tw(SPC1)MPulse duration, SPICLK first\npulse0.5t c(SPC)M  – 10 0.5t c(SPC)M  + 100.5t c(SPC)M  + 0.5t c(LSPCLK)\n– 100.5t c(SPC)M  +\n0.5t c(LSPCLK)  + 10ns\n3 tw(SPC2)MPulse duration, SPICLK second\npulse0.5t c(SPC)M  – 10 0.5t c(SPC)M  + 100.5t c(SPC)M  – 0.5t c(LSPCLK)\n– 100.5t c(SPC)M  –\n0.5t c(LSPCLK)  + 10ns\n4 td(SIMO)MDelay time, SPICLK to\nSPISIMO valid10 10 ns\n5 tv(SIMO)MValid time, SPISIMO valid after\nSPICLK0.5t c(SPC)M  – 100.5t c(SPC)M  – 0.5t c(LSPCLK)\n– 10ns\n8 tsu(SOMI)MSetup time, SPISOMI before\nSPICLK20 20 ns\n9 th(SOMI)MHold time, SPISOMI valid after\nSPICLK0 0 ns\n23 td(SPC)MDelay time, SPISTE active to\nSPICLKtc(SPC)M  – 100.5t c(SPC)M  –\n0.5t c(LSPCLK)  – 10ns\n24 td(STE)MDelay time, SPICLK to SPISTE\ninactive0.5t c(SPC)M  – 100.5t c(SPC)M  – 0.5t c(LSPCLK)\n– 10ns\n(1) The MASTER / SLAVE bit (SPICTL.2) is set and the CLOCK PHASE bit (SPICTL.3) is cleared.\n(2) t c(SPC)  = SPI clock cycle time = LSPCLK/4 or LSPCLK/(SPIBRR +1)\n(3) t c(LCO)  = LSPCLK cycle time\n(4) Internal clock prescalers must be adjusted such that the SPI clock speed is limited to the following SPI clock rate:\nMaster mode transmit 25-MHz MAX, master mode receive 12.5-MHz MAX\nSlave mode transmit 12.5-MAX, slave mode receive 12.5-MHz MAX.\n(5) The active edge of the SPICLK signal referenced is controlled by the clock polarity bit (SPICCR.6).TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n56 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n94\nSPISOMISPISIMOSPICLK\n(clock polarity = 1)SPICLK\n(clock polarity = 0)\nMaster In Data\nMust Be Valid8Master Out Data Is V alid321\nSPISTE5\n23 24Figure 7-16. SPI Master Mode External Timing (Clock Phase = 0)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 57\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.5.1.2 SPI Master Mode External Timing (Clock Phase = 1) (1) (2) (3) (4) (5)\nNO. PARAMETERBRR EVEN BRR ODD\nUNIT\nMIN MAX MIN MAX\n1 tc(SPC)M Cycle time, SPICLK 4tc(LSPCLK) 128t c(LSPCLK) 5tc(LSPCLK) 127t c(LSPCLK) ns\n2 tw(SPC1)MPulse duration, SPICLK first\npulse0.5t c(SPC)M  – 10 0.5t c(SPC)M  + 100.5t c(SPC)M  –\n0.5t c(LSPCLK)  – 100.5t c(SPC)M  –\n0.5t c(LSPCLK)  + 10ns\n3 tw(SPC2)MPulse duration, SPICLK second\npulse0.5t c(SPC)M  – 10 0.5t c(SPC)M  + 100.5t c(SPC)M  +\n0.5t c(LSPCLK)  – 100.5t c(SPC)M  +\n0.5t c(LSPCLK)  + 10ns\n6 td(SIMO)MDelay time, SPISIMO valid to\nSPICLK0.5t c(SPC)M  – 100.5t c(SPC)M  +\n0.5t c(LSPCLK)  – 10ns\n7 tv(SIMO)MValid time, SPISIMO valid after\nSPICLK0.5t c(SPC)M  – 100.5t c(SPC)M  –\n0.5t c(LSPCLK)  – 10ns\n10 tsu(SOMI)MSetup time, SPISOMI before\nSPICLK20 20 ns\n11 th(SOMI)MHold time, SPISOMI valid after\nSPICLK0 0 ns\n23 td(SPC)MDelay time, SPISTE active to\nSPICLKtc(SPC)  – 10 tc(SPC)  – 10 ns\n24 td(STE)MDelay time, SPICLK to SPISTE\ninactive0.5t c(SPC)  – 100.5t c(SPC)  –\n0.5t c(LSPCLK)  – 10ns\n(1) The MASTER/SLAVE bit (SPICTL.2) is set and the CLOCK PHASE bit (SPICTL.3) is set.\n(2) t c(SPC)  = SPI clock cycle time = LSPCLK/4 or LSPCLK/(SPIBRR + 1)\n(3) Internal clock prescalers must be adjusted such that the SPI clock speed is limited to the following SPI clock rate:\nMaster mode transmit 25 MHz MAX, master mode receive 12.5 MHz MAX\nSlave mode transmit 12.5 MHz MAX, slave mode receive 12.5 MHz MAX.\n(4) t c(LCO)  = LSPCLK cycle time\n(5) The active edge of the SPICLK signal referenced is controlled by the CLOCK POLARITY bit (SPICCR.6).\n11\nSPISOMISPISIMOSPICLK\n(clock polarity = 1)SPICLK\n(clock polarity = 0)\nMaster In Data Must\nBe ValidMaster Out Data Is V alid1\n76\n1032\n2324\nSPISTE\nFigure 7-17. SPI Master Mode External Timing (Clock Phase = 1)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n58 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.5.2 Slave Mode Timing\nSection 7.9.4.5.2.1  lists the slave mode timing (clock phase = 0) and Section 7.9.4.5.2.2  lists the slave mode\ntiming (clock phase = 1). Figure 7-18  and Figure 7-19  show the timing waveforms.\n7.9.4.5.2.1 SPI Slave Mode External Timing (Clock Phase = 0) (1) (2) (4) (3) (5)\nNO. PARAMETER MIN MAX UNIT\n12 tc(SPC)S Cycle time, SPICLK 4tc(SYSCLK) ns\n13 tw(SPC1)S Pulse duration, SPICLK first pulse 2tc(SYSCLK)  – 1 ns\n14 tw(SPC2)S Pulse duration, SPICLK second pulse 2tc(SYSCLK)  – 1 ns\n15 td(SOMI)S Delay time, SPICLK to SPISOMI valid 20 ns\n16 tv(SOMI)S Valid time, SPISOMI data valid after SPICLK 0 ns\n19 tsu(SIMO)S Setup time, SPISIMO valid before SPICLK 1.5t c(SYSCLK) ns\n20 th(SIMO)S Hold time, SPISIMO data valid after SPICLK 1.5t c(SYSCLK) ns\n25 tsu(STE)S Setup time, SPISTE active before SPICLK 1.5t c(SYSCLK) ns\n26 th(STE)S Hold time, SPISTE inactive after SPICLK 1.5t c(SYSCLK) ns\n(1) The MASTER / SLAVE bit (SPICTL.2) is cleared and the CLOCK PHASE bit (SPICTL.3) is cleared.\n(2) t c(SPC)  = SPI clock cycle time = LSPCLK/4 or LSPCLK/(SPIBRR + 1)\n(3) t c(LCO)  = LSPCLK cycle time\n(4) Internal clock prescalers must be adjusted such that the SPI clock speed is limited to the following SPI clock rate:\nMaster mode transmit 25-MHz MAX, master mode receive 12.5-MHz MAX\nSlave mode transmit 12.5-MHz MAX, slave mode receive 12.5-MHz MAX.\n(5) The active edge of the SPICLK signal referenced is controlled by the CLOCK POLARITY bit (SPICCR.6).\n2015\nSPISIMOSPISOMISPICLK\n(clock polarity = 1)SPICLK\n(clock polarity = 0)\nSPISIMO Data\nMust Be ValidSPISOMI Data Is Valid\n19\n25161412\nSPISTE2613\nFigure 7-18. SPI Slave Mode External Timing (Clock Phase = 0)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 59\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.5.2.2 SPI Slave Mode External Timing (Clock Phase = 1) (1) (2) (3) (4)\nNO. PARAMETER MIN MAX UNIT\n12 tc(SPC)S Cycle time, SPICLK 4tc(SYSCLK) ns\n13 tw(SPC1)S Pulse duration, SPICLK first pulse 2tc(SYSCLK)  – 1 ns\n14 tw(SPC2)S Pulse duration, SPICLK second pulse 2tc(SYSCLK)  – 1 ns\n17 td(SOMI)S Delay time, SPICLK to SPISOMI valid 20 ns\n18 tv(SOMI)S Valid time, SPISOMI data valid after SPICLK 0 ns\n21 tsu(SIMO)S Setup time, SPISIMO valid before SPICLK 1.5t c(SYSCLK) ns\n22 th(SIMO)S Hold time, SPISIMO data valid after SPICLK 1.5t c(SYSCLK) ns\n25 tsu(STE)S Setup time, SPISTE active before SPICLK 1.5t c(SYSCLK) ns\n26 th(STE)S Hold time, SPISTE inactive after SPICLK 1.5t c(SYSCLK) ns\n(1) The MASTER / SLAVE bit (SPICTL.2) is cleared and the CLOCK PHASE bit (SPICTL.3) is cleared.\n(2) t c(SPC)  = SPI clock cycle time = LSPCLK/4 or LSPCLK/(SPIBRR + 1)\n(3) Internal clock prescalers must be adjusted such that the SPI clock speed is limited to the following SPI clock rate:\nMaster mode transmit 25-MHz MAX, master mode receive 12.5-MHz MAX\nSlave mode transmit 12.5-MHz MAX, slave mode receive 12.5-MHz MAX.\n(4) The active edge of the SPICLK signal referenced is controlled by the CLOCK POLARITY bit (SPICCR.6).\n22\nSPISIMOSPISOMISPICLK\n(clock polarity = 1)SPICLK\n(clock polarity = 0)\nSPISIMO Data\nMust Be ValidSPISOMI Data Is Valid\n211817\nSPISTEData Valid Data Valid14 1312\n25 26\nFigure 7-19. SPI Slave Mode External Timing (Clock Phase = 1)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n60 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.6 Multichannel Buffered Serial Port (McBSP) Timing\n7.9.4.6.1 McBSP Transmit and Receive Timing\n7.9.4.6.1.1 McBSP Timing Requirements (1) (2)\nNO. MIN MAX UNIT\nMcBSP module clock (CLKG, CLKX, CLKR) range1 kHz\n40 (3)MHz\nMcBSP module cycle time (CLKG, CLKX, CLKR) range25 ns\n1 ms\nM11 tc(CKRX) Cycle time, CLKR/X CLKR/X ext 2P ns\nM12 tw(CKRX) Pulse duration, CLKR/X high or CLKR/X low CLKR/X ext P – 4 ns\nM13 tr(CKRX) Rise time, CLKR/X CLKR/X ext 4 ns\nM14 tf(CKRX) Fall time, CLKR/X CLKR/X ext 4 ns\nM15 tsu(FRH-CKRL) Setup time, external FSR high before CLKR lowCLKR int 20\nns\nCLKR ext 2\nM16 th(CKRL-FRH) Hold time, external FSR high after CLKR lowCLKR int 0\nns\nCLKR ext 6\nM17 tsu(DRV-CKRL) Setup time, DR valid before CLKR lowCLKR int 20\nns\nCLKR ext 2\nM18 th(CKRL-DRV) Hold time, DR valid after CLKR lowCLKR int 0\nns\nCLKR ext 6\nM19 tsu(FXH-CKXL) Setup time, external FSX high before CLKX lowCLKX int 20\nns\nCLKX ext 2\nM20 th(CKXL-FXH) Hold time, external FSX high after CLKX lowCLKX int 0\nns\nCLKX ext 6\n(1) Polarity bits CLKRP = CLKXP = FSRP = FSXP = 0. If the polarity of any of the signals is inverted, then the timing references of that\nsignal are also inverted.\n(2) 2P = 1/CLKG in ns. CLKG is the output of sample rate generator mux. CLKG = \nCLKSRG\n(1/C0041CLKGDV)  CLKSRG can be LSPCLK, CLKX,\nCLKR as source. CLKSRG ≤ (SYSCLKOUT/2). McBSP performance is limited by I/O buffer switching speed.\n(3) Internal clock prescalers must be adjusted such that the McBSP clock (CLKG, CLKX, CLKR) speeds are not greater than the I/O buffer\nspeed limit (40 MHz).www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 61\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.6.1.2 McBSP Switching Characteristics (1) (2)\nNO. PARAMETER MIN MAX UNIT\nM1 tc(CKRX) Cycle time, CLKR/X CLKR/X int 2P ns\nM2 tw(CKRXH) Pulse duration, CLKR/X high CLKR/X int D – 2 (3)D + 2 (3)ns\nM3 tw(CKRXL) Pulse duration, CLKR/X low CLKR/X int C – 2 (3)C + 2 (3)ns\nM4 td(CKRH-FRV) Delay time, CLKR high to internal FSR validCLKR int 0 4\nns\nCLKR ext 3 20\nM5 td(CKXH-FXV) Delay time, CLKX high to internal FSX validCLKX int 0 4\nns\nCLKX ext 3 20\nM6 tdis(CKXH-DXHZ)Disable time, CLKX high to DX high impedance\nfollowing last data bitCLKX int 8\nns\nCLKX ext 14\nM7 td(CKXH-DXV)Delay time, CLKX high to DX valid. CLKX int 4\nnsThis applies to all bits except the first bit transmitted. CLKX ext 20\nDelay time, CLKX high to DX valid DXENA = 0CLKX int 4\nCLKX ext 20\nOnly applies to first bit transmitted when\nin Data Delay 1 or 2 (XDATDLY=01b or\n10b) modesDXENA = 1CLKX int P + 4\nCLKX ext P + 20\nM8 ten(CKXH-DX)Enable time, CLKX high to DX driven DXENA = 0CLKX int 0\nnsCLKX ext 10\nOnly applies to first bit transmitted when\nin Data Delay 1 or 2 (XDATDLY=01b or\n10b) modesDXENA = 1CLKX int P\nCLKX ext P + 10\nM9 td(FXH-DXV)Delay time, FSX high to DX valid DXENA = 0FSX int 4\nnsFSX ext 16\nOnly applies to first bit transmitted when\nin Data Delay 0 (XDATDLY=00b) mode.DXENA = 1FSX int P + 4\nFSX ext P + 16\nM10 ten(FXH-DX)Enable time, FSX high to DX driven DXENA = 0FSX int 0\nnsFSX ext 6\nOnly applies to first bit transmitted when\nin Data Delay 0 (XDATDLY=00b) modeDXENA = 1FSX int P\nFSX ext P + 6\n(1) Polarity bits CLKRP = CLKXP = FSRP = FSXP = 0. If the polarity of any of the signals is inverted, then the timing references of that\nsignal are also inverted.\n(2) 2P = 1/CLKG in ns.\n(3) C = CLKRX low pulse width = P\nD = CLKRX high pulse width = PTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n62 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n(n−2) Bit (n−1)(n−3) (n−2) Bit (n−1)(n−4) (n−3) (n−2) Bit (n−1)\nM18M17M18M17M17M18M16M15M4M4M14M13\nM3, M12M1, M1 1\nM2, M12\n(RDATDLY=10b)DR(RDATDLY=01b)DR(RDATDLY=00b)DRFSR (ext)FSR (int)CLKRFigure 7-20. McBSP Receive Timing\nM8M7M7\nM8\nM6M7M9\nM10\n(XDATDLY=10b)DX(XDATDLY=01b)DX(XDATDLY=00b)DX\nBit (n−1) Bit 0Bit (n−1) (n−3) (n−2) Bit 0\n(n−2) Bit (n−1) Bit 0M20M13\nM3, M12M1, M1 1\nM2, M12\nFSX (ext)FSX (int)CLKX\nM5M5\nM19\nFigure 7-21. McBSP Transmit Timingwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 63\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.6.2 McBSP as SPI Master or Slave Timing\n7.9.4.6.2.1 McBSP as SPI Master or Slave Timing Requirements (CLKSTP = 10b, CLKXP = 0) (1)\nNO.MASTER SLAVE\nUNIT\nMIN MAX MIN MAX\nM30 tsu(DRV-CKXL) Setup time, DR valid before CLKX low 30 8P – 10 ns\nM31 th(CKXL-DRV) Hold time, DR valid after CLKX low 1 8P – 10 ns\nM32 tsu(BFXL-CKXH) Setup time, FSX low before CLKX high 8P + 10 ns\nM33 tc(CKX) Cycle timez, CLKX 2P(2)16P ns\n(1) For all SPI slave modes, CLKX must be a minimum of 8 CLKG cycles. Furthermore, CLKG should be LSPCLK/2 by setting CLKSM =\nCLKGDV = 1.\n(2) 2P = 1/CLKG\n7.9.4.6.2.2 McBSP as SPI Master or Slave Switching Characteristics (CLKSTP = 10b, CLKXP = 0)\nNO. PARAMETERMASTER SLAVE\nUNIT\nMIN MAX MIN MAX\nM24 th(CKXL-FXL) Hold time, FSX low after CLKX low 2P(1)ns\nM25 td(FXL-CKXH) Delay time, FSX low to CLKX high P ns\nM26 td(CLKXH-DXV) Delay time, CLKX low to DX valid –2 0 3P + 6 5P + 20 ns\nM28 tdis(FXH-DXHZ)Disable time, DX high impedance following\nlast data bit from FSX high6 6P + 6 ns\nM29 td(FXL-DXV) Delay time, FSX low to DX valid 6 4P + 6 ns\n(1) 2P = 1/CLKG\nBit 0 Bit(n-1) (n-2) (n-3) (n-4)\nBit 0 Bit(n-1) (n-2) (n-3) (n-4)CLKX\nFSX\nDX\nM30M31\nDRM28M24\nM29M25LSB MSB M32 M33\nM26\nFigure 7-22. McBSP Timing as SPI Master or Slave: CLKSTP = 10b, CLKXP = 0TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n64 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.6.2.3 McBSP as SPI Master or Slave Timing Requirements (CLKSTP = 11b, CLKXP = 0) (1)\nNO.MASTER SLAVE\nUNIT\nMIN MAX MIN MAX\nM39 tsu(DRV-CKXH) Setup time, DR valid before CLKX high 30 8P – 10 ns\nM40 th(CKXH-DRV) Hold time, DR valid after CLKX high 1 8P – 10 ns\nM41 tsu(FXL-CKXH) Setup time, FSX low before CLKX high 16P + 10 ns\nM42 tc(CKX) Cycle time, CLKX 2P(2)16P ns\n(1) For all SPI slave modes, CLKX must be a minimum of 8 CLKG cycles. Furthermore, CLKG should be LSPCLK/2 by setting CLKSM =\nCLKGDV = 1.\n(2) 2P = 1/CLKG\n7.9.4.6.2.4 McBSP as SPI Master or Slave Switching Characteristics (CLKSTP = 11b, CLKXP = 0)\nNO. PARAMETERMASTER SLAVE\nUNIT\nMIN MAX MIN MAX\nM34 th(CKXL-FXL) Hold time, FSX low after CLKX low P ns\nM35 td(FXL-CKXH) Delay time, FSX low to CLKX high 2P(1)ns\nM36 td(CLKXL-DXV) Delay time, CLKX low to DX valid –2 0 3P + 6 5P + 20 ns\nM37 tdis(CKXL-DXHZ)Disable time, DX high impedance following last data bit\nfrom CLKX lowP + 6 7P + 6 ns\nM38 td(FXL-DXV) Delay time, FSX low to DX valid 6 4P + 6 ns\n(1) 2P = 1/CLKG\nBit 0 Bit(n-1) (n-2) (n-3) (n-4)\nBit 0 Bit(n-1) (n-2) (n-3) (n-4)CLKX\nFSX\nDX\nDRM35\nM37\nM40M39M38M34LSB MSB M41M42\nM36\nFigure 7-23. McBSP Timing as SPI Master or Slave: CLKSTP = 11b, CLKXP = 0www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 65\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.6.2.5 McBSP as SPI Master or Slave Timing Requirements (CLKSTP = 10b, CLKXP = 1) (1)\nNO.MASTER SLAVE\nUNIT\nMIN MAX MIN MAX\nM49 tsu(DRV-CKXH) Setup time, DR valid before CLKX high 30 8P – 10 ns\nM50 th(CKXH-DRV) Hold time, DR valid after CLKX high 1 8P – 10 ns\nM51 tsu(FXL-CKXL) Setup time, FSX low before CLKX low 8P + 10 ns\nM52 tc(CKX) Cycle time, CLKX 2P(2)16P ns\n(1) For all SPI slave modes, CLKX must be a minimum of 8 CLKG cycles. Furthermore, CLKG should be LSPCLK/2 by setting CLKSM =\nCLKGDV = 1.\n(2) 2P = 1/CLKG\n7.9.4.6.2.6 McBSP as SPI Master or Slave Switching Characteristics (CLKSTP = 10b, CLKXP = 1)\nNO. PARAMETERMASTER SLAVE\nUNIT\nMIN MAX MIN MAX\nM43 th(CKXH-FXL) Hold time, FSX low after CLKX high 2P(1)ns\nM44 td(FXL-CKXL) Delay time, FSX low to CLKX low P ns\nM45 td(CLKXL-DXV) Delay time, CLKX low to DX valid –2 0 3P + 6 5P + 20 ns\nM47 tdis(FXH-DXHZ)Disable time, DX high impedance following last data bit from\nFSX high6 6P + 6 ns\nM48 td(FXL-DXV) Delay time, FSX low to DX valid 6 4P + 6 ns\n(1) 2P = 1/CLKG\nM51\nM50M47\nBit 0 Bit(n-1) (n-2) (n-3) (n-4)\nBit 0 Bit(n-1) (n-2) (n-3) (n-4)CLKX\nFSX\nDX\nDRM44\nM48\nM49M43LSB MSB M52\nM45\nFigure 7-24. McBSP Timing as SPI Master or Slave: CLKSTP = 10b, CLKXP = 1TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n66 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.4.6.2.7 McBSP as SPI Master or Slave Timing Requirements (CLKSTP = 11b, CLKXP = 1) (1)\nNO.MASTER SLAVE\nUNIT\nMIN MAX MIN MAX\nM58 tsu(DRV-CKXL) Setup time, DR valid before CLKX low 30 8P – 10 ns\nM59 th(CKXL-DRV) Hold time, DR valid after CLKX low 1 8P – 10 ns\nM60 tsu(FXL-CKXL) Setup time, FSX low before CLKX low 16P + 10 ns\nM61 tc(CKX) Cycle time, CLKX 2P(2)16P ns\n(1) For all SPI slave modes, CLKX must be a minimum of 8 CLKG cycles. Furthermore, CLKG should be LSPCLK/2 by setting CLKSM =\nCLKGDV = 1.\n(2) 2P = 1/CLKG\n7.9.4.6.2.8 McBSP as SPI Master or Slave Switching Characteristics (CLKSTP = 11b, CLKXP = 1) (1)\nNO. PARAMETERMASTER(2)SLAVE\nUNIT\nMIN MAX MIN MAX\nM53 th(CKXH-FXL) Hold time, FSX low after CLKX high P ns\nM54 td(FXL-CKXL) Delay time, FSX low to CLKX low 2P(1)ns\nM55 td(CLKXH-DXV) Delay time, CLKX high to DX valid –2 0 3P + 6 5P + 20 ns\nM56 tdis(CKXH-DXHZ)Disable time, DX high impedance following last data\nbit from CLKX highP + 6 7P + 6 ns\nM57 td(FXL-DXV) Delay time, FSX low to DX valid 6 4P + 6 ns\n(1) 2P = 1/CLKG\n(2) C = CLKX low pulse width = P\nD = CLKX high pulse width = P\nBit 0 Bit(n-1) (n-2) (n-3) (n-4)\nBit 0 Bit(n-1) (n-2) (n-3) (n-4)CLKX\nFSX\nDX\nDRM54\nM58M56M53\nM55\nM59M57LSB MSBM60 M61\nFigure 7-25. McBSP Timing as SPI Master or Slave: CLKSTP = 11b, CLKXP = 1www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 67\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.5 Emulator Connection Without Signal Buffering for the MCU\nFigure 7-26  shows the connection between the MCU  and JTAG header for a single-processor configuration. If\nthe distance between the JTAG header and the MCU  is greater than 6 inches, the emulation signals must be\nbuffered. If the distance is less than 6 inches, buffering is typically not needed. Figure 7-26  shows the simpler,\nno-buffering situation. For the pullup/pulldown resistor values, see the pin description section. For details on\nbuffering JTAG signals and multiple processor connections, see the TMS320F/C24x DSP controllers CPU and\ninstruction set reference guide .\nEMU0\nEMU1\nTRST\nTMS\nTDI\nTDO\nTCKVDDIO\nMCUEMU0\nEMU1\nTRST\nTMS\nTDI\nTDO\nTCK\nTCK_RET13\n14\n2\n1\n3\n7\n11\n96□inches□or□less\nPD\nGND\nGND\nGND\nGND\nGND5\n4\n6\n8\n10\n12\nJTAG□HeaderVDDIO\nFigure 7-26. Emulator Connection Without Signal Buffering for the MCUTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n68 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6 External Interface (XINTF) Timing\nEach XINTF access consists of three parts: Lead, Active, and Trail. The user configures the Lead/Active/Trail\nwait states in the XTIMING registers. There is one XTIMING register for each XINTF zone. Table 7-2  shows the\nrelationship between the parameters configured in the XTIMING register and the duration of the pulse in terms of\nXTIMCLK cycles.\nTable 7-2. Relationship Between Parameters Configured in XTIMING and Duration of Pulse\nDESCRIPTIONDURATION (ns)(1) (2)\nX2TIMING = 0 X2TIMING = 1\nLR Lead period, read access XRDLEAD × t c(XTIM) (XRDLEAD × 2) × t c(XTIM)\nAR Active period, read access (XRDACTIVE + WS + 1) × t c(XTIM) (XRDACTIVE × 2 + WS + 1) × t c(XTIM)\nTR Trail period, read access XRDTRAIL × t c(XTIM) (XRDTRAIL × 2) × t c(XTIM)\nLW Lead period, write access XWRLEAD × t c(XTIM) (XWRLEAD × 2) × t c(XTIM)\nAW Active period, write access (XWRACTIVE + WS + 1) × t c(XTIM) (XWRACTIVE × 2 + WS + 1) × t c(XTIM)\nTW Trail period, write access XWRTRAIL × t c(XTIM) (XWRTRAIL × 2) × t c(XTIM)\n(1) t c(XTIM)  − Cycle time, XTIMCLK\n(2) WS refers to the number of wait states inserted by hardware when using XREADY. If the zone is configured to ignore XREADY\n(USEREADY = 0), then WS = 0.\nMinimum wait-state requirements must be met when configuring each zone’s XTIMING register. These\nrequirements are in addition to any timing requirements as specified by that device’s data sheet. No internal\ndevice hardware is included to detect illegal settings.\n7.9.6.1 USEREADY = 0\nIf the XREADY signal is ignored (USEREADY = 0), then:\nLead: LR ≥ 2 × t c(XTIM)\nLW ≥ 3 × t c(XTIM)\nActive: AR ≥ 6 × t c(XTIM)\nAW ≥ 1 × t c(XTIM)\nTrail: TW ≥ 3 × t c(XTIM)\nThese requirements result in the following XTIMING register configuration restrictions:\nXRDLEAD XRDACTIVE XRDTRAIL XWRLEAD XWRACTIVE XWRTRAIL X2TIMING\n≥ 2 ≥ 6 ≥ 0 ≥ 3(2)≥ 1 ≥ 3(2)0(1)\n(1) If X2TIMCLK is enabled, specified Lead, Active, and Trail restrictions can be divided by 2 for values with even numbers.\n(2) Lead and trail write must be at least 7.5 ns.\nExamples of valid and invalid timing when not sampling XREADY:\nXRDLEAD XRDACTIVE XRDTRAIL XWRLEAD XWRACTIVE XWRTRAIL X2TIMING\nInvalid(1)0 0 0 0 0 0 0, 1\nValid(2)2 6 0 3 1 3 0(3)\n(1) No hardware to detect illegal XTIMING configurations\n(2) Based on 300-MHz system clock speed.\n(3) If X2TIMCLK is enabled, specified Lead, Active, and Trail restrictions can be divided by 2 for values with even numbers.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 69\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.2 Synchronous Mode (USEREADY = 1, READYMODE = 0)\nIf the XREADY signal is sampled in the synchronous mode (USEREADY = 1, READYMODE = 0), then:\n1 Lead: LR ≥ 2 × t c(XTIM)\nLW ≥ 3 × t c(XTIM)\n2 Active: AR ≥ 6 × t c(XTIM)\nAW ≥ 2 × t c(XTIM)\n3 Trail: TW ≥ 3 × t c(XTIM)\nNote\nRestriction does not include external hardware wait states.\nThese requirements result in the following XTIMING register configuration restrictions (based on 300-MHz\nsystem clock speed):\nXRDLEAD XRDACTIVE XRDTRAIL XWRLEAD XWRACTIVE XWRTRAIL X2TIMING\n≥ 2 ≥ 6 ≥ 0 ≥ 3(2)≥ 2 ≥ 3(2)0(1)\n(1) If X2TIMCLK is enabled, specified Lead, Active, and Trail restrictions can be divided by 2 for values with even numbers.\n(2) Lead and trail write must be at least 7.5 ns.\nExamples of valid and invalid timing when using synchronous XREADY:\nXRDLEAD XRDACTIVE XRDTRAIL XWRLEAD XWRACTIVE XWRTRAIL X2TIMING\nInvalid(1)0 0 0 0 0 0 0, 1\nInvalid(1)1 0 0 1 0 0 0, 1\nValid(2)2 6 0 3 2 3 0(3)\n(1) No hardware to detect illegal XTIMING configurations\n(2) Based on 300-MHz system clock speed\n(3) If X2TIMCLK is enabled, specified Lead, Active, and Trail restrictions can be divided by 2 for values with even numbers.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n70 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.3 Asynchronous Mode (USEREADY = 1, READYMODE = 1)\nIf the XREADY signal is sampled in the asynchronous mode (USEREADY = 1, READYMODE = 1), then:\n1 Lead: LR ≥ 2 × t c(XTIM)\nLW ≥ 3 × t c(XTIM)\n2 Active: AR ≥ 6 × t c(XTIM)\nAW ≥ 4 × t c(XTIM)\n3 Trail: TW ≥ 3 × t c(XTIM)\nNote\nRestrictions do not include external hardware wait states.\nThese requirements result in the following XTIMING register configuration restrictions (based on 300-MHz\nsystem clock speed):\nXRDLEAD XRDACTIVE XRDTRAIL XWRLEAD XWRACTIVE XWRTRAIL X2TIMING\n≥ 2 ≥ 6 0 ≥ 3(2)≥ 4 ≥3(2)0(1)\n(1) If X2TIMCLK is enabled, specified Lead, Active, and Trail restrictions can be divided by 2 for values with even numbers.\n(2) Lead and trail write must be at least 7.5 ns.\nExamples of valid and invalid timing when using asynchronous XREADY:\nXRDLEAD XRDACTIVE XRDTRAIL XWRLEAD XWRACTIVE XWRTRAIL X2TIMING\nInvalid(1)0 0 0 0 0 0 0, 1\nInvalid(1)1 0 0 1 0 0 0, 1\nInvalid(1)1 1 0 1 1 0 0\nValid(2)2 6 0 3 4 3 0(3)\n(1) No hardware to detect illegal XTIMING configurations\n(2) Based on 300-MHz system clock speed\n(3) If X2TIMCLK is enabled, specified Lead, Active, and Trail restrictions can be divided by 2 for values with even numbers.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 71\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nUnless otherwise specified, all XINTF timing is applicable for the clock configurations listed in Table 7-3 .\nTable 7-3. XINTF Clock Configurations for SYSCLKOUT = 300 MHz\nMODE SYSCLKOUT XTIMCLK XCLKOUT(1)\n1 SYSCLKOUT SYSCLKOUT\nExample: 300 MHz 300 MHz 300 MHz\n2 SYSCLKOUT 1/2 SYSCLKOUT\nExample: 300 MHz 300 MHz 150 MHz\n3 SYSCLKOUT 1/2 SYSCLKOUT\nExample: 300 MHz 300 MHz 150 MHz\n4 SYSCLKOUT 1/4 SYSCLKOUT\nExample: 300 MHz 300 MHz 75 MHz\n5 1/2 SYSCLKOUT 1/2 SYSCLKOUT\nExample: 300 MHz 150 MHz 150 MHz\n6 1/2 SYSCLKOUT 1/4 SYSCLKOUT\nExample: 300 MHz 150 MHz 75 MHz\n7 1/2 SYSCLKOUT 1/4 SYSCLKOUT\nExample: 300 MHz 150 MHz 75 MHz\n8 1/2 SYSCLKOUT 1/8 SYSCLKOUT\nExample: 300 MHz 150 MHz 37.5 MHz\n(1) The XCLKOUT signal is limited to a maximum frequency of 75 MHz.\nThe relationship between SYSCLKOUT and XTIMCLK is shown in Figure 7-27 .\n1\n0/2SYSCLKOUTC28x\nCPU\nXINTCNF2□(XTIMCLK)1\n0/2XTIMCLK\nXINTCNF2\n(CLKMODE)0\n10XTIMING0\nXTIMING6\nXTIMING7\nXBANKLEAD/ACTIVE/TRAILPCLKR3[XINTFENCLK]\nXINTCNF2\n(CLKOFF)XCLKOUT 1\n0/2\nXINTCNF2\n(BY4CLKMODE)\nFigure 7-27. Relationship Between SYSCLKOUT and XTIMCLKTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n72 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.4 XINTF Signal Alignment to XCLKOUT\nFor each XINTF access, the number of lead, active, and trail cycles is based on the internal clock XTIMCLK.\nStrobes such as XRD , XWE0 , XWE1 , and zone chip-select ( XZCS ) change state in relationship to the rising\nedge of XTIMCLK. The external clock, XCLKOUT, can be configured to be equal to, one-half, or one-fourth the\nfrequency of XTIMCLK.\nFor the case where XCLKOUT = XTIMCLK, all of the XINTF strobes will change state with respect to the rising\nedge of XCLKOUT. For the case where XCLKOUT = one-half or one-fourth XTIMCLK, some strobes will change\nstate either on the rising edge of XCLKOUT or the falling edge of XCLKOUT. In the XINTF timing tables, the\nnotation XCOHL is used to indicate that the parameter is with respect to either case; XCLKOUT rising edge\n(high) or XCLKOUT falling edge (low). If the parameter is always with respect to the rising edge of XCLKOUT,\nthe notation XCOH is used.\nFor the case where XCLKOUT = one-half XTIMCLK, the XCLKOUT edge with which the change will be aligned\ncan be determined based on the number of XTIMCLK cycles from the start of the access to the point at which\nthe signal changes. If this number of XTIMCLK cycles is even, the alignment will be with respect to the rising\nedge of XCLKOUT. If this number is odd, then the signal will change with respect to the falling edge of\nXCLKOUT. Examples include the following:\n• Strobes that change at the beginning of an access always align to the rising edge of XCLKOUT. This is\nbecause all XINTF accesses begin with respect to the rising edge of XCLKOUT.\nExamples: XZCSL Zone chip-select active low\nXRNWL XR/ W active low\n• Strobes that change at the beginning of the active period will align to the rising edge of XCLKOUT if the total\nnumber of lead XTIMCLK cycles for the access is even. If the number of lead XTIMCLK cycles is odd, then\nthe alignment will be with respect to the falling edge of XCLKOUT.\nExamples: XRDL XRD active low\nXWEL XWE1 or XWE0 active low\n• Strobes that change at the beginning of the trail period will align to the rising edge of XCLKOUT if the total\nnumber of lead + active XTIMCLK cycles (including hardware waitstates) for the access is even. If the\nnumber of lead + active XTIMCLK cycles (including hardware waitstates) is odd, then the alignment will be\nwith respect to the falling edge of XCLKOUT.\nExamples: XRDH XRD inactive high\nXWEH XWE1 or XWE0 inactive high\n• Strobes that change at the end of the access will align to the rising edge of XCLKOUT if the total number of\nlead + active + trail XTIMCLK cycles (including hardware waitstates) is even. If the number of lead + active +\ntrail XTIMCLK cycles (including hardware waitstates) is odd, then the alignment will be with respect to the\nfalling edge of XCLKOUT.\nExamples: XZCSH Zone chip-select inactive high\nXRNWH XR/ W inactive highwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 73\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.5 External Interface Read Timing\n7.9.6.5.1 External Interface Read Timing Requirements\nMIN MAX UNIT\nta(A) Access time, read data from address valid (LR + AR) – 13.5 (1)ns\nta(XRD) Access time, read data valid from XRD active low AR – 13 (1)ns\ntsu(XD)XRD Setup time, read data valid before XRD strobe inactive high 13 ns\nth(XD)XRD Hold time, read data valid after XRD inactive high 0 ns\n(1) LR = Lead period, read access. AR = Active period, read access. See Table 7-2 .\n7.9.6.5.2 External Interface Read Switching Characteristics\nPARAMETER MIN MAX UNIT\ntd(XCOH-XZCSL) Delay time, XCLKOUT high to zone chip-select active low 0 2 ns\ntd(XCOHL-XZCSH) Delay time, XCLKOUT high/low to zone chip-select inactive high –0.2 0.9 ns\ntd(XCOH-XA) Delay time, XCLKOUT high to address valid 1.5 ns\ntd(XCOHL-XRDL) Delay time, XCLKOUT high/low to XRD active low –0.2 0.8 ns\ntd(XCOHL-XRDH) Delay time, XCLKOUT high/low to XRD inactive high –0.4 0.8 ns\nth(XA)XZCSH Hold time, address valid after zone chip-select inactive high  (1)ns\nth(XA)XRD Hold time, address valid after XRD inactive high  (1)ns\n(1) During inactive cycles, the XINTF address bus always holds the last address put out on the bus . This includes alignment cycles.\nDINtd(XCOHL-XRDL)td(XCOH-XA)td(XCOH-XZCSL)\ntd(XCOHL-XRDH)\nth(XD)XRDtd(XCOHL-XZCSH)XZCS0□□XZCS6□□XZCS7 , ,\nXA[0:19]\nXRD\n, XWE□□XWE1(E)\nXR/W\nXD[0:31],□XD[0:15]tsu(XD)XRD\nta(A)\nta(XRD)\nXREADY(F)LeadActiveTrail\nX OUT□=□XTIMCLK(D)CLK(A)(B) (C)\nA. All XINTF accesses (lead period) begin on the rising edge of XCLKOUT. When necessary, the device inserts an alignment cycle before\nan access to meet this requirement.\nB. During alignment cycles, all signals transition to their inactive state.\nC. XA[0:19] holds the last address put on the bus during inactive cycles, including alignment cycles except XA0, which remains high.\nD. Timings are also relevant for XCLKOUT = 1/2 XTIMCLK and XCLKOUT = 1/4 XTIMCLK.\nE.XWE1 is used in 32-bit data bus mode.\nF. For USEREADY = 0, the external XREADY input signal is ignored.\nFigure 7-28. Example Read Access\nXTIMING register parameters used for this example (based on 300-MHz system clock):TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n74 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nXRDLEAD XRDACTIVE XRDTRAIL USEREADY X2TIMING XWRLEAD XWRACTIVE XWRTRAIL READYMODE\n≥ 2 ≥ 5 ≥ 0 0 0 N/A(1)N/A(1)N/A(1)N/A(1)\n(1) N/A = Not applicable (or “Don’t care”) for this examplewww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 75\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.6 External Interface Write Timing\n7.9.6.6.1 External Interface Write Switching Characteristics\nPARAMETER MIN MAX UNIT\ntd(XCOH-XZCSL) Delay time, XCLKOUT high to zone chip-select active low 0 2 ns\ntd(XCOHL-XZCSH) Delay time, XCLKOUT high or low to zone chip-select inactive high –0.2 0.9 ns\ntd(XCOH-XA) Delay time, XCLKOUT high to address valid 1.5 ns\ntd(XCOHL-XWEL) Delay time, XCLKOUT high/low to XWE0, XWE1 low –0.3 0.7 ns\ntd(XCOHL-XWEH) Delay time, XCLKOUT high/low to XWE0, XWE1 high –0.5 0.5 ns\ntd(XCOH-XRNWL) Delay time, XCLKOUT high to XR/ W low –0.2 1.5 ns\ntd(XCOHL-XRNWH) Delay time, XCLKOUT high/low to XR/ W high 0.3 0.6 ns\nten(XD)XWEL Enable time, data bus driven from XWE0, XWE1 low –7.5 ns\ntd(XWEL-XD) Delay time, data valid after XWE0, XWE1 active low 0 4 ns\nth(XA)XZCSH Hold time, address valid after zone chip-select inactive high  (1)ns\nth(XD)XWE Hold time, write data valid after XWE0, XWE1 inactive high TW – 7.5 (2)ns\ntdis(XD)XRNW Maximum time for processor to release the data bus after XR/ W inactive high 0 ns\n(1) During inactive cycles, the XINTF address bus will always hold the last address put out on the bus except XA0, which remains high.\nThis includes alignment cycles.\n(2) TW = Trail period, write access. See Table 7-2 .\nLeadActive\nTrail\ntd(XCOH-XZCSL)\ntd(XCOH-XA)\ntd(XCOHL-XWEL) td(XCOHL-XWEH)td(XCOHL-XZCSH)\nten(XD)XWEL th(XD)XWEHtdis(XD)XRNW\nXD[0:31],□XD[0:15]XZCS0□□XZCS6□□XZCS7 , ,\ntd(XCOH-XRNWL)td(XCOHL-XRNWH)\nDOUT\nXREADY(F)XR/WXRDXCLKOUT□=□XTIMCLK(D)\nXWE0□□XWE1 ,(E)\ntd(XWEL-XD)XA[0:19](A) (B) (C)\nA. All XINTF accesses (lead period) begin on the rising edge of XCLKOUT. When necessary, the device inserts an alignment cycle before\nan access to meet this requirement.\nB. During alignment cycles, all signals transition to their inactive state.\nC. XA[0:19] holds the last address put on the bus during inactive cycles, including alignment cycles except XA0, which remains high.\nD. Timings are also relevant for XCLKOUT = 1/2 XTIMCLK and XCLKOUT = 1/4 XTIMCLK.\nE.XWE1 is used in 32-bit data bus mode.\nF. For USEREADY = 0, the external XREADY input signal is ignored.\nFigure 7-29. Example Write Access\nXTIMING register parameters used for this example (based on 300-MHz system clock):TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n76 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nXRDLEAD XRDACTIVE XRDTRAIL USEREADY X2TIMING XWRLEAD XWRACTIVE XWRTRAIL READYMODE\nN/A(1)N/A(1)N/A(1)0 0 ≥ 3 ≥ 1 ≥ 3 N/A(1)\n(1) N/A = Not applicable (or “Don’t care”) for this examplewww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 77\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.7 External Interface Ready-on-Read Timing With One External Wait State\n7.9.6.7.1 External Interface Read Switching Characteristics (Ready-on-Read, One Wait State)\nPARAMETER MIN MAX UNIT\ntd(XCOH-XZCSL) Delay time, XCLKOUT high to zone chip-select active low 0 2 ns\ntd(XCOHL-XZCSH) Delay time, XCLKOUT high/low to zone chip-select inactive high –0.2 0.9 ns\ntd(XCOH-XA) Delay time, XCLKOUT high to address valid 1.5 ns\ntd(XCOHL-XRDL) Delay time, XCLKOUT high/low to XRD active low –0.2 0.8 ns\ntd(XCOHL-XRDH) Delay time, XCLKOUT high/low to XRD inactive high –0.4 0.8 ns\nth(XA)XZCSH Hold time, address valid after zone chip-select inactive high  (1)ns\nth(XA)XRD Hold time, address valid after XRD inactive high  (1)ns\n(1) During inactive cycles, the XINTF address bus always holds the last address put out on the bus. This includes alignment cycles.\n7.9.6.7.2 External Interface Read Timing Requirements (Ready-on-Read, One Wait State)\nMIN MAX UNIT\nta(A) Access time, read data from address valid (LR + AR) – 13.5 (1)ns\nta(XRD) Access time, read data valid from XRD active low AR – 13 (1)ns\ntsu(XD)XRD Setup time, read data valid before XRD strobe inactive high 13 ns\nth(XD)XRD Hold time, read data valid after XRD inactive high 0 ns\n(1) LR = Lead period, read access. AR = Active period, read access. See Table 7-2 .\n7.9.6.7.3 Synchronous XREADY Timing Requirements (Ready-on-Read, One Wait State) (1)\nMIN MAX UNIT\ntsu(XRDYsynchL)XCOHL Setup time, XREADY (synchronous) low before XCLKOUT high/low 8 ns\nth(XRDYsynchL) Hold time, XREADY (synchronous) low 1tc(XTIM) ns\ntsu(XRDYsynchH)XCOHL Setup time, XREADY (synchronous) high before XCLKOUT high/low 8 ns\nth(XRDYsynchH)XZCSH Hold time, XREADY (synchronous) held high after zone chip select high 0 ns\n(1) The first XREADY (synchronous) sample occurs with respect to E in Figure 7-30 :\nE = (XRDLEAD + XRDACTIVE) t c(XTIM)\nWhen first sampled, if XREADY (synchronous) is found to be high, then the access will finish. If XREADY (synchronous) is found to be\nlow, it is sampled again each t c(XTIM)  until it is found to be high.\nFor each sample (n) the setup time (F) with respect to the beginning of the access can be calculated as:\nF = (XRDLEAD + XRDACTIVE +n − 1) t c(XTIM)  − tsu(XRDYsynchL)XCOHL\nwhere n is the sample number: n = 1, 2, 3, and so forth.\n7.9.6.7.4 Asynchronous XREADY Timing Requirements (Ready-on-Read, One Wait State)\nMIN MAX UNIT\ntsu(XRDYAsynchL)XCOHL Setup time, XREADY (asynchronous) low before XCLKOUT high/low 8 ns\nth(XRDYAsynchL) Hold time, XREADY (asynchronous) low 1tc(XTIM) ns\ntsu(XRDYAsynchH)XCOHL Setup time, XREADY (asynchronous) high before XCLKOUT high/low 8 ns\nth(XRDYasynchH)XZCSH Hold time, XREADY (asynchronous) held high after zone chip select high 0 nsTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n78 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nLeadActive\nTrail\nDINtd(XCOH-XZCSL)\ntd(XCOH-XA)\ntd(XCOHL-XRDL)td(XCOHL-XZCSH)\ntd(XCOHL-XRDH)WS□(Synch)\nXCLKOUT□=□XTIMCLK\nXZCS0 , ,XZCS6□□XZCS7\nXA[0:19]\nXRD\nXWE0 ,□XWE1(E)\nXR/W\nXD[0:31],□XD[0:15]\nXREADY(Synch)th(XRDYsynchL)tsu(XRDYsynchL)XCOHLtsu(XD)XRD\nta(XRD)\nta(A)\nth(XD)XRD\nth(XRDYsynchH)XZCSH\n=□Don’t□care.□Signal□can□be□high□or□low□during□this□time.Legend:tsu(XRDHsynchH)XCOHL\n(G)(F)(A) (B)(C)\n(D)A. All XINTF accesses (lead period) begin on the rising edge of XCLKOUT. When necessary , the device inserts an alignment cycle before\nan access to meet this requirement.\nB. During alignment cycles, all signals transition to their inactive state.\nC. During inactive cycles, the XINTF address bus always holds the last address put out on the bus except XA0, which remains high. This\nincludes alignment cycles.\nD. Timings are also relevant for XCLKOUT = 1/2 XTIMCLK and XCLKOUT = 1/4 XTIMCLK.\nE.XWE1 is valid only in 32-bit data bus mode.\nF. For each sample, setup time from the beginning of the access (E) can be calculated as: D = (XRDLEAD + XRDACTIVE +n - 1) t c(XTIM)  –\ntsu(XRDYsynchL)XCOHL\nG. Reference for the first sample is with respect to this point: F = (XRDLEAD + XRDACTIVE) t c(XTIM)  where n is the sample number: n = 1,\n2, 3, and so forth.\nFigure 7-30. Example Read With Synchronous XREADY Access\nXTIMING register parameters used for this example (based on 300-MHz system clock):\nXRDLEAD XRDACTIVE XRDTRAIL USEREADY X2TIMING XWRLEAD XWRACTIVE XWRTRAIL READYMODE\n≥ 2 5 ≥ 0 1 0 N/A(1)N/A(1)N/A(1)0 = XREADY\n(Synch)\n(1) N/A = “Don’t care” for this examplewww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 79\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\ntsu(XD)XRD\nDINtd(XCOH-XZCSL)\ntd(XCOH-XA)\ntd(XCOHL-XRDL)td(XCOHL-XZCSH)\ntd(XCOHL-XRDH)XZCS0□□XZCS6□□XZCS7 , ,\nXA[0:19]\nXRD\nXWE0□□XWE1 ,(E)\nXR/W\nXD[0:31],□XD[0:15]\nXREADY(Asynch)tsu(XRDYasynchL)XCOHLta(XRD)\nta(A)\nth(XRDYasynchL)th(XD)XRD\nth(XRDYasynchH)XZCSH\n=□Don’t□care.□Signal□can□be□high□or□low□during□this□time.Legend:LeadActive\nTrailWS□(Async)\nXCLKOUT□=□XTIMCLK(A) (B)\n(C)\ntsu(XRDYasynchH)XCOHL\n(F)\n(G)(D)A. All XINTF accesses (lead period) begin on the rising edge of XCLKOUT. When necessary, the device will insert an alignment cycle\nbefore an access to meet this requirement.\nB. During alignment cycles, all signals will transition to their inactive state.\nC. During inactive cycles, the XINTF address bus will always hold the last address put out on the bus except XA0, which remains high. This\nincludes alignment cycles.\nD. Timings are also relevant for XCLKOUT = 1/2 XTIMCLK and XCLKOUT = 1/4 XTIMCLK.\nE.XWE1 is valid only in 32-bit data bus mode.\nF. For each sample, setup time from the beginning of the access can be calculated as: E = (XRDLEAD + XRDACTIVE -3 +n) t c(XTIM)  –\ntsu(XRDYasynchL)XCOHL  where n is the sample number: n = 1, 2, 3, and so forth.\nG. Reference for the first sample is with respect to this point: F = (XRDLEAD + XRDACTIVE –2) t c(XTIM)\nFigure 7-31. Example Read With Asynchronous XREADY Access\nXTIMING register parameters used for this example (based on 300-MHz system clock):\nXRDLEAD XRDACTIVE XRDTRAIL USEREADY X2TIMING XWRLEAD XWRACTIVE XWRTRAIL READYMODE\n≥ 2 5 ≥ 0 1 0 N/A(1)N/A(1)N/A(1)1 = XREADY\n(Async)\n(1) N/A = “Don’t care” for this exampleTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n80 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.8 External Interface Ready-on-Write Timing With One External Wait State\n7.9.6.8.1 External Interface Write Switching Characteristics (Ready-on-Write, One Wait State)\nPARAMETER MIN MAX UNIT\ntd(XCOH-XZCSL) Delay time, XCLKOUT high to zone chip-select active low 0 2 ns\ntd(XCOHL-XZCSH) Delay time, XCLKOUT high or low to zone chip-select inactive high –0.2 0.9 ns\ntd(XCOH-XA) Delay time, XCLKOUT high to address valid 1.5 ns\ntd(XCOHL-XWEL) Delay time, XCLKOUT high/low to XWE0, XWE1 low(3)–0.3 0.7 ns\ntd(XCOHL-XWEH) Delay time, XCLKOUT high/low to XWE0, XWE1 high(3)–0.5 0.5 ns\ntd(XCOH-XRNWL) Delay time, XCLKOUT high to XR/ W low –0.2 1.5 ns\ntd(XCOHL-XRNWH) Delay time, XCLKOUT high/low to XR/ W high 0.3 0.6 ns\nten(XD)XWEL Enable time, data bus driven from XWE0, XWE1 low –7.5 ns\ntd(XWEL-XD) Delay time, data valid after XWE0, XWE1 active low 0 4 ns\nth(XA)XZCSH Hold time, address valid after zone chip-select inactive high  (1)ns\nth(XD)XWE Hold time, write data valid after XWE0, XWE1 inactive high(3)TW – 7.5 (2)ns\ntdis(XD)XRNWMaximum time for processor to release the data bus after XR/ W\ninactive high0 ns\n(1) During inactive cycles, the XINTF address bus always holds the last address put out on the bus . This includes alignment cycles.\n(2) TW = trail period, write access (see Table 7-2 )\n(3) XWE1 is used in 32-bit data bus mode only. In 16-bit, this signal is XA0.\n7.9.6.8.2 Synchronous XREADY Timing Requirements (Ready-on-Write, One Wait State) Table 8-23\nMIN MAX UNIT\ntsu(XRDYsynchL)XCOHL Setup time, XREADY (synchronous) low before XCLKOUT high/low 8 ns\nth(XRDYsynchL) Hold time, XREADY (synchronous) low 1tc(XTIM) ns\ntsu(XRDYsynchH)XCOHL Setup time, XREADY (synchronous) high before XCLKOUT high/low 8 ns\nth(XRDYsynchH)XZCSH Hold time, XREADY (synchronous) held high after zone chip select high 0 ns\n7.9.6.8.3 Asynchronous XREADY Timing Requirements (Ready-on-Write, One Wait State) (1)\nMIN MAX UNIT\ntsu(XRDYasynchL)XCOHL Setup time, XREADY (asynchronous) low before XCLKOUT high/low 8 ns\nth(XRDYasynchL) Hold time, XREADY (asynchronous) low 1tc(XTIM) ns\ntsu(XRDYasynchH)XCOHL Setup time, XREADY (asynchronous) high before XCLKOUT high/low 8 ns\nth(XRDYasynchH)XZCSH Hold time, XREADY (asynchronous) held high after zone chip select high 0 ns\n(1) The first XREADY (synchronous) sample occurs with respect to E in Figure 7-32 :\nE = (XWRLEAD + XWRACTIVE –2) t c(XTIM) . When first sampled, if XREADY (asynchronous) is high, then the access will complete. If\nXREADY (asynchronous) is low, it is sampled again each t c(XTIM)  until it is high.\nFor each sample, setup time from the beginning of the access can be calculated as:\nF = (XWRLEAD + XWRACTIVE –3 + n) t c(XTIM)  – tsu(XRDYasynchL)XCOHL\nwhere n is the sample number: n = 1, 2, 3, and so forth.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 81\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nLead□1ActiveTrail\nXCLKOUT□=□XTIMCLK(D)\nXA[0:18]\nXREADY (Synch)XD[0:15]XR/WXWEXRDXZCS0□□XZCS6□□XZCS7 , ,\ntd(XCOHL-XWEL)td(XCOHL-XWEH)td(XCOHL-XZCSH)\ntd(XCOH-XA)WS□(Synch)\ntd(XCOH-XZCSL)\ntd(XCOH-XRNWL) td(XCOHL-XRNWH)\nten(XD)XWELth(XD)XWEH\ntsu(XRDHsynchH)XCOHLtsu(XRDYsynchL)XCOHLDOUTtd(XWEL-XD\n)tdis(XD)XRNW\nth(XRDYsynchL)th(XRDYsynchH)XZCSH\n=□Don’t□care.□Signal□can□be□high□or□low□during□this□time.Legend:(F)(E)(A)□(B) (C)A. All XINTF accesses (lead period) begin on the rising edge of XCLKOUT. When necessary, the device inserts an alignment cycle before\nan access to meet this requirement.\nB. During alignment cycles, all signals will transition to their inactive state.\nC. During inactive cycles, the XINTF address bus always holds the last address put out on the bus except XA0, which remains high. This\nincludes alignment cycles.\nD. Timings are also relevant for XCLKOUT = 1/2 XTIMCLK and XCLKOUT = 1/4 XTIMCLK.\nE.XWE1 is used in 32-bit data bus mode only.\nF. For each sample, setup time from the beginning of the access can be calculated as E = (XWRLEAD + XWRACTIVE + n –1) t c(XTIM)  –\ntsu(XRDYsynchL)XCOH  where n is the sample number: n = 1, 2, 3, and so forth.\nG. Reference for the first sample is with respect to this point: F = (XWRLEAD + XWRACTIVE) t c(XTIM)\nFigure 7-32. Write With Synchronous XREADY Access\nXTIMING register parameters used for this example (based on 300-MHz system clock):\nXRDLEAD XRDACTIVE XRDTRAIL USEREADY X2TIMING XWRLEAD XWRACTIVE XWRTRAIL READYMODE\nN/A(1)N/A(1)N/A(1)1 0 ≥ 3 1 ≥3 0 = XREADY\n(Synch)\n(1) N/A = "Don\'t care" for this example.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n82 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nLead□1ActiveTrail\nXCLKOUT□=□XTIMCLK(D)\nXA[0:19]\ntd(XCOHL-XWEH)td(XCOHL-XZCSH)\ntd(XCOH-XA)WS□(Async)\nXZCS0□□XZCS6□□XZCS7 , ,\nXRD\nXWE0 ,□XWE1(E)\nXR/Wtd(XCOH-XZCSL)\ntd(XCOH-XRNWL) td(XCOHL-XRNWH)\nten(XD)XWELth(XD)XWEH\nth(XRDYasynchL)DOUTtdis(XD)XRNWth(XRDYasynchH)XZCSH\n(G)(F)\n=□Don’t□care.□Signal□can□be□high□or□low□during□this□time.Legend:tsu(XRDYasynchL)XCOHL\ntsu(XRDYasynchH)XCOHLtd(XWEL-XD\n)td(XCOHL-XWEL)(A)□(B)(C)\nXREADY(Asynch)XD[31:0],□XD[15:0]A. All XINTF accesses (lead period) begin on the rising edge of XCLKOUT. When necessary, the device inserts an alignment cycle before\nan access to meet this requirement.\nB. During alignment cycles, all signals transition to their inactive state.\nC. During inactive cycles, the XINTF address bus always holds the last address put out on the bus except XA0, which remains high. This\nincludes alignment cycles.\nD. Timings are also relevant for XCLKOUT = 1/2 XTIMCLK and XCLKOUT = 1/4 XTIMCLK.\nE.XWE1 is used in 32-bit data bus mode only.\nF. For each sample, set up time from the beginning of the access can be calculated as: E = (XWRLEAD + XWRACTIVE -3 + n) t c(XTIM)  –\ntsu(XRDYasynchL)XCOHL  where n is the sample number: n = 1, 2, 3, and so forth.\nG. Reference for the first sample is with respect to this point: F = (XWRLEAD + XWRACTIVE – 2) t c(XTIM)\nFigure 7-33. Write With Asynchronous XREADY Access\nXTIMING register parameters used for this example (based on 300-MHz system clock):\nXRDLEAD XRDACTIVE XRDTRAIL USEREADY X2TIMING XWRLEAD XWRACTIVE XWRTRAIL READYMODE\nN/A(1)N/A(1)N/A(1)1 0 ≥ 3 3 ≥ 3 1 = XREADY\n(Async)\n(1) N/A = “Don’t care” for this examplewww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 83\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.9 XHOLD and XHOLDA Timing\nIf the HOLD mode bit is set while XHOLD  and XHOLDA  are both low (external bus accesses granted), the\nXHOLDA  signal is forced high (at the end of the current cycle) and the external interface is taken out of high-\nimpedance mode.\nOn a reset ( XRS), the HOLD mode bit is set to 0. If the XHOLD  signal is active low on a system reset, the bus\nand all signal strobes must be in high-impedance mode, and the XHOLDA signal is also driven active low.\nWhen HOLD mode is enabled and XHOLDA  is active low (external bus grant active), the CPU can still execute\ncode from internal memory. If an access is made to the external interface, the CPU is stalled until the XHOLD\nsignal is removed.\nAn external DMA request, when granted, places the following signals in a high-impedance mode:\nXA[19:0] XZCS0\nXD[31:0], XD[15:0] XZCS6\nXWE0, XWE1, XRD XZCS7\nXR/ W\nAll other signals not listed in this group remain in their default or functional operational modes during these\nsignal events.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n84 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n7.9.6.9.1 XHOLD/ XHOLDA Timing Requirements (1) (2) (3)\nMIN MAX UNIT\ntd(HL-HiZ) Delay time, XHOLD low to Hi-Z on all address, data, and control 4tc(XTIM)  + tc(XCO)  + 20 ns\ntd(HL-HAL) Delay time, XHOLD low to XHOLDA low 4tc(XTIM)  + 2t c(XCO)  + 20 ns\ntd(HH-HAH) Delay time, XHOLD high to XHOLDA high 4tc(XTIM)  + 20 ns\ntd(HH-BV) Delay time, XHOLD high to bus valid 6tc(XTIM)  + 20 ns\n(1) When a low signal is detected on XHOLD, all pending XINTF accesses will be completed before the bus is placed in a high-impedance\nstate.\n(2) The state of XHOLD is latched on the rising edge of XTIMCLK.\n(3) After the XHOLD is detected low or high, all bus transitions and XHOLDA transitions occur with respect to the rising edge of\nXCLKOUT. Thus, for this mode where XCLKOUT = 1/2 XTIMCLK, the transitions can occur up to 1 XTIMCLK cycle earlier than the\nmaximum value specified.\nXCLKOUT\nXHOLD\nXZCS0□□XZCS6□□XZCS7 , ,\nXD[31:0],□XD[15:0] ValidXHOLDAtd(HL-Hiz)\ntd(HH-HAH)\nHigh-Impedance\nXA[19:0] Valid Valid High-Impedancetd(HH-BV)td(HL-HAL)\n(A)(B)XR/W\nA. All pending XINTF accesses are completed.\nB. Normal XINTF operation resumes.\nFigure 7-34. External Interface Hold Waveformwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 85\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8 Detailed Description\n8.1 Brief Descriptions\n8.1.1 C28x CPU\nThe C2834x (C28x+FPU) family is a member of the TMS320C2000 ™ microcontroller unit (MCU)  platform. The\nC28x+FPU based controllers have the same 32-bit fixed-point architecture as TI\'s existing C28x MCUs , but also\ninclude a single-precision (32-bit) IEEE 754 floating-point unit (FPU).  It is a very efficient C/C++ engine,\nenabling users to develop their system control software in a high-level language. It also enables math algorithms\nto be developed using C/C++. The device is as efficient at DSP math tasks as it is at system control tasks . This\nefficiency removes the need for a second processor in many systems. The 32 × 32-bit MAC 64-bit processing\ncapabilities enable the controller to handle higher numerical resolution problems efficiently. Add to this the fast\ninterrupt response with automatic context save of critical registers, resulting in a device that is capable of\nservicing many asynchronous events with minimal latency. The device has an 8-level-deep protected pipeline\nwith pipelined memory accesses. This pipelining enables it to execute at high speeds without resorting to\nexpensive high-speed memories. Special branch-look-ahead hardware minimizes the latency for conditional\ndiscontinuities. Special store conditional operations further improve performance.\n8.1.2 Memory Bus (Harvard Bus Architecture)\nAs with many MCU  type devices, multiple buses are used to move data between the memories and peripherals\nand the CPU. The C28x memory bus architecture contains a program read bus, data read bus and data write\nbus. The program read bus consists of 22 address lines and 32 data lines. The data read and write buses\nconsist of 32 address lines and 32 data lines each. The 32-bit-wide data buses enable single cycle 32-bit\noperations. The multiple bus architecture, commonly termed Harvard Bus, enables the C28x to fetch an\ninstruction, read a data value and write a data value in a single cycle. All peripherals and memories attached to\nthe memory bus will prioritize memory accesses. Generally, the priority of memory bus accesses can be\nsummarized as follows:\nHighest: Data Writes (Simultaneous data and program writes cannot occur on the memory bus.)\nProgram Writes (Simultaneous data and program writes cannot occur on the memory bus.)\nData Reads\nProgram Reads (Simultaneous program reads and fetches cannot occur on the memory bus.)\nLowest: Fetches (Simultaneous program reads and fetches cannot occur on the memory bus.)\n8.1.3 Peripheral Bus\nTo enable migration of peripherals between various TI MCU  family of devices, the C2834x  devices adopt a\nperipheral bus standard for peripheral interconnect. The peripheral bus bridge multiplexes the various buses that\nmake up the processor Memory Bus into a single bus consisting of 16 address lines and 16 or 32 data lines and\nassociated control signals. Three versions of the peripheral bus are supported. One version supports only 16-bit\naccesses (called peripheral frame 2). Another version supports both 16- and 32-bit accesses (called peripheral\nframe 1). The third version supports DMA access and both 16- and 32-bit accesses (called peripheral frame 3).\n8.1.4 Real-Time JTAG and Analysis\nThe C2834x devices implement the standard IEEE 1149.1 JTAG interface. Additionally, the devices support real-\ntime mode of operation whereby the contents of memory, peripheral and register locations can be modified while\nthe processor is running and executing code and servicing interrupts. The user can also single step through\nnontime-critical code while enabling time-critical interrupts to be serviced without interference. The device\nimplements the real-time mode in hardware within the CPU. This is a feature unique to the C2834x  device,\nrequiring no software monitor. Additionally, special analysis hardware is provided that allows setting of hardware\nbreakpoint or data/address watch-points and generate various user-selectable break events when a match\noccurs.\n8.1.5 External Interface (XINTF)\nThis asynchronous interface consists of 20 address lines, 32 data lines, and three chip-select lines. The chip-\nselect lines are mapped to three external zones, Zones 0, 6, and 7. Each of the three zones can be programmedTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n86 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nwith a different number of wait states, strobe signal setup and hold timing and each zone can be programmed for\nextending wait states externally or not. The programmable wait state, chip-select and programmable strobe\ntiming enables glueless interface to external memories and peripherals.\n8.1.6 M0, M1 SARAMs\nAll C2834x  devices contain these two blocks of single access memory, each 1K × 16 in size. The stack pointer\npoints to the beginning of block M1 on reset. The M0 and M1 blocks, like all other memory blocks on C28x\ndevices, are mapped to both program and data space. Hence, the user can use M0 and M1 to execute code or\nfor data variables. The partitioning is performed within the linker. The C28x device presents a unified memory\nmap to the programmer. This makes for easier programming in high-level languages.\n8.1.7 L0, L1, L2, L3, L4, L5, L6, L7, H0, H1, H2, H3, H4, H5 SARAMs\nThe 2834x has up to 256K × 16 single-access RAM (SARAM) divided up into the following categories:\nL0, L1, L2, L3, L4, L5 SARAM Blocks Up to 48K × 16 of SARAM at all frequencies. Each block is 8K × 16.\nL6, L7 SARAM Blocks These 8K × 16 SARAM blocks are single-wait state at all frequencies.\nH0, H1, H2, H3, H4, H5 SARAM Blocks H0–H5 are each 32K × 16 and 1-wait state at all frequencies. A program-access\nprefetch buffer is used to improve performance of linear code.\nAll SARAM blocks are mapped to both program and data space. L0–L7 are accessible by both the CPU and the\nDMA (1 wait state).\n8.1.8 Boot ROM\nThe Boot ROM is factory-programmed with boot-loading software. Boot-mode signals are provided to tell the\nbootloader software what boot mode to use on power up. The user can select to boot normally or to download\nnew software from an external connection or to select boot software that is programmed in the internal ROM.\nThe Boot ROM also contains standard tables, such as SIN/COS waveforms, for use in math related algorithms.\nTable 8-1. Boot Mode Selection\nMODE GPIO87/XA15 GPIO86/XA14 GPIO85/XA13 GPIO84/XA12 MODE(1)\nF 1 1 1 1 Secure boot(2)\nE 1 1 1 0 SCI-A boot\nD 1 1 0 1 SPI-A boot\nC 1 1 0 0 I2C-A boot Timing 1\nB 1 0 1 1 eCAN-A boot Timing 1\nA 1 0 1 0 McBSP-A boot\n9 1 0 0 1 Jump to XINTF x16\n8 1 0 0 0 Reserved\n7 0 1 1 1 eCAN-A boot Timing 2\n6 0 1 1 0 Parallel GPIO I/O boot\n5 0 1 0 1 Parallel XINTF boot\n4 0 1 0 0 Jump to SARAM\n3 0 0 1 1 Branch to check boot mode\n2 0 0 1 0 I2C-A boot Timing 2\n1 0 0 0 1 Reserved\n0 0 0 0 0 TI Test Only\n(1) All four GPIO pins have an internal pullup.\n(2) This mode is available on secure devices only. See Section 8.1.9 , Security.\n www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 87\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.1.9 Security\nThe 128-bit password locations on these devices will always read back 0xFFFF. To preserve compatibility with\nother C28x designs with code security, the password locations at 0x33FFF8–0x33FFFF must be read after a\ndevice reset; otherwise, certain memory locations will be inaccessible. The Boot ROM code performs this read\nduring start-up. If during debug the Boot ROM is bypassed, then it is the responsibility of the application software\nto read the password locations after a reset.\nCustom Encryption: Activating the Code Security Module (CSM) and Emulation Code Security Logic\n(ECSL)\nCustom secure versions of these devices enable the CSM and ECSL logic. In the custom version, the 128-bit\npassword locations are set to a customer-chosen value, activating the Code Security Module (CSM), which\nprotects the Hx RAM memories from unauthorized access. Additionally, a TI-generated AES decryption routine is\nembedded into an on-chip secure ROM, providing a method to secure application code that is stored externally.\nRequests for custom secure versions are not accepted by TI anymore.\nNote\n \nTHE CODE SECURITY MODULE (CSM) INCLUDED ON THIS DEVICE WAS DESIGNED TO\nPASSWORD PROTECT THE DATA STORED IN THE ASSOCIATED MEMORY (Hx RAM) AND IS\nWARRANTED BY TEXAS INSTRUMENTS (TI), IN ACCORDANCE WITH ITS STANDARD TERMS\nAND CONDITIONS, TO CONFORM TO TI\'S PUBLISHED SPECIFICATIONS FOR THE WARRANTY\nPERIOD APPLICABLE FOR THIS DEVICE.\nTI DOES NOT, HOWEVER, WARRANT OR REPRESENT THAT THE CSM CANNOT BE\nCOMPROMISED OR BREACHED OR THAT THE DATA STORED IN THE ASSOCIATED MEMORY\nCANNOT BE ACCESSED THROUGH OTHER MEANS. MOREOVER, EXCEPT AS SET FORTH\nABOVE, TI MAKES NO WARRANTIES OR REPRESENTATIONS CONCERNING THE CSM OR\nOPERATION OF THIS DEVICE, INCLUDING ANY IMPLIED WARRANTIES OF MERCHANTABILITY\nOR FITNESS FOR A PARTICULAR PURPOSE.\nIN NO EVENT SHALL TI BE LIABLE FOR ANY CONSEQUENTIAL, SPECIAL, INDIRECT,\nINCIDENTAL, OR PUNITIVE DAMAGES, HOWEVER CAUSED, ARISING IN ANY WAY OUT OF\nYOUR USE OF THE CSM OR THIS DEVICE, WHETHER OR NOT TI HAS BEEN ADVISED OF THE\nPOSSIBILITY OF SUCH DAMAGES. EXCLUDED DAMAGES INCLUDE, BUT ARE NOT LIMITED\nTO LOSS OF DATA, LOSS OF GOODWILL, LOSS OF USE OR INTERRUPTION OF BUSINESS OR\nOTHER ECONOMIC LOSS.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n88 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.1.10 Peripheral Interrupt Expansion (PIE) Block\nThe PIE block serves to multiplex numerous interrupt sources into a smaller set of interrupt inputs. The PIE block\ncan support up to 96 peripheral interrupts. On the C2834x , 64 of the possible 96 interrupts are used by\nperipherals. The 96 interrupts are grouped into blocks of 8 and each group is fed into 1 of 12 CPU interrupt lines\n(INT1 to INT12). Each of the 96 interrupts is supported by its own vector stored in a dedicated RAM block that\ncan be overwritten by the user. The vector is automatically fetched by the CPU on servicing the interrupt. It takes\neight CPU clock cycles to fetch the vector and save critical CPU registers. Hence the CPU can quickly respond\nto interrupt events. Prioritization of interrupts is controlled in hardware and software. Each individual interrupt can\nbe enabled or disabled within the PIE block.\n8.1.11 External Interrupts (XINT1–XINT7, XNMI)\nThe devices support eight masked external interrupts (XINT1–XINT7, XNMI). XNMI can be connected to the\nINT13 or NMI interrupt of the CPU. Each of the interrupts can be selected for negative, positive, or both negative\nand positive edge triggering and can also be enabled or disabled (including the XNMI). XINT1, XINT2, and XNMI\nalso contain a 16-bit free-running up counter, which is reset to zero when a valid interrupt edge is detected. This\ncounter can be used to accurately time-stamp the interrupt. Unlike the 281x devices, there are no dedicated pins\nfor the external interrupts. XINT1 XINT2, and XNMI interrupts can accept inputs from GPIO0–GPIO31 pins.\nXINT3–XINT7 interrupts can accept inputs from GPIO32–GPIO63 pins.\n8.1.12 Oscillator and PLL\nThe device can be clocked by an external oscillator or by a crystal attached to the on-chip oscillator circuit. A\nPLL is provided supporting up to 31 input-clock-scaling ratios. The PLL ratios can be changed on-the-fly in\nsoftware, enabling the user to scale back on operating frequency if lower power operation is desired. Refer to\nSection 7.9.4.4  for timing details. The PLL block can be set in bypass mode.\n8.1.13 Watchdog\nThe devices contain a watchdog timer. The user software must regularly reset the watchdog counter within a\ncertain time frame; otherwise, the watchdog will generate a reset to the processor. The watchdog can be\ndisabled if necessary.\n8.1.14 Peripheral Clocking\nThe clocks to each individual peripheral can be enabled or disabled so as to reduce power consumption when a\nperipheral is not in use. Additionally, the system clock to the serial ports (except I2C and eCAN) blocks can be\nscaled relative to the CPU clock. This enables the timing of peripherals to be decoupled from increasing CPU\nclock speeds.\n8.1.15 Low-Power Modes\nThe devices are full static CMOS devices. Three low-power modes are provided:\nIDLE: Place CPU into low-power mode. Peripheral clocks may be turned off selectively and only those peripherals that\nneed to function during IDLE are left operating. An enabled interrupt from an active peripheral or the watchdog\ntimer will wake the processor from IDLE mode.\nSTANDBY: Turns off clock to CPU and peripherals. This mode leaves the oscillator and PLL functional. An external interrupt\nevent will wake the processor and the peripherals. Execution begins on the next valid cycle after detection of the\ninterrupt event\nHALT: Turns off the internal oscillator. This mode basically shuts down the device and places it in the lowest possible\npower consumption mode. A reset or external signal can wake the device from this mode.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 89\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.1.16 Peripheral Frames 0, 1, 2, 3 (PFn)\nThe device segregates peripherals into four sections. The mapping of peripherals is as follows:\nPF0: PIE: PIE Interrupt Enable and Control Registers Plus PIE Vector Table\nXINTF: External Interface Registers\nDMA DMA Registers\nTimers: CPU-Timers 0, 1, 2 Registers\nPF1: eCAN: eCAN Mailbox and Control Registers\nGPIO: GPIO MUX Configuration and Control Registers\nePWM: Enhanced Pulse Width Modulator Module and Registers\neCAP: Enhanced Capture Module and Registers\neQEP: Enhanced Quadrature Encoder Pulse Module and Registers\nPF2: SYS: System Control Registers\nSCI: Serial Communications Interface (SCI) Control and RX/TX Registers\nSPI: Serial Port Interface (SPI) Control and RX/TX Registers\nADC: External ADC Interface\nI2C: Inter-Integrated Circuit Module and Registers\nXINT External Interrupt Registers\nPF3: McBSP Multichannel Buffered Serial Port Registers\n8.1.17 General-Purpose Input/Output (GPIO) Multiplexer\nMost of the peripheral signals are multiplexed with GPIO signals. This enables the user to use a pin as GPIO if\nthe peripheral signal or function is not used. On reset, GPIO pins are configured as inputs. The user can\nindividually program each pin for GPIO mode or peripheral signal mode. For specific inputs, the user can also\nselect the number of input qualification cycles. This is to filter unwanted noise glitches. The GPIO signals can\nalso be used to bring the device out of specific low-power modes.\n8.1.18 32-Bit CPU-Timers (0, 1, 2)\nCPU-Timers 0, 1, and 2 are identical 32-bit timers with presettable periods and with 16-bit clock prescaling. The\ntimers have a 32-bit count down register, which generates an interrupt when the counter reaches zero. The\ncounter is decremented at the CPU clock speed divided by the prescale value setting. When the counter reaches\nzero, it is automatically reloaded with a 32-bit period value. CPU-Timer 2 is reserved for Real-Time OS (RTOS)/\nBIOS applications. It is connected to INT14 of the CPU. If DSP/BIOS™ or SYS/BIOS is not being used, CPU-\nTimer 2 is available for general use. CPU-Timer 1 is for general use and can be connected to INT13 of the CPU.\nCPU-Timer 0 is also for general use and is connected to the PIE block.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n90 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.1.19 Control Peripherals\nThe C2834x devices support the following peripherals which are used for embedded control and communication:\nePWM: The enhanced PWM peripheral supports independent and complementary PWM generation, adjustable dead-\nband generation for leading and trailing edges, latched and cycle-by-cycle trip mechanism. Some of the PWM\npins support HRPWM features.\neCAP: The enhanced capture peripheral uses a 32-bit time base and registers up to four programmable events in\ncontinuous/one-shot capture modes.\nThis peripheral can also be configured to generate an auxiliary PWM signal.\neQEP: The enhanced QEP peripheral uses a 32-bit position counter, supports low-speed measurement using capture\nunit and high-speed measurement using a 32-bit unit timer.\nThis peripheral has a watchdog timer to detect motor stall and input error detection logic to identify simultaneous\nedge transition in QEP signals.\n8.1.20 Serial Port Peripherals\nThe devices support the following serial communication peripherals:\neCAN: This is the enhanced version of the CAN peripheral. It supports 32 mailboxes, time-stamping of messages, and is\ncompliant with ISO 11898-1 (CAN 2.0B).\nMcBSP: The multichannel buffered serial port (McBSP) connects to E1/T1 lines, phone-quality codecs for modem\napplications or high-quality stereo audio DAC devices. The McBSP receive and transmit registers are supported\nby the DMA to significantly reduce the overhead for servicing this peripheral. Each McBSP module can be\nconfigured as an SPI as required.\nSPI: The SPI is a high-speed, synchronous serial I/O port that allows a serial bit stream of programmed length (1 to\n16 bits) to be shifted into and out of the device at a programmable bit-transfer rate. Normally, the SPI is used for\ncommunications between the MCU and external peripherals or another processor. Typical applications include\nexternal I/O or peripheral expansion through devices such as shift registers, display drivers, and ADCs.\nMultidevice communications are supported by the master/slave operation of the SPI. The SPI contains a 16-level\nreceive and transmit FIFO for reducing interrupt servicing overhead.\nSCI: The serial communications interface is a 2-wire asynchronous serial port, commonly known as UART. The SCI\ncontains a 16-level receive and transmit FIFO for reducing interrupt servicing overhead.\nI2C: The inter-integrated circuit (I2C) module provides an interface between an MCU and other devices compliant with\nPhilips Semiconductors Inter-IC bus (I2C-bus) specification version 2.1 and connected by way of an I2C-bus.\nExternal components attached to this 2-wire serial bus can transmit/receive up to 8-bit data to/from the MCU\nthrough the I2C module. The I2C contains a 16-level receive and transmit FIFO for reducing interrupt servicing\noverhead.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 91\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2 Peripherals\nThe integrated peripherals are described in the following subsections:\n• 6-channel Direct Memory Access (DMA)\n• Three 32-bit CPU-Timers\n• Up to nine enhanced PWM modules (ePWM1, ePWM2, ePWM3, ePWM4, ePWM5, ePWM6, ePWM7,\nePWM8, ePWM9)\n• Up to six enhanced capture modules (eCAP1, eCAP2, eCAP3, eCAP4, eCAP5, eCAP6)\n• Up to three enhanced QEP modules (eQEP1, eQEP2, eQEP3)\n• External analog-to-digital converter (ADC) Interface\n• Up to two enhanced controller area network (eCAN) modules (eCAN-A, eCAN-B)\n• Up to three serial communications interface modules (SCI-A, SCI-B, SCI-C)\n• Up to two serial peripheral interface (SPI) modules (SPI-A, SPI-D)\n• Inter-integrated circuit (I2C) module\n• Up to two multichannel buffered serial port (McBSP-A, McBSP-B) modules\n• Digital I/O and shared pin functions\n• External Interface (XINTF)\n8.2.1 DMA Overview\nFeatures:\n• 6 channels with independent PIE interrupts\n• Trigger sources:\n– McBSP-A and McBSP-B transmit and receive logic\n– XINT1–7 and XINT13\n– CPU timers\n– Software\n• Data sources and destinations:\n– L0–L7 64K × 16 SARAM\n– All XINTF zones\n– McBSP-A and McBSP-B transmit and receive buffers\n• Word Size: 16-bit or 32-bit (McBSPs limited to 16-bit)\n• Throughput: 4 cycles/word (5 cycles/word for McBSP reads)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n92 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nPF3\nI/FMcBSP A\nMcBSP BEvent\ntriggersDMA\n6-chExternal\ninterruptsCPU\ntimersCPU□bus\nDMA busPIEINT7\nDINT[CH1:CH6]CPU\nXINTF□zones□interface XINTF□memory□zonesL0\nI/FL0□RAM\nL1\nI/FL1□RAM\nL2\nI/FL2□RAM\nL3\nI/FL3□RAM\nL4\nI/FL4□RAM\nL5\nI/FL5□RAM\nL6\nI/FL6□RAM\nL7\nI/FL7□RAMFigure 8-1. DMA Functional Block Diagramwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 93\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2.2 32-Bit CPU-Timer 0, CPU-Timer 1, CPU-Timer 2\nThere are three 32-bit CPU-timers on the devices (CPU-Timer 0, CPU-Timer 1, CPU-Timer 2).\nCPU-Timer 2 is reserved for DSP/BIOS or SYS/BIOS. CPU-Timer 0 and CPU-Timer 1 can be used in user\napplications. These timers are different from the timers that are present in the ePWM modules.\nNote\nIf the application is not using DSP/BIOS or SYS/BIOS, then CPU-Timer 2 can be used in the\napplication.\nBorrowReset\nTimer Reload\nSYSCLKOUT\nTCR.4\n(Timer Start Status)\nTINT16-Bit Timer Divide-Down\nTDDRH:TDDR32-Bit Timer Period\nPRDH:PRD\n32-Bit Counter\nTIMH:TIM16-Bit Prescale Counter\nPSCH:PSC\nBorrow\nFigure 8-2. CPU-Timers\nThe timer interrupt signals ( TINT0, TINT1, TINT2) are connected as shown in Figure 8-3 .\nINT1\nto\nINT12\nINT1428x\nCPU\nTINT2TINT0PIE CPU-TIMER 0\nCPU-TIMER 2\n(Reserved for\nDSP/BIOS or SYS/BIOS)INT13TINT1\nCPU-TIMER 1\nXINT13\nA. The timer registers are connected to the memory bus of the C28x processor.\nB. The timing of the timers is synchronized to SYSCLKOUT of the processor clock.\nFigure 8-3. CPU-Timer Interrupt Signals and Output Signal\nThe general operation of the timer is as follows: The 32-bit counter register "TIMH:TIM" is loaded with the value\nin the period register "PRDH:PRD". The counter register decrements at the SYSCLKOUT rate of the C28x.\nWhen the counter reaches 0, a timer interrupt output signal generates an interrupt pulse. The registers listed in\nTable 8-2  are used to configure the timers. For more information, see the TMS320x2834x Delfino System\nControl and Interrupts Reference Guide  .TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n94 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-2. CPU-Timers 0, 1, 2 Configuration and Control Registers\nNAME ADDRESS SIZE (x16) DESCRIPTION\nTIMER0TIM 0x0C00 1 CPU-Timer 0, Counter Register\nTIMER0TIMH 0x0C01 1 CPU-Timer 0, Counter Register High\nTIMER0PRD 0x0C02 1 CPU-Timer 0, Period Register\nTIMER0PRDH 0x0C03 1 CPU-Timer 0, Period Register High\nTIMER0TCR 0x0C04 1 CPU-Timer 0, Control Register\nReserved 0x0C05 1\nTIMER0TPR 0x0C06 1 CPU-Timer 0, Prescale Register\nTIMER0TPRH 0x0C07 1 CPU-Timer 0, Prescale Register High\nTIMER1TIM 0x0C08 1 CPU-Timer 1, Counter Register\nTIMER1TIMH 0x0C09 1 CPU-Timer 1, Counter Register High\nTIMER1PRD 0x0C0A 1 CPU-Timer 1, Period Register\nTIMER1PRDH 0x0C0B 1 CPU-Timer 1, Period Register High\nTIMER1TCR 0x0C0C 1 CPU-Timer 1, Control Register\nReserved 0x0C0D 1\nTIMER1TPR 0x0C0E 1 CPU-Timer 1, Prescale Register\nTIMER1TPRH 0x0C0F 1 CPU-Timer 1, Prescale Register High\nTIMER2TIM 0x0C10 1 CPU-Timer 2, Counter Register\nTIMER2TIMH 0x0C11 1 CPU-Timer 2, Counter Register High\nTIMER2PRD 0x0C12 1 CPU-Timer 2, Period Register\nTIMER2PRDH 0x0C13 1 CPU-Timer 2, Period Register High\nTIMER2TCR 0x0C14 1 CPU-Timer 2, Control Register\nReserved 0x0C15 1\nTIMER2TPR 0x0C16 1 CPU-Timer 2, Prescale Register\nTIMER2TPRH 0x0C17 1 CPU-Timer 2, Prescale Register High\nReserved 0x0C18 – 0x0C3F 40www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 95\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2.3 Enhanced PWM Modules\nThe devices contain up to nine enhanced PWM (ePWM) modules (ePWM1 to ePWM9 ). Figure 8-4  shows a\nblock diagram of multiple ePWM modules. Figure 8-5  shows the signal interconnections with the ePWM.\nTable 8-3  and Table 8-4  show the complete ePWM register set per module .\n0\n1EXTSOC1A\nPOLSEL\nEXTSOC1A\nEXTSOC3AEXTSOC2AEXTSOC1B\nEXTSOC2B\nEXTSOC3BPulse□Stretcher,\n32□HSPCLK□Cycles□Wide□and□Then□to□Chip□PinsePWM2ePWM2SOCA\nePWM2SOCBePWM1ePWM1SOCA\nePWM1SOCB\nePWM3ePWM3SOCA\nePWM3SOCB\nePWM4ePWM4SOCA\nePWM4SOCB0\n1EXTSOC2A\nPOLSEL\nePWM6ePWM6SOCA\nePWM6SOCBePWM5ePWM5SOCA\nePWM5SOCB\nePWM7ePWM7SOCA\nePWM7SOCB\nePWM8ePWM8SOCA\nePWM8SOCB0\n1EXTSOC1B\nPOLSEL\n0\n1EXTSOC2B\nPOLSEL\nePWM9ePWM9SOCA\nePWM9SOCB0\n1EXTSOC3A\nPOLSEL\n0\n1EXTSOC3B\nPOLSEL\nFigure 8-4. Generation of SOC Pulses to the External ADC ModuleTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n96 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-3. ePWM1–ePWM4 Control and Status Registers\nNAME ePWM1 ePWM2 ePWM3 ePWM4SIZE (x16) /\n#SHADOWDESCRIPTION\nTBCTL 0x6800 0x6840 0x6880 0x68C0 1 / 0 Time Base Control Register\nTBSTS 0x6801 0x6841 0x6881 0x68C1 1 / 0 Time Base Status Register\nTBPHSHR 0x6802 0x6842 0x6882 0x68C2 1 / 0 Time Base Phase HRPWM Register\nTBPHS 0x6803 0x6843 0x6883 0x68C3 1 / 0 Time Base Phase Register\nTBCTR 0x6804 0x6844 0x6884 0x68C4 1 / 0 Time Base Counter Register\nTBPRD 0x6805 0x6845 0x6885 0x68C5 1 / 1 Time Base Period Register Set\nCMPCTL 0x6807 0x6847 0x6887 0x68C7 1 / 0 Counter Compare Control Register\nCMPAHR 0x6808 0x6848 0x6888 0x68C8 1 / 1 Time Base Compare A HRPWM Register\nCMPA 0x6809 0x6849 0x6889 0x68C9 1 / 1 Counter Compare A Register Set\nCMPB 0x680A 0x684A 0x688A 0x68CA 1 / 1 Counter Compare B Register Set\nAQCTLA 0x680B 0x684B 0x688B 0x68CB 1 / 0 Action Qualifier Control Register For Output A\nAQCTLB 0x680C 0x684C 0x688C 0x68CC 1 / 0 Action Qualifier Control Register For Output B\nAQSFRC 0x680D 0x684D 0x688D 0x68CD 1 / 0 Action Qualifier Software Force Register\nAQCSFRC 0x680E 0x684E 0x688E 0x68CE 1 / 1 Action Qualifier Continuous S/W Force Register Set\nDBCTL 0x680F 0x684F 0x688F 0x68CF 1 / 1 Dead-Band Generator Control Register\nDBRED 0x6810 0x6850 0x6890 0x68D01 / 0Dead-Band Generator Rising Edge Delay Count\nRegister\nDBFED 0x6811 0x6851 0x6891 0x68D11 / 0Dead-Band Generator Falling Edge Delay Count\nRegister\nTZSEL 0x6812 0x6852 0x6892 0x68D2 1 / 0 Trip Zone Select Register(1)\nTZCTL 0x6814 0x6854 0x6894 0x68D4 1 / 0 Trip Zone Control Register(1)\nTZEINT 0x6815 0x6855 0x6895 0x68D5 1 / 0 Trip Zone Enable Interrupt Register(1)\nTZFLG 0x6816 0x6856 0x6896 0x68D6 1 / 0 Trip Zone Flag Register\nTZCLR 0x6817 0x6857 0x6897 0x68D7 1 / 0 Trip Zone Clear Register(1)\nTZFRC 0x6818 0x6858 0x6898 0x68D8 1 / 0 Trip Zone Force Register(1)\nETSEL 0x6819 0x6859 0x6899 0x68D9 1 / 0 Event Trigger Selection Register\nETPS 0x681A 0x685A 0x689A 0x68DA 1 / 0 Event Trigger Prescale Register\nETFLG 0x681B 0x685B 0x689B 0x68DB 1 / 0 Event Trigger Flag Register\nETCLR 0x681C 0x685C 0x689C 0x68DC 1 / 0 Event Trigger Clear Register\nETFRC 0x681D 0x685D 0x689D 0x68DD 1 / 0 Event Trigger Force Register\nPCCTL 0x681E 0x685E 0x689E 0x68DE 1 / 0 PWM Chopper Control Register\nHRCNFG 0x6820 0x6860 0x68A0 0x68E0 1 / 0 HRPWM Configuration Register(1)\n(1) Registers that are EALLOW protected.\nTable 8-4. ePWM5–ePWM9 Control and Status Registers\nNAME ePWM5 ePWM6 ePWM7 ePWM8 ePWM9SIZE\n(x16) /\n#SHADO\nWDESCRIPTION\nTBCTL 0x6900 0x6940 0x6980 0x69C0 0x6600 1 / 0 Time Base Control Register\nTBSTS 0x6901 0x6941 0x6981 0x69C1 0x6601 1 / 0 Time Base Status Register\nTBPHSHR 0x6902 0x6942 0x6982 0x69C2 0x6602 1 / 0 Time Base Phase HRPWM Register\nTBPHS 0x6903 0x6943 0x6983 0x69C3 0x6603 1 / 0 Time Base Phase Register\nTBCTR 0x6904 0x6944 0x6984 0x69C4 0x6604 1 / 0 Time Base Counter Register\nTBPRD 0x6905 0x6945 0x6985 0x69C5 0x6605 1 / 1 Time Base Period Register Set\nCMPCTL 0x6907 0x6947 0x6987 0x69C7 0x6607 1 / 0 Counter Compare Control Register\nCMPAHR 0x6908 0x6948 0x6988 0x69C8 0x6608 1 / 1 Time Base Compare A HRPWM Registerwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 97\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-4. ePWM5–ePWM9 Control and Status Registers (continued)\nNAME ePWM5 ePWM6 ePWM7 ePWM8 ePWM9SIZE\n(x16) /\n#SHADO\nWDESCRIPTION\nCMPA 0x6909 0x6949 0x6989 0x69C9 0x6609 1 / 1 Counter Compare A Register Set\nCMPB 0x690A 0x694A 0x698A 0x69CA 0x660A 1 / 1 Counter Compare B Register Set\nAQCTLA 0x690B 0x694B 0x698B 0x69CB 0x660B 1 / 0 Action Qualifier Control Register For Output A\nAQCTLB 0x690C 0x694C 0x698C 0x69CC 0x660C 1 / 0 Action Qualifier Control Register For Output B\nAQSFRC 0x690D 0x694D 0x698D 0x69CD 0x660D 1 / 0 Action Qualifier Software Force Register\nAQCSFRC 0x690E 0x694E 0x698E 0x69CE 0x660E1 / 1Action Qualifier Continuous S/W Force\nRegister Set\nDBCTL 0x690F 0x694F 0x698F 0x69CF 0x660F 1 / 1 Dead-Band Generator Control Register\nDBRED 0x6910 0x6950 0x6990 0x69D0 0x66101 / 0Dead-Band Generator Rising Edge Delay\nCount Register\nDBFED 0x6911 0x6951 0x6991 0x69D1 0x66111 / 0Dead-Band Generator Falling Edge Delay\nCount Register\nTZSEL 0x6912 0x6952 0x6992 0x69D2 0x6612 1 / 0 Trip Zone Select Register(1)\nTZCTL 0x6914 0x6954 0x6994 0x69D4 0x6614 1 / 0 Trip Zone Control Register(1)\nTZEINT 0x6915 0x6955 0x6995 0x69D5 0x6615 1 / 0 Trip Zone Enable Interrupt Register(1)\nTZFLG 0x6916 0x6956 0x6996 0x69D6 0x6616 1 / 0 Trip Zone Flag Register\nTZCLR 0x6917 0x6957 0x6997 0x69D7 0x6617 1 / 0 Trip Zone Clear Register(1)\nTZFRC 0x6918 0x6958 0x6998 0x69D8 0x6618 1 / 0 Trip Zone Force Register(1)\nETSEL 0x6919 0x6959 0x6999 0x69D9 0x6619 1 / 0 Event Trigger Selection Register\nETPS 0x691A 0x695A 0x699A 0x69DA 0x661A 1 / 0 Event Trigger Prescale Register\nETFLG 0x691B 0x695B 0x699B 0x69DB 0x661B 1 / 0 Event Trigger Flag Register\nETCLR 0x691C 0x695C 0x699C 0x69DC 0x661C 1 / 0 Event Trigger Clear Register\nETFRC 0x691D 0x695D 0x699D 0x69DD 0x661D 1 / 0 Event Trigger Force Register\nPCCTL 0x691E 0x695E 0x699E 0x69DE 0x661E 1 / 0 PWM Chopper Control Register\nHRCNFG 0x6920 0x6960 0x69A0 0x69E0 0x6620 1 / 0 HRPWM Configuration Register(1)\n(1) Registers that are EALLOW protected.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n98 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nCTR=PRDTBPRD shadow (16)\nTBPRD active (16)\nCounter\nup/down\n(16 bit)\nTBCTR\nactive (16)TBCTL[PHSEN]\nTBCTL[SWFSYNC]\n(software forced sync)EPWMxSYNCICTR=ZERO\nCTR_DirCTR=CMPB\nDisabledSync\nin/out\nselect\nMux\nTBCTL[SYNCOSEL]EPWMxSYNCO\nTBPHS active (24)168TBPHSHR (8)\nPhase\ncontrolTime−base (TB)\nCTR=CMPA\nCMPA active (24)16\nCMPA shadow (24)Action\nqualifier\n(AQ)\n8\n16Counter compare (CC)\nCMPB active (16)CTR=CMPB\nCMPB shadow (16)CMPAHR (8)\nEPWMA\nEPWMBDead\nband\n(DB) (PC)chopperPWM\nzone\n(TZ)Trip\nCTR = ZEROEPWMxAO\nEPWMxBO\nEPWMxTZINT\nTZ1to TZ6HRPWMCTR = PRD\nCTR = ZERO\nCTR = CMPBCTR = CMPA\nCTR_DirEvent\ntrigger\nand\ninterrupt\n(ET)EPWMxINT\nEPWMxSOCA\nEPWMxSOCBCTR=ZEROFigure 8-5. ePWM Submodules Showing Critical Internal Signal Interconnections\n8.2.4 High-Resolution PWM (HRPWM)\nThe HRPWM module offers PWM resolution (time granularity) which is significantly better than what can be\nachieved using conventionally derived digital PWM methods. The key points for the HRPWM module are:\n• Significantly extends the time resolution capabilities of conventionally derived digital PWM\n• Typically used when effective PWM resolution falls below approximately 9 or 10 bits. This occurs at PWM\nfrequencies greater than approximately 500 kHz when using a CPU/System clock of 300 MHz or\napproximately 375 kHz when using a CPU/system clock of 200 MHz.\n• This capability can be used in both duty cycle and phase-shift control methods.\n• Finer time granularity control or edge positioning is controlled through extensions to the Compare A and\nPhase registers of the ePWM module.\n• HRPWM capabilities are offered only on the A signal path of an ePWM module (that is, on the EPWMxA\noutput). EPWMxB output has conventional PWM capabilities.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 99\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2.5 Enhanced CAP Modules\nThe device contains up to six enhanced capture (eCAP) modules (eCAP1 to eCAP6). Figure 8-6  shows a\nfunctional block diagram of a module.\nTSCTR\n(Counter - 32-bit)\nRST\nCAP1\n(APRD Active)LD\nCAP2\n(ACMP Active)LD\nCAP3\n(APRD Shadow)LD\nCAP4\n(ACMP Shadow)LD\nContinuous/\nOne-Shot\nCapture ControlLD1\nLD2\nLD3\nLD432PRD [0-31]CTR [0-31]\neCAPx\nMODE SELECT\nInterrupt\nTrigger\nand\nFlag\nControlto PIE\nCTR=CMP32\n3232\nACMP\nShadowEvent\nPrescaleCTRPHS\n(Phase Register - 32-bit)\nSYNCOutSYNCIn\nSYNC\nEvent\nQualifierPolarity\nSelect\nPolarity\nSelect\nPolarity\nSelect\nPolarity\nSelect\nCTR=PRDCTR_OVF4PWM\nCompare\nLogicCTR [0-31]\nPRD [0-31]\nCMP [0-31]\nCTR=CMPCTR=PRDCTR_OVF OVFAPWM  Mode\nDelta Mode\n4Capture Events\nCEVT[1:4]APRD\nShadow\n32\n32\n323232CMP [0-31]\nFigure 8-6. eCAP Functional Block DiagramTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n100 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nThe eCAP modules are clocked at the SYSCLKOUT rate.\nThe clock enable bits (ECAP1ENCLK, ECAP2ENCLK, ECAP3ENCLK, ECAP4ENCLK, ECAP5ENCLK,\nECAP6ENCLK) in the PCLKCR1 register are used to turn off the eCAP modules individually (for low power\noperation). Upon reset, ECAP1ENCLK, ECAP2ENCLK, ECAP3ENCLK, ECAP4ENCLK, ECAP5ENCLK, and\nECAP6ENCLK are set to low, indicating that the peripheral clock is off.\nTable 8-5. eCAP Control and Status Registers\nNAME eCAP1 eCAP2 eCAP3 eCAP4 eCAP5 eCAP6SIZE\n(x16)DESCRIPTION\nTSCTR 0x6A00 0x6A20 0x6A40 0x6A60 0x6A80 0x6AA0 2 Timestamp Counter\nCTRPHS 0x6A02 0x6A22 0x6A42 0x6A62 0x6A82 0x6AA2 2 Counter Phase Offset Value Register\nCAP1 0x6A04 0x6A24 0x6A44 0x6A64 0x6A84 0x6AA4 2 Capture 1 Register\nCAP2 0x6A06 0x6A26 0x6A46 0x6A66 0x6A86 0x6AA6 2 Capture 2 Register\nCAP3 0x6A08 0x6A28 0x6A48 0x6A68 0x6A88 0x6AA8 2 Capture 3 Register\nCAP4 0x6A0A 0x6A2A 0x6A4A 0x6A6A 0x6A8A 0x6AAA 2 Capture 4 Register\nReserved0x6A0C-\n0x6A120x6A2C-0x6\nA320x6A4C-\n0x6A520x6A6C-\n0x6A720x6A8C-0\nx6A920x6AAC-\n0x6AB28 Reserved\nECCTL1 0x6A14 0x6A34 0x6A54 0x6A74 0x6A94 0x6AB4 1 Capture Control Register 1\nECCTL2 0x6A15 0x6A35 0x6A55 0x6A75 0x6A95 0x6AB5 1 Capture Control Register 2\nECEINT 0x6A16 0x6A36 0x6A56 0x6A76 0x6A96 0x6AB6 1 Capture Interrupt Enable Register\nECFLG 0x6A17 0x6A37 0x6A57 0x6A77 0x6A97 0x6AB7 1 Capture Interrupt Flag Register\nECCLR 0x6A18 0x6A38 0x6A58 0x6A78 0x6A98 0x6AB8 1 Capture Interrupt Clear Register\nECFRC 0x6A19 0x6A39 0x6A59 0x6A79 0x6A99 0x6AB9 1 Capture Interrupt Force Register\nReserved0x6A1A-\n0x6A1F0x6A3A-\n0x6A3F0x6A5A-\n0x6A5F0x6A7A-\n0x6A7F0x6A9A-0x\n6A9F0x6ABA-\n0x6ABF6 Reserved\n8.2.6 Enhanced QEP Modules\nThe device contains up to three  enhanced quadrature encoder (eQEP) modules with 32-bit resolution (eQEP1,\neQEP2, eQEP3). Figure 8-7  shows the block diagram of the eQEP module.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 101\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nQWDTMR\nQWDPRD\n16\nQWDOG UTIMEQUPRDQUTMR\n32\nUTOUT\nWDTOUTQuadrature\nCapture\nUnit\n(QCAP)\nQCPRDLATQCTMRLAT16\nQFLGQEPSTSQEPCTLRegisters\nUsed by\nMultiple Units\nQCLK\nQDIR\nQI\nQS\nPHE\nPCSOUTQuadrature\nDecoder\n(QDU)QDECCTL\n16\nPosition Counter/\nControl Unit\n(PCCU)QPOSLAT\nQPOSSLAT16\nQPOSILATEQEPxAIN\nEQEPxBIN\nEQEPxIIN\nEQEPxIOUT\nEQEPxIOE\nEQEPxSIN\nEQEPxSOUT\nEQEPxSOEGPIO\nMUXEQEPxA/XCLK\nEQEPxB/XDIR\nEQEPxSEQEPxI\nQPOSCMP QEINT\nQFRC32\nQCLR\nQPOSCTL16 32\nQPOSCNT\nQPOSMAXQPOSINITPIEEQEPxINT\nEnhanced QEP (eQEP) PeripheralSystem Control\nRegisters\nQCTMRQCPRD\n16 16QCAPCTLEQEPxENCLK\nSYSCLKOUTTo CPU\nData BusFigure 8-7. eQEP Functional Block DiagramTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n102 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-6  provides a summary of the eQEP registers.\nTable 8-6. eQEP Control and Status Registers\nNAMEeQEP1\nADDRESSeQEP2\nADDRESSeQEP3\nADDRESSeQEPx\nSIZE(x16)/\n#SHADOWREGISTER DESCRIPTION\nQPOSCNT 0x6B00 0x6B40 0x6B80 2/0 eQEP Position Counter\nQPOSINIT 0x6B02 0x6B42 0x6B82 2/0 eQEP Initialization Position Count\nQPOSMAX 0x6B04 0x6B44 0x6B84 2/0 eQEP Maximum Position Count\nQPOSCMP 0x6B06 0x6B46 0x6B86 2/1 eQEP Position-compare\nQPOSILAT 0x6B08 0x6B48 0x6B88 2/0 eQEP Index Position Latch\nQPOSSLAT 0x6B0A 0x6B4A 0x6B8A 2/0 eQEP Strobe Position Latch\nQPOSLAT 0x6B0C 0x6B4C 0x6B8C 2/0 eQEP Position Latch\nQUTMR 0x6B0E 0x6B4E 0x6B8E 2/0 eQEP Unit Timer\nQUPRD 0x6B10 0x6B50 0x6B90 2/0 eQEP Unit Period Register\nQWDTMR 0x6B12 0x6B52 0x6B92 1/0 eQEP Watchdog Timer\nQWDPRD 0x6B13 0x6B53 0x6B93 1/0 eQEP Watchdog Period Register\nQDECCTL 0x6B14 0x6B54 0x6B94 1/0 eQEP Decoder Control Register\nQEPCTL 0x6B15 0x6B55 0x6B95 1/0 eQEP Control Register\nQCAPCTL 0x6B16 0x6B56 0x6B96 1/0 eQEP Capture Control Register\nQPOSCTL 0x6B17 0x6B57 0x6B97 1/0 eQEP Position-compare Control Register\nQEINT 0x6B18 0x6B58 0x6B98 1/0 eQEP Interrupt Enable Register\nQFLG 0x6B19 0x6B59 0x6B99 1/0 eQEP Interrupt Flag Register\nQCLR 0x6B1A 0x6B5A 0x6B9A 1/0 eQEP Interrupt Clear Register\nQFRC 0x6B1B 0x6B5B 0x6B9B 1/0 eQEP Interrupt Force Register\nQEPSTS 0x6B1C 0x6B5C 0x6B9C 1/0 eQEP Status Register\nQCTMR 0x6B1D 0x6B5D 0x6B9D 1/0 eQEP Capture Timer\nQCPRD 0x6B1E 0x6B5E 0x6B9E 1/0 eQEP Capture Period Register\nQCTMRLAT 0x6B1F 0x6B5F 0x6B9F 1/0 eQEP Capture Timer Latch\nQCPRDLAT 0x6B20 0x6B60 0x6BA0 1/0 eQEP Capture Period Latch\nReserved 0x6B21 - 0x6B3F 0x6B61 - 0x6B7F0x6BBA1 -\n0x6BBF31/0\n8.2.7 External ADC Interface\nThe external ADC interface operation is configured, controlled, and monitored by the External SoC Configuration\nRegister (EXTSOCCFG) at address 0x702E. Figure 8-8  shows how the Start-of-Conversion signals for external\nADCs are generated by the on-chip PWM modules.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 103\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n0\n1EXTSOC1A\nPOLSEL\nEXTSOC1A\nEXTSOC3AEXTSOC2AEXTSOC1B\nEXTSOC2B\nEXTSOC3BPulse□Stretcher,\n32□HSPCLK□Cycles□Wide□and□Then□to□Chip□PinsePWM2ePWM2SOCA\nePWM2SOCBePWM1ePWM1SOCA\nePWM1SOCB\nePWM3ePWM3SOCA\nePWM3SOCB\nePWM4ePWM4SOCA\nePWM4SOCB0\n1EXTSOC2A\nPOLSEL\nePWM6ePWM6SOCA\nePWM6SOCBePWM5ePWM5SOCA\nePWM5SOCB\nePWM7ePWM7SOCA\nePWM7SOCB\nePWM8ePWM8SOCA\nePWM8SOCB0\n1EXTSOC1B\nPOLSEL\n0\n1EXTSOC2B\nPOLSEL\nePWM9ePWM9SOCA\nePWM9SOCB0\n1EXTSOC3A\nPOLSEL\n0\n1EXTSOC3B\nPOLSELFigure 8-8. External ADC Interface\nTable 8-7. External ADC Interface Registers\nNAME DESCRIPTION ADDRESS\nEXTSOCCFG External SoC Configuration Register 0x00 702E\n8.2.8 Multichannel Buffered Serial Port (McBSP) Module\nThe McBSP module has the following features:\n• Compatible to McBSP in TMS320C54x/TMS320C55x DSP devices\n• Full-duplex communicationTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n104 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n• Double-buffered data registers that allow a continuous data stream\n• Independent framing and clocking for receive and transmit\n• External shift clock generation or an internal programmable frequency shift clock\n• A wide selection of data sizes including 8, 12, 16, 20, 24, or 32 bits\n• 8-bit data transfers with LSB or MSB first\n• Programmable polarity for both frame synchronization and data clocks\n• Highly programmable internal clock and frame generation\n• Direct interface to industry-standard CODECs, Analog Interface Chips (AICs), and other serially connected\nA/D and D/A devices\n• Works with SPI-compatible devices\n• The following application interfaces can be supported on the McBSP:\n– T1/E1 framers\n– IOM-2 compliant devices\n– AC97-compliant devices (the necessary multiphase frame synchronization capability is provided.)\n– IIS-compliant devices\n– SPI\n• McBSP clock rate,\n/c40 /c41CLKSRGCLKG =1+ CLKGDV\nwhere CLKSRG source could be LSPCLK, CLKX, or CLKR. Serial port performance is limited by I/O buffer\nswitching speed. Internal prescalers must be adjusted such that the peripheral speed is less than the I/O\nbuffer speed limit.\nNote\nSee Section 7  for maximum I/O pin toggling speed.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 105\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nFigure 8-9  shows the block diagram of the McBSP module.\n16\nMcBSP Receive\nInterrupt□Select□LogicMDXx\nMDRx\nExpand□Logic\nDRR1□Receive□Buffer\nRX\nInterruptDRR2□Receive□BufferRBR1□Register RBR2□RegisterMCLKXxMFSXx\nMCLKRx\nMFSRx16Compand□LogicDXR2 Transmit□Buffer\nRSR1XSR2 XSR1\nPeripheral□Read□Bus161616\n16 16RSR2DXR1 Transmit□BufferLSPCLK\nMRINT\nTo□CPURX□Interrupt□LogicMcBSP Transmit\nInterrupt□Select□LogicTX\nInterruptMXINT\nTo□CPU TX□Interrupt□Logic\n16\n16 16BridgeDMA Bus\nPeripheral□BusPeripheral□Write□Bus\nCPUCPU\nCPU\nFigure 8-9. McBSP ModuleTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n106 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-8  provides a summary of the McBSP registers.\nTable 8-8. McBSP Register Summary\nNAMEMcBSP-A\nADDRESSMcBSP-B\nADDRESSTYPE RESET VALUE DESCRIPTION\nData Registers, Receive, Transmit\nDRR2 0x5000 0x5040 R 0x0000 McBSP Data Receive Register 2\nDRR1 0x5001 0x5041 R 0x0000 McBSP Data Receive Register 1\nDXR2 0x5002 0x5042 W 0x0000 McBSP Data Transmit Register 2\nDXR1 0x5003 0x5043 W 0x0000 McBSP Data Transmit Register 1\nMcBSP Control Registers\nSPCR2 0x5004 0x5044 R/W 0x0000 McBSP Serial Port Control Register 2\nSPCR1 0x5005 0x5045 R/W 0x0000 McBSP Serial Port Control Register 1\nRCR2 0x5006 0x5046 R/W 0x0000 McBSP Receive Control Register 2\nRCR1 0x5007 0x5047 R/W 0x0000 McBSP Receive Control Register 1\nXCR2 0x5008 0x5048 R/W 0x0000 McBSP Transmit Control Register 2\nXCR1 0x5009 0x5049 R/W 0x0000 McBSP Transmit Control Register 1\nSRGR2 0x500A 0x504A R/W 0x0000 McBSP Sample Rate Generator Register 2\nSRGR1 0x500B 0x504B R/W 0x0000 McBSP Sample Rate Generator Register 1\nMultichannel Control Registers\nMCR2 0x500C 0x504C R/W 0x0000 McBSP Multichannel Register 2\nMCR1 0x500D 0x504D R/W 0x0000 McBSP Multichannel Register 1\nRCERA 0x500E 0x504E R/W 0x0000 McBSP Receive Channel Enable Register Partition A\nRCERB 0x500F 0x504F R/W 0x0000 McBSP Receive Channel Enable Register Partition B\nXCERA 0x5010 0x5050 R/W 0x0000 McBSP Transmit Channel Enable Register Partition A\nXCERB 0x5011 0x5051 R/W 0x0000 McBSP Transmit Channel Enable Register Partition B\nPCR 0x5012 0x5052 R/W 0x0000 McBSP Pin Control Register\nRCERC 0x5013 0x5053 R/W 0x0000 McBSP Receive Channel Enable Register Partition C\nRCERD 0x5014 0x5054 R/W 0x0000 McBSP Receive Channel Enable Register Partition D\nXCERC 0x5015 0x5055 R/W 0x0000 McBSP Transmit Channel Enable Register Partition C\nXCERD 0x5016 0x5056 R/W 0x0000 McBSP Transmit Channel Enable Register Partition D\nRCERE 0x5017 0x5057 R/W 0x0000 McBSP Receive Channel Enable Register Partition E\nRCERF 0x5018 0x5058 R/W 0x0000 McBSP Receive Channel Enable Register Partition F\nXCERE 0x5019 0x5059 R/W 0x0000 McBSP Transmit Channel Enable Register Partition E\nXCERF 0x501A 0x505A R/W 0x0000 McBSP Transmit Channel Enable Register Partition F\nRCERG 0x501B 0x505B R/W 0x0000 McBSP Receive Channel Enable Register Partition G\nRCERH 0x501C 0x505C R/W 0x0000 McBSP Receive Channel Enable Register Partition H\nXCERG 0x501D 0x505D R/W 0x0000 McBSP Transmit Channel Enable Register Partition G\nXCERH 0x501E 0x505E R/W 0x0000 McBSP Transmit Channel Enable Register Partition H\nMFFINT 0x5023 0x5063 R/W 0x0000 McBSP Interrupt Enable Register\nMFFST 0x5024 0x5064 R/W 0x0000 McBSP Pin Status Registerwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 107\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2.9 Enhanced Controller Area Network (eCAN) Modules (eCAN-A and eCAN-B)\nThe CAN module has the following features:\n• Fully compliant with ISO 11898-1 (CAN 2.0B)\n• Supports data rates up to 1 Mbps\n• Thirty-two mailboxes, each with the following properties:\n– Configurable as receive or transmit\n– Configurable with standard or extended identifier\n– Has a programmable receive mask\n– Supports data and remote frame\n– Composed of 0 to 8 bytes of data\n– Uses a 32-bit timestamp on receive and transmit message\n– Protects against reception of new message\n– Holds the dynamically programmable priority of transmit message\n– Employs a programmable interrupt scheme with two interrupt levels\n– Employs a programmable alarm on transmission or reception time-out\n• Low-power mode\n• Programmable wake-up on bus activity\n• Automatic reply to a remote request message\n• Automatic retransmission of a frame in case of loss of arbitration or error\n• 32-bit local network time counter synchronized by a specific message (communication in conjunction with\nmailbox 16)\n• Self-test mode\n– Operates in a loopback mode receiving its own message. A "dummy" acknowledge is provided, thereby\neliminating the need for another node to provide the acknowledge bit.\nNote\nFor a SYSCLKOUT of 300 MHz, the smallest bit rate possible is 11.719 kbps.\nFor a SYSCLKOUT of 200 MHz, the smallest bit rate possible is 7.8125 kbps.\nThe CAN has passed the conformance test per ISO/DIS 16845. Contact TI for test report and exceptions.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n108 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nMailbox RAM\n(512 Bytes)\n32-Message Mailbox\nof 4 x 32-Bit WordsMemory Management\nUnit\nCPU Interface,\nReceive Control Unit,\nTimer Management UniteCAN Memory\n(512 Bytes)\nRegisters and\nMessage Objects ControlMessage Controller\n32 32\neCAN Protocol Kernel\nReceive Buffer\nTransmit Buffer\nControl Buffer\nStatus BufferEnhanced CAN Controller32Controls Address Data eCAN1INT eCAN0INT\n32\nSN65HVD23x\n3.3-V CAN Transceiver\nCAN BusFigure 8-10. eCAN Block Diagram and Interface Circuit\nTable 8-9. 3.3-V eCAN Transceivers\nPART NUMBERSUPPLY\nVOLTAGELOW-POWER\nMODESLOPE\nCONTROLVREF OTHER TA\nSN65HVD230Q 3.3 V Standby Adjustable Yes – –40°C to 125°C\nSN65HVD231Q 3.3 V Sleep Adjustable Yes – –40°C to 125°C\nSN65HVD232Q 3.3 V None None None – –40°C to 125°C\nSN65HVD233 3.3 V Standby Adjustable None Diagnostic Loopback –40°C to 125°C\nSN65HVD234 3.3 V Standby and Sleep Adjustable None – –40°C to 125°C\nSN65HVD235 3.3 V Standby Adjustable None Autobaud Loopback –40°C to 125°C\nISO1050 3–5.5 V None None None • Built-in isolation\n• Low-prop delay\n• Thermal shutdown\n• Fail-safe operation\n• Dominant time-out–55°C to 105°Cwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 109\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nMailbox Enable - CANME\nMailbox Direction - CANMD\nTransmission Request Set - CANTRS\nTransmission Request Reset - CANTRR\nTransmission Acknowledge - CANTA\nAbort Acknowledge - CANAA\nReceived Message Pending - CANRMP\nReceived Message Lost - CANRML\nRemote Frame Pending - CANRFP\nGlobal Acceptance Mask - CANGAM\nMaster Control - CANMC\nBit-Timing Configuration - CANBTC\nError and Status - CANES\nTransmit Error Counter - CANTEC\nReceive Error Counter - CANREC\nGlobal Interrupt Flag 0 - CANGIF0\nGlobal Interrupt Mask - CANGIM\nMailbox Interrupt Mask - CANMIM\nMailbox Interrupt Level - CANMIL\nOverwrite Protection Control - CANOPC\nTX I/O Control - CANTIOC\nRX I/O Control - CANRIOC\nTimestamp Counter - CANTSCGlobal Interrupt Flag 1 - CANGIF1\nTime-Out Control - CANTOC\nTime-Out Status - CANTOS\nReservedeCAN-A Control and Status Registers\nMessage Identifier - MSGID 61E8h-61E9h\nMessage Control - MSGCTRL\nMessage Data Low - MDL\nMessage Data High - MDHMessage Mailbox  (16 Bytes)Control and Status Registers6000h\n603Fh\nLocal Acceptance Masks (LAM)\n(32 x 32-Bit RAM)6040h\n607Fh\n6080h\n60BFh\n60C0h\n60FFheCAN-A Memory (512 Bytes)\nMessage Object Timestamps (MOTS)\n(32 x 32-Bit RAM)\nMessage Object Time-Out (MOTO)\n(32 x 32-Bit RAM)\nMailbox 0 6100h-6107h\nMailbox 1 6108h-610Fh\nMailbox 2 6110h-6117h\nMailbox 3 6118h-611FheCAN-A Memory RAM (512 Bytes)\nMailbox 4 6120h-6127h\nMailbox 28 61E0h-61E7h\nMailbox 29 61E8h-61EFh\nMailbox 30 61F0h-61F7h\nMailbox 31 61F8h-61FFh\n61EAh-61EBh\n61ECh-61EDh\n61EEh-61EFhFigure 8-11. eCAN-A Memory Map\nNote\nIf the eCAN module is not used in an application, the RAM available (LAM, MOTS, MOTO, and\nmailbox RAM) can be used as general-purpose RAM. The CAN module clock should be enabled for\nthis.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n110 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nMailbox Enable - CANME\nMailbox Direction - CANMD\nTransmission Request Set - CANTRS\nTransmission Request Reset - CANTRR\nTransmission Acknowledge - CANTA\nAbort Acknowledge - CANAA\nReceived Message Pending - CANRMP\nReceived Message Lost - CANRML\nRemote Frame Pending - CANRFP\nGlobal Acceptance Mask - CANGAM\nMaster Control - CANMC\nBit-Timing Configuration - CANBTC\nError and Status - CANES\nTransmit Error Counter - CANTEC\nReceive Error Counter - CANREC\nGlobal Interrupt Flag 0 - CANGIF0\nGlobal Interrupt Mask - CANGIM\nMailbox Interrupt Mask - CANMIM\nMailbox Interrupt Level - CANMIL\nOverwrite Protection Control - CANOPC\nTX I/O Control - CANTIOC\nRX I/O Control - CANRIOC\nTimestamp Counter - CANTSCGlobal Interrupt Flag 1 - CANGIF1\nTime-Out Control - CANTOC\nTime-Out Status - CANTOS\nReservedeCAN-B Control and Status Registers\nMessage Identifier - MSGID 63E8h-63E9h\nMessage Control - MSGCTRL\nMessage Data Low - MDL\nMessage Data High - MDHMessage Mailbox  (16 Bytes)Control and Status Registers6200h\n623Fh\nLocal Acceptance Masks (LAM)\n(32 x 32-Bit RAM)6240h\n627Fh\n6280h\n62BFh\n62C0h\n62FFheCAN-B Memory (512 Bytes)\nMessage Object Timestamps (MOTS)\n(32 x 32-Bit RAM)\nMessage Object Time-Out (MOTO)\n(32 x 32-Bit RAM)\nMailbox 0 6300h-6307h\nMailbox 1 6308h-630Fh\nMailbox 2 6310h-6317h\nMailbox 3 6318h-631FheCAN-B Memory RAM (512 Bytes)\nMailbox 4 6320h-6327h\nMailbox 28 63E0h-63E7h\nMailbox 29 63E8h-63EFh\nMailbox 30 63F0h-63F7h\nMailbox 31 63F8h-63FFh\n63EAh-63EBh\n63ECh-63EDh\n63EEh-63EFhFigure 8-12. eCAN-B Memory Mapwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 111\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nThe CAN registers listed in Table 8-10  are used by the CPU to configure and control the CAN controller and the\nmessage objects. eCAN control registers only support 32-bit read/write operations. Mailbox RAM can be\naccessed as 16 bits or 32 bits. Thirty-two-bit accesses are aligned to an even boundary.\nTable 8-10. CAN Register Map (1)\nREGISTER NAMEeCAN-A\nADDRESSeCAN-B\nADDRESSSIZE\n(x32)DESCRIPTION\nCANME 0x6000 0x6200 1 Mailbox enable\nCANMD 0x6002 0x6202 1 Mailbox direction\nCANTRS 0x6004 0x6204 1 Transmit request set\nCANTRR 0x6006 0x6206 1 Transmit request reset\nCANTA 0x6008 0x6208 1 Transmission acknowledge\nCANAA 0x600A 0x620A 1 Abort acknowledge\nCANRMP 0x600C 0x620C 1 Receive message pending\nCANRML 0x600E 0x620E 1 Receive message lost\nCANRFP 0x6010 0x6210 1 Remote frame pending\nCANGAM 0x6012 0x6212 1 Global acceptance mask\nCANMC 0x6014 0x6214 1 Master control\nCANBTC 0x6016 0x6216 1 Bit-timing configuration\nCANES 0x6018 0x6218 1 Error and status\nCANTEC 0x601A 0x621A 1 Transmit error counter\nCANREC 0x601C 0x621C 1 Receive error counter\nCANGIF0 0x601E 0x621E 1 Global interrupt flag 0\nCANGIM 0x6020 0x6220 1 Global interrupt mask\nCANGIF1 0x6022 0x6222 1 Global interrupt flag 1\nCANMIM 0x6024 0x6224 1 Mailbox interrupt mask\nCANMIL 0x6026 0x6226 1 Mailbox interrupt level\nCANOPC 0x6028 0x6228 1 Overwrite protection control\nCANTIOC 0x602A 0x622A 1 TX I/O control\nCANRIOC 0x602C 0x622C 1 RX I/O control\nCANTSC 0x602E 0x622E 1 Timestamp counter (Reserved in SCC mode)\nCANTOC 0x6030 0x6230 1 Time-out control (Reserved in SCC mode)\nCANTOS 0x6032 0x6232 1 Time-out status (Reserved in SCC mode)\n(1) These registers are mapped to Peripheral Frame 1.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n112 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2.10 Serial Communications Interface (SCI) Modules (SCI-A, SCI-B, SCI-C)\nThe devices include three serial communications interface (SCI) modules. The SCI modules support digital\ncommunications between the CPU and other asynchronous peripherals that use the standard nonreturn-to-zero\n(NRZ) format. The SCI receiver and transmitter are double-buffered, and each has its own separate enable and\ninterrupt bits. Both can be operated independently or simultaneously in the full-duplex mode. To ensure data\nintegrity, the SCI checks received data for break detection, parity, overrun, and framing errors. The bit rate is\nprogrammable to more than 65000 different speeds through a 16-bit baud-select register.\nFeatures of each SCI module include:\n• Two external pins:\n– SCITXD: SCI transmit-output pin\n– SCIRXD: SCI receive-input pin\nNote\nBoth pins can be used as GPIO if not used for SCI.\n– Baud rate programmable to 64K different rates:\n8 * 1) (BRRLSPCLKrate Baud/c43/c61 0 BRR when /c185\n16LSPCLKrate Baud /c61 0 BRR when /c61\nNote\nSee Section 7  for maximum I/O pin toggling speed.\n• Data-word format\n– One start bit\n– Data-word length programmable from one to eight bits\n– Optional even/odd/no parity bit\n– One or two stop bits\n• Four error-detection flags: parity, overrun, framing, and break detection\n• Two wake-up multiprocessor modes: idle-line and address bit\n• Half- or full-duplex operation\n• Double-buffered receive and transmit functions\n• Transmitter and receiver operations can be accomplished through interrupt-driven or polled algorithms with\nstatus flags.\n– Transmitter: TXRDY flag (transmitter-buffer register is ready to receive another character) and TX EMPTY\nflag (transmitter-shift register is empty)\n– Receiver: RXRDY flag (receiver-buffer register is ready to receive another character), BRKDT flag (break\ncondition occurred), and RX ERROR flag (monitoring four interrupt conditions)\n• Separate enable bits for transmitter and receiver interrupts (except BRKDT)\n• NRZ (nonreturn-to-zero) format\nNote\nAll registers in this module are 8-bit registers that are connected to Peripheral Frame 2. When a\nregister is accessed, the register data is in the lower byte (7-0), and the upper byte (15-8) is read as\nzeros. Writing to the upper byte has no effect.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 113\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nEnhanced features:\n• Auto baud-detect hardware logic\n• 16-level transmit/receive FIFO\nThe SCI port operation is configured and controlled by the registers listed in Table 8-11 , Table 8-12 , and Table\n8-13.\nTable 8-11. SCI-A Registers (1)\nNAME ADDRESS SIZE (x16) DESCRIPTION\nSCICCRA 0x7050 1 SCI-A Communications Control Register\nSCICTL1A 0x7051 1 SCI-A Control Register 1\nSCIHBAUDA 0x7052 1 SCI-A Baud Register, High Bits\nSCILBAUDA 0x7053 1 SCI-A Baud Register, Low Bits\nSCICTL2A 0x7054 1 SCI-A Control Register 2\nSCIRXSTA 0x7055 1 SCI-A Receive Status Register\nSCIRXEMUA 0x7056 1 SCI-A Receive Emulation Data Buffer Register\nSCIRXBUFA 0x7057 1 SCI-A Receive Data Buffer Register\nSCITXBUFA 0x7059 1 SCI-A Transmit Data Buffer Register\nSCIFFTXA(2)0x705A 1 SCI-A FIFO Transmit Register\nSCIFFRXA(2)0x705B 1 SCI-A FIFO Receive Register\nSCIFFCTA(2)0x705C 1 SCI-A FIFO Control Register\nSCIPRIA 0x705F 1 SCI-A Priority Control Register\n(1) Registers in this table are mapped to Peripheral Frame 2 space. This space only allows 16-bit accesses. 32-bit accesses produce\nundefined results.\n(2) These registers are new registers for the FIFO mode.\nTable 8-12. SCI-B Registers (1) (2)\nNAME ADDRESS SIZE (x16) DESCRIPTION\nSCICCRB 0x7750 1 SCI-B Communications Control Register\nSCICTL1B 0x7751 1 SCI-B Control Register 1\nSCIHBAUDB 0x7752 1 SCI-B Baud Register, High Bits\nSCILBAUDB 0x7753 1 SCI-B Baud Register, Low Bits\nSCICTL2B 0x7754 1 SCI-B Control Register 2\nSCIRXSTB 0x7755 1 SCI-B Receive Status Register\nSCIRXEMUB 0x7756 1 SCI-B Receive Emulation Data Buffer Register\nSCIRXBUFB 0x7757 1 SCI-B Receive Data Buffer Register\nSCITXBUFB 0x7759 1 SCI-B Transmit Data Buffer Register\nSCIFFTXB(2)0x775A 1 SCI-B FIFO Transmit Register\nSCIFFRXB(2)0x775B 1 SCI-B FIFO Receive Register\nSCIFFCTB(2)0x775C 1 SCI-B FIFO Control Register\nSCIPRIB 0x775F 1 SCI-B Priority Control Register\n(1) Registers in this table are mapped to Peripheral Frame 2 space. This space only allows 16-bit accesses. 32-bit accesses produce\nundefined results.\n(2) These registers are new registers for the FIFO mode.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n114 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-13. SCI-C Registers (1) (2)\nNAME ADDRESS SIZE (x16) DESCRIPTION\nSCICCRC 0x7770 1 SCI-C Communications Control Register\nSCICTL1C 0x7771 1 SCI-C Control Register 1\nSCIHBAUDC 0x7772 1 SCI-C Baud Register, High Bits\nSCILBAUDC 0x7773 1 SCI-C Baud Register, Low Bits\nSCICTL2C 0x7774 1 SCI-C Control Register 2\nSCIRXSTC 0x7775 1 SCI-C Receive Status Register\nSCIRXEMUC 0x7776 1 SCI-C Receive Emulation Data Buffer Register\nSCIRXBUFC 0x7777 1 SCI-C Receive Data Buffer Register\nSCITXBUFC 0x7779 1 SCI-C Transmit Data Buffer Register\nSCIFFTXC(2)0x777A 1 SCI-C FIFO Transmit Register\nSCIFFRXC(2)0x777B 1 SCI-C FIFO Receive Register\nSCIFFCTC(2)0x777C 1 SCI-C FIFO Control Register\nSCIPRC 0x777F 1 SCI-C Priority Control Register\nFigure 8-13  shows the SCI module block diagram.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 115\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nLSPCLKFrame Format and Mode\nEven/Odd EnableParity\n8SCIRXD\nSCIRXST.1TXENA\nRXWAKESCITXD\nSCICCR.6 SCICCR.5\nRXSHF RegisterSCITXD TXSHF\nRegister\nWUTSCICTL1.3TXWAKE\n1\nBaud Rate\nMSbyte\nRegister\nBaud Rate\nLSbyte\nRegisterSCIHBAUD. 15 - 8\nSCILBAUD. 7 - 0TX\nFIFO\nInterrupts\nRXENA\nSCICTL1.0\nRX\nFIFO\nInterruptsSCICTL1.1\nSCIRXD\nRX ERR INT ENA\nSCICTL1.6RX ErrorPE FE OE RX ErrorSCIRXST.7 SCIRXST.4 - 28\nSCITXBUF.7-0\nTX FIFO RegistersTransmitter-Data\nBuffer Register\n8\nSCIFFENATX FIFO _15- - - - -TX FIFO _1TX FIFO _0\nSCIFFTX.14\nSCIRXBUF.7-0\nRX FIFO RegistersReceive-Data\nBuffer Register\nSCIRXBUF.7-0\n8\nSCIFFRX.15RXFFOVFRX FIFO _0- - - - -\nRX FIFO _1RX FIFO _15SCI TX Interrupt Select LogicTX EMPTY\nSCICTL2.6\nTXINTTXRDY\nSCICTL2.0TX INT ENA\nSCICTL2.7\nTo CPU\nAutoBaud Detect LogicTX Interrupt Logic\nRX Interrupt Logic\nSCI RX Interrupt Select LogicRXRDY\nSCIRXST.6\nBRKDT\nSCIRXST.5RX/BK INT ENASCICTL2.1\nRXINT\nTo CPUFigure 8-13. Serial Communications Interface (SCI) Module Block DiagramTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n116 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2.11 Serial Peripheral Interface (SPI) Module (SPI-A, SPI-D)\nThe device includes the four-pin serial peripheral interface (SPI) module. Two SPI modules (SPI-A and SPI-D)\nare available. The SPI is a high-speed, synchronous serial I/O port that allows a serial bit stream of programmed\nlength (1 to 16 bits) to be shifted into and out of the device at a programmable bit-transfer rate. Normally, the SPI\nis used for communications between the MCU  controller and external peripherals or another processor. Typical\napplications include external I/O or peripheral expansion through devices such as shift registers, display drivers,\nand ADCs. Multidevice communications are supported by the master/slave operation of the SPI.\nThe SPI module features include:\n• Four external pins:\n– SPISOMI: SPI slave-output/master-input pin\n– SPISIMO: SPI slave-input/master-output pin\n–SPISTE: SPI slave transmit-enable pin\n– SPICLK: SPI serial-clock pin\nNote\nAll four pins can be used as GPIO if the SPI module is not used.\n• Two operational modes: master and slave\nBaud rate: 125 different programmable rates.\n1) (SPIBRRLSPCLKrate Baud/c43/c61 127to 3 SPIBRR when /c61\n4LSPCLKrate Baud /c61 2 1,0, SPIBRR when /c61\nNote\nSee Section 7  for maximum I/O pin toggling speed.\n• Data word length: 1 to 16 data bits\n• Four clocking schemes (controlled by clock polarity and clock phase bits) include:\n– Falling edge without phase delay: SPICLK active-high. SPI transmits data on the falling edge of the\nSPICLK signal and receives data on the rising edge of the SPICLK signal.\n– Falling edge with phase delay: SPICLK active-high. SPI transmits data one half-cycle ahead of the falling\nedge of the SPICLK signal and receives data on the falling edge of the SPICLK signal.\n– Rising edge without phase delay: SPICLK inactive-low. SPI transmits data on the rising edge of the\nSPICLK signal and receives data on the falling edge of the SPICLK signal.\n– Rising edge with phase delay: SPICLK inactive-low. SPI transmits data one half-cycle ahead of the rising\nedge of the SPICLK signal and receives data on the rising edge of the SPICLK signal.\n• Simultaneous receive and transmit operation (transmit function can be disabled in software)\n• Transmitter and receiver operations are accomplished through either interrupt-driven or polled algorithms.\n• Nine SPI module control registers: Located in control register frame beginning at address 7040h.\nNote\nAll registers in this module are 16-bit registers that are connected to Peripheral Frame 2. When a\nregister is accessed, the register data is in the lower byte (7–0), and the upper byte (15–8) is read\nas zeros. Writing to the upper byte has no effect.\nEnhanced features:\n• 16-level transmit/receive FIFO\n• Delayed transmit controlwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 117\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nThe SPI port operation is configured and controlled by the registers listed in Table 8-14  and Table 8-15  .\nTable 8-14. SPI-A Registers\nNAME ADDRESS SIZE (x16) DESCRIPTION(1)\nSPICCR 0x7040 1 SPI-A Configuration Control Register\nSPICTL 0x7041 1 SPI-A Operation Control Register\nSPISTS 0x7042 1 SPI-A Status Register\nSPIBRR 0x7044 1 SPI-A Baud Rate Register\nSPIRXEMU 0x7046 1 SPI-A Receive Emulation Buffer Register\nSPIRXBUF 0x7047 1 SPI-A Serial Input Buffer Register\nSPITXBUF 0x7048 1 SPI-A Serial Output Buffer Register\nSPIDAT 0x7049 1 SPI-A Serial Data Register\nSPIFFTX 0x704A 1 SPI-A FIFO Transmit Register\nSPIFFRX 0x704B 1 SPI-A FIFO Receive Register\nSPIFFCT 0x704C 1 SPI-A FIFO Control Register\nSPIPRI 0x704F 1 SPI-A Priority Control Register\n(1) Registers in this table are mapped to Peripheral Frame 2. This space only allows 16-bit accesses. 32-bit accesses produce undefined\nresults.\nTable 8-15. SPI-D Registers\nNAME ADDRESS SIZE (x16) DESCRIPTION(1)\nSPICCR 0x7780 1 SPI-D Configuration Control Register\nSPICTL 0x7781 1 SPI-D Operation Control Register\nSPISTS 0x7782 1 SPI-D Status Register\nSPIBRR 0x7784 1 SPI-D Baud Rate Register\nSPIRXEMU 0x7786 1 SPI-D Receive Emulation Buffer Register\nSPIRXBUF 0x7787 1 SPI-D Serial Input Buffer Register\nSPITXBUF 0x7788 1 SPI-D Serial Output Buffer Register\nSPIDAT 0x7789 1 SPI-D Serial Data Register\nSPIFFTX 0x778A 1 SPI-D FIFO Transmit Register\nSPIFFRX 0x778B 1 SPI-D FIFO Receive Register\nSPIFFCT 0x778C 1 SPI-D FIFO Control Register\nSPIPRI 0x778F 1 SPI-D Priority Control Register\n(1) Registers in this table are mapped to Peripheral Frame 2. This space only allows 16-bit accesses. 32-bit accesses produce undefined\nresults.\nFigure 8-14  is a block diagram of the SPI in slave mode.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n118 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nSSPICTL.0SPI□INT□FLAGSPI□INT\nENA\nSPISTS.6\nS\nClock\nPolarityTalk\nLSPCLK\n456 1 23 00123\nSPI□Bit□RateState□ControlSPIRXBUF\nBuffer□Register\nClock\nPhaseReceiver\nOverrun□Flag\nSPICTL.4Overrun\nINT□ENA\nSPICCR.3 − 0\nSPIBRR.6 − 0 SPICCR.6 SPICTL.3SPIDAT.15 − 0\nSPICTL.1M\nS\nM\nMaster/SlaveSPISTS.7\nSPIDAT\nData□Register\nM\nS\nSPICTL.2 SPI□CharSPISIMO\nSPISOMI\nSPICLKSW2\nS\nM\nMSSW3To□CPU\nM\nSW1SPITXBUF\nBuffer□RegisterRX□FIFO□_0\nRX□FIFO□_1\n−−−−−\nRX□FIFO□_15\nTX□FIFO□registers\nTX□FIFO□_0TX□FIFO□_1−−−−−TX□FIFO□_15RX□FIFO□registers\n16\n1616TX□Interrupt\nLogicRX□Interrupt\nLogicSPIINT/SPIRXINT\nSPITXINTSPIFFOVF□FLAG\nSPIFFRX.1516\nTX□FIFO□InterruptRX□FIFO□InterruptSPIRXBUF\nSPITXBUFSPIFFTX.14SPIFFENA\nSPISTE(A)A.SPISTE is driven low by the master for a slave device.\nFigure 8-14. SPI Module Block Diagram (Slave Mode)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 119\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2.12 Inter-Integrated Circuit (I2C)\nThe device contains one I2C Serial Port. Figure 8-15  shows how the I2C peripheral module interfaces within the\ndevice.\nSYSRSSYSCLKOUT\nControl\nI2CINT1A\nI2CINT2AC28x CPU\nGPIO\nMUXPeripheral Bus\nI2C-ASystem Control Block\nI2CAENCLK\nPIE\nBlockSDAA\nSCLAData[16]\nData[16]\nAddr[16]\nA. The I2C registers are accessed at the SYSCLKOUT rate. The internal timing and signal waveforms of the I2C port are also at the\nSYSCLKOUT rate.\nB. The clock enable bit (I2CAENCLK) in the PCLKCR0 register turns off the clock to the I2C port for low power operation. Upon reset,\nI2CAENCLK is clear, which indicates the peripheral internal clocks are off.\nFigure 8-15. I2C Peripheral Module InterfacesTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n120 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nThe I2C module has the following features:\n• Compliance with the Philips Semiconductors I2C-bus specification (version 2.1):\n– Support for 1-bit to 8-bit format transfers\n– 7-bit and 10-bit addressing modes\n– General call\n– START byte mode\n– Support for multiple master-transmitters and slave-receivers\n– Support for multiple slave-transmitters and master-receivers\n– Combined master transmit/receive and receive/transmit mode\n– Data transfer rate from 10 kbps up to 400 kbps (I2C Fast-mode rate)\n• One 16-word receive FIFO and one 16-word transmit FIFO\n• One interrupt that can be used by the CPU. This interrupt can be generated as a result of one of the following\nconditions:\n– Transmit-data ready\n– Receive-data ready\n– Register-access ready\n– No-acknowledgment received\n– Arbitration lost\n– Stop condition detected\n– Addressed as slave\n• An additional interrupt that can be used by the CPU when in FIFO mode\n• Module-enable and module-disable capability\n• Free data format mode\nThe registers in Table 8-16  configure and control the I2C port operation.\nTable 8-16. I2C-A Registers\nNAME ADDRESS DESCRIPTION\nI2COAR 0x7900 I2C own address register\nI2CIER 0x7901 I2C interrupt enable register\nI2CSTR 0x7902 I2C status register\nI2CCLKL 0x7903 I2C clock low-time divider register\nI2CCLKH 0x7904 I2C clock high-time divider register\nI2CCNT 0x7905 I2C data count register\nI2CDRR 0x7906 I2C data receive register\nI2CSAR 0x7907 I2C slave address register\nI2CDXR 0x7908 I2C data transmit register\nI2CMDR 0x7909 I2C mode register\nI2CISRC 0x790A I2C interrupt source register\nI2CPSC 0x790C I2C prescaler register\nI2CFFTX 0x7920 I2C FIFO transmit register\nI2CFFRX 0x7921 I2C FIFO receive register\nI2CRSR – I2C receive shift register (not accessible to the CPU)\nI2CXSR – I2C transmit shift register (not accessible to the CPU)\n8.2.13 GPIO MUX\nOn the 2834x  devices, the GPIO MUX can multiplex up to three independent peripheral signals on a single\nGPIO pin in addition to providing individual pin bit-banging I/O capability. The GPIO MUX block diagram per pin\nis shown in Figure 8-16 . Because of the open-drain capabilities of the I2C pins, the GPIO MUX block diagram for\nthese pins differ. See the TMS320x2834x Delfino System Control and Interrupts Reference Guide  for details.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 121\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nNote\nThere is a 2-SYSCLKOUT cycle delay from when the write to the GPxMUXn and GPxQSELn registers\noccurs to when the action is valid.\nGPxDAT (read)\nInput\nQualification\nGPxMUX1/2High-Impedance\nOutput ControlGPIOx pin\nXRS0 = Input, 1 = OutputLow-Power\nModes Block\n01\n10\n11\n01\n10\n11\n01\n10\n11GPxPUD\nInternal\nPullup\n= Default at ResetExternal Interrupt\nMUX\nPeripheral 3 Input\nPeripheral 3 Output EnablePeripheral 2 Output EnablePeripheral 1 Output EnablePeripheral 3 OutputPeripheral 2 OutputPeripheral 1 OutputPeripheral 2 InputPeripheral 1 InputN/C\nGPxDIR (latch)GPxDAT (latch)Asynchronous\npath\nAsynchronous pathLPMCR0GPIOLMPSEL\nGPxCTRLGPxQSEL1/2GPIOXNMISELGPIOXINT7SELGPIOXINT3SELGPIOXINT2SELGPIOXINT1SEL\nGPxSETGPxCLEARGPxTOGGLE\n000000PIE\nA. x stands for the port, either A or B. For example, GPxDIR refers to either the GPADIR and GPBDIR register depending on the particular\nGPIO pin selected.\nB. GPxDAT latch/read are accessed at the same memory location.\nC. This is a generic GPIO MUX block diagram. Not all options may be applicable for all GPIO pins. See the TMS320x2834x Delfino System\nControl and Interrupts Reference Guide  for pin-specific variations.\nFigure 8-16. GPIO MUX Block DiagramTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n122 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nThe device supports 88 GPIO pins. The GPIO control and data registers are mapped to Peripheral Frame 1 to\nenable 32-bit operations on the registers (along with 16-bit operations). Table 8-17  shows the GPIO register\nmapping.\nTable 8-17. GPIO Registers\nNAME ADDRESS SIZE (x16) DESCRIPTION\nGPIO CONTROL REGISTERS (EALLOW PROTECTED)\nGPACTRL 0x6F80 2 GPIO A Control Register (GPIO0 to 31)\nGPAQSEL1 0x6F82 2 GPIO A Qualifier Select 1 Register (GPIO0 to 15)\nGPAQSEL2 0x6F84 2 GPIO A Qualifier Select 2 Register (GPIO16 to 31)\nGPAMUX1 0x6F86 2 GPIO A MUX 1 Register (GPIO0 to 15)\nGPAMUX2 0x6F88 2 GPIO A MUX 2 Register (GPIO16 to 31)\nGPADIR 0x6F8A 2 GPIO A Direction Register (GPIO0 to 31)\nGPAPUD 0x6F8C 2 GPIO A Pullup Disable Register (GPIO0 to 31)\nReserved 0x6F8E – 0x6F8F 2\nGPBCTRL 0x6F90 2 GPIO B Control Register (GPIO32 to 63)\nGPBQSEL1 0x6F92 2 GPIO B Qualifier Select 1 Register (GPIO32 to 47)\nGPBQSEL2 0x6F94 2 GPIOB Qualifier Select 2 Register (GPIO48 to 63)\nGPBMUX1 0x6F96 2 GPIO B MUX 1 Register (GPIO32 to 47)\nGPBMUX2 0x6F98 2 GPIO B MUX 2 Register (GPIO48 to 63)\nGPBDIR 0x6F9A 2 GPIO B Direction Register (GPIO32 to 63)\nGPBPUD 0x6F9C 2 GPIO B Pullup Disable Register (GPIO32 to 63)\nReserved 0x6F9E – 0x6FA5 8\nGPCMUX1 0x6FA6 2 GPIO C MUX1 Register (GPIO64 to 79)\nGPCMUX2 0x6FA8 2 GPIO C MUX2 Register (GPIO80 to 87)\nGPCDIR 0x6FAA 2 GPIO C Direction Register (GPIO64 to 87)\nGPCPUD 0x6FAC 2 GPIO C Pullup Disable Register (GPIO64 to 87)\nReserved 0x6FAE – 0x6FBF 18\nGPIO DATA REGISTERS (NOT EALLOW PROTECTED)\nGPADAT 0x6FC0 2 GPIO A Data Register (GPIO0 to 31)\nGPASET 0x6FC2 2 GPIO A Data Set Register (GPIO0 to 31)\nGPACLEAR 0x6FC4 2 GPIO A Data Clear Register (GPIO0 to 31)\nGPATOGGLE 0x6FC6 2 GPIO A Data Toggle Register (GPIO0 to 31)\nGPBDAT 0x6FC8 2 GPIO B Data Register (GPIO32 to 63)\nGPBSET 0x6FCA 2 GPIO B Data Set Register (GPIO32 to 63)\nGPBCLEAR 0x6FCC 2 GPIO B Data Clear Register (GPIO32 to 63)\nGPBTOGGLE 0x6FCE 2 GPIOB Data Toggle Register (GPIO32 to 63)\nGPCDAT 0x6FD0 2 GPIO C Data Register (GPIO64 to 87)\nGPCSET 0x6FD2 2 GPIO C Data Set Register (GPIO64 to 87)\nGPCCLEAR 0x6FD4 2 GPIO C Data Clear Register (GPIO64 to 87)\nGPCTOGGLE 0x6FD6 2 GPIO C Data Toggle Register (GPIO64 to 87)\nReserved 0x6FD8 – 0x6FDF 8\nGPIO INTERRUPT AND LOW-POWER MODES SELECT REGISTERS (EALLOW PROTECTED)\nGPIOXINT1SEL 0x6FE0 1 XINT1 GPIO Input Select Register (GPIO0 to 31)\nGPIOXINT2SEL 0x6FE1 1 XINT2 GPIO Input Select Register (GPIO0 to 31)\nGPIOXNMISEL 0x6FE2 1 XNMI GPIO Input Select Register (GPIO0 to 31)\nGPIOXINT3SEL 0x6FE3 1 XINT3 GPIO Input Select Register (GPIO32 to 63)\nGPIOXINT4SEL 0x6FE4 1 XINT4 GPIO Input Select Register (GPIO32 to 63)www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 123\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-17. GPIO Registers (continued)\nNAME ADDRESS SIZE (x16) DESCRIPTION\nGPIOXINT5SEL 0x6FE5 1 XINT5 GPIO Input Select Register (GPIO32 to 63)\nGPIOXINT6SEL 0x6FE6 1 XINT6 GPIO Input Select Register (GPIO32 to 63)\nGPIOINT7SEL 0x6FE7 1 XINT7 GPIO Input Select Register (GPIO32 to 63)\nGPIOLPMSEL 0x6FE8 2 LPM GPIO Select Register (GPIO0 to 31)\nReserved 0x6FEA – 0x6FFF 22\nTable 8-18. GPIO-A Mux Peripheral Selection Matrix\nREGISTER BITS PERIPHERAL SELECTION\nGPADIR\nGPADAT\nGPASET\nGPACLR\nGPATOGGLEGPAMUX1\nGPAQSEL1GPIOx\nGPAMUX1 = 0,0PER1\nGPAMUX1 = 0, 1PER2\nGPAMUX1 = 1, 0PER3\nGPAMUX1 = 1, 1\nQUALPRD00 1, 0 GPIO0 (I/O) EPWM1A (O) Reserved Reserved\n1 3, 2 GPIO1 (I/O) EPWM1B (O) ECAP6 (I/O) MFSRB (I/O)\n2 5, 4 GPIO2 (I/O) EPWM2A (O) Reserved Reserved\n3 7, 6 GPIO3 (I/O) EPWM2B (O) ECAP5 (I/O) MCLKRB (I/O)\n4 9, 8 GPIO4 (I/O) EPWM3A (O) Reserved Reserved\n5 11, 10 GPIO5 (I/O) EPWM3B (O) MFSRA (I/O) ECAP1 (I/O)\n6 13, 12 GPIO6 (I/O) EPWM4A (O) EPWMSYNCI (I) EPWMSYNCO (O)\n7 15, 14 GPIO7 (I/O) EPWM4B (O) MCLKRA (I/O) ECAP2 (I/O)\nQUALPRD18 17, 16 GPIO8 (I/O) EPWM5A (O) CANTXB (O) ADCSOCAO (O)\n9 19, 18 GPIO9 (I/O) EPWM5B (O) SCITXDB (O) ECAP3 (I/O)\n10 21, 20 GPIO10 (I/O) EPWM6A (O) CANRXB (I) ADCSOCBO (O)\n11 23, 22 GPIO11 (I/O) EPWM6B (O) SCIRXDB (I) ECAP4 (I/O)\n12 25, 24 GPIO12 (I/O) TZ1 (I) CANTXB (O) MDXB (O)\n13 27, 26 GPIO13 (I/O) TZ2 (I) CANRXB (I) MDRB (I)\n14 29, 28 GPIO14 (I/O) TZ3 (I)/ XHOLD (I) SCITXDB (O) MCLKXB (I/O)\n15 31, 30 GPIO15 (I/O) TZ4 (I)/ XHOLDA (O) SCIRXDB (I) MFSXB (I/O)\nGPAMUX2\nGPAQSEL2GPAMUX2 = 0, 0 GPAMUX2 = 0, 1 GPAMUX2 = 1, 0 GPAMUX2 = 1, 1\nQUALPRD216 1, 0 GPIO16 (I/O) SPISIMOA (I/O) CANTXB (O) TZ5 (I)\n17 3, 2 GPIO17 (I/O) SPISOMIA (I/O) CANRXB (I) TZ6 (I)\n18 5, 4 GPIO18 (I/O) SPICLKA (I/O) SCITXDB (O) CANRXA (I)\n19 7, 6 GPIO19 (I/O) SPISTEA (I/O) SCIRXDB (I) CANTXA (O)\n20 9, 8 GPIO20 (I/O) EQEP1A (I) MDXA (O) CANTXB (O)\n21 11, 10 GPIO21 (I/O) EQEP1B (I) MDRA (I) CANRXB (I)\n22 13, 12 GPIO22 (I/O) EQEP1S (I/O) MCLKXA (I/O) SCITXDB (O)\n23 15, 14 GPIO23 (I/O) EQEP1I (I/O) MFSXA (I/O) SCIRXDB (I)\nQUALPRD324 17, 16 GPIO24 (I/O) ECAP1 (I/O) EQEP2A (I) MDXB (O)\n25 19, 18 GPIO25 (I/O) ECAP2 (I/O) EQEP2B (I) MDRB (I)\n26 21, 20 GPIO26 (I/O) ECAP3 (I/O) EQEP2I (I/O) MCLKXB (I/O)\n27 23, 22 GPIO27 (I/O) ECAP4 (I/O) EQEP2S (I/O) MFSXB (I/O)\n28 25, 24 GPIO28 (I/O) SCIRXDA (I) XZCS6 (O)\n29 27, 26 GPIO29 (I/O) SCITXDA (O) XA19 (O)\n30 29, 28 GPIO30 (I/O) CANRXA (I) XA18 (O)\n31 31, 30 GPIO31 (I/O) CANTXA (O) XA17 (O)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n124 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-19. GPIO-B Mux Peripheral Selection Matrix\nREGISTER BITS PERIPHERAL SELECTION\nGPBDIR\nGPBDAT\nGPBSET\nGPBCLR\nGPBTOGGLEGPBMUX1\nGPBQSEL1GPIOx\nGPBMUX1 = 0, 0PER1\nGPBMUX1 = 0, 1PER2\nGPBMUX1 = 1, 0PER3\nGPBMUX1 = 1, 1\nQUALPRD00 1, 0 GPIO32 (I/O) SDAA (I/OC)(1)EPWMSYNCI (I) ADCSOCAO (O)\n1 3, 2 GPIO33 (I/O) SCLA (I/OC)(1)EPWMSYNCO (O) ADCSOCBO (O)\n2 5, 4 GPIO34 (I/O) ECAP1 (I/O) XREADY (I)\n3 7, 6 GPIO35 (I/O) SCITXDA (O) XR/ W (O)\n4 9, 8 GPIO36 (I/O) SCIRXDA (I) XZCS0 (O)\n5 11, 10 GPIO37 (I/O) ECAP2 (I/O) XZCS7 (O)\n6 13, 12 GPIO38 (I/O)\nReservedXWE0 (O)\n7 15, 14 GPIO39 (I/O) XA16 (O)\nQUALPRD18 17, 16 GPIO40 (I/O) XA0 (O)\n9 19, 18 GPIO41 (I/O) XA1 (O)\n10 21, 20 GPIO42 (I/O) XA2 (O)\n11 23, 22 GPIO43 (I/O) XA3 (O)\n12 25, 24 GPIO44 (I/O) XA4 (O)\n13 27, 26 GPIO45 (I/O) XA5 (O)\n14 29, 28 GPIO46 (I/O) XA6 (O)\n15 31, 30 GPIO47 (I/O) XA7 (O)\nGPBMUX2\nGPBQSEL2GPBMUX2 = 0, 0 GPBMUX2 = 0, 1 GPBMUX2 = 1, 0 GPBMUX2 = 1, 1\nQUALPRD216 1, 0 GPIO48 (I/O) ECAP5 (I/O) XD31 (I/O) SPISIMOD (I/O)\n17 3, 2 GPIO49 (I/O) ECAP6 (I/O) XD30 (I/O) SPISOMID (I/O)\n18 5, 4 GPIO50 (I/O) EQEP1A (I) XD29 (I/O) SPICLKD (I/O)\n19 7, 6 GPIO51 (I/O) EQEP1B (I) XD28 (I/O) SPISTED (I/O)\n20 9, 8 GPIO52 (I/O) EQEP1S (I/O) XD27 (I/O) Reserved\n21 11, 10 GPIO53 (I/O) EQEP1I (I/O) XD26 (I/O) Reserved\n22 13, 12 GPIO54 (I/O) SPISIMOA (I/O) XD25 (I/O) EQEP3A (I)\n23 15, 14 GPIO55 (I/O) SPISOMIA (I/O) XD24 (I/O) EQEP3B (I)\nQUALPRD324 17, 16 GPIO56 (I/O) SPICLKA (I/O) XD23 (I/O) EQEP3S (I/O)\n25 19, 18 GPIO57 (I/O) SPISTEA (I/O) XD22 (I/O) EQEP3I (I/O)\n26 21, 20 GPIO58 (I/O) MCLKRA (I/O) XD21 (I/O) EPWM7A (O)\n27 23, 22 GPIO59 (I/O) MFSRA (I/O) XD20 (I/O) EPWM7B (O)\n28 25, 24 GPIO60 (I/O) MCLKRB (I/O) XD19 (I/O) EPWM8A (O)\n29 27, 26 GPIO61 (I/O) MFSRB (I/O) XD18 (I/O) EPWM8B (O)\n30 29, 28 GPIO62 (I/O) SCIRXDC (I) XD17 (I/O) EPWM9A (O)\n31 31, 30 GPIO63 (I/O) SCITXDC (O) XD16 (I/O) EPWM9B (O)\n(1) Open drainwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 125\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-20. GPIO-C Mux Peripheral Selection Matrix\nREGISTER BITS PERIPHERAL SELECTION\nGPCDIR\nGPCDAT\nGPCSET\nGPCCLR\nGPCTOGGLEGPCMUX1GPIOx or PER1\nGPCMUX1 = 0, 0 or 0, 1PER2 or PER3\nGPCMUX1 = 1, 0 or 1, 1\nno qual0 1, 0 GPIO64 (I/O) XD15 (I/O)\n1 3, 2 GPIO65 (I/O) XD14 (I/O)\n2 5, 4 GPIO66 (I/O) XD13 (I/O)\n3 7, 6 GPIO67 (I/O) XD12 (I/O)\n4 9, 8 GPIO68 (I/O) XD11 (I/O)\n5 11, 10 GPIO69 (I/O) XD10 (I/O)\n6 13, 12 GPIO70 (I/O) XD9 (I/O)\n7 15, 14 GPIO71 (I/O) XD8 (I/O)\nno qual8 17, 16 GPIO72 (I/O) XD7 (I/O)\n9 19, 18 GPIO73 (I/O) XD6 (I/O)\n10 21, 20 GPIO74 (I/O) XD5 (I/O)\n11 23, 22 GPIO75 (I/O) XD4 (I/O)\n12 25, 24 GPIO76 (I/O) XD3 (I/O)\n13 27, 26 GPIO77 (I/O) XD2 (I/O)\n14 29, 28 GPIO78 (I/O) XD1 (I/O)\n15 31, 30 GPIO79 (I/O) XD0 (I/O)\nGPCMUX2 GPCMUX2 = 0, 0 or 0, 1 GPCMUX2 = 1, 0 or 1, 1\nno qual16 1, 0 GPIO80 (I/O) XA8 (O)\n17 3, 2 GPIO81 (I/O) XA9 (O)\n18 5, 4 GPIO82 (I/O) XA10 (O)\n19 7, 6 GPIO83 (I/O) XA11 (O)\n20 9, 8 GPIO84 (I/O) XA12 (O)\n21 11, 10 GPIO85 (I/O) XA13 (O)\n22 13, 12 GPIO86 (I/O) XA14 (O)\n23 15, 14 GPIO87 (I/O) XA15 (O)TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n126 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nThe user can select the type of input qualification for each GPIO pin through the GPxQSEL1/2 registers from\nfour choices:\n• Synchronization To SYSCLKOUT Only (GPxQSEL1/2 = 0, 0): This is the default mode of all GPIO pins at\nreset and it simply synchronizes the input signal to the system clock (SYSCLKOUT).\n• Qualification Using Sampling Window (GPxQSEL1/2 = 0, 1 and 1, 0): In this mode the input signal, after\nsynchronization to the system clock (SYSCLKOUT), is qualified by a specified number of cycles before the\ninput is allowed to change.\nGPyCTRL Reg\nSYNC\nSYSCLKOUTQualificationInput Signal\nQualified by\n3 or 6 SamplesGPIOxTime Between Samples\nGPxQSEL\nNumber of Samples\nFigure 8-17. Qualification Using Sampling Window\n• The sampling period is specified by the QUALPRD bits in the GPxCTRL register and is configurable in\ngroups of 8 signals. It specifies a multiple of SYSCLKOUT cycles for sampling the input signal. The sampling\nwindow is either 3-samples or 6-samples wide and the output is only changed when all samples are the same\n(all 0s or all 1s) as shown in Figure 8-17  (for 6-sample mode).\n• No Synchronization (GPxQSEL1/2 = 1,1): This mode is used for peripherals where synchronization is not\nrequired (synchronization is performed within the peripheral).\nDue to the multilevel multiplexing that is required on the device, there may be cases where a peripheral input\nsignal can be mapped to more then one GPIO pin. Also, when an input signal is not selected, the input signal will\ndefault to either a 0 or 1 state, depending on the peripheral.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 127\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.2.14 External Interface (XINTF)\nThis section gives a top-level view of the external interface (XINTF) that is implemented on the C2834x devices.\nThe XINTF is a nonmultiplexed asynchronous bus, similar to the 2812 XINTF. The XINTF is mapped into three\nfixed zones shown in Figure 8-18 .\nXD(31:0)\nXA(19:0)\nXZCS0\nXZCS6\nXZCS7\nXWE0\nXR/W\nXREADY\nXHOLD\nXHOLDA\nXCLKOUTXRDXINTF□Zone□0\n(8K□x□16)\nXINTF□Zone□7\n(1M□x□16)0x0030−00000x0020−00000x0010−00000x0000−50000x0000−40000x0000−0000Data□Space Prog□Space\nXINTF□Zone□6\n(1M□x□16)\nXWE1\nFigure 8-18. External Interface Block DiagramTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n128 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nFigure 8-19  and Figure 8-20  show typical 16-bit and 32-bit data bus XINTF connections, illustrating how the\nfunctionality of the XA0 and XWE1  signals change, depending on the configuration. Table 8-21  defines XINTF\nconfiguration and control registers.\nCS\nA(19:0)\nOE\nWE\nD(15:0)16-bitsExternal\nwait-state\ngeneratorXREADY\nXCLKOUT\nXA(19:0)XZCS0  XZCS6  XZCS7 , ,\nXWE1\nXRD\nXWE0\nXD(15:0)XINTF\nX\nFigure 8-19. Typical 16-Bit Data Bus XINTF Connections\nCS\nA(18:0)\nOE\nWE\nD(15:0)Low 16-bitsExternal\nwait-state\ngeneratorXREADY\nXCLKOUT\nXA(19:1)\nXRD\nXWE0\nXD(15:0)XINTF\nCSA(18:0)\nOE\nWE\nD(31:16)XWE1\nXD(31:16)XZCS0, XZCS6  XZCS7 ,High 16-bitsXA(0) X\nFigure 8-20. Typical 32-Bit Data Bus XINTF Connections\nTable 8-21. XINTF Configuration and Control Register Mapping\nNAME ADDRESS SIZE (x16) DESCRIPTION\nXTIMING0 0x00−0B20 2 XINTF Timing Register, Zone 0\nXTIMING6(1)0x00−0B2C 2 XINTF Timing Register, Zone 6\nXTIMING7 0x00−0B2E 2 XINTF Timing Register, Zone 7\nXINTCNF2(2)0x00−0B34 2 XINTF Configuration Register\nXBANK 0x00−0B38 1 XINTF Bank Control Register\nXREVISION 0x00−0B3A 1 XINTF Revision Register\nXRESET 0x00−0B3D 1 XINTF Reset Register\n(1) XTIMING1 - XTIMING5 are reserved for future expansion and are not currently used.\n(2) XINTCNF1 is reserved and not currently used.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 129\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.3 Memory Maps\nIn Figure 8-21  to Figure 8-23 , the following apply:\n• Memory blocks are not to scale.\n• Peripheral Frame 0, Peripheral Frame 1, Peripheral Frame 2, and Peripheral Frame 3 memory maps are\nrestricted to data memory only. A user program cannot access these memory maps in program space.\n•Protected  means the order of "Write followed by Read" operations is preserved rather than the pipeline order.\nSee the TMS320x2834x Delfino System Control and Interrupts Reference Guide  for more details.\n• Certain memory ranges are EALLOW protected against spurious writes after configuration.\n• If the eCAN module is not used in an application, the RAM available (LAM, MOTS, MOTO, and mailbox\nRAM) can be used as general-purpose RAM. The CAN module clock should be enabled for this.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n130 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nBlock\nStart Address\n0x00□0000\nM0□Vector□-□RAM□(32□x□32)\n(Enable□if□VMAP =□0)Data□Space Prog□Space\nM0□SARAM□(1K□x□16)\nM1□SARAM□(1K□x□16)\nPeripheral□Frame□00x00□0040\n0x00□0400\n0x00□0800\nPIE□Vector□-□RAM\n(256□x□16)\n(Enabled□if\nVMAP =□1,\nENPIE□=1)Reserved\nReserved\nL0□SARAM□(8K□x□16,□DMA Accessible)Peripheral□Frame□1\n(Protected)Reserved\nPeripheral□Frame□2\n(Protected)\nL1□SARAM□(8K□x□16, DMA Accessible)\nH0□SARAM\n(32K□x□16□Prefetch)\nReserved\nBoot□ROM□(8K□x□16)\nBROM□Vector□-□ROM□(32□x□32)\n(Enable□if□VMAP =□1,□ENPIE□=□0)0x00□0D00\n0x00□0E00\n0x00□2000\n0x00□6000\n0x00□7000\n0x00□8000\n0x00 A000\n0x30□□0000\n0x3F□FFC0Data□Space Prog□Space\nReserved\nXINTF□Zone□0□(4K□x□16, ) XZCS0\n(Protected)□DMA Accessible\nReservedOn-Chip□Memory External□Memory□XINTF\nOnly□one□of□these□vector□maps-M0□vector,□PIE□vector,□BROM□vector-should□be□enabled□at□a□time.LEGEND:L2□SARAM□(8K□x□16, DMA Accessible)\nL3□SARAM□(8K□x□16, DMA Accessible)\nL4□SARAM□(8K□x□16,□DMA Accessible)\nL5□SARAM□(8K□x□16,□DMA Accessible)0x00□C000\n0x00□E000\n0x01□0000\n0x01□2000\n0x01□4000\nReserved0x00□4000\n0x00□5000\n0x00□5000\nPeripheral□Frame□3\n(Protected)□DMA Accessible\n0x30□□8000\n0x31□□0000\n0x32□8000\n0x33□FFF8\n0x33□FFFF\n0x3F□E000Peripheral□Frame□0\nXINTF□Zone□6□(1M□x□16, )□(DMA Accessible) XZCS60x10□0000\n0x20□0000\n0x30□0000XINTF□Zone□7□(1M□x□16, ) XZCS7 (DMA Accessible)\n0x31□□8000\n0x33□□00000x32□□0000H1□SARAM\n(32K□x□16□Prefetch)\nH2□SARAM\n(32K□x□16□Prefetch)\nH3□SARAM\n(32K□x□16□Prefetch)\nH4□SARAM\n(32K□x□16□Prefetch)\nH5□SARAM\n(32K□x□16□Prefetch)\n128-Bit□Password(A)\nReservedL6□SARAM□(8K□x□16,□DMA Accessible)\nL7□SARAM□(8K□x□16,□DMA Accessible)0x01□6000\n0x01□8000ReservedA. These locations support compatibility with legacy C28x designs only. See Section 8.1.9 .\nFigure 8-21. C28346, C28345 Memory Mapwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 131\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nBlock\nStart Address\n0x00□0000M0□Vector□-□RAM□(32□x□32)\n(Enable□if□VMAP =□0)Data□Space Prog□Space\nM0□SARAM□(1K□x□16)\nM1□SARAM□(1K□x□16)\nPeripheral□Frame□00x00□0040\n0x00□0400\n0x00□0800\nPIE□Vector□-□RAM\n(256□x□16)\n(Enabled□if\nVMAP =□1,\nENPIE□=1)Reserved\nReserved\nL0□SARAM□(8K□x□16, ) DMA AccessiblePeripheral□Frame□1\n(Protected)Reserved\nPeripheral□Frame□2\n(Protected)\nL1□SARAM□(8K□x□16, ) DMA Accessible\nReserved\nBoot□ROM□(8K□x□16)\nBROM□Vector□-□ROM□(32□x□32)\n(Enable□if□VMAP =□1,□ENPIE□=□0)0x00□0D00\n0x00□0E00\n0x00□2000\n0x00□6000\n0x00□7000\n0x00□8000\n0x00 A000\n0x3F□FFC0Data□Space Prog□Space\nReserved\nXINTF□Zone□0□(4K□x□16, )\n(Protected)□DMA AccessibleXZCS0\nReservedOn-Chip□Memory External□Memory□XINTF\nOnly□one□of□these□vector□maps-M0□vector,□PIE□vector,□BROM□vector-should□be□enabled□at□a□time.LEGEND:L2□SARAM□(8K□x□16, ) DMA Accessible\nL3□SARAM□(8K□x□16, ) DMA Accessible\nL4□SARAM□(8K□x□16,□DMA Accessible)\nL5□SARAM□(8K□x□16,□DMA Accessible)0x00□C000\n0x00□E000\n0x01□0000\n0x01□2000\n0x01□4000Reserved0x00□4000\n0x00□5000\n0x00□5000\nPeripheral□Frame□3\n(Protected)□DMA Accessible\n0x33□FFF8\n0x33□FFFF\n0x3F□E000Peripheral□Frame□0\nXINTF□Zone□6□(1M□x□16, )□(DMA Accessible) XZCS60x10□0000\n0x20□0000\n0x30□0000XINTF□Zone□7□(1M□x□16, ) XZCS7 (DMA Accessible)\nH0□SARAM\n(32K□x□16□Prefetch)0x30□□0000\n0x30□□8000\n0x31□□0000H1□SARAM\n(32K□x□16□Prefetch)\n128-Bit□Password(A)\nReservedL6□SARAM□(8K□x□16,□DMA Accessible)\nL7□SARAM□(8K□x□16,□DMA Accessible)0x01□6000\n0x01□8000\nReservedA. These locations support compatibility with legacy C28x designs only. See Section 8.1.9 .\nFigure 8-22. C28344, C28343 Memory MapTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n132 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nBlock\nStart Address\n0x00□0000M0□Vector□-□RAM□(32□x□32)\n(Enable□if□VMAP =□0)Data□Space Prog□Space\nM0□SARAM□(1K□x□16)\nM1□SARAM□(1K□x□16)\nPeripheral□Frame□00x00□0040\n0x00□0400\n0x00□0800\nPIE□Vector□-□RAM\n(256□x□16)\n(Enabled□if\nVMAP =□1,\nENPIE□=1)Reserved\nReserved\nL0□SARAM□(8K□x□16, ) DMA AccessiblePeripheral□Frame□1\n(Protected)Reserved\nPeripheral□Frame□2\n(Protected)\nL1□SARAM□(8K□x□16, ) DMA Accessible\nReserved\nBoot□ROM□(8K□x□16)\nBROM□Vector□-□ROM□(32□x□32)\n(Enable□if□VMAP =□1,□ENPIE□=□0)0x00□0D00\n0x00□0E00\n0x00□2000\n0x00□6000\n0x00□7000\n0x00□8000\n0x00 A000\n0x3F□FFC0Data□Space Prog□Space\nReserved\nXINTF□Zone□0□(4K□x□16, )\n(Protected)XZCS0\nDMA Accessible\nReservedOn-Chip□Memory External□Memory□XINTF\nOnly□one□of□these□vector□maps-M0□vector,□PIE□vector,□BROM□vector-should□be□enabled□at□a□time.LEGEND:L2□SARAM□(8K□x□16, ) DMA Accessible\nL3□SARAM□(8K□x□16, ) DMA Accessible0x00□C000\n0x00□E000\n0x01□0000Reserved0x00□4000\n0x00□5000\n0x00□5000\nPeripheral□Frame□3\n(Protected)□DMA Accessible\n0x33□FFF8\n0x33□FFFF\n0x3F□E000Peripheral□Frame□0\nXINTF□Zone□6□(1M□x□16, )□(DMA Accessible) XZCS60x10□0000\n0x20□0000\n0x30□0000XINTF□Zone□7□(1M□x□16, ) XZCS7 (DMA Accessible)\nH0□SARAM\n(32K□x□16□Prefetch)0x30□□0000\n0x30□□8000\n0x31□□0000H1□SARAM\n(32K□x□16□Prefetch)\n128-Bit□Password(A)\nReservedReservedA. These locations support compatibility with legacy C28x designs only. See Section 8.1.9 .\nFigure 8-23. C28342, C28341 Memory Mapwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 133\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nPeripheral Frame 1, Peripheral Frame 2, and Peripheral Frame 3 are grouped together to enable these blocks to\nbe write/read peripheral block protected. The protected mode ensures that all accesses to these blocks happen\nas written. Because of the C28x pipeline, a write immediately followed by a read, to different memory locations,\nwill appear in reverse order on the memory bus of the CPU. This can cause problems in certain peripheral\napplications where the user expected the write to occur first (as written). The C28x CPU supports a block\nprotection mode where a region of memory can be protected so as to make sure that operations occur as written\n(the penalty is extra cycles are added to align the operations). This mode is programmable and by default, it will\nprotect the selected zones.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n134 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nThe wait states for the various spaces in the memory map area are listed in Table 8-22 .\nTable 8-22. Wait States\nAREAWAIT STATES\n(CPU)WAIT STATES\n(DMA)(1) COMMENTS\nM0 and M1 SARAMs 0-wait No access Fixed\nPeripheral Frame 0 0-wait (writes) No access (writes)\n1-wait (reads) 0-wait (reads)\nPeripheral Frame 3 0-wait (writes) 0-wait (writes) Assumes no conflicts between CPU and DMA.\n2-wait (reads) 1-wait (reads)\nPeripheral Frame 1 0-wait (writes)\nNo accessCycles can be extended by peripheral generated ready.\n2-wait (reads)Consecutive writes to the CAN will experience a 1-cycle\npipeline hit.\nPeripheral Frame 2 0-wait (writes)\nNo accessFixed. Cycles cannot be extended by the peripheral.\n2-wait (reads)\nL0 SARAM 0-wait data and\nprogramAssumes no CPU conflicts\nL1 SARAM\nL2 SARAM\nL3 SARAM\nL4 SARAM 1-wait Assumes no conflicts between CPU and DMA\nL5 SARAM\nL6 SARAM 1-wait\nL7 SARAM\nXINTFProgrammable Programmed through the XTIMING registers or extendable\nthrough external XREADY signal.\n1-wait minimum 1-wait is minimum wait states allowed on external waveforms\nfor both reads and writes on XINTF.\n0-wait minimum writes\nwith write buffer\nenabled0-wait data (write)\n0-wait data (read)0-wait minimum for writes assumes write buffer enabled and\nnot full.\nAssumes no conflicts between CPU and DMA. When DMA\nand CPU try simultaneous conflict, 1-cycle delay is added for\narbitration.\nH0 SARAM 1-wait\nNo accessA program-access prefetch mechanism is enabled on these\nmemories to improve instruction fetch performance for linear\ncode execution.H1 SARAM\nH2 SARAM\nH3 SARAM\nH4 SARAM\nH5 SARAM\nBoot-ROM 1-wait No access\n(1) The DMA has a base of four cycles/word.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 135\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.4 Register Map\nThe devices contain four peripheral register spaces. The spaces are categorized as follows:\nPeripheral Frame 0: These are peripherals that are mapped directly to the CPU memory bus. See Table 8-23 .\nPeripheral Frame 1 These are peripherals that are mapped to the 32-bit peripheral bus.\nSee Table 8-24 .\nPeripheral Frame 2: These are peripherals that are mapped to the 16-bit peripheral bus.\nSee Table 8-25 .\nPeripheral Frame 3: These are peripherals that are mapped to the 32-bit DMA-accessible peripheral bus. See Table 8-26 .\nTable 8-23. Peripheral Frame 0 Registers (1)\nNAME ADDRESS RANGE SIZE (x16) ACCESS TYPE(2)\nDevice Emulation Registers 0x00 0880 – 0x00 09FF 384 EALLOW protected\nCode Security Module Registers 0x00 0AE0 – 0x00 0AEF 16 EALLOW protected\nXINTF Registers 0x00 0B20 – 0x00 0B3F 32 Not EALLOW protected\nCPU-Timer 0, CPU-Timer 1, CPU-Timer 2\nRegisters0x00 0C00 – 0x00 0C3F 64 Not EALLOW protected\nPIE Registers 0x00 0CE0 – 0x00 0CFF 32 Not EALLOW protected\nPIE Vector Table 0x00 0D00 – 0x00 0DFF 256 EALLOW protected\nDMA Registers 0x00 1000 – 0x00 11FF 512 EALLOW protected\n(1) Registers in Frame 0 support 16-bit and 32-bit accesses.\n(2) If registers are EALLOW protected, then writes cannot be performed until the EALLOW instruction is executed. The EDIS instruction\ndisables writes to prevent stray code or pointers from corrupting register contents.\nTable 8-24. Peripheral Frame 1 Registers\nNAME ADDRESS RANGE SIZE (x16)\neCAN-A Registers 0x00 6000 – 0x00 61FF 512\neCAN-B Registers 0x00 6200 – 0x00 63FF 512\nePWM1 + HRPWM1 Registers 0x00 6800 – 0x00 683F 64\nePWM2 + HRPWM2 Registers 0x00 6840 – 0x00 687F 64\nePWM3 + HRPWM3 Registers 0x00 6880 – 0x00 68BF 64\nePWM4 + HRPWM4 Registers 0x00 68C0 – 0x00 68FF 64\nePWM5 + HRPWM5 Registers 0x00 6900 – 0x00 693F 64\nePWM6 + HRPWM6 Registers 0x00 6940 – 0x00 697F 64\nePWM7 + HRPWM7 Registers 0x00 6980 – 0x00 69BF 64\nePWM8 + HRPWM8 Registers 0x00 69C0 – 0x00 69FF 64\nePWM9 + HRPWM9 Registers 0x00 6600 – 0x00 663F 64\neCAP1 Registers 0x00 6A00 – 0x00 6A1F 32\neCAP2 Registers 0x00 6A20 – 0x00 6A3F 32\neCAP3 Registers 0x00 6A40 – 0x00 6A5F 32\neCAP4 Registers 0x00 6A60 – 0x00 6A7F 32\neCAP5 Registers 0x00 6A80 – 0x00 6A9F 32\neCAP6 Registers 0x00 6AA0 – 0x00 6ABF 32\neQEP1 Registers 0x00 6B00 – 0x00 6B3F 64\neQEP2 Registers 0x00 6B40 – 0x00 6B7F 64\neQEP3 Registers 0x00 6B80 – 0x00 6BBF 64\nGPIO Registers 0x00 6F80 – 0x00 6FFF 128TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n136 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-25. Peripheral Frame 2 Registers\nNAME ADDRESS RANGE SIZE (x16)\nSystem Control Registers 0x00 7010 – 0x00 702F 32\nSPI-A Registers 0x00 7040 – 0x00 704F 16\nSCI-A Registers 0x00 7050 – 0x00 705F 16\nExternal Interrupt Registers 0x00 7070 – 0x00 707F 16\nSCI-B Registers 0x00 7750 – 0x00 775F 16\nSCI-C Registers 0x00 7770 – 0x00 777F 16\nSPI-D Registers 0x00 7780 – 0x00 778F 16\nI2C-A Registers 0x00 7900 – 0x00 793F 64\nTable 8-26. Peripheral Frame 3 Registers\nNAME ADDRESS RANGE SIZE (x16)\nMcBSP-A Registers 0x00 5000 – 0x00 503F 64\nMcBSP-B Registers 0x00 5040 – 0x00 507F 64www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 137\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.4.1 Device Emulation Registers\nThese registers are used to control the protection mode of the C28x CPU and to monitor some critical device\nsignals. The registers are defined in Table 8-27 .\nTable 8-27. Device Emulation Registers\nNAMEADDRESS\nRANGESIZE (x16) DESCRIPTION\nDEVICECNF0x0880\n0x08812 Device Configuration Register\nPARTID 0x0882 1 Part ID Register TMS320C28346 0xFFD0\nTMS320C28345 0xFFD1\nTMS320C28344 0xFFD2\nTMS320C28343 0xFFD3\nTMS320C28342 0xFFD4\nTMS320C28341 0xFFD5\nREVID 0x0883 1 Revision ID\nRegister0x0000 - Silicon Rev. 0 - TMS\nPROTSTART 0x0884 1 Block Protection Start Address Register\nPROTRANGE 0x0885 1 Block Protection Range Address RegisterTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n138 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.5 Interrupts\nFigure 8-24  shows how the various interrupt sources are multiplexed.\nWDINT\nLPMINTWatchdog\nLow□Power□ModelsSync\nSYSCLKOUTWAKEINTDMAClearPeripherals\n(SPI,□SCI,□I2C,□CAN,□McBSP\n)(A),\nEPWM,□ECAP,□EQEP\nDMA\nXINT1\nInterrupt□Control\nXINT1CR(15:0)\nXINT1CTR(15:0)XINT1Latch\nMUX\nGPIOXINT1SEL(4:0)\nDMA\nXINT2\nInterrupt□Control\nXINT2CR(15:0)\nXINT2CTR(15:0)XINT2\nLatch\nMUX\nGPIOXINT2SEL(4:0)\nDMA\nTINT0\nCPU□Timer□0\nDMA\nTINT2\nCPU□Timer□2\nCPU□Timer□1\nMUXTINT1\nInterrupt□Control\nXNMICR(15:0)\nXNMICTR(15:0)MUX1\nDMANMIINT13INT14INT1\nto\nINT12\nC28\nCore 96□InterruptsPIE\nXNMI_\nXINT13\nLatch\nMUX\nGPIOXNMISEL(4:0)GPIO\nMuxGPIO0.int\nGPIO31.int\nA. DMA-accessible\nFigure 8-24. External and PIE Interrupt Sourceswww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 139\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nInterrupt□Control\nXINT3CR(15:0)LatchMux\nGPIOXINT3SEL(4:0)DMA\nXINT3\nInterrupt□Control\nXINT4CR(15:0)LatchMux\nGPIOXINT4SEL(4:0)XINT4\nInterrupt□Control\nXINT5CR(15:0)Mux\nGPIOXINT5SEL(4:0)XINT5\nInterrupt□Control\nXINT6CR(15:0)Mux\nGPIOXINT6SEL(4:0)XINT6\nInterrupt□Control\nXINT7CR(15:0)Mux\nGPIOXINT7SEL(4:0)XINT7DMA\nDMA\nDMA\nDMA96□InterruptsPIEINT1\nto\nINT12\nC28\nCore\nGPIO32.int\nGPIO63.intGPIO\nMuxLatch\nLatch\nLatchFigure 8-25. External Interrupts\nEight PIE block interrupts are grouped into one CPU interrupt. In total, 12 CPU interrupt groups, with 8 interrupts\nper group equals 96 possible interrupts. On the C2834x devices, 64 of these are used by peripherals as shown\nin Table 8-28 .\nThe TRAP #VectorNumber instruction transfers program control to the interrupt service routine corresponding to\nthe vector specified. TRAP #0 tries to transfer program control to the address pointed to by the reset vector. The\nPIE vector table does not, however, include a reset vector. Therefore, TRAP #0 should not be used when the\nPIE is enabled. Doing so will result in undefined behavior.\nWhen the PIE is enabled, TRAP #1 to TRAP #12 will transfer program control to the interrupt service routine\ncorresponding to the first vector within the PIE group. For example: TRAP #1 fetches the vector from INT1.1,\nTRAP #2 fetches the vector from INT2.1, and so forth.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n140 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nINT12MUX\nINT11INT2INT1\nCPU\n(Enable) (Flag)\nINTx\nINTx.8\nPIEIERx(8:1) PIEIFRx(8:1)MUX\nINTx.7INTx.6INTx.5INTx.4INTx.3INTx.2INTx.1\nFrom\nPeripherals\nor\nExternal\nInterrupts\n(Enable) (Flag)IER(12:1) IFR(12:1)\nGlobal\nEnableINTM\n1\n0\nPIEACKx\n(Enable/Flag)Figure 8-26. Multiplexing of Interrupts Using the PIE Block\nTable 8-28. PIE Peripheral Interrupts (1)\nCPU\nINTERRUPTSPIE INTERRUPTS\nINTx.8 INTx.7 INTx.6 INTx.5 INTx.4 INTx.3 INTx.2 INTx.1\nINT1WAKEINT\n(LPM/WD)TINT0\n(TIMER 0)Reserved XINT2 XINT1 Reserved Reserved Reserved\nINT2EPWM8_TZINT\n(ePWM8)EPWM7_TZINT\n(ePWM7)EPWM6_TZINT\n(ePWM6)EPWM5_TZINT\n(ePWM5)EPWM4_TZINT\n(ePWM4)EPWM3_TZINT\n(ePWM3)EPWM2_TZINT\n(ePWM2)EPWM1_TZINT\n(ePWM1)\nINT3EPWM8_INT\n(ePWM8)EPWM7_INT\n(ePWM7)EPWM6_INT\n(ePWM6)EPWM5_INT\n(ePWM5)EPWM4_INT\n(ePWM4)EPWM3_INT\n(ePWM3)EPWM2_INT\n(ePWM2)EPWM1_INT\n(ePWM1)\nINT4 Reserved ReservedECAP6_INT\n(eCAP6)ECAP5_INT\n(eCAP5)ECAP4_INT\n(eCAP4)ECAP3_INT\n(eCAP3)ECAP2_INT\n(eCAP2)ECAP1_INT\n(eCAP1)\nINT5 Reserved Reserved Reserved Reserved ReservedEQEP3_INT\n(eQEP3)EQEP2_INT\n(eQEP2)EQEP1_INT\n(eQEP1)\nINT6SPITXINTD\n(SPI-D)SPIRXINTD\n(SPI-D)MXINTA\n(McBSP-A)MRINTA\n(McBSP-A)MXINTB\n(McBSP-B)MRINTB\n(McBSP-B)SPITXINTA\n(SPI-A)SPIRXINTA\n(SPI-A)\nINT7 Reserved ReservedDINTCH6\n(DMA)DINTCH5\n(DMA)DINTCH4\n(DMA)DINTCH3\n(DMA)DINTCH2\n(DMA)DINTCH1\n(DMA)\nINT8 Reserved ReservedSCITXINTC\n(SCI-C)SCIRXINTC\n(SCI-C)Reserved ReservedI2CINT2A\n(I2C-A)I2CINT1A\n(I2C-A)\nINT9ECAN1_INTB\n(CAN-B)ECAN0_INTB\n(CAN-B)ECAN1_INTA\n(CAN-A)ECAN0_INTA\n(CAN-A)SCITXINTB\n(SCI-B)SCIRXINTB\n(SCI-B)SCITXINTA\n(SCI-A)SCIRXINTA\n(SCI-A)\nINT10 Reserved Reserved Reserved Reserved Reserved Reserved ReservedEPWM9_TZINT\n(ePWM9)\nINT11 Reserved Reserved Reserved Reserved Reserved Reserved ReservedEPWM9_INT\n(ePWM9)\nINT12LUF\n(FPU)LVF\n(FPU)Reserved XINT7 XINT6 XINT5 XINT4 XINT3\n(1) Out of the 96 possible interrupts, 64 interrupts are currently used. The remaining interrupts are reserved for future devices. These\ninterrupts can be used as software interrupts if they are enabled at the PIEIFRx level, provided none of the interrupts within the group\nis being used by a peripheral. Otherwise, interrupts coming in from peripherals may be lost by accidentally clearing their flag while\nmodifying the PIEIFR. To summarize, there is one safe case when the reserved interrupts could be used as software interrupts:\n1) No peripheral within the group is asserting interrupts.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 141\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-29. PIE Configuration and Control Registers\nNAME ADDRESS SIZE (x16) DESCRIPTION(1)\nPIECTRL 0x0CE0 1 PIE, Control Register\nPIEACK 0x0CE1 1 PIE, Acknowledge Register\nPIEIER1 0x0CE2 1 PIE, INT1 Group Enable Register\nPIEIFR1 0x0CE3 1 PIE, INT1 Group Flag Register\nPIEIER2 0x0CE4 1 PIE, INT2 Group Enable Register\nPIEIFR2 0x0CE5 1 PIE, INT2 Group Flag Register\nPIEIER3 0x0CE6 1 PIE, INT3 Group Enable Register\nPIEIFR3 0x0CE7 1 PIE, INT3 Group Flag Register\nPIEIER4 0x0CE8 1 PIE, INT4 Group Enable Register\nPIEIFR4 0x0CE9 1 PIE, INT4 Group Flag Register\nPIEIER5 0x0CEA 1 PIE, INT5 Group Enable Register\nPIEIFR5 0x0CEB 1 PIE, INT5 Group Flag Register\nPIEIER6 0x0CEC 1 PIE, INT6 Group Enable Register\nPIEIFR6 0x0CED 1 PIE, INT6 Group Flag Register\nPIEIER7 0x0CEE 1 PIE, INT7 Group Enable Register\nPIEIFR7 0x0CEF 1 PIE, INT7 Group Flag Register\nPIEIER8 0x0CF0 1 PIE, INT8 Group Enable Register\nPIEIFR8 0x0CF1 1 PIE, INT8 Group Flag Register\nPIEIER9 0x0CF2 1 PIE, INT9 Group Enable Register\nPIEIFR9 0x0CF3 1 PIE, INT9 Group Flag Register\nPIEIER10 0x0CF4 1 PIE, INT10 Group Enable Register\nPIEIFR10 0x0CF5 1 PIE, INT10 Group Flag Register\nPIEIER11 0x0CF6 1 PIE, INT11 Group Enable Register\nPIEIFR11 0x0CF7 1 PIE, INT11 Group Flag Register\nPIEIER12 0x0CF8 1 PIE, INT12 Group Enable Register\nPIEIFR12 0x0CF9 1 PIE, INT12 Group Flag Register\nReserved 0x0CFA – 0x0CFF 6 Reserved\n(1) The PIE configuration and control registers are not protected by EALLOW mode. The PIE vector\ntable is protected.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n142 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.5.1 External Interrupts\nTable 8-30. External Interrupt Registers\nNAME ADDRESS SIZE (x16) DESCRIPTION\nXINT1CR 0x00 7070 1 XINT1 configuration register\nXINT2CR 0x00 7071 1 XINT2 configuration register\nXINT3CR 0x00 7072 1 XINT3 configuration register\nXINT4CR 0x00 7073 1 XINT4 configuration register\nXINT5CR 0x00 7074 1 XINT5 configuration register\nXINT6CR 0x00 7075 1 XINT6 configuration register\nXINT7CR 0x00 7076 1 XINT7 configuration register\nXNMICR 0x00 7077 1 XNMI configuration register\nXINT1CTR 0x00 7078 1 XINT1 counter register\nXINT2CTR 0x00 7079 1 XINT2 counter register\nReserved 0x707A – 0x707E 5\nXNMICTR 0x00 707F 1 XNMI counter register\nEach external interrupt can be enabled or disabled or qualified using positive, negative, or both positive and\nnegative edge. For more information, see the TMS320x2834x Delfino System Control and Interrupts Reference\nGuide .www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 143\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.6 System Control\nThis section describes the oscillator, PLL and clocking mechanisms, the watchdog function and the low-power\nmodes. Figure 8-27  shows the various clock and reset domains that will be discussed.\nePWM1/../9,□HRPWM1/../9,\neCAP1/../6,□eQEP1/../3Peripheral\nregistersBridgeClock□enables\nI/OPeripheral\nregistersClock□enables\nI/O\neCAN-A/B/4Peripheral\nregistersClock□enables\nI/O\nSPI-A/D,□SCI-A/B/CLOSPCPLSPCLKSystem\ncontrol\nregister\nBridgeSYSCLKOUT\nMemory□busC28x□Core\nGPIO\nMux\nClock□enablePeripheral\nregistersI/O\nMcBSP-A/BLOSPCPLSPCLKClock□enables\nBridge\nHISPCP\nDMAbusBridge\nADC□SOCEXTSOC\nDMA Clock□EnablesPeripheral□bus\nCPU□timer\nregistersCPU□timer□0/1/2\nClock□enable\nPeripheral\nregistersI2C-AEXTADCCLK\nFigure 8-27. Clock and Reset Domains\nNote\nThere is a 2-SYSCLKOUT cycle delay from when the write to the PCLKCR0, PCLKCR1, and\nPCLKCR2 registers (enables peripheral clocks) occurs to when the action is valid. This delay must be\nconsidered before trying to access the peripheral configuration registers.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n144 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nThe PLL, clocking, watchdog and low-power modes, are controlled by the registers listed in Table 8-31 .\nTable 8-31. PLL, Clocking, Watchdog, and Low-Power Mode Registers\nNAME ADDRESS SIZE (x16) DESCRIPTION\nPLLSTS 0x00 7011 1 PLL Status Register\nReserved 0x00 7012 – 0x00 7018 7 Reserved\nPCLKCR2 0x00 7019 1 Peripheral Clock Control Register 2\nHISPCP 0x00 701A 1 High-Speed Peripheral Clock Prescaler Register\nLOSPCP 0x00 701B 1 Low-Speed Peripheral Clock Prescaler Register\nPCLKCR0 0x00 701C 1 Peripheral Clock Control Register 0\nPCLKCR1 0x00 701D 1 Peripheral Clock Control Register 1\nLPMCR0 0x00 701E 1 Low-Power Mode Control Register 0\nReserved 0x00 701F 1 Reserved\nPCLKCR3 0x00 7020 1 Peripheral Clock Control Register 3\nPLLCR 0x00 7021 1 PLL Control Register\nSCSR 0x00 7022 1 System Control and Status Register\nWDCNTR 0x00 7023 1 Watchdog Counter Register\nReserved 0x00 7024 1 Reserved\nWDKEY 0x00 7025 1 Watchdog Reset Key Register\nReserved 0x00 7026 – 0x00 7028 3 Reserved\nWDCR 0x00 7029 1 Watchdog Control Register\nReserved 0x00 702A – 0x00 702C 3 Reserved\nEXTSOCCFG 0x00 702D 1 External ADC SOC Configuration Register\nReserved 0x00 702E 1 Reservedwww.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 145\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.6.1 OSC and PLL Block\nFigure 8-28  shows the OSC and PLL block.\nX1XCLKIN\n(3.3-V□clock□input\nfrom□external\noscillator)\nOn-chip\noscillator\nX2PLLSTS[OSCOFF]OSCCLK\nPLLVCOCLK\n5-bit□multiplier□PLLCR[DIV]OSCCLK□or\nVCOCLK CLKINOSCCLK\n0\nPLLSTS[PLLOFF]nn≠0\nPLLSTS[DIVSEL]\nExternal\nCrystal□or\nResonatorTo\nCPU/1\n/8/2\n/4\nFigure 8-28. OSC and PLL Block Diagram\nThe on-chip oscillator circuit enables a crystal/resonator to be attached to the C2834x  devices using the X1 and\nX2 pins. If the on-chip oscillator is not used, an external oscillator can be used in either one of the following\nconfigurations:\n• A 3.3-V external oscillator can be directly connected to the XCLKIN pin. The X2 pin should be left\nunconnected and the X1 pin tied to V SSK . The logic-high level in this case should not exceed V DDIO.\n• A 1.8-V external oscillator can be directly connected to the X1 pin. The X2 pin should be left unconnected\nand the XCLKIN pin tied to V SS . The logic-high level in this case should not exceed V DD18 .\nThe three possible input-clock configurations are shown in Figure 8-29  to Figure 8-31 .\nExternal□Clock□Signal\n(T oggling□0□-VDDIO)XCLKIN X2\nNCX1VSSK\nFigure 8-29. Using a 3.3-V External Oscillator\nExternal Clock Signal\n(Toggling 0-V )DDXCLKIN X2\nNCX1\nFigure 8-30. Using a 1.8-V External Oscillator\nX1 X2\nC1 C2CrystalVSSKVDD18\n1.8□VXCLKIN\nFigure 8-31. Using the Internal OscillatorTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n146 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.6.1.1 External Reference Oscillator Clock Option\nThe on-chip oscillator requires an external crystal to be connected across the X1 and X2 pins.\nThe connection of the required circuit, consisting of the crystal and two load capacitors, is shown in Figure 8-31 .\nThe load capacitors, C 1 and C 2, must be chosen such that the equation below is satisfied (typical values are on\nthe order of C1 = C2 = 10 pF). C L in the equation is the load specified for the crystal. All discrete components\nused to implement the oscillator circuit must be placed as close as possible to the associated oscillator pins (X1,\nX2, and V SSK).\nNote\nThe external crystal load capacitors must be connected only to the oscillator ground pin (V SSK). Do not\nconnect to board ground (V SS).\nCL/C0043C1C2\n(C1/C0041C2)\nWhere: C L equals the crystal load capacitance.\nTI recommends that customers have the crystal vendor characterize the operation of their device with the MCU\nchip. The crystal vendor has the equipment and expertise to tune the crystal circuit. The vendor can also advise\nthe customer regarding the proper component values that will produce proper start up and stability over the\nentire operating range.\n8.6.1.2 PLL-Based Clock Module\nThe devices have an on-chip, PLL-based clock module. This module provides all the necessary clocking signals\nfor the device, as well as control for low-power mode entry. The PLL has a 5-bit ratio control PLLCR[DIV] to\nselect different CPU clock rates. The watchdog module should be disabled before writing to the PLLCR register.\nIt can be re-enabled (if need be) after the PLL module has stabilized. The input clock and PLLCR[DIV] bits\nshould be chosen in such a way that the output frequency of the PLL (VCOCLK) falls between 400 MHz and\n600 MHz. The PLLSTS[DIVSEL] bit should be selected such that SYSCLKOUT(CLKIN) does not exceed the\nmaximum operating frequency allowed for the device (300 MHz or 200 MHz). For example, suppose it is desired\nto operate a 300-MHz device at 100 MHz using a 20-MHz OSCCLK input (that is, for power savings). The PLL\nshould be configured for OSCCLK * 20, which produces VCOCLK = 400 MHz. PLLSTS[DIVSEL] should then be\nconfigured for /4 mode, resulting in the desired 100-MHz CLKIN to the CPU. The PLL should not be configured\nfor OSCCLK * 10 with PLLSTS[DIVSEL] set for /2 mode. This combination would produce VCOCLK = 200 MHz,\nwhich does not fall within the required 400 MHz to 600 MHz range.\nTable 8-32. PLL Settings (1)\nPLLCR[DIV]\nVALUE(3) (4) PLLSTS[DIVSEL] = 0 PLLSTS[DIVSEL] = 1SYSCLKOUT (CLKIN)\nPLLSTS[DIVSEL] = 2 PLLSTS[DIVSEL] = 3 (2)\n00000 (PLL bypass) OSCCLK/8 (Default) OSCCLK/4 OSCCLK/2 OSCCLK\n00001 (OSCCLK * 2)/8 (OSCCLK * 2)/4 (OSCCLK * 2)/2 –\n00010 (OSCCLK * 3)/8 (OSCCLK * 3)/4 (OSCCLK * 3)/2 –\n00011 (OSCCLK * 4)/8 (OSCCLK * 4)/4 (OSCCLK * 4)/2 –\n00100 (OSCCLK * 5)/8 (OSCCLK * 5)/4 (OSCCLK * 5)/2 –\n00101 (OSCCLK * 6)/8 (OSCCLK * 6)/4 (OSCCLK * 6)/2 –\n00110 (OSCCLK * 7)/8 (OSCCLK * 7)/4 (OSCCLK * 7)/2 –\n00111 (OSCCLK * 8)/8 (OSCCLK * 8)/4 (OSCCLK * 8)/2 –\n01000 (OSCCLK * 9)/8 (OSCCLK * 9)/4 (OSCCLK * 9)/2 –\n01001 (OSCCLK * 10)/8 (OSCCLK * 10)/4 (OSCCLK * 10)/2 –\n01010 (OSCCLK * 11)/8 (OSCCLK * 11)/4 (OSCCLK * 11)/2 –www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 147\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-32. PLL Settings (1) (continued)\nPLLCR[DIV]\nVALUE(3) (4) PLLSTS[DIVSEL] = 0 PLLSTS[DIVSEL] = 1SYSCLKOUT (CLKIN)\nPLLSTS[DIVSEL] = 2 PLLSTS[DIVSEL] = 3 (2)\n01011 – 11111 (OSCCLK * 12)/8 –\n(OSCCLK * 32)/8(OSCCLK * 12)/4 –\n(OSCCLK * 32)/4(OSCCLK * 12)/2 –\n(OSCCLK * 32)/2–\n(1) PLLSTS[DIVSEL] must be 0 before writing to the PLLCR and must be set only to 1 or 2 after PLLSTS[PLLLOCKS] = 1. At reset,\nPLLSTS[DIVSEL] is configured for /8. The boot ROM changes this to /2 or /1, depending on the boot option.\n(2) PLLSTS[DIVSEL] = 3 should be used only when the PLL is bypassed or off.\n(3) The PLL control register (PLLCR) and PLL Status Register (PLLSTS) are reset to their default state by the XRS signal or a watchdog\nreset only. A reset issued by the debugger or the missing clock detect logic have no effect.\n(4) This register is EALLOW protected. See the TMS320x2834x Delfino System Control and Interrupts Reference Guide  for more\ninformation.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n148 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTable 8-33. CLKIN Divide Options\nPLLSTS [DIVSEL] CLKIN DIVIDE\n0 /8\n1 /4\n2 /2\n3 /1\nThe PLL-based clock module provides two modes of operation:\n• Crystal-operation - This mode allows the use of an external crystal/resonator to provide the time base to the\ndevice.\n• External clock source operation - This mode allows the internal oscillator to be bypassed. The device clocks\nare generated from an external clock source input on the X1 or the XCLKIN pin.\nTable 8-34. Possible PLL Configuration Modes\nPLL MODE REMARKS PLLSTS[DIVSEL](1) CLKIN AND\nSYSCLKOUT\nPLL OffInvoked by the user setting the PLLOFF bit in the PLLSTS register. The PLL block\nis disabled in this mode. This can be useful to reduce system noise and for low\npower operation. The PLLCR register must first be set to 0x0000 (PLL Bypass)\nbefore entering this mode. The CPU clock (CLKIN) is derived directly from the\ninput clock on either X1/X2, X1 or XCLKIN.0\n1\n2\n3OSCCLK/8\nOSCCLK/4\nOSCCLK/2\nOSCCLK/1\nPLL BypassPLL Bypass is the default PLL configuration upon power up or after an external\nreset ( XRS). This mode is selected when the PLLCR register is set to 0x0000 or\nwhile the PLL locks to a new frequency after the PLLCR register has been\nmodified. In this mode, the PLL itself is bypassed but the PLL is not turned off.0\n1\n2\n3OSCCLK/8\nOSCCLK/4\nOSCCLK/2\nOSCCLK/1\nPLL EnableAchieved by writing a nonzero value n into the PLLCR register. Upon writing to the\nPLLCR the device will switch to PLL Bypass mode until the PLL locks.0\n1\n2 \n3OSCCLK*n/8\nOSCCLK*n/4\nOSCCLK*n/2\n–(2)\n(1) PLLSTS[DIVSEL] must be 0 before writing to the PLLCR and must be set to 1 or 2 only after PLLSTS[PLLLOCKS] = 1. See the\nTMS320x2834x Delfino System Control and Interrupts Reference Guide  for more information.\n(2) PLLSTS[DIVSEL] should not be set to /1 mode while the PLL is enabled and not bypassed.\n8.6.1.3 Loss of Input Clock\nApplications in which the correct CPU operating frequency is absolutely critical should implement a mechanism\nby which the MCU will be held in reset, should the input clocks ever fail. For example, an R-C circuit may be\nused to trigger the XRS pin of the MCU, should the capacitor ever get fully charged. An I/O pin may be used to\ndischarge the capacitor on a periodic basis to prevent it from getting fully charged.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 149\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.6.2 Watchdog Block\nThe watchdog block on the C2834x  device is similar to the one used on the 240x and 281x devices. The\nwatchdog module generates an output pulse, 512 oscillator clocks wide (OSCCLK), whenever the 8-bit\nwatchdog up counter has reached its maximum value. To prevent this, the user disables the counter or the\nsoftware must periodically write a 0x55 + 0xAA sequence into the watchdog key register which will reset the\nwatchdog counter. Figure 8-32  shows the various functional blocks within the watchdog module.\n/512OSCCLKWDCR (WDPS[2:0])\nWDCLKWDCNTR[7:0]\nWDKEY[7:0]\nGood Key\n1 0 1WDCR (WDCHK[2:0])Bad\nWDCHK\nKeyWDCR (WDDIS)\nClear Counter\nSCSR (WDENINT)Watchdog\nPrescaler\nGenerate\nOutput Pulse\n(512 OSCCLKs)8-Bit\nWatchdog\nCounter\nCLR\nWDRST\nWDINTWatchdog\n55 + AA\nKey Detector\nCore-reset\nWDRST(A)XRSInternal\nPullup\nA. The WDRST signal is driven low for 512 OSCCLK cycles.\nFigure 8-32. Watchdog Module\nThe WDINT signal enables the watchdog to be used as a wakeup from IDLE/STANDBY mode.\nIn STANDBY mode, all peripherals are turned off on the device. The only peripheral that remains functional is\nthe watchdog. The WATCHDOG module will run off OSCCLK. The WDINT signal is fed to the LPM block so that\nit can wake the device from STANDBY (if enabled). See Section 8.7 , Low-Power Modes Block, for more details.\nIn IDLE mode, the WDINT  signal can generate an interrupt to the CPU, through the PIE, to take the CPU out of\nIDLE mode.\nIn HALT mode, this feature cannot be used because the oscillator (and PLL) are turned off and hence so is the\nWATCHDOG.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n150 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n8.7 Low-Power Modes Block\nThe low-power modes on the C2834x  devices are similar to the 240x devices. Table 8-35  summarizes the\nvarious modes.\nTable 8-35. Low-Power Modes\nMODE LPMCR0(1:0) OSCCLK CLKIN SYSCLKOUT EXIT(1)\nIDLE 00 On On On(2) XRS, watchdog interrupt, any enabled\ninterrupt, XNMI\nSTANDBY 01On\n(watchdog still running)Off OffXRS, watchdog interrupt, GPIO Port A\nsignal, debugger(3), XNMI\nHALT 1XOff\n(oscillator and PLL turned off,\nwatchdog not functional)Off OffXRS, GPIO port A signal, XNMI,\ndebugger(3)\n(1) The EXIT column lists which signals or under what conditions the low-power mode will be exited. A low signal, on any of the signals,\nwill exit the low power condition. This signal must be kept low long enough for an interrupt to be recognized by the device. Otherwise,\nthe low-power mode will not be exited and the device will go back into the indicated low-power mode.\n(2) The IDLE mode on the C28x behaves differently than on the 24x/240x. On the C28x, the clock output from the CPU (SYSCLKOUT) is\nstill functional while on the 24x/240x the clock is turned off.\n(3) On the C28x, the JTAG port can still function even if the CPU clock (CLKIN) is turned off.\nThe various low-power modes operate as follows:\nIDLE mode: This mode is exited by any enabled interrupt or an XNMI that is recognized by the processor. The\nLPM block performs no tasks during this mode as long as the LPMCR0(LPM) bits are set to 0,0.\nSTANDBY mode: Any GPIO port A signal (GPIO[31:0]) can wake the device from STANDBY mode. The user must\nselect which signal(s) will wake the device in the GPIOLPMSEL register. The selected signal(s) are\nalso qualified by the OSCCLK before waking the device. The number of OSCCLKs is specified in the\nLPMCR0 register.\nHALT mode: Only the XRS and any GPIO port A signal (GPIO[31:0]) can wake the device from HALT mode. The\nuser selects the signal in the GPIOLPMSEL register.\nNote\nThe low-power modes do not affect the state of the output pins (PWM pins included). They will be in\nwhatever state the code left them in when the IDLE instruction was executed. See the TMS320x2834x\nDelfino System Control and Interrupts Reference Guide  for more details.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 151\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n9 Applications, Implementation, and Layout\nNote\nInformation in the following applications sections is not part of the TI component specification, and TI\ndoes not warrant its accuracy or completeness. TI’s customers are responsible for determining\nsuitability of components for their purposes, as well as validating and testing their design\nimplementation to confirm system functionality.\n9.1 TI Design or Reference Design\nTI Designs Reference Design Library is a robust reference design library spanning analog, embedded processor,\nand connectivity. Created by TI experts to help you jump start your system design, all TI Designs include\nschematic or block diagrams, BOMs, and design files to speed your time to market. Search and download\ndesigns at TIDesigns .\nC2000 Resolver to Digital Conversion Kit\nThis is a motherboard-style Resolver to Digital conversion kit used to experiment with various C2000™\nmicrocontrollers for software-based resolver to digital conversion using on-chip ADCs. The Resolver Kit also\nallows interface to resolvers and inverter control processor.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n152 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n10 Device and Documentation Support\n10.1 Getting Started\nThis section gives a brief overview of the steps to take when first developing for a C28x device. For more detail\non each of these steps, see the following:\n•C2000 Real-Time Control MCUs – Getting started\n•C2000 Real-Time Control MCUs – Tools & software\n•Motor drive and control\n•Digital power\n10.2 Device and Development Support Tool Nomenclature\nTo designate the stages in the product development cycle, TI assigns prefixes to the part numbers of all\nTMS320™  MCU  devices and support tools. Each TMS320 ™ commercial family member has one of three\nprefixes: TMX, TMP, or TMS (for example, TMS  320C28345 ). Texas Instruments recommends two of three\npossible prefix designators for its support tools: TMDX and TMDS. These prefixes represent evolutionary stages\nof product development from engineering prototypes (TMX/TMDX) through fully qualified production devices/\ntools (TMS/TMDS).\nDevice development evolutionary flow:\nTMX Experimental device that is not necessarily representative of the final device\'s electrical specifications\nTMP Final silicon die that conforms to the device\'s electrical specifications but has not completed quality and reliability\nverification\nTMS Fully qualified production device\nSupport tool development evolutionary flow:\nTMDX Development-support product that has not yet completed Texas Instruments internal qualification testing\nTMDS Fully qualified development-support product\nTMX and TMP devices and TMDX development-support tools are shipped against the following disclaimer:\n"Developmental product is intended for internal evaluation purposes."\nTMS devices and TMDS development-support tools have been characterized fully, and the quality and reliability\nof the device have been demonstrated fully. TI\'s standard warranty applies.\nPredictions show that prototype devices (TMX or TMP) have a greater failure rate than the standard production\ndevices. Texas Instruments recommends that these devices not be used in any production system because their\nexpected end-use failure rate still is undefined. Only qualified production devices are to be used.\nTI device nomenclature also includes a suffix with the device family name. This suffix indicates the package type\n(for example, ZFE) and temperature range (for example, T). Figure 10-1  provides a legend for reading the\ncomplete device name for any family member.\nFor device part numbers and further ordering information, see the Package Option Addendum of this document,\nthe TI website ( www.ti.com ), or contact your TI sales representative.\nFor additional description of the device nomenclature markings on the die, see the TMS320C2834x Delfino ™\nMCUs Silicon Errata  .www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 153\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nFigure 10-1. Example of C2834x Device NomenclatureTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n154 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n10.3 Tools and Software\nTI offers an extensive line of development tools. Some of the tools and software to evaluate the performance of\nthe device, generate code, and develop solutions are listed below. To view all available tools and software for\nC2000™ real-time control MCUs, visit the C2000 MCU Tools and Software  page.\nDesign Kits and Evaluation Modules\nC2000 Delfino MCUs F28377S LaunchPad Development Kit\nThe C2000™ Delfino™ MCUs LaunchPad™ development kit is an inexpensive evaluation platform that provides\ndesigners with a low-cost development kit for high-performance digital control applications. This tool provides a\ngreat starting point for development of many high-end digital control applications such as industrial drives and\nautomation; power line communications; solar inverters; and more.\nDelfino C28343 controlCARD\nThe C28343 controlCARD allows users to easily evaluate all the functionality of the 200-MHz C28343 floating-\npoint controller and is compatible with existing controlCARD tool kits. The card provides all the chip support\nnecessary, needing only a 5-V supply to be fully functional. The controlCARD also has two onboard 12-bit ADCs\nand a 64KB EEPROM for nonvolatile program storage. Based on the standard DIM100 controlCARD form factor,\nit is pin-compatible with other C2000 controlCARDs.\nSoftware\nC2000 DesignDRIVE Software for Industrial Drives and Motor Control\nThe DesignDRIVE platform combines software solutions with DesignDRIVE Development Kits to make it easy to\ndevelop and evaluate solutions for many industrial drive and servo topologies. DesignDRIVE offers support for a\nwide variety of motor types, sensing technologies, position sensors and communications networks, including\nspecific examples for vector control of motors, incorporating current, speed and position loops, to help\ndevelopers jumpstart their evaluation and development. Based on the real-time control architecture of TI’s\nC2000™  microcontrollers (MCUs), DesignDRIVE is ideal for the development of industrial inverter and servo\ndrives used in robotics, computer numerical control machinery (CNC), elevators, materials conveyance and\nother industrial manufacturing applications.\npowerSUITE Digital Power Supply Software Frequency Response Analyzer Tool for C2000™ MCUs\nThe Software Frequency Response Analyzer (SFRA) is one of several tools included in the powerSUITE Digital\nPower Supply Design Software Tools for C2000 ™ Microcontrollers. The SFRA includes a software library that\nenables developers to quickly measure the frequency response of their digital power converter. The SFRA library\ncontains software functions that inject a frequency into the control loop and measure the response of the system\nusing the C2000 MCUs’ on-chip analog to digital converter (ADC). This process provides the plant frequency\nresponse characteristics and the open loop gain frequency response of the closed loop system. The user can\nthen view the plant and open loop gain frequency response on a PC-based GUI. All of the frequency response\ndata is exported into a CSV file, or optionally an Excel® spreadsheet, which can then be used to design the\ncompensation loop using the Compensation Designer.\nC2000Ware for C2000 MCUs\nC2000Ware for C2000 ™ microcontrollers is a cohesive set of development software and documentation\ndesigned to minimize software development time. From device-specific drivers and libraries to device peripheral\nexamples, C2000Ware provides a solid foundation to begin development and evaluation of your product.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 155\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nDevelopment Tools\nC2000 Gang Programmer\nThe C2000 Gang Programmer is a C2000 device programmer that can program up to eight identical C2000\ndevices at the same time. The C2000 Gang Programmer connects to a host PC using a standard RS-232 or\nUSB connection and provides flexible programming options that allow the user to fully customize the process.\nCode Composer Studio™ (CCS) Integrated Development Environment (IDE) for C2000 Microcontrollers\nCode Composer Studio is an integrated development environment (IDE) that supports TI\'s Microcontroller and\nEmbedded Processors portfolio. Code Composer Studio comprises a suite of tools used to develop and debug\nembedded applications. It includes an optimizing C/C++ compiler, source code editor, project build environment,\ndebugger, profiler, and many other features. The intuitive IDE provides a single user interface taking the user\nthrough each step of the application development flow. Familiar tools and interfaces allow users to get started\nfaster than ever before. Code Composer Studio combines the advantages of the Eclipse software framework\nwith advanced embedded debug capabilities from TI resulting in a compelling feature-rich development\nenvironment for embedded developers.\nModels\nVarious models are available for download from the product Tools & Software pages. These include I/O Buffer\nInformation Specification (IBIS) Models and Boundary-Scan Description Language (BSDL) Models. To view all\navailable models, visit the Models section of the Tools & Software page for each device.\n10.4 Documentation Support\nTo receive notification of documentation updates, navigate to the device product folder on ti.com . In the upper\nright corner, click on Alert me  to register and receive a weekly digest of any product information that has\nchanged. For change details, review the revision history included in any revised document.\nThe current documentation that describes the processor, related peripherals, and other technical collateral is\nlisted below.\nErrata\nTMS320C2834x Delfino ™ MCUs Silicon Errata  describes the advisories and usage notes for different versions\nof silicon.\nCPU User\'s Guides\nTMS320C28x CPU and Instruction Set Reference Guide  describes the central processing unit (CPU) and the\nassembly language instructions of the TMS320C28x fixed-point digital signal processors (DSPs). It also\ndescribes emulation features available on these DSPs.\nTMS320C28x Extended Instruction Sets Technical Reference Manual  describes the architecture, pipeline, and\ninstruction set of the TMU, VCU-II, and FPU accelerators.\nPeripheral Guides\nC2000 Real-Time Control MCU Peripherals Reference Guide  describes the peripheral reference guides of the\n28x digital signal processors (DSPs).\nTMS320x2834x Delfino System Control and Interrupts Reference Guide  This document describes the various\ninterrupts and system control features of the x2834x microcontroller (MCUs).\nTMS320x2834x Delfino External Interface (XINTF) Reference Guide  This document describes the XINTF, which\nis a nonmultiplexed asynchronous bus, as it is used on the x2834x device.\nTMS320x2834x Delfino Boot ROM Reference Guide  This document describes the purpose and features of the\nbootloader (factory-programmed boot-loading software) and provides examples of code. It also describes other\ncontents of the device on-chip boot ROM and identifies where all of the information is located within that\nmemory.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n156 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nTMS320x2834x Delfino Multichannel Buffered Serial Port (McBSP) Reference Guide  This document describes\nthe McBSP available on the x2834x devices. The McBSPs allow direct interface between a microcontroller\n(MCU) and other devices in a system.\nTMS320x2834x Delfino Direct Memory Access (DMA) Module Reference Guide  This document describes the\nDMA on the x2834x microcontroller (MCUs).\nTMS320x2834x Delfino Enhanced Pulse Width Modulator (ePWM) Module Reference Guide  This document\ndescribes the main areas of the enhanced pulse width modulator that include digital motor control, switch mode\npower supply control, UPS (uninterruptible power supplies), and other forms of power conversion.\nTMS320x2834x Delfino High Resolution Pulse Width Modulator (HRPWM) Reference Guide  This document\ndescribes the operation of the high-resolution extension to the pulse width modulator (HRPWM).\nTMS320x2834x Delfino Enhanced Capture (eCAP) Module Reference Guide  This document describes the\nenhanced capture module. It includes the module description and registers.\nTMS320x2834x Delfino Enhanced Quadrature Encoder Pulse (eQEP) Module Reference Guide  This document\ndescribes the eQEP module, which is used for interfacing with a linear or rotary incremental encoder to get\nposition, direction, and speed information from a rotating machine in high performance motion and position\ncontrol systems. It includes the module description and registers.\nTMS320x2834x Delfino Enhanced Controller Area Network (eCAN) Reference Guide  This document describes\nthe eCAN that uses established protocol to communicate serially with other controllers in electrically noisy\nenvironments.\nTMS320x2834x Delfino Serial Communications Interface (SCI) Reference Guide  This document describes the\nSCI, which is a 2-wire asynchronous serial port, commonly known as a UART. The SCI modules support digital\ncommunications between the CPU and other asynchronous peripherals that use the standard nonreturn-to-zero\n(NRZ) format.\nTMS320x2834x Delfino Serial Peripheral Interface (SPI) Reference Guide  This document describes the SPI - a\nhigh-speed synchronous serial input/output (I/O) port - that allows a serial bit stream of programmed length (1 to\n16 bits) to be shifted into and out of the device at a programmed bit-transfer rate.\nTMS320x2834x Delfino Inter-Integrated Circuit (I2C) Module Reference Guide  This document describes the\nfeatures and operation of the inter-integrated circuit (I2C) module.\nTools Guides\nTMS320C28x Assembly Language Tools v20.2.0.LTS User\'s Guide  describes the assembly language tools\n(assembler and other tools used to develop assembly language code), assembler directives, macros, common\nobject file format, and symbolic debugging directives for the TMS320C28x device.\nTMS320C28x Optimizing C/C++ Compiler v20.2.0.LTS User\'s Guide  describes the TMS320C28x C/C++\ncompiler. This compiler accepts ANSI standard C/C++ source code and produces TMS320 DSP assembly\nlanguage source code for the TMS320C28x device.\nTMS320C28x DSP/BIOS 5.x Application Programming Interface (API) Reference Guide  describes development\nusing DSP/BIOS.\nApplication Reports\nThe SMT & packaging application notes  website lists documentation on TI’s surface mount technology (SMT)\nand application notes on a variety of packaging-related topics.\nTMS320C28x FPU Primer  provides an overview of the floating-point unit (FPU) in the C2000 ™ Delfino\nmicrocontroller devices.\nRunning an Application from Internal Flash Memory on the TMS320F28xxx DSP  covers the requirements\nneeded to properly configure application software for execution from on-chip flash memory. Requirements for\nboth DSP/BIOS and non-DSP/BIOS projects are presented. Example code projects are included.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 157\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nProgramming TMS320x28xx and TMS320x28xxx Peripherals in C/C++  explores a hardware abstraction layer\nimplementation to make C/C++ coding easier on 28x DSPs. This method is compared to traditional #define\nmacros and topics of code efficiency and special case registers are also addressed.\nUsing PWM Output as a Digital-to-Analog Converter on a TMS320F280x Digital Signal Controller  presents a\nmethod for using the on-chip pulse width modulated (PWM) signal generators on the TMS320F280x family of\ndigital signal controllers as a digital-to-analog converter (DAC).\nTMS320F280x Digital Signal Controller USB Connectivity using the TUSB3410 USB-to-UART Bridge Chip\npresents hardware connections as well as software preparation and operation of the development system using\na simple communication echo program.\nUsing the Enhanced Quadrature Encoder Pulse (eQEP) Module in TMS320x280x, 28xxx as a Dedicated\nCapture  provides a guide for the use of the eQEP module as a dedicated capture unit and is applicable to the\nTMS320x280x, 28xxx family of processors.\nUsing the ePWM Module for 0% - 100% Duty Cycle Control  provides a guide for the use of the ePWM module to\nprovide 0% to 100% duty cycle control and is applicable to the TMS320x280x family of processors.\nTMS320x2833x/2823x to TMS320x2834x Delfino Migration Overview  This application report describes\ndifferences between the Texas Instruments TMS320x2833x/2823x and the TMS320x2834x devices to assist in\napplication migration.\nOnline Stack Overflow Detection on the TMS320C28x DSP  presents the methodology for online stack overflow\ndetection on the TMS320C28x DSP. C-source code is provided that contains functions for implementing the\noverflow detection on both DSP/BIOS and non-DSP/BIOS applications.\nSemiconductor Packing Methodology  describes the packing methodologies employed to prepare semiconductor\ndevices for shipment to end users.\nCalculating Useful Lifetimes of Embedded Processors  provides a methodology for calculating the useful lifetime\nof TI embedded processors (EPs) under power when used in electronic systems. It is aimed at general\nengineers who wish to determine if the reliability of the TI EP meets the end system reliability requirement.\nSemiconductor and IC Package Thermal Metrics  describes traditional and new thermal metrics and puts their\napplication in perspective with respect to system-level junction temperature estimation.\nAn Introduction to IBIS (I/O Buffer Information Specification) Modeling  discusses various aspects of IBIS\nincluding its history, advantages, compatibility, model generation flow, data requirements in modeling the input/\noutput structures and future trends.\n10.5 Support Resources\nTI E2E™ support forums  are an engineer\'s go-to source for fast, verified answers and design help — straight\nfrom the experts. Search existing answers or ask your own question to get the quick design help you need.\nLinked content is provided "AS IS" by the respective contributors. They do not constitute TI specifications and do\nnot necessarily reflect TI\'s views; see TI\'s Terms of Use .\n10.6 Trademarks\nMicroStar BGA™, Delfino™, C2000™, Piccolo™, DSP/BIOS™, Code Composer Studio™, and TI E2E™ are\ntrademarks of Texas Instruments.\nExcel® is a registered trademark of Microsoft Corporation in the United States and/or other countries.\nAll trademarks are the property of their respective owners.\n10.7 Electrostatic Discharge Caution\nThis integrated circuit can be damaged by ESD. Texas Instruments recommends that all integrated circuits be handled\nwith appropriate precautions. Failure to observe proper handling and installation procedures can cause damage.\nESD damage can range from subtle performance degradation to complete device failure. Precision integrated circuits may\nbe more susceptible to damage because very small parametric changes could cause the device not to meet its published\nspecifications.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n158 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n10.8 Glossary\nTI Glossary This glossary lists and explains terms, acronyms, and definitions.www.ti.comTMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021\nCopyright © 2021 Texas Instruments Incorporated Submit Document Feedback 159\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\n11 Mechanical, Packaging, and Orderable Information\n11.1 Packaging Information\nThe following pages include mechanical, packaging, and orderable information. This information is the most\ncurrent data available for the designated devices. This data is subject to change without notice and revision of\nthis document. For browser-based versions of this data sheet, refer to the left-hand navigation.TMS320C28346, TMS320C28346-Q1, TMS320C28345, TMS320C28344\nTMS320C28343, TMS320C28343-Q1, TMS320C28342, TMS320C28341\nSPRS516F – MARCH 2009 – REVISED FEBRUARY 2021 www.ti.com\n160 Submit Document Feedback Copyright © 2021 Texas Instruments Incorporated\nProduct Folder Links: TMS320C28346  TMS320C28346-Q1  TMS320C28345  TMS320C28344  TMS320C28343\nTMS320C28343-Q1  TMS320C28342  TMS320C28341\nPACKAGE OPTION ADDENDUM\nwww.ti.com 26-May-2021\nAddendum-Page 1PACKAGING INFORMATION\nOrderable Device Status\n(1)Package Type Package\nDrawingPinsPackage\nQtyEco Plan\n(2)Lead finish/\nBall material\n(6)MSL Peak Temp\n(3)Op Temp (°C) Device Marking\n(4/5)Samples\nTMS320C28341ZAYT ACTIVE NFBGA ZAY179160RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 105 TMS320\nC28341ZAYT\nTMS320C28342ZFET ACTIVE BGA ZFE25690RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 105 TMS\n320C28342ZFET\nTMS320C28343ZAYT ACTIVE NFBGA ZAY179160RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 105 TMS320\nC28343ZAYT\nTMS320C28343ZFEQ ACTIVE BGA ZFE25690RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 125 TMS\n320C28343ZFEQ\nTMS320C28344ZFET ACTIVE BGA ZFE25690RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 105 TMS\n320C28344ZFET\nTMS320C28345ZAYT ACTIVE NFBGA ZAY179160RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 105 TMS320\nC28345ZAYT\nTMS320C28345ZFET ACTIVE BGA ZFE25690RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 105 TMS\n320C28345ZFET\nTMS320C28346ZFEQ ACTIVE BGA ZFE25690RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 125 TMS\n320C28346ZFEQ\nTMS320C28346ZFET ACTIVE BGA ZFE25690RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 105 TMS\n320C28346ZFET\nTMS320C28346ZFETR ACTIVE BGA ZFE256750RoHS & Green SNAGCU Level-3-260C-168 HR -40 to 105 TMS320\nC28346ZFET\n \n(1) The marketing status values are defined as follows:\nACTIVE: Product device recommended for new designs.\nLIFEBUY:  TI has announced that the device will be discontinued, and a lifetime-buy period is in effect.\nNRND: Not recommended for new designs. Device is in production to support existing customers, but TI does not recommend using this part in a new design.\nPREVIEW:  Device has been announced but is not in production. Samples may or may not be available.\nOBSOLETE:  TI has discontinued the production of the device.\n \n(2) RoHS:  TI defines "RoHS" to mean semiconductor products that are compliant with the current EU RoHS requirements for all 10 RoHS substances,  including the requirement that RoHS substance\ndo not exceed 0.1% by weight in homogeneous materials. Where designed to be soldered at high temperatures, "RoHS" products are suitable for use in specified lead-free processes. TI may\nreference these types of products as "Pb-Free".\nRoHS Exempt:  TI defines "RoHS Exempt" to mean products that contain lead but are compliant with EU RoHS pursuant to a specific EU RoHS exemption.\nGreen: TI defines "Green" to mean the content of Chlorine (Cl) and Bromine (Br) based flame retardants meet JS709B low halogen requirements of <=1000ppm threshold.  Antimony trioxide based\nflame retardants must also meet the <=1000ppm threshold requirement.\n \nPACKAGE OPTION ADDENDUM\nwww.ti.com 26-May-2021\nAddendum-Page 2(3) MSL, Peak Temp. - The Moisture Sensitivity Level rating according to the JEDEC industry standard classifications, and peak solder temperature.\n \n(4) There may be additional marking, which relates to the logo, the lot trace code information, or the environmental category on the device.\n \n(5) Multiple Device Markings will be inside parentheses. Only one Device Marking contained in parentheses and separated by a "~" will appear on a device. If a line is indented then it is a continuation\nof the previous line and the two combined represent the entire Device Marking for that device.\n \n(6) Lead finish/Ball material - Orderable Devices may have multiple material finish options. Finish options are separated by a vertical ruled line. Lead finish/Ball material values may wrap to two\nlines if the finish value exceeds the maximum column width.\n \nImportant Information and Disclaimer: The information provided on this page represents TI\'s knowledge and belief as of the date that it is provided. TI bases its knowledge and belief on information\nprovided by third parties, and makes no representation or warranty as to the accuracy of such information. Efforts are underway to better integrate information from third parties. TI has taken and\ncontinues to take reasonable steps to provide representative and accurate information but may not have conducted destructive testing or chemical analysis on incoming materials and chemicals.\nTI and TI suppliers consider certain information to be proprietary, and thus CAS numbers and other limited information may not be available for release.\n \nIn no event shall TI\'s liability arising out of such information exceed the total purchase price of the TI part(s) at issue in this document sold by TI to Customer on an annual basis.\n \n OTHER QUALIFIED VERSIONS OF TMS320C28343, TMS320C28343-Q1, TMS320C28346, TMS320C28346-Q1 :\n•Catalog : TMS320C28343 , TMS320C28346\n•Automotive : TMS320C28343-Q1 , TMS320C28346-Q1\n NOTE: Qualified Version Definitions:\n•Catalog - TI\'s standard catalog product\n•Automotive - Q100 devices qualified for high-reliability automotive applications targeting zero defects\nPACKAGE MATERIALS INFORMATION\n  \nwww.ti.com 23-Sep-2022\nTRAY\n \n \nL - Outer tray length without tabs KO - \nOuter \ntray \nheight\nW - \nOuter \ntray \nwidth\nP1 - Tray unit pocket pitch\nCW - Measurement for tray edge (Y direction) to corner pocket center\nCL - Measurement for tray edge (X direction) to corner pocket centerText\n \n \nChamfer on Tray corner indicates Pin 1 orientation of packed units.\n \n \n*All dimensions are nominal\nDevice Package\nNamePackage\nTypePinsSPQUnit array\nmatrixMax\ntemperature\n(°C)L (mm) W\n(mm)K0\n(µm)P1\n(mm)CL\n(mm)CW\n(mm)\nTMS320C28341ZAYT ZAY NFBGA 1791608 x 20 150 315135.9762015.411.219.65\nTMS320C28342ZFET ZFE BGA 256906 X 15 150 315135.9762019.52119.2\nTMS320C28343ZAYT ZAY NFBGA 1791608 x 20 150 315135.9762015.411.219.65\nTMS320C28343ZFEQ ZFE BGA 256906 X 15 150 315135.9762019.52119.2\nTMS320C28344ZFET ZFE BGA 256906 X 15 150 315135.9762019.52119.2\nTMS320C28345ZAYT ZAY NFBGA 1791608 x 20 150 315135.9762015.411.219.65\nTMS320C28345ZFET ZFE BGA 256906 X 15 150 315135.9762019.52119.2\nTMS320C28346ZFEQ ZFE BGA 256906 X 15 150 315135.9762019.52119.2\nTMS320C28346ZFET ZFE BGA 256906 X 15 150 315135.9762019.52119.2\nPack Materials-Page 1\n\nwww.ti.comPACKAGE OUTLINE\n12.1\n11.9\n12.111.9\n1.4 MAX\n0.450.35\n179X 0.550.4510.4  TYP10.4  TYP\n0.8  TYP\n0.8  TYP(0.8)\n(0.8)NFBGA - 1.4 mm max height ZAY0179A\nPLASTIC BALL GRID ARRAY\n4225014/C   07/2020\nNOTES:  1. All linear dimensions are in millimeters. Any dimensions in parenthesis are for reference only. Dimensioning and tolerancing    per ASME Y14.5M. 2. This drawing is subject to change without notice. BALL A1\nCORNER\n⌓ 0.12 CSEATING PLANE\n⌖⌀0.15ⓂC A B\n⌀0.08ⓂCSYMM\n℄\nSYMM\n℄\n1A\n2 3 4 5 6 7 8 9 10 11 12 13BCDEFGHJKLMN\n14PSCALE  1.200\nAB\nC\nwww.ti.comEXAMPLE BOARD LAYOUT\n0.05 MAX\nALL AROUND0.05 MIN\nALL AROUND(0.8) TYP(0.8) TYP179X ( 0.4)\n(0.4)\nMETAL EDGE(0.4)\nSOLDER MASK\nOPENINGNFBGA - 1.4 mm max height ZAY0179A\nPLASTIC BALL GRID ARRAY\n4225014/C   07/2020\nNOTES: (continued) 3. Final dimensions may vary due to manufacturing tolerance considerations and also routing constraints.    For information, see Texas Instruments literature number SPRAA99 (www.ti.com/lit/spraa99). LAND PATTERN EXAMPLE\nEXPOSED METAL SHOWN\nSCALE: 10XSYMM\n℄SYMM\n℄A1 2 3 4 5 6 7 8 9 10 11 12 13\nB\nC\nD\nE\nF\nG\nH\nJ\nK\nL\nM\nN14\nP\nEXPOSED METAL\nSOLDER MASK\nOPENINGMETAL UNDERSOLDER MASK\nEXPOSED METAL\nSOLDER MASK DETAILS\nNOT TO SCALENON-SOLDER MASK\nDEFINED\n(PREFERRED)SOLDER MASK\nDEFINED\nwww.ti.comEXAMPLE STENCIL DESIGN\n(0.8) TYP\n(0.8) TYP179X ( 0.4)NFBGA - 1.4 mm max height ZAY0179A\nPLASTIC BALL GRID ARRAY\n4225014/C   07/2020\nNOTES: (continued)\n 4. Laser cutting apertures with trapezoidal walls and rounded corners may offer better paste release.SOLDER PASTE EXAMPLE\nBASED ON 0.150 mm THICK STENCIL\nSCALE: 10XSYMM\n℄SYMM\n℄A1 2 3 4 5 6 7 8 9 10 11 12 13\nB\nC\nD\nE\nF\nG\nH\nJ\nK\nL\nM\nN14\nP\nIMPORTANT NOTICE AND DISCLAIMER\nTI PROVIDES TECHNICAL AND RELIABILITY DATA (INCLUDING DATA SHEETS), DESIGN RESOURCES (INCLUDING REFERENCE \nDESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND OTHER RESOURCES “AS IS” \nAND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING WITHOUT LIMITATION ANY \nIMPLIED WARRANTIES OF MERCHANTABILIT Y, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT OF THIRD \nPARTY INTELLECTUAL PROPERTY RIGHTS.\nThese resources are intended for skilled developers designing with TI products. Y ou are solely responsible for (1) selecting the appropriate \nTI products for your application, (2) designing, validating and testing your application, and (3) ensuring your application meets applicable \nstandards, and any other safety, security, regulatory or other requirements.\nThese resources are subject to change without notice. TI grants you permission to use these resources only for development of an \napplication that uses the TI products described in the resource. Other reproduction and display of these resources is prohibited. No license \nis granted to any other TI intellectual property right or to any third party intellectual property right. TI disclaims responsibility for , and you \nwill fully indemnify TI and its representatives against, any claims, damages, costs, losses, and liabilities arising out of your use of these \nresources.\nTI’s products are provided subject to TI’s Terms of Sale or other applicable terms available either on ti.com or provided in conjunction with \nsuch TI products. TI’s provision of these resources does not expand or otherwise alter TI’s applicable warranties or warranty disclaimers for \nTI products.\nTI objects to and rejects any additional or different terms you may have proposed. IMPORTANT NOTICE\nMailing Address: Texas Instruments, Post Office Box 655303, Dallas, Texas 75265\nCopyright © 202 2, Texas Instruments Incorporated\n'}]
!==============================================================================!
### TMS320C28346ZFET - Texas Instruments

#### Key Characteristics and Specifications

- **Voltage Ratings:**
  - Core Voltage: 1.1V / 1.2V
  - I/O Voltage: 3.3V
  - PLL/Oscillator Voltage: 1.8V

- **Current Ratings:**
  - Maximum current consumption varies based on operating conditions and peripherals enabled. Typical operational current at 300 MHz is approximately 335 mA.

- **Power Consumption:**
  - Power consumption varies with operational mode:
    - Typical operational: 335 mA at 300 MHz
    - Idle: 205 mA
    - Standby: 140 mA
    - Halt: 135 mA

- **Operating Temperature Range:**
  - Standard: -40°C to 105°C
  - Extended: -40°C to 125°C (AEC Q100 Qualification for Automotive Applications)

- **Package Type:**
  - 256-Ball Plastic Ball Grid Array (BGA) (ZFE)

- **Special Features:**
  - High-performance 32-bit CPU with IEEE 754 single-precision floating-point unit (FPU).
  - Up to 300 MHz operation with a 3.33 ns cycle time.
  - Six-channel DMA controller.
  - Extensive peripheral support including ePWM, eCAP, eQEP, and eCAN.
  - On-chip memory: Up to 258K × 16 SARAM and 8K × 16 Boot ROM.
  - Enhanced control peripherals and real-time debug capabilities.

- **Moisture Sensitive Level (MSL):**
  - MSL Level 3 per JEDEC J-STD-020E.

#### Description

The **TMS320C28346ZFET** is a high-performance microcontroller from Texas Instruments, part of the TMS320C2000™ family, specifically designed for real-time control applications. It features a 32-bit CPU architecture with a floating-point unit, enabling efficient processing of complex mathematical operations. The device is optimized for applications requiring high-speed processing and low-latency response, making it suitable for industrial automation, motor control, and power management systems.

#### Typical Applications

- **Industrial AC Inverter Drives:** Used for controlling the speed and torque of electric motors in industrial applications.
- **Industrial Servo Amplifiers and Controllers:** Provides precise control for servo motors in robotics and automation.
- **Computer Numerical Control (CNC) Machining:** Enables high-speed and accurate control of CNC machines.
- **Uninterruptible Power Supplies (UPS):** Manages power conversion and battery management in UPS systems.
- **Telecom Equipment Power Management:** Controls power supply and management in telecommunications infrastructure.
- **Solar Inverters:** Converts solar energy into usable electrical power while managing grid connection.

This microcontroller is ideal for applications that require high computational performance, real-time processing, and extensive peripheral interfacing capabilities.