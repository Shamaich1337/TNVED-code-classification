[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': "Give me information about the component of AD9864BCPZ production of ANALOG DEVICES from the text:IF Digitizing Subsystem  \nData Sheet  AD9864  \nRev.  A Document Feedback  \nInformation furnished by Analog Devices is believed to be accurate and reliable. However, no \nresponsibility is assumed by Analog Devices for its use, nor for any infringements of patents or other \nrights of third parties that may result from its use. Specifications subject to change without notice. No license is granted by implication or otherwise under any patent or patent ri ghts of Analog Devices. \nTrademarks and registered trademarks are the property of their respective owners.  O\nne Technology Way, P.O. Box 9106,  Norwood, MA 02062- 9106, U.S.A.  \nTel: 781.329.4700  © 2003 –2016  Analog Devices, Inc. All rights reserved.  \nTechnical Support  www.analog.com   FEATURES  \n10 MHz to 3 00 MHz in put frequency \n6.8 kHz t o 270 kHz o utput s ignal bandwidth \n7.5 dB single si deband n oise figur e (SS B NF) \n−7.0 dB m input  third -order i ntercept ( IIP3 ) \nAGC  free range up to −3 4 dBm \n12 dB continuous AGC range \n16 dB front-end attenuator \nBase band  I/Q 16-bit (or 24-bit)  serial digi tal output  \nLO and sampling clock synthe sizers \nProgra mmable decimation f actor, o utput format, A GC, and \nsynthesizer settings  \n370 Ω i\nnput impedance  \n2.7 V to 3.6 V supply voltage  \nLow current consumption: 17 mA  \n48-lead LFCSP package  \nAPPLICATIONS  \nMultimode narrow -band radio products  \nAnalog/digital UHF/VHF FDMA receivers  \nTETRA, APCO25, GSM/EDGE \nPortable and mobile radio products  \nSATCOM terminals GENERAL DESCRIPTION  \nThe AD98641 is a general -purpose IF subsystem that digitizes a \nlow level, 10 MHz to 300 MHz IF input with a signal bandwidth \nranging from 6.8 kHz to 270 kHz. The signal chain of the AD9864 \nconsists of a low noise amplifier (LNA), a mixer, a band -pass Σ-∆ \nanalog -to-digital converter (ADC), and a decimation filter with \nprogrammable decimation factor. An automatic gain con trol \n(AGC) circuit gives the AD9864  12 dB of continuous gain \nadjustment. Auxiliary blocks include both clock and  local \noscillator (LO ) synthesizers.  \nThe high dynamic range of the AD9864 and inherent antialiasing  \nprovided by the band -pass Σ-∆ converter allow the device to cope  \nwith blocking signals up to 95 dB stronger than the desired signal. This attribute often reduces the  cost of a radio by reducing IF \nfiltering requirements. Also, it enables multimode radios of varying channel bandwidths, allowing the IF filter to be specified for the  \nlargest channel bandwidth.  \nThe SPI port programs numerous parameters of the AD9864, allowing the device to be optimized for any given application. Programmable parameters include synthesizer divide ratios, AGC  \nattenuation and attack/decay time, received signal strength level,  \ndecimat ion factor, output data format, 16 dB attenuator, and the \nselected bias currents.  \nThe AD9864 is available in a 48 -lead LFCSP package and operates  \nfrom a single 2.7 V to 3.6 V supply. The total pow er consumption  \nis typically 56 mW and a power -down mode is provided via \nserial interfacing.  \nFUNCTIONAL BLOCK DIA GRAM  \nΣ-ΔADC LNADAC AGC\nVOLT AGE\nREFERENCESPICONTRO L LOGICFORM ATTING/SSIDECIM ATION\nFILTER\nLO\nSYNCLK SYN\nLO VCO AND\nLOO P FILTERIFIN\nFREFDOU TA\nDOUTB\nFS\nCLKOUT\nSYNCB PE PD PC VREFN VCM VREFPMXOP MXON IF2PIF2N GC PGCN\n–16dBAD9864\nCLKN CLKP IOUTC LON LOP IOUT L\nLOO P FILTER\n04319-0-001\nF\nigure 1.  \n1 Protected by U.S. Patent No. 5,969,657; other patents pending.  \nAD9864 Data Sheet\n \nRev. A | Page 2 of 47 TABLE OF CONTENTS \nFeatures .............................................................................................. 1 \xa0\nApplications ....................................................................................... 1 \xa0\nGeneral Description ......................................................................... 1 \xa0\nFunctional Block Diagram .............................................................. 1 \xa0\nRevision History ............................................................................... 2 \xa0\nSpecifications ..................................................................................... 3 \xa0\nDigital Specifications ................................................................... 5 \xa0\nAbsolute Maximum Ratings ............................................................ 6 \xa0\nThermal Resistance ...................................................................... 6 \xa0\nESD Caution .................................................................................. 6 \xa0\nPin Configuration and Functional Descriptions .......................... 7 \xa0\nTypical Performance Characteristics ............................................. 9 \xa0\nTerminology .................................................................................... 14 \xa0\nSerial Peripheral Interface (SPI) ................................................... 15 \xa0\nTheory of Operation ...................................................................... 17 \xa0\nIntroduction ................................................................................ 17 \xa0\nSerial Port Interface (SPI) .......................................................... 18 \xa0\nPower-On Reset .......................................................................... 19 \xa0\nSynchronous Serial Interface (SSI) ........................................... 19 \xa0SSI Control Registers ................................................................. 21 \xa0\nSynchronization Using SYNCB ................................................ 24 \xa0\nInterfacing to DSPs .................................................................... 24 \xa0\nPower Control ............................................................................. 24 \xa0\nLO Synthesizer ............................................................................ 25 \xa0\nClock Synthesizer ....................................................................... 26 \xa0\nIF LNA/Mixer ............................................................................. 28 \xa0\nBand-Pass Σ-Δ ADC .................................................................. 29 \xa0\nDecimation Filter ....................................................................... 32 \xa0\nVariable Gain Amplifier Operation with Automatic  \nGain Control ............................................................................... 33 \xa0\nApplications Considerations ..................................................... 38 \xa0\nExternal Passive Component Requirements .......................... 40 \xa0\nApplications ................................................................................ 40 \xa0\nLayout Example, Evaluation Board, and Software ................. 45 \xa0\nSPI Initialization Example ......................................................... 45 \xa0\nDevice SPI Initialization ............................................................ 46 \xa0\nOutline Dimensions ....................................................................... 47 \xa0\nOrdering Guide .......................................................................... 47 \n \nREVISION HISTORY \n2/16—Rev. 0 to Rev. A \nChanges to Figure 2 .......................................................................... 7 Changes to Typical Performance Characteristics Section ........... 9 Changes to Figure 19 ...................................................................... 11 \nChanges to Table 6 .......................................................................... 16 \nChanged General Description Section to Introduction Section ... 17 Changes to Serial Port Interface (SPI) Section ........................... 18 Added Figure 31; Renumbered Sequentially .............................. 19 Added Power-On Reset Section ................................................... 19 \nDeleted Table 9; Renumbered Sequentially ................................ 19 \nAdded SSI Control Registers Section and Table 8 to Table 13 .... 21 Changes to Synchronization Using SYNCB Section and  Figure 38 .......................................................................................... 24 Changes to Clock Synthesizer Section ......................................... 26 Changes to Band-Pass Σ-Δ ADC Section and Table 20 ............ 30 Changes to Table 21 ....................................................................... 31 Changes to Variable Gain Control Section ................................. 34 Deleted Table 17 ............................................................................. 34 \nAdded Figure 64 ............................................................................. 36 \nChanges to Figure 72...................................................................... 40 Changes to Layout Example, Evaluation Board, and  Software Section ............................................................................. 45 Added Figure 77 and SPI Initialization Example Section ......... 45 \nAdded Device SPI Initialization Section and Table 24 .............. 46 \nUpdated Outline Dimensions ....................................................... 47 Changes to Ordering Guide .......................................................... 47  \n8/03—Revision 0: Initial Version  \n \nData Sheet  AD9864  \n \nRev. A | Page 3  of 47 SPECIFICATIONS \nVDDI = VDDF = VDDA = VDDC = VDDL = VDDH = 2.7 V to 3.6 V , VDDQ = VDDP = 2.7 V to 5.5 V , f CLK = 18 MSPS, f IF = 109.65  MHz,  \nfLO = 107.4 MHz, f REF = 16.8 MHz, unless otherwise noted. Standard operating mode: VGA at minimum attenuation setting, synthesizers \nin normal (not fast acquire) mode, decimation factor = 900, 16 -bit digital output, and 10 pF load on SSI ou tput pins.  \nTable 1. \nParameter  Temperature Test Level  Min  Typ  Max  Unit  \nSYSTEM DYNAMIC PERFORMANCE1       \nSSB Noise Figure at Minimum VGA Attenuation2, 3 Full IV  7.5 9.5 dB \nSSB Noise Figure at Maximum VGA Attenuation2, 3 Full IV  13  dB \nDynamic Range with AGC Enabled2, 3  Full IV 91 95  dB \nIF Input Clip Point at Maximum VGA Attenuation3 Full IV −20  −19   dBm  \nIF Input Clip Point at Minimum VGA Attenuation3 Full IV −32  −31   dBm  \nInput Third -Order Intercept (IIP3)  Full IV −12  −7.0  dBm  \nGain Variation over Temperature  Full IV  0.7 2 dB \nLNA + MIXER        \nMaximum RF and LO Frequency Range Full IV 300 500  MHz  \nLNA Input Impedance  25°C  V  370||1.4   Ω||pF  \nMixer LO Input Resistance  25°C  V  1  kΩ \nLO SYNTHESIZER        \nLO Input Frequency  Full IV 7.75   300 MHz  \nLO Input Amplitude  Full IV 0.3  2.0 V p-p \nFREF Frequency (for Sinusoidal Input Only)  Full IV 8  26 MHz  \nFREF Input Amplitude  Full IV 0.3  3 V p-p \nFREF Slew Rate  Full IV 7.5   V/µs  \nMinimum Charge Pump Current at 5 V4 Full VI  0.67   mA \nMaximum Charge Pump Current at 5 V4 Full VI  5.3  mA \nCharge Pump Output Compliance5 Full VI 0.4  VDDP − 0.4  V \nSynthesizer Resolution  Full IV 6.25    kHz \nCLOCK SYNTHESIZER        \nCLK Input Frequency  Full IV 13  26 MHz  \nCLK Input Amplitude  Full IV 0.3  VDDC  V p-p \nMinimum Charge Pump Output Current4 Full VI  0.67   mA \nMaximum Charge Pump Output Current4 Full VI  5.3  mA \nCharge Pump Output Compliance5 Full VI 0.4  VDDQ − 0.4  V \nSynthesizer Resolution  Full VI 2.2   kHz \nΣ-∆ ADC        \nResolution  Full IV 16  24 Bits \nClock Frequency (f CLK) Full IV 13  26 MHz  \nCenter Frequency  Full V  fCLK/8  MHz  \nPass -Band Gain Variation  Full IV   1.0 dB \nAlias Attenuation  Full IV 80   dB \nGAIN CONTROL        \nProgrammable Gain Step  Full V  16  dB \nAGC Gain Range  Full V  12  dB \nGCP Output Resistance  Full IV 50 72.5  95 kΩ \nAD9864  Data Sheet  \n \nRev. A | Page 4  of 47 Parameter  Temperature Test Level  Min  Typ  Max  Unit  \nOVERALL        \nAnalog Supply Voltage (VDDA, VDDF, VDDI)  Full VI 2.7 3.0 3.6 V \nDigital Supply Voltage (VDDD, VDDC, VDDL)  Full VI 2.7 3.0 3.6 V \nInterface Supply Voltage (VDDH)6 Full VI 1.8  3.6 V \nCharge Pump Supply Voltage (VDDP , VDDQ)  Full VI 2.7 5.0 5.5 V \nTotal Current        \nOperation Mode7 Full VI  17  mA \nStandby  Full VI  0.01   mA \nOPERATING TEMPERATURE RANGE   −40   +85  °C \n \n1 This includes 0.9 dB loss of matching network.  \n2 AGC with DVGA enabled.  \n3 Measured in 10 kHz bandwidth.  \n4 Programmable in 0.67 mA steps.  \n5 Voltage span in which LO (or CLK) charge pump output current is maintained within 5% of nominal value of VDDP/2 (or VDDQ/2).  \n6 VDDH must be less than VDDD + 0.5 V.  \n7 Clock VCO off and additional 0.7 mA with VGA at maximum attenuation.  \n \nData Sheet  AD9864  \n \nRev. A | Page 5  of 47 DIGITAL SPECIFICATIO NS \nVDDI = VDDF = VDDA = VDDC = VDDL = VDDH = 2.7 V to 3.6 V , VDDQ = VDDP = 2.7 V to 5.5 V , f CLK = 18 MSPS, f IF = 109.65  MHz,  \nfLO = 107.4 MHz, f REF = 16.8 MHz, unless otherwise noted. Standard operating mode: VGA at minimum attenuation setting, synthesizers \nin normal (not fast acquire) mode, decimation fact or = 900, 16 -bit digital output, and 10 pF load on SSI output pins.  \nTable 2. \nParameter  Temperature Test  Level  Min  Typ  Max  Unit  \nDECIMATOR        \nDecimation Factor1 Full IV 48  960  \nPass -Band Width  Full V  50%   fCLKOUT  \nPass -Band Gain Variation  Full IV   1.2 dB \nAlias Attenuation  Full IV 88   dBm  \nSPI READ OPERATION (See Figure 30)       \nPC Clock Frequency  Full IV   10 MHz  \nPC Clock Period (t CLK) Full IV 100   ns \nPC Clock High (t HI) Full IV 45   ns \nPC Clock Low (t LOW) Full IV 45   ns \nPC to PD Setup Time (t DS) Full IV 2   ns \nPC to PD Hold Time (t DH) Full IV 2   ns \nPE to PC Setup Time (t S) Full IV 5   ns \nPC to PE Hold Time (t H) Full IV 5   ns \nSPI WRITE OPERATION2 (See Figure 29)       \nPC Clock Frequency  Full IV   10 MHz  \nPC Clock Period (t CLK) Full IV 100   ns \nPC Clock High (t HI) Full IV 45   ns \nPC Clock Low (t LOW) Full IV 45   ns \nPC to PD Setup Time (t DS) Full IV 2   ns \nPC to PD Hold Time (t DH) Full IV 2   ns \nPC to PD (or DOUTB) Data Valid Time (t DV) Full IV 3   ns \nPE to PD Output Valid to Hi gh-Z (t EZ) Full IV  8  ns \nSSI2 (See Figure 33)       \nCLKOUT Frequency  Full IV 0.867   26 MHz  \nCLKOUT Period (t CLK) Full IV 38.4   1153  ns \nCLKOUT Duty Cycle (t HI, tLOW) Full IV 33 50 67 ns \nCLKOUT to FS Valid Time (t V) Full IV −1  +1 ns \nCLKOUT to DOUT Data Valid Time (t DV) Full IV −1  +1 ns \nCMOS LOGIC INPUTS3       \nLogic 1 Voltage (V IH) Full IV 0.7 × VDDH    V \nLogic 0 Voltage (V IL) Full IV   0.3 × VDDH V \nLogic 1 Current (I IH) Full IV  10  µA \nLogic 0 Current (I IL) Full IV  10  µA \nInput Capacitance Full IV  3  pF \nCMOS LOGIC OUTPUTS2, 3, 4       \nLogic 1 Voltage (V OH) Full IV VDDH − 0.2    V \nLogic 0 Voltage (V OL) Full IV   0.2 V \n \n1 Programmable in steps of 48 or 60.  \n2 CMOS output mode with C LOAD = 10 pF and drive strength = 7.  \n3 Absolute maximum and minimum input/output levels are VDDH + 0.3 V and −0.3 V.  \n4 IOL = 1 mA; specification is also dependent on drive strength setting.  \n \nAD9864  Data Sheet  \n \nRev. A | Page 6  of 47 ABSOLUTE MAXIMUM RAT INGS  \nTable 3. AD9864  Absolute Maximum Ratings  \nParameter  With  Respect  To Rating  \nVDDF, VDDA, VDDC, \nVDDD, VDDH, VDDL, \nVDDI  GNDF, GNDA, GNDC, GNDD, GNDH, GNDL, GNDI, GNDS  −0.3 to +4.0  \nVDDF, VDDA, VDDC, \nVDDD, VDDH, VDDL, VDDI  VDDR, VDDA, VDDC, VDDD, VDDH, VDDL, \nVDDI  −4.0 V to +4.0 V  \nVDDP, VDDQ  GNDP, GNDQ  −0.3 V to +6.0 V \nGNDF, GNDA, GNDC, \nGNDD, GNDH, GNDL, \nGNDI, GNDQ, GNDP, \nGNDS  GNDF, GNDA, GNDC, \nGNDD, GNDH, GNDL, \nGNDI, GNDQ, GNDP, \nGNDS  −0.3 V to +0.3 V  \nMXOP, MXON, LOP, LON, \nIFIN, CXIF, CXVL, CXVM  GNDH  −0.3 V to \nVDDI  + 0.3 V \nPC, PD, PE, CLKOUT, \nDOUTA, DOUTB, FS, SYNCB  GNDH  −0.3 V to \nVDDH  + 0.3 V \nIF2N, IF2P, GCP, GCN  GNDF  −0.3 V to \nVDDF  + 0.3 V \nVFEFP, VREGN, RREF  GNDA  −0.3 V to  \nVDDA  + 0.3 V  \nIOUTC  GNDQ  −0.3 V to \nVDDQ  + 0.3 V  \nIOUTL  GNDP  −0.3 V to  \nVDDP + 0.3 V  \nCLKP, CLKN  GNDC  −0.3 V to \nVDDC  + 0.3 V  \nFREF  GNDL  −0.3 V to  \nVDDL + 0.3 V \nMaximum Junction \nTemperature   150°C  \nStorage Temperature   −65°C to +150°C  \nMaximum Lead \nTemperature   300°C  \n Stresses at or above those listed under Absolute Maximum \nRatings may cause permanent damage to the product. This is a stress rating only; functional operation of the product at these \nor any other conditions above those indicated in the operational section of this specification is not implied. Operation beyond the maximum operating conditions for extended periods may affect product reliabilit y. \nTHERMAL RESISTANCE  \nθJA is specified for the worst -case conditions, that is, θJA is \nspecified for device soldered in circuit board for surface -mount \npackages.  \nTable 4. Thermal Resistance  \nPackage Type  θJA Unit  \n48-Lead LFCSP  29.5  °C/W  \n \nESD CAUTION  \n \n \n \n \n \n \n \n \n \n \n \nData Sheet  AD9864  \n \nRev. A | Page 7  of 47 PIN CONFIGURATION AND FUNCTIONAL DESCRIPTIONS \n \nPIN 1\nIDENTIFIER\nTOP VIEW\n(Not to Scale)AD98641 MXOP 36GNDL\n2 MXON\nNOTES\n1. EXPOSED PAD. THE BACKSIDE PADDLE CONTACT IS NOT CONNECTED TO GROUND.\n    A PCB GROUND PAD IS OPTIONAL.35FREF\n3 GNDF 34GNDS\n4 IF2N 33SYNCB\n5 IF2P 32GNDH\n6 VDDF 31FS\n7 GCP 30DOUTB\n8 GCN 29DOUTA\n9 VDDA 28CLKOUT\n10 GNDA 27VDDH\n11 VREFP 26VDDD\n12 VREFN 25PE48VDDI RREF13\nLON CLKP42\n1943LOP GNDC1844CXVL VDDC1745GNDI GNDQ1646CXIF IOUTC1547IFIN VDDQ14\nCXVM CLKN41\n20\nVDDL GNDS40\n2139VDDP GNDD2238IOUTL PC2337GNDP PD24\n04319-0-002 \nFigure 2. 48 -Lead LFCSP Pin Configuration   \n \nTable 5. 48-Lead Lead Frame Chip Scale Package (LFCSP) Pin Function Descriptions  \nPin No.  Mnemonic  Description  \n1 MXOP  Mixer Output, Positive.  \n2 MXON  Mixer Output, Negative.  \n3 GNDF  Ground for Front End of ADC . \n4 IF2N  Second IF Input (to ADC), Negative . \n5 IF2P  Second IF Input  (to ADC), Positive.  \n6 VDDF  Positive Supply for Front End of ADC . \n7 GCP  Filter Capacitor for ADC Full -Scale Control . \n8 GCN  Full-Scale Control Ground . \n9 VDDA  Positive Supply for ADC Back End . \n10 GNDA  Ground for ADC Back End . \n11 VREFP  Voltage Reference, Positive.  \n12 VREFN Voltage Reference, Negative . \n13 RREF  Reference Resistor: Requires 100 kΩ to GNDA . \n14 VDDQ  Positive Supply for Clock Synthesizer . \n15 IOUTC  Clock Synth Charge Pump Out Current . \n16 GNDQ  Ground for Clock Synthesizer Charge Pump . \n17 VDDC  Positive Supply for Clock Synthesizer . \n18 GNDC  Ground for Clock Synthesizer . \n19 CLKP  Sampling Clock Input/Clock VCO Tank, Positive . \n20 CLKN Sampling Clock Input/Clock VCO Tank, Negative . \n21 GNDS  Substrate Ground.  \n22 GNDD  Ground for Digital Functions . \n23 PC Clock Input for SPI Port . \n24 PD Data I/O for SPI Port . \n25 PE Enable Input for SPI Port . \n26 VDDD Positive Supply for Internal Digital . \n27 VDDH Positive Supply for Digital Interface . \n28 CLKOUT  Clock Output for SSI Port . \n29 DOUTA  Data Output for SSI Port . \n30 DOUTB  Data Output for SSI Port (Inverted) or SPI Port . \n31 FS Frame Sync for SSI Port . \nAD9864  Data Sheet  \n \nRev. A | Page 8  of 47 Pin No.  Mnemonic  Description  \n32 GNDH  Ground for Digital Interface . \n33 SYNCB  Resets SSI and Decimator Counters; Active Low. Connect to VDDH if unused.  \n34 GNDS  Substrate Ground.  \n35 FREF  Reference Frequency Input for Both Synthesizers . \n36 GNDL  Ground for LO Synthesizer . \n37 GNDP  Ground for LO Synthesizer Charge Pump . \n38 IOUTL  LO Synthesizer Charge Pump Out Current . \n39 VDDP Positive Supply for LO Synthesizer Charge Pump . \n40 VDDL  Positive Supply for LO Synthesizer.  \n41 CXVM  External Filter Capacitor; DC Output of LNA . \n42 LON  LO Input to Mixer and LO Synthesizer, Negative.  \n43 LOP  LO Input to Mixer and LO Synthesizer, Positive.  \n44 CXVL  External Bypass Capacitor for LNA Power Supply . \n45 GNDI  Ground for Mixer and LNA . \n46 CXIF  External Capacitor for Mixer V -I Converter Bias . \n47 IFIN  First IF Input (to LNA) . \n48 VDDI Positive Supply for LNA and Mixer.  \n EPAD  Exposed Pad.  The backside paddle contact is not connected  to ground. A PCB ground \npad is optional.  \n \n \n \nData Sheet  AD9864  \n \nRev. A | Page 9  of 47 TYPICAL PERFORMANCE CHARACTERISTICS \nVDDI = VDDF = VDDA = VDDC = VDDL = VDDH = VDDx , VDDQ = VDDP = 2.7 V to 5.5 V , f CLK = 18 MSPS, f IF = 109.65  MHz, \nfLO = 107.4 MHz, f REF = 16.8 MHz, T A=25 Co, LO and CLK synthesizer disabled, 16 -bit data with AGC and DVGA enabled, unless \notherwise noted.  \nVDDx (V)NF  (dB)9.5\n2.7 3.0 3.3 3.66.0+85°C\n+25°C\n–40°C\n6.57.07.58.08.59.0\n04319-0-003 \nFigure 3. SSB Noise Figure vs. Supply  \n \nVDDx (V)DR (dB)98\n2.7 3.0 3.3 3.69297\n96\n95\n94\n93–40°C\n+85°C+25°C\n04319-0-004 \nFigure 4. Dynamic Range (DR)  vs. Supply  \n \nVDDx (V)INPUT CLIP POINT (dBm)–29.5\n2.7 3.0 3.3 3.6+85°C\n+25°C–30.0\n–30.5\n–31.0\n–31.5\n–32.0–40°C\n04319-0-005 \nFigure 5. Minimum VGA Attenuation Clip Point vs. Supply  \n VDDx (V)IIP3  (dBm)0\n2.7 3.0 3.3 3.6–12+85°C\n+25°C\n–40°C\n–10–8–6–4–2\n04319-0-006 \nFigure 6. IIP3 vs. Supply  \n \nVDDx (V)INPUT CLIP  POINT (dBm)–17.5\n2.7 3.0 3.3 3.6–40°C+85°C\n+25°C–18.0\n–18.5\n–19.0\n–19.5\n–20.0–20.5\n04319-0-007 \nFigure 7. Maximum VGA Attenuation Clip Point vs. Supply  \n \nLO DRIVE (dBm)GAIN VARIATION (dB)0.1\n–20 –14 –8 –50\n–0.2\n–0.4\n–0.6\n–0.8–0.1\n–0.3\n–0.5\n–0.7\n–11 –17\n04319-0-008 \nFigure 8. Normalized Gain Variation vs. LO Drive (VDDx = 3.0 V)  \n \n \nAD9864  Data Sheet  \n \nRev. A | Page 10 of 47 VDDI = VDDF = VDDA = VDDC = VDDL = VDDH = 3.0 V , VDDQ = VDDP = 2.7 V to 5.5 V , f CLK = 18 MSPS, f IF = 109.65  MHz, f LO = \n107.4 MHz, f REF = 16.8 MHz, T A=25 Co, LO and CLK synthesizer disabled , unless otherwise noted.  \nLO DRIVE (dBm)NOISE FIGURE (dBc)9.0\n–20 –10 0 58.6\n8.2\n7.8\n7.4\n7.08.4\n8.0\n7.6\n7.2\n–5 –15NF\nIMD8.8\nIMD WITH IFIN = –36 dBm (dBc)0\n–20\n–40\n–60\n–80–30\n–50\n–70–10\n04319-0-009 \nFigure 9. Noise Figure and IMD vs. LO Drive (VDDx = 3.0 V)  \n \nIFIN (dBm)dBFS0\n–30–14ADC DOES NOT GO INTO\nHARD COMPRESSION\n–28 –26 –24 –22 –20 –18 –14–2\n–4\n–6\n–8\n–10\n–122.7V3.0V3.3V3.6V\n–16\n04319-0-010 \nFigure 10. Gain Compression vs. IFIN  \n \nCHANNEL BANDWIDTH (kHz)NOISE FIGURE (dB)10.0\n107.5\n1000 1009.5\n9.0\n8.5\n8.0\n24-BIT\nI/Q DATA16-BIT\nI/Q DATA16-BIT\nI/Q DATA WITH\nDVGA ENABLED\n04319-0-011 \nFigure 11. Noise Figure vs. Bandwidth  \n(Minimum Attenuation, f CLK = 13 MSPS)  IFIN (dBm)dBm–12\n–36 –33 –30 –27 –24 –21 –18 –15 –12 –9 –6 –3 –0–18\n–24\n–30\n–36–15\n–21\n–27\n–33\n04319-0-012 \nFigure 12. Gain Compression vs. IFIN with 16 dB LNA Attenu ator Enabled  \n \nIFIN (dBm)IMD (dBm)–55\n–109–61\n–67\n–73\n–85\n–91\n–103\n–51 –48 –45 –42 –39 –36 –33 –30PIN\n2.7V\n3.0V\n3.6V3.3V\n–115–97–79\nPIN (dBFS)–15\n–42–18\n–21\n–24\n–30\n–33\n–39\n–45–36–27\n04319 0 013 \nFigure 13. IMD vs. IFIN  \n \nCHANNEL BANDWIDTH (kHz)NOISE FIGURE (dB)10.0\n107.5\n1000 1009.5\n9.0\n8.5\n8.0\n24-BIT\nDATA16-BIT DATA\nWITH DVGA ENABLED\n04319-0-01416-BIT\nDATA\n \nFigure 14. Noise Figure vs. Bandwidth  \n(Minimum Attenuation, f CLK = 18 MSPS)  \n \n \nData Sheet  AD9864  \n \nRev. A | Page 11 of 47 VDDI = VDDF = VDDA = VDDC = VDDL = VDDH = 3.0 V , VDDQ = VDDP = 2.7 V to 5.5 V , f CLK = 18 MSPS, f IF = 109.65  MHz,  fLO = \n107.4 MHz, f REF = 16.8 MHz, T A=25 Co, LO and CLK Synthesizer Disabled,  unless otherwise noted.  \nCHANNEL BANDWIDTH (kHz)NOISE FIGURE (dB)10.0\n107.5\n1000 1009.5\n9.0\n8.5\n8.024-BIT\nDATA16-BIT\nDATA16-BIT DATA\nWITH DVGA ENABLED\n04319-0-015 \nFigure 15. Noise Figure vs. Bandwidth  \n(Minimum Attenuation, f CLK = 26 MSPS)  \nVGA ATTENUATION (dB)NOISE FIGURE (dB)14\n07\n12 6 9 313\n12\n11\n10\n9\n8BW = 15kHz\n(K = 0, M = 9)BW = 75kHz\n(K = 0, M = 1)\nBW = 50kHz\n(K = 0, M = 2)\n04319-0-016 \nFigure 16. Noise Figure vs. VGA Attenuation (f CLK = 18 MSPS)  \n \nIFIN (dB)IMD (dBFS)\n–45–130–30\n–40\n–50\n–60\n–70\n–80\n–90\n–100\n–110\n–120\n–42 –39 –36 –33 –30 –27 –24PIN\nPIN (dBFS)–5\n–30–10\n–15\n–20\n–25\n–40–35\n–45\n04319-0-017IMD\n \nFigure 17. IMD vs. IFIN (f CLK = 13 MSPS)  \n VGA ATTENUATION (dB)NOISE FIGURE (dB)11.5\n07.0\n12 6 9 311.0\n10.5\n10.0\n9.5\n9.0\n8.5\n8.0\n7.5BW = 6.78kHz\n(K = 0, M = 15)BW = 12.04kHz\n(K = 0, M = 8)BW = 27.08kHz\n(K = 0, M = 3)\n04319-0-018 \nFigure 18. Noise Figure vs. VGA Attenuation (f CLK = 13 MSPS)  \n \nVGA ATTENU ATION (dB)NOISE FIGURE (dB)14\n07\n12 6 9 313\n12\n11\n10\n98BW = 27.08kHz\n(K = 1, M = 9)BW = 90.28kHz\n(K = 1, M = 2)BW = 135.42kHz\n(K = 1, M = 1)\n04319-0-019 \nFigure 19. Noise Figure vs. VGA Attenuation (f CLK = 26 MSPS)  \n \nIFIN (dBm)IMD (dBFS)\n–45–130–30\n–40\n–50\n–60\n–70\n–80\n–90\n–100\n–110\n–120\n–42 –39 –36 –33 –30 –27 –24PIN\nPIN (dBFS)–5\n–30–10\n–15\n–20\n–25\n–40–35\n–45\n04319-0-020IMD\n \nFigure 20. IMD vs. IFIN (f CLK = 18 MSPS)  \n \n \n \nAD9864  Data Sheet  \n \nRev. A | Page 12 of 47 VDDI = VDDF = VDDA = VDDC = VDDL = VDDH = 3.0 V , VDDQ = VDDP = 2.7 V to 5.5 V , f CLK = 18 MSPS, f IF = 109.65  MHz, f LO = \n107.4 MHz, f REF = 16.8 MHz, T A=25 Co, LO and CLK synthesizer disabled, 16 -bit data with AGC and DVGA enabled, unless otherwise noted.  \nIFIN (dBm)IMD (dBFS)\n–45–130–30\n–40\n–50\n–60\n–70\n–80\n–90\n–100\n–110\n–120\n–42 –39 –36 –33 –30 –27 –24PIN\nPIN (dBFS)–5\n–30–10\n–15\n–20\n–25\n–40–35\n–45\n04319-0-021IMD\n \nFigure 21. IMD vs. IFIN (f CLK = 26 MSPS)  \n \nFREQUENC Y (MHz)NOISE FIGURE (dB)13\n0612\n11\n10\n9\n8\n7\n50 500 100 150 200 250 300 350 400 450\n04319-0-02216-BIT WITH DVG A\n24-BIT\n \nFigure 22. Noise Figure vs. Frequency  \n (Minimum Attenuation, f CLK = 26 MSPS, BW = 10 kHz)  \nFREQUENC Y (MHz)IIP3 (dBm)0\n0–10–2\n–4\n–6\n–8\n50 500 100 150 200 250 300 350 400 450\n04319-0-023 \nFigure 23. Input IIP3 vs. Frequency (f CLK = 26 MSPS)  \n FREQUENC Y (MHz)NOISE FIGURE (dB)13\n0612\n11\n10\n9\n8\n7\n50 500 100 150 200 250 300 350 400 45024-BIT16-BIT WITH DVG A\n04319-0-024 \nFigure 24. Noise Figure vs. Frequency  \n(Minimum Attenuation, f CLK = 18 MSPS, BW = 10 kHz)  \nFREQUENCY (MHz)IIP3 (dBm)0\n0–2\n–4\n–6\n–8\n–10\n50 500 100 150 200 250 300 350 400 450\n04319-0-025 \nFigure 25. Input IIP3 vs. Fre quency (f CLK = 18 MSPS)  \n \nINTERFERER LEVEL (dBm)NOISE FIGURE (dBc)20.0\n–558.018.5\n15.5\n12.5\n11.0\n9.5\n–5 –10NOISE FIGUREAGC\n17.0\n14.0\n–15 –20 –25 –30 –35 –40 –45 –50\nMEAN AGC ATTN VALUE128\n0112\n80\n48\n32\n1696\n64\n04319-0-026 \nFigure 26. Noise Figure vs. Interferer Level (16 -Bit Data,  \nBW = 12.5 kHz, AGCR = 1, f INTERFERER  = f IF + 110 kHz)  \n \n \nData Sheet  AD9864  \n \nRev. A | Page 13 of 47 VDDI = VDDF = VDDA = VDDC = VDDL = VDDH = 3.0 V , VDDQ =  VDDP = 2.7 V to 5.5 V , f CLK = 18 MSPS, f IF = 109.65  MHz, f LO = \n107.4 MHz, f REF = 16.8 MHz, T A=25 Co, LO and CLK Synthesizer Disabled, AGC enabled, unless otherwise noted. \nINTERFERER LEVEL (dBm)NOISE FIGURE (dBc)16\n–50815\n13\n11\n10\n9\n–10 –15NOISE FIGUREAGC ATTN\n14\n12\n–20 –25 –30 –35 –40 –45\nMEAN AGC ATTN VALUE256\n0224\n160\n96\n64\n32192\n128\n04319-0-027 \nFigure 27. Noise Figure vs. I nterferer Level (16 -Bit Data with DVGA,  \nBW = 12.5 kHz, AGCR = 1, f INTERFERER  = f IF + 110 kHz)  INTERFERER LEVEL (dBm)NOISE FIGURE (dBc)16\n–65815\n13\n11\n10\n9\n–5 –15NOISE FIGUREAGC ATTN\n14\n12\n–25 –35 –45 –55\nMEAN AGC ATTN VALUE128\n03296\n64\n04319-0-028 \nFigure 28. Noise Figure vs. Interferer Level (24 -Bit Data,  \nBW = 12.5 kHz, AGCR = 1, f INTERFERER  = f IF + 110 kHz)  \n \nAD9864  Data Sheet  \n \nRev. A | Page 14 of 47 TERMINOLOGY  \nSingle Sideband Noise Figure (SSB NF)  \nNoise figure (NF) is defined as the degradation in SNR \nperformance (in dB) of an IF input signal after it passes through a component or system. It can be expressed with the equation  \nNoise Figure  = 10 × log( SNR\nIN/SNR OUT) \nThe term SSB is applicable for heterodyne systems containing a mixer. It indicates that the desired signal spectrum resides on only  \none side of the LO frequency (that is, single sideb and); therefore,  \na noiseless mixer has a noise figure of 3 dB.  \nThe SSB noise figure of the AD9864 is determined by the equation  \nSSB NF  = P\nIN − [10 × log( BW)] − (−174 dBm/Hz) − SNR  \nwhere:  \nPIN is the input power of an unmodulated carrier.  \nBW is the noise measurement bandwidth.  \n−174 dBm/Hz  is the thermal noise floor at 293 K. \nSNR is the measured signal -to-noise ratio in dB of the AD9864. \nNote that P IN is set to −85 dBm to minimize any degradation in \nmeasured SNR due to phase noise from the RF and LO signal generators. The IF frequency, CLK frequency, and decimation factors are selected to minimize any spurious components \nfalling within t he measurement bandwidth. Note also that a \nbandwidth of 10 kHz is used for the data sheet specification. All \nreferences to noise figures within this data sheet imply single \nsideband noise figure.  \nInput Third -Order Intercept (IIP3)  \nIIP3 is a figure of merit  used to determine the susceptibility of a \ncomponent or system to intermodulation distortion (IMD) from  \nits third -order nonlinearities. Two unmodulated carriers at a \nspecified frequency relationship ( f1 and f 2) are injected into a \nnonlinear system exhibiti ng third -order nonlinearities producing  \nIMD components at 2 f1 − f 2 and 2 f2 − f1. IIP3 graphically \nrepresents the extrapolated intersection of the carrier’s input \npower with the third -order IMD component when plotted in dB. \nThe difference in power ( D in dBc) between the two carriers, and \nthe resulting third -order IMD components can be determined \nfrom the equation  \nD = 2 × ( IIP3 − P\nIN) Dynamic Range (DR)  \nDynamic range is the measure of a small target input signal \n(PTARGET ) in the presence of a large unw anted interferer signal \n(PINTER). Typically, the large signal causes some unwanted \ncharacteristic of the component or system to degrade, thus making it unable to detect the smaller target signal correctly. For the AD9864, it is often a degradation in noise figure at \nincreased VGA attenuation settings that limits its dynamic range.  \nThe test method for the AD9864 is as follows. The small tar get \nsignal (an unmodulated carrier) is input at the center of the IF frequency, and its power level ( P\nTARGET ) is adjusted to achieve an \nSNR TARGET  of 6 dB. The power of the signal is then increased by \n3 dB prior to injecting the interferer signal. The offset frequency \nof the interferer signal is selected so that aliases produced by the response of the decimation filter , as well as phase noise from \nthe LO (due to reciprocal mixing) , do not fall back within the \nmeasurement bandwidth. For this reason, an offset  of 110  kHz \nwas selected. The interferer signal (also an unmodulated carrier)  \nis then injected into the input and its power level is increased to the point ( P\nINTER) where the target signal SNR is reduced to 6  dB. \nThe dynamic range is determined with the equation  \nDR = PINTER − PTARGET  + SNR TARGET  \nNote that the AGC of the AD9864 is enabled for this test.  \nIF Input Clip Point  \nThe IF input clip point is define d as the input power that results \nin a digital output level 2 dB below full scale. Unlike other linear components that typically exhibit a soft compression (characterized by its 1 dB compression point), an ADC exhibits a hard compression when its input sig nal exceeds its rated \nmaximum input signal range. For the AD9864, which contains \na Σ-∆ ADC, hard compression must be avoided because it \ncauses severe SNR degradation.  \n \n \nData Sheet  AD9864  \n \nRev. A | Page 15 of 47 SERIAL PERIPHERAL INTERFACE (SPI)  \nThe SPI is a bidirectional serial port. It is used to load the configuration information into the registers listed in Table 6, as well as to read \nback their contents. Table 6 provides a list of the registers that can be programmed through the SPI port. Addresses and default values are \ngiven in hexadecimal form.  \nTable 6. SPI Address Map \nAddress \n(Hex)  Bit(s)  Width  Default  \nValue  Name  Description  \nPower Control Registers  \n0x00  [7:0]  8 0xFF  STBY  Standby control bits (REF , LO, CKO, CK, GC, LNAMX, unused, and ADC). \nDefault is power -up condition of standby.  \n0x01  [3:2]  2 0x00  CKOB  CK oscillator bias (0 = 0.25 mA, 1 = 0.35 mA, 2 = 0.40 mA, 3 = 0.65  mA).  \n [1:0]  2 0x00  ADCB  Do not use.  \n0x02  [7:0]  8 0x00  TEST Factory  test mode. Do not use.  \nAGC  \n0x03  7 1 0 AT TEN  Apply 16 dB attenuation in the front end.  \n [6:0]  7 0x00  AGCG  [14:8]  AGC attenuation setting (7 MSBs of a 15 -bit unsigned word).  \n0x04  [7:0]  8 0x00  AGCG [7:0]  AGC attenuation setting (8 LSBs of a 15 -bit unsigned word).  \n0x05  [7:4]  4 0x00  AGCA  AGC attack bandwidth setting. Default yields 50 Hz loop bandwidth.  \n [3:0]  4 0x00  AGCD  AGC decay time setting. Default is decay time = attack time.  \n0x06  7 1 0 AGCV  Enable digital VGA to increase AGC range by 12 dB. \n [6:4]  3 0x00  AGCO  AGC overload update setting. Default is slowest update.  \n 3 1 0 AGCF  Fast AGC (minimizes resistance seen between GCP and GCN).  \n [2:0]  3 0x00  AGCR  AGC enable/reference level (disabled, 3 dB, 6 dB, 9 dB, 12 dB, 15  dB \nbelow clip).  \nDecimation Factor  \n0x07  [7:5]  3  Unused   \n 4 1 0 K Decimation factor = 60 × ( M + 1), if K = 0; 48 × ( M + 1), if K  = 1. \n [3:0]  4 0x04  M Default is decimate -by-300.  \nLO Synthesizer  \n0x08  [5:0]  6 0x00  LOR [13:8]  Reference frequency divider (6 MSBs of a 14 -bit word).  \n0x09  [7:0]  8 0x38  LOR [7:0] Reference frequency divisor (8 LSBs of a 14 -bit word). Default (56) yields \n300 kHz from f REF = 16.8 MHz.  \n0x0A  [7:5]  3 0x05  LOA  A counter (prescaler control counter).  \n [4:0]  5 0x00  LOB [12:8]  B counter MSB (5 MSB  of a 13 -bit word). Default LOA and LOB values \nyield 300 kHz from 73.35 MHz to 2.25 MHz.  \n0x0B  [7:0]  8 0x1D  LOB [7:0] B counter LSB (8 LSB of a 13-bit word).  \n0x0C  6 1 0 LOF  Enable fast acquire.  \n 5 1 0 LOINV  Invert charge pump (0 = source current to increase VCO frequency). \n [4:2]  3 0x00  LOI Charge pump current in normal operation. I PUMP = (LOI +1) × 0.625 mA.  \n [1:0]  2 0x03  LOTM  Manual control of LO charge pump (0 = off, 1 = up, 2 = down, and 3 = normal).  \n0x0D  [5:0]  6 0x00  LOFA [13:8]  LO fast acquire time unit (6 MSBs of a 14 -bit word).  \n0x0E  [7:0]  8 0x04  LOFA [7:0] LO fast acquire time unit (8 LSBs of a 14 -bit word).  \nClock Synthesizer  \n0x10  [5:0]  6 0x00  CKR [13:8]  Reference frequency divisor (6 MSBs of a 14 -bit word).  \n0x11  [7:0]  8 0x38  CKR [7:0] Reference frequency divisor (8 LSBs of a 14 -bit word). Default yields \n300 kHz from f REF = 16.8 MHz; minimum = 3, maximum = 16383.  \n0x12  [4:0]  5 0x00  CKN [12:8]  Synthesized frequency divisor (5 MSBs of a 13 -bit word).  \n0x13  [7:0]  8 0x3C  CKN [7:0] Synthesized frequency divisor (8 LSBs of a 13 -bit word). Default yields \n300 kHz from 18 MHz; minimum = 3, maximum = 8191.  \nAD9864  Data Sheet  \n \nRev. A | Page 16 of 47 Address \n(Hex)  Bit(s)  Width  Default  \nValue  Name  Description  \n0x14  6 1 0 CKF  Enable fast acquire.  \n 5 1 0 CKINV  Invert charge pump (0 = source current to increase VCO frequency). \n [4:2]  3 0x00  CKI Charge pump current in normal operation. I PUMP = (CKI + 1) × 0.625 mA.  \n [1:0]  2 0x03  CKTM  Manual control of CLK charge pump ( 0 = off, 1  = up, 2  = down, and  \n3 = normal).  \n0x15  [5:0]  6 0x00  CKFA [13:8 ] CK fast acquire time unit (6 LSBs of a 14 -bit word).  \n0x16  [7:0]  8 0x04  CKFA [7:0] CK fast acquire time unit (8 LSBs of a 14 -bit word).  \nSSI Control  \n0x18  [7:0]  8 0x12  SSICRA  SSI Control Register A. See the SSI Control Registers  section. Default is \nFS and CLKOUT three-stated.  \n0x19  [7:0]  8 0x07  SSICRB  SSI Control Register B. See the SSI Control Registers  section (16 -bit data, \nmaximum drive strength).  \n0x1A  [3:0]  4 0x01  SSIORD  Output rate divisor. f CLKOUT  = f CLK/SSIORD.  \nADC Tuning  \n0x1C  1 1 0 TUNE_LC  Perform tuning on LC portion of the ADC (cleared when done).  \n 0 1 0 TUNE_RC  Perform tuning on RC portion of the ADC (cleared when done).  \n0x1D  [3:0]  3 0x00  CAPL1 [2:0] Coarse capacitance setting of LC tank (LSB is 25 pF , differential).  \n0x1E  [5:0]  6 0x00  CAPL0 [5:0] Fine capacitance setting of LC tank (LSB is 0.4 pF, differential).  \n0x1F  [7:0]  8 0x00  CAPR  Capacitance setting for RC resonator (64 LSB of fixed capacitance).  \nTest Registers and SPI Port Read Enable  \n0x37  [7:0]  8 0x00  TEST  Factory test mode.  Do not use.  \n0x38  [7:1]  7 0x00  TEST Factory test mode. Do not use.  \n 0 1 0 DACCR  Manual feedback DAC control  \n0x39  [7:0]  8 0x00  DACDATA  Feedback DAC data setting in manual mode.  \n0x3A  [7:4]  4 0x00  TEST Factory test mode. Do not use.  \n 3 1 0 SPIREN  Enable read from SPI port.  \n [2:0]  3 0x00  TEST Factory test mode. Do not use.  \n0x3B  [7:4]  4 0x00  TEST Factory test mode. Do not use.  \n 3 1 0 TRI Three -state DOUTB.  \n [2:0]  3 0x00  TEST Factory test mode. Do not use.  \n0x3C to \n0x3D  [7:0]  8 0x00  TEST Factory test mode. Do not use.  \n0x3E  7 1 0 TEST Factory test mode. Do not use.  \n 6 1 0 OVL  ADC overload detector.  \n [5:3]  3 0 TEST Factory test mode. Do not use.  \n 2 2 0 RC_Q  RC Q enhancement.  \n 1 1 0 RC_BYP  Bypass RC resonator.  \n 0 1 0 SC_BYP  Bypass SC resonators.  \n0x3F  [7:0]  8 Subject \nto change  ID Revision ID (read -only). A write of 0x99 to this register is equivalent to a \npower -on reset.  \n \nData Sheet  AD9864  \n \nRev. A | Page 17 of 47 THEORY OF OPERATION \nINTRODUCTION  \nThe AD9864 is a general -purpose, narrow -band IF subsystem \nthat digitizes a low level, 10 MHz to 300 MHz IF input with a \nsignal bandwidth ranging from 6.8 kHz to 270 kHz. The signal \nchain of the AD9864 consists of an LNA, a mixer, a band -pass \nΣ-∆ ADC, and a decimation filter with programmable \ndecimation factor.  \nThe input LNA is a fixed gain block with an input impedance of \napproximately 370 Ω||1.4 pF. The LNA  input is single -ended \nand self biasing, allo wing the input IF to be ac -coupled. The \nLNA can be disabled through the serial interface, providing a \nfixed 16 dB attenuation to the input signal.  \nThe LNA drives the input port of a Gilbert -type active mixer. \nThe mixer LO port is driven by the on -chip LO buffer, which can \nbe driven externally, single- ended , or differential . The LO buffer \ninputs are self biasing and allow the LO input to be ac -coupled. \nThe open -collector outputs of the mixer drive an external \nresonant tank consisting of a differential LC network tuned to \nthe IF of the band -pass Σ-∆ ADC.  \nThe external differential LC tank forms the resonato r for the \nfirst stage of the band -pass Σ-∆ ADC. The tank LC values must \nbe selected for a center frequency of f CLK/8, where f CLK is the \nsample rate of the ADC. The f CLK/8 frequency is the IF digitized \nby the band -pass Σ-∆ ADC. On -chip calibration allows \nstandard tolerance inductor and capacitor values. The \ncalibration is typically performed once at power -up.  \nThe ADC contains a sixth -order, multibit band -pass Σ-∆ \nmodulator that achieves very high instantaneous dynamic range over a narrow frequency band cent ered at f\nCLK/8. The modulator \noutput is quadrature mixed to baseband and filtered by three cascaded linear phase FIR filters to remove out -of-band noise.  \nThe first FIR filter is a fixed, decimate by 12, using a fourth -\norder comb filter. The second FIR fil ter also uses a fourth -order \ncomb filter with programmable decimation from 1 to 16. The third FIR stage is programmable for decimation of either 4 or 5. The cascaded decimation factor is programmable from 48 to 960.  \nThe decimation filter data is output via  the synchronous serial \ninterface (SSI) of the chip.  \nAdditional functionality built into the AD9864 includes LO and \nclock synthesizers, programmable AGC, and a flexible synchronous serial interfa ce for output data.  \nThe LO synthesizer is a programmable  phase -locked loop ( PLL) \nconsisting of a low noise phase frequency detector (PFD), a variable output current charge pump (CP), a 14 -bit reference \ndivider, A and B counters, and a dual modulus prescale r. The \nuser only needs to add an appropriate loop filter and VCO for complete operation.  \nThe clock synthesizer is equivalent to the LO synthesizer with \nthe following differences:  \n• It does not include the prescaler or A counter.  \n• It includes a negative resistance core used for VCO \ngeneration.  \nThe AD9864 contains both a variable gain amplifier (VGA) and \na digital VGA (DVGA). Both of these can operate manually or \nautomatically. In manual mode, the  gain for each is programmed \nthrough the SPI. In automatic gain control mode, the gains are adjusted automatically to ensure that the ADC does not clip and \nthat the rms output level of the ADC is equal to a programmable  \nreference level.  \nThe VGA has 12 dB o f attenuation range and is implemented by \nadjusting the ADC full -scale reference level. The DVGA gain is \nimplemented by scaling the output of the decimation filter. The \nDVGA is most useful in extending the dynamic range in narrow -\nband applications requirin g 16-bit I and Q data format.  \nThe SSI provides a programmable frame structure, allowing 24 -bit \nor 16 -bit I and Q data and flexibility by including attenuation and  \nRSSI data if required.  \n \nAD9864  Data Sheet  \n \nRev. A | Page 18 of 47 SERIAL PORT INTERFAC E (SPI)  \nThe serial port of the AD9864 has 3 -wire or 4 -wire SPI capability,  \nallowing read/write access to all registers that configure the internal \nparameters of the device. The default 3 -wire serial communication  \nport consists of a clock (PC), peripheral enable (PE), and \nbidirectional data (PD) signal. The inputs to PC, PE, and PD \ncontain a Schmitt trigger with a nominal hysteresis of 0.4  V \ncentered about the digital interface supply, that is, VDDH/2.  \nA 4-wire SPI i nterface can be enabled by setting the MSB of the \nSSICRB register (Register 0x19, Bit 7) and setting Register  0x3A \nto 0x00, resulting in the output data appearing on only the DOUTB pin with the PD pin functioning as an input pin only. Note that because  the default power -up state sets DOUTB low, \nbus contention is possible for systems sharing the SPI output line. To avoid any bus contention, the DOUTB pin can be three -\nstated by setting the fourth control bit in the three -state bit \n(Register 0x3B, Bit 3). This bit can then be toggled to gain access to the shared SPI output line.  \nAn 8 -bit instruction header must accompany each read and \nwrite SPI operation. Only the write operation supports an auto -\nincrement mode, which allows the entire chip to be configured  \nin a single write operation. The instruction header is shown in Table 7. It includes a read/not -write indicator bit, six address \nbits, and a Don’t Care bit. The data bi ts immediately follow the \ninstruction header for both read and write operations. Note that the address and data are always given MSB first.  \nTable 7. Instruction Header Information  \nMSB        LSB \nI7 I6 I5 I4 I3 I2 I1 I0 \nR/W  A5 A4 A3 A2 A1 A0 X1 \n \n1 X = don’t care.  \n \nFigure 29 illustrates the timing requirements for a write \noperation to the SPI port. After the peripheral enable (PE) signal goes low, data (PD) pertaining to the instruction header is read on the rising edges of the clock (PC). To initiate a write \noperation, the r ead/not -write bit is set low. After the instruction \nheader is read, the eight data bits pertaining to the specified register are shifted into the data pin (PD) on the rising edges of the next eight clock cycles. PE stays low during the operation \nand goes h igh at the end of the transfer. If PE rises before the \neight clock cycles have passed, the operation is aborted. If PE stays low for an additional eight clock cycles, the destination address is incremented and another eight bits of data are shifted in. Aga in, if PE rises early, the current byte is ignored. By using \nthis implicit addressing mode, the chip can be configured with a single write operation. Registers identified as being subject to \nfrequent updates, namely those associated with power control \nand AGC operation, have been assigned adjacent addresses to \nminimize the time required to update them. Note that multibyte registers are big endian (the most significant byte has the lower \naddress) and are updated when a write to the least significant \nbyte occ urs. \nFigure 30 and Figure 31 illustrates the timing for 3 -wire and  \n4-wire SPI r ead operations. Although the AD9864 does not \nrequire read access for proper operation, it is often useful in the product development phase or for system aut hentication. Note \nthat the read back enab le bit (Register 0x3A, Bit 3) must be set \nfor a read operation with a 3 -wire SPI interface. For 4 -wire SPI \noperation, this bit remains low (Register 0x3A = 0x00) but DOUTB is enabled via the SSICRB register (Register 0x19, Bit  7). \nNote that for the 4 -wire SPI interface, the eight data bits appear \non the DOUTB pin with the same timing relationship as those appearing at PD for 3 -wire SPI interface case.  \nAfter the peripheral enable (PE) signal goes low, data (PD) pertaining to the instruction header is read on  the rising edges \nof the clock (PC). A read operation occurs if the read/not -write \nindicator is set high. After the address bits of the instruction header are read, the eight data bits pertaining to the specified register are shifted out of the data pin (P D) on the falling edges \nof the next eight clock cycles. After the last data bit is shifted out, the user must  return PE high, causing PD to become three -\nstated (for 3 -wire case) and return to its normal status as an \ninput pin. Since the auto -increment mode  is not supported for \nread operations, an instruction header is required for each register read operation and PE must return high before initiating the next read operation.  \n \nPE\nPC\nPDtH\ntDStHItS\ntDHtLOWtCLK\nR/WA5 A4 A0 D7 D6 D1 D0DON'T\nCARE\n04319-0-029 \nFigure 29. SPI Write Operation Timing  \n \nData Sheet  AD9864  \n \nRev. A | Page 19 of 47 PE\nPC\nPDDON'T\nCARED1 D0 D6 D7 R/W A5 A1 A0tS\ntHItLOW\ntDS\ntDHtDV tEZtCLK\n04319-0-130 \nFigure 30. 3 -Wire SPI Read Operation Timing  \n \nTPE\nPC\nPD\nDON'T\nCAREDON'T\nCAREDON'T\nCAREDON'T\nCAREDON'T\nCAREDON'T\nCARE\nDON'T\nCAREDOUTB D1 D0 D6 D7R/W A5 A1 A0tS\ntHItLOW\ntDS\ntDHtDVtCLK\n04319-0-030 \nFigure 31. 4 -Wire SPI Read Operation Timing  \n \nPOWER -ON RESET  \nThe SPI registers are automatically set to their default settings \nupon power -up when the VDDD supply crosses a threshold. This \nensures that the AD9864 is in a known state and placed in stand by \nfor minimal power consumption.  In the unlikely event that the \nSPI registers were not reset to their default settings, an equivalent \nsoftware reset by writing 0x99 to Register  0x3F can be used as the \nfirst SPI write command to provide additional assurance.  \nSYNCHRONOUS SERIAL I NTERFACE (SSI)  \nThe AD9864 provides a high degree of programmability of its \nSSI output data format, control signals, and timing parameters \nto accommodate various digital interfaces. In a 3 -wire digital \ninterface, the AD9864 provides a frame sync signal (FS), a clock \noutput (CLKOUT), and a serial data stream (DOUTA) signal to \nthe host device. In a 2 -wire interface, the fr ame sync information  \nis embedded into the data stream, thus only CLKOUT and \nDOUTA output signals are provided to the host device. The SSI control registers are SSICRA, SSICRB, and SSIORD. Table 8 to \nTable 13 show the bit fields associated with these registers.  \nThe primary output of the AD9864 is the converted I and Q \ndemodulated signal available from the SSI port as a serial bit stream contained within a frame. The output frame rate is equal to the modulator clock frequency (f\nCLK) divided by the digital \nfilter’s decimation factor that is programmed in the Decimator \nRegister (0x07). The bit stream consists of an I word followed \nby a Q word, where each word is either 24 bits or 16 bits long \nand is given MSB first in twos complement form. Two optional bytes may also be included  within the SSI frame following the Q \nword. One byte contains the AGC attenuation and the other byte contains both a count of modulator reset events and an estimate of the received signal amplitude (relative to full scale of the AD9864 ADC). Figure 32 illustrates the structure of the SSI \ndata frames in a number of SSI modes.  \nThe two optional bytes are output if the EAGC bit of SSICRA is set. The first byte contains the 8 -bit attenuation setting (0 = no \nattenuation, 255 = 24 dB of attenuation), whereas  the second byte  \ncontains a 2 -bit reset field and 6 -bit received signal strength \nfield. The reset field contains the number of modulator reset \nevents since the last report, saturating at 3. The received signal \nstrength (RSSI) field is a linear estimate of the signal stren gth at \nthe output of the first decimation stage; 60 corresponds to a full-scale signal.  \nThe two optional bytes follow the I and Q data as a 16 -bit word \nprovided that the AAGC bit of SSICRA is not set. If the AAGC bit is set, the two bytes follow the I and Q data in an alternating fashion. In this alternate AGC data mode, the LSB of the byte containing the AGC attenuation is a 0, whereas  the LSB of the \nbyte containing reset and RSSI information is always a 1.  \nIn a 2 -wire interface, the embedded frame sync bi t (EFS) within \nthe SSICRA register is set to 1. In this mode, the framing \ninformation is embedded in the data stream, with each eight \nbits of data surrounded by a start bit (low) and a stop bit (high), and each frame ends with at least 10 high bits. FS rem ains either \nlow or three -stated (default), depending on the state of the SFST \nbit. Other control bits can be used to invert the frame sync (SFSI), to delay the frame sync pulse by one clock period (SLFS), to invert the clock (SCKI), or to three -state the c lock \n(SCKT). Note that if EFS is set, SLFS is a don’t care bit.  \nAD9864  Data Sheet  \n \nRev. A | Page 20 of 47 The SSIORD register controls the output bit rate (f CLKOUT ) of the \nserial bit stream. f CLKOUT  can be set equal to the modulator clock \nfrequency (f CLK) or an integer fraction of it. It is equal to f CLK divided  \nby the contents of the SSIORD register. Note that f CLKOUT  must  \nbe chosen such that it does not introduce harmful spurs within the pass band of the target signal. Users must verify that the \noutput bit rate is sufficient to accommodate the re quired number  \nof bits per frame for a selected word size and decimation factor. \nIdle (high) bits are used to fill out each frame.  \n \n \n24-BIT I AND Q, EAGC = 0, AAGC = X:48 DATA BITS\n24-BIT I AND Q, EAGC = 1, AAGC = 0:64 DATA BITS\n16-BIT I AND Q, EAGC = 0, AAGC = X:32 DATA BITS\n16-BIT I AND Q, EAGC = 0, AAGC = 0:32 DATA BITS\n16-BIT I AND Q, EAGC = 1, AAGC = 1:40 DATA BITS\nRESET COUNTRESET COUNT\nI(15:0) Q(15:0)Q(15:0) I(15:0) ATTN(7:1)Q(15:0) I(15:0)Q(15:0) I(15:0)Q(23:0) I(23:0)Q(23:0) I(23:0)\nATTN(7:0)ATTN(7:0)\nSSI(5:1)SSI(5:0)SSI(5:0)\n10\n04319-0-031\n \nFigure 32. SSI Frame Structure  \nData Sheet  AD9864  \n \nRev. A | Page 21 of 47 SSI CONTROL REGISTER S \nSSICRA (Address  0x18)  \nTable 8. SSICRA Bitmap  \nBit 7  Bit 6  Bit 5  Bit 4  Bit 3  Bit 2  Bit 1  Bit 0  \nAAGC  EAGC  EFS SFST  SFSI  SLFS  SCKT  SCKI  \n \nTable 9. SSICRA Bit Descriptions  \nBit(s)  Name  Width  Default  Description  \n7 AAGC  1 0 Alternate AGC data bytes.  \n6 EAGC  1 0 Embed AGC data.  \n5 EFS 1 0 Embed frame sync.  \n4 SFST  1 1 Three -state frame sync.  \n3 SFSI  1 0 Invert frame sync.  \n2 SLFS  1 0 Late frame sync (1 = late, 0 = early). \n1 SCKT  1 1 Three -state CLKOUT.  \n0 SCKI  1 0 Invert CLKOUT.  \n \nSSICRB (Address 0x19)  \nTable 10. SSICRB Bitmap  \nBit 7  Bit 6  Bit 5  Bit 4  Bit 3  Bit 2  Bit 1  Bit 0  \n4_SPI  Reserved  Reserved  Reserved  DW DS_2  DS_1  DS_0  \n \nTable 11. SSICRB Bit Descriptions  \nBit(s)  Name  Width  Default  Description  \n7 4_SPI  1 0 Enable 4 -wire SPI interface for SPI read operation via DOUTB.  \n[6:4]  Reserved  3 0 Reserved . \n3 DW 1 0 I/Q data -word width (0 = 16 bit, 1 = 24 bit). Automatically 16 -bit when AGCV = 1.  \n[2:0]  DS  3 7 FS, CLKOUT, and DOUT driv e strength L evel 0 to Level 7, with 7 being  the highest level.  \n \nSSIORD (Address 0x1A)  \nTable 12. SSIORD Bitmap  \nBit 7  Bit 6  Bit 5  Bit 4  Bit 3  Bit 2  Bit 1  Bit 0  \nReserved  Reserved  Reserved  Reserved  DIV_3  DIV_2  DIV_1  DIV_0  \n \nTable 13. SSIORD Bit Descriptions  \nBit(s)  Name  Width  Default  Description  \n[7:4]  Reserved  4 0 Reserved . \n[3:0]  SSIORD  4 1 Output bit rate divisor setting f CLKOUT  = f CLK/SSIORD w here SSIORD  = 1 to 15.  \n \nAD9864  Data Sheet  \n \nRev. A | Page 22 of 47 CLKOUT\nFS\nDOUT\nCLKOUT\nFS\nDOUT\nCLKOUT\nFS\nDOUT\nCLKOUT\nFS\nDOUTI15 I0 Q15 Q14 Q0\nI15 I0 Q15 Q14 Q0\nI15 I0 Q15 Q14 Q0 ATTN7 ATTEN6 RSSI0\nI15 Q15 I8 STOP\nBITSTART\nBIT I7 I0 STOP\nBITSTART\n BITSCKI = 0, SCKT = 0, SLFS = 0, SFSI = 0, EFS = 0, SFST = 0, EAGC = 0\nSCKI = 0, SCKT = 0, SLFS = 1, SFSI = 0, EFS = 0, SFST = 0, EAGC = 0\nSCKI = 0, SCKT = 0, SLFS = 0, SFSI = 0, EFS = 0, SFST = 0, EAGC = 1, AAGC\nSCKI = 0, SCKT = 0, SLFS = X, SFSI = X, EFS = 1, SFST = 1, EAGC = 0\nSCKI = 0, SCKT = 0, SLFS = X, SFSI = X, EFS = 1, SFST = 0, EAGC = 0; AS ABOVE, BUT FS IS LOWIDLE (HIGH) BITSHI-Z\n04319-0-032 \nFigure 33. SSI Timing for Several SSICRA Settings with 16 -Bit I/Q Data  \nTable 14. Number of Bits per Frame for Different SSICR \nSettings  \nDW  EAGC  EFS  AAGC  Number of  Bits  per Frame \n0 (16 Bits)  0 0 N/A 32 \n 0 1 N/A 491 \n 1 0 0 48 \n 1 0 1 40 \n 1 1 0 691 \n 1 1 1 591 \n1 (24 Bits)  0 0 N/A 48 \n 0 1 N/A 691 \n 1 0 0 64 \n 1 0 1 56 \n 1 1 0 891 \n 1 1 1 791 \n \n1 The number of bits per frame with embedded frame sync (EFS = 1); assume \nat least 10 idle bits are desired.  \n2 N/A means n ot applicable . \nThe maximum SSIORD setting can be determined by the \nfollowing equation:  \nSSIORD  < TRUNC [(Decimation Factor )/(Number of \nBits per Frame )] (1) \nwhere TRUNC  is the truncated integer value.  If SSIORD = ( decimation factor )/(number of bits per frame ), \nthe last bit in the SSI frame is not clocked out prior to FS \nreturning high.  \nTable 14 lists the number of bits within a frame for 16 -bit and 24 -bit \noutput data formats for all of the different SSICR settings. The \ndecimation factor is determined by the contents of Register  0x07.  \nAn example helps illustrate how the maximum SSIORD setting \nis determined. Suppose a user selects a decimation factor of 6 00 \n(Register 0x07, K = 0, M = 9) and prefers a 3 -wire interface with a  \ndedicated frame sync (EFS = 0) containing 24 -bit data (DW = 1)  \nwith nonalternating embedded AGC data included (EAGC = 1, AAGC = 0). Referring to Table 14, each frame consists of 64 \ndata bits. Using Equation 1, the maximum SSIORD setting is \n9 (= TRUNC (600/64)). Therefore, the user can select any \nSSIORD setting between 1 and 9.  \nFigure 33 illustrates the output timing of the SSI port for several \nSSI control register settings with 16 -bit I/Q data, and Figure 34 \nshows the associated timing parameters. Note that the same  \ntiming  relationship holds for 24 -bit I/Q data, with the exception \nthat I and Q word lengths now become 24 bits. In the default mode  \nof operation, dat a is shifted out on rising edges of CLKOUT \nafter a pulse equal to a clock period is output from the frame \nsync (FS) pin. As described above, the output data consists of a 16-bit or 24 -bit I sample followed by a 16 -bit or 24 -bit Q sample , \nplus two optional bytes containing AGC and status information.  \nData Sheet  AD9864  \n \nRev. A | Page 23 of 47 I15 I14tCLK\ntHI\ntV\ntDVtLOW\nCLKOUT\nFS\nDOUT\n04319-0-033 \nFigure 34. SSI Timing Parameters for SSI Timing  \nIn Figure 34, the timing parameters also apply to inverted \nCLKOUT or FS modes, with t DV relative to the falling edge of \nthe CLK and/or FS.  \nThe AD9864 also provides the means for controlling the \nswitching characteristics of the digital output signals via the drive \nstrength ( DS) field of the SSICRB. This feature is useful in \nlimiting switching transients and noise from the digital output \nthat may ult imately couple back into the analog signal path, \npotentially degrading the sensitivity performance of the AD9864.  \nFigure 35 and Figure 36 show how the NF can vary as a function  \nof the SSI setting for an IF frequency of 109.65 MHz. The \nfollowing two observations can be made from these figures:  \n1. The NF becomes more sensitive to the SSI output drive strength level at higher signal bandwidth settings.  \n2. The NF is dependent on the number of bits within an SSI frame that become more sensitive to the SSI output drive strength level as the number of bits is increased. Therefore, select the lowest possible SSI drive strength setting that still \nmeets the SSI timing requirements.  \nSSI OUTPUT DRIVE STRENGTH SETTING210.0\n4NOISE FIGURE (dB)9.6\n3 18.0\n7 6 524-BIT I/O DATA9.8\n9.4\n9.2\n9.0\n8.68.8\n8.4\n8.2 16-BIT I/0 DATA\nw/ DVGA ENABLED16-BIT I/O DATA\n04319-0-034\n \nFigure 35. NF vs. SSI Output Drive Strength  \n(VDDx = 3.0 V, f CLK = 18 MSPS, BW = 10 kHz)  SSI OUTPUT DRIVE STRENGTH SETTING214\n4NOISE FIGURE (dB)12\n3 17\n7 6 524-BIT I/O DATA13\n11\n910\n816-BIT I/O DATA\nw/DVGA ENABLED\n16-BIT I/O DATA\n04319-0-035\n  \nFigure 36. NF vs. SSI Output Drive Strength  \n(VDDx = 3.0 V, f CLK = 18 MSPS, BW = 75 kHz)  \nTable 15 lists the typical output rise/fall times as a function of \nDS for a 10 pF load. Rise/fall times for other capacitor loads can be determined by multiplying the typical values present ed by a \nscaling factor equal to the desired capacitive load divided by 10  p F. \nTable 15. Typical Rise/Fall Times (±25%) with a 10 pF \nCapacitive Load for Each DS Setting  \nDS Typ (ns)  \n0 13.5  \n1 7.2 \n2 50 \n3 3.7 \n4 3.2 \n5 2.8 \n6 2.3 \n7 2.0 \n \nAD9864  Data Sheet  \n \nRev. A | Page 24 of 47 SYNCHRONIZATION USING SYNCB  \nMany applications require the ability to synchronize one or \nmore AD9864 devices in a way that causes the output data to \nbe precisely aligned to an external asynchronous signal. For \nexample, receiver applications employing diversity often require \nsynchronization of the digital outputs of multiple AD9864 devices. Satellite communication applications using TDMA methods may require synchronization between payload bursts to compensate for reference frequency drift and Doppler effects.  \nSYNCB can be used for this purpose. It  is an active -low signal \nthat clears the clock counters in both the decimation filter and the SSI port. The counters in the clock synthesizers are not reset because it is presumed that the CLK signals of multiple chips would be connected. SYNCB also resets  the modulator, \nresulting in a large -scale impulse that must propagate through \nthe digital filter and SSI data formatting circuitry of the AD9864 before recovering valid output data. As a result, data \nsamples unaffected by this SYNCB induced impulse can be recovered 12 output data samples after SYNCB goes high \n(independent of the decimation factor). Because SYNCB also \nresets the modulator, apply SYNCB only after the tuning of  the \nband -pass Σ-Δ ADC has been completed during  the \ninitialization phase.  For applications that may be performing a \nperiodic SYNCB signal that is synchronous to FS, it is \nrecommended that SYNCB assertion be applied after the rising \nedge of FS and three CLKOUT cycles before the arrival of the \nnext FS pulse to avoid a possible runt FS pulse that could disrupt the host DSP/FPGA.  Lastly, SYNCB must be tied high if \nunused because it does not include an internal pull -up resistor.  \nFigure 37 shows the timing relationship between SYNCB and \nthe CLKOUT and FS signals of the SSI port. When the clock synthesizer is enabled to generate the input ADC clock, SYNCB is considered an asynchronous active -low signal that must remain  \nlow for at least half an input clock period, that is, 1/(2 × f\nCLK). \nCLKOUT remains high while FS remains low upon SYNCB \ngoing low. CLKOUT become s active within one to two output \nclock periods upon SYNCB returning high. If  an external ADC \nclock input is supplied along with a synchronous SYNCB signal, \nit is recommended that SYNCB go low and returns  high on the \nfalling edges of the CLKIN signal to ensure consistent  CLKOUT \ndelay relative to rising edge of SYNCB. FS reappears s everal \noutput cycles later, depending on the decimation factor of the \ndigital filter and the SSIORD setting. Note that for any decimation factor and SSIORD setting, this delay is fixed and \nrepeatable. To verify proper synchronization, monitor the FS \nsignals of the multiple AD9864 devices.  \nFSSYNCB\nCLKOUT\n04319-0-036 \nFigure 37. SYNCB Timing  INTERFACING TO DSPS  \nThe AD9864 connects directly to an Analog Devices \nprogrammable digital signal processor (DSP). Figure 38 \nillustrates an example with the Blackfin ® series processors, such \nas the AD SP-BF609. The Blackfin DSP series of 16 -bit products \nis optimized for low power telecommunications applications with its dynamic power management feature, making it well \nsuited for portable radio products. The code compatible family members share the fundamental core attributes of high performance, low power consumption, and the ease -of-use \nadvantages of a microcontr oller instruction set.  \nAs shown in Figure 38, the synchronous serial interface (SSI) \nof the AD9864 links the receive data stream to the serial port \n(SPORT) of the DSP . For AD9864 setup and register \nprogramming, the device connects directly to the SPI port of the DSP . Dedicated select lines (SE L) allow the DSP to program \nand read back registers of multiple devices using only one SPI port. The DSP driver code pertaining to this interface is available on the AD9864 product page.  \nAD9864\nCLKOUT SPORT0_ACLKPC SPI1_CLK\nPD SPI1_MOSI\nDOUTB SPI1_MISO\nPE SPI1_SSEL7\nFS SPORT0_AFS\nDOUTA SPORT0_AD0SPI\nSSIADSP-BF609\nSPORTSPI\nSYNCB PE0\nDGND GND\nDGND GND\n04319-0-037 \nFigure 38. Example of AD9864 and ADSP -BF609  Interface  \nPOWER CONTROL \nTo allow power consumption to be minimized, t he AD9864 \npossesses numerous SPI programmable power -down and bias \ncontrol bits. The AD9864 powers up with all of its functional \nblocks p laced into a standby state, that is, STBY register default \nis 0xFF . Each major block can then be powered up by writing a \n0 to the appropriate bit of the STBY register. This scheme \nprovides the greatest flexibility for configuring the IC to a specific appli cation as well as for tailoring the power -down and \nwake -up characteristics of the IC. Table 16 summarizes the \nfunction of each of the STBY bits. Note that when all the blocks are in standby, the master reference circuit is also put into standby, and therefore the current is reduced furt her by 0.4  mA.  \nData Sheet  AD9864  \n \nRev. A | Page 25 of 47 Table 16. Standby Control Bits  \nSTBY Bit  Effect  Current  \nReduction  \n(mA)1 Wake -Up  \nTime (ms) \n7: REF  Voltage reference off; all \nbiasing shut down.  0.6 <0.1 \n(CREF = 4.7 nF) \n6: LO  LO synthesizer off, \nIOUTL three -state.  1.2 See Note 2  \n5: CKO  Clock oscillator off . 1.1 See Note 2  \n4: CK  Clock synthesizer off, \nIOUTC three -state. Clock \nbuffer off if ADC is off. 1.3 See Note 2  \n3: GC  Gain control DAC OFF. \nGCP and GCN three -\nstate.  0.2 Depends on \nCGC \n2: LNAMX  LNA and mixer  off. \nCXVM, CXVL, and CXIF \nthree -state.  8.2 <2.2  \n1: Unused     \n0: ADC  ADC off; clock buffer off \nif CLK synthesizer off; \nVCM three -state; clock \nto the digital filter halted; digital outputs \nstatic.  9.2 <0.1  \n \n1 When all blocks are in standby, the master reference circuit is also put into \nstandby, and thus the current is further reduced by 0.4 mA.  \n2 Wake -up time is dependent on programming and/or external components.  \n \nLO SYNTHESIZER  \nThe LO synthesizer shown in Figure 39 is a fully programmable \nphase -locked loop (PLL) capable of 6.25 kHz resolution at input \nfrequencies up to 300 MHz and reference clocks of up to 2 6 MHz.  \nIt consi sts of a low noise , digital , phase -frequency detector (PFD),  \na variable output current charge pump (CP), a 14 -bit reference \ndivider, programmable A and B counters, and a dual -modulus \n8/9 prescaler.  \nThe A (3 -bit) and B (13 -bit) counters, in conjunction with  the \ndual 8/9 modulus prescaler, implement an N divider with N = \n8 × B + A. In addition, the 14 -bit reference counter (R counter) \nallows selectable input reference frequencies, f REF, at the PFD \ninput. A complete PLL can be implemented if the synthesizer is  \nused with an external loop filter and voltage controlled oscillator (VCO).  \nThe A, B, and R counters can be programmed via the following registers: LOA, LOB, and LOR. The charge pump output current  \nis programmable via the LOI register from 0.625 mA to 5.0  mA \nusing the equation  \nI\nPUMP = (LOI + 1) × 0.625 mA  (2) \nAn on -chip fast acquire function (enabled by the LOF bit) \nautomatically increases the output current for faster settling during channel change s. The synthesizer can also be disabled \nusing the LO standby bit located in the STBY register.  fREFfREF\nfLO\nfLO\nFROM\nVCOREF\nBUFFER÷RPHASE-\nFREQUENCY\nDETECTOR\nFAST\nACQUIRECHARGE\nPUMPTO EXTERNAL\nLOOP\nFILTER\nLO\nBUFFER÷8/9A. B\nCOUNTERSLOR\nLOA, LOB\n04319-0-038 \nFigure 39. LO Synthesizer \nThe LO (and CLK) synthesizer works in the following manner. The externally supplied reference frequency, f\nREF, is buffered and \ndivided by the value held in the R counter. The internal f REF is \nthen compared to a divided version of the VCO frequency, f LO. \nThe phase/frequency detector provides up and down pulses \nwhose widths vary, depending upon the difference in p hase and \nfrequency of the input signals of the detector . The up/down \npulses control the charge pump, making current available to \ncharge the external low -pass loop filter when there is a \ndiscrepancy between the inputs of the PFD. The output of the low-pass filter feeds an external VCO whose output frequency, \nf\nLO, is driven such that its divided down version, f LO, matches \nthat of f REF, thus closing the feedback loop.  \nThe synthesized frequency is related to the reference frequency and the LO register contents as follows:  \nf\nLO = (8 × LOB  + LOA )/LOR  × fREF (3) \nNote that the minimum allowable value in the LOB  register is 3, \nand its value must always be greater than that loaded into LOA.  \nAn example helps to illustrate how the values of LOA, LOB, and LOR can be selected. Consider an application employing a 13 MHz crystal oscillator (f\nREF = 13 MHz), with the requirement \nthat f REF = 100 kHz and f LO = 143 MHz, that is, high side injection \nwith f IF = 140.75 MHz and f CLK = 18 MSPS. LOR is selected to be \n130 so that f REF = 100 kHz. The N -divider factor is 1430, which \ncan be realized by selecting LOB = 178 and LOA = 6.  \nThe stability, phase noise, spur performance, and transient response of the AD9864 LO (and CLK ) synthesizers are \ndetermined by the external loop filter, the VCO, the N -divide \nfactor, and the reference frequency, f\nREF. A good overview of the \ntheory and practical implementation of PLL synthesizers \n(featured as a 3 -part series in Analog Dialogue) can be found on \nthe Analog Devices website. A free software copy of the Analog \nDevices ADIsimPLL , a PLL synthesizer simulation tool, is also \navailable at www.analog.com . Note that the ADF4112 can be \nused as a close approximation to the LO synthesizer of the \nAD9864 when using this software tool.  \nAD9864  Data Sheet  \n \nRev. A | Page 26 of 47 FREF84kΩ\n~VDDL/2LO\nBUFFER\n500Ω 500ΩTO MIXER\nLO PORT\n1.75V\nBIASLOP\nLON\nNOTES\n1. ESD DIODE STRUCTURES OMITTED FOR CLARITY.\n2. FREF STBY SWITCHES SHOWN WITH LO SYNTHESIZER ON.\n04319-0-039 \nFigure 40. Equivalent Input of LO and REF Buffers \nFigure 40 shows the equivalent input structures of the LO and  \nREF buffers of the synthesizers (excluding the ESD structures). \nThe LO input is fed to the buffer of the LO synthesizer as well as the LO po rt of the AD9864 mixer. Both inputs are self  biasing and \nthus tolerate ac -coupled inputs. The LO input can be driven with \na single -ended or differential signal. Single -ended , dc-coupled \ninputs ens ure sufficient signal swing above and below the \ncommon -mode bias of the LO and REF buffers (that is, 1.75  V \nand VDDL/2). Note that the f\nREF input is slew rate dependent \nand must be driven with input signals exceeding 7.5  V/µs to \nensure proper synthesizer o peration. If this condition cannot be \nmet, an external logic gate can be inserted prior to the f REF input \nto square up the signal, thus allowing an f REF input frequency \napproaching dc.  \nFast Acquire Mode  \nThe fast acquire circuit attempts to boost the output current when  \nthe phase difference between the divided -down LO (that is, f LO) \nand the divided- down reference frequency (that is, f REF) exceeds \nthe threshold determined by the LOFA register. The LOFA register specifies a divisor for the f\nREF signal that det ermines the \nperiod (T) of this divided -down clock. This period defines the \ntime interval used in the fast acquire algorithm to control the charge pump current.  \nAssume that the nominal charge pump current is at its lowest setting (LOI = 0), and denote this minimum current by I\n0. \nWhen the output pulse from the phase comparator exceeds T , \nthe output current for the next pulse is 2 I0. When the pulse is \nwider than 2T, the output current for the next pulse is 3 I0, and \nso forth, up to eight times the minimum output current. If the \nnominal charge pump current is more than the minimum value \n(LOI > 0), the preceding rule is only applied if it results in an increase in the instantaneous charge pump current. If the \ncharge pump current is set to its lowest value (LO I = 0) and the \nfast acquire circuit is enabled, the instantaneous charge pump \ncurrent never fall s below 2 I\n0 when the pulse width is less than T . \nThus, the charge pump current when fast acquire is enabled is \ngiven by  \nIPUMP -FA = I0 × [1 = Max(1, LOI , Pulse Width /T)] (4) \nThe recommended setting for LOFA is LOR/16. Choosing a larger value for LOFA increases T. Thus, for a given phase \ndifference between the LO input and the f\nREF input, the instantaneous charge pump current is less than that available for \na LOFA value of LOR/16. Similarly, a smaller value for LOFA \ndecrease s T, making more current available for the same phase \ndifference. In other words, a smaller value of LOFA enables the synthesizer to settle faster in response to a frequency hop than a large LOFA  value. Take care to choose a value for LOFA that is \nlarge enough (values greater than 4 are recommended) to \nprevent the loop from oscillating back and forth in response to \na frequency hop.  \nTable 17. SPI Registers Associated with LO  Synthesizer  \nAddress (Hex)  Bit(s)  Width  Default  Value  Name  \n0x00  [7:0]  1 0xFF  STBY  \n0x08  [5:0]  6 0x00  LOR [ 13:8]  \n0x09  [7:0]  8 0x38  LOR [7:0] \n0x0A  [7:5]  3 0x5 LOA  \n [4:0]  5 0x00  LOB [12:8]  \n0x0B  [7:0]  8 0xiD  LOB  [7:0] \n0x0C  6 1 0 LOF  \n 5 1 0 LOINV  \n [4:2]  3 0x00  LOI \n [1:0]  2 0x00  LOTM  \n0x0D  [3:0]  4 0x00  LOFA  [13:8]  \n0x0E  [7:0]  8 0x04  LOFA  [7:0] \n \nCLOCK SYNTHESIZER  \nThe clock synthesizer is a fully programmable integer -N PLL \ncapable of supporting input clock and refe rence frequencies up \nto 26 MHz.  It is similar to the LO synthesizer described in \nFigure 39 with the following exceptions:  \n• It does not include an 8/9 prescaler nor an A counter.  \n• It includes a negative -resistance core that, when used in \nconjunction with an external LC tank and varactor, serves as the VCO.  \nThe 14 -bit reference counter and 13 -bit N -divider counter can \nbe programmed via the CKR and CKN  registers . The clock \nfrequency, f\nCLK, is related to the reference frequency by the \nequation  \nfCLK = (CKN /CKR  × fREF) (5) \nThe charge pump current is programmable via the CKI  register \nfrom 0.625 mA  to 5.0 mA using the equation  \nIPUMP = (CKI + 1) × 0.625 mA  (6) \nThe fast acquire subcircuit of the charge pump is controlled \nby the CKFA register in the same manner the LO synthesizer \nis controlled by the LOFA register. An on -chip lock detect \nfunction (enabled by the CKF bit) automatically increases the \noutput current for faster settling during channel changes. The \nsynthesizer may also be disabled using the CK standby bit \nlocated in the STBY register.  \nData Sheet AD9864\n \nRev. A | Page 27 of 47 2VDDC = 3.0V\nIOUTCLOSC\n0.1µFRBIASLOOP\nFILTER\nRD\nAD9864CLKN CLKP15 19 20RFCP\nCZCVARCOSC\nVCM = VDDC – R BIAS × IBIAS > 1.6V\nfOSC > 1/{2\x1f × (L OSC × (C VARACTOR ||COSC))1/2}\nCLK OSC. BIAS IBIAS = 0.15mA, 0.25mA,\n0.40mA, OR 0.65mA\n04319-0-040 \nFigure 41. External Loop Filter, Varactor, and LC Tank Required to Realize a \nComplete Clock Synthesizer \nThe AD9864 clock synthesizer circuitry includes a negative \nresistance core so that only an external LC tank circuit with a \nvaractor is needed to realize a voltage controlled clock oscillator \n(VCO). Figure 41 shows the external components required to complete the clock synthesizer along with the equivalent input circuitry of the CLK input. The resonant frequency of the VCO is approximately determined by L\nOSC and the series equivalent \ncapacitance of C OSC and C VA R. As a result, L OSC, C OSC, and C VA R \nmust be selected to provide a sufficient tuning range to ensure both proper start-up oscillation and locking of the clock synthesizer. Both the C\nOSC and L OSC values must have ±5% \ntolerance along with L OSC having a Q > 20 at the desired clock \nfrequency. \nThe bias, I BIAS, of the negative-resistance core has four \nprogrammable settings. The lower equivalent Q of the LC tank \ncircuit may require a higher bias setting of the negative \nresistance core to ensure proper oscillation. Select R BIAS so that the \ncommon-mode voltage at CLKP and CLKN is approximately 1.6 V . The synthesizer may be disabled via the CK standby bit to allow the user to employ an external synthesizer and/or VCO in place of \nthose resident on the IC. Note that if an external CLK source or \nVCO is used, the clock oscillator must be disabled via the CKO \nstandby bit. \nThe phase noise performance of the clock synthesizer is \ndependent on several factors, including the CLK oscillator I\nBIAS \nsetting, charge pump setting, loop filter component values, and internal f\nREF setting. Figure 42 and Figure 43 show how the \nmeasured phase noise attributed to the clock synthesizer varies (relative to an external f\nCLK) as a function of the I BIAS setting and \ncharge pump setting for a −31 dBm IFIN signal at 73.35 MHz with an external LO signal at 71.1 MHz. Figure 42 shows that the optimum phase noise is achieved with the highest I\nBIAS \n(CKO) setting, while Figure 43 shows that the higher charge pump values provide the optimum performance for the given loop filter configuration. The AD9864 clock synthesizer and oscillator were set up to provide an f\nCLK of 18 MHz from an \nexternal f REF of 16.8 MHz. The following external component values were selected for the synthesizer: R F = 390 Ω, R D = 2 kΩ, \nCZ = 0.68 μF, C P = 0.1 μF, C OSC = 91 pF, L OSC = 1.2 μH, and \nCVA R = Toshiba 1SV228 varactor. \n–25–90\n–100\n–110\n–120PHASE NOISE (dBc/Hz)\n–20 –15 –10 –5 5 10 15 20 25\nFREQUENCY OFFSET (kHz)–80–70–60–50–40–30–20–10\n–130\n–140CKO = 1CK0 = 0CKO = 2\nCKO = 3\nEXT CLK\n00\n04319-0-041  \nFigure 42. CLK Phase Noise vs. I BIAS Setting (CKO); \nIF = 73.35 MHz, IF = 71.1 MHz, IFIN = −31 dBm, f CLK = 18 MHz, f REF = 16.8 MHz; \nCLK SYN Settings: CKI = 7, CLR = 56, and CLN = 60 with f REF = 300 kHz \n–25–90\n–100\n–110\n–120PHASE NOISE (dBc/Hz)\n–20 –15 –10 5 5 10 15 20 25\nFREQUENCY OFFSET (kHz)–80–70–60–50–40–30–20–100\n–130\n–140CP = 0\nCP = 2 CP = 4\nCP = 6\nEXT CLK\n0\n04319-0-042  \nFigure 43. CLK Phase Noise vs. I BIAS Setting (CKO); \nIF = 73.35 MHz, IF = 71.1 MHz, IFIN = −31 dBm, f CLK = 18 MHz, f REF = 16.8 MHz; \nCLK SYN Settings: CKO Bias = 3, CKR = 56, and CKN = 60 with f REF = 300 kHz \nTable 18. SPI Registers Associated with CLK Synthesizer \nAddress (Hex) Bit(s) Width Default Value Name \n0x00 [7:0] 8 0xFF STBY \n0x01 [3:2] 2 0x00 CKOB \n0x10 [5:0] 6 0x00 CKR [13:8] \n0x11 [7:0] 8 0x38 CKR [7:0] \n0x12 [4:0] 5 0x00 CKN [12:8] \n0x13 [7:0] 8 0x3C CKN [7:0] \n0x14 6 1 0 CKF \n 5 1 0 CKINV \n [4:2] 3 0x00 CKI \n [1:0] 1 0x00 CKTM \n0x15 [3:0] 4 0x00 CKFA [13:8] \n0x16 [7:0] 8 0x04 CKFA [7:0] \n \nAD9864  Data Sheet  \n \nRev. A | Page 28 of 47 IF LNA/MIXER  \nThe AD9864 contains a single -ended LNA followed by a Gilbert \ntype active mixer, shown in Figure 44 with the required external \ncomponents. The LNA uses negative shunt feedback to set its \ninput impedance at the IFIN p in, thus making it dependent on \nthe input frequency. It can be modeled as approximately 370 Ω||1.4 pF (±20%) below 100 MHz. Figure 45 and Figure 46 \nshow the equivalent input impedance vs. frequency characteristics  \nof the AD9864. The increase in shunt resistance vs. frequency \ncan be attributed to the reduction in bandwidth,  thus the amount \nof negative feedback of the LNA. Note that the input signal into IFIN must be ac -coupled via a 10  nF capacito r because the LNA \ninput is self biasing.  \nIFINRBIASVDDIMXOP\nLO INPUT =\n0.3V p-p TO\n1.0V p-p\nDC SERVO\nLOOPMULTI-TANH\nV–I STAGECXIFMXON\nCXVMCL L\nCXVL2.7V TO 3.6V\nRGAIN\nRF\n04319-0-04350Ω\n \nFigure 44. Simplified Schematic of AD9864  LNA/Mixer \n \nFREQUENCY (MHz)500\n100400600\n200RESISTANCE (Ω)\n0550\n450\n150 50350\n300\n350 300 250\n04319-0-044  \nFigure 45. Shunt Input Resistance vs. Frequency of AD9864  IF1 Input  FREQUENCY (MHz)1.5\n1000.52.5\n200CAPACITANCE (pF)\n02.0\n1.0\n150 500\n350 300 250\n04319-0-045 \nFigure 46. Shunt Capacitance vs. Frequency of AD9864 IF1 Input  \nThe differential LO port of the mixer is driven by the LO buffer stage shown in Figure 44, which can be driven single -ended or  \ndifferential. Because  it is self biasing, the LO signal level can be \nac-coupled and range from 0.3 V p -p to 1.0 V p -p with negligible  \neffect on performance. The open -collector outputs of the mixer , \nMXOP and MXON, drive an external resonant tank consisting of  \na differential LC network tuned to the IF of the band -pass Σ-∆ \nADC, that is, f\nIF2_ADC  = f CLK/8. The two inductors provide a dc \nbias path for the mixer core via a series resistor of 50 Ω, which \nis included to dampen the common -mode response. The output \nof the mixer must be ac -coupled to the input of the band -pass \nΣ-∆ ADC, IF2P , and IF2N via two 100 pF capacitors to ensure \nproper tuning  of the LC center frequency.  \nThe external differential LC tank forms the resonant element for the first resonator of the band -pass Σ-∆ modulator, and so must \nbe tuned to the f\nCLK/8 center frequency of the modulator. The \ninductors must  be chosen such that t heir impedance at f CLK/8 is \napproximately 140, that is, L = 180/ fCLK. An accuracy of 20% is \nconsidered to be adequate. For example, at f CLK = 18 MHz, L = \n10 µH is a good choice. Once the inductors have been selected, \nthe required tank capacitance may be ca lculated using the \nrelation  \n]) 2( 2/[18/ CL fCLK ××π×=  \nFor example, at f CLK = 18 MHz and L = 10 µH, a capacitance of \n250 pF is needed. However, to accommodate an inductor tolerance  \nof ±10%, the tank capacitance must be adjustable from 227 pF to 278 pF. Selecting an external capacitor of 180 pF ensures that \neven with a 10% tolerance and stray capacitances as high as 30 pF,  \nthe total capacitance is less than the minimum value needed b y \nthe tank. Extra capacitance is supplied by the AD9864 on-chip \nprogrammable capacitor array. Because the programming range \nof the capacitor array is at least 160 pF, the AD9864 has plenty of  \nrange to make up for the tolerances of low cost external \ncomponents. Note that if f\nCLK is increased by a factor of 1.44 MHz  \nto 26 MHz so that f CLK/8 becomes 3.25 MHz, reducing L and C \nby approximately  the same factor (L = 6.9 µH and C = 120 pF) \nsatisfies the requirements stated previously.  \nData Sheet AD9864\n \nRev. A | Page 29 of 47 A 16 dB step attenuator is also included within the LNA/mixer \ncircuitry to prevent large signals (that is, > −18 dBm) from overdriving the Σ-Δ modulator. In such instances, the Σ-Δ modulator becomes unstable, thus severely desensitizing the \nreceiver. The 16 dB step attenuator can be invoked by setting \nthe ATTEN bit (Register 0x03, Bit 7), causing the mixer gain to be reduced by 16 dB. The 16 dB step attenuator can be used in applications where a potential target or blocker signal could exceed the IF input clip point. Although the LNA is driven into \ncompression, it may still be possible to recover the desired signal \nif it is FM. See Table 19 for the gain compression characteristics \nof the LNA and mixer with the 16 dB attenuator enabled. \nTable 19. SPI Registers Associated with LNA/Mixer \nAddress (Hex) Bit(s) Width Default Value Name \n0x00 [7:0] 8 0xFF STBY \n0x03 7 1 0 ATTEN \n \nBAND-PASS Σ-∆ ADC \nThe ADC of the AD9864 is shown in Figure 47. The ADC \ncontains a sixth-order, multibit band-pass Σ-Δ modulator that \nachieves very high instantaneous dynamic range over a narrow \nfrequency band. The loop filter of the band-pass Σ-Δ modulator consists of two continuous-time re sonators followed by a discrete \ntime resonator, with each resonator stage contributing a pair of complex poles. The first resonator is an external LC tank, while \nthe second is an on-chip active RC filter. The output of the LC \nresonator is ac-coupled to the second resonator input via 100 pF capacitors. The center frequencies of these two continuous-time resonators must be tuned to f\nCLK/8 for the ADC to function \nproperly. The center frequency of the discrete time resonator automatically scales with f\nCLK, thus no tuning is required. \nTO DIGITAL\nFILTERSC\nRESO-\nNATORNINE-\nLEVEL\nFLASH\nESL\nGAIN\nCONTROLMIXER\nOUTPUTEXTERNALLC\nf\nCLK = 13 MSPS TO 26 MSPS\nMXOP\nMXONIF2P\nIF2NRC\nRESO-\nNATOR\nDAC1\n04319-0-047 \nFigure 47. Equivalent Circuit of Si xth-Order Band-Pass Σ-∆ Modulator  \n \n \n \n   Figure 48 shows the measured power spectral density measured \nat the output of the undecimated band-pass Σ-Δ modulator. Note that the wide dynamic range achieved at the center frequency, f\nCLK/8, is achieved once the LC and RC resonators of \nthe Σ-Δ modulator have been successfully tuned. The out-of-band noise is removed by the decimation filters following \nquadrature mixer. \n00\n–10\n–20–30\n–50FFT OUTPUT (dBFS/NBW)–40\nFREQUENCY (MHz)–60\n–70–80–90\n–10012345678 9–2dBFS OUTPUT fCLK = 18MHz\nNBW = 3.3kHz\n04319-0-048 \nFigure 48. Measured Undecimated Spectral Output of Σ-∆  \nModulator ADC with f CLK = 18 MSPS and Noise Bandwidth of 3.3 kHz \nThe signal transfer function of the AD9864 possesses inherent \nanti-alias filtering by virtue of the continuous time portions of \nthe loop filter in the band-pass Σ-Δ modulator. Figure 49 illustrates this property by plotting the nominal signal transfer \nfunction of the ADC for frequencies up to 2f\nCLK. The notches \nthat naturally occur for all fr equencies that alias to the f CLK/8 \npass band are clearly visible. Even at the widest bandwidth \nsetting, the notches are deep enough to provide greater than 80 dB of alias protection. Thus, the wideband IF filtering \nrequirements preceding the AD9864 are determined mostly by \nthe image band of the mixer, which is offset from the desired IF \ninput frequency by f\nCLK/4 (that is, 2 × f CLK/8) rather than any \naliasing associated with the ADC. \n0\n–10\n–20\n–30\n–50SIGNAL TRANSFER FUNCTION (dB)–40\nNORMALIZED FREQUENCY (RELATIVE TO fOUT)–60\n–70\n–80\n0.5 0 1.0 1.5 2.0NOTCH AT ALL ALIAS FREQUENCIES\n04319-0-049 \nFigure 49. Signal Transfer Function of the Band-Pass Σ-∆  \nModulator from 0 f CLK to 2f CLK \n \nAD9864  Data Sheet  \n \nRev. A | Page 30 of 47 Figure 50 shows the nominal signal transfer function \nmagnitude for frequencies near the f CLK/8 pass band. The width \nof the pass band determines the transfer function droop, but \neven at the lowest oversampling ratio (48) where the pass band edges are at ± f\nCLK/192 (±0.005 fCLK), the gain variation is less \nthan 0.5 dB. Also consider the amount of attenuation offered by the signal transfer function near f\nCLK/8 when determining the \nnarrow -band IF filtering requirements preceding the AD9864. \n–0.100\n–5SIGNAL TRANSFER FUNCTION (dB)–10\nNORMALIZED FREQUENCY (RELATIVE TO fCLK)–15\n–20\n–0.05 0 0.05 0.10\n04319-0-050 \nFigure 50. Magnitude of the Signal Transfer Function of the ADC near f CLK/8 \nTuning of the Σ-∆ modulator’s two continuous -time resonators \nis essential in realizing the full dynamic range of the ADC , and \nmust be performed upon system startup. To facilitate tuning of the LC tank, a capacitor array is internally connected to the MXOP  \nand MXON pins. The capacitance of this array is programmable from 0 pF to 200 pF ± 20% and can be programmed either auto matically or manually via the SPI port. The capacitors of \nthe active RC resonator are similarly programmable. Note that \nthe AD9864 can be placed in and out of its standby mode without \nretuning sin ce the tuning codes are stored in the SPI registers. \nWhen tuning the LC tank, the sampling clock frequency must \nbe stable and the LNA/mixer, LO synthesizer, and ADC must all be placed in standby. Because  large LO and IF signals \n(>−40  dBm) present at the in puts of the AD9864 can corrupt \nthe calibration, these signals must  be minimized or disabled \nduring the calibration sequence. Tuning is triggered when the ADC is taken out of standby if the TUNE_LC bit of Register 0x1C has been set. This bit clear s when the tuning operation is \ncomplete (less than 6 ms). The tuning codes c an be read from \nthe 3 -bit CAPL1 (0x1D) and the 6 -bit CAPL0 (0x1E) registers.  \nIn a similar manner, tuning of the RC resonator is activated if the TUNE_RC bit of Register 0x1C is set when the ADC is \ntaken out of standby. This bit clears when tuning is comple te. \nThe tuning code can be read from the CAPR (0x1F) register. Setting both the TUNE_LC and TUNE_RC bits tunes the LC \ntank and the active RC resonator in succession. During tuning, \nthe ADC is not operational and neither data nor a clock is available from t he SSI port.  \n The following mechanisms prevent the tuning procedure from \nfinishing (that is, Register 0x1C does not clear):  \n• CLK signal is not present or scaled/biased properly into \nCLKP (and/or CLKN) pin such that internal clock receiver \ndoes not square -up the input clock signal. To determine if \nthe CLK input signal is being received correctly, a clock \nsignal appear s at the CLKOUT when the ADC is not in \nstand by mode (Register 0x00), and the CLKOUT buffer is \nnot three -stated (Register 0x18).  \n• LC resonator f ails to resonate during tune operation. \nCheck to see proper values are used for LC tank and that it is connected to MXOP/MXON pins. Also check if 100 pF capacitors are connected between MXOP (MXON) and IF2P (IF2N) pins.  \n• SYCNB pin is low.  \n• Capacitor value (b etween the MXOP/MXON and \nIF2P/IF2N pins) is larger than 100 pF.  \nTable 20  lists the recommended sequence of the SPI commands for \ntuning the ADC, and Table 21  lists all of the SPI registers associated \nwith band -pass Σ-∆ ADC. Note that the recommended sequence \nincludes additional steps for robustness. These  steps are additional \nmeasures to prevent the back -end ADC from generating an \ninternal unstable signal that locks the state machine, thus preventing resonator tuning. It also allows five attempts to calibrate \nthe resonators. As a further safeguard, the use r can save the settings \nfor Register 0x1D, Register 0x1E, and Register  0x1F determined \nduring factory test and reload these settings after five attempts. \nNote that that the occurrence of this tuning issue is  extremely \nrare among devices shipped to date, and the occurrence among \nany suspect devices being quite low (<0.1%).  \nTable 20. Tuning Sequence  \nAddress   \n(Hex)  Value  \n(Hex)  Comments  \n0x3E  0x47  Disable internal ADC unstable signal.  \nEnable RC Q enhancement.  \nBypass RC and SC resonators.  \n0x38  0x01  Enable manual control of feedback DAC  \n0x39  0x0F  Set DAC to midscale  \n0x00  0x45  LO synthesizer, LNA/mixer, and ADC are \nplaced in standby.1 \n0x1C  0x03  Set TUNE_LC and TUNE_RC. Wait for CLK to \nstabilize if CLK synthesizer used.  \n0x00  0x44  Take the ADC out of standby. Wait for 0x1C \nto clear (<6 ms).  \n0x1C  0x00  If 0x1C does not clear, clear 0x1C and make five attempts before exiting loop.  \n0x38  0x00  Disable manual control of feedback DAC  \n0x3E  0x00  Re-enable ADC unstable signal.  \nDisable RC Q enhancement.  \nDisable bypass of RC and SC resonators.  \n0x00  0x40  LNA/mixer (and LO SYN if used) can now be \ntaken out of standby  \n \n1 If external CLK VCO or source is used, the CLK oscillator must also be \ndisabled. Large IF or LO signals can corrupt the calibration; these signals \nmust  be disabled during the calibration sequence.  \n \nData Sheet  AD9864  \n \nRev. A | Page 31 of 47 Table 21. SPI Registers Associated with Band -Pass Σ -∆ ADC  \nAddress (Hex)  Value  Width  Default Value  Name  \n0x00  [7:0]  8 0xFF  STBY  \n0x1C  1 1 0 TUNE_LC  \n 0 1 0 TUNE_RC  \n0x1D  [2:0]  3 0 CAPL1 [2:0] \n0x1E  [5:0]  6 0x00  CAPL1 [5:0] \n0x1F  [7:0]  8 0x00  CAPR  \n0x38  0 1 0 DACCR  \n0x39  [7:0]  8 0x00  DACDATA  \n0x3E  0 1 0 ADCCR  \n \nWhen the AD9864 is tuned, the noise figure degradation \nattributed solely to the temperature drift of the LC and RC \nresonators is minimal. Because the drift of the RC resonator is actually negligible compared  to that of the LC resonator, the \nexternal L and C components temperature drift characteristics tend to dominate. Figure 51 shows the degradation in noise \nfigure as the product of the LC value is allowed to vary from −12.5% to +12.5%. Note that the noise figure remains relatively constant over a ± 3.5% range ( ±35,000 ppm), suggesting that \nmost applications do not need to be ret uned over the operating \ntemperature range.  –1512\n11NF (dB)10\nLC ERROR (%)9\n8\n0 10 15 –10 –5BW = 75kHz\nBW = 10kHzBW = 30kHz\n5\n04319-0-051 \nFigure 51. Typical Noise Figure Degradation from L and C  \nComponent Drift (f CLK = 18 MSPS, f IF = 73.3501 MHz)  \n \n \n \n \n \n \n \n \nAD9864  Data Sheet  \n \nRev. A | Page 32 of 47 DECIMATION FILTER  \n4\nOR\n5COS\nSINDATA\nFROM Σ-Δ\nMODULATORDEC1\nSINC4\nFILTERDEC2\nSINC4\nFILTERM + 1DEC3\nFIR\nFILTERCOMPLEX\nDATA TO\nSSI PORTI\nQ\n04319-0-052M K\n12\n \nFigure 52. Decimation Filter Architecture \nThe decimation filter shown in Figure 52 consists of an f CLK/8 \ncomplex mixer and a cascade of three linear phase FIR filters: \nDEC1, DEC2, and DEC3. DEC1 downsamples by a factor of 12 \nusing a fourth -order comb filter. DEC2 also uses a fourth -order \ncomb filter, but its decimation factor is set by the M field of Register 0 x07. DEC3 is either a decimate -by-5 FIR filter or a \ndecimate -by-4 FIR filter, depending on the value of the K bit \nwithin Register 0x07. Thus, the composite decimation factor can be set to either 60 × M or 48 × M for K equal to 0 or 1, respectively.  \nThe out put data rate (f\nOUT) is equal to the modulator clock \nfrequency (f CLK) divided by the decimation factor  of the digital \nfilter . Due to the transition region associated with the frequency \nresponse of the decimation filter, the decimation factor must be selected so that f\nOUT is equal to or greater than twice the signal \nbandwidth, which ensures low amplitude ripple in the pass band along with the ability to provide further application -\nspecific digital filtering prior to demodulation.  \nFigure 53 shows the response of the decimation filter at a \ndecimation factor of 900 (K = 0, M = 14) and a sampling clock frequency of 18 MHz. In this example, the output data rate (f\nOUT) \nis 20 kSPS, with a usable complex signal bandwidth of 10 kHz \ncentered around dc. As this figure shows, the first and second \nalias bands (occurring at even integer multiples of f OUT/2) have \nthe least attenuation but provide at least 88 dB of attenuation. \nNote that signals falling around frequency offsets that are odd \ninteger multiples of f OUT/2 (that is, 10 kHz, 30 kHz, and 50 kHz) \nfall back into the transition band of the digital filter.  \nFREQUENCY (kHz)–40\n–100\n0 30 10 20–200\n–60\n–80\n40 100FOLD-\nING\nPOINT±5.0kHz PASS BAND\n–120120\n70 80 60 50 90–88dB –88dB\n–101dB–103dBFILTER RESPONSE (dB)\n04319-0-053 \nFigure 53. Decimation Filter Frequency Respons e for  \nfOUT = 20 kSPS (f CLK = 18 MHz, OSR = 900)   \nFigure 54 shows the response of the decimation filter with a \ndecimation factor of 48 and a sampling clock rate of 26 MHz. The alias attenuation is at least 94 dB and occurs for frequencies at the edges of the fourth alias band. The difference between the alias atte nuation characteristics of Figure 53 and those of \nFigure 54 is due to the fact tha t the third decimation stage \ndecimates by a factor of 5 for Figure 53 compared with a factor \nof 4 for Figure 54. \n0\n–40\n–100–20\n–60\n–80FILTER RESPONSE (dB)\n–120\nFREQUENCY (MHz)EQUENCY0 1.5 0.5 1.0 2.0 2.5±135.466kHz PASS BAND\n–98dB\n–115dB–94dB\n04319-0-054 \nFigure 54. Decimation Filter Frequency Response for \nfOUT = 541.666 kSPS (f CLK = 26 MHz, OSR = 48)  \nFigure 55 and Figure 56 show expanded views of the pass band \nfor the two possible configurations o f the third decimation \nfilter. When decimating by 60n (K = 0), the pass -band gain \nvariation is 1.2 dB; when decimating by 48n (K = 1), the pass -\nband gain variation is 0.9 dB. Normalization of full scale at \nband center is accurate to within 0.14 dB across a ll decimation \nmodes. Figure 57 and Figure 58 show  the folded frequency \nresponse of the decimator for K = 0 and K = 1, respectively.  \nNORMALIZED FREQUENCY (RELATIVE TO fOUT)03\n0.250FILTER RESPONSE (dB)\n0.1252\n10\n–1\n–2–3PASS-BAND GAIN FREQUENCY = 1.2dB\n04319-0-055 \nFigure 55. Pass- Band Frequency Response of the Decimator for K = 0  \nData Sheet  AD9864  \n \nRev. A | Page 33 of 47 NORMALIZED FREQUENCY (RELATIVE TO fOUT)3\n0.250FILTER RESPONSE (dB)\n0.125 02\n10\n–1\n–2–3PASS-BAND GAIN VARIATION = 0.9dB\n04319-0-056 \nFigure 56. Pass- Band Frequency Response of the Decimator for K = 1  \nNORMALIZED FREQUENCY (RELATIVE TO fOUT)0\n0.50FILTER RESPONSE (dB)\n0.25 0–20\n–40–60\n–80\n–100\n–120MIN ALIAS ATTN = 87.7dB\n04319-0-057 \nFigure 57. Folded Decimator Frequency Response for K = 0  \nNORMALIZED FREQUENCY (RELATIVE TO fOUT)00\n0.50FILTER RESPONSE (dB)\n0.25–20\n–40\n–60\n–80\n–100\n–120MIN ALIAS ATTN = 97.2dB\n04319-0-058 \nFigure 58. Folded Decimator Frequency Response for K = 1  VARIABLE GAIN AMPLIF IER OPERATION WITH \nAUTOMATIC GAIN CONTR OL \nThe AD9864 contains both a variable gain amplifier (VGA) and \na digital VGA (DVGA) along with all of the necessary signal \nestimation and control circuitry required to implement automatic  \ngain control (AG C), as shown in Figure 59. The AGC control \ncircuitry provides a high degree of programmability, allowing users to optimize the AGC response as well as t he dynamic \nrange of the AD9864 for a given application. The VGA is \nprogrammable over a 12 dB range and implemented within the \nADC by adjusting its full -scale reference level. Increasing the \nfull s cale of the ADC is equivalent to attenuating the signal. An \nadditional 12 dB of digital gain range is achieved by scaling the \noutput of the decimation filter in the DVGA. Note that a slight \nincrease in the supply current (0.67 mA) is drawn from VDDI and VD DF as the VGA changes from 0 dB to 12 dB attenuation.  \nThe purpose of the VGA is to extend the usable dynamic range of the AD9864 by allowing the ADC to digitize a desired signal \nover a large input  power range as well as recover a low level \nsignal in the presence of larger unfiltered interferers without \nsaturating or clipping the ADC. The DVGA is most useful in \nextending the dynamic range in narrow -band applications \nrequiring a 16 -bit I and Q data f ormat. In these applications, \nquantization noise resulting from internal truncation to 16 bits as well as external 16 -bit fixed point post processing can degrade  \nthe effective noise figure of the AD9864 by 1 dB or more.  \nThe DVGA is enabled by writing a 1 to the AGCV field. The \nVGA (and the DVGA) can operate in either a user controlled \nvariable gain mode or automatic gain control (AGC) mode. It is worth noting that the VGA imparts negligible phase e rror upon \nthe desired signal as its gain is varied over a 12 dB range. This is due to the bandwidth of the VGA being far greater than the down converted desired signal (centered about f\nCLK/8) and \nremaining relatively independent of gain setting. As a resul t, \nphase modulated signals experience minimal phase error as the AGC varies the VGA gain while tracking an interferer or the desired signal under fading conditions. Note that the envelope of the signal is still affected by the AGC settings.  \n \n \n \n \n \n \nAD9864  Data Sheet  \n \nRev. A | Page 34 of 47 +\nVGA\nDACΣ-Δ ADC\nFSDEC1\n÷12C1DEC2\nAND\nDEC3\nI+Q\nI+QSELECT\nLARGERAGCR\nREF LEVEL\nK\nAGCA/AGCD\nSCALING\nCDACGCP1\n(1 – Z –1)\nAGCV\nSETTINGCVDVGA\nRSSI DATA\nTO SSII/Q DATA\nTO SSI\n04319-0-059 \nFigure 59. Functional Block Diagram of VGA and AGC  \nVariable Gain Control \nThe variable gain control is enabled by setting the AGCR field \nof Register 0x06 to 0. In this mode, the gain of the VGA (and \nthe DVGA) can be adjusted by writing to the 16 -bit AGCG \nregister. The maximum update rate of the AGCG register via \nthe SPI port is f CLK/240. The MSB of this register is the bit that \nenables 16 dB of attenuation in the mixer. This feature allows the AD9864 to cope with large level signals beyond the VGA \nrange (that is, > −18 dBm at LNA input) to prevent overloading of the ADC.  \nThe lower 15 bits specify the attenuation in the remainder of the \nsignal path. If the DVGA is enabled, the attenuation range is from −12 dB to +12 dB because the DVGA provides 12 dB of \ndigital gain. In this case, all 15 bits are significant. However, \nwith the DVGA disabled, the attenuation range extends from 0 dB to 12 dB and only the lower 14 bits are useful. Figure 60 \nshows the relationship between the amount of attenuation and the AGC register setting for both  cases.  \nAGCG SETTING (HEX)–12012\n0000AGC ATTENUATION (dB)\n1FFF 3FFF 7FFF 5FFF6\n–6VGA\nRANGE\nDVGA\nRANGEONLY\nVGA ENABLED\nDVGA AND\nVGA ENABLED\n04319-0-060 \nFigure 60. AGC Gain Range Characteristics vs. AGCG Register  \nSetting With and Without DVGA Enabled  \n \n \n \n Referring to Figure 59, the gain of the VGA is set by an 8 -bit \ncontrol DAC that provides a control signal to the VGA \nappearing at the gain control pin (GCP). For applications \nimplementing automatic gain control, the  output resistance of \nthe DAC can be reduced by a factor of 9 to decrease the attack \ntime of the AGC response for faster signal acquisition. An external capacitor, CDAC, from GCP to analog ground is \nrequired to smooth the output  of the DAC  each time it upd ates \nas well as to filter wideband noise. Note that CDAC, in \ncombination with the programmable output resistance  of the \nDAC , sets the −3 dB bandwidth and time constant associated \nwith this RC network.  \nA linear estimate of the received signal strength is pe rformed at \nthe output of the first decimation stage (DEC1) and output of \nthe DVGA (if enabled), as discussed in the AGC section. This \ndata is  available as a 6 -bit RSSI field within an SSI frame with 60 \ncorresponding to a full -scale signal for a given AGC a ttenuation \nsetting. The RSSI field is updated at f\nCLK/60 and can be used \nwith the 8 -bit attenuation field (or AGCG attenuation setting) \nto determine the absolute signal strength. Note that the RSSI data  \nmust  be post filtered to remove the ac ripple compone nt that is  \ndependent on the frequency offset relative to the IF frequency.  \nThe accuracy of the mean RSSI reading (relative to the IF input power) depends on the input signal’s frequency offset relative to the IF frequency because both the response of the D EC1 filter \nas well as the signal transfer function of the ADC attenuate the downconverted signal level of the mixer, centered at f\nCLK/8. As a \nresult, the estimated signal strength of input signals falling within proximity to the IF is reported accurately, while those \nsignals at increasingly higher frequency offsets incur larger \nmeasurement errors. Figure 61 shows the normalized error of \nthe RSSI reading as a function of the frequency offset from the \nIF frequency. Note that the significance of this error becomes \napparent when determining the maximum inp ut interferer (or \nblocker) levels with the AGC enabled. \nData Sheet  AD9864  \n \nRev. A | Page 35 of 47 00\n–3MEASURED RSSI ERROR (dB)–6\nNORMALIZED FREQUENCY OFFSET (( fIN–fIF)fCLK)–9\n–18\n0.03 0.04 0.05 0.02 0.01–12\n–15\n04319-0-061 \nFigure 61. Normalized RSSI Error vs. Normalized IF Frequency Offset  \nAutomatic Gain Control (AGC)  \nThe gain of the VGA (and DVGA) is automatically adjusted \nwhen the AGC is ena bled via the AGCR field of Register 0x06. \nIn this mode, the gain of the VGA is continuously updated at f\nCLK/60 in an attempt to ensure that the maximum analog signal \nlevel into the ADC does not exceed the ADC clip level and that the rms output level of the  ADC is equal to a programmable \nreference level. With the DVGA enabled, the AGC control loop also attempts to minimize the effects of 16 -bit truncation noise \nprior to the SSI output by continuously adjusting the gain  of the \nDVGA  to ensure maximum digital g ain while not exceeding the \nprogrammable reference level.  \nThis programmable level can be set at 3 dB, 6 dB, 9 dB, 12 dB, and 15 dB below the ADC saturation (clip) level by writing values from 1 to 5 to the 3 -bit AGCR field. Note that the ADC \nclip level is defined to be 2 dB below its full scale (−18 dBm at the LNA input for a matched input and maximum attenuation). If AGCR is 0, automatic gain control is disabled. Because \nclipping of the ADC input degrades the SNR performance, the \nreference level must also take into consideration the peak -to-\nrms characteristics of the target (or interferer) signals.  \nReferring again to Figure 59, the majority of the AGC loop \noperates in th e discrete time domain. The sample rate of the \nloop is f\nCLK/60; therefore, registers associated with the AGC \nalgorithm are updated at this rate. The number of overload and ADC reset occurrences within the final I/Q update rate of the AD9864, as well as the AGC value (8 MSB), can be read from \nthe SSI data upon proper configuration.  \nThe AGC performs digital signal estimation at the output of the \nfirst decimation stage (DEC1) as well as the DVGA outp ut that \nfollows the last decimation stage (DEC3). The rms power of the \nI and Q signal is estimated by the equation  \nXest[ n] = Abs(I[ n] + Abs(Q[ n]) (7) \nSignal estimation after the first decimation stage allows the AGC to cope with out -of-band interferers an d in-band signals \nthat could otherwise overload the ADC. Signal estimation after the DVGA allows the AGC to minimize the effects of the 16 -bit \ntruncation noise.  \nWhen the estimated signal level falls within the range of the \nAGC, the AGC loop adjusts the VGA  (or DVGA) attenuation \nsetting so that the estimated signal level is equal to the \nprogrammed level specified in the AGCR field. The absolute \nsignal strength can be determined from the contents of the ATTN and RSSI field that is available in the SSI data fr ame \nwhen properly configured. Within this AGC tracking range, the 6-bit value in the RSSI field remains constant while the 8 -bit \nATTN field varies according to the VGA/DVGA setting. Note that the ATTN value is based on the 8 MSB contained in the AGCG field  of Register  0x03 and Register 0x04.  \nA description of the AGC control algorithm and the user adjustable parameters follows. First, consider the case where the in-band target signal is bigger than all out -of-band interferers \nand the DVGA is disabled. With t he DVGA disabled, a control \nloop based only on the target signal power measured after DEC1 is used to control the VGA gain, and the target signal is \ntracked to the programmed reference level. If the signal is too \nlarge, the attenuation is increased with a proportionality \nconstant determined by the AGCA setting. Large AGCA values \nresult in large gain changes, thus rapid tracking of changes in \nsignal strength. If the target signal is too small relative to the reference level, the attenuation is reduced; howev er, now the \nproportionality constant is determined by both the AGCA and \nAGCD settings. The AGCD value is effectively subtracted from AGCA, so a large AGCD results in smaller gain changes and thus slower tracking of fading signals.  \nThe 4 -bit code in the AGC A field sets the raw bandwidth of the \nAGC loop. With AGCA = 0, the AGC loop bandwidth is at its minimum of 50 Hz, assuming f\nCLK = 18 MHz. Each increment of \nAGCA increases the loop bandwidth by a factor of √2; thus the maximum bandwidth is 9 kHz. A general expression for the \nattack bandwidth is  \nBW\nA = 50 × ( fCLK/18 MHz) × 2(AGCA /2) Hz (8) \nAssuming that the loop dynamics are essentially those of a \nsingle -pole system, the corresponding attack time is \ntATTACK  = 2.2/(100 × π × 2(AGCA /2)) = 35/ BW A (9) \nThe 4 -bit code in the AGCD field sets the ratio of the attack \ntime to the decay time in the amplitude estimation circuitry. When AGCD is zero, this ratio is one. Incrementing AGCD \nmultiplies the decay time constant by 21/2, allowing a 180:1 \nrange in the decay time r elative to the attack time. The decay \ntime may be computed from  \nt\nDECAY  = tATTACK  × 2(AGCD /2) (10) \nFigure 62 shows the AGC response to a 30 Hz pulse -modulated \nIF burst f or different AGCA and AGCD settings. The 3 -bit \nvalue in the AGCO field determines the amount of attenuation added in response to a reset event in the ADC. Each increment in AGCO doubles the weighting factor. At the highest AGCO setting, the attenuation cha nges from 0 dB to 12 dB in \nAD9864  Data Sheet  \n \nRev. A | Page 36 of 47 approximately 10 µs, while at the lowest setting the attenuation \nchanges from 0 dB to 12 dB in approximately 1.2 ms. In both \ncases, assume that f CLK = 18 MHz. Figure 63 shows the AGC \nattack time response for different AGCO settings.  \nAGCA = 0\n80\n64\n048\n32\n1696\nTIME (ms)10 20 0 50 40 3080\n64\n048\n32\n1696VGA ATTENUATION SETTINGAGCA = 4\n80\n64\n048\n32\n1696\nAGCA = 8AGCD = 8\nAGCD = 0\nAGCD = 8\nAGCD = 0\nAGCD = 8\nAGCD = 0\n04319-0-062 \nFigure 62. AGC Response for Different AGCA and AGCD Settings with  \nfCLK = 18 MSPS, f CLKOUT  = 20 kSPS, Decimate by 900, and AGCO = 0  \n \nVGA ATTENUATION SETTING\nTIME (ms)0.1 0.2 0 0.5 0.4 0.380\n64\n048\n32\n1696\n1.0 0.9 0.8 0.7 0.6112128\nAGCO = 7\nAGCO = 4\nAGCD = 0\n04319-0-063 \nFigure 63. AGC Response for Different AGCO Settings with f CLK = 18 MSPS, \nfCLKOUT  = 300 kSPS, Decimate by 60 and AGCA = AGCD = 0  \nLastly, the AGCF bit reduces the DAC source resistance by at least a factor of 10, which facilitates fast acquisition by lowering the RC time constant that is formed with the external capacitors connected from the GCP pin to ground (GCN pin). For an overshoot -free step response in the AGC loop, choose the \ncapacitor connected from the GCP pin to the GCN gro und \npin so that the RC time constant is less than one quarter of the \nraw loop.  Specifically,  \nRC < 1/(8πBW ) (11) \nwhere:  \nR is the resistance between the GCP pin and ground \n(72.5 kΩ ±30%  if AGCF = 0 , < 8  kΩ if AGCF = 1 ).  \nBW is the raw loop bandwidth.  \nNote  that with C  chosen at this upper limit, the loop bandwidth \nincreases by approximately 30%.  \nNow consider the case described previously but with the DVGA \nenabled to minimize the effects of 16 -bit truncation. With the \nDVGA enabled, a control loop based on t he larger of the two \nestimated signal levels (that is, the output of DEC1 and DVGA) \ncontrols the DVGA gain. The DVGA multiplies the output of the decimation filter by a factor of 1 to 4 (that is, 0 dB to 12 dB). When signals are small, the DVGA gain is 4 a nd the 16 -bit output  \nis extracted from the 24 -bit data produced by the decimation \nfilter by dropping 2 MSB and taking the next 16  bits. As signals \nbecome larger, the DVGA gain decreases to the point where the DVGA gain is 1 and the 16 -bit output data is si mply the 16 MSB \nof the internal 24 -bit data. As signals become even larger, \nattenuation is accomplished by the normal method of increasing the full scale  of the ADC . \nThe extra 12 dB of gain range provided by the DVGA reduces the input -referred truncation n oise by 12 dB and makes the \ndata more tolerant of LSB corruption within the DSP . The price paid for this extension to the gain range is that the start of AGC \naction is 12 dB lower and that the AGC loop becomes unstable \nif its bandwidth is set too wide. The  latter difficulty results from \nthe large delay of the decimation filters, DEC2 and DEC3, when the user implements a large decimation factor. As a result, given the option, the use of 24 -bit data is preferable to using the \nDVGA. Figur e 64 indicates which AGCA values are reasonable \nfor various decimation factors (DEC FAC). The white cells indicate that the (decimation factor/AGCA) combination works well; the light gray cells indicate ringing and an increase in the AGC settling time; and the dark gray cells indicate that the \ncombination results in instability or near instability in the AGC \nloop. Setting AGCF = 1 improves the time -domain behavior at \nthe expense of increased spectral spreading.  \n4 MAGCA\n5 6 7 8 9101112131415DECIMATION FACTOR60 0\n120 1\n300 4\n540 8\n900 E\n04319-0-164 \nFigure 64. AGCA Limits when  DVGA is Enabled  \n \n \nData Sheet  AD9864  \n \nRev. A | Page 37 of 47 Finally, consider the case of a strong out -of-band interferer (that \nis, −18 dBm to −32 dBm for matched IF input) that is larger \nthan the target signal and large enough to be tracked by the control loop based on the output of the DEC1. The ability of the control loop to track this interferer and set the VGA attenuation to prevent clipping of the ADC is limited by the accuracy of the digital signal estimation occurr ing at the output of DEC1. The \naccuracy of the digital signal estimation is a function of the frequency offset of the out -of-band interferer relative to the IF \nfrequency as shown in Figure 61. Interferers at increasingly \nhigher frequency offsets incur larger measurement errors, potentially causing the control loop to inadvertently reduce the amount of VGA attenuation that may result in clipping of the \nADC. Figure 65 shows the maximum measured interferer signal \nlevel versus the normalized IF offset frequency (relative to f\nCLK) \ntolerated by the AD9864 relative to its maximum target input \nsignal level (0 dBFS = −18 dBm). Note that the increase in \nallowable interferer level occurring beyond 0.04 × f CLK results \nfrom the inherent signal attenuation provided by the signal \ntransfer function of the ADC.  \nNORMALIZED FREQUENCY OFFSET = ( fIN–fIF)/fCLK–6\n0.02–120\n0.04 0–3\n–9\n0.03 0.01–15\n0.05RELATIVE TO CLIP POINT (dBFS)\n04319-0-064\n \nFigure 65. Maximum Interferer (or Blocker) Input Level vs. Normalized IF \nFrequency Offset  \nTable 22. SPI R egisters Associated with AGC  \nAddress (Hex)  Bit(s)  Width  Default  Value  Name  \n0x03  7 1 0 AT TEN  \n [6:0]  7 0x00  AGCG  [14:8]  \n0x04  [7:0]  8 0x00  AGCG [7:0] \n0x05  [7:4]  4 0 AGCA  \n [3:0]  4 0x00  AGCD  \n0x06  7 1 0 AGCV  \n [6:4]  3 0x00  AGCO  \n 3 1 0 AGCF  \n [2:0]  3 0x00  AGCR  \n \n \n \n \n \n System Noise Figure (NF) vs. VGA (or AGC) Control  \nThe system noise figure of the AD9864 is a function of the ACG  \nattenuation and output signal bandwidth. Figure 66 plots the \nnominal system NF as a function of the AGC attenuation for \nboth narrow -band (20 kHz) and wideband (150 kHz) modes \nwith fCLK = 18 MHz. Also shown on the plot is the SNR that is \nobserved at the output for a −2 dBFS input. The high dynamic \nrange of the ADC within the AD9864 ensures that the system \nNF increases gradually as the AGC attenuation is increased. In narrow -band (BW  = 20 kHz) mode, the system noise figure \nincreases by less than 3 dB over a 12 dB AGC range, while in \nwideband (BW = 150 kHz) mode, the degradation is \napproximately 5  dB. Therefore, the highest instantaneous \ndynamic range for the AD9864 occurs with 12 dB of AGC \nattenuation, since the AD9864 can accommodate an additional \n12 dB peak signal level with only a moderate increase in its \nnoise flo or. \nAs Figure 66 shows, the AD9864 can achieve an SNR in excess \nof 100 dB in narrow -band applications. To rea lize the full \nperformance of the AD9864 in such applications, it is \nrecommended that the I/Q data be represented with 24 bits. If 16-bit data is used, the effective system NF increases because of \nthe quantization noise present in the 16 -bit data after truncation.  \n3 6 015\n14\n1213\n11\n10\n9\n8NOISE FIGURE (dB)\n9 12\nVGA ATTENUATION (dB)SNR = 90.1dBFS\nBW = 50kHz\nBW = 150kHz\nSNR = 82.9dBFS\nBW = 10kHz\nSNR = 95.1dBFSSNR = 103.2dB\n04319-0-065 \nFigure 66. Nominal System Noise Figure and Peak SNR vs. AGCG Setting  \n(fIF = 73.35 MHz, f CLK = 18 MSPS, and 24 -bit I/Q Data)  \nFigure 67 plots the nominal system NF with 16 -bit output data \nas a function of AGC in both narrow -band and wideband \nmode. In wideband mode, the NF curve is virtually unchanged relative to the 24 -bit out put data because the output SNR before \ntruncation is always less than the 96 dB SNR that 16 -bit data \ncan support. However, in narrow -band mode, where the output \nSNR approaches or exceeds the SNR that can be supported with 16-bit data, the degradation in sy stem NF is more severe. \nFurthermore, if the signal processing within the DSP adds noise \nat the level of an LSB, the system noise figure can be degraded \neven more than Figure 67 shows. For example, this might occur \nin a fixed 16 -bit DSP whose code is not optimized to process \nthe AD9864 16-bit data with minimal quantization effects. To \nlimit the quantization effects within the AD9864, the 24 -bit data \nAD9864  Data Sheet  \n \nRev. A | Page 38 of 47 undergoes noise shaping just prior to 16 -bit truncation, thus \nreducing the in -band quantization noise by 5 dB (with 2× \noversampling). Therefore, 98.8 dBFS SNR performance is still \nachievable with 16 -bit data in a 10 kHz BW .  NOISE FIGURE (dB)15\n814\n13\n12\n11\n10\n9SNR =98.8dBFS\nBW=50kHzBW=150kHz\nSNR =83dBFSSNR =94.1dBFSBW=10kHz\nSNR =89.9dBFS1617\n3 6 0 9 12\nVGA ATTENUATION (dB)\n04319- 0-066\n \nFigure 67. Nominal System Noise Figure and Peak SNR vs. AGCG Setting  \n(fIF = 73.35 MHz, f CLK = 18 MSPS, and 16 -bit I/Q Data)  \nAPPLICATIONS CONSIDE RATIONS  \nFrequency P lanning  \nThe LO frequency (and/or ADC clock frequency) must be chosen carefully to prevent known internally generated spurs from mixing down along with the desired signal and thus degrading the SNR performance. The major sources of spurs in \nthe AD9864 are the ADC clock and digital circuitry operating \nat 1/3 of f\nCLK. Therefore, the clock frequency (f CLK) is the most \nimportant variable in determining which LO (and therefore IF) frequencies are viable.  \nMany applications have frequency plans that take advantage of \nindustry -standard IF frequencies due to the large selection of \nlow cost crystal or SAW filters. If the selected IF frequency and ADC clock rate result in a problematic spurious component, selec t an alternative ADC clock rate by slightly modifying the \ndecimation factor and CLK synthesizer settings (if used) so that the output sample rate remains the same. Also, applications requiring a certain degree of tuning range must take into consideration t he location and magnitude of these spurs when \ndetermining the tuning range as well as optimum IF and ADC clock frequency.  \nFigure 69 plots the measured in -band noise power as a function \nof the LO frequency for f\nCLK = 18 MHz and an output signal \nbandwidth of 150 kHz when no signal is present. Any LO frequency resulting in la rge spurs must  be avoided. As this \nfigure shows, large spurs result when the LO is f\nCLK/8 = 2.25  MHz  \naway from a harmonic of 18 MHz , that is, n f CLK ± f CLK/8. Also problematic are LO frequencies whose odd order harmonics  (that \nis, m × f LO) mix with harmon ics of f CLK to f CLK/8. This spur \nmechanism is a result of the mixer being internally driven by a squared -up version of the LO input consisting of the LO frequency \nand its odd order harmonics. These spur frequencies can be \ncalculated from the relation  \nm × f\nLO = (n ± 1/8) × fCLK (12) \nwhere:  \nm = 1 , 3, 5...  \nn = 1, 2, 3...  \nA second source of spurs is a large block of digital circuitry that \nis clocked at f CLK/3. Problematic LO frequencies associated with \nthis spur source are given by  \nfLO = f CLK/3 + n ×  fCLK ± fCLK/8 (13) \nwhere n = 1, 2, 3... \nFigure 70 shows that omitting the LO frequencies given by \nEquation 12 for m = 1, 3, and 5, and by Equation 13 accounts for most of the s purs. Some of the remaining low level spurs can \nbe attributed to coupling from the SSI digital output. Therefore, users are also advised to optimize the output bit rate ( f\nCLKOUT  via \nthe SSIORD register) and the digital output driver strength to \nachieve the  lowest spurious and noise figure performance  for a \nparticular LO frequency and f CLK setting. This is especially the \ncase for particularly narrow -band channels where  low level \nspurs can degrade the sensitivity performance of the AD9864. \nDespite the many spurs, sweet spots in the LO frequency are \ngenerally wide enough to accommodate the maximum signal \nbandwidth of the AD9864. As evidence of this property, \nFigure  68 shows that the in -band noise is quite constant for LO \nfrequencies ranging from 70 MHz to 71 MHz.  \n70.5 70.0–50\n–70–60\n–90–80\n71.0\nLO FREQUENCY (MHz)IN-BAND POWER (dBFS)\n04319-0-069 \nFigure 68. Expanded View from 70 MHz to 71 MHz  \n \nData Sheet AD9864\n \nRev. A | Page 39 of 47 IN-BAND POWER (dBFS)–60\n–70\n–80–90–50\n0 250 300 200 150 100 50\nLO FREQUENCY (MHz)\n04319-0-067 \nFigure 69. Total In-Band Noise + Spur Power with No Signal Applied as a Function of the LO Frequency (f CLK = 18 MHz and Output Sign al Bandwidth = 150 kHz) \n \nIN-BAND POWER (dBFS)–60\n–70\n–80\n–90–50\n0 250 300\nLO FREQUENCY (MHz)200 150 100 50\n04319-0-068 \nFigure 70. Same as Figure 69 Excluding LO Frequencies Known to Produce Large In-Band Spurs \n \nSpurious Responses \nThe spectral purity of the LO (including its phase noise) is an \nimportant consideration because LO spurs can mix with undesired \nsignals present at the AD9864  IFIN input to produce an in-band \nresponse. To demonstrate the low LO spur level introduced \nwithin the AD9864, Figure 71 plots the demodulated output \npower as a function of the input IF frequency for an LO \nfrequency of 71.1 MHz and a clock frequency of 18 MHz. \nThe two large −10 dBFS spikes near the center of the plot are the \ndesired responses at f LO, ± f IF2_ADC , where f IF2_ADC = f CLK/8, that is, \nat 68.85 MHz and 73.35 MHz. LO spurs at f LO ± f SPUR result in \nspurious responses at offsets of ± f SPUR around the desired \nresponses. Close-in spurs of this kind are not visible on the plot; however, small spurious responses at f\nLO ± f IF2_ADC ± f CLK (at \n50.85 MHz, 55.35 MHz, 86.85 MHz, and 91.35 MHz) are visible \nat the −90 dBFS level. This data indicates that the AD9864 does \nan excellent job of preserving the purity of the LO signal.  Figure 71 can also be used to gauge how well the AD9864 \nrejects undesired signals. For example, the half-IF response \n(at 69.975 MHz and 72.225 MHz) is approximately −100 dBFS, giving a selectivity of 90 dB for this spurious response. The \nlargest spurious response at approximately −70 dBFS occurs \nwith input frequencies of 70.35 MHz and 71.85 MHz. These spurs result from third-order nonlinearity in the signal path \n(that is, abs  [3 × f\nLO − 3 × f IF_INPUT ] = f CLK/8). \n90 500\n–40–20\n–80–60\n100\nIF FREQUENCY (MHz)dBFS\n–120–100\n60 70 80D =fCLK/4 = 4.5MHz\nDESIRED\nRESPONSES\n04319-0-070 \nFigure 71. Response of AD9864  to a −20 dBm IF Input when f LO = 71.1 MHz \n \nAD9864  Data Sheet  \n \nRev. A | Page 40 of 47 EXTERNAL PASSIVE COM PONENT REQUIREMENTS  \nFigure 72 shows an example circuit using the AD9864 and \nTable  23 shows the nominal dc bias voltages seen at the different \npins. The purpose is to show the various external passive \ncomponents required by the AD9864, along with nominal dc voltages for  troubleshooting purposes. \nMXOP\nMXON\nGNDF\nIF2N\nIF2P\nVDDF\nGCPGCNVDDA\nGNDA\nVREFP\nVREFNGNDL\nFREF\nGNDS\nSYNCB\nGNDH\nFS\nDOUTB\nDOUTA\nCLKOUT\nVDDH\nVDDD\nPEVDDI\nIFIN\nCXIF\nGNDI\nCXVL\nLOP\nLON\nCXVM\nVDDL\nVDDP\nIOUTL\nGNDPRREF\nVDDQ\nIOUTC\nGNDQ\nVDDC\nGNDC\nCLKP\nCLKN\nGNDS\nGNDD\nPC\nPD484746454443424140393837\n1314151617181920212223241\n2\n3\n4\n5\n6\n7\n89\n10\n1112252627282930313233343536\nAD986450Ω\n180pF10mH\n10mHLC TANK\n100pF100\npF\n2.2nF\n100pF\n10nF\n100pF\n100kΩ\n10nF 10nF\n1nF10nF10nF100nF100nF10nF\n04319-0-071 \nFigure 72. Example Circuit Showing Recommended Component Values  \nTable  23. Nominal DC Bias Voltages  \nPin Number  Mnemonic  Nominal DC Bias (V)  \n1 MXOP  VDDI − 0.2  \n2 MXON  VDDI − 0.2  \n4 IF2N  1.3 − 1.7 \n5 IF2P  1.3 − 1.7 \n11 VREFP  VDDA/2 + 0.250  \n12 VREFN VDDA/2 − 0.250  \n13 RREF  1.2 \n19 CLKP  VDDC − 1.3  \n20 CLKN VDDC − 1.3  \n35 FREF  VDDC/2  \n41 CXVM  1.6 − 2.0 \n42 LON  1.65 − 1.9  \n43 LOP  1.65 − 1.9  \n44 CXVL  VDDI − 0.05  \n46 CXIF  1.6 − 2.0 \n47 IFIN  0.9 − 1.1  The LO, CLK, and IFIN signals are coupled to their respective \ninputs using 10 nF capacitors. The output of the mixer is \ncoupled to the input of the ADC using 100 pF . An external 100 kΩ resistor from the RREF pin to GND sets up the internal \nbias currents of the AD9864. VREFP and VREFN provide a \ndifferential reference voltage to the Σ -∆ ADC of the AD9864, \nand must be decouple d by a 0.01 µF differential capacitor along \nwith two 100 pF capacitors to GND. The remaining capacitors are used to decouple other sensitive internal nodes to GND.  \nNote that SYNCB is tied to VDDH because  it is unused.  \nAlthough power supply decoupling capacitors are not shown, it is recommended that a 0.1 µF surface -mount capacitor be \nplaced as close as possible to each power supply pin for maximum effectiveness. Also not shown is the input impedance \nmatching network used to match the IF input of the AD9864 to \nthe external IF filter. Lastly, the loop filter components \nassociated with the LO and CLK synthesizers are not shown.  \nLC component values for f\nCLK = 18 MHz are given  in Figure 72. \nFor other clock frequencies, the two inductors and the capacitor \nof the LC tank must be scaled in inverse proportion to the \nclock. For example, if f CLK = 26 MHz, the two inductors must be \n6.9 µH and the capacitor must be approximately 120 pF. A \ntolerance of 10% is sufficient for these components because  \ntuning of the LC tank is performed upon system startup. \nAPPLICATIONS  \nSuperheterodyne Receiver Example  \nThe AD9864 is well suited for analog and/or digital narrow -\nband radio systems based on a superheterodyne receiver architecture. The superheterodyne architecture is noted for achieving exceptional dynami c range and selectivity by using \ntwo or more downconversion stages to provide amplification of the target signal while filtering the undesired signals. The AD9864 greatly simplifies the design of these radio systems by \nintegrating the complete IF strip (excluding the LO VCO) while \nproviding an I/Q digital output (along with other system \nparameters) for the demodulation of both analog and digital \nmodulated signals. The exceptional dynamic range of t he \nAD9864 often simplifies the IF filtering requirements and \neliminates the need for an external AGC.  \n \n \n \n \nData Sheet AD9864\n \nRev. A | Page 41 of 47 RF\nINPUTPRESELECT\nFILTER TUNERIF CRYSTAL OR\nSAW FILTERVDDA\nΣ-∆ ADC LNA\nVCO\nADF42xx\nPLL SYN\nREFINTO\nDSPAD9864\nDECIMATION\nFILTER\nSAMPLE CLOCK\nSYNTHESIZERIOUTC\nLOOP\nFILTER\nLOP\nLON\nVCOLOOP\nFILTER\nVDDCIOUTC\nCLKP\nCLKN\nFROM DSPLO\nSYNTH.VOLTAGE\nREFERENCE\nSPIRREFVREFP\nVREFN\nSYNCBPC\nPD\nPE\nCRYSTAL\nOSCILLATORIFIN–16dB\nLNA\nVXOP\nVXON\nII-2P\nII-2N\nDAC  AGC\nFORMATTING/SSIDOUTA\nDOUTB\nFS\nCLKOUT\nCONTROL LOGICGCP\nGCNIF2 = fCLK/8\n04319-0-072 \nFigure 73. Typical Dual Conversion Superheterodyne Application Using the AD9864  \nFigure 73 shows a typical dual conversion superheterodyne \nreceiver using the AD9864. An RF tuner is used to select and \ndownconvert the target signal to a suitable first IF for the \nAD9864. A preselect filter may precede the tuner to limit the RF input to the band of interest. The output of the tuner drives an IF filter that provides partial suppression of adjacent channels and interferers that could otherwise limit the dynamic range of \nthe receiver. Set the conversion gain of the tuner such that the \npeak IF input signal level into the AD9864 is no greater than \n−18 dBm to prevent clipping. The AD9864 downconverts the \nfirst IF signal to a second IF that is exactly 1/8 of the clock rate of the Σ-Δ ADC (f\nCLK/8) to simplify the digital quadrature \ndemodulation process. \nThis second IF signal is then digitized by the Σ-Δ ADC, \ndemodulated into its quadrature I and Q components, filtered \nvia matching decimation filters, and reformatted to enable a synchronous serial interface to a DSP . In this example, the LO and CLK synthesizers of the AD9864 are both enabled, \nrequiring some additional passive components (for the loop \nfilters and CLK oscillator of the synthesizer) and a VCO for the \nLO synthesizer. Note that not all of the required decoupling capacitors are shown. See the External Passive Component Requirements section and Figure 72 for more information on \nrequired external passive components. \nThe selection of the first IF frequency is often based on the \navailability of low cost standard crystal or SAW filters as well as system frequency planning considerations. In general, crystal \nfilters are often used for narrow-band radios having channel \nbandwidths below 50 kHz with IFs below 120 MHz, while SAW filters are more suited for channel bandwidths greater than 50 kHz with IFs greater than 70 MHz. The ultimate stop-band rejection required by the IF filter depends on how much suppression is required at the AD9864 image band resulting \nfrom downconversion to the second IF. This image band is offset from the first IF by twice the second IF frequency \n(± f\nCLK/4, depending on high-side or low-side injection). \nThe selectivity and bandwidth of the IF filter depends on both \nthe magnitude and frequency offset(s) of the adjacent channel blocker(s) that could overdrive the input of the AD9864 or \ngenerate in-band intermodulation components. Further \nsuppression is performed within the AD9864 by its inherent \nband-pass response and digital decimation filters. Note that \nsome applications require additional application-specific filtering performed in the DSP that follows the AD9864 to \nremove the adjacent channel and/or implement a matched filter for optimum signal detection. \nChoose the output data rate of the AD9864, f\nOUT, to be at least \ntwice the bandwidth or symbol rate of the desired signal to ensure \nthat the decimation filters provide a flat pass-band response as well as to allow for postprocessing by a DSP . After f\nOUT is \ndetermined, the decimation factor of the digital filters must be set such that the input clock rate, f\nCLK, falls between the AD9864 \nAD9864  Data Sheet  \n \nRev. A | Page 42 of 47 rated operating range of 13 MHz to 26  MHz and no significant \nspurious products related to f CLK fall within the desired pass band,  \nresulting in a reduction in sensitiv ity performance. If a spurious \ncomponent is found to limit the sensitivity performance, the \ndecimation factor can often be modified slightly to find a spurious free pass band. Selecting a higher f\nCLK is typically more \ndesirable given a choice, because the filtering requirements of \nthe first IF often depend on the transition region between the IF \nfrequency and the image band (±f CLK/4). Lastly, the output SSI \nclock rate, f CLKOUT , and digital driver strength must be set to their  \nlowest possible settings to min imize the potential harmful \neffects of digital induced noise while preserving a reliable data link to the DSP . Note that the SSICRA, SSICRB, and SSIORD \nregisters (0x18, 0x19, and 0x1A) provide a large degree of \nflexibility for optimization of the SSI inter face.  \nSynchronization of Multiple AD9864 Devices  \nSome applications, such as receiver diversity and beam steering, \nmay require two or more AD9864 devices operating in parallel \nwhile maintaining synchronization. Figure 73 shows an example  \nof how multiple AD9864 devices can be cascaded, with one device  \nserving as the master and the other devices serving as the slaves. In this example, all of the devices have the same SPI register configuration since they share the same SPI interface to the \nD S P.  B e c ause the state of each of the internal counters of the \nAD9864 devices is unknown upon initialization, synchronization  \nof the devices is required via a SYNCB pulse (see Figure 37) to \nsynchronize their digital filters and to ensure precise time \nalignment of the data streams.  \nAlthough the synthesizers of all of the device are enabled, the LO and CLK signals for the  slave(s) are derived from the \nsynthesizers of the master and are referenced to an external crystal oscillator. All of the necessary external components (the loop filters, varactor, LC, and VCO) required to ensure proper closed -loop operation of the master  synthesizers are included. \nNote that the FREF input of the slave devices must be tied to ground.  \nNote that although the VCO output of the LO synthesizer is ac -\ncoupled to the LO input(s) of the slave, all of the CLK inputs of \nthe devices must be dc -coupled  if the CLK oscillators of the \nAD9864 are enabled. This is because of the dc current required \nby the CLK oscillators in each device. In essence, these negative \nimpedance cores are operating in par allel, increasing the \neffective Q of the LC resonator circuit. R\nBIAS must be sized such \nthat the sum of the dc bias currents of the oscillators maintains \na common -mode voltage of approximately 1.6 V .  35\n25\n2324\n33\n3531\n29\n2843\n4247\n19\n2025\n2324\n3331\n29\n2819\n20\n43\n4247\nVCOFS\nDOUTA\nCLKOUTFREF\nCLKP\nCLKN\nLOP\nLONIFIN15\nAD9864\nMASTERIOUTC\nLOOP\nFILTER38\nIOUTC15\nPE\nPCPD\nLOP\nLONIFIN\nFS\nDOUTA\nCLKOUTSYNCB\nTO\nDSPCLKP\nCLKNIOUTLTO DSP\nFROM\nDSPLOOP\nFILTER\nCVARRD\nRF CP\nCZ0.1µF\nLOSCRBIASCOSC\nTO OTHER\nAD9864sFROM\nCRYSTAL\nOSCILLATIONVDDC\nTO OTHER\nAD9864sAD9864\nSLAVE\nFREF\n04319-0-073PE\nPCPD\nSYNCB\n \nFigure 74. Example of Synchro nizing Multiple AD9864 Devices  \nData Sheet  AD9864  \n \nRev. A | Page 43 of 47 Split Path Rx Architecture  \nA split path Rx architecture may be attractive for those \napplications whose instantaneous dynamic range requirements exceed the capability  of a single AD9864 device. To cope with \nthese higher dynamic range requirements, two AD9864 devices \ncan be operated in parallel with th eir respective clip points \noffset by a fixed amount. Adding a fixed amount of attenuation in front of the AD9864 and/or programming the attenuation \nsetting of its internal VGA can adjust the input -referred clip \npoint. To save power and simplify hardware, the LO and CLK circuits of the device can also be shared. Connecting the \nSYNCB pins of the two devices and pulsing this line low \nsynchronizes the two devices.  \nAn example of this concept for possibl e use in a GSM base \nstation is shown in Figure 75. The signal chain consists of a high \nlinearity RF front end and IF stage followed by two AD9864 devices operating in parallel. The RF front end consists of a duplexer and preselect filter to pass the GSM RF band of interest. A high performance LNA isolates the duplexer from the preselect filter while providing su fficient gain to minimize \nsystem NF . An RF mixer is used to downconvert the entire GSM band to a suitable IF , where much of the channel selectivity is accomplished. The 170.6 MHz  IF is chosen to avoid any self \ninduced spurs from the AD9864 . The IF stage consists of two \nSAW filters isolated by a 15 dB gain stage.  \nThe cascaded SAW filter response must provide sufficient blocker  \nrejection for the receiver to meet its sensitivity requirements under worst -case blocker conditions. A composite response \nhaving 27 dB, 60 dB, and 100 dB rejection at frequency offsets of ±0.8 MHz, ± 1.6 MHz, and ± 6.5 MHz, respectively, provides \nenough blo cker suppression to ensure that the AD9864 with the \nlower clip point is not overdriven by any blocker. This \nconfiguration results in the best possible receiver sensitivity under all blocking condi tions.  The output of the last SAW filters drives the two AD9864 devices via a direct signal path and an attenuated signal path. The direct path corresponds to the AD9864 having the lowest \nclip point and provides the highest receiver sensitivity with a \nsystem noise figure of 4.7 dB. The VGA of this device is set for \nmaximum attenuation, so its clip point is approximately −17 dBm. Since conv ersion gain from the antenna to the \nAD9864 is 19 dB, the digital output of this path is  nominally \nselected unless the target signal’s power exceeds −36 dBm at the antenna. The attenuated path corr esponds to the AD9864 \nhaving the highest input -referred clip point, and its digital \noutput point of this path is set to 7 dBm by inserting a 30 dB attenuator and setting the VGA of the AD9864 to the middle of \nits 12  dB range. This setting results in a ± 6 dB adjustment of the \nclip point, allowing the clip point difference to be calibrated to \nexactly 24 dB, so that a simple 5 -bit shift would  make up the \ngain difference. The attenuated path can handle signal levels up \nto −12 dB at the antenna before being overdriven. Because  the \nSAW filters provide sufficient blocker suppression, the digital \ndata from this path need only be selected when the t arget signal \nexceeds −36 dBm. Although the sensitivity of the receiver with the attenuated path is 20 dB lower than the direct path, the \nstrong target signal ensures a sufficiently high carrier -to-noise \nratio.  \nBecause GSM is based on a TDMA scheme, digital  data (or \npath) selection can occur on a slot -by-slot basis. Configure the \nAD9864 to provide serial I and Q data at a frame rate of \n541.67 kSPS, as well as additional information including a 2 -bit \nreset field and a 6 -bit RSSI field. These two fields contain the \ninformation needed to decide whether the direct or attenuated path is to be used for the current time slot.  \n \n \n \nAD9864  Data Sheet  \n \nRev. A | Page 44 of 47 VCO\nLNA\nMIXERIF SAW 1I F SAW 2 DUPLEXER PRESELECT\nGAIN = –2dB\nNF = 2dBGAIN = 22dB\nNF = 1dBGAIN = –3dB\nNF = 3dBGAIN = 5dB\nNF = 12dBIF\nAMP\nGAIN = –9dB\nNF = –9dBGAIN = 15dB\nNF = 2dB13MHz\nDSP\nOR\nASIC36dB\nPAD\n25\n2324PE\nPCPD\n33 SYNCB31 FS\n29\n28DOUTA\nCLKOUT35 19\n20CLKP\nCLKN\nLOP\nLON43\n424715\nAD9864\nMASTER\nLOOP\nFILTER\n15\nIO\n25\n2324PE\nPCPD\n35LOP\nLON43\n42IFIN47\nAD9864\nSLAVE\n31 FS\n29\n28DOUTA\nCLKOUT33 SYNCB\n19\n20CLKP\nCLKNIOUTLLOOP\nFILTER\nCVARRD\nRF CP\nCZ0.1µF\nLOSCRBIAS\nCOSCVDDC\nIFIN\n38IOATTENUATED PATH WITH\nCLIP POINT = 7.0dBm\nDIRECT PATH WITH\nCLIP POINT = –17dBm\nFREFFREF\n04319-0-074 \nFigure 75. Example of Split Path Rx Architecture to Increase Receiver Dynamic Range Capabilities  \n \nHung Mixer Mode  \nThe AD9864 can operate in hung mixe r mode by tying one of \nthe self biasing in puts of the LO to ground (that is, GNDI), or \nthe positive supply (VDDI). In this mode, the AD9864 acts as a \nnarrow -band, band -pass Σ-∆ ADC, because its mixer passes the \nIFIN signal without any fre quency translation. The IFIN signal \nmust be centered around the resonant frequency of the Σ -∆ \nADC, fCLK/8, and the clock rate, fCLK, and decimation factors \nmust be selected to accommodate the bandwidth of the desired \ninput signal. Note that the LO synthesi zer can be disabled \nbecause it is no longer required.  \nBecause the mixer does not have any losses associated with the \nmixing operation, the conversion gain through the LNA and mixer is higher resulting in a nominal input clip point of −24 dBm. The SNR perfo rmance is dependent on the VGA \nattenuation setting, I/Q data resolution, and output bandwidth as shown in Figure 76. Applications requiring the highest \ninstantaneous dynamic range must set the VGA for maximum attenuation. Several extra decibels in SNR performance can be gained at lower signal bandwidths by using 24 -bit I/Q data.  \n0105 SNR (dB)95\nBW (kHz)85\n80\n80 120 140 160 40 20 60 100100\n90\nMIN ATTEN WITH\n24-BIT I/Q DATAMAX ATTEN WITH\n16-BIT I/Q DATA\nMIN ATTEN WITH\n16-BIT I/Q DATAMAX ATTEN WITH24-BIT I/Q DATAfCLK = 18MSPS\n04319-0-075 \nFigure 76. Hung Mixer SNR vs. BW and VGA  \n \n \nData Sheet AD9864\n \nRev. A | Page 45 of 47 LAYOUT EXAMPLE, EVALUATION BOARD, AND \nSOFTWARE \nThe evaluation platform and its accompanying software provide \na simple way to evaluate the AD9864. Figure 77 shows the \nAD9864 evaluation board connected to the HSC-ADC-\nEVALCZ  data capture card in its simplest configuration with \nonly an external 5 V lab supply and RF signal generator \nrequired for the AD6676 evaluation board. The evaluation \nboard is designed to be flexible, supporting different IFs as well as LO and CLK generation schemes. An alternative right angle \n18-pin header is available for monitoring digital input/output \nsignals or interfacing to other FPGA, DSP, or microcontroller development platforms. The evaluation board also serves as a \nlayout example.  \nThe power supply distribution block provides filtered, \nadjustable voltages to the main core of the AD9864 as well as \nthe digital input/output supply. In the IF input signal path, \ncomponent pads are available to implement different IF \nimpedance matching networks. The LO and CLK signals can be externally applied or internally derived from on-board VCOs supporting the on-chip LO and CLK synthesizers. The reference for the on-chip LO and CLK synthesizers can be applied via the \nexternal f\nREF input or an via the on-board crystal oscillator. \n04319-0-177 \nFigure 77. Evaluation Board Platform A simple software SPI control graphical user interface (GUI) \nprovides a ways to configure the AD9864. Analog Devices \nVisualAnalog  software is used for real-time data analysis. These \nprograms have a convenient GUI that allows easy access to the \nvarious SPI port configuration registers and frequency/time \ndomain analysis of the output data. \nSPI INITIALIZATION EXAMPLE \nTable 24 shows an example SPI initialization sequence that is \nused to configure the device when using both the on-chip LO \nand CLK synthesizer. Note the following: \n\uf0b7 Step 4 through Step 10 can be avoided if an external clock \nis supplied. Note that clock synthesizer and oscillator must also be disabled in Step 3 (0 x00 = 0x7F) and remain disabled \nin Step 15 (0x70 or 0x30 depending on the LO synthesizer \nbeing enabled).  \n\uf0b7 Step 20 to Step 24 can be avoided if an external LO source \nis supplied.  \n\uf0b7 Wait states are included for both tuning procedure and clock synthesizer (if used).  \n \n   \n \nAD9864  Data Sheet  \n \nRev. A | Page 46 of 47 DEVICE SPI INITIALIZ ATION  \nTable 24 shows an example SPI initialization script when both the CLK SYN/OSC and LO SYN are used.  \nTable 24. SPI Initialization Example, f CLKIN  = 16.8 MHz, f ADC = 18 MHz, f IF = 73.35 MHz, LO = 71.10 MHz, f DATA_IQ  = 60 k SPS with \nDecimate by 300  \nStep  Address (Hex)  Write Value  Description  \n1 0x3F  0x99  Software reset.  \n2 0x19  0x87  Enable 4 -wire SPI readback while keeping default 16 -bit I/Q word width and maximum CMOS \noutput drive strength.  \n3 0x00  0x45  Take REF, GC , and CLK SYN/LO out of standby.  \nConfigure Clock Synthesizer  \n4 0x01  0x0C  Set the CK oscillator bias to 0.65 mA for maximum swing.  \n5 0x10  0x00  Set the CLK synthesizer  MSB  and LSB reference frequency divider. (Note that default setting is \nshown resulting in divide by 56.)  6 0x11  0x38  \n7 0x12  0x00  Set the CLK synthesizer MSB and LSB reference frequency divider. (Note that default setting is \nshown resulting in divide by 300.)  8 0x13  0x3C  \n9 0x14  0x03  Set the CLK synthesizer charge pump to 0.625 mA. (Note that setting depends on PLL loop \nconfiguration.)  \n10 Not applicable  Not applicable  Wait until the CLK SYN output frequency settles to within 0.01% of final frequency.  \nBegin LC and RC Resonator Calibration  \n11 0x3E  0x47  Disable the internal ADC unstable signal. Enable RC Q enhancement, and bypass the RC and SC \nresonators.  \n12 0x38  0x01  Enable manual control of feedback DAC.  \n13 0x39  0x0F  Set DAC to midscale.  \n14 0x1C  0x03  Set LC and RC tuning bits.  \n15 0x00  0x44  Bring ADC out of standby to initiate LC and RC calibration.  \n16 0x1C  Readback value  Wait 6 ms and read back Register 0x1C. If Register 0x1C clears, proceed to Step 17. If Register 0x1C  \ndoes not clear, reset Reg ister 0x1C and return to Step 14. Make five attempts before exiting loop.  \n17 0x38  0x00  Disable manual control of feedback DAC.  \n18 0x3E  0x00  Re-enable ADC unstable signal, disable RC_Q enhancement, and disable bypass of RC and SC \nresonators.  \nEnd of LC and RC Resonator Calibration  \n19 0x00  0x00  Bring LNA/Mixer and LO synthesizer out of standby.  \nConfigure LO Synthesizer  \n20 0x08  0x00  Set the LO synthesizer MSB and LSB reference frequency divider. (Note that the default setting \nis shown resulting in divide by 56.)  21 0x09  0x38  \n22 0x0A  0xA0  Set the LO synthesizer A and B counters. (Note that the default setting is shown resulting in \ndivide by  237.)  23 0x0B  0x1D  \n24 0x0C  0x03  Set the LO synthesizer charge pump to 0.625 mA. (Note that setting depends on PLL loop \nconfiguration.)  \nConfigure Remaining SPI Registers  \n25 0x03 to 0x07   Set AGC registers.  \n26 0x07  0x04  Set decimation factor to 300. \n27 0x1A  0x01  Set SSIORD register, which determines the CLKOUT frequency.  \n28 0x18  0x40  Take FS and CLKOUT out of tristate and configure SSI frame format.  \n \nData Sheet AD9864\n \nRev. A | Page 47 of 47 OUTLINE DIMENSIONS \n \nCOMPLIANT TO JEDEC STANDARDS MO-220-VKKD-2148\n12\n1337\n36\n24255.25\n5.10 SQ\n4.95\n0.500.400.300.300.230.18\n0.80 MAX0.65 TYP5.50 REF\nCOPLANARITY\n0.08\n0.20 REF1.000.85\n0.800.05 MAX0.02 NOM\nSEATING\nPLANE12° MAXTOP VIEW0.60 MAX\n0.60 MAX\nPIN 1\nINDICATOR 0.50\nREFPIN 1\nINDICATOR\n0.25 MIN7.10\n7.00 SQ6.90\n6.85\n6.75 SQ\n6.65\n06-05-2012-AFOR PROPER CONNECTION OF\nTHE EXPOSED PAD, REFER TOTHE PIN CONFIGURATION ANDFUNCTION DESCRIPTIONS\nSECTION OF THIS DATA SHEET.EXPOSED\nPAD\n \nFigure 78. 48-Lead Lead Frame Chip Scale Package [LFCSP]  \n7 mm × 7 mm Body and 0.85 mm Package Height \n(CP-48-1) \nDimensions shown in millimeters \n \nORDERING GUIDE \nModel1 Temperature Range Package Description Package Option \nAD9864BCPZ −40°C to +85°C 48-Lead Lead Frame Chip Scale Package [LFCSP] CP-48-1 \nAD9864BCPZRL −40°C to +85°C 48-Lead Lead Frame Chip Scale Package [LFCSP] CP-48-1 \nAD9864-EBZ  Evaluation Board  \n \n1 Z = RoHS Compliant Part. \n \n \n©2003–2016 Analog Devices, Inc. All rights reserved. Trademarks and  \n registered trademarks are the property of their respective owners. \n  D04319-0-2/16(A)  \n"}]
!==============================================================================!
### Component Summary: AD9864BCPZ

#### Key Specifications:
- **Voltage Ratings**: 
  - Supply Voltage (VDDI, VDDF, VDDA, VDDC, VDDL, VDDH): 2.7 V to 3.6 V
  - Digital Supply Voltage (VDDD, VDDC, VDDL): 2.7 V to 3.6 V
  - Interface Supply Voltage (VDDH): 1.8 V to 3.6 V
  - Charge Pump Supply Voltage (VDDP, VDDQ): 2.7 V to 5.5 V

- **Current Ratings**: 
  - Operating Current: 17 mA
  - Standby Current: 0.01 mA

- **Power Consumption**: 
  - Total Power Consumption: Typically 56 mW

- **Operating Temperature Range**: 
  - -40°C to +85°C

- **Package Type**: 
  - 48-lead Lead Frame Chip Scale Package (LFCSP)

- **Special Features**: 
  - Integrated low noise amplifier (LNA), mixer, band-pass Σ-Δ ADC, and decimation filter.
  - Programmable gain control (AGC) with a continuous range of 12 dB.
  - Supports both 16-bit and 24-bit digital output formats.
  - Automatic gain control (AGC) and digital variable gain amplifier (DVGA).
  - SPI interface for configuration and control.

- **Moisture Sensitive Level**: 
  - JEDEC J-STD-020E: Level 2

#### Description:
The **AD9864** is a general-purpose intermediate frequency (IF) subsystem designed for narrow-band radio applications. It digitizes low-level IF signals in the frequency range of **10 MHz to 300 MHz** with a signal bandwidth from **6.8 kHz to 270 kHz**. The device integrates a low noise amplifier (LNA), a mixer, a band-pass Σ-Δ analog-to-digital converter (ADC), and a programmable decimation filter. The ADC can operate at a clock frequency of up to **26 MSPS** and provides a high dynamic range, making it suitable for applications requiring precise signal processing.

#### Typical Applications:
- **Multimode Narrow-Band Radio Products**: The AD9864 is ideal for various radio communication standards, including TETRA, APCO25, and GSM/EDGE.
- **Analog/Digital UHF/VHF FDMA Receivers**: It can be used in frequency division multiple access (FDMA) systems for efficient signal processing.
- **Portable and Mobile Radio Products**: The low power consumption and compact package make it suitable for battery-operated devices.
- **SATCOM Terminals**: The device can be utilized in satellite communication systems for signal demodulation and processing.

The AD9864's combination of features, including programmable gain control, low power consumption, and high dynamic range, makes it a versatile choice for modern communication systems.