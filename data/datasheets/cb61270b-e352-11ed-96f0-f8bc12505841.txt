[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of ADE7953ACPZ-RL production of ANALOG DEVICES from the text: Single Phase, Multifunction Metering IC \nwith Neutral Current Measurement\nData Sheet ADE7953\n \n Rev. C  Document Feedback \nInformation furnished by Analog Devices is believed to be accurate and reliable. However, no \nresponsibility is assumed by Analog Devices for its use, nor for any infringements of patents or other \nrights of third parties that may result from its use. Specifications subject to change without notice. No license is granted by implication or otherwise under any patent or patent rights of Analog Devices. Trademarks and registered trademarks are the property of their respective owners.   \n \nOne Technology Way, P.O. Box 9106, Norwood, MA 02062-9106, U.S.A.\nTel: 781.329.4700 ©2011–2016 Analog Devices, Inc. All rights reserved. Technical Support  www.analog.com   FEATURES \nHighly accurate; supports EN 50470-1, EN 50470-3, IEC 62053-\n21, IEC 62053-21, IEC 62053-22, and IEC 62053-23 standards \nMeasures active, reactive, and apparent energy; sampled \nwaveform; current and voltage rms \nProvides a second current input for neutral current \nmeasurement \nLess than 0.1% error in active and reactive energy \nmeasurements over a dynamic range of 3000:1 \nLess than 0.2% error in instantaneous IRMS measurement \nover a dynamic range of 1000:1 \nProvides apparent energy measurement and instantaneous \npower readings \n1.23 kHz bandwidth operation \nFlexible PGA gain stage (up to ×22) Includes internal integrators for use with Rogowski coil sensors SPI, I\n2C, or UART communication \nGENERAL DESCRIPTION \nThe ADE7953  is a high accuracy electrical energy measurement \nIC intended for single phase applications. It measures line voltage \nand current and calculates active, reactive, and apparent energy, \nas well as instantaneous rms voltage and current.  The device incorporates three Σ-Δ ADCs with a high accuracy \nenergy measurement core. The second input channel simulta-\nneously measures neutral current and enables tamper detection and neutral current billing. The additional channel incorporates a complete signal path that allows a full range of measurements. Each input channel supports independent and flexible gain stages, \nmaking the device suitable for use with a variety of current sensors \nsuch as current transformers (CTs) and low value shunt resistors. \nTwo on-chip integrators facilitate the use of Rogowski coil sensors. \nThe ADE7953  provides access to on-chip meter registers via a \nvariety of communication interfaces including SPI, I\n2C, and UART. \nTwo configurable low jitter pulse output pins provide outputs that \nare proportional to active, reactive, or apparent energy, as well as \ncurrent and voltage rms. A full range of power quality information \nsuch as overcurrent, overvoltage, peak, and sag detection are \naccessible via the external IRQ pin. Independent active, reactive, \nand apparent no-load detections are included to prevent “meter creep. ” Dedicated reverse power ( REVP\n), zero-crossing voltage \n(ZX), and zero-crossing current (ZX_I) pins are also provided. The \nADE7953  energy metering IC operates from a 3.3 V supply voltage \nand is available in a 28-lead LFCSP package. \nFUNCTIONAL BLOCK DIAGRAM \nIAP\nIAN\nVP\nVN\nIBP\nIBNADE7953\nAGND\nDGND\nCS SCLK CLKINREF RESET VDD VINTA VINTD\nCLKOUTREVP\nZXCF2CF1\nZX_I\n09320-001IRQPGA\nPGA\nPGA1.2V REF\nX2AIRMSLPFAIRMSOS\nX2AVRMSLPF\nLPF VRMSOSAVAGAIN\nAWGAIN AWATTOS\nAVARGAIN AVAROSDFCCF1DEN\n:\nDFCCF2DEN\n: VGAIN APHCAL\nHPFAIGAINDIGITAL\nINTEGRATOR\nHPFADC\nADC\nADCACTIVE, REACTIVE AND\nAPPARENT ENERGIES AND\nVOLTAGE/CURRENT RMS\nCALCULATION FOR PHASE B\n(SEE PHASE A FOR DETAILED\nDATA PATH).COMPUTATIONAL\nBLOCK FOR TOTAL\nREACTIVE POWER\nCONFIGURATION\nAND CONTROL\nUART SPI INTERFACE I2CREVP\nZX\nZX_I\nPEAK\nANGLE\nPOWER FACTOR\nSAGLOW\nNOISE\nPRE-AMP\nPHASE\nAA N D  B\nDATA\nMISO/\nSDA/TxMOSI/\nSCL/Rx \nFigure 1. \nADE7953  Data Sheet  \n \nRev. C | Page 2  of 72 TABLE OF CONTENTS  \nFeatures  .....................................................................................1  \nGeneral Description  ..................................................................1  \nFunctional Block Diagram .........................................................1  \nRevision History  ........................................................................3  \nSpecifications  .............................................................................4  \nTiming Characteristics ...........................................................6  \nAbsolute Maxi mum Ratings  ......................................................8  \nESD Cau tion  ..........................................................................8  \nPin Configuration and Function Descriptions ...........................9  \nTypical Performance Characteristics  .......................................11  \nTest Circuit  ..............................................................................16  \nTerminology  ............................................................................17  \nADE7953 Power -Up Procedure  ...............................................18  \nRequired Register Setting .....................................................18  \nTheory of Operation ................................................................19  \nAnalog Inputs  ......................................................................19  \nAnalog -to-Digital Conversion  .............................................19  \nCurrent Channel ADCs  .......................................................21  \nVoltage Channel ADC ..........................................................21  \nReference Circuit  ................................................................. 22 \nRoot Mean Square Measurement .............................................23  \nCurrent Channel RMS Calculation  ......................................23  \nVoltage Channel RMS Calculation  .......................................23  \nActive Power Calculation .........................................................24  \nSign of Active Power Calculation  .........................................25  \nActive Energy Calculation ....................................................25  \nActive Energy Accumulation Modes ....................................27  \nReactive Power Calculati on .....................................................28  \nSign of Reactive Power Calculation ......................................28  \nReactive Energy Calculation  ................................................29  \nReactive Energy Accumulation Modes  ................................30  \nApparent Power Calculation  ....................................................31  \nApparent Energy Calculation ...............................................31  \nAmpere -Hour Accumulation  ...............................................32  \nEnergy -to-Frequency Conversion ............................................33  \nPulse Output Charact eristics ................................................33  \nEnergy Calibration ...................................................................34  \nGain Calibration  ..................................................................34  \nPhase Cali bration  ................................................................. 34 \nOffset Calibration  ................................................................35  Period Measurement  ............................................................... 36 \nInstantan eous Powers and Waveform Sampling  ...................... 37 \nPower Factor  ........................................................................... 38 \nUsing the Line Cycle Accumulation Mode to Determine the \nPower Factor ........................................................................ 38 \nPower Factor with No -Load Detection  ................................ 38 \nAngle Measurement ............................................................. 39 \nNo-Load  Detection .................................................................. 40 \nSetting the No -Load Thresholds  .......................................... 40 \nActive Energy No -Load Detection ....................................... 40 \nReactive Energy No -Load Detection  ................................... 41 \nApparent Energy No -Load Detection  .................................. 41 \nZero -Crossing Detection  ......................................................... 43 \nZero -Crossing Output Pins .................................................. 43 \nZero -Crossing Interrupts ..................................................... 43 \nZero -Crossing T imeout  ....................................................... 44 \nZero -Crossing Threshold ..................................................... 44 \nVoltage Sag Detection .............................................................. 45 \nSetting the SAGCYC Register  .............................................. 45 \nSetting the SAGLVL Register  ............................................... 45 \nVoltage Sag Interrupt  ........................................................... 45 \nPeak Detection  ........................................................................ 46 \nIndication of Power Direction  ................................................. 47 \nReverse Power ...................................................................... 47 \nSign Indication  .................................................................... 47 \nOvercurrent and Overvoltage Detection  .................................  48 \nSetting the OVLVL and OILVL Registers  ............................ 48 \nOvervoltage and Overcurrent Interrupts  ............................. 48 \nAlternative Output Func tions .................................................. 49 \nADE7953 Interrupts  ................................................................ 50 \nPrimary Interrupts (Voltage Channel and Current Channel  A) .......................................................................... 50\n \nCurrent Channel B Interrupts .............................................. 50 \nCommunicating with the ADE7953  ........................................ 51 \nCommunicatio n Autodetec tion  ........................................... 51 \nLocking the Communication Interface  ................................ 51 \nSPI Interface  ........................................................................ 52 \nI2C Interface ......................................................................... 53 \nUART Interface .................................................................... 55 \nCommunication Verification and Security  .............................. 57 \nData Sheet ADE7953\n \nRev. C | Page 3 of 72 Write Protection .......................................................................... 57 \xa0\nCommunication Verification ..................................................... 57 \xa0\nChecksum Register ..................................................................... 58 \xa0\nADE7953 Registers ......................................................................... 60 \xa0ADE7953 Register Descriptions ............................................... 62 \xa0\nLayout Guidelines ........................................................................... 68 \xa0\nOutline Dimensions ........................................................................ 69 \xa0\nOrdering Guide ........................................................................... 69 \xa0\n \nREVISION HISTORY \n12/2016—Rev. B to Rev. C \nChanged CP-28-6 to CP-28-10 .................................... Throughout \nChanges to Figure 4 ........................................................................... 9 Changes to Period Measurement Section .................................... 36 Updated Outline Dimensions ........................................................ 69 Changes to Ordering Guide ........................................................... 69  \n11/2013—Rev. A to Rev. B \nChanges to Features Section ............................................................ 1 Changed Input Clock Frequency from 3.58 MHz (Max) to 3.54 MHz (Min)/3.58 MHz (Typ)/3.62 MHz (Max) .................... 5 Changed t\nDAV from 80 ns (Min) to 80 ns (Max) ............................ 6 \nChanged t HD;DAT  (Min) from 0 μs to 0.1 μs ..................................... 7 \nChanges to EPAD Note..................................................................... 9 Changes to Figure 35 ...................................................................... 16 Changes to Current Channel ADCs Section and Voltage Channel ADC Section .................................................................... 21 \nChanges to Figure 45 ...................................................................... 24 \nChanges to Figure 46 ...................................................................... 25 Changes to Current Channel Gain Adjustment Section ............ 34 Changes to RMS Offsets Section ................................................... 35 Changes to Equation 37 .................................................................. 38 \nChanges to First Paragraph in No-Load Detection Section ...... 40 \nChanges to Communication Autodetection Section and Locking the Communication Interface Section .......................... 51 Changes to I\n2C Interface Section ................................................... 53 \nChanges to Write Protection Section ............................................ 57 Changes to Figure 76 ...................................................................... 58 \nChanges to Table 12 ........................................................................ 59 \nChanges to Table 13 and Table 14 ................................................. 60 Changes to Table 15 ........................................................................ 61 \nChanges to Table 18 ........................................................................ 62 \nAdded Layout Guidelines Section ................................................. 68 Updated Outline Dimensions ........................................................ 69  11/2011—Rev. 0 to Rev. A Changes to Figure 1 .......................................................................... 1 \nChanges to Table 1 ............................................................................ 3 \nChanges to Absolute Maximum Ratings Section ......................... 8 Changes to Table 5 ............................................................................ 9 Replaced Typical Performance Characteristics Section ............. 11 Changes to Figure 35 ...................................................................... 16 \nAdded ADE7953 Power-Up Procedure Section ......................... 18 \nChanges to Voltage Channel Section ............................................ 19 Changes to Current Channel RMS Calculation Section and  Voltage Channel RMS Calculation Section ................................. 23 Changes to Active Power Calculation Section ............................ 24 \nChanges to Active Energy Integration Time Under Steady \nLoad Section .................................................................................... 25 Changes to Reactive Power Calculation Section ........................ 28 Changes to Reactive Energy Integration Time Under Steady Load Section .................................................................................... 29 \nChanges to Figure 65 ...................................................................... 47 \nChanges to Write Protection Section ........................................... 57 Replaced Checksum Register Section and added Figure 75 and Figure 76 ........................................................................................... 58 Changes to Table 12 ........................................................................ 59 Changes to Table 14 ........................................................................ 60 \nChanges to Table 15 ........................................................................ 61 \nReplaced Interrupt Enable Section and Interrupt Status  Registers Section ............................................................................. 66  2/2011—Revision 0: Initial Version \n \nADE7953  Data Sheet  \n \nRev. C | Page 4  of 72 SPECIFICATIONS  \nVDD  = 3.3 V ± 10%, AGND  = DGND  = 0  V,  o n -chip reference, CLKIN  = 3.58 MHz, T MIN to T MAX = −40°C to +85°C , Register Address 0x120 \nset to 0x30, unless otherwise noted . \nTable 1.  \nParameter  Min  Ty p  Max  Unit  Test Conditions/Comments  \nPHASE ERROR BETWEEN CHANNELS      Line frequency  = 45 Hz to 65 Hz, HPF on  \nPower Factor  = 0.8 Capacitive    ±0.05  Degrees  Phase lead 37°  \nPower F actor = 0.5 Inductive    ±0.05  Degrees  Phase lag 60°  \nACTIVE ENERGY MEASUREMENT       \nActive Energy Measurement Error \n(Current C hannel A)   0.1  % Over a dynamic range of 3 000: 1, PGA  = 1, \nPGA  = 22, integrator  off \nActive Energy Measurement Error \n(Current Channel B)  0.1  % Over a dynamic range of 1 000: 1, PGA  = 1, \nPGA  = 16, integrator off  \nAC Power Supply Rejection      VDD = 3.3 V ± 120 mV rms , 100 Hz  \nOutput Frequency Variation   0.01   %  \nDC Power Supply Rejec tion      VDD = 3.3 V ± 330 mV dc  \nOutput Frequency Variation   0.01   %  \nActive Energy Measurement Bandwidth   1.23   kHz −3 db \nREACTIVE ENERGY MEASUREMENT       \nReactive Energy Measurement Error \n(Current Channel A)  0.1  % Over a dynamic range of 3000:1, PG A = 1, \nPGA  = 22, integrator off  \nReactive Energy Measurement Error \n(Current Channel B)  0.1  % Over a dynamic range of 1000:1, PGA  = 1, \nPGA  = 16, integrator off  \nAC Power Supply Rejection      VDD = 3.3 V ± 120 mV rms , 100 Hz  \nOutput Frequency Variation   0.01  %  \nDC Power Supply Rejection      VDD = 3.3 V ± 330 mV dc  \nOutput Frequency Variation   0.01   %  \nReactive Energy Measurement \nBandwidth   1.23   kHz −3 db \nRMS MEASUREMENT       \nIRMS and VRMS Measurement \nBandwidth   1.23   kHz  \nIRMS (Current Channel A) Measurement \nError  0.2  % Over a dynamic range of 1000:1, PGA  = 1, \nPGA  = 22, integrator off  \nIRMS (Current Channel B) and VRMS \nMeasurement Error  0.2  % Over a dynamic range of 500:1, PGA  = 1, \nPGA  = 16, integrator off  \nANALOG INPUTS       \nMaximum Signal Levels    ±500  mV peak  Differential inputs: IAP to IAN, IBP to IBN  \n   ±500  mV peak  Single -ended input: VP to VN, IBP to IBN  \n   ±250  mV peak  Single -ended i nput: IAP to IAN  \nInput Impedance (DC)       \nIAP Pin  50   MΩ  \nIAN Pin  50   MΩ  \nIBP , IBN, VP , VN Pins  540    kΩ  \nADC Offset  Error     Uncalibrated error (see the T erminology  \nsection)  \nCurrent  Channel B, Voltage Channel   0 ±10 mV  \nCurrent Channel A    −12 mV PGA = 1  \n   −1 mV PGA = 16, PGA = 22  \nGain Error     External 1.2 V reference  \nCurrent Channel A   ±3  %  \nCurrent Channel B   ±3  %  \nVoltage Channel   ±3  %  \nData Sheet  ADE7953  \n \nRev. C | Page 5  of 72 Parameter  Min  Ty p  Max  Unit  Test Conditions/Comments  \nANALOG PERFORMANCE       \nSignal -to-Noise Ratio       \nCurrent Channel A  74  dB  \nCurrent Channel B   72  dB  \nVoltage Channel   70    \nSignal -to-Noise -and-Distortion Ratio       \nCurrent Channel A, Current Channel B   68  dB  \nVoltage Channel   65  dB  \nBandwidth (−3 dB)   1.23   kHz  \nCF1 AND  CF2 PULSE OUTPUTS       \nMaximum Output Frequency   206.9   kHz  \nDuty Cycle   50  % CF1 or CF2 frequency > 6.25 Hz  \nActive Low Pulse Width   80  ms CF1 or CF2 frequency < 6.25 Hz  \nJitter   0.04   % CF1 or CF2 frequency = 1 Hz \nOutput High Voltage, V OH 2.4   V ISOU RCE  = 500 µA  at 25°C  \nOutput Low Voltage, V OL   0.4 V ISI N K = 8 mA  at 25°C  \nREFERENCE      Nominal 1.2 V at REF pin  \nREF Input Voltage Range  1.19  1.2 1.21  V TMIN to T M ax \nInput Capacitance    10 pF  \nReference Error   ±0.9   mV TA = 25°C  \nOutput Impedance  1.2   kΩ  \nT emperature Coefficient   10 50 ppm/°C   \nCLKIN/CLKOUT PINS      All specifications CLKIN = 3.58 MHz  \nInput Clock Frequency  3.54  3.58  3.62 MHz   \nCrystal Equivalent Series Resistance  30  200  Ω  \nLOGIC INPUTS —RESET , CLKIN, CS, SCLK, \nMOSI/ SCL/Rx, MISO/SDA/Tx       \nInput High Voltage, V INH 2.4   V VDD = 3.3 V ± 10%  \nInput Low Voltage, V INL   0.8 V VDD = 3.3 V ± 10%  \nInput Current, I IN     VIN = 0 V  \nMOSI/SCL/Rx, MISO/SDA/Tx, RESET    −10 µA  \nCS, SCLK    1 µA  \nInput Capacita nce, C IN   10 pF  \nLOGIC OUTPUTS —IRQ, REVP , ZX, ZX_I, \nCLKOUT, MOSI/SCL/Rx, MISO/SDA/Tx      VDD = 3.3 V ± 10%  \nOutput High Voltage, V OH 3.0   V ISOU RCE  = 800 µA  \nOutput Low Voltage, V OL   0.4 V ISI N K = 2 mA  \nPOWER SUPPL Y      For specified performance  \nVDD 3.0   V 3.3 V − 10%  \n   3.6 V 3.3 V + 10%  \nIDD  7 9 mA  \n \n \nADE7953  Data Sheet  \n \nRev. C | Page 6  of 72 TIMING CHARACTERISTICS  \nSPI Interface Timing  \nVDD  = 3.3 V ± 10%, AGND  = DGND  = 0  V,  o n -chip reference, CLKIN  = 3.58 MHz , TMIN to T MAX = −40°C to +85°C, unless otherwise noted.  \nTable 2.  \nParameter  Description  Min1 Max1 Unit  \ntCS CS to SCLK edge  50  ns \ntSCLK SCLK period  200   ns \ntSL SCLK low pulse width  80  ns \ntSH SCLK high pulse width  80  ns \ntDAV Data output valid after SCLK edge   80 ns \ntD SU Data input  setup time before SCLK edge  70  ns \ntDHD Data input hold time after SCLK edge  5  ns \ntDF Data output fall time   20 ns \ntDR Data output rise time   20 ns \ntSR SCLK rise time   20 ns \ntSF SCLK fall time   20 ns \ntDIS MISO disabled after CS rising edge  5 40 ns \ntSFS CS high after SCLK edge  0  ns \ntSFS_ LK CS high a fter SCLK edge (when writing to \nCOMM_LOCK bit)  1200   ns \n \n1 Min and max values are typical minimum and maximum values.  \n \n \nSPI Interface Timing Diagram  \n \nLSB ININTERMEDI ATE BITS\nINTERMEDI ATE BITStSFS_LK\ntSFS\ntDIStCS\ntSL\ntDFtSH\ntDHDtDAV\ntDSUtSR tSF\ntDRtSCLK\nMSB IN MOSIMISOSCLKCS\n09320-003MSB OUT LSB OUT\n \nFigure 2. SPI Interface Timing  \n \n \n \n \n \nData Sheet ADE7953\n \nRev. C | Page 7 of 72 I2C Interface Timing \nVDD = 3.3 V ± 10%, AGND = DGND = 0 V , on-chip reference, CLKIN = 3.58 MHz, T MIN to T MAX = −40°C to +85°C, un less otherwise noted. \nTable 3.  \n  Standard Mode Fast Mode  \nParameter Description Min1 Max1 Min1 Max1 Unit \nfSCL SCL clock frequency 0 100 0 400 kHz \ntHD;STA  Hold time for a start or repeated start condition 4.0  0.6  μs \ntLOW Low period of SCL clock 4.7  1.3  μs \ntHIGH High period of SCL clock 4.0  0.6  μs \ntSU;STA  Setup time for a repeated start condition 4.7  0.6  μs \ntHD;DAT  Data hold time 0.1 3.45 0.1 0.9 μs \ntSU;DAT Data setup time 250  100  ns \ntR Rise time of SDA and SCL signals  1000 20 300 ns \ntF Fall time of SDA and SCL signals  300 20 300 ns \ntSU;STO Setup time for stop condition 4.0  0.6  μs \ntBUF Bus-free time between a stop and start condition 4.7  1.3  μs \ntSP Pulse width of suppressed spikes N/A   50 ns \n \n1 Min and max values are typical minimum and maximum values. \n \nI2C Interface Timing Diagram \n \ntF\ntR\ntHD;DATtHD;STA\ntHIGHtSU;STAtSU;DAT\ntFtHD;STA tSP\ntSU;STOtRtBUF\ntLOWSDA\nSCL\nSTART\nCONDITIONREPEATED START\nCONDITIONSTOP\nCONDITIONSTART\nCONDITION\n09320-002 \nFigure 3. I2C Interface Timing \n \nADE7953  Data Sheet  \n \nRev. C | Page 8  of 72 ABSOLUTE MAXIMUM RAT INGS  \nTA = 25°C, unless otherwise noted.  \nTable 4.  \nParameter  Rating  \nVDD to AGND −0.3 V to +3.7 V  \nVDD to DGND −0.3 V to +3.7 V  \nAnalog Input Voltage to AGND,  \nIAP , IAN, IBP , IBN, VP , VN  −2 V to +2  V \nReference Input Voltage to AGND  −0.3 V to VDD + 0.3 V  \nDigital Input Voltage to DGND  −0.3 V to VDD + 0.3 V  \nDigital Output Voltage to DGN D −0.3 V to VDD + 0.3 V  \nOperating T emperat ure  \nIndustrial Range  −40°C to +85°C  \nStorage T emperature Range  −65°C to +150°C  \nNote that r egarding the temperature profile used in soldering \nRoHS -compliant parts, Analog Devices , Inc., advises that reflow \nprofi les should conform to J -STD 20 from JEDEC. Refer to the  \nJEDEC website  for the latest revision.  Stresses at or above those listed under Absolute Maximum \nRatings may cause permanent damage to the product. This is a \nstres s rating only; functional operation of the product at these \nor any other conditions above those indicated in the operational \nsection of this specification is not implied. Operation beyond the maximum operating conditions for extended periods may affect pro duct reliability.  \nESD CAUTION  \n \n \n \n \n \nData Sheet  ADE7953  \n \nRev. C | Page 9  of 72 PIN CONFIGURATION AND FUNCTION DESCRIPTI ONS \n \n09320-0041ZX\n2 RESET\n3 VINTD\n4 DGND\n5 IAP\n6 IAN\n7 PULL_HIGH17VDD18CLKIN19CLKOUT20REVP21ZX_I\n16AGND\n15VINTA8 PULL_HIGH\n9 IBP\n10 IBN\n11 VN\n12VP\n13 REF\n14 PULL_LOW24CF225SCLK26MISO/SDA/Tx27MOSI/SCL/Rx28CS\n23CF1\n22IRQ\nNOTES\n1.CREATE A SIMILAR PAD ON THE PCB UNDER THE EXPOSED\nPAD. SOLDER THE EXPOSED PAD TO THE PAD ON THE PCBTO CONFER MECHANICAL STRENGTH TO THE PACKAGE.CONNECT THE PAD TO AGND AND DGND.ADE7953\nTOP VIEW\n(Not to Scale)\n \nFigure 4. Pin Configuration  \nTable 5. Pin Function Description s \nPin No.  Mnemonic  Description  \n1 ZX Voltage Channel Zero -Crossing Output Pin. See the Voltage Channel Zero Crossing  section.  This pin can  \nbe configured to output a range of alternative power quality signals  (see the Alternative Output Functions  \nsection).  \n2 RESET  Active Low Reset Input . T o initiate a hardware reset , this pin must be brought  low for at minimum of 10  µs. \n3 VINTD  This pin provides access to the 2.5  V digital LDO.  This pin should be decoupled with a 4.7  µF capacitor in \nparallel with a 100  nF ceramic capacitor.  \n4 DGND Ground Reference for the D igital Circuitry . \n5, 6 IAP , IAN  Analog Input for Current Channel A (Phase Current Channel).  This differential voltage input has a maximum  \ninput range of ±500  mV. The maximum pin voltage fo r single -ended  use is ±250  mV. The PGA associated \nwith this input has a maximum gain stage of 22  (see the Analog Inputs  section).  \n7, 8 PULL_HIGH These pins should be connected to VDD for proper operation . \n9, 10  IBP , IBN  Analog I nput for Current Channel B (Neutral Current Channel).  This differential voltage input has a maximum  \ninput range of ±500  mV. The PGA associated with this input has a maximum gain of 16  (see the Analog \nInputs  section).  \n11, 12  VN, V P Analog Input for Voltage Channel.  This differential voltage input has a  maximum input range of ± 500  mV. The \nPGA associated with this input has a maximum gain of 16  (see the Analog Inputs  section) . \n13 REF This pin provides acc ess to the on -chip voltage reference.  The internal reference has a nominal voltage  \nof 1.2  V. This pin should be decoupled with a 4.7  µF capacitor in parallel with a 100  nF ceramic capacitor.  \nAlternatively , an external reference voltage of 1.2  V can be appli ed to this pin  (see the Reference Circuit  \nsection ). \n14 PULL_LOW  This pin should be connected to AGND for proper operation . \n15 V I N TA  This pin provides access to the 2.5  V analog  LDO.  This pin should be decoupled with a 4.7  µF capacitor in \nparallel with a 100  nF ceramic capacitor.  \n16 AGND  Ground Reference for the Analog Circuitry.  \n17 VDD Power Supply (3.3 V) for  the ADE7953 . For specified operation , the input to this pi n should be within  \n3.3 V ± 10%.  This pin should be decoupled with a 10  µF capacitor in parallel with a 100  nF ceramic capacitor.  \n18 CLKIN  Master Clock Input for the ADE7953 . An external clock c an be provided at this input. Alternatively, a parallel  \nresonant AT crystal can be connected across the CLKIN and CLKOUT pins to provide a clock source for the \nADE7953 . The clock frequency for sp ecified operation is 3.58  MHz. Ceramic load capacitors of a few tens of \npicofarad s should be used with the gate oscillator circuit. Refer to the crystal manufacturer’ s data sheet for \nthe load capacitance requirements.  \n19 CLKOUT  A crystal can be connected across this pin and CLKIN to provide a clock source for the ADE7953 . \nADE7953  Data Sheet  \n \nRev. C | Page 10  of 72 Pin No.  Mnemonic  Description  \n20 REVP  Reverse Power Output Indicator.  See the Reverse Power  section.  This pin can be configured to output a \nrange of alternative power quality signals  (see the Alternative Output Functions  section).  \n21 ZX_I  Current Channel Zero -Crossing Output  Pin. See the Current Channel Zero Crossing  section.  This pin can be \nconfigured to output a range of alternative power quality signals (see the Alternative Output Functions  \nsection).  \n22 IRQ Interrupt Output.  See the ADE7953 Interrupts  section.  \n23 CF1 Calibration Frequency Output 1.  \n24 CF2 Calibration Frequency Output 2 . \n25 SCLK  Serial Clock I nput for the Serial Peripheral Interface.  All serial communications are synchronized to the \nclock  (see the SPI Interface  section ). If using the I2C interface , this pin must be pulled high.  If using the \nUART  interface , this pin must be pulled to ground.  \n26 MISO/SDA/Tx  Data Output for SPI Interface /Bidirectional Data Line for I2C Interface / Tr an sm i t  Line for UART Interface.  \n27 MOSI/SCL/Rx  Data Input for SPI Interface /Serial Clock Input for I2C Interface /Receive Line for UART I nterface . \n28 CS Chip Select for SPI Interface . This pin must be pulled high if using the I2C or UART int erface.  \n EPAD  Exposed Pad. Create a similar pad on the PCB under the exposed pad. Solder the exposed pad to the pad \non the PCB to confer mechanical strength to the package.  Connect the pad to AGND  and DGND.  \n \nData Sheet  ADE7953  \n \nRev. C | Page 11  of 72 TYPICAL PERFORMANCE CHARACTERISTICS  \n \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n0.01 0.1 1 10 100ERROR (% OF READING)\nCURRENT CHANNE L (% FULL  SCALE)+25°C–40°C\n+85°C\n09320-101 \nFigur e 5. Current Channel A Active Energy Error as a Percentage of Reading \n(Gain  = 1, Power Factor  = 1) over Temperature with Internal Reference, \nIntegrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n0.01 0.1 1 10 100ERROR (% OF READING)\nCURRENT CHANNE L (% FULL  SCALE)\n09320-102PF = –0.5\nPF = +1.0PF = +0.5\n \nFigure 6. Current Channel A Active Energy Erro r as a Percentage of Reading \n(Gain  = 1, Temperature  = 25°C) over Power Factor with Internal Reference, \nIntegrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n0.01 0.1 1 10 100ERROR (% OF READING)\nCURRENT CHANNE L (% FULL  SCALE)+25°C–40°C\n+85°C\n09320-103 \nFigure 7. Current Channel A Active Energy Error as a Percentage of Reading \n(Gain  = 22, Power Factor  = 1) over  Temperature with Internal Reference, \nIntegrator Off  –1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n0.01 0.1 1 10 100ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)\n09320-104PF = –0.5\nPF = +1.0PF = +0.5\n \nFigure 8. Current Channel A Active Energy Error as a Percentage of Reading \n(Gain  = 22, Temperature  = 25°C) over Power Factor with Internal Reference, \nIntegrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n0.01 0.1 1 10 100ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)VDD = 3.63VVDD = 3.30V\nVDD = 2.97V\n09320-105 \nFigur e 9. Current Channel A Active Energy Error as a Percentage of Reading \n(Gain  = 22, Temperature  = 25°C, Power Factor  = 1) over Supply Voltage  \nwith Internal Reference, Integrator Off  \n– 1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n45 50 55\nFREQUENC Y (Hz)60 65ERROR (% OF READING)PF = –0.5\nPF = +1.0PF = +0.5\n09320-106\n \nFigure 10. Current Ch annel A Active Energy Error as a Percentage of Reading \n(Gain  = 22, Temperature  = 25°C) over Frequency  and Power Factor  \nwith Internal Reference, Integrator Off  \nADE7953  Data Sheet  \n \nRev. C | Page 12  of 72 –1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n0.01 0.1 1 10 100ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)+25°C–40°C\n+85°C\n09320-107 \nFigure 11. Current Channel A  Reactiv e Energy E rror as a Percentage of Reading  \n(Gain  = 1, Power Factor  = 0) over Temperature with Internal Reference, \nIntegrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)PF = +0.866PF = –0.866\nPF = 0\n09320-1080.01 0.1 1 10 100\n \nFigure 12. Current Channel A  Reactiv e Energy E rror as a Percentage of Reading  \n(Gain  = 1, Temperature  = 25°C) over Power Factor wit h Internal Reference, \nIntegrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)+25°C–40°C\n+85°C\n09320-1090.01 0.1 1 10 100\n \nFigure 13. Current Channel A  Reactiv e Energy E rror as a Percentage of Reading  \n(Gain  = 22, Power Factor  = 0) over Temperature with Internal Reference, \nIntegrator Off  –1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)PF = +0.866PF = –0.866\nPF = 0\n09320- 1100.01 0.1 1 10 100\n \nFigure 14. Current Channel A  Reactiv e Energy E rror as a Percentage of Reading  \n(Gain  = 22, Temperature  = 25°C) over Power Factor with Internal Reference, \nIntegrator Off  \n– 1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n45 50 55\nFREQUENC Y (Hz)60 65ERROR (% OF READING)\n09320- 111PF = +0.866PF = –0.866\nPF = 0\n \nFigure 15. Current Channel A Rea ctive Energy Error as a  Percentage of Reading  \n(Gain  = 22, Temperature  = 25°C) over Frequency and Power Factor  \nwith Internal Reference, Integrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)GAIN = 1\nGAIN = 22\n09320- 1120.1 1 10 100\n \nFigure 16. Current Channel A IRMS Error as a Percentage of Reading \n(Temperature  = 25°C, Power Factor  = 1) over Gain with Internal Reference, \nIntegrator Off  \nData Sheet  ADE7953  \n \nRev. C | Page 13  of 72 –1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FULL  SCALE)+25°C–40°C\n+85°C\n09320- 1130.1 1 10 100\n \nFigure 17. Current Channel B Active Energy Error as a Percentage of Reading \n(Gain  = 1, Power Factor  = 1) over Temperature with Internal Reference, \nIntegrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FULL  SCALE)\n09320- 114PF = –0.5\nPF = +1.0PF = +0.5\n0.1 1 10 100\n \nFigu re 18. Current Channel B Active Energy Error as a Percentage of Reading \n(Gain  = 1, Temperature  = 25°C) over Power Factor with Internal Reference, \nIntegrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FULL  SCALE)\n09320- 115VDD = 3.63VVDD = 3.30V\nVDD = 2.97V\n0.1 1 10 100\n \nFigure 19. Current Channel B Active Energ y Error as a Percentage of Reading \n(Gain  = 1, Temperature  = 25°C, Power Factor  = 1) over Supply Voltage  \nwith Internal Reference, Integrator Off  – 1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n45 50 55\nFREQUENC Y (Hz)60 65ERROR (% OF READING)PF = –0.5\nPF = +1.0PF = +0.5\n09320- 116\n \nFigure 20. Current Channel B Active Energy Error as a Percentage of Reading \n(Gain = 1, Temperature = 25°C) over Frequency and Power Factor  \nwith Internal Reference, Integrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)+25°C–40°C\n+85°C\n09320- 1170.1 1 10 100\n \nFigure 21. Current Channel B Reactive Energy Error as a Percentage of Reading  \n(Gain  = 1, Power Factor  = 0) over Temperature with Internal Reference, \nIntegrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)PF = +0.866PF = –0.866\nPF = 0\n09320- 1180.1 1 10 100\n \nFigure 22. Current Channel B Reactive Energy Error as a Percentage of Reading  \n(Gain  = 1, Temperature  = 25°C) over Power Factor with Internal Reference, \nIntegrator Off  \nADE7953  Data Sheet  \n \nRev. C | Page 14  of 72 – 1.0–0.8–0.6–0.4–0.200.20.40.60.81.0\n45 50 55\nFREQUENC Y (Hz)60 65ERROR (% OF READING)\n09320-219PF = +0.866PF = –0.866\nPF = 0\n \nFigure 23. Current Channel B Rea ctive Energy Error as a Percentage of Reading  \n(Gain = 1, Temperature = 25°C) over Frequency and Power Factor  \nwith Internal Reference, Integrator Off  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FULL  SCALE)\n09320-2200.1 1 10 100\n \nFigure 24. Current Channel B IRMS Error a s a Percentage of Reading   \n(Gain = 1, Temperature  = 25°C, Power Factor  = 1)  \nwith Internal Reference,  Integrator Off  \n–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nVOLTAGE CHANNE L (% FUL L SCALE)\n09320-1210.1 1 10 100\n \nFigure 25. VRMS Error as a Percentage of Reading (Temperature  = 25°C, \nPower Factor  = 1) with Internal Referenc e, Integrator Off  –1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)+25°C–40°C\n+85°C\n09320-1220.01 0.1 1 10 100\n \nFigure 26. Current Channel A Active Energy Error as a Percentage of Reading \n(Gain  = 16, Power Factor  = 1) over Temperature with Internal Reference, \nIntegrator On  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)\n09320-123PF = –0.5\nPF = +1.0PF = +0.5\n0.01 0.1 1 10 100\n \nFigure 27. Current  Channel A Active Energy Error as a Percentage of Reading \n(Gain  = 16, Temperature  = 25°C) over Power Factor with Internal Reference, \nIntegrator On  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)+25°C–40°C\n+85°C\n09320-1240.1 1 10 100\n \nFigure 28. Current Channel B Active Energy Error as a Percentage of Reading \n(Gai n = 16, Power Factor  = 1) over Temperature with Internal Reference, \nIntegrator On  \nData Sheet  ADE7953  \n \nRev. C | Page 15  of 72 –1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)\n09320-225PF = –0.5\nPF = +1.0PF = +0.5\n0.1 1 10 100\n \nFigure 29. Current Channel B Active Energy Error as a Percentage of Reading \n(Gain  = 16, Temperature  = 25°C) over Power Factor with Internal Refer ence, \nIntegrator On  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)+25°C–40°C\n+85°C\n09320-1260.01 0.1 1 10 100\n \nFigure 30. Current Channel A  Reactiv e Energy E rror as a Percentage of Reading  \n(Gain  = 16, Power Factor  = 0) over Temperature with Internal Reference, \nIntegrator On  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)\n09320-227PF = +0.866PF = –0.866\nPF = 0\n0.01 0.1 1 10 100\n \nFigure 31. Cur rent Channel A  Reactiv e Energy E rror as a Percentage of Reading  \n(Gain  = 16, Temperature  = 25°C) over Power Factor with Internal Reference, \nIntegrator On  –1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)+25°C–40°C\n+85°C\n09320-2280.1 1 10 100\n \nFigure 32. Current Channel B Reactive Energy Error as a Percentage of Read ing \n(Gain  = 16, Power Factor  = 0) over Temperature with Internal Reference, \nIntegrator On  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FUL L SCALE)PF = +0.866PF = –0.866\nPF = 0\n09320-1290.1 1 10 100\n \nFigure 33. Current Channel B Reactive Energy Error as a Percentage of Reading  \n(Gain  = 16, Temperature  = 25°C) over Power Factor with Inte rnal Reference, \nIntegrator On  \n–1.0–0.8–0.6–0.4–0.200.20.40.60.81.0ERROR (% OF READING)\nCURRENT CHANNE L (% FULL  SCALE)\n09320-130CHANNE L A\nCHANNE L B\n0.1 1 10 100\n \nFigure 34. IRMS Error as a Percentage of Reading (Gain  = 16,  \nTemperature  = 25°C) with Internal Reference, Integrator On  \n \n \nADE7953  Data Sheet  \n \nRev. C | Page 16  of 72 TEST CIRCUIT  \n \nSAME AS\nCF20.1µF 4.7µF\nCS\nMOSI/SCL/Rx\nMISO/SDA/Tx\nSCLK\nCF2\nCF1\nREF\nCLKOUT\nCLKINRESET\nIAP\nIAN\nIBP\nIBN\nVN\nVP\nPULL_HIGH\nPULL_LOW2\n145\n6\n9\n10\n11\n12\n821\n28\n27\n26\n25\n24\n23\n22\n13\n19\n18ADE795315 17 3VINTA\nVDD\nVINTD\n4 16DGND\nAGND0.1µF 4.7µF\n0.1µF 4.7µF20pF ++ +\n3.3V\n3.3V\n20pF3.58MHzPULL_HIGH3.3V\n733nF 1kΩ1kΩ1kΩ10kΩ\n10kΩ\n10kΩ500Ω\n1kΩ1MΩ\n110V 33nF3.3V3.3V\n1µF\n33nF33nF\n1kΩ1kΩ\n33nF33nFZX_IREVP1\n20ZX\nIRQ\n09320-099 \nFigure 35. Test Circuit  \n \n \nData Sheet  ADE7953  \n \nRev. C | Page 17  of 72 TERMI NOLOGY  \nMeasurement Error  \nThe error associated with the energy measurement made by the \nADE7953 is defined by  \n=  Errort Measuremen  (1) \n%100×−\nEnergy True Energy True    ADE7953 by Registered Energy \nPhase Error Between Channels  \nThe high- pass filter (HPF) and digital integrator introduce a  \nslight phase mismatch between the current channels and the \nvoltage channel. The all -digital design ensures that the phase \nmatching between the current channels and the voltage channel \nis within ±0.0 5° over a range of 45 Hz to 65 Hz. This internal \nphase mismatch can be combined with the external phase error (from current sensor or component tolerance) and calibrated \nwith the phase calibration registers.  \nPower Supply Rejection (PSR)  \nPSR quantifies the ADE7953  measurement error as a percentage \nof reading when the power supplies are varied. For the ac PSR measurement, a reading at nominal supplies (3.3 V) is taken. A  \nsecond reading is obtained w ith the same input signal levels when \nan ac signal ( 120 mV rms/ 100 Hz) is introduced onto the supplies.  \nAny error introduced by this ac signal is expressed as a percentage of reading (see the Measurement Error definition).  For the dc PSR \nmeasurement, a rea ding at nominal supplies (3.3  V) is taken. A \nsecond reading is obtained with the same input signal levels when  \nthe power supplies are varied by ±10%. Any error introduced is again expressed as a percentage of reading.  ADC Offset Error  \nThe ADC offset error  refers to the dc offset associated with the \nanalog inputs to the ADCs. It means that, with the analog inputs  \nconnected to AGND, the ADCs still see a dc analog input signal.  \nThe magnitude of the offset depends on the gain and input range selection . However , the offset is removed from the current and \nvoltage channels by a  high- pass filter ( HPF ), and the power \ncalculation is not affected by this offset.  \nGain Error \nThe gain error in the ADCs of the ADE7953 is defined as the \nper-channel difference between the measured ADC output code \n(minus the offset) and the ideal output code (see the Current \nChannel ADCS  section and the Voltage Channel ADC  section). \nThe difference is expres sed as a percentage of the ideal code.  \nADE7953  Data Sheet  \n \nRev. C | Page 18  of 72 ADE7953  POWER-UP PROCE DURE  \nThe ADE7953 contains an on -chip power supply monitor that \nsupervises the power supply (VDD).  While the voltage applied \nto the VDD pin is below 2  V ± 10%, the chip is in an inac tive \nstate. Once VDD crosses the 2  V ± 10% threshold , the power \nsupply monitor keeps the ADE7953 in an inactive state for an \naddition al 26 ms. This time delay allows VDD to reach the \nminimum specified operating voltage of 3.3  V – 10%. Once  \nthe minimum specified operating voltage is met , the internal \ncircu itry is enable d; this is accomplished in a pproximately  \n40 ms. \nOnce the start -up sequence is complete and the ADE7953  is \nready to receive communication from a microcontroller, the \nreset flag is set in the IRQSTATA register (Ad dress 0x22D and \nAddress 0x32D).  An external interrupt is triggered on the IRQ \npin. The reset  interrupt is enabled by default and cannot be \ndisabled, hence an external interrupt always occurs  at the end  \nof a power -up procedur e, hardware or software reset.  \nIt is highly recommended that the reset interrupt is used by  \nthe microcontroller to gate the first c ommunication with the \nADE7953. If the interrupt is not used , a timeout can be \nimplemented;  however , as the start -up sequence can vary part -\nto-part and over temperature , a timeout of a least 100  ms is \nrecommended. The r eset interrupt provides the most efficient \nway of monitoring the  completion of the ADE7953 start -up \nsequence.   Once the start -up sequence is complete,  communication with \nthe ADE7953  can begin. See the Commun icating with the \nADE7953 section for further details.  \nREQUIRED REGISTER S ETTING  \nFor optimum performance, Register Address 0x120 must be \nconfigured by the user after powering up the ADE7953 . This \nregister ensures that the optimum timing configuration is \nselected to maximize t he accuracy and dynamic range. This \nregister is not set by default and thus must be written by the \nuser each time the ADE7953 is powered up. Register 0x120 is  \na protected register and thus a key must be written to all ow the \nregister to be modified.  The following sequence should be \nfollowed:  \n• Write 0xAD to Register Address 0xFE: This unlocks \nRegister 0x120 \n• Write 0x30 to  Register Address 0x120: This configures the \noptimum settings  \nThe above two instructions m ust be performed in succession to \nbe successful.   \n \n \nData Sheet  ADE7953  \n \nRev. C | Page 19  of 72 THEORY OF OPERATION \nANALOG INPUTS  \nThe ADE7953  includes three analog inputs that form two current  \nchannels and one voltage channel.  In a standard configuration, \nCurrent Channel A  is used to measure the phase curren t, and \nCurrent Channel B  is used to measure the neutral current.  The \nvoltage channel input measures the difference between the phase \nvoltage and the neutral voltage. The ADE7953  can, however , be \nused with alternative voltage and current combinations as long as  \nthe analog input specifications described  in this section  are met.  \nCurrent Channel A  \nCurrent Channel A is a fully differential voltage input that is  \ndesigned to be used with a current sensor.  This input is driven \nby two pins: IAP ( Pin 5 ) and IAN ( Pin 6 ). The maximum differ -\nential voltage that can be applied to IAP and IAN is ±500 mV.  \nA common -mode voltage of less than ±25 mV is recommended.  \nCommon -mode voltages in excess of this recommended v alue \nmay limit the available dynamic range.  A programmable gain \namplifier (PGA)  stage  is provided on Current Channel A  with \ngain options of 1, 2, 4, 8, 16, and  22 (see Table 6). \nThe maximum full-scale  input of Current Channel A  is ±250 mV \nwhen using a single -ended configuration and, therefore , when \nusing a gain setting of 1 , the dynamic range is limited.  The Current  \nChannel A  gain is configured by writing to the PGA_IA register \n(Address 0x0 08). By default, the Current Channel A  PGA is set \nto 1. A gain option of 22 is offered exclusively on Current \nChannel A , allowing high accuracy measurement for signals of \nvery small amplitude.  This configuration is particularly useful \nwhen using small value shunt resistors or Rogowski coils.  \nCurr ent Channel B  \nCurrent C hannel B is a fully differential voltage input that is \ndesig ned to be used with a current sensor.  This input is driven \nby two pins : IBP ( Pin 9 ) and IBN ( Pin 1 0). The maximum differ -\nential voltage that can be applied to IBP and IBN is  ±500 m V. A \ncommon -mode voltage of less than ± 25 mV is recommended.  \nCommon -mode voltages in excess of this recommended value \nmay limit the available dynamic range.  A PGA gain stage is \nprovided on Current Channel B  with gain options of 1, 2, 4, 8 , \nand 16 (see Table 6). The Current Channel B  gain is configured \nby writing to the PGA_IB register (Address 0x0 09). By default , \nthe Current Channel B  PGA is set to 1. \nVoltage Channel  \nThe voltage channel input a  full differential  input drive n by  \ntwo pin s: VP ( Pin 1 2) and VN ( Pin 1 1). The voltage channel  \nis typically connected in a single -ended configuration.  The \nmaximum single -ended  voltage that can be applied to VP is \n±500 mV with respect to VN.  A common -mode  voltage of less \nthan ±25 mV is  recommended.  Common -mode voltages i n \nexcess of this recommended value may limit the dynamic range \ncapabilities of the ADE7953.  A PGA gain stage is provided on the voltage channel with gain options of 1, 2, 4, 8 , and  16 (see \nTable 6).  \nThe voltage channel gain is configured by writing to the PGA_V  \nregister (Address 0x007).  By default, the voltage channel PGA is \nset to 1.  \nTab le 6. PGA Gain Settings  \nGain  Full -Scale \nD ifferential \nInput  (mV)  PGA_IA[ 2:0] \n(Add r 0x008) PGA_IB[ 2:0] \n(Add r 0x009) PGA_V[ 2:0] \n(Add r 0x007) \n1 ±500  0001 000  000  \n2 ±250  001  001  001  \n4 ±125  010  010  010  \n8 ±62.5  011  011  011  \n16 ±31.25  100 100  100  \n22 ±22.7  101  N/A  N/A  \n \n1 When a gain of 1 is selected on C urrent C hannel A, the maximum pin input is \nlimited to ±250  mV. Therefore, when using a single -ended configuration,  the \nmaximum input is ±250  mV with respect to AGND.  \nANALOG -TO-DIGITAL CONVERSION  \nThe analog -to-digital conversion in the ADE7953 is performed \nby three second -order Σ-Δ modulators.  For the sake of clarity,  \nthe block diagram in Figure 36 shows the operation of a first -\norder Σ-Δ modula tor. The analog -to-digital conversion consists \nof a Σ-Δ modulator followed by a low -pass filter stage.  \n24DIGITAL\nLOW-PASS\nFILTER R\nC+\n–CLKIN/4\nINTEGRATOR\n+VREF\n–VREF1-BIT DACLATCHED\nCOMPARATORANALOG\nLOW-PASS FILTER\n.....10100101.....+\n–\n09320-013 \nFigure  36. Σ-Δ Conversion  \nThe Σ-Δ modulator converts the input signal into a continuous \nserial stream of 1s and 0s at a rate determined by the sampling \nclock. The ADE7953  sampling clock is equal to 895  kHz \n(CLKIN/4). The 1 -bit DAC in the feedback loop is driven by the \nserial data stream. The DAC output is subtracted from the input signal. If the loop gain is high enough, the average  value of the \nDAC output (and, therefore, the bit stream) can approach that of the input signal level. For any given input value in a single sampling interval, the data from the 1 -bit ADC is virtually \nmeaningless. A meaningful result is obtained o nly when a large \nnumber of samples is averaged . This averaging is carried out  \nin the second part of the ADC, the digital low -pass filter. By \naveraging a large number of bits from the modulator, the low -\npass filter can produce 24 -bit data -words that are proportiona l \nto the input signal level.  The Σ-∆ converter uses two techniques —\noversampling and noise shaping —to achieve high resolution \nfrom what is essentially a 1 -bit conversion technique.  \nADE7953 Data Sheet\n \nRev. C | Page 20 of 72 Oversampling \nOversampling is the first technique used to achieve high \nresolution. Oversampling means that the signal is sampled at a \nrate (frequency) that is many times higher than the bandwidth \nof interest. For example, the sampling rate in the ADE7953  is \n895 kHz, and the bandwidth of interest is 40 Hz to 1.23 kHz. Oversampling has the effect of spreading the quantization noise (noise due to sampling) over a wider bandwidth. With the noise \nspread more thinly over a wider bandwidth, the quantization \nnoise in the band of interest is lowered (see Figure 37).  \nNOISESIGNAL\nNOISESIGNAL0 3 447.5\nFREQUENCY (kHz)\nHIGH RESOLUTION\nOUTPUT FROMDIGITAL LPF895\n0 3 447.5\nFREQUENCY (kHz)895DIGITAL FILTER\nSHAPED NOISEANTIALIASING FILTER\n(RC)\nSAMPLING\nFREQUENCY\n09320-014 \nFigure 37. Noise Reduction due to Oversampling and  \nNoise Shaping in the Analog Modulator \nHowever, oversampling alone is not sufficient to improve the \nsignal-to-noise ratio (SNR) in the bandwidth of interest. For \nexample, an oversampling ratio of 4 is required to increase the \nSNR by only 6 dB (1 bit). To keep the oversampling ratio at a reasonable level, it is possible to shape the quantization noise so that the majority of the noise lies at the higher frequencies (see \nthe following section.  Noise Shaping \nNoise shaping is the second technique used to achieve high \nresolution. In the \uf053-Δ modulator, the noise is shaped by the \nintegrator, which has a high-pass-type response for the quanti-\nzation noise due to feedback. The result is that most of the noise is at the higher frequencies, where it can be removed by the \ndigital low-pass filter. This noise shaping is shown in Figure 37. \nAntialiasing Filter \nAs shown in Figure 36, an external low-pass RC filter is required \non the input to each modulator. The role of this filter is to prevent \naliasing. Aliasing refers to the frequency components in the input signal that are folded back and appear in the sampled signal. This effect occurs with signals that are higher than half the sampling \nrate of the ADC (also known as the Nyquist frequency) appear-\ning in the sampled signal at a frequency below half the sampling \nrate. This concept is depicted in Figure 38. \nALIASING EFFECTSSAMPLING\nFREQUENCY\nIMAGE\nFREQUENCIES0 1.23 3 447.5\nFREQUENCY (kHz)895\n09320-015 \nFigure 38. Aliasing Effect \nThe arrows shown in Figure 38 depict the frequency compo-\nnents above the Nyquist frequency (447.5 kHz in the case of  the ADE7953 ) being folded back down. Aliasing occurs with  \nall ADCs, regardless of the architecture. \n \n \nxIGAINDSP\nREFERENCEHPFEN BIT\nCONFIG[2]\nDIGITAL\nINTEGRATORINTENx BIT\nCONFIG[1:0]\nACTIVE AND REACTIVE\nPOWER CALCULATIONCURRENT PEAK,\nOVERCURRENT\nDETECTION\nIx WAVEFORM\nSAMPLING REGISTERCURRENT RMS (IRMS)\nCALCULATION\nHPFADC PGAIxPZX_I DETECTION\nPGA_x BITS\n×1, ×2, ×4, ×8, ×16,\n×22 (FOR IA ONLY)\nVIN\nIxN\n09320-019LPF1\n \nFigure 39. Current Channel ADC and Signal Path \n \n \nData Sheet  ADE7953  \n \nRev. C | Page 21  of 72 CURRENT CHANNEL ADC S \nFigure 39 shows the ADC signal path and signal processing for \nCurrent Channel A , which  is accessed through the IAP and IAN \npins. The signal path for Current Channel B is identical and is \naccessed through the IBP and IBN pins. The ADC output is a twos complement , 24-bit data-word  that is available at a rate of \n6.99 kSPS (thousand samples per second). With the specified full -\nscale analog input of ±25 0 mV and a PGA _Ix gain setting of 2, \nthe ADC produces its maximum output code. The ADC output swings between −6,500, 000 LSBs (decimal) and +6,500, 000 LSBs . \nThis output var ies from  part to part.  The signal path includes a \nxIGAIN register to modify the current gain for Current Channel A or Current Channel B.  This register can be used to \nmatch Current Channel B to C urrent Channel A for simple \ncalibration and computation.  This gain is performed using the \nBIGAIN register (Address 0x28C and Address 0x38C). The Current Channel A gain can be modified with the AIGAIN register (Address 0x280 and Address 0x380).  \nAs shown in Figure 39, there is a high- pass filter (HPF) in each \ncurrent channel signal path . The HPF is enabled by default and \nremoves any dc offset in the ADC output.  It is highly recom -\nmended that this filter be enabled at all times , but it can be \ndisabled by clearing the HPFEN bit ( Bit 2 ) in the CONFIG \nregister (Address 0x102).  Clearing the HPFEN bit disables the \nfilters in both current channels and  in the voltage channel.  \ndi/dt Current Sensor and Digital Integrator  \nAs shown in Figure 39, the current channel signal path for both \nChannel A and C hannel B includes an internal digital integrator.  \nThis integrator is disabled by default and is required only when \ninterfacing with a di/dt sensor , such as a Rogowski coil.  When \nusing either a shunt resistor or a current transformer (CT) , this \nintegrator is not required and should remain disabled.  \nA di/dt sensor detects changes in the magnetic field caused by ac current.  Figure 40 shows the princip le of a di/dt current \nsensor.  \nMAGNETIC FIELD CRE ATED BY  CURRENT\n(DIRECT LY PROPORTIONA LTO CURRENT)\n+  EMF (ELECTROMOTIVE FORCE)\n–  INDUCED B Y CHANGES IN\nMAGNETIC FLUX DENSIT Y (di/dt)\n09320-020 \nFigure 40. Principle of a di/dt Current Sensor  The flux density of a magnetic field induced by a current is directly proportional to the magnitude of the current.  Changes \nin the magnetic flux densit y passing through a conductor loop \ngenerate an electromotive force (EMF) between the two ends of the loop.  The EMF is a voltage signal that is proportional to the \ndifferential of the current over time (di/dt).  The voltage output \nfrom the di/dt sensor is de termined by the mutual inductance \nbetween the current -carrying conductor and the di/dt sensor.  \nThe current signal must  be recovered from the di/dt signal \nbefore it can be used.  An integrator is therefore necessary to \nrestore the signal to its original form .  \nThe ADE7953 has a built -in digital integrator on each current \nchannel that recovers the current signal from the di/dt sensor.  \nBoth digital integrators are disabled by default.  The digital \nintegrator on Current C hannel A is enabled by setting the \nINTENA bit ( Bit 0 ) in the CONFIG register (Address 0x102).  \nThe digital integrator on Current Channel  B is enabled by setting the INTENB bit ( Bit 1 ) in the CONFIG register (Address 0x102).  \nVOLTAGE CHANNE L ADC  \nFigure 41 shows the ADC signal path and signal processin g for \nthe voltage channel input, which is accessed through the VP and  \nVN pins.  The ADC output is a twos complement , 24-bit data-\nword  that is available at a rate of 6.9 9 kSPS (thousand samples \nper second).  With the specified full -scale analog input of ± 500 mV \nand a PGA _V gain setting of 1, the ADC produces its maximum  \noutput code.  The ADC output swings between −6,500, 000 LSBs \n(decimal) and +6,500, 000 LSBs . Note that this output varies \nfrom  part to part.  The signal path includes a x VGAIN register \nto modify the voltage gain s for the voltage channel. AVGAIN \n(Address 0x281 and Address 0x381) is the primary voltage g ain \nregister used, affecting RMS and Channel A energy register \nreadings. Most frequently , the energy gain registers , not the \nvoltage gain registers,  are used in calibration. In the unique  case \nthat both the  AVGAIN register and Current Channel B  are \nused , set BVGAIN  (Address 0x28D and Address 0x38D ) to the \nsame AVGAIN value to ensure equal gain in both channels .  \nAs shown in Figure 41, there is a high- pass filter (HPF) in the \nvoltage channel signal path. The HPF is enabled by defaul t and \nremoves any dc offset in the ADC output. It is highly recom -\nmended that this filter be enabled at all times, but it can be \ndisabled by clearing the HPFEN bit (Bit 2) in the CONFIG register (Address 0x102). Clearing the HPFEN bit disables the \nfilters in both current channels and in the voltage channel . \nADE7953  Data Sheet  \n \nRev. C | Page 22  of 72 REFERENCE CIRCUIT  \nThe ADE7953  has an internal voltage reference of 1.2  V nominal,  \nwhich appears on the REF pin. This reference voltage is used by \nthe ADCs in the ADE7953. The REF pin can be overdriven by \nan external source, for example an external 1.2  V reference. The \nvoltage of the ADE7953 internal reference drifts slightly over \ntemperature (see the Specifications  section). The value of the tem -\nperature dri ft may vary slightly from part to part. A  drift of x% in  the reference results in a 2x% deviation in meter accuracy. The reference drift is typically minimal and is usually much smaller \nthan  the drift of other components i n the meter. By default , the \nADE7953 is configured to use the internal reference. If Bit 0 of \nthe EX_REF register (Address 0x800) is set to 1 , an external \nvoltage reference can be ap plied to the REF pin . \n \nxVGAINREFERENCEHPFEN BIT\nCONFIG[2]DSP\nACTIVE AND REACTIVE\nPOWER CALCULATIONVOLTAGE PEAK,\nOVERVOLTAGE,\nSAG DETECTION\nV WAVEFORM\nSAMPLING REGISTERVOLTAGE RMS (VRMS)CALCULATION\nHPFADC PGAVP\nZX DETECTIONPGA_V BITS\n×1, ×2, ×4, ×8, ×16\nVIN\nVN\n09320-025LPF1 \nFigure 41. Voltage Channel ADC and Signal Path  \n \nData Sheet ADE7953\n \nRev. C | Page 23 of 72 ROOT MEAN SQUARE MEASUREMENT \nRoot mean square (rms) is a measurement of the magnitude  \nof an ac signal. Specifically, the rms of an ac signal is equal to the amount of dc required to produce an equivalent amount  of power in the load. The rms is expressed mathematically in Equation 1. \n\uf0f2\uf03dt\n2dt t ft   RMS\n0) (1 (1) \nFor time-sampled signals, rms calculation involves squaring  \nthe signal, taking the average, and obtaining the square root. \n\uf0e5\n\uf03d\uf03dN\n  nn fN    RMS\n12] [1 (2) \nAs implied by Equation 2, the rms measurement contains \ninformation from the fundamental and all harmonics over  a 1.23 kHz measurement bandwidth. \nThe ADE7953  provide rms measurements for Current  \nChannel A, Current Channel B, and the voltage channel \nsimultaneously. These measurements have a settling time of \napproximately 200 ms and are updated at a rate of 6.99 kHz. \nCURRENT CHANNEL RMS CALCULATION \nThe ADE7953  provides rms measurements for both Current \nChannel A and Current Channel B. Figure 42 shows the signal \npath for this calculation. The signal processing is identical for \nCurrent Channel A and Current Channel B. \n09320-040CURRENT\nSIGNAL\nFROM HPF OR\nINTEGRATOR\n(IF ENABLED)LPFX2 √212×IRMSOS[23:0]\nIRMSx[23:0]\n \nFigure 42. Current Channel RMS Signal Processing \nAs shown in Figure 42, the current channel ADC output samples \nare used to continually compute the rms. The rms is achieved by low-pass filtering the square of the output signal and then taking \na square root of the result. The 24-bit unsigned rms measurements \nfor Current Channel A and Current Channel B are available in the IRMSA (Address 0x21A and Address 0x31A) and IRMSB (Address 0x21B and Address 0x31B) registers, respectively. Both of these registers are updated at a rate of 6.99 kHz. With full-scale inputs on Current Channel A and Current Channel B,  \nthe expected reading on the IRMSA and IRMSB register is \n9032007d. \nBecause the LPF used in the rms signal path is not ideal, it is \nrecommended that the IRMSx registers be read synchronously to the zero-crossing signal (see the Zero-Crossing Detection section). This helps to stabilize reading-to-reading variation  by removing the effect of any 2ω ripple present on the rms measurement. \nVOLTAGE CHANNEL RMS CALCULATION \nThe ADE7953  provides an rms measurement on the voltage \nchannel. Figure 43 shows the signal path for this calculation. \n09320-041VOLTAGE\nSIGNAL\nFROM HPFLPFX2 √212VRMSOS[23:0]\nVRMS[23:0]\n \nFigure 43. Voltage Channel RMS Signal Processing \nAs shown in Figure 43, the voltage channel ADC output samples are used to continually compute the rms. The rms is \nachieved by low-pass filtering the square of the output signal \nand then taking a square root of the result. The 24-bit unsigned voltage channel rms measurement is available in the VRMS register (Address 0x21C and Address 0x31C). This register is updated at a rate of 6.99 kHz. With full-scale inputs on the \nvoltage channel, a VRMS reading of 9032007d can be expected. \nBecause the LPF used in the rms signal path is not ideal, it is \nrecommended that the VRMS register be read synchronously  \nto the zero-crossing signal (see the Zero-Crossing Detection \nsection). This helps to stabilize reading-to-reading variation by removing the effect of any 2ω ripple present on the rms \nmeasurement. \n \n \nADE7953 Data Sheet\n \nRev. C | Page 24 of 72 ACTIVE POWER CALCULATION \nPower is defined as the rate of energy flow from the source to \nthe load. It is defined as the product of the voltage and current waveforms. The resulting waveform is called the instantaneous power signal and is equal to the rate of energy flow at every instant of time. The unit of power is the watt or joules/sec. \n) sin( 2ωt  V    V(t)\uf0b4 \uf0b4 \uf03d  (3) \n) sin( 2ωt  I    I(t)\uf0b4 \uf0b4 \uf03d  (4) \nwhere: \nV is the rms voltage. \nI is the rms current. \nP(t) = V(t) × I(t) (5) \nP(t) = VI − VI × cos(2ω t) (6) \nThe average power over an integral number of line cycles (n)  \nis given by the expression in Equation 7. \n\uf0f2\uf03d \uf03dnT\nVI dt t PnT   P\n0) (1 (7) \nwhere: \nP is the active or real power. \nT is the line cycle period. \nThe active power is equal to the dc component of the instan-\ntaneous power signal (P(t) in Equation 5). The active power is therefore equal to VI. This relationship is used to calculate active \npower in the ADE7953 . Figure 44 illustrates this concept. \nThe signal chain for the active power and energy calculations in \nthe ADE7953  is shown in Figure 45. The instantaneous power \nsignal P(t) is generated by multiplying the current and voltage signals. The dc component of the instantaneous power signal  is then extracted by LPF2 (low-pass filter) to obtain the active power information. Because LFP2 does not have an ideal “brick wall” frequency response, the active power signal has some ripple associated with it. This ripple is sinusoidal and has a frequency equal to twice the line frequency. Because the ripple is sinusoidal in nature, it is removed when the active power signal is integrated to compute the active energy (see the Active Energy Calculation section). \nINST ANTANEOUS\nPOWER SIGNAL\nINSTANTANEOUS\nACTIVE POWER SIGNAL:VRMS × IRMSP(t) = VRMS × IRMS – VRMS × IRMS × cos(2 ωt)\nVRMS\n×\nIRMS\n0x0 0000\nI(t) =√2 × IRMS × sin( ωt)\nV(t) =√2×V R M S×s i n ( ωt)\n09320-043 \nFigure 44. Active Power Calculation \nThe ADE7953  computes the active power simultaneously on \nCurrent Channel A and Current Channel B and stores the \nresulting measurements in the AW ATT (Address 0x212 and Address 0x312) and BW ATT (Address 0x213 and Address 0x313) registers, respectively. With full-scale inputs, the expected reading in the AW ATT and BW ATT registers is approximately 4862401 LSBs (decimal).  \nThe active power measurements are taken over a bandwidth of \n1.23 kHz and include the effects of any harmonics within that \nrange. The active power registers are updated at a rate of 6.99 kHz and can be read using the waveform sampling mode (see the \nInstantaneous Powers and Waveform Sampling section). \n09320-044AVGAINCURRENT\nCHANNEL\nA\nVOLTAGE\nCHANNELHPFAIGAINDIGITAL\nINTEGRATOR\nHPF\n48 0\n++AWATTOS\nPHCALA INTERNAL\nACCUMULATION\nFIXED INTERNAL\nTHRESHOLDACTIVE POWER\nSIGNALAENERGYA23 0LPF2AWGAIN\nBIGAIN\nCURRENT\nCHANNEL\nBHPFBVGAIN\nHPF\nDIGITAL\nINTEGRATOR48 0\n++BWATTOS\nPHCALB INTERNAL\nACCUMULATION\nFIXED INTERNAL\nTHRESHOLDACTIVE POWER\nSIGNALAENERGYB23 0LPF2BWGAIN\n \nFigure 45. Active Energy Signal Chain \n \nData Sheet ADE7953\n \nRev. C | Page 25 of 72 SIGN OF ACTIVE POWER CALCULATION \nThe active power measurement in the ADE7953  is a signed \ncalculation. If the phase differential between the current and \nvoltage waveforms is more than 90°, the power is negative. Negative power indicates that energy is being injected back  \ninto the grid. The ACCMODE register (Address 0x201 and  \nAddress 0x301) includes two sign indication bits that show the sign of the active power of Current Channel A (APSIGN_A) and Current Channel B (APSIGN_B). See the Sign Indication \nsection for more information. \nACTIVE ENERGY CALCULATION \nAs described in the Active Power Calculation section, power  \nis defined as the rate of energy flow. This relationship can be \nexpressed mathematically as shown in Equation 8. \ndtdE   P\uf03d  (8) \nwhere: \nP is power. \nE is energy. \nConversely, energy is given as the integral of power. \n\uf0f2\uf03dPdt   E  (9) \nThe ADE7953  achieves the integration of the active power \nsignal in two stages. In the first stage, the active power signals \nare accumulated in an internal 48-bit register every 143 μs (6.99 kHz) until an internal fixed threshold is reached. When this threshold is reached, a pulse is generated and is accumu-lated in 24-bit, user-accessible accumulation registers. The \ninternal threshold results in a maximum accumulation rate  \nof approximately 206.9 kHz with full-scale inputs. This process occurs simultaneously on Current Channel A and Current Channel B, and the resulting readings can be read in the 24-bit AENERGYA (Address 0x21E and Address 0x31E) and \nAENERGYB (Address 0x21F and Address 0x31F) registers. \nBoth stages of the accumulation are signed and, therefore, \nnegative energy is subtracted from positive energy. \nThis discrete time accumulation, or summation, is equivalent  \nto integration in continuous time. Equation 10 expresses this \nrelationship. \n\uf0fe\uf0fd\uf0fc\n\uf0ee\uf0ed\uf0ec\uf0b4 \uf03d \uf03d\uf0e5 \uf0f2\uf0a5\n\uf03d\uf0ae10  nTT     P(nT) Lim P(t)dt E  (10) \nwhere: \nn is the discrete time-sampled number. \nT is the sample period. \nThe discrete time sample period (T) for the accumulation \nregisters in the ADE7953  is 4.83 μs (1/206.9 kHz). This is \nillustrated in Figure 46, which shows the energy register  roll-over rates with full-scale inputs. 0x0000000x7FFFF F\n0x3FFFF F\n0x400000\n0x800000AENERGYx[23:0]\n40.5 20.26 60.78TIME (Seconds)xWGAIN = 0x200000\nxWGAIN = 0x400000\nxWGAIN = 0x600000\n09320-042 \nFigure 46. Energy Register Roll-Over Time for Active Energy \nNote that the energy register contents roll over to full-scale \nnegative (0x800000) and continue to increase in value when the \npower or energy flow is positive. Conversely, if the power is negative, the energy register underflows to full-scale positive \n(0x7FFFFF) and continues to decrease in value. \nAENERGYA and AENERGYB are read-with-reset registers  \nby default. This means that the contents of these registers are \nreset to 0 after a read operation. This feature can be disabled  \nby clearing Bit 6 (RSTREAD) of the LCYCMODE register \n(Address 0x004). \nThe ADE7953  includes two sets of interrupts that are triggered \nwhen the active energy register is half full (positive or negative) \nor when an overflow or underflow condition occurs. The first set of interrupts is associated with the Current Channel A active \nenergy, and the second set of interrupts is associated with the \nCurrent Channel B active energy. These interrupts are disabled by default and can be enabled by setting the AEHFA and AEOFA bits in the IRQENA register (Address 0x22C and Address 0x32C) for Current Channel A, and the AEHFB and \nAEOFB bits in the IRQENB register (Address 0x22F and \nAddress 0x32F) for Current Channel B. \nADE7953 Data Sheet\n \nRev. C | Page 26 of 72 Active Energy Integration Time Under Steady Load \nThe discrete time sample period (T) for the accumulation \nregisters is 4.83 μs (1/206.9 kHz). With full-scale sinusoidal \nsignals on the analog inputs and the AWGAIN and BWGAIN \nregisters set to 0x400000, a pulse is generated and added to  the AENERGYA and AENERGYB registers every 4.83 μs.  The maximum positive value that can be stored in the 24-bit AENERGYA and AENERGYB registers is 0x7FFFFF before  \nthe register overflows. The integration time under these \nconditions can be calculated as follows: \nTime  = 0x7FFFFF × 4.83 μs = 40.5 sec (11) \nActive Energy Line Cy cle Accumulation Mode \nIn active energy line cycle accumulation mode, the energy \naccumulation of the ADE7953  is synchronized to the voltage \nchannel zero crossing so that the active energy can be accumu-\nlated over an integral number of half line cycles. This feature is available for both Current Channel A and Current Channel B active energy. The advantage of summing the active energy over an integral number of half line  cycles is that the sinusoidal \ncomponent of the active energy is reduced to 0 (see Equation 12 to Equation 15). This eliminates any ripple in the energy calcula-tion. Energy is calculated more accurately and in a shorter time because the integration period can be shortened. The line cycle accumulation mode can be used for fast calibration and also to \nobtain the average power over a specified time period. Using \nEquation 6, the following description of the energy accumulation \ncan be derived: \nP(t) = VI – [LPF] × cos(2ω t) (12) \ndt ωt LPF    VIdt    t EnT nT\n\uf0f2\uf0f2 \uf0b4 \uf02d \uf03d\n00) 2 cos( ] [ ) (  (13) \nwhere: \nn is an integer. \nT is the line cycle period. \nBecause the sinusoidal component is integrated over an integer number of line cycles, its value is always 0. Therefore, \n\uf0f2\uf02b \uf03dnT\n   VIdt     E(t)\n00  (14) \nE = VInt  (15) Line cycle accumulation mode is disabled by default and can be \nenabled on Current Channel A and Current Channel B by setting t h e  A LWAT T  a n d  B LWAT T  b i t s  t o  1  i n  t h e  L C YC M O D E  r e g i s t e r  (Address 0x004). The accumulation time should be written to \nthe LINECYC register (Address 0x101) in the unit of number of \nhalf line cycles. The ADE7953  can accumulate energy for up to \n65,535 half line cycles. This equates to an accumulation period of approximately 655 sec with 50 Hz inputs and 546 sec with \n60 Hz inputs.  \nThe number of half line cycles written to the LINECYC register \nis used for both the Current Channel A and Current Channel B \naccumulation periods. At the end of a line cycle accumulation \ncycle, the AENERGYA and AENERGYB registers are updated, and the CYCEND flag is set in the IRQSTATA register (Address 0x22D and Address 0x32D). If the CYCEND bit in the IRQENA \nregister is set, an external interrupt is issued on the IRQ\n pin. In \nthis way, the IRQ pin can also be used to signal the completion of \nthe line cycle accumulation. Another accumulation cycle begins \nimmediately as long as the ALW ATT and BLW ATT bits in the \nLCYCMODE register remain set. \nThe contents of the AENERGYA and AENERGYB registers are \nupdated synchronous to the CYCEND flag. The AENERGYA and \nAENERGYB registers hold their current values until the end of \nthe next line cycle period, when the contents are replaced with the new reading. If the read-with-reset bit (RSTREAD) in the LCYCMODE register (Address 0x004) is set, the contents of the AENERGYA and AENERGYB regist ers are cleared after a read \nand remain at 0 until the end of the next line cycle period. \nIf a new value is written to the LINECYC register (Address 0x101) \nmidway through a line cycle accumulation, the new value is not \ninternally loaded until the end of a line cycle period. When the LINECYC register is updated mid-reading, the current energy accumulation cycle is completed, and the new value is then programmed, ready for the next cycle. This prevents any invalid readings due to changes to the LINECYC register (see Figure 47). \nAENERGYx REGISTER\nCYCEND IRQ\nLINECYC REGISTER\nNEW LINE CYCLE\nVALUE PROGRAMMEDINTERNAL LINE CYCLE\nUPDATED\n09320-017 \nFigure 47. Changing the LINECYC Register \n \nData Sheet ADE7953\n \nRev. C | Page 27 of 72 xWGAIN\n48 0\n++xWATTOS\n09320-016INTERNAL\nACCUMULATION\nFIXED INTERNAL\nTHRESHOLD\nCALIBRATION\nCONTROLZERO-CROSSING\nDETECTIONOUTPUT FROM\nVOLTAGE CHANNEL\nADCOUTPUT FROM\nLPF2\nAENERGYx23 0LPF1\n15 0LINECYC \nFigure 48. Active Energy Line Cycle Accumulation \n \nNote that when line cycle accumulation mode is first enabled, the \nreading after the first CYCEND flag should be ignored because it may be inaccurate. This is because the line cycle accumulation mode is not synchronized to the zero crossing and, therefore, \nthe first reading may not be over a complete number of half line \ncycles. After the first line cycle accumulation is complete, all \nsuccessive readings will be correct. \nACTIVE ENERGY ACCUMULATION MODES \nSigned Accumulation Mode \nThe default active energy accumulation mode for the ADE7953  is \na signed accumulation based on the active power information. \nPositive-Only Accu mulation Mode \nThe ADE7953  includes a positive-only accumulation mode \noption for Current Channel A and Current Channel B active \nenergy. In positive-only accumulation mode, the energy \naccumulation is done only for positive power, ignoring any \noccurrence of negative power above or below the no-load \nthreshold (see Figure 49). \nNO-LOAD\nTHRESHOLDACTIVE POWERNO-LOAD\nTHRESHOLDAENERGYx\n09320-018 \nFigure 49. Positive-Only Accumulation Mode \nThe positive-only accumulation mode is disabled by default and \ncan be enabled on Current Channel A and Current Channel B by setting the AW ATTACC and BW ATTACC bits to 01 in the \nACCMODE register (Address 0x201 and Address 0x301). If enabled, the positive-only accumulation mode affects both \nenergy accumulation registers, AENERGYA and AENERGYB, as well as the CF output pins (see the Energy-to-Frequency Conversion section). Note that when the positive-only accumu-\nlation mode is enabled on a current channel, the reverse power \nfeature is not available on that current channel (see the Reverse \nPower section). \nAbsolute Accumulation Mode \nThe ADE7953  includes an absolute energy accumulation mode \nfor Current Channel A and Current Channel B active energy. In \nabsolute accumulation mode, the energy accumulation is done \nusing the absolute active power, ignoring any occurrences of \nenergy below the no-load threshold (see Figure 50). \nNO-LOAD\nTHRESHOLDACTIVE POWERNO-LOAD\nTHRESHOLDAENERGYx\n09320-119 \nFigure 50. Active Energy Absolute Accumulation Mode \nThe absolute accumulation mode is disabled by default and can \nbe enabled on Current Channel A and Current Channel B by setting the AW ATTACC and BW ATTACC bits to 10 in the ACCMODE register (Address 0x201 and Address 0x301).  \nIf enabled, the absolute accumulation mode affects both energy \naccumulation registers, AENERGYA and AENERGYB, as well as the CF output pins (see the Energy-to-Frequency Conversion section). Note that when the absolute accumulation mode is enabled on a current channel, the reverse power feature is not \navailable on that current channel (see the Reverse Power section). \n \nADE7953 Data Sheet\n \nRev. C | Page 28 of 72 REACTIVE POWER CALCULATION \nReactive power is defined as the product of the voltage and \ncurrent waveforms when one of these signals is phase shifted  by 90°. The resulting waveform is called the instantaneous \nreactive power signal. \nEquation 16 provides an expression for the instantaneous \nreactive power signal in an ac system when the phase of the current channel is shifted by +90°. \nRP(t)  = V(t) × I\n’(t) (16) \nRP(t)  = VI × sin(θ) + VI × sin(2 ωt + θ)  (17) \n) sin( 2θ ωt  V    V(t)\uf02b \uf0b4 \uf0b4 \uf03d  (18) \n) sin( 2ωt  I    I(t)\uf0b4 \uf0b4 \uf03d  (19) \nI’(t) = \uf0f7\uf0f8\uf0f6\uf0e7\uf0e8\uf0e6\uf070\uf02b \uf0b4 \uf0b42sin 2ωt  I  (20) \nwhere: \nV is the rms voltage. \nI is the rms current. \nθ is the phase difference between the voltage and current channel. \nThe average reactive power over an integral number of line \ncycles (n) is given by the expression in Equation 21. \n\uf0f2 \uf0b4 \uf03d \uf03dnT\nθ  VI dt t RPnT   RP\n0) sin( ) (1 (21) \nwhere: \nRP is the reactive power. \nT is the line cycle period. \nThe reactive power is equal to the dc component of the instantaneous reactive power signal (RP(t) in Equation 16). This relationship is used to calculate reactive power in the \nADE7953 . The signal chain for the reactive power and energy \ncalculations in the ADE7953  is shown in Figure 51.  \nThe instantaneous reactive power signal RP(t) is generated by \nmultiplying the current signal and the voltage signal. Simulta-neous calculations are performed using Current Channel A and Current Channel B. The multiplication is performed over the full 1.23 kHz bandwidth and results in a reactive power measurement that includes all harmonics included in this range.  The ADE7953  reactive power measurement is stable over the \nfull frequency range. The dc component of the instantaneous reactive power signal is then extracted by a low-pass filter to \nobtain the reactive power information. \nThe frequency response of the LPFs in the reactive power signal \npaths is identical to the frequency response of the LPFs used in \nthe active power calculation. Because the LPF does not have an \nideal “brick wall” frequency response, the reactive power signal has some ripple associated with it. This ripple is sinusoidal and has a frequency equal to twice the line frequency. Because the ripple is sinusoidal in nature, it is removed when the reactive \npower signal is integrated to compute the reactive energy (see \nthe Reactive Energy Calculation section). \nThe ADE7953  computes the reactive power simultaneously  \non Current Channel A and Current Channel B and stores the \nresulting measurements in the AV AR (Address 0x214 and Address 0x314) and BV AR (Address 0x215 and Address 0x315) registers, respectively. With full-scale inputs, the expected \nreading in the AV AR and BV AR registers is approximately \n4862401 LSBs (decimal). \nThe reactive power registers are updated at a rate of 6.99 kHz \nand can be read using the waveform sampling mode (see the \nInstantaneous Powers and Waveform Sampling section). \nSIGN OF REACTIVE POWER CALCULATION \nThe reactive power measurement in the ADE7953  is a signed \ncalculation. If the current waveform is leading the voltage wave-\nform, the reactive power is negative. Negative reactive power indicates a capacitive load. If the current waveform is lagging \nthe voltage waveform, the reactive power is positive. Positive \nreactive power indicates an inductive load. The ACCMODE register (Address 0x201 and Address 0x301) includes two sign indication bits that show the sign of the reactive power of Current Channel A (V ARSIGN_A) and Current Channel B (V ARSIGN_B). See the Sign Indication section for more information. \n \n \nCURRENT\nCHANNEL\nA OR B48 0\n++\nxVAROS\n09320-120VOLTAGE\nCHANNELINTERNAL\nACCUMULATION\nFIXED INTERNAL\nTHRESHOLDREACTIVE\nPOWER\nSIGNALRENERGYx23 0REACTIVE\nPOWER\nALGORITHMxVARGAIN\n \nFigure 51. Reactive Energy Signal Chain \n \nData Sheet ADE7953\n \nRev. C | Page 29 of 72 REACTIVE ENERGY CALCULATION \nThe ADE7953  achieves the integration of the reactive power \nsignal in two stages. In the first stage, the reactive power signals \nare accumulated in an internal 48-bit register every 143 μs (6.99 kHz) until an internal fixed threshold is reached. When \nthis threshold is reached, a pulse is generated and is accumu-\nlated in 24-bit, user-accessible accumulation registers. The internal threshold results in a maximum accumulation rate  of approximately 206.9 kHz with full-scale inputs. This process occurs simultaneously on Current Channel A and Current Channel B, and the resulting readings can be read in the  \n24-bit RENERGYA (Address 0x220 and Address 0x320) and \nRENERGYB (Address 0x221 and Address 0x321) registers. Both stages of the accumulation are signed and, therefore, \nnegative energy is subtracted from positive energy. \nNote that the reactive energy register contents roll over to full-\nscale negative (0x800000) and continue to increase in value when the power or energy flow is positive. Conversely, if the \npower is negative, the energy register underflows to full-scale \npositive (0x7FFFFF) and continues to decrease in value. \nRENERGYA and RENERGYB are read-with-reset registers  \nby default. This means that the contents of these registers are reset to 0 after a read operation. This feature can be disabled  by clearing Bit 6 (RSTREAD) of the LCYCMODE register \n(Address 0x004). \nThe ADE7953  includes two sets of interrupts that are triggered \nwhen the reactive energy register is half full (positive or negative) \nor when an overflow or underflow condition occurs. The first set \nof interrupts is associated with the Current Channel A reactive energy, and the second set of interrupts is associated with the Current Channel B reactive energy. These interrupts are disabled by default and can be enabled by setting the V AREHFA and \nV AREOFA bits in the IRQENA register (Address 0x22C and \nAddress 0x32C) for Current Channel A, and the V AREHFB and V AREOFB bits in the IRQENB register (Address 0x22F and \nAddress 0x32F) for Current Channel B. \n Reactive Energy Integration Time Under Steady Load \nThe discrete time sample period (T) for the accumulation registers \nis 4.83 μs (1/206.9 kHz). With full-scale sinusoidal signals on \nthe analog inputs and a phase shift of 90°, a pulse is generated \nand added to the RENERGYA and RENERGYB registers every 4.83 μs, assuming that the AVARGAIN and BVARGAIN registers are set to 0x00. The maximum positive value that can be stored in the 24-bit RENERGYA and RENERGYB registers is \n0x7FFFFF before the register overflows. The integration time \nunder these conditions can be calculated as follows: \nTime = 0x7FFFFF × 4.83 μs = 40.5 sec (22) \nReactive Energy Line Cy cle Accumulation Mode \nIn reactive energy line cycle accumulation mode, the energy \naccumulation of the ADE7953  is synchronized to the voltage \nchannel zero crossing so that the reactive energy on Current \nChannel A and Current Channel B can be accumulated over  an integral number of half line cycles. Line cycle accumulation mode is disabled by default and can be enabled on Current Channel A and Current Channel B by setting the ALV AR and BLV AR bits to 1 in the LCYCMODE register (Address 0x004). \nThe accumulation time should be written to the LINECYC \nregister (Address 0x101) in the unit of number of half line cycles. The number of half line cycles written to the LINECYC register is used for both the Current Channel A and Current Channel B accumulation periods. The ADE7953 can accumulate reactive \nenergy for up to 65,535 half line cycles. This equates to an accu-\nmulation period of approximately 655 sec with 50 Hz inputs \nand 546 sec with 60 Hz inputs. \nAt the end of a line cycle accumulation cycle, the RENERGYA and \nRENERGYB registers are updated, and the CYCEND flag in the IRQSTATA register (Address 0x22D and Address 0x32D) is set. If the CYCEND bit in the IRQENA register is set, an external \ninterrupt is issued on the IRQ\n pin. In this way, the IRQ pin can \nalso be used to signal the completion of the line cycle accumula-\ntion. Another accumulation cycle begins immediately as long as the ALV AR and BLV AR bits in the LCYCMODE register remain set. \n \n48 0\n++xVAROS\n09320-021INTERNAL\nACCUMULATION\nFIXED INTERNAL\nTHRESHOLD\nCALIBRATION\nCONTROLZERO-CROSSING\nDETECTIONOUTPUT FROM\nVOLTAGE CHANNEL\nADCOUTPUT FROM\nLPF2\nRENERGYx23 0\nLINECYC15 0LPF1xVARGAIN\n \nFigure 52. Reactive Energy Line Cycle Accumulation \n \nADE7953 Data Sheet\n \nRev. C | Page 30 of 72 The contents of the RENERGYA and RENERGYB registers are \nupdated synchronous to the CYCEND flag. The RENERGYA and RENERGYB registers hold their current values until the end of the next line cycle period, when the contents are replaced \nwith the new reading. If the read-with-reset bit (RSTREAD) in \nthe LCYCMODE register (Address 0x004) is set, the contents of the RENERGYA and RENERGYB registers are cleared after a \nread and remain at 0 until the end of the next line cycle period. \nIf a new value is written to the LINECYC register (Address 0x101) \nmidway through a line cycle accumulation, the new value is not internally loaded until the end of a line cycle period. When the \nLINECYC register is updated mid-reading, the current energy \naccumulation cycle is completed, and the new value is then programmed, ready for the next cycle. This prevents any invalid \nreadings due to changes to the LINECYC register (see Figure 47). \nNote that when line cycle accumulation mode is first enabled, the \nreading after the first CYCEND flag should be ignored because it may be inaccurate. This is because the line cycle accumulation \nmode is not synchronized to the zero crossing and, therefore, \nthe first reading may not be over a complete number of half line cycles. After the first line cycle accumulation is complete, all \nsuccessive readings will be correct. \nREACTIVE ENERGY ACCUMULATION MODES \nSigned Accumulation Mode \nThe default reactive energy accumulation mode for the ADE7953 is \na signed accumulation based on the reactive power information. \nAntitamper Accumulation Mode \nThe ADE7953  includes an antitamper accumulation mode that \naccumulates reactive energy depending on the sign of the active \npower. When the active power is positive, the reactive power is \nadded to the reactive energy accumulation register. When the active power is negative, the reactive power is subtracted from \nthe reactive energy accumulation register (see Figure 53). \nAntitamper accumulation mode is disabled by default and can \nbe enabled on Current Channel A and Current Channel B by setting the AVARACC and BVARACC bits to 01 in the ACCMODE \nregister (Address 0x201 and Address 0x301). If enabled, the \nantitamper accumulation mode affects both reactive energy accumulation registers, RENERGYA and RENERGYB, as well as the CF output pins (see the Energy-to-Frequency Conversion \nsection). \n NO-LOAD\nTHRESHOLDACTIVE POWERREACTIVE POWER\nNO-LOAD\nTHRESHOLDNO-LOAD\nTHRESHOLDNO-LOAD\nTHRESHOLDRENERGYx\n09320-022 \nFigure 53. Reactive Energy Accumulation in Antitamper Accumulation Mode \nAbsolute Accumulation Mode \nThe ADE7953  includes an absolute energy accumulation mode \nfor Current Channel A and Current Channel B reactive energy. \nIn absolute accumulation mode, the energy accumulation is done using the absolute reactive power, ignoring any occurrences of \nenergy below the no-load threshold (see Figure 54). \nNO-LOAD\nTHRESHOLDREACTIVE POWERNO-LOAD\nTHRESHOLDRENERGYx\n09320-023 \nFigure 54. Reactive Energy Absolute Accumulation Mode \nThe absolute accumulation mode is disabled by default and  \ncan be enabled on Current Channel A and Current Channel B \nby setting the AV ARACC and BV ARACC bits to 10 in the \nACCMODE register (Address 0x201 and Address 0x301).  \nIf enabled, the absolute accumulation mode affects both energy \naccumulation registers, RENERGYA and RENERGYB, as well as the CF output pins (see the Energy-to-Frequency Conversion section). \n \nData Sheet ADE7953\n \nRev. C | Page 31 of 72 APPARENT POWER CALCULATION \nApparent power is defined as the maximum power that can be \ndelivered to a load. VRMS and IRMS are the effective voltage and current delivered to the load, respectively. The apparent power can, therefore, be defined as the product of VRMS and \nIRMS. This relationship is independent of the phase angle \nbetween the voltage and current. \nEquation 26 provides an expression for the instantaneous \napparent power signal in an ac signal. \n) sin( 2 ωt  VRMS    V(t)\uf0b4 \uf0b4 \uf03d  (23) \n) sin( 2 θ ωt  IRMS    I(t)\uf02b \uf0b4 \uf0b4 \uf03d  (24) \nP(t) = V(t) × I(t)  (25) \nP(t) = VRMS × IRMS × cos(θ) −  (26) \nVRMS × IRMS × cos(2ωt + θ ) \nThe ADE7953  computes the apparent power simultaneously  \non Current Channel A and Current Channel B and stores  \nthe resulting measurements in the AV A (Address 0x210 and Address 0x310) and BV A (Address 0x211 and Address 0x311) \nregisters, respectively. \nThe apparent power measurement is taken over a bandwidth  \nof 1.23 kHz and includes the effects of any harmonics within that range. The apparent power registers are updated at a rate of \n6.99 kHz and can be read using the waveform sampling mode \n(see the Instantaneous Powers and Waveform Sampling section). \nAPPARENT ENERGY CALCULATION \nThe apparent energy is given as the integral of the apparent \npower. \n\uf0f2\uf03d Power(t)dt  Apparent     Energy Apparent  (27) \nThe ADE7953  achieves the integration of the apparent power \nsignal in two stages. In the first stage, the apparent power signals are accumulated in an internal 48-bit register every 143 μs (6.99 kHz) until an internal fixed threshold is reached. When this threshold is reached, a pulse is generated and is \naccumulated in 24-bit, user accessible accumulation registers. \nThe internal threshold results in a maximum accumulation rate \nof approximately 206.9 kHz with full-scale inputs.  This process occurs simultaneously on Current Channel A and \nCurrent Channel B, and the resulting readings can be read in the 24-bit APENERGYA (Address 0x222 and Address 0x322) and \nAPENERGYB (Address 0x223 and Address 0x323) registers. \nNote that the apparent energy register contents roll over to full-\nscale negative (0x800000) and continue to increase in value \nwhen the power or energy flow is positive. Conversely, if the \npower is negative, the energy register underflows to full-scale \npositive (0x7FFFFF) and continues to decrease in value. \nAPENERGYA and APENERGYB are read-with-reset registers \nby default. This means that the contents of these registers are reset to 0 after a read operation. This feature can be disabled  by clearing Bit 6 (RSTREAD) of the LCYCMODE register (Address 0x004). \nThe ADE7953  includes two sets of interrupts that are triggered \nwhen the apparent energy register is half full (positive or \nnegative) or when an overflow or underflow condition occurs. The first set of interrupts is associated with the Current Channel A apparent energy, and the second set of interrupts  \nis associated with the Current Channel B apparent energy.  \nThese interrupts are disabled by default and can be enabled by \ns e tt i ng  t h e  VA E H FA  an d  VA E O FA  bit s  i n  t h e  I R Q E NA  re g i s t e r  \n(Address 0x22C and Address 0x32C) for Current Channel A, \nand the V AEHFB and V AEOFB bits in the IRQENB register \n(Address 0x22F and Address 0x32F) for Current Channel B. \nApparent Energy Integration Time Under Steady Load \nThe discrete time sample period (T) for the accumulation \nregisters is 4.83 μs (1/206.9 kHz). With full-scale sinusoidal \nsignals on the analog inputs, a pulse is generated and added  to the APENERGYA and APENERGYB registers every 4.83 μs, assuming that the AV AGAIN and BV AGAIN registers are set  to 0x00. The maximum positive value that can be stored in the 24-bit APENERGYA and APENERGYB registers is 0x7FFFFF \nbefore the register overflows. The integration time under these \nconditions can be calculated as follows: \nTime  = 0x7FFFFF × 4.83 μs = 40.5 sec (28) \n \n \nCURRENT RMS\nCHANNEL\nA OR B48 0\n++\nxVAOS\n09320-024VOLTAGE\nRMSINTERNAL\nACCUMULATION\nFIXED INTERNAL\nTHRESHOLDAPPARENT\nPOWER\nSIGNALAPENERGYx23 0xVAGAIN\n \nFigure 55. Apparent Energy Accumulation Signal Chain \n \nADE7953  Data Sheet  \n \nRev. C | Page 32  of 72 48 0\n++xVAOS\n09320-125INTERNA L\nACCUMUL ATION\nFIXED INTERNA L\nTHRESHOLD\nCALIBR ATION\nCONTRO LZERO-CROSSING\nDETECTIONOUTPUT FROM\nVOLTAGE CHANNE L\nADCAPPARENT\nPOWER\nSIGNA L\nAPENERGYx23 0\n15 0LINECYCLPF1xVAGAIN\n \nFigure 56. Apparent Energy Line Cycle Accumulation  \n \nApparent Energy Line Cycle Accumulation Mode  \nIn apparent energy line cycle accumulation mode, the energy \naccumulation  of the ADE7953 is synchronized to the voltage \nchannel zero crossing  so that the apparent energy on Current \nChannel A and Current Channe l B can be accumulated over  \nan integral number of half line cycles. Line cycle accumulation \nmode is disabled by default and can be enabled on Current \nChannel A and Current Channel B by setting the AL V A and BLVA bits to 1 in the LCYCMODE register (Address 0x004).  \nThe accumulation time should be written to the LINECYC \nregister (Address 0x101) in the unit of number of half line cycles . \nThe number of half line cycles written to the LINECYC register \nis used for both the Current Channel A and Current Channel B accumulation periods. The ADE7953 can accumulate apparent \nenergy for up to 65,535 half line cycles. This equates to an accu -\nmulation period of appro ximately 655 sec with 50 Hz inputs \nand 546 sec with 60  Hz inputs.  \nAt the end of a line cycle accumulation cycle , the APENERGYA \nand APENERGYB registers are updated , and  the CY CEND flag \nin the IRQSTAT A register (Address 0x22D and Address 0x32D) \nis set. If the CYCEND b it in the IRQEN A register is set, an external  \ninterrupt is issued on the \nIRQ pin. In this way , the IRQ pin can \nalso be used to signal the completion of the line cycle accumula -\ntion.  Another accumulation cycle b egin s immediately , as long as \nt he ALVA  and BLVA bits in the LCYCMODE register remain set.  \nThe contents of the AP ENERGYA and AP ENERGYB registers \nare updated synchronous to the CYCEND flag.  The APENERGY A  \nand APENERGYB register s hold  their current value s until the \nend of the next line cycle period , when the contents are replaced \nwith the new reading.  If the read -with -reset bit (RSTREAD) in \nthe LCYCMODE register (Address 0x004) is  set, the content s of \nthe APENERGYA and APENERGYB registers are cleared after \na read and remain at 0 until the end of the next line cycle period.  If a new value is written to the LINECY C register (Address 0x101)  \nmidway through a line cycle accumulation, the new value is not internally loaded until the end of a line cycle period. When th e \nLINECYC register is updated mid -reading, the current energy \naccumulation cycle is completed, and the new value is then programmed, ready for the next cycle. This prevents any invalid readings due to changes to the LINECYC register (see Figure 47). \nNote that when line cycle accumulation mode is first enabled , the \nreading after the first CYCEND flag should be ignored because it may be inaccurate. This is because the line cycle accumulation \nmode is not synchronized to the zero cros sing and, therefore, \nthe first reading may not be over a complete number of half line \ncycles. After the first line cycle accumulation is complete, all successive readings will be correct.  \nAMPERE- HOUR ACCUMULATION  \nIn a tampering situation where no voltage i s available to the energy  \nmeter, the ADE7953 can accumulate the ampere -hour measure -\nment instead of the apparent power in the APENERGYA and \nAPENERGY B registers. If enabled, the Current Channel A and \nCurrent Channel B IRMS measurements are continually accu -\nmulated instead of the apparent power. If enabled, the apparent power CF output pin also reflects the ampere- hour measurement  \n(see the Energy -to-Frequency Conversion  section). All the signal  \nprocessing and calibration registers available for the apparent power and apparent energy accumulation remain active when \nthe ampere- hour accumulation mode is enabled. This includes \nthe apparent energy no -load feature (see the Apparent Energy \nNo-Load  section). Recalibration is required in this mode due  \nto internal scaling differences between the IRMS and apparent \nsignals.  \n \n \nData Sheet  ADE7953  \n \nRev. C | Page 33  of 72 ENERGY -TO-FREQUENCY CONVERSION \nThe ADE7953  prov ides two energy -to-frequency conversions for  \ncalibration purposes.  After initial calibration at manufacturing , \nthe manufacturer or end c ustomer is often required to verify the \nmeter accuracy.  One convenient way to do this is to provide an \noutput frequency that is proportional to the active, reactive , or \napparent power, or t o the current rms under steady load condi -\ntions.  This output freque ncy provides a simple single -wire \ninterface that can be optically isolated to interface to external \ncalibration equipment.  The ADE7953  includes two fully \nprogrammable calibration frequency  output pins : CF1 ( Pin 2 3) \nand CF2 ( Pin 2 4). The energy -to-frequency conversion is \nillustrated in Figure 57. \n÷ DFC1\nCFxDENCFx PULSE\nOUTPUTVACFxSE L BITS\nIN CFMODE REGISTER\nIRMS\nVAR\nWATT\nIRMS A + IRMSB\nAWATT + B WATT\n09320-026 \nFigure 57. Energy -to-Frequency Conversion  \nTwo digital -to-frequency converters ( DFCs) are used to generate \nthe pulse outputs.  The DFC generates a pulse each time ± 1 LSB \nis accumulated in the energy register.  An output pulse is gener -\nated when CFxDEN number of pulses is generated at the DFC \noutput.  The CF1 and  CF2 pins can be configured to output a signal that \nis proportional to the active power, reactive power, apparent \npower , or IRMS on Current Channel A or Current Channel B.  \nIn addition , it is possible to configure CF1 and CF2 to output a \nsignal that is prop ortional to the sum of the Current Channel A \nIRMS and the Current Channel B IRMS , or, alternatively , propor -\ntional to the sum of the active power on Current Channel A and \nthe active power on Current Channel B.  Recalibration is required  \nin this configuratio n because the actual CF output equals the sum  \nof the active power on Current Channel A and the active power \non Current Channel B, divided by 2. The CF1 and CF2 output pins are programmed b y setting the CF1SEL and CF2SEL bits  \nin the CFMODE register (Addres s 0x107).  \nBoth pulse outputs (CF1 and  CF2) are disabled by default  \nand can be enabled by clearing the CF1DIS and CF2DIS bits , \nrespectively , in the CFMODE register (Address 0x107) . \nPULSE OUTPUT CHARACT ERISTICS  \nThe pulse outputs for both DFCs stay low for 8 0 ms if the pulse \nperiod is longer than 160  ms (6.25 Hz).  If the pulse period is \nshorte r than 160 ms, the duty cycle of the pulse outputs is 50%.  \nThe pulse outputs are active low.  The maximum output frequency  \nwith ac inputs at full scale  and with CFxDEN  = 0x00 is approxi -\nmately 2 06.9 kHz.  \nThe ADE7953 includes two unsigned 1 6-bit registers, CF1DEN \n(Address 0x103) and CF2DEN (Address 0x104) that control  the \nCF output frequency on the CF1 and CF2 pins , respectively . The \n16-bit frequency scaling registers can scale the output frequency \nby 1/ (216 – 1) to 1 with a step of 1/ (216 – 1). Note that when \nmodifying the CF1DEN and CF2DEN registers , two sequential \nwrite operations must be performed to ensure that the write is \nsuccessful.  \n \n \nADE7953  Data Sheet  \n \nRev. C | Page 34  of 72 ENERGY CALIBRATION \nGAIN CALIBRATION  \nThe active, reactive, and  apparent power measurements can  \nbe calibrated on Current Channel A and Current Channel B \nseparately.  This allows me ter-to-meter gain variation to be \ncompensated for.  \nThe A WGAIN register (Address 0x282 and Address 0x382) \ncontrols the active power gain calibration on Current Channe l A , \nand the BWGAIN register (Address 0x28E and Address 0x38E) \ncontrols the active power ga in calibration on Current Channe l B.  \nThe default value of the xWGAIN registers is 0x400000, which  \ncorresponds to no gain calibration.  The minimum value that can be \nwritten t o the xWGAIN register s is 0x200000, which  represents a  \ngain adjustment of −5 0%. The maximum value that can be \nwritten to the xWGAIN registers is 0x600000,  which represents \na gain adjustment of +50%.  Equation 29 shows the relationship \nbetween the gain adjustment and the xWGAIN register s. \nOutput Power (W)  =  (29) \n\uf8f7\uf8f7\n\uf8f8\uf8f6\n\uf8ec\uf8ec\n\uf8ed\uf8eb\n×400000x0xWGAIN Power Active  \nSimilar gain calibration registers are available for the reactive \npower and the apparent power.  The reactive power on Current \nChannel A and Current Channel B can be gain calibrated using \nthe A V ARGAIN (Address 0x283 and Address 0x383) and \nBVARGAIN (Address 0x 28F and Address 0x38F)  registers , \nrespectively . The apparent power on Current Channel A and \nCurrent Channel B can be gain calibrated using the AVAGAIN \n(Address 0x284 and Address 0x384) and BV A GAIN  \n(Address 0x290 and Address 0x390)  registers , respectively .  \nThe xVARGAIN and xVAGAIN registers affect  the reactive and \napparent power s in the same way that the xWGAIN registers \naffect  the active power. Equation 29 can therefore be modified \nto represent the gain calibration of the reactive and apparent powers , as shown in Equation 30 and Equation  31. \nOutput Power (VAR)  =  (30) \n\uf8f7\uf8f7\n\uf8f8\uf8f6\n\uf8ec\uf8ec\n\uf8ed\uf8eb\n×400000x0xVARGAIN Power Reactive  \n \nOutput Power (VA)  =  (31) \n\uf8f7\uf8f7\n\uf8f8\uf8f6\n\uf8ec\uf8ec\n\uf8ed\uf8eb\n×400000x0xVAGAIN Power Apparent  \n \n \n \n  Current Channel Gain Adjustment  \nA gain calibration register is also provided on C urrent Channel B .  \nThis registe r can be used to match Current Channel B to Current  \nChannel A for simple calibration and computation.  The Current \nChannel B gain calibration is performed using the BIGAIN regis ter \n(Address 0x28C and Address 0 x38C).  Equation 32 shows the \nrelationship between the gain adjustment and the IRMSB register.  \nIRMSB Expected  =  (32) \n\uf8f7\uf8f7\n\uf8f8\uf8f6\n\uf8ec\uf8ec\n\uf8ed\uf8eb\n×400000x0BIGAIN IRMSBINITIAL \nSimilar registers are available for  the voltage channel and for  \nCurrent Channel A : the AVGAIN register (Address 0x281 and \nAddress 0x381)  and BVGAIN register (Addre ss 0x28D and \nAddress 0x38D) . Only the AVGAIN register affects the RMS \nreading but to avoid discrepancies in other registers if AVGAIN \nis set then BVGAIN should be set to the same value . The \nAIGAIN register (Address 0x280 and Address 0x380) provide s \nthe cal ibration adjustment and function in the same way as the \nBIGAIN register.  \nPHASE CALIBRATION  \nThe ADE7953 is designed to function with a variety of current \ntransducers , including those that induce i nherent phase errors.  \nA phase error of 0.1 ° to 0.3 ° is not uncommon for a current \ntransformer (CT).  These phase errors can vary from part to \npart, and  they must be corrected to achieve accurate power \nreadings.  The errors associated with phase mismatch are \nparticularly noticeable at low power factors.  The ADE7953 \nprovides a means of digitally calibrating these small phase errors by introducing a time d elay or a time advance.  \nBecause  different sensors can be used on Current Channel A \nand Current Channel B, separate phase calibration registers are \nincluded on each channel.  The PHCALA register (Address 0x108) \ncan be used to correct phase errors on Current Channel A, and \nthe PHCALB register (Address 0x109) can be used to correct phase errors on Current Channel B.  Both registers are in 10-bit \nsign magnitude format, with the MSB indicating whether a time delay or a time advance is added to the corresponding cu rrent \nchannel.  Writing a 0 to the MSB of the PHCAL x register intro -\nduces a time delay to the current channel.  Writing a 1 to the \nMSB of the PHCALx register introduces a time advance.   \nThe maximum range that can be written to PHCALx [8:0] is  \n383 (decimal) . On e LS B of  t he PHCALx register is equivalent  to  \na time delay or time advance of 1.1 17 µs (CLKIN/4).  With a line \nfrequency of 50  Hz, the resolution is 0.02°/LSB ( (360 × 50 Hz)/ \n895 kHz) , which provides a total correction of 7.66° in either \ndirection.  With a line frequency of 60  Hz, the resolution is  \n0.024° /LSB ((360 × 60 Hz)/895 kHz) , which  provides a total \ncorrection of 9.192 ° in either direction.  \nData Sheet  ADE7953  \n \nRev. C | Page 35  of 72 OFFSET CALIBRATION  \nPower Offsets  \nThe ADE7953 includes offset calibration registers for the active, \nreactive , and apparent powers on Current Channel A and C urrent  \nChannel B. Offsets can exist in the power calculations due to \ncrosstalk between channels on the PCB and in the ADE7953 . \nThe offset calibration allows these offsets to be removed to \nincrease the accuracy of the measurement at low input levels.   \nThe active power offset can be corrected on Current Channel A \nand Current Channel B by adjusting the AWATTOS (Address \n0x289 and Address 0x389) and BWA TTOS (Address 0x295 and Address 0x395) registers , respectively . The xWATTOS registers \nare 2 4-bit, signed twos complement  registers with default  \nvalues of 0.  One LSB in the xWATTOS register is equivalent  \nto 0.001953 LSBs in the active power measurement.  The \nxWATTOS  value is, therefore , applied to the xWATT register, \nshifted by nine  bits, as shown in Figure 58. \n23 9 0\nxWATTOS\n23 0xWATT\n09320-027 \nFigure 58. xWATTOS  and xWATT Registers  \nWith full-scale  inputs on the voltage and current channels , the \nexpected power reading is approximately 4862401 LSBs (deci -\nmal) . At −60 dB (1000:1) on Current Ch annel A  and Current \nChannel B, the expected readings in the AWATT and BWATT \nregisters , respectively , are approximately 4862 (decimal) . One \nLSB of the xWATT register , therefo re, corresponds to \n0.000039% at −60 dB. \nThe reactive power offset can be corrected on Current Channel A  \nand Current Channel B by adjusting the AVAROS (Address \n0x28A and Address 0x38A) and BV AROS (Address 0x296 and Address 0x396) registers , respectively . The xVAROS registers \naffect  the reactive power in the same way that  the xWATTOS \nregis ters affect the active power.  \nThe apparent power offset can be corrected on Current  \nChannel A and Current Channel B by adjusting the AVAOS \n(Address 0x28B and Address 0x38B) and BV AOS (Address 0x297  \nand Address 0x397) registers , respectively . The xVAOS reg isters \naffect  the apparent power in the same way that the xWATTOS \nregister s affect the active power.  RMS Offsets  \nThe ADE7953 includes offset calibra tion registers to allow offset \nin the rms measurements to be corrected.  Offset calibration \nregisters are available for the IRMS measurements on Current \nChannel A and Current Channel B, as well as for the VRMS \nmeasurement.  Offset can exist in the rms calcul ation due to \ninput noise that is integrated in the dc component of V2(t). The \noffset calibration allows these offsets to be removed to increase the accuracy of the measurement at low input levels.  \nThe voltage rms  offset can be corrected by adjusting the VR MSOS \nregister (Address 0x28 8 and Address 0x38 8). This 24 -bit, signed \ntwos complement  register has a default value of 0 , indicating \nthat no offset is added.  The VRMSOS value is applied prior to \nthe square root function. Equation 3 3 shows the effect of the \nVRMSOS register on the VRMS measurement.  \n12 22  VRMSOS VRMS  VRMS0 × + =  (33) \nwhere VRMS 0 is the initial VRMS reading prior to offset \ncalibration.  \nThe current rms  offset is calibrated in a similar way.  The AIRMSOS  \nregister (Address 0x286 and Address 0x386) compensa tes for \noffsets in the IRMSA measurement , and the BIRMSOS register \n(Address 0x292 and Address 0x392) compensate s for offsets in \nthe IRMSB measurement.  Both registers are 2 4-bit, signed twos  \ncomplement registers.  The xIRMSOS registers affect the IRMS  \nmeasur ements  in the same way that the VRMSOS register \naffect s the VRMS measurement.  Equation 33 can therefore be \nmodified to represent the offset calibration on the IRMS , as \nshown in  Equation  34 and Equation 3 5. \n12 22  AIRMSOS IRMSA  IRMSA0 × + =  (34) \n12 22  BIRMSOS IRMSB  IRMSB0 × + =  (35) \nRefer to the AN-1118 Application Note , Calibrating a Single -\nPhase Energy Meter Based on the ADE7953 , for a more detailed \nexplanation on how to calibrate an energy meter based on the ADE7953.  \n \n \n \n \n \nADE7953  Data Sheet  \n \nRev. C | Page 36  of 72 PERIOD MEASUREMENT  \nThe ADE7953 provide s a period measurement of the voltage \nchannel.  This measurement is provide d in the 1 6-bit, unsigned \nperiod  register (Address 0x10E).  The period register is update d \nonce every line period and has  a settling time of 30  ms to 40  ms \nassociated with it before the period measurement is stable.  \nThe p eriod measurement has a resolution of 4.4 7 µs/LSB \n(223.75 kHz clock) , which represents 0.022 35% when the line \nfrequency is 50  Hz and 0.02682 % when the line frequency   \nis 60  Hz. \n The value of the period register for a 50  Hz network  is approxi -\nmately 44 75 in decimal  (223.75 kHz/50  Hz) and 37 29 in \ndecimal  (223.75 kHz/60  Hz) for a 60  Hz network.  The period \nregister is stable at ±1 LSB when the line is established and the \nmeasurement does not change.  \nThe following e quat ion can be used to compute the line period \nand frequency using the period  register:  \nseckHz75.2231]0:15 PERIOD[ +=LT  (36) \n \n \nData Sheet  ADE7953  \n \nRev. C | Page 37  of 72 INSTANTANEOUS POWERS  AND WAVEFORM SAMPLIN G \nThe ADE7953 provides access to the current and voltage \nchannel waveform data, along with the instantaneous active, \nreactive , and  apparent powers.  This information allows the \ninstantaneous dat a to be analyzed in more detail, including \nreconstruction of the current and voltage input for h armonic \nanalyses. These measurements are available from a set of  \n24-bit/32-bit signed registers (see Table 7). \nAll measurements are updated at a rate of 6.99  kHz ( CLKIN /512) .  \nThe ADE7953 provides an interrupt status bit, WSMP , that is \ntrigger ed at a rate of 6.99  kHz, allowing measurements to be \nsynchronized with the instantaneous signal update rate. This status bit is availa ble in the IRQSTAT A register (Address 0x22D \nand Address 0x32D). This signal can also be configured to trigger an interrupt on the external \nIRQ pin by setting the \nWSMP bit (Bit 17) in the IRQEN A register  (Address 0x22C  \nand Address 0x32C) . \nThe ADE7953 also provides the  option of issuing an unlatched, \ndata-ready signal at the same rate of 6.99  kHz. This signal provides \nthe same informa tion as the WSM P interrupt , but it is unlatched  \nand, therefore , does not need to  be serviced each time that new \ndata is available. The data- ready signal goes high for a period of \n280 ns before automatically returning low. The data -ready signal  \nis disabled by default and can be output on the REVP , ZX, and \nZX_I pins by setting the REVP_ALT, ZX_ALT, and ZXI_ALT bits to 1001 in the ALT_OUTPUT register (Address 0x110).  Table 7. Waveform Sampling Registers  \nMeasurement  Reg ister  Address  \n24-Bit 32-Bit \nActive power  \n(Current Channel A) AWATT  0x212  0x312  \nActive power  \n(Current Channel B)  B WATT  0x213  0x313  \nReactive power \n(Current Channel A)  AVA R  0x214  0x314  \nReactive power \n(Current Channel B)  B VA R  0x215  0x315  \nApp arent  power  \n(Current Channel A)  AVA  0x210  0x310  \nApparent power \n(Current Channel B)  B VA  0x211  0x311  \nCurrent  \n(Current Channel A ) IA 0x216  0x316  \nCurrent  \n(Current Channel B)  IB 0x217  0x317  \nVoltage  \n(voltage ch annel ) V 0x218  0x318  \n \n \n \nADE7953  Data Sheet  \n \nRev. C | Page 38  of 72 POWER FACTOR \nThe ADE7953 provides a direct power factor measurement \nsimultaneously on Current Channel A and Current Channel B.  \nPower factor in an ac  circuit is defined as the ra tio of the active \npower flowing to the load to the apparent power.  The power \nfactor meas urement is defined in terms of “ leading” or “lagging, ” \nreferring to whether the current waveform is leading or lagging \nthe voltage waveform.   \nWhen the current waveform is leading the voltage  waveform , \nthe load is capacitive and is defined as a negative power factor.  \nWhen the current  waveform  is lagging the voltage  waveform , \nthe load is inductive and is  defined as a positive power factor.   \nThe relationship of the current  waveform  to the voltage wave -\nform is illustrated in Figure 59. \nACTIVE (–)\nREACTIVE (–)ACTIVE (+)\nREACTIVE (–)\n+60° = θ; PF = –0.5I\nV\nI–60° = θ; PF = +0.5\nACTIVE (–)\nREACTIVE (+)ACTIVE (+)\nREACTIVE (+)CAPACITIVE LOAD:\nCURRENT LEADS\nVOLTAGE\nINDUCTIVE LOAD:\nCURRENT LAGS\nVOLTAGE\n09320-028 \nFigure 59. Capacitive and Inductive Loads  \nAs shown in Figure 59, the reactive power measurement is \nnegative when t he load is capacitiv e and positive when the  \nload is inductive.  The sign of the reactive power can therefore \nbe used to reflect the sign of the power factor.  \nThe mathematical definition of power factor is shown in \nEquation 37. \nPower ApparentPower ActivePower Reactiveof Sign Factor Power| |) ( × =  (37) \nThe absolute value of active power is used . \nThe power factor measurement includes the effect of all harmonics over the 1. 23 kHz bandwidth.  \nThe power factor readings are stored in  two 1 6-bit, signed \nregisters : PF A (Address 0x10A ) for Current Channel A and  \nPFB (Address 0x10B) for Current Channel  B.  Thes e register s are \nsigned, twos complement  register s with the MSB indicating the \npolarity of the power factor.  Each LSB of the PFx register equates  \nto a weight of 2\n−15; therefore, the maximum register value of \n0x7FFF corresponds  to a power factor value of 1.  The minimum \nregister value of 0x8000 corresponds to a power factor of −1. \n \n \n \n \n By default , the instantaneous active and apparent power \nreadings are used to calculate the power factor , and the register \nis updat ed at a rate of 6.9 9 kHz. The sign bit is taken from the \ninstantaneous reactive energy measurement on each channel.  \nUSING THE LINE CYCLE ACCUMULATION MODE \nTO DETERMINE THE POW ER FACTOR  \nIf a power factor measurement with more averaging is  required , \nthe ADE7953  can use  the line cycle accumulation measurement \non the active and apparent energies to determine the power factor  \n(see the  Active Energy Line Cycle Accumulation Mode section \nand the Apparent Energy Line Cycle Accumulation Mode  \nsection ). This option provides a more stable power factor \nreading.  \nTo use the line cycle accumulation mode to determine the power  \nfactor , the ADE7953 must be configured as follows:  \n• The PFMODE bit ( Bit 3 ) must be set to 1 in the CONFIG \nregister (Address 0x102) . \n• The line cycle accumulation mode must be enabled on \nboth the active and apparent energies by setting the \nxLWATT and xLVA bits to 1 in the LCYCMODE register \n(Address 0x004).  \nWhen using line cycle accumulation to determine the power factor , the update rate of the power factor measurement is an \nintegral number of half line cycles . The number of half line cycles  \nis programmed in the LINECYC register (Address 0x101).  For \ncomplete information about setting up the line cycle accumula -\ntion mode , see the Active Energy Line Cycle Accumulation \nMode  section and the Apparent Energy Line Cycle \nAccumulation Mode  section . \nPOWER FACTOR WITH NO -LOAD DETECTION  \nThe power factor measurement is affect ed by the no-load \ncondition if n o-load detection is enabled ( see the No-Load \nDetection  section ). The following considerations apply only \nwhen  no-load detection is enabled and a no -load condition \noccurs:  \n• If the apparent energy no -load condition  is true , the power  \nfactor measurement is set to 1  because it is assumed that \nthere is no active or reactive power.  \n• If the active energy no -load condition is true, the power \nfactor measurement is set to 0 because it is assumed that \nthe load is purely capacitive or inductive .  \n• If the reactive energy no -load condition is true , the sign of \nthe power factor is based on the sign of the active power.  \nData Sheet ADE7953\n \nRev. C | Page 39 of 72 ANGLE MEASUREMENT \nThe ADE7953  can measure the time delay between the current \nand voltage inputs. This feature is available on both Current \nChannel A and Current Channel B. The negative-to-positive transitions identified by the zero-crossing detection circuit are used as a start and stop for the measurement (see Figure 60). \nPHASE A\nCURRENT\nANGLE_xPHASE A\nVOLTAGE\n09320-031 \nFigure 60. Current-to-Voltage Time Delay \nThe ADE7953  provides a time delay measurement on Current \nChannel A and Current Channel B simultaneously. The result-ing measurements are available in the 16-bit, signed registers \nANGLE_A (Address 0x10C) and ANGLE_B (Address 0x10D). \nOne LSB of the ANGLE_A or ANGLE_B register corresponds to 4.47 μs (223 kHz clock). This results in a resolution of 0.0807° at 50 Hz ((360 × 50)/223 kHz) and 0.0969° at 60 Hz \n((360 × 60)/223 kHz). The time delay between the current and voltage inputs can be \nused to characterize how balanced the load is. The delays between phase voltages and currents can be used to compute the power factor on Current Channel A and Current Channel B, respec-tively, as shown in Equation 38. \n\uf0f7\uf0f7\n\uf0f8\uf0f6\n\uf0e7\uf0e7\n\uf0e8\uf0e6 \uf0b4\uf0b4 \uf03d \uf066kHz 223360_ cos cosLINE\nxfx ANGLE\uf06f\n (38) \nwhere: \nx = A or B. \nfLINE is 50 Hz or 60 Hz. \nThis method of determining the power factor does not take into account the effect of any harmonics. Therefore, it may not be \nequal to the true definition of power factor shown in Equation 37. \n    \n \nADE7953  Data Sheet  \n \nRev. C | Page 40  of 72 NO-LOAD DETECTION \nThe ADE7953 in cludes a no -load detection  feature that eliminates  \n“meter creep. ”  Meter creep is defined as excess energy that is \naccumulated by the meter when there is no load attached.  The \nADE7953 warns of this condition and stops energy accumula -\ntion if the energy fal ls below a programmable threshold.  The \nADE7953 includes a no -load feature on the active, reactive, and  \napparent energy measurements.  This allows a true no -load \ncondition to be detected and also prevents creep in purely \nresistive, inductive , or capacitive load conditions.  The no-load \nfeature is enabled by  default.  It is guaranteed that the CF pulses \nand the energy register will remain in sync even after a no -load \ncondition.  \nSETTING THE NO -LOAD THRESHOLDS  \nThree separate 24-/32-bit registers are available to set the  \nno-load threshold on the active , reactiv e, and apparent  \nenergies : AP_NOLOAD (Address 0x203 and Address 0x303) , \nVAR_NOLOAD (Address 0x204  and Address 0x304) , and \nVA_NOLOAD (Address 0x205  and Address 0x305) . The active, \nreactive , and  apparent energy no -load thresholds are completely \nindependent a nd, therefore , all three thresholds are required.  \nThe no-load thresholds for all three measurements can be set \nbased on Equation 3 9. \n4.1536,65Y  X_NOLOAD −=  (39) \nwhere: \nX is AP , VAR , or VA . \nY is the required threshold a mplitude with reference to  \nfull-scale energy (for example 2 0,000:1) . \nAs shown in Equation 3 9, the no-load threshold can be config -\nured based on the required level with respect to full scale.  For \nexample, if a no-load threshold of 10,000:1 of the full -scale  \ncurrent channel is required and the  voltage channel is set up to \noperat e at ±250 mV (50% of full scale ), then a value of 20,000 is \nrequired for Y.  A default value of 58 ,393 (decimal)  is programmed  \ninto the AP_NOLOAD and VAR_NOLOAD registers, setting the initial no-load threshold to a pproxim ately 10,000:1.  The \nVA_NOLOAD register has a default value of 0x00.  \nThe no -load thresholds AP_NOLOAD, VAR_NOLOAD, and \nVA_NOLOAD must be written before enabling the no -load \nfeature. The no -load feature is enabled using the DISNOLOAD \nregister (Address 0x001) . If the threshold requires modification, \ndisable the no -load detection, modify the threshold, and then \nreenable the feature using the DISNOLOAD register.  \nAlthough separate no -load interrupts are available for Current \nChannel A and Current Channel B (phase  and neutral  current ), \nthe same no -load level is used for both . For example, if the \nVAR_NOLOAD level is set to 0.05% of full scale, this value is \nthe reactive power no-load threshold used for both Current \nChannel A (phase) and Current Channel B (neutral).  \n ACTIVE ENERGY NO -LOAD  DETECTION  \nActive energy no -load detection can be used in conjunction with  \nreactive energy no-load detection to establish a  “true” no-load \nfeature.  If both the active and reactive energy fall below the  \nno-load threshold , there is no resistive, inductive , or capacitive \nload.  The active energy no -load feature can also be used to \nprevent creep of the active energy when there is an inductive  or capacitive load present.  \nIf the active energy on either Current Channel A (phase)  \nor Current Channel B (neutral) fall s below the programm ed \nthreshold, the active energy on that channel cease s to accumu -\nlate in the AENERGY A and AENERGY B registers , respectively . \nIf either the CF1 or CF2 pin is programmed to output active energy , the CF output is dis abled and held high  (see the Energy -\nto-Frequency Conversion  section ). If enabled , the active reverse \npower indication (\nREVP ) hold s its current state while in the no-\nload condition ( see the Reverse Power  section).  The Current \nChannel A active energy  no-load condition is indicated by the \nAP_NOLOADA bit ( Bit 6 ) in the IRQSTAT A register (Address  \n0x22D  and Address 0x32 D). The Current Channel B active energy  \nno-load condition is indicated by t he AP_NOLOADB bit ( Bit 6 ) \nin the IRQSTA TB register (Address 0x2 30 and Address 0x330).  \nCurrent C hannel A and Current Channel B are independent \nand, therefore , a no-load condition on Current Channel A \naffects only  the energy accumulation, CF output , and  reverse \npower of Current Channel A, and vice versa.  \nThe active energy no-load feature is enabled by default and  \ncan be disabled by setting Bit 0  in the DISN OLOAD register \n(Address 0x0 01) to 1. \nActive Energy No -Load Interrupt  \nTwo interrupts a re associated with  the active energy no -load \nfeature : one for Current Channel A (phase) and one for Current \nChannel B (neutral).  If enabled , these interrupts are  trigger ed \nwhen  the active energy falls  below the programm ed threshold.   \nThe Current Channel A active energy no -load interrupt can be \nenabled by setting the AP_NOLOADA bit (Bit 6) in the IRQEN A \nregister (Address  0x22C and Address  0x32C).  When  this bit is set , \nan active energy no -load event on Current Channel A causes \nthe IRQ pin ( Pin 2 2) to fall to 0  (see the Primary Interrupts \n(Vol t age Channel and Current Channel  A) section ). \nThe Current Channel B active energy no-load interrupt can be \nenabled by setting the AP_NOLOADB bit (Bit 6) in the IRQ ENB  \nregister (Address  0x22F and Address  0x32F).  When  this bit is set , \nan active energy  no-load event on C urrent Ch annel B triggers  \nthe IRQ alternative output (se e the  Current Channel B Interrupts  \nsection ). \n \nData Sheet  ADE7953  \n \nRev. C | Page 41  of 72 Active Energy No -Load Status Bits  \nIn addition to the active energy no -load interrupt, the ADE7953  \nincludes two unlatched status bits that continually monitor the \nno-load status of Current Channel A and Current Channel B.  \nThe A CTNLOAD_A and ACT NLOAD_B bits are located in the \nACCMODE register (Address 0x 201 and Address 0x301).  These \nbits differ  from the interrupt status bits  in that  they are unlatched  \nand can , therefore , be used to drive an LED.  \nREACTIVE ENERGY NO -LOAD  DETECTION  \nReactive energy no-load detection can be used in conjunction \nwith active energy no -load detection to establish a “ true” no-load \nfeature.  If both the reactive and active energy fall below the no -load \nthreshold , there is no resistive, inductive, or capacitive load.  The \nreactive energy no -load feature can also be used to prevent creep  \nof the reactive energy when there is a resistive load present.   \nIf the reactive energy on either Current Channel A (phase) or Current Ch annel B (neutral) falls below the programm ed thresh-\nold, the reactive energy on that channel ceases to accumulate in the RENERGYA and RENERGYB registers , respectively . If either  \nthe CF1 or CF2 pin is programmed to output reactive energy, the \nCF output is d isabled and held high (see the Energy -to-Frequency \nConversion  section). If enabled , the reactive reverse power indi -\ncation holds its current state while in the no-load condition ( see \nthe Reverse Power  section). The Current Channel A reactive \nenergy no-load condition is indicated by the VAR_NOLOADA \nbit (Bit 7 ) in the IRQSTAT A register ( Address 0x22D and \nAddress 0x32D ). The Current Channel B reactive energy no -\nload condition is indicated by the VAR_NOLOADB  bit (Bit 7 ) \nin the IRQSTA TB register ( Address 0x230 and Address 0x330).  \nCurrent Channel A and Current Channel B are independent \nand, therefore , a no-load condition on Current Channel A \naffect s only  the energy accumulation, CF output , and  reverse \npower  of Current Channel A, and vice versa.  \nThe reactive energy no-load feature is enabled by default and \ncan be disabled by setting Bit 1  in the DIS NOLOAD register \n(Address 0x0 01) to 1. \nReactive Energy No -Load Interrupt  \nTwo interrupts are associated with the react ive energy no -load \nfeature: one for Current Channel A (phase) and one for Current Channel B (neutral). If enabled, these interrupts are triggered when the reactive energy falls below the programm ed threshold.   \nThe Current Channel A reactive energy no -load interrupt can be  \nenabled by setting the VAR_NOLOADA bit (Bit 7) in the IRQENA  \nregister (Address 0x22C and Address 0x32C). When this bit is set , \na reactive energy no -load event on Current Channel A causes \nthe \nIRQ pin (Pin 22) to fall to 0 (see the Primary Interrupts \n(Vol t age Channel and Current Channel  A) section).  \n \n \n The Current Channel B reactive energy no -load interrupt can be  \nenabled by setting the VAR_NOLOADB bit (Bit 7) in the IRQENB  \nregister (Address 0x22F and Address 0x32F). When this bit is set , a \nreactive power no -load event on Current Channel B triggers the \nIRQ alternative output (see the Current Channel B Interrupts  \nsection).  \nReactive Energy No -Load Status Bi ts \nIn addition to the reactive energy no -load interrupt, the \nADE7953 includes two unlatched status bits that continually \nmonitor the no- load status of Current Channel A and Current \nChannel B. The VARNLOAD_A and VARNLOAD_B bits are \nlocated in the ACCMODE register (Ad dress 0x201 and Address \n0x301).  These bits differ from the interrupt status bits in that \nthey are unlatched and can, therefore, be used to  drive an LED.  \nAPPARENT ENERGY NO -LOAD DETECTION  \nApparent energy no -load detection can be used to determine \nwhether the total consumed energy is below the no -load thresh-\nold. If the apparent energy on either Current Channel A (phase) \nor Current Channel B ( neutral) falls below the program med  \nthreshold, the apparent energy on that channel ceases to accumulate in the APENERGYA and APENERGYB registers , \nrespectively . If either the CF1 or CF2 pin is programmed to \noutput apparent energy, the CF output is disabled and held high \n(see the Energy -to-Frequency Conversion  section). The Current \nChannel A apparent energy no -load condition is indicated by the  \nVA_NOLOADA bit (Bit 8) in the IRQSTATA register (Address 0x22D and Address 0x32D). The Cu rrent Channel B apparent \nenergy no -load condition is indicated by the VA_NOLOADB \nbit (Bit 8) in the IRQSTATB register (Address 0x230 and Address 0x330).  \nCurrent Channel A and Current Channel B are independent and, therefore, a no -load condition on Current Channel A \naffects only the energy accumulation and CF output of Current Channel A, and vice versa.  \nThe apparent energy no -load feature is enabled by default and \ncan be disabled by setting Bit 2 in the DISNOLOAD register \n(Address 0x001) to 1.  \nADE7953  Data Sheet  \n \nRev. C | Page 42  of 72 Apparent Energ y No -Load Interrupt  \nTwo interrupts a re associated with the apparent energy no-load \nfeature:  one for Current Channel A (phase) and one for Current \nChannel B (neutral).  If enabled , these interrupts are  t rigg er ed when  \nthe apparent energy fall s below the progr amm ed threshold.   \nThe Current Channel A apparent energy no -load interrupt can be \nenabled by setting the VA_NOLOADA bit  (Bit 8) in the IRQENA  \nregister ( Address 0x22C and Address 0x32C ). When  this bit is set , \nan apparent energy no -load event on Current Chann el A causes \nthe IRQ pin ( Pin 2 2) to fall to 0  (see the Primary Interrupts \n(Vol t age Channel and Current Channel  A) section ). The Current Channel B apparent energy no-load interrupt  \ncan be enabled by setting the VA_NOLOADB  bit (Bit 8) in the \nIRQBEN B register (Address  0x22F and Address 0x32F).  When  \nthis bit is set, an apparent energy no -load event on C urrent \nChannel B triggers  the IRQ alternative output (s ee the Current \nChannel B Interrupts  section ). \nApparent Energy No -Load Status Bits  \nIn addition to the apparent energy no -load interrupt, the ADE7953  \nincludes two unlatched status bits that continually monitor th e \nno-load status of Current Channel A and Current Channel B.  \nThe VANLOAD_A and VANLOAD_B bits are located in the \nACCMODE register ( Address 0x201 and Address 0x301).  These \nbits differ from the interrupt status bits in that they are unlatched  \nand can, theref ore, be used to drive an LED.  \n \nData Sheet ADE7953\n \nRev. C | Page 43 of 72 ZERO-CROSSING DETECTION \nThe ADE7953  includes a zero-crossing (ZX) detection feature \non all three input channels. Zero-crossing detection allows \nmeasurements to be synchronized to the frequency of the \nincoming waveforms. \nZero-crossing detection is performed at the output of LPF1 to \nensure that no harmonics or distortion affect the accuracy of the \nzero-crossing measurement. LPF1 is a single-pole filter with a \n−3 dB cutoff of 80 Hz and is clocked at 223 kHz. The phase shift of this filter therefore results in a time delay of approximately 2.2 ms (39.6°) at 50 Hz. To assure good resolution of the ZX detection, LPF1 cannot be disabled. Figure 61 shows how the zero-crossing signal is detected. \nGAIN[23:0]REFERENCE\nHPFEN BITDSP\nHPFPGA ADCIA, IB,\nOR V ZX\nDETECTION\nLPF1\nIA, IB, OR V39.6° OR 2.2ms @ 50Hz\n0VZX ZXZX\nZX\nLPF1 OUTPUT\n09320-127 \nFigure 61. Zero-Crossing Detection \nThe error in the ZX detection is 0.08° for 50 Hz systems and \n0.09° for 60 Hz systems. The zero-crossing information is available on both an output pin or via an interrupt. \nZERO-CROSSING OUTPUT PINS \nBy default, the voltage and current channel ZX information  \nis configured to be output on Pin 1 (ZX) and Pin 21 (ZX_I), \nrespectively. These dedicated output pins provide an unlatched \nZX indicator (see the Alternative Output Functions section). \nVoltage Channel Zero Crossing \nThe voltage channel zero-crossing indicator is output on Pin 1 (ZX) by default. Figure 62 shows the operation of the ZX output. \nZX2.2ms @ 50HzV\n09320-131 \nFigure 62. Voltage Channel ZX Output \n \n As shown in Figure 62, the ZX output pin goes high on the \npositive-going edge of the voltage channel zero crossing and  low on the negative-going edge of the zero crossing. A delay  of approximately 2.2 ms should be expected on this pin due to the time delay of LPF1. \nCurrent Channel Zero Crossing \nThe current channel zero-crossing indicator is output on Pin 21 \n(ZX_I) by default. The ZX_I pin operates in a similar way to the \nZX pin (see Figure 62). The ZX_I pin goes high on the positive-going edge of the current channel zero crossing and low on the \nnegative-going edge of the current channel zero crossing. By \ndefault, the ZX_I pin is triggered based on Current Channel A. The ZX_I pin can be configured to trigger based on Current Channel B by setting the ZX_I bit (Bit 11) of the CONFIG \nregister (Address 0x102) to 1. \nZERO-CROSSING INTERRUPTS \nThree interrupts are associated with zero-crossing detection, one \nfor each input channel: Current Channel A, Current Channel B, \nand the voltage channel. The zero-crossing condition occurs \nwhen either a positive or a negative zero-crossing transition takes place. If this transition occurs on the voltage channel, the ZXV bit (Bit 15) of the IRQSTATA register (Address 0x22D and Address 0x32D) is set to 1. If this transition occurs on Current \nChannel A, the ZXIA bit (Bit 12) of the IRQSTATA register is \nset to 1. If this transition occurs on Current Channel B, the ZXIB bit (Bit 12) of the IRQSTATB register (Address 0x230 and Address 0x330) is set to 1. Figure 63 shows the operation of the \nvoltage channel zero-crossing interrupt. \nZXV (BIT 15) OF\nIRQSTATA REGISTERV\n09320-032 \nFigure 63. Zero-Crossing Interrupt \nAs shown by the dotted line in Figure 63, the ADE7953  can be \nconfigured to trigger a zero-crossing event on only the positive-\ngoing or the negative-going zero crossing. The ZX_EDGE bits (Bits[13:12]) of the CONFIG register (Address 0x102) set the \nedge that triggers the zero-crossing event. These bits default to \n00 (the zero-crossing event is triggered on both the positive-going and negative-going edges) . Changing the ZX_EDGE bits \naffects the zero-crossing event on all three channels. Note that changing the ZX_EDGE bits affects only the ZX status bits and \ninterrupts; the function of the ZX pin (Pin 1) and the ZX_I pin \n(Pin 21) is not affected. \nADE7953 Data Sheet\n \nRev. C | Page 44 of 72 A zero-crossing event on any of the three input channels can be \nconfigured to trigger an external interrupt. All zero-crossing external interrupts are disabled by default. The voltage channel zero-crossing interrupt is enabled by setting the ZXV bit (Bit 15) \nin the IRQENA register (Address 0x22C and Address 0x32C). If \nthis bit is set, a voltage channel zero-crossing event causes the IRQ\n \npin to go low. The Current Channel A zero-crossing interrupt is \nenabled by setting the ZXIA bit (Bit 12) in the IRQENA register (Address 0x22C and Address 0x32C). If this bit is set, a Current \nChannel A zero-crossing event causes the IRQ\n pin to go low. The \nCurrent Channel B zero-crossing interrupt is enabled by setting \nthe ZXIB bit (Bit 12) in the IRQENB register (Address 0x22F and Address 0x32F). If this bit is set, a Current Channel B zero-\ncrossing event causes the IRQ\n pin to go low (see the ADE7953 \nInterrupts section). \nZERO-CROSSING TIMEOUT \nThe ADE7953  includes a zero-crossing timeout feature that is \ndesigned to detect when no zero crossings are obtained over a \nprogrammable time period. This feature is available on both \ncurrent channels and the voltage channel and can be used to detect when the input signal has dropped out. The duration of the zero-crossing timeout is programmed in the 16-bit ZXTOUT register (Address 0x100). The same timeout duration is used for \nall three channels. The value in the ZXTOUT register is decre-\nmented by 1 LSB every 14 kHz (CLKIN/256). If a zero crossing is obtained, the ZXTOUT register is reloaded. If the ZXTOUT register reaches 0, a zero-crossing timeout event is issued. The ZXTOUT register has a resolution of 0.07 ms (1/14 kHz); there-fore, the maximum programmable timeout period is 4.58 seconds. \nAs shown in Figure 64, a zero-crossing event causes one of the \nzero-crossing timeout bits—ZXTO, ZXTO_IA, or ZXTO_IB—\nto be set to 1. The ZXTO and ZXTO_IA bits are located in the IRQSTATA register (Address 0x22D and Address 0x32D) and are set when a zero-crossing timeout event occurs on the voltage channel or on Current Channel A, respectively. The ZXTO_IB \nbit is located in the IRQSTATB register (Address 0x230 and \nAddress 0x330) and is set when a zero-crossing timeout event \noccurs on Current Channel B.  ZXTOUT\nADDRESS 0x100\nINPUT\nSIGNAL\nZXTO_x\n09320-033 \nFigure 64. Zero-Crossing Timeout \nThree interrupts are associated with the zero-crossing timeout \nfeature. If enabled, a zero-crossing timeout event causes the \nexternal IRQ pin to go low. The interrupt associated with the \nvoltage channel zero-crossing timeout can be enabled by setting \nthe ZXTO bit (Bit 14) of the IRQENA register (Address 0x22C \nand Address 0x32C). The Current Channel A interrupt can be \nenabled by setting the ZXTO_IA bit (Bit 11) of the IRQENA register (Address 0x22C and Address 0x32C), and the Current Channel B interrupt can be enabled by setting the ZXTO_IB bit (Bit 11) of the IRQENB regist er (Address 0x22F and Address \n0x32F). All three interrupts are disabled by default (see the \nADE7953 Interrupts section). \nZERO-CROSSING THRESHOLD \nTo prevent spurious zero crossings when a very small input is \npresent, an internal threshold is included on all channels of the \nADE7953 . This fixed threshold is set to a range of 1250:1 of the \ninput full scale. If any input signal falls below this level, no zero-\ncrossing signals are produced by the ADE7953  because they can \nbe assumed to be noise. This threshold affects both the external zero-crossing pins, ZX (Pin 1) and ZX_I (Pin 21), as well as the zero-crossing interrupt function. At inputs of lower than 1250:1 of the full scale, the zero-crossing timeout signal continues to function and issues an event according to the time duration \nprogrammed in the ZXTOUT register (Address 0x100). \n \nData Sheet  ADE7953  \n \nRev. C | Page 45  of 72 VOLTAGE SAG  DETECTION \nThe ADE7953 includes a sag  detection feature that warns the \nuser when  the absolute value of the line voltage falls below the \nprogrammable threshold for a programmable number of line \ncycles.  This feature can provide an early warning signal that the \nline volt age is dropping out.  The voltage sag  feature  is controlled  \nby two registers:  SAGCYC (Address 0x 000) and SAGL VL \n(Address 0x200 and Address 0x300).  These registers control  \nthe sag period and the sag voltage threshold , respectively .  \nSag detection is disable d by default and can be enabled by \nwriting a non zero value to both the SAGCYC and SAGLVL \nregister s. If either register is set to 0, the sag feature is disabled.  \nIf a voltage sag condition occur s, the sag bit (B it 19) in the \nIRQ S TATA  register (Address 0x22D  and Address  0x32D) and \nin the RSTIRQSTAT A register (Address 0x22E  and Address  \n0x32E) is set to 1.  \nSETTING THE SAGCYC R EGISTER  \nThe 8 -bit, unsigned SAGCY C register contains the program -\nmable sag  period . The sag  period  is the number of half line \ncycles below  which the voltage channel must remain before  \na sag condition occurs. Each LSB of the SAGCYC register corresponds to one half line cycle period. The SAGCYC  register holds a maximum value of 255 . \nAt 50  Hz, the maximum sag cycle time is 2.55 second s. \nsec55.2 255 2501=×\uf8f7\uf8f8\uf8f6\uf8ec\uf8ed\uf8eb÷  \nAt 60  Hz, the maximum sag cycle time is 2.125 seconds.  \nsec125.2 255 2601=×\uf8f7\uf8f8\uf8f6\uf8ec\uf8ed\uf8eb÷  \n If the SAGCYC value is  modified after the feature is enabled, \nthe new SAGCYC period is effective immediately.  There fore, it \nis possible for a sag event to be  caused by a combination of sag  \ncycle periods.  To prevent any overlap , the SAGLVL register \nshould be res et to 0 to effectively disable the feature before  \nthe new cycle value is written to the SAGCYC register.  \nSETTING THE SAGLVL R EGISTER  \nThe 24-bit/32-bit SAGL VL register contains the amplitude that \nthe voltage channel must  fall below before a sag event occurs.  \nEach LSB of this register maps exactly to the voltage channel peak register ; therefore, the amplitude can be set based on the \npeak reading of the vol tage channel.  To set the SAGLVL register, \nnominal voltage should be applied and a reading taken from the RSTVPEAK register (Address 0x227  and Address  0x327)  to reset  \nthe peak level reading.  After a wait period of a few line cycle s, \nthe VPEAK register (Addr ess 0x226 and Address  0x326) should \nbe read to determine the voltage input.  This reading should \nthen be scaled to the amplitude required for sag detection.  \nFor example, if a sag threshold of 80% of the nominal voltage is \nrequired, the peak reading should be taken and a value of 80% of this reading should be written to the SAGLVL register.  This \nmethod ensure s that an accurate S AG LVL value is obtained for \nthe particular design.  \nVOLTAGE S AG INTERRUPT  \nThe ADE7953 includes an interrupt that is associated with   \nthe voltage sag detection feature.  If this interrupt is enabled ,  \na voltage sag event causes  the external IRQ pin to go low.  This \ninterrupt is disabled by default and can be enabled by setting \nthe sag bit (Bit 19) in the IRQENA  register (Address 0x22C   \nand Address  0x32C).  See the ADE7953 Interrupts  section.  \n \nADE7953  Data Sheet  \n \nRev. C | Page 46  of 72 PEAK DETECTION  \nThe ADE7953 includes a peak detection feature on both \nCurrent Channel A (phase) and Current Channel B (neutral) \nand on the voltage channel.  This feature continuously records \nthe maxi mum value o f the voltage and current waveforms.   \nPeak detect ion can be used with overvoltage and over current \ndetection to provide a complete swell detection function (see \nthe Overcurrent and Overvoltage Detection  section).  \nPeak de tection is an instantaneous measurement taken from  \nthe absolute value of the current and voltage ADC output \nwaveforms and stored in three 24-bit/32-bit registers.  The  \nthree registers that record the peak values on Current Channel \nA, Current Channel B, an d the voltage channel , respectively ,  \nare IAPEAK (Address 0x228 and Address 0x328), IBPEAK \n(Address 0x22A and Address 0x32A) , and  VPEAK  (Address \n0x226 and Address 0x326).  These three registers are updated every time th at th e absolute \nvalue of the waveform exceeds the current value stored in the \nIAPEAK, IBPEAK , and  VPEAK registers.  No time period is \nassociated with this measurement.   \nThree additional registers contain the same peak information , \nbut cause the corresponding peak measurement s to be reset \nafter they are read.  The three read -with -reset peak registers are \nRSTIAPEAK (Address 0x229 and Address 0x329), RSTIBPEAK (Address 0x22B and Address 0x32B) , and RSTVPEAK (Address \n0x227 and Address 0x327).  Reading these registers clears the \ncontents of the corresp onding xPEAK register.  \n \n \n \nData Sheet ADE7953\n \nRev. C | Page 47 of 72 INDICATION OF POWER DIRECTION \nThe ADE7953  includes sign indication on the active and reactive \nenergy measurements. Sign indication allows positive and nega-\ntive energy to be identified and billed separately if required. It also helps detect a miswiring condition. This feature is available \non both Current Channel A and Current Channel B. Power \ndirection information is available on both a dedicated output \npin ( REVP\n) and via a set of internal registers and interrupts (see \nthe Reverse Power section and the Sign Indication section). \nREVERSE POWER \nThe REVP  pin (Pin 20) on the ADE7953  provides a reverse \npower indicator. This pin can be configured to provide polarity \ninformation about the active or reactive power on Current \nChannel A or Current Channel B. The REVP  output is high by \ndefault and goes low if the angle between the voltage and current input is greater than 90°. REVP\n is unlatched and, therefore, \nreturns high when the reverse power condition is no longer true. Changes to the REVP\n output pin occur synchronously  \nto the falling edge of the CF1 pin by default (see Figure 65). \nThe measurement and channel indicated by the REVP  pin are \nselected by the configuration of the CF output. By default, the \nREVP  pin is configured to output synchronous to CF1 and \nrepresents the measurement selected on CF1 using the CF1SEL \nbits in the CFMODE register (Address 0x107). By default, this measurement is the active power on Current Channel A. If the \nCF1SEL bits are set to 0x0001, the REVP\n pin indicates the polarity \nof the reactive power on Current Channel A. The REVP  indicator \ncan be configured to output based on CF2 by setting the REVP_CF \nbit in the CONFIG register (Address 0x102). In this configura-tion, the CF2SEL bits in the CFMODE register determine the \nmeasurement represented on the REVP\n output. If the selected \nCF pin is configured to output another measurement, such as apparent power or IRMS, the REVP\n output is disabled. \nTo improve the visibility of a reverse polarity condition if an LED light is used, a 1 Hz pulse mode is available on the REVP\n \npin. In this mode, the REVP  output pin is low by default and \noutputs a 1 Hz pulse if the reverse polarity condition is true.  This pulse has a 50% duty cycle. Similar to normal mode, this mode is also unlatched, and the REVP\n output returns high when \nthe reverse polarity is no longer true. To enable the REVP  pulse \nmode, the REVP_PULSE bit in the CONFIG register (Address \n0x102) should be set to 1. \nThe REVP  output pin is disabled in the corresponding no-load \ncondition. For example, if the reverse polarity information for \nCurrent Channel A active power is present on the REVP  pin and \nthe active energy on Current Channel A is in the no-load condi-tion, the REVP\n output is disabled and held in its current state. \nSIGN INDICATION \nThe ADE7953  includes four sign indication bits that indicate the \npolarity of the active power on Current Channel A (APSIGN_A), \nthe active power on Current Channel B (APSIGN_B), the \nreactive power on Current Channel A (V ARSIGN_A), and the reactive power on Current Channel B (V ARSIGN_B). These bits are located in the ACCMODE register (Address 0x201 and Address 0x301). All four bits are unlatched and read only. A low \nreading (0) on any of these bits indicates that the corresponding \npower reading is positive; a high reading (1) indicates that the corresponding power reading is negative. These bits are enabled by default and are disabled in the corresponding no-load \ncondition. \nIn addition to the sign indication bits, the ADE7953  also includes \nfour sign indication interrupts. If enabled, these interrupts cause \nthe IRQ\n pin to go low when the polarity of the power changes. \nThe interrupts are triggered on both positive-to-negative and \nnegative-to-positive polarity changes. These interrupts are dis-\nabled by default and can be enabled by setting the APSIGN_A and V ARSIGN_A bits in the IRQENA register (Address 0x22C and Address 0x32C), and the APSIGN_B and V ARSIGN_B bits in the IRQENB register (Address 0x22F and Address 0x32F). See the ADE7953 Interrupts section. \nNote that in absolute or positive-only accumulation mode, these \nbits are fixed at 0. See the Active Energy Accumulation Modes \nsection and the Reactive Energy Accumulation Modes section.\n \nCF1ENTER\nREVERSE\nCONDITION\nREVPCURRENT AND\nVOLTAGE\nINPUTSEXIT\nREVERSE\nCONDITIONREVP\nHIGH\n09320-034REVP\nLOW\n \nFigure 65. REVP  Output \n \nADE7953  Data Sheet  \n \nRev. C | Page 48  of 72 OVERCURRENT AND OVERVOLTAGE DETECTION \nThe ADE7953 provides an overcurrent and overvoltage feature \nthat detects whether the absolute value of the current or voltage \nwaveform exceeds a programmable threshold.  This feature uses \nthe instantaneous voltage and current signals.  The t wo regist ers \nassociated with this feature, OVL VL (Address 0x224 and \nAddress 0x324) and OIL VL (Address 0x225 and Address 0x325) , \nare used to set the voltage and current channel thresholds , respec -\ntively . The OILVL threshold register determines the threshold \nfor both  the Current Channel A and Current Channel B over -\ncurrent features.  The same threshold must therefore be used for \nboth Current Channel A  and Current Channel B . The default \nvalue of the OVLVL and OILVL registers is 0xFFFFFF, which \neffectively disabl es the f eature.  Figure 66 shows the operation of \nthe overvoltage detection  feature . \nOV RESET\nLOW WHEN\nRSTIRQS TATA\nREGISTERIS READOVLVLV\nOV (BIT 16) OF\nIRQS TATA REGISTER\n09320-035 \nFigure 66. Overvoltage D etection  \nAs shown in Figure 66, if the ADE7953 detects an overvoltage \ncondition , the OV bit ( Bit 16) of the IRQSTATA register \n(Address 0x22D and Address 0x32D) is  set to 1.  This bit can be \ncleared by reading the RSTIRQSTATA  register  (Address 0x22E \nand Address 0x32E) . The overcurrent detection feature works in \na similar manner (see  Figure 67). \n09320-036OIA RESET LOW\nWHEN RSTIRQS TATA\nREGISTER IS READOILVLIA\nOIA (BIT 13) OF\nIRQS TATA\nREGISTER\nOILVLIB\nOIB (BIT 13) OF\nIRQS TATB\nREGISTEROIB RESET LOW\nWHEN RSTIRQS TATB\nREGISTER IS READ\n \nFigure 67. Overcurrent D etection  As shown in Figure 67, if an overcurrent condition is detected \non Current Channel A , the OIA bit ( Bit 13) of the IR QS TATA \nregister is set to 1.  This bit can be cleared by reading from the \nRSTIRQSTATA register.  If an overcurrent condition is detected \non Current Channel B , the O IB bit (Bit 13) of the IRQSTATB \nregister (Address 0x230 and Address 0x330) is  set to 1.  This bit \ncan be cleared by reading from the RSTIRQSTATB register \n(Address 0x231 and Address 0x331) . \nSETTING THE OVLVL AN D OILVL REGISTERS  \nThe 24-bit/32-bit unsigned OVL VL and OILVL registers map \ndirectly to the VPEAK (Address 0x226 and Address 0x326)  \nand IAPEAK (Address 0x228 and Address 0x328) registers , \nrespectively  (see the Peak Detection  section). Note that after \ngain calibration , Current C hannel A and Current Channel B are  \nmatched and , therefore , the IAPEAK and IBPEAK register s are \nmatched with common inputs.  The setting s of the OVLVL and \nO ILVL registers should be based on the VPEAK and IAPEAK \nreading s with full-scale  inputs.   \nTo set the OV LVL register , the maximum voltage input should \nbe applied  and a reading taken from the RSTVPEAK register \n(Address 0x227 and Address 0x327).  This reset s the voltage peak  \nreading.  After a wait period of a few line cycles , the VPEAK \nregister (Address 0x226 an d Address 0x326) should be read to \ndetermine the voltage peak.  This reading should then be scaled \nto the amplitude required for overvoltage detection.  For example , \nif an overvoltage threshold of 120% of the maximum voltage is required , the peak reading sho uld be multiplied by 1.2 and the \nresulting value written to the OVLVL register.  This method ensure s \nthat an accurate threshold is set for each individual design.  \nOVERVOLTAGE AND OVER CURRENT INTERRUPT S \nThree interrupts are associated with the overvoltage an d \novercurrent feature s. The first interrupt is associated with the \novervoltage feature;  it is enabled by setting the OV bit ( Bit 16)  \nof the IRQENA  register (Address 0x22C and Address 0x32C).  \nWhen  this bit is set , an overvoltage condition cause s the \nextern al IRQ pin to be pulled low.  \nA second interrupt is associated with the overcurrent detection feature on Current Channel A. This interrupt is enabled by \nsetting the OIA bit (B it 13) of the IRQENA  register.  When this \nbit is set , an overcurrent condition on Current Channel A \ncauses the external \nIRQ pin to be pulled low.   \nThe third interrupt is associated with the overcurrent detection feature on Current Channel B.  This interrupt is  enabled by setting  \nthe OIB bit (Bit 13) of the IRQENB register (Address 0x22F and \nAddress 0x32F).  When this bit is set , an overcurrent condition \non Current Channel B causes the \nIRQ alternativ e output to be \ntrigger ed, if the alternative output is enabled (s ee the Current \nChannel B Interrupts  section ). \n \nData Sheet  ADE7953  \n \nRev. C | Page 49  of 72 ALTERNATIVE OUTPUT F UNCTIONS  \nThe ADE7953 includes three output pins that are configured by \ndefault  to output power quality information.   \n• Pin 1  (ZX) provides a voltage channel zero-cross ing signal , \nas described in the Voltage Channel Zero Crossing  section.  \n• Pin 21 (ZX_I) provides a current channel zero-cross ing \nsignal , as descri bed in the Current Channel Zero Crossing  \nsection.  \n• Pin 2 0 (REVP ) provides polarity information , as described \nin the Reverse Power  section.  \nTo provide flexibility and to accommodate a vari ety of design \nrequirements, the ADE7953 can be configured to output a \nvariety of alternative power quality signals on any of these  \nthree outputs.  Alternative function s are configured using the \nALT_ O UTPUT register (Address 0x110).  \nTable 8 summarizes the functions that can be output on Pin 1, \nPin 21,  and Pin 2 0. Note th at th e default functions of ZX, ZX_I , \nand REVP  can be configured to output on any one of Pin 1 , \nPin 21, or Pin 20. \nAs described in Table 8, the de scription  of each function can be \nfound in the corresponding section of this data sheet. If an al ter-\nnative output function  is enabled  on Pin 1, Pin 21, or  Pin 20, the \nfunction can be configured and will be performed as described \nin the corresponding section. The alternative function  will, how-\never, appear as an unlatched output on Pin 1, Pin 21, or Pin 20 . \nTo enable an altern ative function , t he ZX _ ALT,  ZX I_ ALT,  an d \nREVP_ALT bits in the ALT_OUTPUT register must  be set. The \ninterrupt enable associated with the alternative output does not \nneed  to be enabled  in order for it to be present on Pin 1, Pin 21, \nor Pin 2 0. Enabling an al ternative output does not affect the \nprimary function  of the feature.  Table 8. Alternative Outputs  \nFunction  See This Section  \nZero -crossing detection \n(voltage channel)  Voltage Channel Zero Crossing  \nZero -crossing detection \n(current channel s) Current Channel Zero Crossing  \nReverse power indication  Reverse Power  \nVoltage sag detection  Voltage Sag Detection  \nActive energy  no-load \ndetection  (Current C hannel A ) Active Energy No -Load \nDetection  \nActive energy no-load \ndetection  (Current Channel B) Active Energy No -Load \nDetection  \nReactive energy no-load \ndetection  (Current Channel A) Reactive Energy No -Load \nDetection  \nReactive energy no-load \ndetection  (Current Channel B) Reactive Energy No -Load \nDetection  \nWaveform sampling, data ready  Instantaneous Powers and \nWaveform Sampling  \nInterrupt output (Current \nChannel B)  Current Channel B Interrupts  \n \nADE7953  Data Sheet  \n \nRev. C | Page 50  of 72 ADE7953 INTERRUPTS \nThe ADE7953 interrupts are separated into two groups. The \nfirst group of interrupts is associated with the voltage channel \nand Current Channel A. The second group of interrupts is \nassociated with Current Channel B. See Table 22 and Table 24 \nfor a list of the interrupts.  \nAll interrupts are disabled by default with the exception of the RESET interrupt that is located within the group of primary interrupts. This interrupt is enabled by default and signals the end of  a software or hardware reset. On power- up, this interrupt \nis triggered to signal that the ADE7953 is ready to receive \ncommunication from the microc ontroller. This interrupt should \nbe serviced as described in the Primary Interrupts (Volt age \nChannel and Current Channel  A) section prior to configuring \nthe ADE7953 .  \nPRIMARY INTERRUPTS ( VOLT AGE CHANNEL AND \nCURRENT CHANNEL  A) \nThe primary interrupts are events that occur on the voltage channel and Current Channel A. These interrupts are handled by a group of three registers: t he enable register, IRQENA \n(Address 0x22C and Address 0x32C), the status register, IRQSTATA (Address 0x22D and Address 0x32D), and the  \nreset status register, RSTIRQSTATA (Address 0x22E and Address 0x32E). The bits in these registers are described in Table 22 and Table 23. \nWhen an interrupt event occurs, the corresponding bit in the \nIRQSTATA register is set to 1. If the enable bit for this interrupt, \nlocated in the IRQENA register, is set to 1, the exter nal \nIRQ pin \nis pulled to Logic 0. The status bits located in the IRQSTATA register are set when an interrupt event occurs, regardless of whether the external interrupt is enabled.  \nAll interrupts are latched and require servicing to clear.  To \nservice the interrupt and return the \nIRQ pin to Logic 1, the \nstatus bits must be cleared using the RSTIRQSTATA register (Address 0x22E and Address 0x32E). The RSTIRQSTATA register contains the same interrupt status bits as the IRQSTAT A register, but when the RSTIRQSTATA register is accessed, a read -\nwith -reset command is executed, clearing the status bits. After \ncompletion of a read from this register, all status bits are cleared to 0 and the \nIRQ pin returns to Logic 1 . \nCURRENT CHANNEL B INTERRUPTS  \nThe Current Channel B interrupts are events that occur on Current Channel B. Like the primary group of interrupts, Current Channel B interrupts are handled by a group of three registers: the enable register, IRQENB (Address 0 x22F and \nAddress 0x32F), the status register, IRQSTATB (Address 0x230 \nand Address 0x330), and the reset status register, RSTIRQSTATB  \n(Address 0x231 and Address 0x331). The bits in these registers are described in Table 24 and Table 25. \nWhen an interrupt event occurs, the corresponding bit in  \nthe IRQSTATB register is set to 1. The Current Channel B \ninterrupts do not have a dedicated output pin. This function  \ncan be configured as an alternative output on  Pin 1 (ZX),  \nPin 21 (ZX_I), or Pin 20 (\nREVP ) (see the Alternative Output \nFunctions  section). If an output is enabled for interrupt events \non Current Channel B and the interrupt enable bit, located in \nthe IRQENB register , is set to 1, Pin 1, Pin 21, or Pin 20 is \npulled low if an interrupt event occurs on Current Channel B. \nThe status bits located in the IRQSTATB register are set when an interrupt event occurs, regardless of whether an external interrupt output is enabled.  \nAll interrupts are latched and require servicing to clear. To \nservice the interrupt, the status bits must be cleared using the \nRSTIRQST A TB register (Address 0x231 and Address 0x331). The RSTIRQSTATB register contains the same interrupt status bits as the IRQSTATB register, but when the RSTIRQSTA TB \nregister is accessed, a read -with -reset command is executed, \nclearing the status bits. After completion of a read from this \nregister, all status bits are cleared to 0 and the appropriate \noutput pin (if en abled) returns to Logic 1.  \n \n \nData Sheet  ADE7953  \n \nRev. C | Page 51  of 72 COMMUNICATING WITH T HE ADE7953  \nAll ADE7953 features can be accessed via a group of on -chip \nregisters.  For a detailed list of all the registers, see the  ADE7953 \nRegisters  section . Three different communication interfaces can  \nbe used to access the on -chip registers . \n• 4-pin SPI inter face \n• 2-pin bidirectional I2C interface  \n• 2-pin UART interface  \nAll thr ee communication options  use the same group of pins \nand, therefore , only one method of communication should be \nused in each design.  \nCOMMUNICATION AUTOD ETECTION  \nThe ADE7953 contains a detection system that automatically \ndetects which of the three communication interfaces  is being \nused.  This feature allows communication to be quickly estab -\nlished with minimal initialization.  Autodetection works by \nmonit oring the status of the four communication pins and \nautomatically selecting the communication interface  that \nmatches the configuration  (see Table 9). \n• The CS pin (Pin 28) is used to determine whether the \ncommunication method is SPI . The pin must be low \nduring the  SPI communication  for this  interfac e method . \nThe CS pin is active low and will automatically lock onto \nSPI communication as a result.  \n• The SCLK pin (Pin 25) is used to determine whether the communication  method  is I\n2C or UAR T. If this pin is held \nhigh,  the communication interface is set to  I2C; if it is  held \nlow, the communication interface is set to UART.   Therefore , although Pin 25 (SCLK) and Pin 28 (CS) are not \nrequired if communicating via I2C or UART, the se pins should \nbe configured in hardware as shown in Table 9 to ensure the  \nfunctionality  of the auto detection system.  \nLOCKING THE COMMUNICATION INTERFACE  \nAfter  the selected communication interface is  established, the \ninterface should be locked to  prevent the communication \nmethod  from inadvertently changing. The ADE7953  can be \nconfigured to lock automatically after the first successful \ncommun ication.  \nThe automatic lock feature is disabled by default and is enabled \nby clearing the COMM_LOCK  bit (Bit 15)  in the CONFIG \nregister (Address 0x102). To successfully establish and lock the communication  interface , a write shoul d be issued shortly after \npower -up to the CONFIG register, clearing the COMM_LOCK \nbit and thus locking the communication interface. When  the \ncommunication interface is  locked to a specific method (that is, \nSPI, I\n2C, or UART),  the communication method cannot be \nchanged without reset ting the ADE7953.  \nNote that if using the SPI communication  interface  to lock   \nthe communication mode, the CS pin must be  low for a \nminimum of 1.2  µs after the last SCLK. This delay is required \nonly when writing to the COMM_LOCK bit (see the SPI \nInterface Timing  section).   \n \nTable 9. Communication Autod etection  \nCommunication  Interface Pin 28  (CS) Pin 2 5 (SCLK ) Pin 27  (MOSI/SCL/Rx ) Pin 26  (MISO/SDA/Tx ) \nSPI 0 Don’t care  MOSI  MISO  \nI2C 1 1 SCL SDA  \nUART  1 0 Rx Tx \n \n \nADE7953  Data Sheet  \n \nRev. C | Page 52  of 72 SPI INTERFACE  \nThe serial peripheral interface (SPI) uses all four communica -\ntion pins : CS, SCLK, MOSI , and MISO.  The SPI communication  \nopera tes in slave mode and , therefore , a clock must be provided \non the SCLK pin (MOSI is an input , and MISO is an output).  \nThis clock synchronizes all communications and can operate up \nto a maximum speed of 5  MHz.  See the SPI Interface Timing  \nsection for more information about  the communication timing \nrequirements.  \nThe MOSI pin is an input to the ADE7953;  data is shifted in on \nthe falling edge of SCLK to be sampled by the ADE7953 on the \nrising edge. The MISO pin is an output from  the ADE7953;  data \nis shifted out on the falling edge  of SCLK  and should be sampled  \nby the external microcontroller on the rising edge.  \nThe SPI communication packet consists of two  initial byte s  \nthat contain  the address of the register that is to be read from  \nor written to.  This address should be transmitted MSB first.  The \nthird byte of the communication d etermin es whether a read or \na write is being issue d. The most significant bit of this byte should be set to 1 for a read \noperation and to 0 for a write  operation . When  the third byte \ntransmission is complete, the register data is either sent from the  \nADE7953 on the MISO pin  (in the case of a read) or is written \nto the ADE7953 MOSI pin by the external microcontroller  (in \nthe case of a write).  All data is  sent or received MSB first.  The \nlength of the data transfer depend s on the width of the register \nbeing access ed. Registers can be 8, 16, 24 , or 32 bits long.   \nFigure 68 and Figure 69 show the data transfer sequence for  \nan SPI read and an SPI write , respectively . As shown in  these \nfigures , the CS (chip select) input must be driven low to initialize  \nthe communication and driven high at the end of the communi -\ncation. Bringing the CS inpu t high before the completion of a \ndata transfer ends  the communication. In this way, t he CS input  \nperforms a reset function on the SPI communication. The CS input allows communication  with multiple devices on the same \nmicrocontroller SPI port.  \n \n1 01514SCLK\nMOSI\nMISO10\n3130 1000 0 000\nREGISTER VALUEREGISTER ADDRESSCS\n09320-062 \nFigure 68. SPI Read  \n \nSCLK\nMOSI3130 10\nREGISTER VALUECS\n09320-0630 01514 10\n00 0 000REGISTER ADDRESS\n \nFigure 69. SPI Write  \n \nData Sheet  ADE7953  \n \nRev. C | Page 53  of 72 I2C INTERFACE  \nThe ADE7953 support s a fully licensed I2C inte rface.  The I2C \ninterface operates as a slave and uses two shared pins:  SDA and \nSCL.  The SDA pin is a bi directional input/output  pin, and the \nSCL pin is the serial clock.  Both pins are shared with the SPI \nand UART interface s. The I2C interface operates at a  maximum \nserial clock frequency of 400  kHz.  \nThe t wo pins used for data transfer —SDA and SCL —are \nconfigured in a wire -AND format that allows arbitration in  \na multimaster system . Note that the ADE7 953 requires a \nminimum delay of 100  ns between the SCL and SDA edges,  \nsee tHD;DAT  in Table 3. \nCommunication via the I2C interface is initiated by the master \ndevice generating a start co ndition.  This consists of the master \ntransmitting a single byte containing the address of the slave \ndevice and the nature of the operation  (read or write) . \nThe address of the ADE7953  is 0111000X.  Bit 7 in the address  \nbyte indicates whether a read or a write is required: 0 indicates  \na write , and  1 indicates a read. The communication continues as \ndescribed in the following sections until the master issues a stop \ncondition and the bus returns to the idle condition.  I2C Write Operations  \nA write operation on the ADE7953 is initiated when  the master \nissues a start condition , which  consists of the  slave address and \nthe read/write bit.  The start condition  is followed by the 1 6-bit \naddress of the target register.  After each byte is received , the \nADE7953 issue s an acknowledge  (ACK)  to the master .   \nAs soon as the 1 6-bit address communication is complete , the \nmaster send s the register data , MSB first.  The length of this data \ncan be 8, 16, 24,  or 32 bits long.  After each by te of register data \nis rec eived, the ADE7953  slave issue s an acknowledge  (ACK) . \nWhen  transmission of the final byte is complete , the master \nissue s a stop condition , and the b us return s to the  idle condition . \nThe I2C write operation is shown in Figure 70. \n \n \n09320-059ACK GENERATED BY\nADE7953START\nSTOP\nS\nA\nC\nKA\nC\nKA\nC\nKA\nCKA\nC\nKA\nCKA\nC\nKP 015\nSLAVEADDRESSMSB OF REGISTER ADDRESS LSB OF REGISTER ADDRESS\nBYTE 3 (MSB) OF REGISTER BYTE 2 OF REGISTER BYTE 1 OF REGISTER BYTE 0 (LSB) OF REGISTER8 7 0 23 16 15 8 7 0 0 7\n1110000READ/WRITE\n \nFigure 70. I2C Write  \n \nADE7953 Data Sheet\n \nRev. C | Page 54 of 72 I2C Read Operations \nThe I2C read operation is performed in two stages. The first \nstage sets the pointer to the address of the register to be \naccessed. The second stage reads the contents of the register. \nAs shown in Figure 71, the first stage is initiated when the \nmaster issues a start condition, which consists of the slave address and the read/write bit. Because this first step sets up  the pointer to the address, the LSB of the start byte should be  set to 0 (write). The start condition is followed by the 16-bit address of the target register. After each byte is received, the ADE7953  issues an acknowledge (ACK) to the master.  The second stage of the read operation begins with the master \ngenerating a new start condition. This start condition consists of the same slave address but with the LSB set to 1 to signify that a read is being issued. After this byte is received, the ADE7953  \nissues an acknowledge (ACK). The ADE7953  then sends the \nregister contents to the master, which acknowledges the reception \nof each byte. All bytes are sent MSB first. The register contents can be 8, 16, 24, or 32 bits long. After the final byte of register data is received, the master issues a stop condition in place of \nthe acknowledge to indicate the completion of the communication. \nThe I\n2C read operation is shown in Figure 71. \n \nACK GENERATED BY\nADE7953\nACK GENERATED BY\nMASTERSTAR T\nS\nA\nC\nKA\nCKA\nCK015\nSLAVE ADDRESSMSB OF REGISTERADDRESS LSB OF REGISTER ADDRESS87 0\n1110000 START\nSTOP\nS\nA\nC\nKA\nC\nKA\nCKA\nCK\nP 0\nSLAVE ADDRESSBYTE 3  (MSB)\nOF REGISTER BYTE 2 OF REGISTER BYTE 1 OF REGISTERBYTE 0 (LSB)\nOF REGISTER23 16 15 8 7 0 0 7\n1110001\nACK GENERATED BY\nADE7953\n09320-060READ/WRITEREAD/WRITE\n \nFigure 71. I2C Read \n \nData Sheet  ADE7953  \n \nRev. C | Page 55  of 72 UART INTERFACE  \nThe ADE7953 provides a simple universal asynchronous \nreceiver /transmit t er (UART) int erf ace that  allow s all the functions  \nof the ADE7953  to be accessed using o nly two single -direction \npins.  The UART interface allows an isolated communication \ninterface to  be achieved using only two low cost opto- isolators.  \nThe UART interface operates at a fixed baud rate of 4800  bps \nand is therefore suitable for low speed designs . \nThe UART interface on the ADE7953 is accessed via the Tx pin \n(Pin 2 6), which transmits data from the ADE7953 , and the Rx \npin ( Pin 2 7), which receives data from the microcontroller.  A \nsimple master/slave t opology is implemented on the UART inter -\nface with  the ADE7953 acting as the slave.  All communication  \nis initiated by the sending of a valid frame by the master ( the \nmicrocontroller ) to the slave ( the ADE7953).  The format of the \nframe is shown in  Figure 72. \nAs shown in Figure 72, each frame consists of 10 bits. E ach bit is \nsent at a bit rate of 4800 bps, result ing in a frame time of 2.08  ms \n((1/4800)  × 10). A wait period of 6  ms should be added from \nwhen the UART communication mode is established using the \nCS and SCLK pins to when the first frame is sent. A minimum \nwait of 0.2  ms should be included between frames. All frame \ndata is sent LSB first.  \nCommunication via the UART interface is initiated by the \nmaster sending a packet of three  frames (see Table 10). \n \n \n Table 10. Frames  in the  UART Packet  \nFrame  Function \nF1 Read/write  \nF2 Address MSB  \nF3 Address LSB  \nF1 determines whether the communication is a read or a write \noperation, and the following two frames (F2 and F3) select the \nregister that i s to be accessed. Each frame consists of eight data \nbits, as shown in Figure 72. A read is issued by writing the value \n0x35 to F1, and a write is issued by writing the value 0xCA to \nF1. Any other value  is interpreted as invalid and resul ts in an \nunsuccessful communicatio n with the ADE7953. The address \nbytes are sent MSB  first; therefore, F2 contains the most \nsignificant portion of the address , and F3 contains the le ast \nsignificant portion of the address. The bits within each address \nframe are sent LSB first.  \nThe ADE7953 UART interface uses two timeouts, t 1 and t2, to \nsynchronize the communication and to prevent the communi -\ncation from halting. The first timeout, t 1, is the frame -to-frame \ndelay and is fixed at 4  ms max. The second timeout, t2, is the \npacket -to-packet delay and is fixed at 6  ms min. These two \ntimeouts act as a reset for the UART function. More informa -\ntion about  how the timeouts are implemented is provided in  \nthe UART Read  section  and the UART Write  section . \nVerification of a successful UART c ommunication can be \nachieved by implementing a write/read/verify sequence in the microcontroller. Successful communications are also recorded in the LAST_ADD, LAST_RWDATA, and LAST_OP registers , \nas described in the Communication Ve rification  section.  \n \nSCLK\nCS\nSTART\nSTARTSTOPD0\nD0D1\nD2\nD3\nFRAME\nD4\nD5\nD6\nD7Rxt1t2\nt2 =PACKET DEL AY: 6ms (MIN)t1 = FRAME DEL AY: 0.2ms (MIN), 4ms (MAX)\n09320-141 \nFigure 72. UART Frame  \n \nADE7953 Data Sheet\n \nRev. C | Page 56 of 72 UART Read \nA read from the ADE7953  via the UART interface is initiated  \nby the master sending a packet of three frames. If the first frame \nhas the value 0x35, a read is being issued. The second and third \nframes contain the address of the register being accessed. When the ADE7953  receives a legal packet, it decodes the command \n(see Figure 73). \nThe frame time is 2.08 ms. A frame-to-frame delay (t\n1) of 4 ms \nmax provides a 50% buffer on the frame time without needlessly \nslowing the communication. When the read packet is decoded, \nthe ADE7953  sends the data from the selected register out on the \nTx pin (see F4 and F5 in Figure 73). This occurs approximately \n0.1 ms after the complete frame is received. This data can be 1, 2, 3, or 4 bytes long, depending on the size of the register that is being accessed. The register data is sent LSB first. After the last \nframe of register data is sent from the ADE7953 , a packet-to-\npacket delay (t\n2) of 6 ms min is required before any incoming \ndata on the Rx pin is accepted. This packet-to-packet timeout \nensures that no overlap is possible. UART Write \nA write to the ADE7953  via the UART interface is initiated by \nthe master sending a packet of three frames. If the first frame \nhas the value 0xCA, a write is being issued. The second and \nthird frames contain the address of the register being accessed. The next two frames contain the data to be written. When the ADE7953  receives a legal packet, it decodes the command as \nfollows: \n\uf0b7 If the number of frames obtained after the initial packet is the same as the size of the register specified by F2 and F3, the \npacket is legal and the corresponding register is written. \n\uf0b7 If the number of frames does not equal the size of the \nspecified register, the command is illegal and no further action is taken. \nAfter the last frame of data is received on the Rx pin, a wait \nperiod of t\n2 is required before any incoming data on the Rx pin \nis treated as a new packet. This operation is shown in Figure 74. \n \nF1\nREAD/\nWRITERx\nTxF2\nADDRESS\nMSBF3\nADDRESS\nLSBt1\nF1\nREAD/\nWRITEF2\nADDRESS\nMSBt1 t1\nF4\nDATA\nLSBF5\nDATA\nMSBt1\nt2t1\n09320-142 \nFigure 73. UART Read \n \nF1\nREAD/\nWRITERx\nTxF2\nADDRESS\nMSBF3\nADDRESS\nLSBt1\nF1\nREAD/\nWRITEF2\nADDRESS\nMSBt1 t1\nF4\nDATA\nLSBF5\nDATA\nMSBt1\nt2t1\n09320-143 \nFigure 74. UART Write \n \nData Sheet  ADE7953  \n \nRev. C | Page 57  of 72 COMMUNICATION VERIFI CATION AND SECURITY  \nThe ADE7953 includes three security mea sures to increase \ncommunication robustness and to help prevent inadvertent \nmodifications to its internal registers.  The write protection, \ncommunication verification , and checksum features can be  \nused together to help increase the robustness and noise \nimmu nity of the meter design.  \nWRITE PROTECTION  \nThe ADE7953 provides a simple method for protecting the \ninternal register s from unexpected write operatio ns. This feature  \nhelps to prevent noise or EMC conditions from changing the required meter configuration.  The write protection feature is \ndisabled by default to allow the meter to be configured and can be enabled by writing to the 8-bit WRITE _PROTECT  regis ter \n(Address 0x0 40). Only the three LSBs  of this register are used.  \nBit 0 controls the protection on the 8 -bit registers ; Bit 1 controls \nthe protection on the 1 6-bit registers; Bit 2  controls the protec tion \non the 24-bit/32-bit registers.  All bits are set to 0 by default to \ndisable the protection.  Setting any of these bits to 1 enables  \nwrite protection on the corresponding group of registers.  When  \nwrite protection is enabled , any attempted write operation using  \nthe SPI, I\n2C, or UART interface is ignored. The one exception to \nthis is the WRITE_PROTECT register that can  still be modified \nto disable the  write protection feature. Res etting the WRITE _ \nPROTECT  bits to 0 reinstate s full access to the register banks.  \nThe WRITE_PROTECT bits are included in the CRC check  \nand set of f an interrupt when CRC_ENABLE is set to 1 and the \nWRITE_PROTECT bit is changed.  COMMUNICATION VERIFICATION  \nThe ADE7953 includes a set of three registers that allow any \ncommunication via SPI, I2C, or UART to be verified.  The \nLAST_OP (Address 0x 0FD), LAST_ADD (Address 0x1FE) ,  \nand LAST_RWDATA regis ters record the type , address , and  \ndata of the last successful communication , respectively . The \nLAST_RWDATA register has four separate addresses,  depending  \non the length of the successful communication  (see Table 11). \nMultiple address locations are included to prevent unnecessarily long communications.  \nTable 11. Addresses of  the LAST_RWDATA Registers  \nRegister Address  Length of Read/Write  \nAddress 0x0FF 8 bits  \nAddress 0x1FF 16 bits  \nAddress 0x2FF 24 bits  \nAddress 0x3FF 32 bits  \n \nAfter each successful communication with the ADE7953, the \naddress of the last register that was accessed is stored in the  \n16-bit LAST_ADD register (Address 0x1FE).  This read-only \nregister stores the value until the next successful read or write  \nis complete.   \nThe LAST_OP register (Address 0x 0FD) stor es the type  of the \ncommunication , that is,  it indicates whether a read or a write \nwas performed.  If the last operation was a write , the LAST_OP \nregister store s the value 0xCA.  If the last operation was a read , \nthe LAST_OP register store s the value 0x35.   \nThe LAST_RWDATA register stores the data that was written to \nor read from the register.  Unsuccessful read and  write operation s \nare not reflected in these registers.  \n \nADE7953  Data Sheet  \n \nRev. C | Page 58  of 72 CHECK SUM REGISTER  \nThe ADE7953 includes a 3 2-bit checksum register , CRC \n(Address 0x 37F), which warns the user if any of the important \nconfiguration, contr ol, or calibration  registers are modified.  The \nchecksum register helps to ensure that the meter configuration \nis not modified from its desired state during normal operation.  \nTable 12 lists the registers included in the checksum.  An \nadditional eight  intern al reserved registers are also included  in \nthe checksum . The ADE7953 computes the cyclic redundancy \ncheck (CRC) based on the IEEE  802.3 standard. Th e contents  \nof the registers are introduced one by one into a linear feedback \nshift register (LFSR) based generator , starting with the le ast \nsignificant bit. The 32 -bit result is written to the CRC register.  \nFigure 75 shows how t he LFSR works. The registers shown in \nTable 12 and the eight 8 -bit reserved internal registers form the \nbits [a 1023, a 1022,…, a 0] used by LFSR. Bit a 0 is the least significant \nbit of the first register to enter LFSR; Bit a 1023 is the most signifi-\ncant bit of the last register to enter LFSR.  \n \nThe formulas that govern LFSR are as follows:  \nbi(0) = 1, i = 0, 1, 2, …, 31, the initial state of the bits that form \nthe CRC. Bit b 0 is the least significant bit, and Bit b 31 is the most \nsignificant. bi(0) = 1, i = 0, 1, 2, …, 31, the initial state of the bits \nthat form the CRC. Bit b 0 is the least significant bit, and Bit b 31 is \nthe most significant.  \ngi, i = 0, 1, 2, …, 31 are the coefficients of the generating \npolynomial defined by the IEEE802.3 standard as follows:  \nG(x) = x32 + x26 + x23 + x22 + x16 + x12 + x11 + x10 + x8 + x7 + x5 + \nx4 + x2 + x + 1. \ng0 = g1 = g2 = g4 = g5 = g7 = 1  \ng8 = g10 = g11 = g12 = g16 = g22 = g26 = g31 = 1  (50)  \nAll of the other g i coefficients are equal to 0.  \nFB(j) = a j – 1 XOR b31(j – 1)  (51)  \nb0(j) = FB (j) AND g 0  (52)  \nbi(j) = FB(j) AND g i XOR bi − 1(j – 1 ),  i = 1, 2, 3, ..., 31  (53)  \nEquation 51, Equation 52, and Equation 53 must be repeated for \nj = 1, 2, …, 1024. The value written into the Checksum  register \ncontains the Bit b i(1024) , i = 0, 1, …, 31.  1023 0\nLFSR\nGENER ATOR\n09320-075ARR AY OF 1024 BITS\n \nFigure 75. Checksu m Register Calculation  \nb0\nLFSRFBg0 g1 g2 g31\nb1g3\nb2 b31\n09320-076a1023,a1022,....,a2,a1,a0 \nFigure 76. LFSR Generator Used in C hecksum Register Calculation  \nThe CRC is disabled by default and can be enabled by setting the CRC_ENABLE bit (Bit 8) of the CONFIG register  \n(Address 0x102). When this bit  is set, the CRC is computed  at  \na rate of 6.99  kHz. Because the CRC is disabled by default, the \ndefault value is 0xFFFFFFFF.  Once enabled , with all registers at \ntheir default value , the CRC is 0x48739163.T he checksum can \nbe used to ensure that the registers  included in the checksum  \nare not inadvertently changed by periodically reading the value \nin the CRC register (Address 0x37F) after the meter is \nconfigured.   \nIf two consecutive readings differ, it can be assumed that one  \nof the registers has changed val ue and , therefore , the configuration  \nof the ADE7953  has changed . Note that since  the CRC updates at \na rate of 6.99  kHz, consecutive reads should be at least 143  µs \n(1/6.99 kHz) apart . The recommended  response is to issue a \nhardware/software reset, which resets all ADE7953 registers, \nincluding re served registers , to their default values. The \nADE7953 should then be reconfigured with the design -specific \nsettings.  \nAn interrupt associated with t he checksum feature can provide \nan external warning signal on the \nIRQ pin if the CRC register \nvalue changes after initial configuration. This interrupt is dis -\nabled by default and can be enabled by setting the CRC bit (Bit 21)  \nin the IRQE NA register (Address 0x22C and Address 0x32C). \nWhen  this interrupt is enabled, an external interrupt is issued  \nif the CRC value changes from the value that it held at the time that it was enabled . \nData Sheet  ADE7953  \n \nRev. C | Page 59  of 72 Table 12. Registers Included in the Checksum  \nConfiguration and Control Registers  Calibration Registers  \nRegister Name Address  Register Name Address  \nLCYCMODE  0x004  AIGAIN  0x280 and 0x380  \nPGA_V  0x007  AVGAIN  0x281 and 0x381  \nPGA_IA  0x008  AWGAIN  0x282 and 0x382  \nPGA_IB  0x009  AV ARGAIN  0x283  and 0x383  \nWRITE_PROTECT 0x040  AV AGAIN  0x284 and 0x384  \nCONFIG  0x102  Reserved  0x285 and 0x385  \nCF1DEN  0x103  AIRMSOS 0x286 and 0x386  \nCF2DEN  0x104  Reserved  0x287 and 0x387  \nCFMODE  0x107  VRMSOS  0x288 and 0x388  \nPHCALA  0x108  AWATTOS  0x289 and 0x389  \nPHCALB  0x109  AVA R O S  0x28A and 0x38A  \nALT_OUTPUT  0x110  AVA O S  0x28B and 0x38B  \nACCMODE  0x201 and 0x301  BIGAIN  0x28C and 0x38C  \nIRQENA  0x22C and 0x32C  BVGAIN  0x28D and 0x38D  \nIRQENB  0x22F and 0x32F  BWGAIN  0x28E and 0x38E  \n  BV ARGAIN  0x28F and 0x38F  \n  BV AGAIN  0x290 a nd 0x390  \n  Reserved  0x291 and 0x391  \n  BIRMSOS  0x292 and 0x392  \n  Reserved  0x293 and 0x393  \n  Reserved  0x294 and 0x394  \n  BWATTOS  0x295 and 0x395  \n  B VA R O S  0x296 and 0x396  \n  B VA O S  0x297 and 0x397  \n \n \n \n  \n \n \n \n  \n \n \n  \n \n  \n \nADE7953  Data Sheet  \n \nRev. C | Page 60  of 72 ADE7953 REGISTERS  \nThe ADE7953 contains registers that are 8, 16, 24 , and  32 bits long.  All signed registers are in the twos complement  format  with the \nexception of the PHCALA and PHCALB registers, which are in sign magnitude format . The 2 4-bit and 3 2-bit registers contain the same \ndata but can be accessed in two different register lengths.  The 2 4-bit register option increases communication speed ; the 32 -bit register \noption  provides simpli city when coding with the long format.  When accessing the 32 -bit registers, only the lower 24 bits contain valid \ndata ( the upper 8 bits are sign extended ). A write to a 24 -bit register changes  the value in the corresponding 3 2-bit register , and vice versa.  \nTherefore, each 24-bit/32-bit register can be thought of as one memory location that can be accessed via two different paths.  \nTable 13. 8-Bit Registers  \nAddress  Register Name R/W  Default  Ty p e  Register Description  \n0x000  SAGCYC  R/W  0x00 Unsigned  Sag line cycle s \n0x001  DISNOLOAD  R/W  0x00  Unsigned  No-load detection disable  (see Tab l e  16) \n0x004  LCYCMODE  R/W  0x40  Unsigned  Line cycle a ccumulation mode configuration  (see Tab l e  17) \n0x007  PGA_V  R/W  0x00  Unsigned  Voltage channel gain configuration  (Bits[2:0]) \n0x008  PGA_IA  R/W  0x00  Unsigned  Current Channel A gain configuration  (Bits[2:0]) \n0x009  PGA_IB  R/W  0x00  Unsigned  Current Channel B gain configuration  (Bits[2:0]) \n0x040  WRITE_PROTECT R/W  0x00  Unsigned  Write protection bits (Bits[2:0])  \n0x0FD  LAST_OP  R 0x00  Unsigned  Contains the type  (read or write) of the last successful communication  (0x35 = \nread; 0xCA = writ e) \n0x0FF  L A ST_ R WDATA  R 0x00  Unsigned  Contains the data from the last successful 8 -bit register communication  \n0x702  Version  R N/A Unsigned  Contains the silicon version number  \n0x800  EX_REF  R/W  0x00  Unsigned  Reference input configuration: set to 0 for inte rnal;  set to 1 for external  \nTable 14. 16-Bit Registers  \nAddress  Register Name R/W  Default  Ty p e  Register Description  \n0x100  ZXTOUT  R/W  0xFFFF Unsigned  Zero -crossing timeout  \n0x101  LINECYC  R/W  0x00 00 Unsigned  Number of half line cycle s for l ine cycle energy accumulation mode  \n0x102  CONFIG  R/W  0x8004  Unsigned  Configuration register  (see Tab l e  18) \n0x103  CF1DEN  R/W  0x003F Unsigned  CF1 freq uency divider denominator . When modifying this register,  two \nsequential write operations must be performed to ensure that the write is \nsuccessful.  \n0x104  CF2DEN  R/W  0x003F Unsigned  CF2 frequency divider denominator . When modifying this register,  two \nsequen tial write operations must be performed to ensure that the write is \nsuccessful.  \n0x107  CFMODE  R/W  0x0300  Unsigned  CF output s election ( see Tab l e  19) \n0x108  PHCALA  R/W  0x0000  Signed  Phase calib ration register (Current Channel A). This register is in sign \nmagnitude format.  \n0x109  PHCALB  R/W  0x0000  Signed  Phase calibration register (Current Channel B). This register is in sign \nmagnitude format.  \n0x10A  P FA R 0x0000  Signed  Power factor (Current Chan nel A)  \n0x10B  PFB R 0x0000  Signed  Power factor (Current Channel B)  \n0x10C  ANGLE_A  R 0x0000  Signed  Angle between the voltage input and the Current Channel A input  \n0x10D  ANGLE_B  R 0x0000  Signed  Angle between the voltage input and the Current Channel B input  \n0x10E  Period  R 0x0000  Unsigned  Period register  \n0x110  ALT_OUTPUT  R/W  0x0000  Unsigned  Alternative output functions  (see Tab l e  20) \n0x1FE  LAST_ADD  R 0x0000  Unsigned  Contains the address of the last successful communication  \n0x1FF  L A ST_ R WDATA  R 0x0000  Unsigned  Contains the data from the last successful 16 -bit register communication  \n0x120  Reserved  R/W  0x0000  Unsigned  This register shoul d be set to 30h to meet the performance specified in  \nTab l e  1. T o modify this register , it must b e unlocked by setting Register \nAddress 0xFE to 0xAD immediately prior.   \n \nData Sheet  ADE7953  \n \nRev. C | Page 61  of 72 Table 15. 24-Bit/32- Bit Registers  \nAddress  \nRegister Name R/W  Default  Ty p e  Register Description  24-Bit 32-Bit \n0x200  0x300  SA GLVL  R/W  0x00 0000  Unsigned  Sag voltage level  \n0x201  0x301  ACCMODE  R/W  0x000000  Unsigned  Accumulation mode  (see Tab l e  21) \n0x203  0x303  AP_NOLOAD  R/W  0x00E419  Unsigned  Active power no -load level \n0x204  0x304  V AR_NOLOAD  R/W  0x00E419  Unsigned  Reactive power no -load level \n0x205  0x305  V A_NOLOAD  R/W  0x000000  Unsigned  Apparent power no -load level \n0x210  0x310 AVA  R 0x000000  Signed  Instantaneous apparent power (Current Channel A)  \n0x211  0x311  B VA  R 0x000000  Signed  Instantaneous apparent power (Current Channel B)  \n0x212  0x312  AWATT  R 0x000000  Signed  Instantaneous active power (Current Channel A)  \n0x213  0x313  BWATT  R 0x000000  Signed  Instantaneous active power (Current Channel B)  \n0x214  0x314  AVA R  R 0x000000  Signed  Instantaneous reactive power (Current Channel A)  \n0x215  0x315  B VA R  R 0x000000  Signed  Instantaneous reactive power (Current Channel B)  \n0x216  0x316  IA R 0x000000  Signed  Instantaneous current (Current Channel A)  \n0x217  0x317  IB R 0x000000  Signed  Instantaneous current (Current Channel B)  \n0x218  0x318  V R 0x000000  Signed  Instantaneous voltage (voltage channel)  \n0x21A  0x31A  IRMSA  R 0x000000  Unsigned  IRMS reg ister (Current Channel A)  \n0x21B  0x31B  IRMSB  R 0x000000  Unsigned  IRMS register (Current Channel B)  \n0x21C  0x31C  VRMS  R 0x000000  Unsigned  VRMS register  \n0x21E  0x31E  AENERGYA  R 0x000000  Signed  Active energy (Current Channel A)  \n0x21F  0x31F  AENERGYB  R 0x00000 0 Signed  Active energy (Current Channel B)  \n0x220  0x320  RENERGYA  R 0x000000  Signed  Reactive energy (Current Channel A)  \n0x221  0x321  RENERGYB  R 0x000000  Signed  Reactive energy (Current Channel B)  \n0x222  0x322  APENERGYA  R 0x000000  Signed  Apparent energy (Cur rent Channel A)  \n0x223  0x323  APENERGYB  R 0x000000  Signed  Apparent energy (Current Channel B)  \n0x224  0x324  OVLVL  R/W  0xFFFFFF  Unsigned  Overvoltage level  \n0x225  0x325  O I LVL  R/W  0xFFFFFF  Unsigned  Overcurrent level \n0x226  0x326  VPEAK  R 0x000000  Unsigned  Voltag e channel peak  \n0x227  0x327  RSTVPEAK  R 0x000000  Unsigned  Read voltage peak with reset  \n0x228  0x328  IAPEAK  R 0x000000  Unsigned  Current Channel A peak  \n0x229  0x329  RSTIAPEAK  R 0x000000  Unsigned  Read Current Channel A peak with reset  \n0x22A  0x32A  IBPEAK  R 0x000000  Unsigned  Current Channel B peak  \n0x22B  0x32B  RSTIBPEAK  R 0x000000  Unsigned  Read Current Channel B peak with reset  \n0x22C  0x32C  IRQENA  R/W  0x100000  Unsigned  Interrupt enable (Current Channel A, see Tab l e  22) \n0x22D  0x32D  I R Q STATA  R 0x000000  Unsigned  Interrupt status (Current Channel A , see Tab l e  23) \n0x22E  0x32E  R STI R Q STATA  R 0x000000  Unsigned  Reset interrupt status (Current Channel A)  \n0x22F  0x32F  IRQENB  R/W  0x000000  Unsigned  Interrupt enable (Current Channel B , see Tab l e  24) \n0x230  0x330  I R Q STATB  R 0x000000  Unsigned  Interrupt status (Current Channel B , see Tab l e  25) \n0x231  0x331  RSTIRQS TATB  R 0x000000  Unsigned  Reset interrupt status (Current Channel B)  \nN/A  0x37F  CRC  R 0xFFFFFFFF Unsigned  Checksum  \n0x280  0x380  AIGAIN  R/W  0x400000  Unsigned  Current channel gain (Current Channel A)  \n0x281  0x381  AVGAIN  R/W  0x400000  Unsigned  Voltage channel g ain \n0x282  0x382  AWGAIN  R/W  0x400000  Unsigned  Active power gain (Current Channel A)  \n0x283  0x383  AV ARGAIN  R/W  0x400000  Unsigned  Reactive power gain (Current Channel A)  \n0x284  0x384  AV AGAIN  R/W  0x400000  Unsigned  Apparent power gain (Current Channel A)  \n0x28 5 0x385  Reserved  R/W  0x000000  Signed  This register should not be modified.  \n0x286  0x386  AIRMSOS R/W  0x000000  Signed  IRMS offset (Current Channel A)  \n0x287  0x387  Reserved  R/W  0x000000  Signed  This register should not be modified.  \n0x288  0x388  VRMSOS  R/W  0x00 0000  Signed  VRMS offset  \n0x289  0x389  AWATTOS  R/W  0x000000  Signed  Active power offset correction (Current Channel A)  \n0x28A  0x38A  AVA R O S  R/W  0x000000  Signed  Reactive power offset correction (Current Channel A)  \n0x28B  0x38B  AVA O S  R/W  0x000000  Signed  Apparent  power offset correction (Current Channel A)  \nADE7953  Data Sheet  \n \nRev. C | Page 62  of 72 Address  \nRegister Name R/W  Default  Ty p e  Register Description  24-Bit 32-Bit \n0x28C  0x38C  BIGAIN  R/W  0x400000  Unsigned  Current channel gain (Current Channel B)  \n0x28D  0x38D  BVGAIN  R/W  0x400000  Unsigned  This register should not be modified.  \n0x28E  0x38E  BWGAIN  R/W  0x400000  Unsigned  Active  power gain (Current Channel B)  \n0x28F  0x38F  BV ARGAIN  R/W  0x400000  Unsigned  Reactive power gain (Current Channel B)  \n0x290  0x390  BV AGAIN  R/W  0x400000  Unsigned  Apparent power gain (Current Channel B)  \n0x291  0x391  Reserved  R/W  0x000000  Signed  This register should not be modified.  \n0x292  0x392  BIRMSOS  R/W  0x000000  Signed  IRMS offset (Current Channel B)  \n0x293  0x393  Reserved  R/W  0x000000  Unsigned  This register should not be modified.  \n0x294  0x394  Reserved  R/W  0x000000  Unsigned  This register should not be modifi ed. \n0x295  0x395  BWATTOS  R/W  0x000000  Signed  Active power offset correction (Current Channel B)  \n0x296  0x396  B VA R O S  R/W  0x000000  Signed  Reactive power offset correction (Current Channel B)  \n0x297  0x397  B VA O S  R/W  0x000000  Signed  Apparent power offset correc tion (Current Channel B)  \n0x2FF  0x3FF  L A ST_ R WDATA  R 0x000000  Unsigned  Contains the data from the last successful 24 -bit/32-bit \nregister communication  \n \nADE7953 REGISTER DESCRIPTION S \nTable 16. DIS NOLOAD Register (Address 0x001)  \nBits  Bit Name  Default  Description  \n0 DIS_APNLOAD  0 1 = d isable the active power no-load  feature on Current Channel A and Current Channel B \n1 DI S_ VA RNLOAD  0 1 = disable the reactive power no -load  feat ure on Current Channel A and Current Channel B \n2 DIS_V ANLOAD  0 1 = disable the apparent power no-load  feature on Current Channel A and Current Channel B \nTable 17. LCYCMODE Register (Address 0x004)  \nBits  Bit Name  Default  Description  \n0 A LWATT  0 0 = disable active energy line cycle accumulation mode on Current Channel A  \n1 = enable active energy line cycle accumulation mode on Current Channel A  \n1 B LWATT  0 0 = disable active energy line cycle accumulation mode on Current Channel B  \n1 = enable active energy line cycle accumulation mode on Current Channel B  \n2 AL V AR  0 0 = disable reactive energy line cycle accumulation mode on Current Channel A  \n1 = enable reactive energy line cycle accumulation mode on Current Channel A  \n3 B LVA R  0 0 = disable reactive energy line cycle accumulation mode on Current Channel B  \n1 = enable reactive energy line cycle accumulation mode on Current Channel B  \n4 A LVA  0 0 = disable apparent energy line cycle accumulation mode on Current Channel A  \n1 = enable apparent energy line cycle accumulation mode on Current Channel A  \n5 B LVA  0 0 = disable apparent energy line cycle accumulation mode on Current Channel B  \n1 = enable apparent energy line cycle accumulation mode on Current Channel B  \n6 RSTREAD  1 0 = disable read with  reset for all registers  \n1 = enable read with reset for all registers  \nTable 18. CONFIG Register (Address 0x102)  \nBits  Bit Name  Default  Description  \n0 INTENA  0 1 = i ntegrator enable (Current Channel A ) \n1 INTENB  0 1 = integrator enab le (Current Channel B) \n2 HPFEN  1 1 = HPF enable ( all channels)  \n3 PFMODE  0 0 = power factor is based on instantaneous powers  \n1 = power factor is based on line cycle accumulation mode energies  \n4 REVP_CF  0 0 = REVP  is updated on CF1  \n1 = REVP  is updated on CF2  \n5 REVP_ PULSE 0 0 = REVP  is high when  reverse polarity is  true, low when reverse polarity is false  \n1 = REVP  outputs a 1 Hz pulse when reverse polarity is true and is low when rever se polarity is false  \n6 ZXLPF  0 0 = ZX LPF is enabled  \n1 = ZX LPF is disabled  \n7 SWRST  0 Setting this bit enables a software reset  \nData Sheet  ADE7953  \n \nRev. C | Page 63  of 72 Bits  Bit Name  Default  Description  \n8 CRC_ENABLE  0 0 = CRC is disabled  \n1 = CRC is enabled  \n[10:9]  Reserved  00 Reserved  \n11 ZX_I  0 0 = ZX_I is based on Current Ch annel A \n1 = ZX_I is based on Current Channel B \n[13:12]  ZX_EDGE  00 Zero -crossing interrupt edge selection  \n   Setting  Edge Selection  \n   00 Interrupt is issued on both positive -going and negative -going zero crossing  \n01 Interrupt is issued on negative -going zero crossing  \n10 Interrupt is issued on positive -going zero crossing  \n11 Interrupt is issued on both positive -going and negative -going zero crossing  \n14 Reserved  0 Reserved  \n15 COMM_LOCK  1 0 = communication locking feature is enabled  \n1 = commun ication locking feature is disabled  \n \nTable 19. CFMODE Register (Address 0x107)  \nBits  Bit Name  Default  Description  \n[3:0]  CF1SEL  0000  Configuration of output signal on CF1 pin  \n   Setting  CF1 Output Signal Configuration  \n   0000  CF1 is proportional to active power (Current Channel A)  \n0001  CF1 is proportional to reactive power (Current Channel A)  \n0010  CF1 is proportional to apparent power (Current Channel A)  \n   0011  CF1 is proportional to IRMS (Current Channel A)  \n   0100  CF1 is proportional to active power (Current Channel B)  \n0101  CF1 is proportional to reactive power (Current Channel B)  \n0110  CF1 is proportional to apparent power (Current Channel B)  \n   0111  CF1 is proportional to IRMS (Current Channel B)  \n   1000  CF1 is proportional to IRMS (Current Channel A) + IRMS (Current Channel B)  \n   1001  CF1 is proportional to active power (Current Channel A) + active power \n(Current Channel B)  \n[7:4]  CF2SEL  0000  Configuration of output signal on CF2 pin  \n   Setting  CF2 Output S ignal Configuration  \n   0000  CF2 is proportional to active power (Current Channel A)  \n0001  CF2 is proportional to reactive power (Current Channel A)  \n0010  CF2 is proportional to apparent power (Current Channel A)  \n   0011  CF2 is proportional to IRMS (Current Channel A)  \n   0100  CF2 is proportional to active power (Current Channel B)  \n0101  CF2 is proportional to reactive power (Current Channel B)  \n0110  CF2 is proportional to apparent power (Current Channel B)  \n   0111  CF2 is proportional to IRMS (Current Channel B)  \n   1000  CF2 is proportional to IRMS (Current Channel A) + IRMS (Current Channel B)  \n   1001  CF2 is proportional to active power (Current Channel A) + active power \n(Current Channel B)  \n8 CF1DIS  1 0 = CF1 output is enabled  \n1 = CF1 output  is disabled  \n9 CF2DIS  1 0 = CF2 output is enabled  \n1 = CF2 output is disabled  \n \n \n \n \nADE7953  Data Sheet  \n \nRev. C | Page 64  of 72 Table 20. ALT_OUTPUT Re gister (Address 0x110)  \nBits  Bit Name  Default  Description  \n[3:0]  ZX_ A LT  0000  Configuration of ZX pin (Pin 1)  \n   Setting  ZX Pin  Configuration  \n   0000  ZX detection is output on Pin 1  (default)  \n0001  Sag detection is output on Pin 1  \n0010  Reserved  \n   0011  Reserved  \n   0100  Reserved  \n0101  Active power no -load detection (Current Channel A) is output on Pin 1  \n0110  Active  power no-load detection (Current Channel B) is output on Pin 1  \n   0111  Reactive power no -load detection (Current Channel A) is output on Pin 1  \n   1000  Reactive power no -load detection (Current Channel B) is output on Pin 1  \n   1001  Unlatched waveform sa mpling signal is output on Pin 1  \n   1010  IRQ signal is output on Pin 1  \n   1011  ZX_I detection is output on Pin 1  \n   1100  REVP  detection is output on Pin 1  \n   1101  Reserved (set to default value)  \n   111 x Reserved (se t to default value)  \n[7:4]  ZXI _ A LT  0000  Configuration of ZX_I pin (Pin 21)  \n   Setting  ZX_I Pin Configuration  \n   0000  ZX_I detection is output on Pin 21  (default)  \n0001  Sag detection is output on Pin 21  \n0010  Reserved  \n   0011  Reserved  \n   0100  Rese rved  \n0101  Active power no -load detection (Current Channel A) is output on Pin 21  \n0110  Active power no -load detection (Current Channel B) is output on Pin 21  \n   0111  Reactive power no -load detection (Current Channel A) is output on Pin 21  \n   1000  Reactive power no -load detection (Current Channel B) is output on Pin 21  \n   1001  Unlatched waveform sampling signal is output on Pin 21  \n   1010  IRQ signal is output on Pin 21  \n   1011  ZX detection is output on Pin 21  \n   1100  REVP  detection is output on Pin 21  \n   1101  Reserved (set to default value)  \n   111 x Reserved (set to default value)  \n[11:8] R EVP _ A LT  0000  Configuration of REVP  pin (Pin 2 0) \n   Setting  REVP  Pin Configuration  \n   0000  REVP  detection is output on Pin 20  (default)  \n0001  Sag detection is output on Pin 20  \n0010  Reserved  \n   0011  Reserved  \n   0100  Reserved  \n0101  Active power no -load detection (Current Channel A) is output on Pin 20  \n0110  Active power no -load detection (Current Channel B) is output on Pin 20  \n   0111  Reactive power no -load detection (Current Channel A) is output on Pin 20  \n   1000  Reactive power no -load detection (Current Channel B) is output on Pin 20  \n   1001  Unlatched wav eform sampling signal is output on Pin 20  \n   1010  IRQ signal is output on Pin 20  \n   1011  ZX detection is output on Pin 20  \n   1100  ZX_I  detection is output on Pin 2 0 \n   1101  Reserved (set to default value)  \n   111 x Reserved (set to def ault value)  \n \nData Sheet  ADE7953  \n \nRev. C | Page 65  of 72 Table 21. ACCMODE Register (Address 0x201 and Address 0x301)  \nBits  Bit Name  Default  Description  \n[1:0]  AWATTACC  00 Current Channel A active energy accumulation mode  \n   Setting  Active Energy Accumulation Mode  (Current C hannel A) \n   00 Normal mode  \n01 Positive -only accumulation mode  \n10 Absolute accumulation mode  \n   11 Reserved  \n[3:2]  B WATTA CC  00 Current Channel B active energy accumulation mode  \n   Setting  Active Energy Accumulation Mode (Current Channel B)  \n   00 Normal mode  \n01 Positive -only accumulation mode  \n10 Absolute accumulation mode  \n11 Reserved  \n[5:4]  AV ARACC  00 Current Channel A reactive energy accumulation mode  \n   Setting  Reactive Energy Accumulation Mode (Current Channel A) \n   00 Normal mod e \n01 Antitamper accumulation mode  \n10 Absolute  accumulation  mode  \n   11 Reserved  \n[7:6]  BV ARACC  00 Current Channel B reactive energy accumulation mode  \n   Setting  Reactive Energy Accumulation Mode (Current Channel B) \n   00 Normal mode  \n01 Antita mper accumulation mode  \n10 Absolute accumulation mode  \n   11 Reserved  \n8 AV AACC  0 0 = Current Channel A apparent energy accumulation is in normal mode  \n1 = Current Channel A apparent energy accumulation is based on IRMSA  \n9 BV AACC  0 0 = Current Channel B  apparent energy accumulation is in normal mode  \n1 = Current Channel B apparent energy accumulation is based on IRMSB  \n10 APSIGN_A  0 0 = active power on Current Channel A is positive  \n1 = active power on Current Channel A is negative  \n11 APSIGN_B  0 0 = activ e power on Current Channel B is positive  \n1 = active power on Current Channel B is negative  \n12 VA R SI GN_ A  0 0 = reactive power on Current Channel A is positive  \n1 = reactive power on Current Channel A is negative  \n13 VA R SI GN_ B  0 0 = reactive power on Current  Channel B is positive  \n1 = reactive power on Current Channel B is negative  \n[15:14]  Reserved  00 Reserved  \n16 ACTNLOAD_A 0 0 = Current Channel A active energy is out of no -load  condition  \n1 = Current Channel A active energy is in no -load condition  \n17 VA NLO A D_A  0 0 = Current Channel A apparent energy is out of no-load condition  \n1 = Current Channel A apparent energy is in no-load condition  \n18 V ARNLOAD_A 0 0 = Current Channel A reactive energy is out of no-load condition  \n1 = Current Channel A reactive energy i s in no -load condition  \n19 ACTNLOAD_B  0 0 = Current Channel B active energy is out of no-load condition  \n1 = Current Channel B active energy is in no -load condition  \n20 V ANLOAD_B  0 0 = Current Channel B apparent energy is out of no -load condition  \n1 = Curren t Channel B apparent energy is in no-load condition  \n21 V ARNLOAD_B  0 0 = Current Channel B reactive energy is out of no-load condition  \n1 = Current Channel B reactive energy is in no -load condition  \n \nADE7953  Data Sheet  \n \nRev. C | Page 66  of 72 Interrupt Enable and Interrupt  Status Register s  \nCurrent C hannel A and Voltage Channel  Register s \nTable 22. IRQENA Register (Address 0x22C and Address 0x32C ) \nBits  Bit Name  Description  \n0 A EH FA  Set to 1 to enable an interrupt when the a ctive energy is half full  (Current Channel A)  \n1 VA R EH FA  Set to 1 to enable an interrupt when the r eactive energy is half full  (Current Channel A)  \n2 VA EH FA  Set to 1 to enable an interrupt when the a pparent energy is half full (Current Channel A)  \n3 A EO FA  Set to 1 to enable an interrupt when the a ctive energy has overflowed  or underflowed (Current Channel A)  \n4 VA R EO FA  Set to 1 to enable an interrupt when the r eactive energy has overflowed  or underflowed (Current Channel A)  \n5 VA EO FA  Set to 1 to enable an interrupt when the a pparent energy  has overflowed  or unde rflowed (Current Channel A)  \n6 AP_N OLOAD A Set to 1 to enable an interrupt when the a ctive power no-load  condition  is detect ed on Current Channel A \n7 VA R _ N OLOAD A Set to 1 to enable an interrupt when the r eactive power no -load  condition  is detect ed on Curre nt Channel A \n8 VA _ N OLOADA  Set to 1 to enable an interrupt when the a pparent power no-load  condition is detected  on Current Channel A \n9 APSIGN_A  Set to 1 to enable an interrupt when the s ign of active energy has changed  (Current Channel A)  \n10 VA R SI GN_ A  Set to 1 to enable an interrupt when the s ign of reactive energy has changed  (Current Channel A)  \n11 ZXTO_IA  Set to 1 to enable an interrupt when the zero crossing has been missing on Current Channel A  for the length of \ntime specified in the ZXTOUT register  \n12 ZXIA  Set to 1 to enable an interrupt when the c urrent Channel A zero crossing  occurs  \n13 OIA  Set to 1 to enable an interrupt when the c urrent Channel A p eak has exceeded the overcurrent threshold set in the \nOILVL register  \n14 ZXTO  Set to 1 to enable a n interrupt when a zero crossing has been missing on the voltage channel for the length of \ntime specified in the ZXTOUT register  \n15 ZXV  Set to 1 to enable an interrupt when the v oltage channel zero crossing  occurs  \n16 OV Set to 1 to enable an interrupt wh en the v oltage peak has exceeded the overvoltage threshold set in the OVL VL \nregister  \n17 WSMP  Set to 1 to enable an interrupt when n ew waveform data is acquired  \n18 CYCEND  Set to 1 to enable an interrupt when it is the e nd of a line cycle accumulation peri od \n19 Sag Set to 1 to enable an interrupt when a s ag event has occurred  \n20 Reset  This interrupt is always enabled and cannot be disabled  \n21 CRC  Set to 1 to enable an interrupt when the c hecksum has changed  \n \nTable 23. IRQSTATA Re gister (A ddress 0x22D and Address 0x32D)  and RSTIRQSTATA Register (Address 0x22E and  \nAddress 0x32E)  \nBits  Bit Name  Description  \n0 A EH FA  Set to 1 when the active energy register is half full (Current Channel A)  \n1 VA R EH FA  Set to 1 when the reactive energy r egister is half full (Current Channel A)  \n2 VA EH FA  Set to 1 when the apparent energy register is half full (Current Channel A)  \n3 A EO FA  Set to 1 when the active energy register has overflowed or underflowed (Current Channel A)  \n4 VA R EO FA  Set to 1 when the reactive energy register has overflowed or underflowed (Current Channel A)  \n5 VA EO FA  Set to 1 when the apparent energy register has overflowed or underflowed (Current Channel A)  \n6 AP_NOLOADA Set to 1 when the active power no -load condition is detected Cur rent Channel A  \n7 V AR_NOLOADA Set to 1 when the reactive power no -load condition is detected Current Channel A  \n8 V A_NOLOADA Set to 1 when the apparent power no -load condition is detected Current Channel A  \n9 APSIGN_A  Set to 1 when the sign of active energ y has changed (Current Channel A)  \n10 VA R SI GN_ A  Set to 1 when the sign of reactive energy has changed (Current Channel A)  \n11 ZXTO_IA  Set to 1 when a zero crossing has been missing on Current Channel A for the length of time specified in the \nZXTOUT registe r \n12 ZXIA  Set to 1 when a current Channel A zero crossing is detected  \n13 OIA  Set to 1 when the current Channel A peak has exceeded the overcurrent threshold set in the OIL VL register  \n14 ZXTO  Set to 1 when a zero crossing has been missing on the voltage channel for the length of time specified in the \nZXTOUT register  \n15 ZXV  Set to 1 when the voltage channel zero crossing is detected  \n16 OV Set to 1 when the voltage peak has exceeded the overvoltage threshold set in the OVL VL register  \nData Sheet  ADE7953  \n \nRev. C | Page 67  of 72 Bits  Bit Name  Description  \n17 WSMP  Set to 1 whe n new waveform data is acquired  \n18 CYCEND  Set to 1 at the end of a line cycle accumulation period  \n19 Sag Set to 1 when a sag event has occurred  \n20 Reset  Set to 1 at the end of a software or hardware reset \n21 CRC  Set to 1 when the checksum has changed  \n \nCurrent Channel B  Register s \nTable 24. IRQENB Register (Ad dress 0x22F and Address 0x32F)  \nBits  Bit Name  Description  \n0 AEHFB  Set to 1 to enable an interrupt when the a ctive energy is half full (Current Channel B)  \n1 VA R EHFB  Set to 1 to enable an interrupt when the r eactive energy is half full (Current Channel B)  \n2 VA EHFB  Set to 1 to enable an interrupt when the a pparent energy is half full (Current Channel B)  \n3 AEOFB  Set to 1 to enable an interrupt when the a ctive energy has overflo wed or underflowed (Current Channel B)  \n4 VA R EO FB  Set to 1 to enable an interrupt when the r eactive energy has overflowed or underflowed (Current Channel B)  \n5 VA EO FB  Set to 1 to enable an interrupt when the a pparent energy has overflowed or underflowed (Current Channel B)  \n6 AP_NOLOADB  Set to 1 to enable an interrupt when the a ctive power no -load detection on Current Channel B  occurs  \n7 V AR_NOLOADB  Set to 1 to enable an interrupt when the r eactive power no -load detection on Current Channel B  occurs  \n8 V A_NOLOADB  Set to 1 to enable an interrupt when the a pparent power no -load detection on Current Channel B  occurs  \n9 APSIGN_B  Set to 1 to enable an interrupt when the s ign of active energy has changed (Current Channel B)  \n10 VA R SI GN_ B  Set to 1 to enable an interrupt when the s ign of reactive energy has changed (Current Channel B)  \n11 ZXTO_IB  Set to 1 to enable an interrupt when a zero crossing has been missing on Current Channel B for the length of time \nspecified in the ZXTOUT register  \n12 ZXIB  Set to 1 to e nable an interrupt when the c urrent Channel B zero crossing  occurs  \n13 OIB Set to 1 to enable an interrupt when the c urrent Channel B peak has exceeded the overcurrent threshold set in the \nO I LVL  register  \n \nTable 25. IRQSTATB Registe r (Address 0x230 and Address 0x330)  and RSTIRQSTATB Register (Address 0x231 and  \nAddress 0x331)  \nBits  Bit Name  Description  \n0 AEHFB  Set to 1 when the active energy register is half full (Current Channel B)  \n1 VA R EHFB  Set to 1 when the reactive energy regist er is half full (Current Channel B)  \n2 VA EHFB  Set to 1 when the apparent energy register is half full (Current Channel B)  \n3 AEOFB  Set to 1 when the active energy register has overflowed or underflowed (Current Channel B)  \n4 VA R EO FB  Set to 1 when the react ive energy register has overflowed or underflowed (Current Channel B)  \n5 VA EO FB  Set to 1 when the apparent energy register has overflowed or underflowed (Current Channel B)  \n6 AP_NOLOADB  Set to 1 when the active power no -load condition i s detected on Curre nt Channel B  \n7 V AR_NOLOADB  Set to 1 when the reactive power no -load condition i s detected on Current Channel B  \n8 V A_NOLOADB  Set to 1 when the apparent power no -load condition i s detected on Current Channel B  \n9 APSIGN_B  Set to 1 when the sign of active e nergy has changed (Current Channel B)  \n10 VA R SI GN_ B  Set to 1 wh en the s ign of reactive energy has changed (Current Channel B)  \n11 ZXTO_IB  Set to 1 when a zero crossing has been missing on Current Channel B for the length of time specified in the \nZXTOUT reg ister  \n12 ZXIB  Set to 1 when a c urrent Channel B zero crossing  is obtained  \n13 OIB Set to 1 when c urrent Channel B peak has exceeded the overcurrent threshold set in the OIL VL register  \n \n \n \nADE7953 Data Sheet\n \nRev. C | Page 68 of 72 LAYOUT GUIDELINES \nFigure 78 presents a basic schematic of the ADE7953 together \nwith its surrounding circuitry, decoupling capacitors at pins VDD, VINTA, VINTD, and REF, and the 3.58 MHz crystal and its load capacitors. The rest of the pins are dependent on the particular application and are not shown here.  \nFigure 77 presents a proposed layout of a printed circuit board \n(PCB) with two layers that have the components placed only on \nthe top of the board. Following these layout guidelines will help in creating a low noise design with higher immunity to EMC \ninfluences. \nThe VDD, VINTA, VINTD, and REF pins each have two \ndecoupling capacitors, one of μF\n order and a ceramic one of \n220 nF or 100 nF. These ceramic capacitors need to be placed \nclosest to the ADE7953  as they decouple high frequency noises, \nwhile the μF ones need to be place in close proximity. \nThe exposed pad of the ADE7953  is soldered to an equivalent \npad on the PCB. The AGND, DGND, and PULL_LOW pins \ntraces of the ADE7953 are then routed directly in to the PCB \npad. \nThe bottom layer is composed mainly of a ground plane \nsurrounding as much as possible the through hole crystal pins. \n  \n09320-178 \nFigure 77. ADE7953  Top Layer Printed Circuit Board \n \n09320-177ADE7953U1\n4DGND\n16\nAGND\nPAD\n14\nPULL_LOW7PULL_HIGH8PULL_HIGHIAP5\nIAN6\nIBP9\nIBN10\nVN11\nVP12\nCLKIN18\nSCLK25\nMOSI/SCL/Rx27\nCS28\nREF131ZX\n15 VINTA\n19 CLKOUT\n22 IRQ\n21 ZX_I\n20 REVP\n23 CF1\n24 CF2\n26 MISO/SDA/TxRESET2\nC8\n20pFC7\n20pF17\nVDDC6\n0.1µFC510µF\n3 VINTDC4\n4.7µFC3\n0.1µF\nC10\n4.7µFC9\n0.1µFC2\n4.7µFC1\n0.1µF\nY1\n3.58MHz\n12\n \nFigure 78. ADE7953  Crystal and Capacitors Connections \n \nData Sheet  ADE7953  \n \nRev. C | Page 69  of 72 OUTLINE DIMENSIONS  \n \n3.24\n3.14 SQ\n3.04\n0.80\n0.750.70TOP VIEW BOT TOM VIEWPKG-005090128\n8 14152122\n7PIN 1\nINDIC ATOR\n0.58\n0.530.48\nSEATING\nPLANE0.05 MAX\n0.02 NOM\n0.203 REFCOPLANARITY\n0.08PIN 1\nINDIC ATOR0.30\n0.25\n0.20\nCOMPLIANT TOJEDEC STANDARDS MO-220-WHHD-1.5.10\n5.00 SQ4.90\n03-29-2016- A0.20 MINEXPOSED\nPAD0.50\nBSC\n \nFigure 79. 28 -Lead Lead Frame Chip Scale Package [LFCSP_WQ]  \n5 mm ×  5 mm B ody  and 0.75 mm Package Height  \n(CP -28-10) \nDimensions shown in millimeters  \n \nORDERING GUIDE  \nModel1 T emperature Range Package Description  Package Option  \nADE7953ACPZ  −40°C to +85°C  28-Lead LFCSP _WQ  CP-28-10 \nADE7953ACPZ -RL −40°C to +85°C  28-Lead LFCSP _WQ , 13” T ape and Reel  CP-28-10 \nEVA L -ADE7953EBZ   Evaluation Board   \n \n1 Z = RoHS Compliant Part.  \n \n \nADE7953  Data Sheet  \n \nRev. C | Page 70  of 72 NOTES  \nData Sheet  ADE7953  \n \nRev. C | Page 71  of 72 NOTES  \nADE7953  Data Sheet  \n \nRev. C | Page 72  of 72 NOTES  \n \n \n \n  \n \n  \n \n \n  \n \n  \n \n \n \n \n \n \n \n \n \n  \n \n \n \n  \n \n \n \n \nI2C refers to a communications protocol originally developed by Philips Semiconductors (now NXP Semiconductors).  \n©2011 –2016 Analog Devices, Inc. All rights reserved. Trademarks and   \n registered trademarks are the property of their respective owners.  \n  D 09320- 0-12/1 6(C)  \n \n'}]
!==============================================================================!
### Technical Summary of ADE7953ACPZ-RL

**Component Overview:**
The ADE7953ACPZ-RL is a high-accuracy single-phase multifunction metering integrated circuit (IC) designed for electrical energy measurement. It is capable of measuring active, reactive, and apparent energy, as well as instantaneous voltage and current. The device includes a second current input for neutral current measurement, making it suitable for applications requiring precise energy monitoring and billing.

**Key Specifications:**
- **Voltage Ratings:** Operates with a supply voltage (VDD) of 3.3 V ± 10%.
- **Current Ratings:** Supports a maximum input signal level of ±500 mV peak for differential inputs and ±250 mV peak for single-ended inputs.
- **Power Consumption:** Typical current consumption (IDD) is 7 to 9 mA.
- **Operating Temperature Range:** -40°C to +85°C.
- **Package Type:** 28-lead LFCSP (Lead Frame Chip Scale Package).
- **Special Features:**
  - Highly accurate measurements with less than 0.1% error in active and reactive energy measurements.
  - Supports various communication interfaces: SPI, I2C, and UART.
  - Includes features for tamper detection, no-load detection, and power quality monitoring (overcurrent, overvoltage, sag detection).
  - Configurable pulse output pins for energy measurement.
- **Moisture Sensitive Level:** MSL 3 per JEDEC J-STD-020E.

**Description:**
The ADE7953 is a multifunction metering IC that integrates three Σ-Δ ADCs for high-precision energy measurement. It can measure line voltage and current, calculating active, reactive, and apparent energy, as well as instantaneous RMS voltage and current. The device is designed for use with various current sensors, including current transformers and shunt resistors, and features programmable gain amplifiers (PGA) for flexible input configurations.

**Typical Applications:**
- **Energy Metering:** Used in residential and commercial energy meters for accurate billing and monitoring.
- **Power Quality Monitoring:** Suitable for applications that require monitoring of power quality parameters such as voltage sags, swells, and interruptions.
- **Smart Grid Applications:** Can be integrated into smart grid systems for real-time energy management and monitoring.
- **Industrial Automation:** Used in industrial settings for energy consumption analysis and efficiency improvements.

This summary encapsulates the essential characteristics and applications of the ADE7953ACPZ-RL, providing a clear understanding of its capabilities and use cases in electronic metering and monitoring systems.