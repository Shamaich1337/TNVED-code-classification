[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of PI7C9X2G404SVAFDEEX production of DIODES INCORPORATED from the text: \nDocument Number DS41219 Rev 8-2  \n \n \n \n \n   \n \n \n \n \nPI7C9X2G 404SV  \nPCI EXPRESS GEN 2 PACKET SWITCH  \n4-Port , 4-Lane , ExtremeLo  PCIe 2.0 Packet  Switch  \nDATASHEET  \nREVISION 8  \nAugust  2022  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n1545 Barber Lane  Milpitas, CA 95035  \nTelephone: 408-232-9100  \nFAX: 408-434-1040  \nInternet: http://www. diodes .com  \n \n\n \n \n \n \nPI7C9X2G 404SV  Page 2 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n \nIMPORTANT NOTICE  \n \n1. DIODES INCORPORATED (Diodes) AND ITS SUBSIDIARIES MAKE NO WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, \nWITH REGARDS TO ANY INFORMATION CONTAINED IN THIS DO CUMENT, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED \nWARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON -INFRINGEMENT OF THIRD PARTY \nINTELLECTUAL PROPERTY RIGHTS (AND THEIR EQUIVALENTS UNDER THE LAWS OF ANY JURISDICTION).   \n 2. The Informa tion contained herein is for informational purpose only and is provided only to illustrate the operation of Diodes’ products \ndescribed herein and application examples. Diodes does not assume any liability arising out of the application or use of this  docum ent or any \nproduct described herein. This document is intended for skilled and technically trained engineering customers and users who design with \nDiodes’ products. Diodes’ products may be used to facilitate safety -related applications; however, in all ins tances customers and users are \nresponsible for (a) selecting the appropriate Diodes products for their applications, (b) evaluating the suitability of Diodes’ products for their \nintended applications, (c) ensuring their applications, which incorporate Diodes’ products, comply the applicable legal and regulatory \nrequirements as well as safety and functional -safety related standards, and (d) ensuring they design with appropriate safeguards (including \ntesting, validation, quality control techniques, redundancy , malfunction prevention, and appropriate treatment for aging degradation) to \nminimize the risks associated with their applications.    \n 3. Diodes assumes no liability for any application- related information, support, assistance or feedback that may be provided by Diodes \nfrom time to time. Any customer or user of this document or products described herein will assume all risks and liabilities a ssociated with such \nuse, and will hold Diodes and all companies whose products are represented herein or on Diodes’  websites, harmless against all damages \nand liabilities.   \n \n4. Products described herein may be covered by one or more United States, international or foreign patents and pending patent \napplications. Product names and markings noted herein may also be covered by one or more United States, international or foreign \ntrademarks and trademark applications. Diodes does not convey any license under any of its intellectual property rights or the rights of any \nthird parties (including third parties whose products and services may be described in this document or on Diodes’ website) under this \ndocument.   \n \n5. Diodes’ products are provided subject to Diodes’ Standard Terms and Conditions of Sale \n(https://www.diodes.com/about/company/terms -and-conditions/terms -and-condi tions -of-sales/) or other applicable terms. This document does \nnot alter or expand the applicable warranties provided by Diodes. Diodes does not warrant or accept any liability whatsoever in respect of any \nproducts purchased through unauthorized sales channel.   \n \n6. Diodes’ products and technology may not be used for or incorporated into any products or systems whose manufacture, use or sale \nis prohibited under any applicable laws and regulations. Should customers or users use Diodes’ products in contravent ion of any applicable \nlaws or regulations, or for any unintended or unauthorized application, customers and users will (a) be solely responsible for any damages, \nlosses or penalties arising in connection therewith or as a result thereof, and (b) indemnify and hold Diodes and its representatives and agents \nharmless against any and all claims, damages, expenses, and attorney fees arising out of, directly or indirectly, any claim r elating to any \nnoncompliance with the applicable laws and regulations, as well as any unintended or unauthorized application.  \n \n7. While efforts have been made to ensure the information contained in this document is accurate, complete and current, it may \ncontain technical inaccuracies, omissions and typographical errors. Diodes does no t warrant that information contained in this document is \nerror- free and Diodes is under no obligation to update or otherwise correct this information. Notwithstanding the foregoing, Diodes  reserves \nthe right to make modifications, enhancements, improvement s, corrections or other changes without further notice to this document and any \nproduct described herein. This document is written in English but may be translated into multiple languages for reference. Only the English \nversion of this document is the final and determinative format released by Diodes.  \n \n8. Any unauthorized copying, modification, distribution, transmission, display or other use of this document (or any portion her eof) is \nprohibited. Diodes assumes no responsibility for any losses incurred by the customers or users or any third parties arising from any such unauthorized use.  \n \n9. This Notice may be periodically updated with the most recent version available at https://www.diodes.com/about/company/ter ms-and-\nconditions/important -notice \n \n \nDIODES is  a trademark of Diodes Incorporated in the United States and other countries.  \nThe Diodes logo is a registered trademark of Diodes Incorporated in the United States and other countries.  \n© 2022 Diodes Incorporated. All Rights Reserved.  \n \nwww.diodes.com\n \n \n \n \n \n \nPI7C9X2G 404SV  Page 3 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nREVI SION HISTORY  \n \nDate  Revision Number  Description  \n02/08/ 2017 0.1 Preliminary Datasheet  \n07/11/2018 1 Reg40h [15:8] next item point to 4ch for both up/downport port  \nMSI register are for both up&downport, not downport only anymore  \nMultiple Message Capable modif y form 3b\'001 to 3\'b010  \nUpdate 74h[7], 8Ch[7][12].  \nUpdate 340h[4][5]  \nAdd cfg offset 300h to 314h  \nUpdate 8Ch[12]  \nAdd cfg offset 318h and 31Ch  \nUpdate 98h[15:0]  \nUpdate REG[9c] : trigger[6:3], clear[2], port[1:0] , and REG[a0]  \nUpdate Ini for REG[98][15:0] = 0126  \nAdd cfg offset B0h to FFh  \nDelete Misc Control 5 (offset 314h)  \nUpdated section 14  Ordering Information  \nAdded Fig 13- 3 Part Marking  \nUpdate Feature  \nAdd Chap 6.2 and 6.3  \nUpdate 7.2.54 OPERATION MODE – OFFSET 98h  \nAdd Chap 13  \nUpdate Table 9 -3 \nUpdate Table 12 -1 \n12/26/ 2018 2 Updated 3.2 PORT CONFIGURATION SIGNALS  \nUpdated Section 7.2.125 MISC CONTROL 0 REGISTER –  OFFSET 300h  \nUpdated Section 7.2.126 MISC CONTROL 1 REGISTER –  OFFSET 304h  \nUpdated Section 10   POWER MANAGEMENT  \nUpdated Section 12.1 Absolute Maximum Ratin gs \n02/20/ 2019 3 New revision number due to document control process  \n09/11/ 2019 4 Updated Section 12.4 Power Consumption  \nUpdated Section 15 Ordering Information  \n10/15/ 2019 5 Updated Section 1  Features  \nUpdated Section 3.1 PCI Express Interface Signals  \nUpdated Table 5 -2 Receiver Signal Detect Threshold  \nUpdated Figure 14 -2 Part Marking  \n07/29/2020 6 Updated Section 8 Clock Scheme  \nUpdated Section 5-1 Physical Layer Circuit  \nUpdated Table 6 -1, 6-3, 6-5 and 6 -6 \nUpdated Figure 6- 6 and 6- 9 \nUpdated Section 6.1.4 and 7.2.2  \nUpdated Notes for Table 12 -2 DC Electrical Characteristics  \n12/15/ 2020 7 For Datasheet Status Change  \n08/10/2022  8 Updated Section 1 FEATURES  \nUpdated Section 3.1 PCI EXPRESS INTERFACE SIGNALS  \nUpdated Section 7.2.47 PHY PARAMETER 2 – OFFSET 7Ch  \nUpda ted Section 7.2.50 XPIP_CSR5 – OFFSET 88h  \nUpdated Section 7.2.68 LINK CONTROL REGISTER –  OFFSET D0h  \nUpdated Section 8 Clock Scheme  \nUpdated Figure 14-1 Package Outline Drawing  \nUpdated Figure 14-2 Part Marking  \nUpdated 6.1.3 EEPROM Space Address Map  \nUpdated 6.1.4 Mapping EEPROM Contents to Configuration  \nUpdated Table 6 -1, 6-3 and 6-5  \nRemoved MEMORY ECC ERR OR MASK AND STATUS Register  \nUpdated Section 7.2.51 TL_CSR0 – OFFSET 8Ch  \nAdded Section 7.2.138 DEBUGOUT CONTROL –  OFFSET 348h  \nAdded Section 7.2.13 9 DEBUGOUT DATA  – OFFSET 34 Ch \n \n \n \n \nPI7C9X2G 404SV  Page 4 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nTABLE OF CONTENTS  \n \n1 FEATURES  .................................................................................................................................................................... 10 \n2 GENERAL DESCRIPTION  ......................................................................................................................................... 11 \n3 PIN DESCRIPTION  ...................................................................................................................................................... 13 \n3.1 PCI  EXPRESS  INTERFACE  SIGNALS  ................................................................................................................... 13 \n3.2 PORT  CONFIGURATION  SIGNALS  ...................................................................................................................... 14 \n3.3 MISCELLANEOUS  SIGNALS  .................................................................................................................................  15 \n3.4 JTAG  BOUNDARY  SCAN  SIGNALS  ..................................................................................................................... 16 \n3.5 POWER  PINS ............................................................................................................................................................ 16 \n4 PIN ASSIGNMENTS  .................................................................................................................................................... 17 \n4.1 PIN  LIST  OF 128-PIN  LQFP  ...................................................................................................................................... 17 \n5 FUNCTIONAL DESCRIPTI ON .................................................................................................................................. 18 \n5.1 PHYSICAL  LAYER  CIRCUIT  .................................................................................................................................  18 \n5.1.1 RECEIVER DETECTION  .................................................................................................................................. 18 \n5.1.2 RECEIVER SIGNAL DETECTION  .................................................................................................................... 18 \n5.1.3 RECEIVER EQUALIZATION  ............................................................................................................................ 19 \n5.1.4 TRANSMITTER SWING  ..................................................................................................................................... 19 \n5.1.5 DRIVE AMPLITUDE AND DE -EMPHASIS SETTINGS  ................................................................................... 19 \n5.1.6 DRIVE AMPLITUDE  ......................................................................................................................................... 20 \n5.1.7 DRIVE DE -EMPHASIS  ..................................................................................................................................... 20 \n5.1.8 TRANSMITTER ELECTRICAL IDLE LATENCY  .............................................................................................. 21 \n5.2 DATA  LINK  LAYER  (DLL)  ..................................................................................................................................... 21 \n5.3 TRANSACTION  LAYER  RECEIVE  BLOCK  (TLP  DECAPSULATION)  ............................................................. 22 \n5.4 ROUTING .................................................................................................................................................................  22 \n5.5 TC/VC  MAPPING  ..................................................................................................................................................... 22 \n5.6 QUEUE  ...................................................................................................................................................................... 22 \n5.6.1 PH ...................................................................................................................................................................... 22 \n5.6.2 PD ...................................................................................................................................................................... 23 \n5.6.3 NPHD  ................................................................................................................................................................ 23 \n5.6.4 CPLH  .................................................................................................................................................................  23 \n5.6.5 CPLD  .................................................................................................................................................................  23 \n5.7 TRAN SACTION  ORDERING  .................................................................................................................................. 23 \n5.8 PORT  ARBITRATION ............................................................................................................................................. 24 \n5.9 VC ARBITRATION  .................................................................................................................................................. 24 \n5.10 FLOW  CONTROL  .................................................................................................................................................... 24 \n5.11 TRANSATION  LAYER  TRANSMIT  BLOCK  (TLP  ENCAPSULATION)  ............................................................ 24 \n5.12 ACCESS  CONTROLS  SERVICE  ............................................................................................................................. 25 \n6 EEPROM INTERFACE AND  SYSTEM MANAGEMENT B US............................................................................. 26 \n6.1 EEPROM  INTERFACE ............................................................................................................................................. 26 \n6.1.1 AUTO MODE EERPOM ACCESS ..................................................................................................................... 26 \n6.1.2 EEPROM MODE AT RESET  ............................................................................................................................. 26 \n6.1.3 EEPROM SPACE ADDRESS MAP  ................................................................................................................... 26 \n6.1.4 MAPPING EEPROM CONTENTS TO CONFIGURATION REGISTERS  ......................................................... 28 \n6.2 SMB US INTERFACE  ................................................................................................................................................ 38 \n6.2.1 SMBUS WRITE  .................................................................................................................................................. 39 \n6.2.2 SMBUS READ  .................................................................................................................................................... 39 \n6.3 I2C SLAVE  INTERFACE  .......................................................................................................................................... 40 \n6.3.1 I2C REG ISTER WRITE ACCESS  ....................................................................................................................... 41 \n \n \n \n \nPI7C9X2G 404SV  Page 5 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n6.3.2 I2C REGISTER READ ACCESS  ......................................................................................................................... 43 \n7 REGISTER DESCRIPTION  ........................................................................................................................................ 47 \n7.1 REGISTER  TYPES  ................................................................................................................................................... 47 \n7.2 TRANSPARENT  MODE  CONFIGURATION  REGISTERS  ................................................................................... 47 \n7.2.1 VENDOR ID REGISTER –  OFFSET 00h  .......................................................................................................... 49 \n7.2.2 DEVICE ID REGISTER –  OFFSET 00h  ............................................................................................................ 50 \n7.2.3 COMMAND REGISTER –  OFFSET 04h  ........................................................................................................... 50 \n7.2.4 PRIMARY STATUS REGISTER –  OFFSET 04h  ................................................................................................ 50 \n7.2.5 REVISION ID REGISTER – OFFSET 08h  ........................................................................................................ 51 \n7.2.6 CLASS CODE REGIS TER – OFFSET 08h  ........................................................................................................ 51 \n7.2.7 CACHE LINE REGISTER –  OFFSET 0Ch  ........................................................................................................ 51 \n7.2.8 PRIMARY LATENCY TIMER REGISTER –  OFFSET 0Ch  ............................................................................... 51 \n7.2.9 HEADER TYPE REGISTER –  OFFSET 0Ch  ..................................................................................................... 52 \n7.2.10  PRIMARY BUS NUMBER REGISTER –  OFFSET 18h  ..................................................................................... 52 \n7.2.11  SECONDARY BUS NUMBER REGISTER –  OFFSET 18h  ............................................................................... 52 \n7.2.12  SUBORDINATE BUS NUMBER REGISTER –  OFFSET 18h  ........................................................................... 52 \n7.2.13 SECONDARY LATENCY TIMER REGISTER –  OFFSET 18h  .......................................................................... 52 \n7.2.14  I/O BASE ADDRESS REGISTER –  OFFSET 1Ch  ............................................................................................. 52 \n7.2.15  I/O LIMIT ADDRESS R EGISTER – OFFSET 1Ch  ............................................................................................ 52 \n7.2.16  SECONDARY STATUS REGISTER –  OFFSET 1Ch  ......................................................................................... 53 \n7.2.17  MEMORY BASE ADDRESS REGISTER –  OFFSET 20h  .................................................................................. 53 \n7.2.18  MEMORY LIMIT ADDRESS REGISTER –  OFFSET 20h  ................................................................................. 53 \n7.2.19  PREFETCHABLE MEMORY BASE ADDRESS REGISTER – OFFSET 24h  .................................................... 54 \n7.2.20  PREFETCHABLE MEMORY LIMIT ADDRESS REGISTER – OFFSET 24h  ................................................... 54 \n7.2.21  PREFETCHABLE MEMORY BASE ADDRESS UPPER 32 -BITS REGISTER –  OFFSET 28h  ........................ 54 \n7.2.22  PREFETCHABLE MEMORY LIMIT ADDRESS UPPER 32 -BITS REGISTER –  OFFSET 2Ch  ...................... 54 \n7.2.23  I/O BASE ADDRESS UPPER 16 -BITS REGIST ER – OFFSET 30h  .................................................................. 54 \n7.2.24  I/O LIMIT ADDRESS UPPER 16 -BITS REGISTER –  OFFSET 30h  .................................................................  55 \n7.2.25  CAPABILITY POINTER REGISTER –  OFFSET 3 4h ........................................................................................ 55 \n7.2.26  INTERRUPT LINE REGISTER –  OFFSET 3Ch  ................................................................................................ 55 \n7.2.27  INTERRUPT PIN REGISTER –  OFFSET 3Ch  .................................................................................................. 55 \n7.2.28  BRIDGE CONTROL REGISTER –  OFFSET 3Ch  ............................................................................................. 55 \n7.2.29  POWER MANAGEMENT CAPABILITY REGISTER –  OFFSET 40h  ............................................................... 56 \n7.2.30  POWER MANAGEMENT DATA REGISTER –  OFFSET 44h  ........................................................................... 56 \n7.2.31  PPB SUPPORT EXTENSIONS –  OFFSET 44h  .................................................................................................  57 \n7.2.32  DATA RE GISTER – OFFSET 44h  ..................................................................................................................... 57 \n7.2.33  MSI CAPABILITY REGISTER –  OFFSET 4Ch  .................................................................................................  57 \n7.2.34  MESSAGE CONTROL REGISTER –  OFFSET 4Ch  .......................................................................................... 57 \n7.2.35  MESSAGE ADDRESS REGISTER –  OFFSET 50h  ............................................................................................ 58 \n7.2.36  MESSAGE UPPER ADDRESS REGISTER –  OFFSET 54h  .............................................................................. 58 \n7.2.37  MESSAGE DATA REGISTER – OFFSET 58h  ................................................................................................... 58 \n7.2.38  VENDOR SPECIFIC CAPABILITY REGISTER –  OFFSET 64h  ....................................................................... 58 \n7.2.39  XPIP CSR0 –  OFFSET 68h (Test Purpose Only)  .............................................................................................. 58 \n7.2.40  XPIP CSR1 –  OFFSET 6Ch (Test Purpose Only)  .............................................................................................. 58 \n7.2.41  REPLAY TIME -OUT COUNTER –  OFFSET 70h  ............................................................................................. 59 \n7.2.42  ACKNOWLEDGE LATENCY TIMER –  OFFSET 70h  ...................................................................................... 59 \n7.2.43  SWITCH OPERATION MODE –  OFFSET 74h (Upstream Port)  ..................................................................... 59 \n7.2.44  SWITCH OPERATION MODE –  OFFSET 74h (Downstream Port)  .................................................................  60 \n7.2.45  XPIP_CSR2 – OFFSET 78h  .............................................................................................................................. 61 \n7.2.46  PHY PARAMETER 1 –  OFFSET 78h (Upstream Port Only)  ............................................................................ 61 \n7.2.47  PHY PARAMETER 2 –  OFFSET 7Ch  ............................................................................................................... 61 \n7.2.48  XPIP_CSR3 – OFFSET 80h  .............................................................................................................................. 62 \n7.2.49  XPIP_CSR4 – OFFSET 84h  .............................................................................................................................. 62 \n7.2.50  XPIP_CSR5 – OFFSET 88h  .............................................................................................................................. 62 \n \n \n \n \nPI7C9X2G 404SV  Page 6 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.51  TL_CSR0 – OFFSET 8Ch  .................................................................................................................................. 62 \n7.2.52  PHY PARAMETER 3 –  OFFSET 90h  ................................................................................................................ 63 \n7.2.53  PHY PARAMETER 4 -  OFFSET 94h  ................................................................................................................. 63 \n7.2.54  OPERATION MODE – OFFSET 98h  ................................................................................................................. 64 \n7.2.55  LTSSM DEBUG CONTROL REGISTER –  OFFSET 9Ch  ................................................................................. 64 \n7.2.56  LTSSM DEBUG DATA OUTPUT REGSITER –  OFFSET ACh  ........................................................................ 64 \n7.2.57  SSID/SSVID CAPABILITY REGISTER –  OFFSET B0h  .................................................................................... 64 \n7.2.58  SUBSYSTEM ID REGISTER –  OFFSET B4h  .................................................................................................... 65 \n7.2.59  GPIO CONTROL REGISTER –  OFFSET B8h (Upstream Port Only)  .............................................................. 65 \n7.2.60  EEPROM CONTROL REGISTER –  OFFSET BCh (Upstream Port Only) ....................................................... 66 \n7.2.61  EEPROM ADDRESS REGISTER –  OFFSET BCh (Upstream Port Only)  ........................................................ 67 \n7.2.62  EEPROM DATA REGISTER –  OFFSET BCh (Upstream Port Only)  ............................................................... 67 \n7.2.63  PCI EXPRESS CAPABILITY REGISTER –  OFFSET C0h  ................................................................................ 67 \n7.2.64  DEVICE CAPABILITIES REGISTER –  OFFSET C4h  ...................................................................................... 68 \n7.2.65  DEVICE CONTROL REGISTER –  OFFSET C8h  ............................................................................................. 68 \n7.2.66  DEVICE STATUS REGISTER –  OFFSET C8h .................................................................................................. 69 \n7.2.67  LINK CAPABILITIES REGISTER –  OFFSET CCh  ........................................................................................... 70 \n7.2.68  LINK CONTROL REGISTER –  OFFSET D0h  .................................................................................................. 71 \n7.2.69  LINK STATUS REGISTER –  OFFSET D0h  ....................................................................................................... 71 \n7.2.70  SLOT CAPABILITIES REGISTER –  OFFSET D4h (Downstream Port Only)  .................................................. 72 \n7.2.71  SLOT CONTROL REGISTER – OFFSET D8h (Downstream Port Only)  ......................................................... 73 \n7.2.72  SLOT STATUS REGISTER  –  OFFSET D8h (Downstream Port Only)  ............................................................ 74 \n7.2.73  DEVICE CAPABILITIES REGISTER 2 –  OFFSET E4h  ................................................................................... 74 \n7.2.74  DEVICE CONTROL REGISTER 2 –  OFFSET E8h  ........................................................................................... 75 \n7.2.75  DEVIDE STATUS REGISTER 2 –  OFFSET E8h  ............................................................................................... 75 \n7.2.76  LINK CAPABILITIES REGISTER 2 –  OFFSET ECh  ........................................................................................ 75 \n7.2.77  LINK CONTROL REGISTER 2 –  OFFSET F0h  ................................................................................................ 75 \n7.2.78  LINK STATUS REGISTER 2 –  OFFSET F0h  .................................................................................................... 75 \n7.2.79  SLOT CAPABILITIE S REGISTER 2 –  OFFSET F4h  ........................................................................................ 75 \n7.2.80  SLOT CONTORL REGISTER 2 –  OFFSET F8h  ............................................................................................... 76 \n7.2.81  SLOT STATUS REGISTER 2 – OFFSET F8h  .................................................................................................... 76 \n7.2.82  PCI EXPRESS ADVANCED ERROR REPORTING CAPABILITY REGISTER –  OFFSET 100h  ..................... 76 \n7.2.83  UNCORRECTABLE ERROR STATUS REGISTER –  OFFSET 1 04h ................................................................ 76 \n7.2.84  UNCORRECTABLE ERROR MASK REGISTER –  OFFSET 108h  ................................................................... 77 \n7.2.85  UNCORRECTABLE ERROR SEVERITY REGISTER –  OFFSET 10Ch  ............................................................ 78 \n7.2.86  CORRECTABLE ERROR STATUS REGISTER –  OFFSET 110 h  ..................................................................... 79 \n7.2.87  CORRECTABLE ERROR MASK REGISTER –  OFFSET 114 h  ........................................................................ 79 \n7.2.88  ADVANCE ERROR CAPABILITIES AND CONTROL REGISTER –  OFFSET 118h  ........................................ 80 \n7.2.89  HEADER LOG REGISTER –  OFFSET From 11Ch to 128h  ............................................................................. 80 \n7.2.90  PCI EXPRESS VIRTUAL CHANNEL CAPABILITY REGISTER –  OFFSET 140h  ........................................... 80 \n7.2.91  PORT VC CAPABILITY REGISTER 1 –  OFFSET 144h  ................................................................................... 80 \n7.2.92  PORT VC CAPABILITY REGISTER 2 –  OFFSET 148h  ................................................................................... 81 \n7.2.93  PORT VC CONTROL REGISTER –  OFFSET 14Ch  ......................................................................................... 81 \n7.2.94  PORT VC STATUS REGISTER –  OFFSET 14Ch  .............................................................................................. 81 \n7.2.95  VC RESOURCE CAPABILITY REGISTER (0) –  OFFSET 150h  ....................................................................... 82 \n7.2.96  VC RESOURCE CONTROL REGISTER (0) –  OFFSET 154h  .......................................................................... 82 \n7.2.97  VC RESOURCE STATUS REGISTER (0) –  OFFSET 158h  ............................................................................... 82 \n7.2.98  VC RESOURCE CAPABILITY REGISTER (1) –  OFFSET 15Ch  ...................................................................... 83 \n7.2.99  VC RESOURCE CONTROL REGISTER (1) –  OFFSET 160h  .......................................................................... 83 \n7.2.100  VC RESOURCE S TATUS REGISTER (1) –  OFFSET 164h  ........................................................................... 84 \n7.2.101  VC ARBITRATION TABLE REGISTER –  OFFSET 170h  .............................................................................. 84 \n7.2.102  PORT ARBITRATION TABLE REGIST ER (0) and (1) –  OFFSET 180h and 1C0h  ...................................... 84 \n7.2.103  PCI EXPRESS POWER BUDGETING CAPABILITY REGISTER –  OFFSET 20Ch  .................................... 85 \n7.2.104  DATA S ELECT REGISTER –  OFFSET 210h  ................................................................................................ 85 \n7.2.105  POWER BUDGETING DATA REGISTER –  OFFSET 214h  ......................................................................... 85 \n \n \n \n \nPI7C9X2G 404SV  Page 7 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.106  POWER BUDGET CAPABILITY REGISTER –  OFFSET 218h  .................................................................... 86 \n7.2.107  ACS EXTENDED CAPABILITY HEADER –  OFFSET 220h (Downstream Port Only)  ................................ 86 \n7.2.108  ACS CAPABILITY REGISTER –  OFFSET 224h (Downstream Port Only)  ................................................... 86 \n7.2.109  EGRESS CONTROL VECTOR –  OFFSET 228h (Downstream Port Only) ................................................... 87 \n7.2.110  LTR EXTEND ED CAPABILITY HEADER –  OFFSET 230h (Upstream Port Only)  ..................................... 87 \n7.2.111  MAX SNOOP LATENCY REGISTER –  OFFSET 234h (Upstream Port Only)  ............................................. 87 \n7.2.112  MAX NO -SNOOP LATENCY REGISTER –  OFFSET 234h (Upstream Port Only)  ...................................... 88 \n7.2.113  LI PM SUBSTATES EXTENDED CAPABILITY HEADER –  OFFSET 240h  ................................................ 88 \n7.2.114  L1 PM SUBSTATES CAPABILITY REGISTER –  OFFSET 244h  .................................................................. 88 \n7.2.115  L1 PM SUBSTATES CONTROL 1 REGISTER –  OFFSET 248h  ................................................................... 88 \n7.2.116  L1 PM SUBSTATES CONTROL 2 REGISTER –  OFFSET 24Ch  .................................................................. 89 \n7.2.117  DPC EXTENDED CAPABILITY HEADER –  OFFSET 250h (Downstream Port Only)  ............................... 89 \n7.2.118  DPC CAPABILITY REGISTER –  OFFSET 254h (Downstream Port Only)  .................................................. 89 \n7.2.119  DPC CONTROL REGISTER –  OFFSET 254h (Downstream Port Only)  ...................................................... 89 \n7.2.120  DPC STATUS REGISTER –  OFFSET 258h (Downstream Port Only)  .......................................................... 90 \n7.2.121  DPC ERROR SOURCE ID REGISTER –  OFFSET 258h (Downstream Port Only)  ..................................... 90 \n7.2.122  PTM EXTENDED CAPABILITY HEADER REGISTER –  OFFSET 260h (Upstream Port Only)  ................. 90 \n7.2.123  PTM CAPABILITY REGISTER –  OFFSET 264h (Upstr eam Port Only)  ...................................................... 90 \n7.2.124  PTM CONTROL REGISTER –  OFFSET 268h (Upstream Port Only)  .......................................................... 91 \n7.2.125  MISC CONTROL 0 REGISTER –  OFFSET 30 0h .......................................................................................... 91 \n7.2.126  MISC CONTROL 1 REGISTER –  OFFSET 304h  .......................................................................................... 91 \n7.2.127  MISC CONTROL 2 REGISTER –  OFFSET 308h  .......................................................................................... 92 \n7.2.128  MISC CONTROL 3 REGISTER –  OFFSET 30Ch  ......................................................................................... 92 \n7.2.129  MISC CONTROL 4 REGISTER –  OFFSET 310h  .......................................................................................... 92 \n7.2.130  PHY/DLL/TL ERROR COUNTER –  OFFSET 318h  ...................................................................................... 92 \n7.2.131  PORT PHYSICAL LAYER COMMAND AND STATUS REGISTER –  OFFSET 320h  ................................... 93 \n7.2.132  PORT DISABLE/QUIET/TEST PATTERN RATE REGISTER –  OFFSET 324h ............................................ 94 \n7.2.133  CSR_LED0 – OFFSET 328h  .......................................................................................................................... 94 \n7.2.134  CSR_LED1 – OFFSET 32Ch  ......................................................................................................................... 94 \n7.2.135  LTSSM_CSR – OFFSET 33Ch  ....................................................................................................................... 94 \n7.2.136  MAC_CSR – OFFSET 340h  ........................................................................................................................... 95 \n7.2.137  TL_CSR1 – OFFSET 344h  ............................................................................................................................. 95 \n7.2.138  DEBUGOUT CONTROL –  OFFSET 348h (Upstream Port Only)  ................................................................ 95 \n7.2.139  DEBU GOUT DATA  –  OFFSET 34Ch (Upstream Port Only)  ...................................................................... 95 \n8 CLOCK SCHEME  ........................................................................................................................................................ 96 \n9 IEEE 1149.1 COMPATIB LE JTAG CONTROLLER  ............................................................................................... 98 \n9.1 INSTRUCTION  REGISTER  ..................................................................................................................................... 98 \n9.2 BYPASS  REGISTER  ................................................................................................................................................ 98 \n9.3 DEVICE  ID REGISTER  ............................................................................................................................................ 98 \n9.4 BOUNDARY  SCAN  REGISTER  .............................................................................................................................. 99 \n9.5 JTAG  BOUNDARY  SCAN  REGISTER  ORDER  ..................................................................................................... 99 \n10 POWER MANAGEMENT  ......................................................................................................................................... 101 \n11 POWER SEQUENCE  ................................................................................................................................................. 102 \n12 ELECTRICAL AND TIMIN G SPECIFICATIONS  ................................................................................................ 103 \n12.1 ABSOLUTE  MAXIMUM  RATINGS  ..................................................................................................................... 103 \n12.2 DC SPECIFICATIONS  ........................................................................................................................................... 103 \n12.3 AC SPECIFICATIONS  ........................................................................................................................................... 104 \n12.4 POWER  CONSUMPTION  ...................................................................................................................................... 105 \n12.5 OPERATING  AMBIENT  TEMPERATURE  .......................................................................................................... 105 \n13 THERMA L DATA  ...................................................................................................................................................... 106 \n \n \n \n \nPI7C9X2G 404SV  Page 8 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n14 PACKAGE INFORMATION ..................................................................................................................................... 107 \n15 ORDERING INFORMATION ................................................................................................................................... 108 \n \n \n \n \nPI7C9X2G 404SV  Page 9 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nTABLE OF FIGURES  \nFIGURE 5-1 DRIVER OUTPUT WAVEFORM  .................................................................................................................................. 20 \nFIGURE 6-1 SMB US ARCHITECTURE IMPLEMENTATION ON PI7C9X2G404SV  .......................................................................... 38 \nFIGURE 6-2 SMB US WRITE COMMAND FORMAT , TO WRITE TO A PI7C9X2G 404SV  REGISTER (PEC  DISABLE ) ....................... 39 \nFIGURE 6-3 SMB US READ COMMAND FORMAT , TO READ THAT RETURNS CFG  REGISTER VALUE  (PEC  DISABLED ) ................ 40 \nFIGURE 6-4 STANDARD DEVICES TO I2C BUS CONNECTION BLOCK DIAGRAM  ........................................................................... 41 \nFIGURE 6-5 I2C WRITE PACKET  .................................................................................................................................................. 42 \nFIGURE 6-6 I2C REGISTER WRITE ACCESS EXAMPLE  ................................................................................................................. 43 \nFIGURE 6-7 I2C WRITE COMMAND PACKET EXAMPLE  ............................................................................................................... 43 \nFIGURE 6-8 I2C READ COMMAND PACKET  .................................................................................................................................  45 \nFIGURE 6-9 I2C REGISTER READ ACCESS EXAMPLE  ................................................................................................................... 45 \nFIGURE 6-10 I2C READ COMM AND PACKET  ............................................................................................................................... 46 \nFIGURE 11-1 INITIAL POWER -UP SEQUENCE  ............................................................................................................................ 102 \nFIGURE 14-1 PACKAGE OUTLINE DRAWI NG .............................................................................................................................. 107 \nFIGURE 14-2 PART MARKING  ................................................................................................................................................... 107 \n \nLIST OF TABLES  \nTABLE 5-1 RECEIVER DETECTION THRESHOLD SETTINGS  .......................................................................................................... 18 \nTABLE 5-2 RECEIVER SIGNAL DETECT THRESHOLD  ................................................................................................................... 19 \nTABLE 5-3 RECEIVER EQUALIZATION SETTINGS  ........................................................................................................................ 19 \nTABLE 5-4 TRANSMITTER SWING SETTINGS  ............................................................................................................................... 19 \nTABLE 5-5 DRIVE AMPLITUDE BASE LEVEL REGISTERS  ............................................................................................................ 20 \nTABLE 5-6 DRIVE AMPLITUDE BASE LEVEL SETTINGS ............................................................................................................... 20 \nTABLE 5-7 DRIVE DE-EMPHASIS BASE LEVEL REGISTER  ........................................................................................................... 21 \nTABLE 5-8 DRIVE DE-EMPHASIS BASE LEVEL SETTINGS  ........................................................................................................... 21 \nTABLE 5-9 SUMMARY OF PCI  EXPRESS ORDERING RULES  ......................................................................................................... 23 \nTABLE 6-1 SMB US ADDRESS PIN CONFIGURATION  ................................................................................................................... 38 \nTABLE 6-2 BYTES FOR SMB US WRITE ....................................................................................................................................... 39 \nTABLE 6-3 SAMPLE SMB US WRITE BYTE SEQUENCE  ................................................................................................................ 39 \nTABLE 6-4 BYTES FOR SMB US READ ......................................................................................................................................... 40 \nTABLE 6-5 SMB US BLOCK WRITE PORTION  .............................................................................................................................. 40 \nTABLE 6-6 I2C ADDRESS PIN CONFIGURATION  ........................................................................................................................... 41 \nTABLE 6-7 I2C REGISTER WRITE ACCESS  ................................................................................................................................... 42 \nTABLE 6-8 I2C COMMAND FORMAT FOR WRITE ACCESS  ............................................................................................................ 42 \nTABLE 6-9 I2C COMMAND FORMAT FO R READ ACCESS  ............................................................................................................. 44 \nTABLE 7-1 REGISTER ARRAY LAYOUT FOR VC ARBITRATION  ................................................................................................... 84 \nTABLE 7-2 TABLE ENTRY SIZE IN 4 BITS .................................................................................................................................... 84 \nTABLE 8-1 AC SWITCHING  AND DC ELECTRICAL CHARACTERISTICS FOR REFCLKIP/N  AND REFCLKOP/N[3:0]  ................. 96 \nTABLE 8-2 AC SWITCHING AND DC ELECTRICAL CHARACTER ISTICS  FOR REFCLKP/N  ........................................................... 96 \nTABLE 8-3 CONNECTION MAP FOR REFCLKO_P/N[3:0]  .......................................................................................................... 97 \nTABLE 8-4 OUTPUT CONTROL FOR REFCLKO_P/N[3:0]  .......................................................................................................... 97 \nTABLE 9-1 INSTRUCTION REGISTER CODES  ................................................................................................................................ 98 \nTABLE 9-2 JTAG  DEVICE ID REGISTER  ..................................................................................................................................... 98 \nTABLE 9-3 JTAG  BOUNDARY SCAN REGISTER DEFINITION  ....................................................................................................... 99 \nTABLE 12-1 ABSOLUTE MAXIMUM RATINGS  ........................................................................................................................... 103 \nTABLE 12-2 DC ELECTRICAL CHAR ACTERISTICS  ..................................................................................................................... 103 \nTABLE 12-3 PCI  EXPRESS INTERFACE - DIFFERENTIAL TRANSMITTER (TX)  OUTPUT (5.0  GBPS) CHARACTERISTICS  .............. 104 \nTABLE 12-4 PCI  EXPRESS INTERFACE - DIFFERENTIAL TRANSMITTER (TX)  OUTPUT (2.5  GBPS) CHARACTERISTICS  .............. 104 \nTABLE 12-5 PCI  EXPRESS INTERFACE - DIFFERENTIAL RECEIVER (RX)  INPUT (5.0  GBPS) CHARACTERISTICS  ........................ 105 \nTABLE 12-6 PCI  EXPRESS INTERFACE - DIFFERENTIAL RECEIVER (RX)  INPUT (2.5  GBPS) CHARACTERISTICS  ........................ 105 \nTABLE 12-7 POWER CONSUMPTION  .......................................................................................................................................... 105 \nTABLE 12-8 OPERATING AMBIENT TEMPERATURE  ................................................................................................................... 105 \nTABLE 13-1 THERMAL DATA.................................................................................................................................................... 106 \n \n \n \n \n \nPI7C9X2G 404SV  Page 10 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n1 FEATURES  \n \n• 4-lane PCI Express® Gen 2 Switch with 4  PCI Express ports  \n• Supports “Cut-through ”(Default) as well as “ Store and Forward”  mode for packet  switching  \n• Peer-to-peer switching between any two downstream ports  \n• 150 ns typical latency for packet routed through Switch without blocking  \n• Integrated reference clock for downstream ports  \n• Strapped pins configurable with optional EEPROM or SMBus  \n• SMBus interface support  \n• Compliant with System Management (SM) Bus, Version 1 .0 \n• Compliant with  PCI Express Base Specification Revision 2.1  \n• Compliant with PCI Express CEM Specification Revision 2.0  \n• Compliant with  PCI-to-PCI Bridge Architecture Specification Revision 1.2  \n• Compliant with Advanced Configuration Power Interface (ACPI ) Specification  \n• Reliability, Availability and Serviceability  \n。 Supports Data Poisoning and End -to-End CRC  \n。 Advanced Error Reporting and Logging \n。 IEEE 1149. 1 JTAG interface support  \n•  Advanced Power S aving  \n。 Empty downstream ports are set to idle state to minimize  power consumption  \n• Link Power Management  \n。 Supports L0, L0s, L1, L2,  L2/L3 Ready and L3 link power states  \n。 Supports PCI -PM L1.1 and ASPM L1.1 of L1 PM Sub -state \n。 Active state power management for L0s and L1 states  \n• Device State Power Management  \n- Supports D0, D3 Hot and D3 Cold device power states  \n- 3.3V Aux Power support in D3 Cold power state \n• Port Arbitration: Round Robin (RR), Weighted RR and Time -based Weighted RR  \n• Extended Virtual Channel capability  \n。 Two Virtual Channels (VC) and Eight Traffic Class (TC) support  \n。 Disabled VC s’ buffer is assigned to enabled VCs for resource sharing  \n。 Independent TC/VC mapping for each port  \n。 Provides VC arbitration selections: Strict Priority, Round Robin (RR) and Programmable Weighted RR  \n• Supports Isochronous Traffic  \n。 Isochronous traffic class mapped to VC1 only  \n。 Strict time based credit policing  \n• Supports up to 512-byte maximum payload size \n• Programmable driver current and de -emphasis level at each individual port  \n• Support Access Control Service (ACS) for peer -to-peer traffic  \n• Support Address Translation (AT) packet for SR -IOV application  \n• Support OBFF and LTR  \n• Support Surprise Hot -Plug (DPC)  \n• Low Power Dissipation: 300  mW typical in L0 normal mode  \n• Industrial  Temperature Range - 40o to 85oC \n• Totally Lead -Free & Fully RoHS Compliant (Notes 1 & 2)  \n• Halogen and Antimony Free. “Green” Device (Note 3)  \n• For automotive appli cations requiring specific change control (i.e. parts qualified to AEC -Q100/101/104/200, PPAP capable, \nand manufactured in IATF 16949 certified facilities), please contact us  or your local Diodes representative.  \n https://www.diodes.com/quality/product -definitions/  \n• 128-pin LQFP 14mm x 14mm package  \n Notes:        \n1. No purposely added lead. Fully EU Directive 2002/95/EC (RoHS), 2011/65/EU (RoHS 2) & 2015/863/EU (RoH S 3) compliant.  \n2. See https://www.diodes.com/quality/lead -free/  for more information about Diodes Incorporated’s definitions of Halogen - and Antimony-free, "Green" and Lead -free.  \n3. Halogen - and A ntimony -free "Green” products are defined as those which contain <900ppm bromine, <900ppm chlorine (<1500ppm total Br + Cl) and <1000ppm \nantimony compounds.  \nThe Diodes logo is a registered trademark of Diodes Incorporated in the United States and other countries.  \nPCI Express® and PCIe® are trademarks or registered trademarks and/or service marks of PCI -SIG Corporation.  \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 11 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n2 GENERAL DESCRIPTION  \n \nSimilar to  the role of PCI/PCIX Bridge  in PCI/PCIX bus architecture, the function of PCI Express (PCIE) Switch is to \nexpand the connectivity  to allow  more end devices to be  reached by host controllers in PCIE serial interconnect architecture. \nThe 4-Lane PCI e Switch is in 4-Port type configuration. It provides users the flexibility to expand or fan- out the PCI Express \nlanes based on their application needs.   \n \nIn the PCI Express Architecture , the PCIE S witch forwards posted and non-posted request s, and completion packets in either \ndownstream or upstream direction concurrently as if a virtual PCI B ridge is in operation on  each port. By visualizing the port \nas a virtual B ridge, the S witch can be l ogically viewed as two -level cascaded multiple virtual PCI -to-PCI Bridges, where one \nupstream -port Bridge sits on  all downstream -port Bridges. S imilar to  a PCI Bridge  during enumeration, each port is given a \nunique  bus number , device number, and function n umber  by the initiating software. The bus number, device number, and \nfunction number are combined to form a destination ID  for each specific port. In addition to that, the memory -map and IO \naddress ranges are exclusively allocated to each port as well. Aft er the software enumeration is finished, the packets are \nrouted to the dedicated port  based on the embedded address  or destination  ID. To ensure the  packet integrity during \nforwarding, the Switch  is not allowed to split the packets  to multiple small packet s or merge the receiv ed packets into a large \ntransmit packet. Also , the IDs of the requesters and completers  are kept unchanged  along the path between ingress and egress \nport.  \n \nThe Switch employs the architecture of Combined  Input and Output Queue (CIOQ) in implementation.  The main reason for \nchoosing CIOQ is that the required memory bandwidth of input queue equals to the bandwidth  of ingress port rather than \nincreasing proportionally with port numbers as  an output queue Switch does . The CIOQ at each ingre ss port contains separate  \ndedicated queues to store packets. The packets are arbitrated to the egress port based on the PCIe transaction -ordering  rule. \nFor the packets without ordering information, they are permitted to pass over each other in case that th e addressed egress port \nis available to accept them. As to the packets require d to follow the ordering rule, the Head -Of-Line (HOL) issue  becomes \nunavoidable for packets destined to different egress ports since the operation of producer -consumer model has to be retained; \notherwise the system might occur  hang -up problem. On the other hand, the Switch places replay buffer at each egress port to \ndefer the packets before sending it out. This can assure the maximum throughput being achieved and therefore the Swi tch \nworks efficiently. Another advantage of implementing CIOQ in PCIe Switch is that the credit announcement to the \ncounterpart is simplified and streamlined because of the credit -based flow control protocol. The protocol requires that each \ningress  port ma intains the credits independently without checking other ports\' credit availability, which is otherwise required \nby pure output queue architecture.  \n \nThe Switch  supports two virtual channels (VC0, VC1) and eight traffic classes (TC0 ~ TC7) at each port.  The ingress port \nindependently assigns packets into the preferred virtual channel while the egress port outputs the packet based on the \npredefined port and VC arbitration algorithm. For instance, the isochronous  packet is given a special traffic class number \nother than TC0 and mapped into VC1 accordingly. By employing the strict time based credit policy for port arbitration and \nassigning higher priority to VC1 than VC0, the Switch  can therefore guarantee the time- sensitive  packet is not blocked by \nregular traffic to assure the quality of service. In addition, some data -centric applications only carry TC0/VC0  traffic. As a \nresult, there are no packets that would consume VC1 bandwidth. In order to improve the efficiency of buffer usage, the \nunused VC1 queues can be reassigned to VC0 and enable each of the ingress ports to handle more data traffic bursts. This \nvirtual channel resource relocation feature enhances the performance of the PCIe Switch further.  \n \nThe Switch provides the advanced feature of Access Control Service (ACS). This feature regulates which components are \nallowed to communicate with each other within the PCIe multiple -point fabric , and allows the system to have more control \nover packet routing in the Switch. As a result, peer -to-peer traffic can be facilitated more accurately and efficiently. When the \nsystem also implements Address Translation Service (ATS), the  peer-to-peer requests with translated address can be routed \ndirectly by enabling the corresponding option in ACS to avoid possible performan ce bottleneck associated with re- direction, \nwhich introduces extra latency and may increase link and RC congestion.  \n The built -in Integrated Reference Clock Buffer of the PCI Express Switch  supports four reference clock outputs. The clock \nbuffer is from a single 100MHz clock input, and distributes the clock source to four  outputs, which can be used by the \ndownstream PCI Express end devices. The clock buffer feature can be enabled and disabled by strapping pin setting.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 12 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nThe DIODES ™ PI7C9X 2G404SV  supports various types of power management ranged from device state, link state to \nplatform -wise power saving mechanism. For device state, the D0, D1, D2, D3 -hot, and D3-cold power states represent \ndifferent amount of power dissipation  in PI7C9X 2G404SV . As to link sta te, each link of the PI7C9X 2G404SV  supports the \nPCI Express Link Power Management with L 0, L0s, L1, L 2/L3 ready and L2/L3 power states.  In addition, PCI -PM L1.1 of \nL1 PM Sub -state and device -specific L2/L3 are implemented to reduce power consumption further.   \n \n \n \n \n   \n \n  \n \n \n  \n \n \n  \n \n \n \n  \n \n \n  \n \n \n  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n  \n \n  \nDIODES is a trademark of Diodes Incorporated in the United States and other countries.  \n \n \n \n \nPI7C9X2G 404SV  Page 13 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n3 PIN DESCRIPTION \n3.1 PCI EXPRESS INTERFACE SIGNALS \nNAME  PIN TYPE  DESCRIPTION  \nREFCLKP  \nREFCLKN  110, 111  I Reference Clock Input  Pair: Connect to 100MHz differential clock  when integrated \nreference clock buf fer is disabled ( CLKBUF_PD=1 ), or connect to one of the Integrated \nReference Clock Output Pairs ( REFCLK O_P and REFCLK O_N)  of this Switch when \nintegrated reference clock buffer is enabled ( CLKBUF_PD=0 ).  \n \nThe input clock signals must be delivered to the clo ck buffer cell  through an AC -coupled \ninterface so that only the AC information of the clock is received, converted, and \nbuffered.  It is recommended that a 0.1uF be used in the AC -coupling.  \nPERP [3:0] 122, 102, 97, \n128 I PCI Express D ata Serial Input  Pairs : Differential data receive signals in four ports.  \n \nPort 0 (Upstream Port) is PERP[0] and PERN[0]  \nPort 1 (Downstream Port) is PERP[1 ] and PERN[ 1] \nPort 2 (Downstream Port) is PERP[2 ] and PERN[ 2] \nPort 3 (Downstream Port) is PERP[3] and  PERN[3]  PERN [ 3:0] 121, 103,  98, \n127 I \nPETP [3:0] 118, 106, 100, \n124 O PCI Express D ata Serial Output  Pairs : Differential data transmit signals in four ports.  \n \nPort 0 (Upstream Port) is PETP[0] and PETN[0]  \nPort 1 (Downstream Port) is PETP[1] and PETN[1]  \nPort 2 (Downstream  Port) is PETP[2] and PETN[2]  \nPort 3 (Downstream Port) is PETP[3] and PETN[3]  PETN [ 3:0] 117, 107, 101, \n123 O \nPERST _L 10 I System  Reset (Active LOW): When PERST_L is asserted, the internal states of whole \nchip except sticky logics are initialized.  \n \nPlease refer to Table 12-2 for PERST_L spec.  \nDWNRST_L[3:1]  7, 6, 5  O Downstream Device Reset (Active LOW): DWNRST_L  provides a reset signal to the \ndevices connected to  the downstream ports of the switch. The signal is active when either \nPERST _L is asserted or the device is just plugged into the switch . DWNRST_L  [x] \ncorresponds  to Portx, where x= 1,2,3.  \nREXT  116 I External Reference Resistor : Connect an external resistor (1.43K Ohm +/ - 1%) to \nREXT_GND to provide a refer ence to both the bias currents and impedance calibration \ncircuitry.  \nREXT_GND  115 I External Reference Resistor  Ground: Connect to an external resistor to REXT.  \nREFCLKI_P, \nREFCLKI_N  74, 73  I Integrated Reference Clock Input Pair : Connect to external 100MH z differential \nclock  for the integrated reference clock buffer . \nREFCLK O_P[3:0]  76, 78, 81, 85  O Integrated Reference Clock Output Pairs: 100MHz external differential HCSL clock \noutput s for the integrated reference clock buffer. REFCLKO_N[3:0]  75, 77, 80,  83 O \nCLKBUF_PD  60 I Reference Clock Output Pairs Power Down: When CLKBUF_PD is asserted high, the \nintegrated reference clock buffer and Reference Clock Outputs are disabled. When it is \nasserted low, the integrated reference clock buffer and Reference Cl ock Outputs are \nenabled.  \n \nThis pin has internal pull -down. If no board trace is connected to this pin, the internal \npull-down resistor of this pin is enough. However, if pin is connected to a board trace \nand not driven, it is recommended that an external 330-ohm pull -down resistor be used.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 14 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n3.2 PORT CONFIGURATION SIGNALS  \nNAME  PIN TYPE  DESCRIPTION  \nVC1_EN  18 I Virtual Channel 1 Resource  Sharing  Enable: The chip provides the capability  to \nsupport virtual channel 1 (VC1), in addition to the standard virtual cha nnel 0. When this \npin is asserted high, Virtual Channel 1 is enabled, and virtual channel resource sharing is \nnot available. When it is asserted low, the chip would allocate the additional VC1 resource to VC0, and VC1 capability is disabled.  \n \nThis pin has  internal pull- down resistor. If no board trace is connected to this pin, the \ninternal pull- down resistor of this pin is enough. However, if pin is connected to a board \ntrace and not driven, it is recommended that an external 330 -ohm pull -down resistor be \nused.  \nRXPOLINV_DIS  24 I Rx Polarity Inversion Disable : When RXPOLINV_DIS is asserted high, it indicates to \ndisable Rx Polarity Inversion detection function.  Otherwise, it indicates to enable Rx \nPolarity Inversion detection function .  \n \nThis pin has intern al pull- down resistor. If no board trace is connected to this pin, the \ninternal pull- down resistor of this pin is enough. However, if pin is connected to a board \ntrace and not driven, it is recommended that an external 330 -ohm pull -down resistor be \nused.  \nPL_512B  53 I Max. Payload Size 512B : When PL_512B is asserted high, it indicates the max. payload \nsize capability is 512B. Otherwise, it indicates the max. P ayload size is 256B.  \n \nThis pin has internal pull -down resistor. If no board trace is connected to this pin, the \ninternal pull- down resistor of this pin is enough. However, if pin is connected to a board \ntrace and not driven, it is recommended that an external 330 -ohm pull -down resistor be \nused.  \nPRSNT [3:1] 21, 20, 19  I Present : When PRSNT  is asserted l ow, it indicates that the device is present in the slot \nof downstream port. Otherwise, it indicates the absence of the device. PRSNT[x] is \ncorrespondent to Port  x, where x=1,2,3.   \n \nThese pins have internal pull- down resistor s. If no board trace is  connecte d to these pins , \nthe internal pull -down resistor s of these pins are  enough. However, if pin s are connected \nto a board trace and not driven, it is recommended that external 330 -ohm pull -down \nresistor s be used.  \nSLOTCLK  33 I Slot Clock Configuration : It det ermines if the downstr eam component uses the same \nphysical reference clock that the platform provides on the connector. When SLOTCLK \nis high, the platform reference clock is employed.  \n \nThis pin has internal pull -down resistor. If no board trace is connect ed to this pin, the \ninternal pull- down resistor of this pin is enough. However, if pin is connected to a board \ntrace and not driven, it is recommended that an external 330 -ohm pull -down resistor be \nused.  \nSLOT_IMP[ 3:1] 47, 46, 45  I Slot Implemented: These signals are asserted to indicate that the downstream ports are \nconnected to slots. SLOT_IMP[x] corresponds to Portx, where x= 1,2,3 . When \nSLOT_IMP[x] is asserted, the Portx is connected to slot.  Otherwise, it is chip -to-chip \nconnection directly.  \n \nThese pin s have internal pull -down resistors. If no board trace is connected to these pins, \nthe internal pull -down resistors of these pins are enough. However, if pins are connected \nto a board trace and not driven, it is recommended that external 330 -ohm pull -down \nresistors be used.  \nCLKREQ_L[3:0]  \n/ \nPORTSTATUS[3:0]  48, 69, 68, 67  I/O \n/ \nO Clock Request (Active Low): When PORTSTATUS_L1.1_SEL   is set LOW, t he chip \nprovides the capability to support PM L1 Substate, which requires a side -band clock \nrequest signal to cont rol reference clock and PLL. When de- asserted, both of reference \nclock and PLL are turned off for entering PM L1 Substate to save power. When asserted, \nthe reference clock becomes valid to enable PLL and power state exits L1 Substate.  \n \nPlease refer to Sec tion 8 Clock Scheme.  \n \nPort Status: When PORTSTTUS_L1.1_SEL  is set HIGH, t hese signals indicate the \nstatus of each port. Please connect to pin header for debug used.  PORTSTATUS[x] is \ncorrespondent to Port x, where x= 0,1,2,3 . \n \n \n \n \nPI7C9X2G 404SV  Page 15 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n3.3 MISCELLANEOUS SIGNALS  \nNAME  PIN TYPE  DESCRIPTION  \nEECLK  70 O EEPROM  Clock: Clock signal to the EEPROM interface .  \nEEPD  *71 I/O EEPROM  Data: Bi-directional  serial data interface to and from the EEPROM .  \n \nEEPROM Bypass(EEPROM_BYPASS): Duri ng system initialization, EE PD acts as the \nEEPROM_ BYPASS pin. When tied low, eeprom function is disabled. When tied high, \neeprom function is enabled.  \n \nThe pin has internal pull -up resistor.  If no board trace is connected to this pin, the \ninternal pull- up resistor of this pin is enough. However, if pin is  connected to a board \ntrace and not driven, it is recommended that an external 5.1K -ohm pull -up resistor be \nused.  \nSMBCLK  26 I SM Bus Clock: System management Bus Clock . This pin requires an external 5.1K -ohm \npull-up resistor.  \nSMBDATA  27 I/O SM Bus Data: Bi-Directional System Management Bus Data . This pin requires an \nexternal 5.1K -ohm pull -up resistor.  \nSCAN_EN  72 I/O Full-Scan Enable Control: For normal operation, SCAN_EN is an output with a value \nof “0”. SCAN_EN becomes an input during manufacturing test ing. \nGPIO[ 7:0] 44, 43, 42, \n39, 38, 37, \n35, 36  I/O General Purpose Input and Output: These eight general -purpose pins are programmed \nas either input -only or bi -directional pins by writing the GPIO output enable control \nregister.  \n \nWhen SMBus is implemented , GPIO[7:5] act as the SMBus address pins, which set Bit 2 \nto 0 of the SMBus address.  \n \nDebug Mode Selection:  In debug mode, GPIO[4:0] are used for Debug Mode \nSelection.    \nPWR_SAV  28 I Power Saving Mode: When PWR_SAV is asserted high, power saving mode is enabled. \nOther wise, it power saving mode is disabled.   \n \nThis pin has internal pull -up resistor. If no board trace is connected to this pin, the \ninternal pull- up resistor of this pin is enough. However, if pin is connected to a board \ntrace and not driven, i t is recommended that an external 5.1K -ohm pull-up resistor be \nused.  \nPORTSTATUS_  \nL1.1_SEL  22 I PortStatus_L1.1_SEL: When tied low, L1.1 function is enabled. When tied high, \nPortStatus output mode is enabled.  \n \nThe pin has internal pull -down  resistor. If no  board trace is connected t o this pin, the \ninternal pull- down  resistor of this pin is enough. However, if pin is connected to a board \ntrace and not driven, it is recommended that an external 330 -ohm pull -down  resistor be \nused.  \nSMBUS_EN  54 I System Manage Bus Enable: Select either SMBUS  or I2C protocol. When tied low, \nI2C pro tocol is selected. When tied high , SMBUS protocol is chosen.  \n \nThe pin has internal pull -down  resistor. If no board trace is connected t o this pin, the \ninternal pull- down  resistor of th is pin is enough. However, if pin is connected to a board \ntrace and not driven, it is recommended that an external 330 -ohm pull -down  resistor be \nused.  \nTEST3  \nTEST5  \nTEST6  17 \n25 \n51 I Test3/5/6: These pins are for internal test purpose. Test3, Test5 and Test6  should be tied \nto ground through a 330 -ohm pull -down resistor.  \nTEST1  9 I Test1: The pin is for internal test purpose. It should be tied to 3.3V through a 5.1K -ohm \npull-up resistor for normal operation.  \n \nDebug Mode Enable : In debug mode, it need be tired to low through a 330-ohm pull-\ndown resistor.  \nTEST2  16 I Test2: The pin is for internal test purpose. Test2 should be tied to 3.3V through a 5.1K -\nohm pull -up resistor . \nNC 52,  57, 58, \n59, 86, 114   Not Connected: These pins can be just left open.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 16 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n3.4 JTAG BOUNDARY SCAN SIGNALS  \nNAME  PIN TYPE  DESCRIPTION  \nTCK  89 I Test Clock:  Used to clock state information and data into and out of the chip during \nboundary scan.  When JTAG boundary scan function is not implemented, this pin should \nbe left open (NC).  \nTMS  92 I Test Mode Select : Used to control the state of the Test Access Port controller . When \nJTAG boundary scan function is not implemented, this pin should be pulled low through \na 330 -Ohm pull -down resistor.  \nTDO  88 O Test Data Output : Used (in conjunction with TC K) to shift data out of the Test Access \nPort (TAP) in a serial bit stream.  When JTAG boundary scan function is not \nimplemented, this pin should be left open (NC).  \nTDI 93 I Test Data Input : Used (in conjunction with TCK) to shift data and instructions into  the \nTAP in a serial bit stream.  When JTAG boundary scan function is not implemented, this \npin should be left open (NC).  \nTRST_L 94 I Test Reset  (Active LOW) : Active LOW signal to reset the TAP controller into an \ninitialized state.  When JTAG boundary scan function is not implemented, this pin should \nbe pulled low through a 330 -Ohm pull -down resistor.  \n \n3.5 POWER PINS  \nNAME  PIN TYPE  DESCRIPTION  \nVDDC  3, 23, 29, 31, \n40, 55, 62, 65,  \n91 P VDDC  Supply  (1.0V) : Used as digital core power pins. \nVDDR  1, 8, 49, 64, 96  P VDD R Supply  (3.3V) : Used as digital I/O power pins.  \nCVDDR  79, 82, 84  P VDDR Supply (3.3V): Used as reference clock power pins.  \nVDD CAUX  13, 14  P VDDCAUX Supply (1.0V): Used as auxiliary core power pins.  \nVAUX  15 P VAUX Supply (3.3V): Used as auxiliary I/ O power pins.  \nAVDD  99, 105, 108, \n119, 125  P AVDD Supply (1.0V): Used as PCI Express analog power pins.  \nAVDDH  113 P AVDDH Supply (3.3V): Used as PCI Express analog high voltage power pins.  \nCGND  109, 112  P Ground: Used as reference clock ground pins.  \nVSS 2, 4, 11, 12, 30, \n32, 34, 41, 50, \n56, 61, 63, 66, \n87, 90, 95, 104, \n120, 126,129  P VSS Ground:  Used as ground pins . \n \n \n \n \nPI7C9X2G 404SV  Page 17 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n4 PIN ASSIGNMENTS \n4.1 PIN LIST of 128 -PIN LQFP  \n \nPIN NAME  PIN NAME  PIN NAME  PIN NAME  \n1 VDDR  33 SLOTCLK  65 VDDC  97 PERP[1]  \n2 VSS 34 VSS 66 VSS 98 PERN[1]  \n3 VDDC  35 GPIO[1]  67 CLKREQ_L[0]  99 AVDD  \n4 VSS 36 GPIO[0]  68 CLKREQ_L[1]  100 PETP[1]  \n5 DWNRST_L[1]  37 GPIO[2]  69 CLKREQ_L[2]  101 PETN[1]  \n6 DWNRST_L[2]  38 GPIO[3]  70 EECLK  102 PERP[2]  \n7 DWNRST_L[3]  39 GPIO[4]  71 EEPD  103 PERN[2]  \n8 VDDR  40 VDDC  72 SCAN_EN  104 VSS \n9 TEST1  41 VSS 73 REFCLKI_N  105 AVDD  \n10 PERST_L  42 GPIO[5]  74 REFCLKI_P  106 PETP[2]  \n11 VSS 43 GPIO[6]  75 REFCLKO_N[3]  107 PETN[2]  \n12 VSS 44 GPIO[7]  76 REFCLKO_P[3]  108 AVDD  \n13 VDDCAUX  45 SLOT_IMP[1]  77 REFCLKO_N[2]  109 CGND  \n14 VDDCAUX  46 SLOT_IMP[2]  78 REFCLKO_P[2]  110 REFCLKP  \n15 VAUX  47 SLOT_IMP[3]  79 CVDDR  111 REFCLKN  \n16 TEST2  48 CLKREQ_L[3]  80 REFCLKO_N[1]  112 CGND  \n17 TEST3  49 VDDR  81 REFCLKO_P[1]  113 AVDDH  \n18 VC1_EN  50 VSS 82 CVDDR  114 NC \n19 PRSNT[1]  51 TEST6  83 REFCLKO _N[0]  115 REXT_GND  \n20 PRSNT[2]  52 NC 84 CVDDR  116 REXT  \n21 PRSNT[3]  53 PL_512B  85 REFCLKO_P[0]  117 PETN[3]  \n22 TEST4  54 SMBUS_EN  86 NC 118 PETP[3]  \n23 VDDC  55 VDDC  87 VSS 119 AVDD  \n24 RXPOLINV_DIS  56 VSS 88 TDO  120 VSS \n25 TEST5  57 NC 89 TCK  121 PERN[3]  \n26 SMBCLK  58 NC 90 VSS 122 PERP[3]  \n27 SMBDATA  59 NC 91 VDDC  123 PETN[0]  \n28 PWR_SAV  60 CLKBUF_PD  92 TMS  124 PETP[0]  \n29 VDDC  61 VSS 93 TDI 125 AVDD  \n30 VSS 62 VDDC  94 TRST_L  126 VSS \n31 VDDC  63 VSS 95 VSS 127 PERN[0]  \n32 VSS 64 VDDR  96 VDDR  128 PERP[0]  \n129 E_PAD  \n \n \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 18 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n5 FUNCTIONAL DESCRIPTION  \n \nMultiple virtual PCI -to-PCI Bridges (VPPB), connected by a virtual PCI bus, reside in the Switch. Each VPPB contains the \ncomplete PCIe architecture layers that consist of the physical, data link, and transaction layer . The packets entering the \nSwitch via one of VPPBs are first converted from serial bit- stream into parallel bus signals in physical layer, stripped off the \nlink-related header by data link layer, and then relayed up to the transaction layer to extract out the transaction header. \nAccording to the address or ID embedded in the transaction header, the entire transaction packets are forwarded to the \ndestination VPPB for formatting as a serial -type PCIe packet through the transmit circuits in the data link layer  and physical \nlayer. The following sections describe these function elements for processing PCIe packets within the Switch.  \n \n5.1 PHYSICAL LAYER CIRCUIT  \n \nThe physical layer circuit design  is based on the PHY Interface for P CI Express Archi tecture (PIPE). It con tains Physical \nMedia Attachment (PMA) and Physical Coding Sub -layer (PCS) blocks. PMA includes Serializer/  Deserializer (SERDES), \nPLL1, Clock Recovery module, receiver detection  circuit s, beacon transmitter, electrical idle detector , and input/output \nbuffe rs. PCS consists of  framer, 8B/10B encoder/decoder, receiver elastic buffer , and PIPE PHY control/status circuitries. To \nprovide the flexibility  for port configuration, each lane has its own control and status signals for MAC to access individually.  \nThe ma in functions of physical layer circuits include the conversion between serial -link and parallel bus, provision of clock \nsource for the Switch, resolving clock difference in receiver end, and detection of physical layer errors.  \n  \nIn order to meet the needs  of different application, the drive amplitude, de -emphasis and equalization of each transmitting \nchannels can be adjusted using EEPROM individually. De- emphasis of - 3.5 db is implemented by the transmitters when full \nswing signaling is used, while an offs et can be individually applied to each channel.  \n \n5.1.1  RECEIVER DETECTION  \n The physical layer circuits implement receiver detection, which detects the presence of an attached 50 ohm to ground \ntermination as per PCI Express Specification. The detect circuits determine if the voltage levels of the receiver have crossed \nthe internal threshold after a configurable time determined by the Receiver Detection Threshold field in the P HY Parameter 2 \nRegister  (offset 7Ch, bit[6:4]) as listed in Table 5-1, which  can be configured by  EEPROM or SMBUS settings.  \n \nTable 5-1 Receiver Detection Threshold Settings  \nReceiver Detection \nThreshold  Threshold  \n000 1.0 us  \n001 2.0 us  \n010 4.0 us (Recomme nded)  \n011 5.0 us  \n100 10 us  \n101 20 us  \n110 40 us  \n111 50 us  \n \n5.1.2  RECEIVER SIGNAL DETECTION  \n \nReceiver signal idling is detected with levels above a programmable threshold  specified by Receiver Signal Detect field in \nthe PHY Parameter 2 Register  (Offset 7Ch, bit[21:20]) as listed in Table 5-2, which can be configured on a per -port basis via \nEEPROM or SMBUS settings.  \n                                                           \n1 Multiple lanes could share the PLL . \n \n \n \n \nPI7C9X2G 404SV  Page 19 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nTable 5-2 Receiver Signal Detect Threshold  \nReceiver Signa l Detect  Min (mV ppd)  Max (mV ppd)  \n00 50 150 \n01 (Recommended)  65 175 \n10 75 200 \n11 120 240 \n \n5.1.3  RECEIVER EQUALIZATION  \n \nThe receiver implements programmable equalizer via the Receiver Equalization  field in the P HY Parameter 2 Register  \n(Offset 7Ch, bit[25:2 2]) as listed in Table 5-3, which can be configured on a per -port basis via EEPROM or SMBUS settings.  \n \nTable 5-3 Receiver Equalization Settings  \nReceiver Equalization  Equalization  \n0000  (Recommended)  Off \n0010  Low \n0110  Medium  \n1110  High  \n \n5.1.4  TRANSMITTER SWING  \n \nThe PCI Express transmitters support implementations of both full voltage swing and half (low) voltage swing. In full swing \nsignaling mode, the transmitters implem ent de -emphasis, while in half swing mode, the transmitters do not. The Transmitter \nSwing field in the PHY Parameter  2 Register (offset 7Ch, Bit[30]) is used for the selection of full swing signaling or half \nswing signaling, which can be configured on a pe r-port basis via EEPROM or SMBUS settings.  \n \nTable 5-4 Transmitter Swing  Settings  \nTransmitter Swing  Mode  De-emphasis  \n0 Full Voltage Swing  Implemented  \n1 Half Voltage Swing  Not implemented  \n \n5.1.5  DRIVE AMPLITUDE AND DE-EMPHASIS SETTINGS  \n \nDepending on the operation condition (voltage swing and de -emphasis condition), one of the Drive Amplitude Base Level \nfields in the Switch Operation Mode Register  (offset 74h)  and one of the Drive De -Emphasis Base Level fields in th e PHY \nParameter  1 Register (offset 7Ah) are active for configuration of the amplitude and de- emphasis.  \n The final drive amplitude and drive de -emphasis are the summation of the base le vel value and the offset value.  The offset \nvalue for drive amplitude is 25 mV pd, and 6.25 mV pd for drive de -emphasis.  \nThe driver output waveform is the synthesis of amplitude and de -emphasis as shown in Figure 5-1. The driver amplitude \nwithout de -emphasis is specified as a peak differential voltage level (mVpd), and the driver de -emphasis modifies the driver \namplitude.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 20 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n-(Amplitude) –De-Emphasis1\n01 1 1\n0 0 0\nInput digital wave form\nOutput analog waveform-(Amplitude) + De -EmphasisAmplitude –De-EmphasisAmplitude + De -Emphasis\n \nFigure 5-1 Driver Output Waveform  \n \n5.1.6  DRIVE AMPLITUDE  \n \nOnly one of the Drive Amplitude Level field in the Switch Operation Mode Register  (offset 74h, bit[20:16], bit[25:21] and \nbit[30:26]) listed in Table 5-5 is active depending on the de -emphasis and swing condition.  The settings and the \ncorresponding values of the amplitude level  are listed in Table 5-6, which can be configured by  EEPROM or SMBUS \nsettings.  \n \nTable 5-5 Drive Amplitude Base Level Registers  \nActive Register  De-Emphasis Condition  Swing Condition  \nC_DRV_LVL_3P5_NOM  -3.5 db  Full \nC_DRV_LVL_6P0_NOM  -6.0 db  Full \nC_DRV_LVL_HALF_NOM  N/A Half \n Table 5-6 Drive Amplitude Base Level Settings  \nSetting  Amplitude \n(mV pd)  Setting  Amplitude \n(mV pd)  Setting  Amplitude \n(mV pd)  \n00000  0 00111  175 01110  350 \n00001  25 01000  200 01111  375 \n00010  50 01001  225 10000  400 \n00011  75 01010  250 10001  425 \n00100  100 01011  275 10010  450 \n00101  125 01100  300 10011  475 \n00110  150 01101  325 Others  Reserved  \nNote:  \n1. Nomi nal levels. Actual levels will vary with temperature, voltage and board effects.  \n2. The maximum nominal amplitude of the output driver is 475 mV pd. Combined values of driver amplitude and de -emphasis greater than 475 mV \npd should be avoided.  \n3. At higher amplitudes, actual swings will be less than the theoretical value due to process variations and environment factors, such as voltage \noverhead compression, package losses, board losses, and other effects. \n \n5.1.7  DRIVE DE -EMPHASIS  \n \nThe Drive De -Emphasis Level  field in the PHY Parameter  1 Register (Offset 7 8h, bit[ 20:16], bit[25:21] and bit[30:26] ) listed \nin Table 5-7 controls the de -emphasis base level. The settings and the corresponding values of the de- emphasis level are \nlisted in Table 5-8, which can be configured  globally  via EEPROM or SMBUS settings.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 21 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nTable 5-7 Drive De -Emphasis Base Level Register  \nRegister  De-Emphasis Condition  \nC_EMP_POST_GEN1_3P5_NOM  -3.5 db  \nC_EMP_POST_GEN2_3P5_NOM  -3.5 db  \nC_EMP_POST_GEN2_6P0_NOM  -6.0 db  \n \nTable 5-8 Drive De -Emphasis Base Level Settings \nSetting  De-Emphasis \n(mV pd)  Setting  De-Emphasis \n(mV pd)  Setting  De-Emphasis \n(mV pd)  \n00000  0.0 01011  69.0 10110  137.5  \n00001  6.0 01100  75.0 10111  144.0  \n00010  12.5 01101  81.0 11000  150.0  \n00011  19.0 01110  87.0 11001  156.0  \n00100  25.0 01111  94.0 11010  162.5  \n00101  31.0 10000  100.0  11011  169.0  \n00110  37.5 10001  106.0  11100 175.0  \n00111  44.0 10010  112.5  11101  181.0  \n01000  50.0 10011  119.0  11110  187.5  \n01001  56.0 10100  125.0  11111  194.0  \n01010  62.5 10101  131.0  - - \nNote:  \n1. Nominal levels. Actual levels will vary with temperature, voltage and board effects.  \n2. The maximum nominal amplitude of the output driver is 475 mV pd. Combined values of driver amplitude and de -emphasis greater than 475 mV \npd should be avoided.  \n3. At higher amplitudes, actual swings will be less than the theoretical value due to process variations and environment factors, such as voltage \noverhead compression, package losses, board losses, and other effects. \n \n5.1.8  TRANSMITTER ELECTRICAL IDLE LATENCY  \n \nAfter the last character of the PCI Express transmission, the output current is reduced, and a differential vo ltage of less than \n20 mV with common mode of VTX -CM-DC is established  within 20 UI. This delay time is programmable via Transmitter \nPHY Latency field in the PHY Parameter  2 Register (Offset 7Ch, bit[3:0]), which can be configured by  EEPROM or \nSMBUS setting s. \n \n5.2  DATA LINK LAYER (DLL)  \n \nThe Data Link Layer (DLL)  provides a reliable data transmission  between two PCI Express points. An ACK/NACK protocol \nis employed to guarantee the integrity  of the packets  delivered . Each Transaction Layer Packet (TLP) is protected by a 32-bit \nLCRC for  error detection . The DLL receiver performs LCRC calculation to determine if the incoming packet is corrupted in \nthe serial link. If an LCRC error is found , the DLL transmitter would issue a NACK data link layer packet (DLLP) to the \nopposite end to request a re -transmission , otherwise an ACK DLLP would be sent out to acknowledge on reception of a good \nTLP.   \nIn the transmitter, a retry buffer is implemented to store the transmitted TLPs whose corresponding ACK/NACK DLLP have not been received yet. When an ACK is received, the TLPs with sequence number equals to and smaller than that carried in \nthe ACK would be flushed out from the buffer. If a NACK is received or no ACK/NACK is returned from the link partner \nafter the replay timer expi res, then a replay mechanism built in DLL transmitter is triggered  to re-transmit the corresponding \npacket that receives NACK or time -out and any other TLP transmitted after  that packe t.  \n Meanwhile, the DLL is also responsible for  the initialization, upda ting, and monitoring of the flow -control credit. All of the \nflow control information is carried by DLLP to the other end of  the link. Unlike TLP, DLLP is guarded by 16 -bit CRC to \ndetect if data corruption occurs.  \n \nIn addition, the  Media Access Control (MA C) block, which is consisted of  LTSSM, multiple lanes de -skew, scrambler/de-\nscrambler, clock correction from inserting skip order -set, and PIPE -related control/status circuits, is implemented to interface \nphysical layer with data link layer.  \n \n \n \n \nPI7C9X2G 404SV  Page 22 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n5.3 TRANSACTION LAYER  RECEIVE BLOCK  (TLP D ECAPSULATION)  \n \nThe receiv ing end  of the transaction layer performs header information retriev al and TC/VC mapping (see section 5.5),  and it \nvalidate s the correctness of the transaction type and format. If the TLP is found to  contain  an illegal header or the indicated \npacket length mismatches with the actual packet length , then a Malformed TLP is reported as an error associated with the \nreceiving port. To ensure end -to-end data integrity, a 32 -bit ECRC is checked against the TLP at th e receiver if the digest bit \nis set in header.  \n    \n5.4 ROUTING  \n \nThe transaction layer implements three types of routing protocols:  ID-based , address -based,  and implicit routing . For \nconfiguration read s, configuration write s, transaction completion,  and user -defined messages , the packet s are routed by their  \ndestination ID  constituted of bus number, device number, and function number . Address routing is employed to forward I/O \nor memory transactions  to the destination port, which is located within the address ra nge indicated by the address field \ncarried in the packet header . The packet header indicates the packet types including memory read, memory write, IO read, IO \nwrite, Message Signaling Interrupt (MSI) and user -defined message. I mplicit routing is mainly use d to forward system \nmessage transaction s such as virtual interrupt line, power management, and so on. The message type embedded in the packet \nheader determines the routing mechanism .  \n \nIf the incoming packet can not be forwarded to any other port due to a m iss to hit the defined address range or targeted ID, \nthis is considered as Unsupported Request (UR) packet, which is similar to a master abort event in PCI protocol.  \n \n5.5 TC/VC MAPPING  \n \nThe 3 -bit TC field defined in the header identifies  the traffic class of  the incoming packet s. To enable the differential service, \na TC/VC mapping table at destination port that is pre -programmed by system software or EEPROM pre -load is utilized  to \ncast the TC labeled packets into the desired virtual channel. Note that TC0 traf fic is mapped into VC0 channel  by default . \nAfter the TC/VC mapping , the receive block dispatches the incoming request, completion , or data into the appropriate VC0 \nand VC1 queues.  \n \n5.6 QUEUE  \n \nIn PCI Express, it defines six different  packet types  to represent  request, completion , and data. They are respectively Posted \nRequest Header (PH), Posted Request Data payload (PD), Non -Posted Request Header (NPH), Non -Posted Data Payload \n(NPD), Completion Header (CPLH) and Completion Data payload (CPLD).  Each packet with different type would be put \ninto a separate queue in order to facilitate the following ordering processor.  Since  NPD usually contains one DW, it can be \nmerged with the corresponding NPH into a common queue named NPHD. Except NPHD, each virtual channel (VC0  or VC1) \nhas its own corresponding packet header and data queue. When only VC0 is needed in some applications, VC1 can be \ndisabled and its resources assigned to VC0 by asserting VC1_EN (Virtual Channel 1 Enable) to low.  \n \n5.6.1   PH \n \nPH queue provides TLP header s paces for posted memory write s and various message request headers . Each header space \noccupies sixteen bytes to accommodate 3 DW or 4 DW headers . There are two PH queues for VC0 and VC1 respectively.  \n \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 23 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n5.6.2  PD \n \nPD queue is used for storing posted request data.  If the received TLP is of the posted request type and is determined to have \npayload coming with the header, the payload data would be put into PD queue. There are two PD queues for VC0 and VC1 respectively.  \n \n5.6.3  NPHD \n \nNPHD queue provides TLP header spaces for  non-posted request packets, which include memory read, IO read, IO write, \nconfiguration read, and configuration write. Each header space takes twenty bytes to accommodate a 3-DW header, s 4 -DW \nheader , s 3-WD header with 1 -DW data, and a 4 -DW header with 1 -DW data. There is only one NPHD queue for VC0, since \nnon-posted request cannot  be mapped into VC1.  \n \n5.6.4  CPLH \n \nCPLH queue provides TLP header space for completion packets. Each header space takes twelve bytes to accommodate a 3-\nDW header . Please note that ther e are no 4 -DW completion headers . There are two CPLH queues for VC0 and VC1 \nrespectively.  \n \n5.6.5  CPLD \n \nCPLD queue is used for storing completion data. If the received TLP is of the completion type and is determined to have \npayload coming with the header, the pay load data would be put into CPLD queue. There are two CPLD queues for VC0 and \nVC1 respectively.  \n \n5.7  TRANSACTION O RDERING  \n \nWithin a VPPB, a set of ordering rules is defined to regulate the transactions  on the PCI Express Switch including Memory , \nIO, Configura tion and Messages, in order to avoid deadlocks and to support the Producer -Consumer model. The ordering \nrules defined in table 5 -9 apply within a single Traffic Class (TC). There is no ordering requirement among transactions \nwithin different TC labels . Sin ce the transactions with the same TC label are not allowed to map into different virtual \nchannels, it implies no ordering relationship between the traffic in VC0 and VC1.  \n \nTable 5-9 Summary of PCI Express Ord ering Rules  \nRow Pass  Column  Posted \nRequest   Read \nRequest  Non-posted Write \nRequest  Read \nCompletion  Non-posted Write \nCompletion  \nPosted Request  Yes/No1 Yes5 Yes5 Yes5 Yes5 \nRead Request  No2 Yes Yes Yes Yes \nNon-posted Write Request  No2 Yes Yes Yes Yes \nRead Completion  Yes/No3 Yes Yes Yes Yes \nNon-Posted Write \nCompletion  Yes4 Yes Yes Yes Yes \n \n1. When the Relaxed Ordering Attribute bit is cleared, the Posted Request transactions including memory write and message \nrequest must complete on the egress bus of VPPB  in the order in which they are received on the ingress bus  of VPPB . If the \nRelaxed Ordering Attribute bit is set, the Posted Request is permitted to pass over other Posted Requests occurring before it . \n 2.  A Read Request transmitting  in the same directio n as a previously queued Posted Re quest transaction must push the \nposted write data ahead of it. The Posted Request transaction must complete on the egress bus before the Read Request can \n \n \n \n \nPI7C9X2G 404SV  Page 24 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nbe attempted on the egress bus. The Read transaction can go to the s ame location as the Posted data.  Therefore,  if the Read \ntransaction were to pass the Posted transaction, it would return stale data.  \n \n3.  When the Relaxed Ordering Attribute bit is cleared, a Read completion must ‘‘pull’’ ahead of previously queued posted \ndata transmitting  in the same direction. In this case, the read data transmits  in the same direction as the posted data, and the \nrequestor of the read transaction is on the same side of the VPPB as the completer of the posted transaction. The posted transa ction must deliver to the completer before the read data is returned to the requestor. If the Relaxed Ordering Attribute \nbit is set, then a read completion is permitted to pass a previously queued Memory Write or Message Request.  \n \n4.  Non -Posted Write Com pletions are permitted to pass a previous Memory  Write or Message Request transaction. Such \ntransactions are actually transmitting in the opposite directions and hence have no ordering relationship.  \n \n5.  Posted Request  transactions must be given opportuniti es to pass Non -posted Read and Write Requests as well  as \nCompletions. Otherwise, deadlocks may occur when some older bridges, which  do not support delayed transactions are \nmixed with PCIe Switch in the same system. A fairness algorithm is used to arbitrate  between the Posted Write queue and the \nNon-posted transaction queue  \n \n5.8 PORT ARBITRATION \n \nAmong multiple ingress ports, the port arbitration built in the egress port determines which incoming packets to be forward ed \nto the output port. The arbitration algorithm contains hardware fixed Round Robin , 128-phase Weighted Round -Robin and \nprogrammable 128-phase time-based WRR. The port arbitration is held within the same VC channel. It means that each port \nhas two port arbitration circuitries for VC0 and VC1 respect ively. At the upstream ports, in addition to the inter -port packets , \nthe intra -port packet such as configurations  completion would also join the arbitration loop to get the service from  Virtual \nChannel 0.  \n5.9 VC ARBITRATION  \n \nAfter port arbitration, VC arbitration is executed among different VC channels within the same source. Three arbitration \nalgorithms are provided to choose the appropriate VC : Strict Priority, Round Robin or Weighted Round Robin.  \n \n5.10  FLOW CONTROL  \n \nPCI Express employs Credit -Based Flow Control  mechanism to make buffer utilization more efficient.  The transaction layer \ntransmitter ensures that it does not transmit a TLP to an opposite receiver unless the receiver has enough buffer space to \naccept the TLP. The transaction layer receiver has the re sponsibility  to advertise the free buffer space to an opposite \ntransmitter to avoid packet stale. In this Switch, each port has its own separate queues for different traffic types and the \ncredits are sent to data link layer  on the fly.  The data link layer  compares the current available credits with the monitored \nones and reports the updated credit to the counterpart. If no new credit is acquired, the credit reported is scheduled for every \n30 us to prevent the link from entering retrain. On the other hand, t he receiver at each egress port gets the usable credits from \nthe opposite end in a link. The output port broadcast s them to all the other ingress ports to get  packet transmission.   \n \n5.11 TRANSATION LAYER  TRANSMIT BLOCK (TLP E NCAPSULATION)  \n \nThe transmit portion  of transaction layer performs the following functions. They construct the all types of forwarded TLP \ngenerated from VC arbiter, respond with the completion packet s when the local resource (i.e. configuration register) is \naccessed , and regenerate the message that terminates  at receiver to RC if act ing as an upstream port.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 25 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n5.12 ACCESS  CONTROLS SERVICE  \n \nTraditionally, the packet routing between the peer -to-peer downstream ports is determined by either the address or ID field \nembedded in the packet header. ACS pr ovides a mechanism for customer to selectively control access between PCI Express \nEndpoints attached to the downstream ports of packet switch. If ACS is enabled in the ingress port, the peer -to-peer packet \nforwarding will follow the rule sets of ACS rather  than the destination ID or address. ACS is implemented as a set of \ncapabilities and control registers in the associated hardware component. It brings the following benefits such as preventing \nthe silent data corruption presented in Requests from being inc orrectly routed to a peer Endpoint, validating every Request \ntransaction between two downstream components and enabling direct routing of peer -to-peer Memory Requests whose \naddresses have been Translated when ATS system is being used.  \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 26 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n6 EEPROM  INTERFACE AND SYSTEM MANAGEMENT BUS  \n \nThe EEPROM interface consists of two pins: EECLK (EEPROM clock output) and EEPD (EEPROM bi -directional serial \ndata). The Switch may control an ISSI IS24C04  or compatible part s using into 512x8 bits. The EEPROM is used to initialize \na number of registers  before enumeration . This is accomplished after P ERST# is de -asserted, at which time the data from the \nEEPROM is loaded. The EEPROM interface is organized into a 16 -bit base, and the Switch supplies a 7 -bit EEPROM word \naddress. The Switch  does not control the EEPROM address input. It can only access the EEPROM with address input set to 0.  \n The System Management Bus interface consists  of two pins: SMBCLK (System Management Bus Clock input) and \nSMBDATA (System Management Bus Data input / output).  \n \n6.1 EEPROM  INTERFACE  \n6.1.1  AUTO  MODE  EERPOM ACCESS  \n The Switch may access the EEPROM in a WORD format by utilizing the auto mode  through a hardware sequencer. The \nEEPROM start -control, address, and read/write commands can be accessed through the configur ation register.  Before each \naccess, the software should check the Autoload Status bit before issuing the next start.  \n \n6.1.2  EEPROM M ODE  AT RESET  \n \nDuring a reset, the Switch will auto matically load the information/data from the EEPROM if the automatic load condi tion is \nmet. The first offset in the EEPROM contains a signature. If the signature is recognized, the autoload initiates  right after the \nreset.  \n \nDuring the autoload, the Bridge will read sequential words from the EEPROM and write to the appropriate registe rs.  Before \nthe Bridge registers can be accessed through the host, the autoload condition should be verified by reading bit  [3] offset D Ch \n(EEPROM Autoload Status). The host access is allowed only after the status of this bit is set to  \'0\' which indicates  that the \nautoload initialization sequence is complete.  \n \n6.1.3  EEPROM SPACE ADDRESS MAP  \n \n15 – 8 7 – 0 BYTE OFFSET  \nEEPROM Signature (1516h)  00h \nVendor ID  02h \nDevice ID  04h \nExtended VC Count / Link Capability  / Switch Mode Operation /  Interrupt pin for Port 1 ~ 3 06h \nSubsystem Vender ID  08h \nSubsystem ID  0Ah \nMax_Payload_Size Support / ASPM Support / Role_Base Error Reporting /  RefClk ppm  Difference  0Ch \nGlobal PHY TX Margin Parameter for Port 0~3 0Eh \nGlobal PHY Parameter 0 for Port 0~3 10h \nGlobal XPIP_CSR6[ 0] / Global PHY Parameter 1 for Port 0~3 12h \nGlobal XPIP_CSR6[4:1] / Global PHY Parameter 2/3 for Port 0~3 14h \nGlobal XPIP_CSR4[15:0] for Port 0~3 16h \n Global XPIP_CSR4[31:16] for Port 0~3 18h \nGlobal XPIP_CSR5[15:0] for Port 0~3 1Ah \nBuffer_ctrl[4:0] /  \n Globe XPIP_CSR6[7:5] for Port 0~3 Global XPIP_CSR5[23:16] for Port 0~3 1Ch \nMAC_CTR / Global PHY Parameter 3 for Port 0~3 1Eh \nNFTS / Deskew Mode Select / Scramble / XPIP_CSR2 for Port 0  20h \nNFTS / Deskew Mode Select / Scramble / XPIP_CSR2 for Port 1  22h \n \n \n \n \nPI7C9X2G 404SV  Page 27 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n15 – 8 7 – 0 BYTE OFFSET  \nNFTS / Deskew Mode Select / Scramble / XPIP_XSR2 for Port 2  24h \nNFTS / Deskew Mode Select / Scramble / XPIP_XSR2 for Port 3 26h \nLTSSM CSR  / PML1 Option for Port 0  28h \nLTSSM CSR  / PML1 Option for Port 1  2Ah \nLTSSM CSR  / PML1 Option for Port 2  2Ch \nLTSSM CSR / PML1 Option for Port 3  2Eh \n PHY Parameter2_0 for Port 0  30h \n PHY Parameter2_0 for Port 1  32h \n PHY Parameter2_0 for Port 2  34h \nPHY Parameter2_0 for Port 3  36h \nXPIP_CSR3[15:0] for Port 0  38h \nXPIP_CSR3[15:0] for Port 1  3Ah \nXPIP_CSR3[15:0] for Port 2  3Ch \nXPIP_CSR3[15:0] for Port 3  3Eh \nDo_change_rate_cnt/ XPIP_CSR_2 for Port 0  PHY Parameter 3 / PHY Parameter2_1 for Port 0  40h \nSel_deemp/ Do_change_rate_cnt/  \n XPIP_CSR_2 for Port 1  PHY Parameter 3 / PHY Parameter2_1 for Port 1  42h \nSel_deemp/ Do_ change_rate_cnt/   \nXPIP_CSR_2 for Port 2  PHY Parameter 3 / PHY Parameter2_1 for Port 2  44h \nSel_deemp/ Do_change_rate_cnt/   \nXPIP_CSR_2 for Port 3  PHY Parameter 3 / PHY Parameter2_1 for Port 3  46h \nXPIP_CSR3[16:31] for Port 0  48h \nXPIP_CSR3[16:31] for Port  1 4Ah \nXPIP_CSR3[16:31] for Port 2  4Ch \nXPIP_CSR3[16:31] for Port 3  4Eh \nPM Data for Port 0  PM Capability for Port 0  50h \nPM Data for Port 1  PM Capability for Port 1  52h \nPM Data for Port 2  PM Capability for Port 2  54h \nPM Data for Port 3  PM Capability fo r Port 3  56h \nMAC CSR for Port 0  58h \nMAC CSR for Port 1  5Ah \nMAC CSR for Port 2  5Ch \nMAC CSR for Port 3  5Eh \nTC/VC Map for Port 0 (VC0)  Slot Clock / LPVC Count / Port Num   \nfor Port 0  60h \nTC/VC Map for Port 1 (VC0)  Slot Implemented /  Slot Clock /  LPVC Co unt  / Port \nNum for Port 1  62h \nTC/VC Map for Port 2 (VC0)  Slot Implemented /  Slot Clock /  LPVC Count  / Port \nNum for Port 2  64h \nTC/VC Map for Port 3 (VC0)  Slot Implemented /  Slot Clock /  LPVC Count  / Port \nNum for Port 3  66h \nTL_CSR0/Clock PM Cap/L1PM Substrates Cap/TL_CSR1 for Port 0  68h \nTL_CSR0/Clock PM Cap/L1PM Substrates Cap/TL_CSR1 for Port 1  6Ah \nTL_CSR0/Clock PM Cap/L1PM Substrates Cap/TL_CSR1 for Port 2  6Ch \nTL_CSR0/Clock PM Cap/L1PM Substrates Cap/TL_CSR1 for Port 3  6Eh \nPower Budgeting Capabi lity Register for Port 0  70h  \nPower Budgeting Capability Register for Port 1  72h \nPower Budgeting Capability Register for Port 2  74h \nPower Budgeting Capability Register for Port 3 76h \nREV_TS_CTR/Replay Time -out Counter for Port 0  78h \nREV_TS_CTR /Replay  Time -out Counter for Port 1  7Ah \nREV_TS_CTR /Replay Time -out Counter for Port 2  7Ch \nREV_TS_CTR /Replay Time -out Counter for Port 3  7Eh \nXPIP_CSR5[30:24] for Port 0  PM Control Para/Rx Polarity for Port 0 80h  \nXPIP_CSR5[30:24] for Port 1  PM Control Para/R x Polarity for Port 1 82h \nXPIP_CSR5[30:24] for Port 2  PM Control Para/Rx Polarity for Port 2 84h \nXPIP_CSR5[30:24] for Port 3  PM Control Para/Rx Polarity for Port 3 86h \nAcknowledge Latency Timer for Port 0  88h \nAcknowledge Latency Timer for Port 1  8Ah \nAcknowledge Latency Timer for Port 2  8Ch \nAcknowledge Latency Timer for Port 3  8Eh \nReserved  90h \nSlot Capability 0 for Port 1  92h \nSlot Capability 0 for Port 2  94h \nSlot Capability 0 for Port 3 96h \n \n \n \n \nPI7C9X2G 404SV  Page 28 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n15 – 8 7 – 0 BYTE OFFSET  \nReserved   98h \nSlot Capability 1 for Port 1  9Ah \nSlot Cap ability 1 for Port 2  9Ch \nSlot Capability 1 for Port 3  9Eh \nVC1 MAX Time Slot / TC/VC Map for Port 0  A0h \nVC1 MAX Time Slot / TC/VC Map for Port 1  A2h \nVC1 MAX Time Slot / TC/VC Map for Port 2  A4h \nVC1 MAX Time Slot / TC/VC Map for Port 3 A6h \nReserved  A8h - FEh \n \n6.1.4  MAPPING  EEPROM C ONTENTS TO CONFIGURATION REGISTERS  \n \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n00h  EEPROM signature  1516h  \n02h 00h ~ 01h  Vendor ID  12D8h  \n04h 02h ~ 03h  Device ID  B404h  \n06h 144h (Port 0~3)  \n144h: Bit [0]  \n \n \nCCh (Port 0~3)  \nCCh: Bit [14:12]  \nCCh: Bit [17:15]  \n \n74h (Port 0~3)  \n74h: Bit [7]  \n74h: Bit [5]          \n74h: Bit [6]  \n74h: Bit [0]  \n74h: Bit [2:1]  \n74h: Bit [3]  \n74h: Bit [4]  \n \n \n 3Ch (Port 1~ 3) \n3Ch: Bit [8]  Extended VC Count for Port 0~3  \n\uf0a7 Bit [0]: It represents the supported VC co unt other \nthan the default VC  \n \nLink Capability for Port 0~3  \n\uf0a7 Bit [3:1]: It represents L0s Exit Latency for all ports  \n\uf0a7 Bit [6:4]: It represents L1 Exit Latency for all ports  \n \nSwitch Mode Operation for Port 0  \n\uf0a7 Bit [7]: Non-Post TLP Sotre -Forward  \n\uf0a7 Bit [8]: no ord ering on packets for different egress \nport  mode  \n\uf0a7 Bit [9]: no ordering on different tag of completion   \nmode  \n\uf0a7 Bit [10]: Store and Forward  \n\uf0a7 Bit [12:11]: Cut -through Threshold  \n\uf0a7 Bit [13] : Port arbitrator Mode  \n\uf0a7 Bit [14]: Credit Update Mode  \n \nInterrupt pin for Port 1 ~3 \n\uf0a7 Bit [15]: Set when INTA is requested for interrupt \nresource  0806h  \n \nbit[0]: HWInit  \n08h B4h ~ B5h  Subsystem Vender ID  0000h  \n0Ah B6h ~ B7h  Subsystem ID  0000h  \n0Ch C4h (Port 0~3)  \nC4h: Bit [1:0]  \n \n \nCCh  (Port 0~3)  \nCCh: Bit [11:10]  \n \n \nC4h (Port 0~3)  \nC4h: Bit  [15] \n \n \n70h (Port 0~3) \n70h: Bit [14]  \n 74h (Port 0~3) \n74h: Bit [15]  \n \n70h (Port 0~3) \n70h: Bit [13]  \n \n8Ch (Port 0~3)  \n8Ch: Bit [5]  \n \n Max_Payload_Size  Support for Port 0~3  \n\uf0a7 Bit [1:0]: Indicated  the maximum payload size that the device can support for the TLP  \n ASPM Support for Port 0~3  \n\uf0a7 Bit [3:2] : Indicate the  level of ASPM supported on \nthe PCIe link  \n Role_Base Error Reporting for Port 0~3  \n\uf0a7 Bit [4] : Indicate implement the role- base error \nreporting  \n MSI Capability Disable for Port 0~3  \n\uf0a7 Bit [5] : Disable MSI capability  \n \nCompliance Pattern Parity Control Disable f or Port 0~3  \n\uf0a7 Bit [6] : Disable compliance pattern parity  \n \nPower Management Capability Disable for Port 0~3  \n\uf0a7 Bit [7] : Disable Power Management Capability  \n \nORDER RULE5 Enable for port 0~3  \n\uf0a7 Bit [8]:  Capability for Post packet Pass Non -Post \npacket   \n 001Dh  \n \nbit[1:0]: HWInit  \n \n \n \n \nPI7C9X2G 404SV  Page 29 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \nCCh  (Port 1~ 3) \nCCh: Bit [21]  \n \n \n8Ch (Port 0~3)  \n8Ch: Bit [6]  \n \n8Ch (Port 0~3)  \n8Ch: Bit [0]  \n \nCCh  (Port 0~3) \nCCh: Bit [19]  \n \n8Ch (Port  0~3) \n \n8Ch: Bit [1]  \n \nE4h (Port 0~3)  \nE4h: Bit [12]  \n \n8Ch (Port 0~3)  \n8Ch: Bit [3]  Link Bandw idth Notification Capability for port 1~ 3 \n\uf0a7 Bit [9]:  Link Bandwidth Notification \nCapability     \n \nOrdering Frozen for Port 0~3  \n\uf0a7 Bit [10]: Freeze the ordering feature \n \nTX  SOF L atency Mode for Port 0~3  \n\uf0a7 Bit [11]:  Set to zero to shorten latency \n \nSurprise Down Capability Enable for Port 0~3  \n\uf0a7 Bit [12]:  Enable Surprise Down Capability  \n \nPower Management’s Data S elect Register R/W Capability \nfor Port 0~3  \n\uf0a7 Bit [13]:  Enable Data Select Register R/W  \n \nLTR Capability Enable  for Port 0~3  \n\uf0a7 Bit [14]:  LTR capability enable  \n \n4KB Boundary Check Enable for Port 0~3  \n\uf0a7 Bit [15]:  Enable 4KB Boundary Check  \n0Eh 94h (Port 0 ~ 3) \n94h: Bit [4:0]  \n94h: Bit [9:5]  \n94h: Bit [14:10]  \n \nE4h (Port 0~3)  \nE4h: Bit [18]  PHY TX Margin Parameter for Port 0~3  \n\uf0a7 Bit [4:0]: C_DRV_LVL_ 3P5_MGN2  \n\uf0a7 Bit [9:5]: C_DRV_LVL_6P0_MGN2  \n\uf0a7 Bit [14:10]: C_DRV_LVL_HALF_MGN2  \n OBFF Capability Enable for Port 0~3 \n\uf0a7 Bit [15] : enable OBFF capability  916Bh  \n10h 74h (Port 0~ 3)  \n74h: Bit [20:16]  \n74h: Bit [25:21]  \n74h: Bit [30:26]  \n 8Ch (Port 0~3)  \n8Ch: Bit [31]  PHY P arameter 0 for Port 0~3  \n\uf0a7 Bit [4:0]: C_DRV_LVL_3P5_NOM  \n\uf0a7 Bit [9:5]: C_DRV_LVL_6P0_NOM  \n\uf0a7 Bit [14:10]: C_DRV_LVL_HALF_NOM  \n TL_CSR 0[31] for Port 0~3  \n\uf0a7 Bit [15] :  P35_GEN2_MODE  0A73h  \n12h 78h (Port 0~ 3) \n78h: Bit [20:16]  \n78h: Bit [25:21]  \n78h: Bit [30:26]  \n \n8Ch (Port 0~ 3) \n8Ch: Bit [16]  PHY Parameter 1 for Port 0~3  \n\uf0a7 Bit [4:0]: C_EMP_POST_GEN1_3P5_NOM  \n\uf0a7 Bit [9:5]: C_EMP_POST_GEN2_3P5_NOM  \n\uf0a7 Bit [14:10]: C_EMP_POST_GEN2_6P0_NOM  \n XPIP_CSR6[0] for Port 0~3  \n\uf0a7 Bit [15]: XPIP_CSR6[0]  F6B5h  \n14h 7Ch (Port 0~ 3) \n7Ch: Bit [3:0]  \n7Ch: Bit [6: 4]  \n \n90h (Port  0~3) \n90h: Bit [19:15]  \n 8Ch (Port (0~3) \n8Ch: Bit [20:17]  PHY Parameter 2 for Port 0~3  \n\uf0a7 Bit [3:0]: C_TX_PHY_LATENCY  \n\uf0a7 Bit [6:4]: C_REC_DETECT_USEC  \n \nPHY Parameter 3 for Port 0~3  \n\uf0a7 Bit [11:7]: C_EMP_POST_HALF_DELTA  \n \nXPIP_CSR6[4:1] for Port 0~3  \n\uf0a7 Bit [1 5:12]: XPIP_CSR6[4:1]  C0A7h  \n16h 84h (Port 0~ 3) \n84h: Bit [15:0]  XPIP_CSR4[15:0] for Port 0~3  \n\uf0a7 Bit [15:0]: XPIP_CSR4[15:0]  0000h  \n18h 84h (Port 0~ 3) \n84h: Bit [31:16]  XPIP_CSR4[31:16] for Port 0~3  \n\uf0a7 Bit [15:0]: XPIP_CSR4[31:16]  0000h  \n1A 88h (Port 0~ 3) \n88h: Bit  [15:0]  XPIP_CSR5[15:0] for Port 0~3  \nBit [15:0]: XPIP_CSR5[15:0]  3333h  \n1C 88h (Port 0~ 3) \n88h: Bit [23:16]  \n \n8Ch (Port 0~ 3) \n8Ch: Bit [23:21]  \n \n98h (Port 0~ 3) \n98h: Bit [20:16]  XPIP_CSR5[28:16] for Port 0~3  \n\uf0a7 Bit [7:0]: XPIP_CSR5[23:16]  \n \nXPIP_CSR6[7:5] for Port  0~3 \n\uf0a7 Bit [10:8]: XPIP_CSR6[7:5]  \n \nBUFFER_CTRL[4:0] for Port  0~3 \n\uf0a7 Bit [15:11]: Reference clock Buffer control  7B08h  \n1E 90h (Port 0~ 3) \n90h: Bit [21:20]  PHY parameter 3 for Port 0~3  \n\uf0a7 Bit [1:0]: C_DRV_LVL_3P5_DELTA  0000h  \n \n \n \n \nPI7C9X2G 404SV  Page 30 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n90h: Bit [23:22]  \n90h: Bit [25:24]  \n90h: Bit [27:26]  \n90h: Bit [29:28]  \n90h: Bit [31:30]  \n \n8Ch (Port 0~3)  \n8Ch: Bit [29:26]  \uf0a7 Bit [3:2]: C_DRV_LVL_6P0_DELTA  \n\uf0a7 Bit [5:4]: C_DRV_LVL_HALF_DELTA  \n\uf0a7 Bit [7:6]: C_EMP_POST_GEN1_3P5_DELTA  \n\uf0a7 Bit [9:8]: C_EMP_POST_GEN2_3P5_DELTA  \n\uf0a7 Bit [11:10]: C_EMP_POST_GEN2_6P0_DELTA  \n MAC con trol parameter for Port 0~3  \n\uf0a7 Bit [15:12]:  MAC_CTR  \n20h 78h (Port 0)  \n78h: Bit [7  :0] \n 68h (Port 0) \n68h: Bit [14:13]  \n 78h (Port 0)  \n78h: Bit [9:8]  \n78h: Bit [10]  \n \n78h (Port 0)  \n78h: Bit [13:12]  \n \n78h (Port 0)  \n78h: Bit [14]  FTS Number for Port 0  \n\uf0a7 Bit [7:0]: FTS number at receiver side  \n \nDeskew Mode Select  for Port 0  \n\uf0a7 Bit [9:8]: deskew mode select  \n Scrambler Control for Port 0  \n\uf0a7 Bit [11:10]: scrambler control  \n\uf0a7 Bit [12]: L0s  \n \nChange_Speed_Sel for Port 0  \n\uf0a7 Bit [14:13]: Change Speed select  \n \nChange_Speed_En for Port 0  \n\uf0a7 Bit [15]: Change Speed enable  0080h  \n22h 78h (Port 1)  \n78h: Bit [7  :0] \n 68h (Port 1) \n68h: Bit [14:13]  \n \n78h (Port 1)  \n78h: Bit [9:8]  \n78h: Bit [10]  \n \n78h (Port 1)  \n78h: Bit [13:12]  \n \n78h (Port 1)  \n78h: Bit  [14]  FTS Number for Port 1  \n\uf0a7 Bit [7:0]: FTS number at receiv er side  \n \nDeskew Mode Select  for Port 1  \n\uf0a7 Bit [9:8]:  deskew mode select  \n \nScrambler Control for Port 1  \n\uf0a7 Bit [11:10]: scrambler control  \n\uf0a7 Bit [12]: L0s  \n Change_Speed_Sel for Port 1  \n\uf0a7 Bit[ 14:13]: Change Speed select  \n \nChange_Speed_En for Port 1  \n\uf0a7 Bit [15]: Change Spee d enable  0080h  \n24h 78h (Port 2)  \n78h: Bit [7  :0] \n \n68h (Port 2) \n68h: Bit [14:13]  \n \n78h (Port 2)  \n78h: Bit [9:8]  \n78h: Bit [10]  \n \n78h (Port 2)  \n78h: Bit [13:12]  \n \n78h (Port 2)  \n78h: Bit [14]  FTS Number for Port 2  \n\uf0a7 Bit [7:0]: FTS number at receiver side  \n \nDeskew Mode Select  for Port 2  \n\uf0a7 Bit [9:8]: deskew mode select  \n \nScrambler Control for Port 2  \n\uf0a7 Bit [11:10]: scrambler control  \n\uf0a7 Bit [12]: L0s  \n \nChange_Speed_Sel for Port 2  \n\uf0a7 Bit [14:13]: Change Speed select  \n \nChange_Speed_En for Port 2  \n\uf0a7 Bit [15]: Change Speed enable  0080h  \n26h 78h (Port 3) \n78h: Bit [7  :0] \n \n68h (Port 3) \n68h: Bit [14:13]  \n 78h (Port 3) \n78h: Bit [9:8]  \n78h: Bit [10]  \n \n78h (Port 3) \n78h: Bit [13:12]  \n \n78h (Port 3) \n78h: Bit [14]  FTS Number for Port 3 \n\uf0a7 Bit [7:0]: FTS number at receiver side  \n \nDeskew Mode Select  for Port 3  \n\uf0a7 Bit [9:8]: deskew mode select  \n Scrambler Control for Port 3 \n\uf0a7 Bit [11:10]: scrambler control  \n\uf0a7 Bit [12]: L0s  \n \nChange_Speed_Sel for Port 3  \n\uf0a7 Bit [14:13]: Change Speed select  \n \nChange_Speed_En for Port 3 \n\uf0a7 Bit [15]: Change Speed enable  0080h  \n \n \n \n \nPI7C9X2G 404SV  Page 31 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n28h 33Ch (Port 0)  \n33Ch: Bit [7 :0] \n \n98h (Port 0)  \n98h: Bit [24]  \n98h: Bit [25]  \n98h: Bit [27:26]  LTSSM CSR  for Port 0  \n\uf0a7 Bit [7:0]: LTSSM CSR  \n \nPML1 Option for Port 0  \n\uf0a7 Bit [12]: pml1 option all  \n\uf0a7 Bit [13]: pml1 disable  \n\uf0a7 Bit [15:14]: clock request control  0004h  \n2Ah 33Ch (Port 1 ) \n33Ch: Bit [7  :0] \n \n98h (Port  1) \n98h: Bit [24]  \n98h: Bit [25]  \n98h: Bit [27:26]  LTSSM CSR  for Port 1  \n\uf0a7 Bit [7:0]: LTSSM CSR  \n \nPML1 Option for Port 1  \n\uf0a7 Bit [12]: pml1 option all  \n\uf0a7 Bit [13]: pml1 disable  \n\uf0a7 Bit [15:14]: clock request control  0004h  \n2Ch 33Ch (Port 2 ) \n33Ch: Bit [7  :0] \n \n98h (Port  2) \n98h: Bit [24]  \n98h: Bit [25]  \n98h: Bit [27:26]  LTSSM CSR  for Port 2  \n\uf0a7 Bit [7:0]: LTSSM CSR  \n \nPML1 Option for Port 2  \n\uf0a7 Bit [12]: pml1 option all  \n\uf0a7 Bit [13]: pml1 disable  \n\uf0a7 Bit [15:14]: clock request control  0004h  \n2Eh 33Ch (Port 3 ) \n33Ch: Bit [7  :0] \n \n98h (Port  3) \n98h: Bit [24]  \n98h: Bit [25]  \n98h: Bit [27:26]  LTSSM CSR  for Port 3  \n\uf0a7 Bit [7:0]: LTSSM CSR  \n \nPML1 Option for Port 3  \n\uf0a7 Bit [12]: pml1 option all  \n\uf0a7 Bit [13]: pml1 disable  \n\uf0a7 Bit [15:14]: clock request control  0004h  \n30h 7Ch (Port 0)  \n7Ch: Bit [30  :16]  PHY Para meter2_1 for Port 0  \n\uf0a7 Bit [14:0]: PHY parameter 2  0010h  \n32h 7Ch (Port 1 ) \n7Ch: Bit [30  :16]  PHY Parameter2_1 for Port 1  \n\uf0a7 Bit [14:0]: PHY parameter 2  0010h  \n34h 7Ch (Port 2 ) \n7Ch: Bit [30  :16]  PHY Parameter2_1 for Port 2  \n\uf0a7 Bit [14:0]: PHY parameter 2  0010h  \n36h 7Ch (Port 3 ) \n7Ch: Bit [30  :16]  PHY Parameter2_1 for Port 3  \n\uf0a7 Bit [14:0]: PHY parameter 2  0010h  \n38h 80h (Port 0)  \n80h: Bit [15  :0]  XPIP_CSR3_0  for Port 0  \n\uf0a7 Bit [15 :0]: XPIP_CSR3[15:0]  0000h  \n3Ah 80h (Port 1 ) \n80h: Bit [15  :0] XPIP_CSR3_0 for Port 1  \n\uf0a7 Bit [15:0]: XPIP_CSR3[15:0]  0000h  \n3Ch 80h (Port 2 ) \n80h: Bit [15  :0] XPIP_CSR3_0 for Port 2  \n\uf0a7 Bit [15 :0]: XPIP_CSR3[15:0]  0000h  \n3Eh 80h (Port 3 ) \n80h: Bit [15  :0] XPIP_CSR3_0 for Port 3  \n\uf0a7 Bit [15 :0]: XPIP_CSR3[15:0]  0000h  \n40h 7Ch (Port 0)  \n7Ch: Bit [12  :8] \n \n90h (Port 0)  \n90h: Bit [6  :0] \nF0h (Port 0)  \nF0h: Bit [6]  \n \n78h (Port 0)  \n78h: Bit [11]  \n 8Ch (Port 0)  \n8Ch: Bit [9:8]  PHY Parameter 2_ 0 for Port 0  \n\uf0a7 Bit [4:0]: PHY parameter 2  \n \nPHY Parameter 3 for Port 0  \n\uf0a7 Bit [11:5]: PHY parameter 3  \nSelectable De- emphasis for Port 0  \n\uf0a7 Bit [12]: Selectable De- emphasis  \n \nCompliance to Detect for Port 0  \n\uf0a7 Bit [13]: compliance to detect  \n DO_CHG_DATA_CNT_SEL for Port 0  \n\uf0a7 Bit [15:14]: DO_CHG_DATA_CNT_SEL  001Dh  \n42h 7Ch (Port 1)  \n7Ch: Bit [12  :8] \n 90h (Port 1)  \n90h: Bit [6  :0] \n \nF0h (Port 1) \nF0h: Bit [6]  \n \n78h ( Port 1)  \n78h: Bit [11]  PHY Parameter 2_ 0 for Port 1  \n\uf0a7 Bit [4:0]: PHY parameter 2  \n \nPHY Parameter 3 for Port 1  \n\uf0a7 Bit [11:5]: PHY parameter 3  \n \nSelectable De- emphasis for Port 1  \n\uf0a7 Bit [12]: Selectable De -emphasis  \n \nCompliance to Detect for  Port 1 \n\uf0a7 Bit [13]: compliance to detect  101Dh  \n \n \n \n \nPI7C9X2G 404SV  Page 32 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n \n8Ch (Port 1)  \n8Ch: Bit [9:8]   \nDO_CHG_DATA_CNT_SEL for Port 1  \n\uf0a7 Bit [15:14]: DO_CHG_DATA_CNT_SEL  \n44h 7Ch (Port 2)  \n7Ch: Bit [12  :8] \n \n90h (Port 2)  \n90h: Bit [6  :0] \n F0h (Port 2)  \nF0h: Bit [6]  \n \n78h (Port 2)  \n78h: Bit [11]  \n \n8Ch (Port 2)  \n8Ch: Bit [9: 8] PHY Parameter 2_ 0 for Port 2  \n\uf0a7 Bit [4:0]: PHY parameter 2  \n PHY Parameter 3 for Port 2  \n\uf0a7 Bit [11:5]: PHY parameter 3  \n \nSelectable De- emphasis for Port 2  \n\uf0a7 Bit [12]: Selectable De -emphasis  \n \nCompliance to Detect for Port 2  \n\uf0a7 Bit [13]: compliance to detect  \n \nDO_CHG_D ATA_CNT_SEL for Port 2  \n\uf0a7 Bit [15:14]: DO_CHG_DATA_CNT_SEL  101Dh  \n46h 7Ch (Port 3) \n7Ch: Bit [12  :8] \n \n90h (Port 3) \n90h: Bit [6  :0] \n \nF0h (Port 3) \nF0h: Bit [6]  \n \n78h (Port 3) \n78h: Bit [11]  \n \n8Ch (Port 3) \n8Ch: Bit [9:8]  PHY Parameter 2_ 0 for Port 3 \n\uf0a7 Bit [4:0]: PHY p arameter 2  \n \nPHY Parameter 3 for Port 3  \n\uf0a7 Bit [11:5]: PHY parameter 3  \n Selectable De- emphasis for Port 3 \n\uf0a7 Bit [12]: Selectable De -emphasis  \n \nCompliance to Detect for Port 3 \n\uf0a7 Bit [13]: compliance to detect  \n \nDO_CHG_DATA_CNT_SEL for Port 3  \n\uf0a7 Bit [15:14]: DO_CHG_DATA_ CNT_SEL  101Dh  \n48h 80h (Port 0 ) \n80h: Bit [31  :16] XPIP_CSR3_1 for Port 0  \n\uf0a7 Bit [15 :0]: XPIP_CSR3[31:16]  000Fh  \n4Ah 80h (Port 1 ) \n80h: Bit [31  :16] XPIP_CSR3_1 for Port 1  \n\uf0a7 Bit [15 :0]: XPIP_CSR3[31:16]  000Fh  \n4Ch 80h (Port 2 ) \n80h: Bit [31  :16] XPIP_CSR3_1 for Po rt 2 \n\uf0a7 Bit [15 :0]: XPIP_CSR3[31:16]  000Fh  \n4Eh 80h (Port 3 ) \n80h: Bit [31  :16] XPIP_CSR3_1 for Port 3  \n\uf0a7 Bit [15 :0]: XPIP_CSR3[31:16]  000Fh  \n50h \n 44h (Port 0)  \n44h: Bit [3]  \n \n40h (Port 0)  \n40h: Bit [24:22]  \n40h: Bit [25]  \n \n40h: Bit [26]  \n \n40h: Bit [29:28]  No_Soft_Rese t for Port 0  \n\uf0a7 Bit [0]: No_Soft_Reset.  \n \nPower Management Capability for Port 0  \n\uf0a7 Bit [3:1]: AUX Current.  \n\uf0a7 Bit [4]: r ead only as 1 to indicate Bridge supports the \nD1 power management state \n\uf0a7 Bit [5]: r ead only as 1 to indicate Bridge supports the \nD2 power management state  \n\uf0a7 Bit [7:6]: PME Support for D2 and D1 states  FFh \n44h (Port 0)  \n44h: Bit [31:24]  Power Management Data for Port 0  \n\uf0a7 Bit [15:8]: read only as Data register  00h \n52h \n 44h (Port 1)  \n44h: Bit [3]  \n 40h (Port 1)  \n40h: Bit [24:22]  \n40h: Bit [25]  \n \n40h: Bit [26]  \n \n40h: Bit [29:28]  No_Soft_Reset for Port 1  \n\uf0a7 Bit [0]: No_Soft_Reset.  \n \nPower Management Capability for Port 1  \n\uf0a7 Bit [3:1]: AUX Current.  \n\uf0a7 Bit [4]: r ead only as 1 to indicate Bridge supports the \nD1 power management state \n\uf0a7 Bit [5]: r ead only as 1 to indicate Bridge  supports the \nD2 power management state \n\uf0a7 Bit [7:6]: PME Support for D2 and D1 states  FFh \n44h (Port 1)  \n44h: Bit [31:24]  Power Management Data for Port 1  \n\uf0a7 Bit [15:8]:  read only as Data register  00h \n \n \n \n \nPI7C9X2G 404SV  Page 33 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n54h \n 44h (Port 2)  \n44h: Bit [3]  \n \n40h (Port 2)  \n40h: Bit [24: 22] \n40h: Bit [25]  \n \n40h: Bit [26]  \n \n40h: Bit [29:28]  No_Soft_Reset for Port 2  \n\uf0a7 Bit [0]: No_Soft_Reset  \n \nPower Management Capability for Port 2  \n\uf0a7 Bit [3:1]: AUX Current \n\uf0a7 Bit [4]: r ead only as 1 to indicate Bridge supports the \nD1 power management state \n\uf0a7 Bit [5]: r ead only as 1 to indicate Bridge supports the \nD2 power management state \n\uf0a7 Bit [7:6]: PME Support for D2 and D1 states  FFh \n44h (Port 2)  \n44h: Bit [31:24]  Power Management Data for Port 2  \n\uf0a7 Bit [15:8]: read only as Data register  00h \n56h 44h (Port 3) \n44h: Bit [3]  \n 40h (Port 3) \n40h: Bit [24:22]  \n40h: Bit [25]  \n \n40h: Bit [26]  \n \n40h: Bit [29:28]  No_Soft_Reset for Port 3 \n\uf0a7 Bit [0]: No_Soft_Reset  \n \nPower Management Capability for Port 3  \n\uf0a7 Bit [3:1]: AUX Current \n\uf0a7 Bit [4]: r ead only as 1 to indicate Bridge supports the \nD1 power m anagement state \n\uf0a7 Bit [5]: r ead only as 1 to indicate Bridge supports the \nD2 power management state \n\uf0a7 Bit [7:6]: PME Support for D2 and D1 states  FFh \n44h (Port 3) \n44h: Bit [31:24]  Power Management Data for Port 3 \n\uf0a7 Bit [15:8]: read only as Data register  00h \n58h 340h (Port 0 ) \n340h: Bit [15  :0] MAC_CSR for Port 0  \n\uf0a7 Bit [15 :0]: MAC CSR  0004h  \n5Ah 340h (Port 1 ) \n340h: Bit [15  :0] MAC_CSR for Port 1  \n\uf0a7 Bit [15:0]: MAC CSR  0004h  \n5Ch 340h (Port 2 ) \n340h: Bit [15  :0] MAC_CSR for Port 2  \n\uf0a7 Bit [15 :0]: MAC CSR  0004h  \n5Eh 340h (P ort 3 ) \n340h: Bit [15  :0] MAC_CSR for Port 3  \n\uf0a7 Bit [15 :0]: MAC CSR  0004h  \n60h D0h (Port 0)  \nD0h: Bit [28]  \n  \n40h (Port 0)  \n40h: Bit[21]  \n 144h (Port 0)  \n144h: Bit [4]  \n \n \nCCh (Port 0)  \nCCh: Bit [26:24]  Slot Clock Configuration for Port 0  \n\uf0a7 Bit [1]: When set, the compo nent uses the clock \nprovided on the connector  \n \nDevice specific Initialization for Port 0  \n\uf0a7 Bit [2]: When set, the DSI is required  \n  \nLPVC Count for Port 0  \n\uf0a7 Bit [3]: When set, the VC1 is allocated to LPVC of Egress Port 0  \n  \nPort Number for Port 0  \n\uf0a7 Bit [6:4]: It represents the logic port numbering for \nphysical port 0  02h \n \nbit[1]: HWInit  \n154h (Port 0)  \n154h: Bit [7:1]  VC0 TC/VC Map for Port  0  \n\uf0a7 Bit [15:9]: When set, it indicates the corresponding \nTC is mapped into VC0  FEh \n62h C0h (Port 1)  \nC0h: Bit [24]  \n \nD0h (Port  1) \nD0h: Bit [28]  \n \n \n40h (Port 1)  \n40h: Bit [21]  \n 144h (Port 1)  \n144h: Bit [4]  \n \n \nCCh (Port 1)  \nCCh: Bit [26:24]  PCIe Capability Slot Implemented for Port 1  \n\uf0a7 Bit [0]: When set, the slot is implemented for Port 1  \n \nSlot Clock Configuration for Port 1  \n\uf0a7 Bit [1]: When  set, the component uses the clock \nprovided on the c onnector  \n \nDevice specific Initialization for Port 1  \n\uf0a7 Bit [2]: When set, the DSI is required  \n \nLPVC Count for Port 1  \n\uf0a7 Bit [3]: When set, the VC1 is allocated to LPVC of \nEgress Port 1  \n  \nPort Number for Port 1  \n\uf0a7 Bit [6:4]: It represents the logic port numbering for \nphysical port 1  12h \n \nbit[0]: HWInit  \nbit[1]: HWInit  \n \n \n \n \nPI7C9X2G 404SV  Page 34 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n154h (Port 1)  \n154h: Bit [7:1]  VC0 TC/VC Map for Port 1  \n\uf0a7 Bit [15:9]: When set, it indicates the corresponding \nTC is mapped into VC0  FEh \n64h C0h (Port  2) \nC0h: Bit [24]  \n \nD0h (Port 2)  \nD0h: Bit [28]  \n \n \n40h (Port 2)  \n40h: Bit [21]  \n \n144h (Port 2)  \n144h: Bit [4]  \n \n \nCCh (Port 2)  \nCCh: Bit [26:24]  PCIe Capability Slot Implemented for Port 2  \n\uf0a7 Bit [0]: When set, the slot is implemented for Port 2  \n \nSlot Clock Configurat ion for Port 2  \n\uf0a7 Bit [1]: When set, the component uses the clock \nprovided on the c onnector  \n \nDevice specific Initialization for Port 2  \n\uf0a7 Bit [2]: When set, the DSI is required  \n \nLPVC Count for Port 2  \n\uf0a7 Bit [3]: When set, the VC1 is allocated to LPVC of \nEgress Port  2 \n  \nPort Number for Port 2  \n\uf0a7 Bit [6:4]: It represents the logic port numbering for \nphysical port 2  22h \n \nbit[0]: HWInit  \nbit[1]: HWInit  \n154h (Port 2)  \n154h: Bit [7:1]  VC0 TC/VC Map for Port 2  \n\uf0a7 Bit [15:9]: When set, it indicates the corresponding \nTC is mapped  into VC0  FEh \n66h C0h (Port 3) \nC0h: Bit [24]  \n \nD0h (Port 3) \nD0h: Bit [28]  \n  \n40h (Port 3) \n40h: Bit [21]  \n \n144h (Port 3 ) \n144h: Bit [4]  \n \n \nCCh (Port 3) \nCCh: Bit [26:24]  PCIe Capability Slot Implemented for Port 3 \n\uf0a7 Bit [0]: When set, the slot is implemented for P ort 2 \n \nSlot Clock Configuration for Port 3 \n\uf0a7 Bit [1]: When set, the component uses the clock \nprovided on the c onnector  \n \nDevice specific Initialization for Port 3  \n\uf0a7 Bit [2]: When set, the DSI is required  \n \nLPVC Count for Port 3 \n\uf0a7 Bit [3]: When set, the VC1 is allo cated to LPVC of \nEgress Port 2  \n  \nPort Number for Port 3 \n\uf0a7 Bit [6:4]: It represents the logic port numbering for \nphysical port 2  32h \n \nbit[0]: HWInit  \nbit[1]: HWInit  \n154h (Port 3) \n154h: Bit [7:1]  VC0 TC/VC Map for Port 3 \n\uf0a7 Bit [15:9]: When set, it indicates th e corresponding \nTC is mapped into VC0  FEh \n68h 8Ch (Port 0)  \n8Ch: Bit[10]  \n8Ch: Bit[11]  \n CCh (Port 0)  \nCCh: Bit [18]  \n \n244h (Port 0)  \n244h: Bit [1]  \n244h: Bit[3]  \n244h: Bit[4]  \n \n344h (Port 0)  \n344h: Bit [0]  \n344h: Bit [1]  TL_CSR 0 Register for Port 0  \n\uf0a7 Bit [0]: Port D isable  \n\uf0a7 Bit [1]: Reset_p_sel  \n \nClock PM Cap for Port 0  \n\uf0a7 Bit [2]: clock pm cap.  \n \nL1PM Substrates Capability Register for Port 0  \n\uf0a7 Bit [4]: pci_pm_l11_sup  \n\uf0a7 Bit [5]: aspm_pm_l11_sup  \n\uf0a7 Bit[6]: l1pm_subs_sup  \n \nTL_CSR 1 Register for Port 0  \n\uf0a7 Bit [8]: ARB_VC_MODE  \n\uf0a7 Bit [9]: GN T_FAIL_MODE  0376h  \n6Ah 8Ch (Port 1) \n8Ch: Bit[10]  \n8Ch: Bit[11]  \n \nCCh (Port 1 ) \nCCh: Bit [18]  \n 244h (Port 1 ) \n244h: Bit [1]  \n244h: Bit[3]  TL_CSR0  Register for Por t 1 \n\uf0a7 Bit [0]: Port Disable  \n\uf0a7 Bit [1]: Reset_p_ sel \n \nClock PM Cap for Port 1  \n\uf0a7 Bit [2]: clock pm cap.  \n \nL1PM Substrate s Capability Register for Port 1  \n\uf0a7 Bit [4]: pci_pm_l11_sup  \n\uf0a7 Bit [5]: aspm_pm_l11_sup  0370h  \n \n \n \n \nPI7C9X2G 404SV  Page 35 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n244h: Bit[4]  \n \n344h (Port 1 ) \n344h: Bit [0]  \n344h: Bit [1]  \uf0a7 Bit[6]: l1pm_subs_sup  \n \nTL_CSR1 Register for Port 1  \n\uf0a7 Bit [8]: ARB_VC_MODE  \n\uf0a7 Bit [9]: GNT_FAIL_MODE  \n6Ch 8Ch (Port 2 ) \n8Ch: Bit[10]  \n8Ch: Bit[11]  \n \nCCh (Port 2 ) \nCCh: Bit [18]  \n \n244h (Port 2 ) \n244h: Bit [1]  \n244h: Bit[3]  \n244h: Bit[4]  \n \n344h (Port 2 ) \n344h: Bit [0]  \n344h: Bit [1]  TL_CSR0  Register for Por t 2 \n\uf0a7 Bit [0]: Port Disable  \n\uf0a7 Bit [1]: Reset_p_sel  \n \nClock PM Cap for Po rt 2 \n\uf0a7 Bit [2]: clock pm cap.  \n \nL1PM Substrate s Capability Register for Port 2  \n\uf0a7 Bit [4]: pci_pm_l11_sup  \n\uf0a7 Bit [5]: aspm_pm_l11_sup  \n\uf0a7 Bit[6]: l1pm_subs_sup  \n \nTL_CSR1 Register for Port 2  \n\uf0a7 Bit [8]: ARB_VC_MODE  \n\uf0a7 Bit [9]: GNT_FAIL_MODE  0370h  \n6Eh 8Ch (Port 3 ) \n8Ch: Bit[10]  \n8Ch: Bit[11]  \n \nCCh (Port 3 ) \nCCh: Bit [18]  \n 244h (Port 3 ) \n244h: Bit [1]  \n244h: Bit[3]  \n244h: Bit[4]  \n 344h (Port 3 ) \n344h: Bit [0]  \n344h: Bit [1]  TL_CSR0  Register for Por t 3 \n\uf0a7 Bit [0]: Port Disable  \n\uf0a7 Bit [1]: Reset_p_sel  \n \nClock PM Cap for Port 3  \n\uf0a7 Bit [2]: clock pm c ap. \n \nL1PM Substrate s Capability Register for Port 3  \n\uf0a7 Bit [4]: pci_pm_l11_sup  \n\uf0a7 Bit [5]: aspm_pm_l11_sup  \n\uf0a7 Bit[6]: l1pm_subs_sup  \n \nTL_CSR1 Register for Port 3  \n\uf0a7 Bit [8]: ARB_VC_MODE  \n\uf0a7 Bit [9]: GNT_FAIL_MODE  0370h  \n70h 214h (Port 0)  \n214h: Bit [7:0]  \n214h: Bit [9:8]  \n214h: Bit [14:13]  \n218h: Bit [0]  Power Budget Register for Port 0  \n\uf0a7 Bit [7:0]: Base Power  \n\uf0a7 Bit [9:8]: Data Scale  \n\uf0a7 Bit [11:10]: PM State  \n\uf0a7 Bit [15]: System Allocated  0004h  \n72h 214h (Port 1)  \n214h: Bit [7:0]  \n214h: Bit [9:8]  \n214h: Bit [14:13]  \n218h: Bit [0]  Power Budg et Register for Port 1  \n\uf0a7 Bit [7:0]: Base Power  \n\uf0a7 Bit [9:8]: Data Scale  \n\uf0a7 Bit [11:10]: PM State  \n\uf0a7 Bit [15]: System Allocated  0004h  \n74h 214h (Port 2)  \n214h: Bit [7:0]  \n214h: Bit [9:8]  \n214h: Bit [14:13]  \n218h: Bit [0]  Power Budget Register for Port 2  \n\uf0a7 Bit [7:0]: Base P ower  \n\uf0a7 Bit [9:8]: Data Scale  \n\uf0a7 Bit [11:10]: PM State  \n\uf0a7 Bit [15]: System Allocated  0004h  \n76h 214h (Port 3)  \n214h: Bit [7:0]  \n214h: Bit [9:8]  \n214h: Bit [14:13]  \n218h: Bit [0]  Power Budget Register for Port 3 \n\uf0a7 Bit [7:0]: Base Power  \n\uf0a7 Bit [9:8]: Data Scale  \n\uf0a7 Bit [11:10]: PM State  \n\uf0a7 Bit [15]: System Allocated  0004h  \n78h 70h (Port 0)  \n70h: Bit [1 2:0] \n \n8Ch (Port 0)  \n8Ch: Bit [25:24]  Replay Time -out Counter for  Port 0 \n\uf0a7 Bit [1 2:0]: Relay Time -out  Counter  \n \nREV_TS_CTR for Port 0  \n\uf0a7 Bit [14:13]: REV_TS_CTR  0000h  \n7Ah 70h (Port 1) \n70h: Bit [12:0] \n 8Ch (Port 1 ) \n8Ch: Bit [25:24]  Replay Time -out Counter for  Port 1 \n\uf0a7 Bit [1 2:0]: Relay Time -out  Counter  \n \nREV_TS_CTR for Port 1  \n\uf0a7 Bit [14:13]: REV_TS_CTR  0000h  \n \n \n \n \nPI7C9X2G 404SV  Page 36 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n7Ch 70h (Port 2) \n70h: Bit [1 2:0] \n \n8Ch (Port 2 ) \n8Ch: Bit [25:24]  Replay Time -out Counter f or  Port 2 \n\uf0a7 Bit [1 2:0]: Relay Time -out  Counter  \n \nREV_TS_CTR for Port 2  \n\uf0a7 Bit [14:13]: REV_TS_CTR  0000h  \n7Eh 70h (Port 3) \n70h: Bit [1 2:0] \n 8Ch (Port 3 ) \n8Ch: Bit [25:24]  Replay Time -out Counter for  Port 3 \n\uf0a7 Bit [1 2:0]: Relay Time -out  Counter  \n \nREV_TS_CTR for Por t 3 \n\uf0a7 Bit [14:13]: REV_TS_CTR  0000h  \n80h 74h (Port 0)  \n74h: Bit [13:8]  \n \n \n74h: Bit [14]  \n \n70h (Port 0)  \n70h: Bit [31]  \n 88h (Port 0)  \n88h: Bit [31:24]  PM Control Parameter for Port 0  \n\uf0a7 Bit [1:0] : D3 enters L1  \n\uf0a7 Bit [3:2] : L1 delay count select  \n\uf0a7 Bit [5:4] : L0s enable  \n\uf0a7 Bit [6] : Disable Rx polarity capability  \n \nVGA Decode Enable for Port 0  \n\uf0a7 Bit [7]: Enable VGA decode  \n XPIP_CSR5[31:24] for Port 0  \nBit[15:8]: XPIP_CSR5[31:24]  73A1h  \n82h 74h (Port 1)  \n74h: Bit [13:8]  \n \n \n74h: Bit [14]  \n \n70h (Port 1)  \n70h: Bit [31]  \n \n88h (Port 1)  \n88h: Bit [31:24]  PM Control Parameter for Port 1  \n\uf0a7 Bit [1:0] : D3 enters L1  \n\uf0a7 Bit [3:2] : L1 delay count select  \n\uf0a7 Bit [5:4] : L0s enable  \n\uf0a7 Bit [6] : Disable Rx polarity capability  \n \nVGA Decode Enable for Port  1 \n\uf0a7 Bit [7]: Enable VGA decode  \n XPIP_CSR5[31:24] for Port 1  \n\uf0a7 Bit [15:8]: XPIP_CSR5[31:24]  33A1h  \n84h 74h (Port 2)  \n74h: Bit [13:8]  \n \n \n74h: Bit [14]  \n \n70h (Port 2)  \n70h: Bit [31]  \n \n88h (Port 2)  \n88h: Bit [31:24]  PM Control Parameter for Port 2  \n\uf0a7 Bit [1:0] : D3 enters L1  \n\uf0a7 Bit [3:2] : L1 delay count select  \n\uf0a7 Bit [5:4] : L0s enabl e \n\uf0a7 Bit [6] : Disable Rx polarity capability  \n \nVGA Decode Enable for Port 2  \n\uf0a7 Bit [7]: Enable VGA decode  \n XPIP_CSR5[31:24] for Port 2  \n\uf0a7 Bit [15:8]: XPIP_CSR5[31:24]  33A1h  \n86h 74h (Port 3) \n74h: Bit [13:8]  \n \n \n74h: Bit [14]  \n \n70h (Port 3) \n70h: Bit [31]  \n \n88h (Port 3) \n88h: Bit [31:24]  PM Control Parameter for Port 3 \n\uf0a7 Bit [1:0] : D3 enters L1  \n\uf0a7 Bit [3:2] : L1 delay count select  \n\uf0a7 Bit [5:4] : L0s enable  \n\uf0a7 Bit [6] : Disable Rx polarity capability  \n \nVGA Decode Enable for Port 3  \n\uf0a7 Bit [7]: Enable VGA decode  \n XPIP_CSR5[31:24] for Port 3  \n\uf0a7 Bit [15:8]: XPIP_CSR5[31:24]  33A1h  \n88h 70h (Port 0)  \n70h: Bit [3 0:16] Acknowledge Latency Timer for Port 0  \n\uf0a7 Bit [14:0]: Acknowledge Latency Timer  0000h  \n8Ah 70h (Port 1) \n70h: Bit [3 0:16] Ackn owledge Latency Timer for Port 1 \n\uf0a7 Bit [14:0]: Acknowledge Latency  Timer  0000h  \n8Ch 70h (Port 2) \n70h: Bit [3 0:16] Ackn owledge Latency Timer for Port 2 \n\uf0a7 Bit [14:0]: Acknowledge Latency Timer  0000h  \n8Eh 70h (Port 3) \n70h: Bit [3 0:16] Ackn owledge Latency Timer for Port 3 \n\uf0a7 Bit [14:0]: Acknowledge Latency Timer  0000h  \n92h D4h (P ort 1)  \nD4h: Bit [15:0]  Slot Capability 0 of Port 1  \n\uf0a7 Bit [15:0]: Mapping to the low word of slot \ncapability register  0000h  \n94h D4h (Port 2)  \nD4h: Bit [15:0]  Slot Capability 0 of Port 2  \n\uf0a7 Bit [15:0]: Mapping to the low word of slot \ncapability register  0000h  \n \n \n \n \nPI7C9X2G 404SV  Page 37 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nADDRESS  PCI CFG OFFSET  DESCRIPTION  Default Value  \n96h D4h (Port 3) \nD4h: Bit [15:0]  Slot Capability 0 of Port 3 \n\uf0a7 Bit [15:0]: Mapping to the low word of slot \ncapability register  0000h  \n9Ah D4h (Port 1)  \nD4h: Bit [31:16]  Slot Capability 1 of Port 1  \n\uf0a7 Bit [15:0]: Mapping to the high word of slot \ncapability register  0008h  \n9Ch D4h (Port 2)  \nD4h: Bit [31:16]  Slot Capability 1 of Port 2  \n\uf0a7 Bit [15:0]: Mapping to the high word of slot \ncapability register  0010h  \n9Eh D4h (Port 3) \nD4h: Bit [31:16]  Slot Capability 1 of Port 3 \n\uf0a7 Bit [15:0]: Mapping to the high word of slot \ncapabil ity register  0018h  \nA0h 15Ch (Port 0)  \n15Ch: Bit [22:16]  \n \n160h (Port 0)  \n160h: Bit [7:0]  VC1 MAX Time Slot for Port 0   \n\uf0a7 Bit [6:0]: The maximum time slot supported by VC1 \n TC/VC Map for Port 0  \n\uf0a7 Bit [15:8]: When set, it indicates the corresponding \nTC is mapped i nto VC1  0000h  \nA2h 15Ch (Port 1)  \n15Ch: Bit [22:16]  \n 160h (Port 1)  \n160h: Bit [7:0]  VC1 MAX Time Slot for Port 1  \n\uf0a7 Bit [6:0]: The maximum time slot supported by VC1 \n TC/VC Map for Port 1  \n\uf0a7 Bit [15:8]: When set, it indicates the corresponding \nTC is mapped into VC 1 0000h  \nA4h 15Ch (Port 2)  \n15Ch: Bit [22:16]  \n \n160h (Port 2 ) \n160h: Bit [7:0]  VC1 MAX Time Slot for Port 2  \n\uf0a7 Bit [6:0]: The maximum time slot supported by VC1 \n TC/VC Map for Port 2  \n\uf0a7 Bit [15:8]: When set, it indicates the corresponding \nTC is mapped into VC1  0000 h \nA6h 15Ch (Port 3) \n15Ch: Bit [22:16]  \n \n160h (Port 3 ) \n160h: Bit [7:0]  VC1 MAX Time Slot for Port 3 \n\uf0a7 Bit [6:0]: The maximum time slot supported by VC1 \n TC/VC Map for Port 3  \n\uf0a7 Bit [15:8]: When set, it indicates the corresponding \nTC is mapped into VC1  0000h  \n \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 38 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n6.2 SMBus INTERFACE  \n \nThe PI7C9X 2G404SV  provides the System Management Bus (SMBus), a two -wire interface through which a simple device \ncan communicate with the rest of the system. The SMBus interface on the PI7C9X 2G404SV  is a bi -directional slave \ninterface. It  can receive data from the SMBus master or send data to the master. The interface allows full access to the \nconfiguration registers. A SMBus master, such as the processor or other SMBus devices, can read or write to every RW configuration register (read/wr ite register). In addition, the RO and HwInt registers (read -only and hardware initialized \nregisters) that can be auto -loaded by the EEPROM interface can also be read and written by the SMBus interface. This \nfeature allows increases in the system expandabi lity and flexibility in system implementation.  \n \nFigure 6-1 SMBus Architecture Implementation on PI7C9X 2G404SV  \nPericom PCIe \nPacket Switch\nSMBCLK\nSMBDATAProcessor\n(SMBus Master )Other SMBus \nDevices\n \n \nThe SMBus interface on the PI7C9X 2G404SV  consists of one SMBus clock pin (SMBCLK), a  SMBus data pin \n(SMBDATA), and 3 SMBus address pins (GPIO[5:7]). The SMBus clock pin provides or receives the clock signal. The SMBus data pin facilitates the data transmission and reception. Both  of the clock and data pins are  bi-directional. The SMBus \naddress pins determine the address to which the PI7C9X 2G404SV  responds to. The SMBus address pins generate addresses \naccording to the following table:  \nTable 6-1 SMBus Address Pin Configuration \nBIT SMBus Address  \n0 GPIO[5]  \n1 GPIO[6]  \n2 GPIO[7]  \n3 1 \n4 1 \n5 0 \n6 1 \n \n \n \n  \n \n  \n \n \n \n \nPI7C9X2G 404SV  Page 39 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n6.2.1  SMBUS WRITE  \n \nThe Write command is us ed to write the PI7C9X 2G404SV  registers. General SMBus Writes are illustrated in Figure 6 -2.  \nTable 6-2 explains the elements used in Figure 6 -2. \n \nFigure 6-2 SMBus Write Command For mat, to Write to a PI7C9X2G 404SV  Register (PEC  disable)  \n \n \n \n \n \n      : Master to Slave  \n      : Slave to Master  \n \nTable 6-2 Bytes for SMBus Write \nField  (Byte)  On  Bus  Bit(s) Valu e/ Description  \nS 1 START  condition  \nP 1 STOP  condition  \nA 1 Acknowledge  (this bit position may be 0 for an ACK or 1 for a NACK)  \nCmd Code  7:0 08h \nOffset  7:0 PI7C9X2G 404SV  Register Address [ 7:0] \nPort 7:0 Port  Number  \n0~3: Port 0 to Port 3  \nOthers: Reserved  \nData Byte 1  7:0 Data Byte for register bits[7:0]  \nData Byte 2  7:0 Data Byte for register bits [15:8]  \n \nTable 6-3 is a sample to writ e SSVID register (offset B 4h) in Port 1. The register value i s 1234h,  and the default SMBus \nAddress is 1011000b.  \n \nTable 6-3 Sample SMBus Write Byte Sequence  \nByte Number  Byte Type  Value  Description  \n1 Address  D0h Bits [7:1] for the PI7C9X2G 404SV  default Slave address of 68h, with bit \n0 Cleared to indicate a Write.  \n2 Cmd Code  08h Command Code  \n3 Offset  B4h Register address bits [7:0]  \n4 Port 01h For Port 1  \n5 Address  D0h Bits [7:1] for the PI7C9X2G 404SV  default Slave address of 68h, with bit \n0 Cleared to indicate a Write.  \n6 Cmd Code  08h Command Code  \n7 Data Byte 1  34h Data Byte for register bits [ 7:0] \n8 Data Byte 2  12h Data Byte for register bits [ 15:8] \n \n6.2.2  SMBUS READ  \n \nThe Read  command is used to read the PI7C9X 2G404SV  registers. General SMBus Reads  are illustrated in Fig ure 6-3.  \nTable 6-4 explains the elements used in Figure 6 -3. \n S       Slave Addr      Wr                Cmd Code = 08h                    Offset                                         Port                    A A A A P \nS       Slave Addr      Wr                Cmd Co de = 08h                    Data Byte 1                      Data Byte 2  A A A A P \n \n \n \n \nPI7C9X2G 404SV  Page 40 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nFigure 6-3 SMBus Read Command Format, to Read that Returns CFG Register Value (PEC disabled)  \n \n \n \n \n      : Master  to Slave  \n      : Slave to Master  \n \nTable 6-4 Bytes for SMBus Read  \nField  (Byte)  On  Bus  Bit(s) Valu e/ Description  \nS 1 START  condition  \nP 1 STOP  condition  \nA 1 Acknowledge  (this bit position may be 0 for an A CK or 1 for a NACK)  \nCmd Code  7:0 08h \nOffset  7:0 PI7C9X2G 404SV  Register Address [ 7:0] \nPort 7:0 Port  Number  \n0~3: Port 0 to Port 3  \nOthers: Reserved  \nData Byte 1  7:0 Return va lue for CFG register bits [ 7:0] \nData Byte 2  7:0 Return va lue for CFG register bit s [15:8] \n \nTable  6-5 is a sample to Read SSVID register (offset B4 h) in Port 1.  The register value is 0000h  and t he default SMBus \nAddress is 1011000b.  \n \nTable 6-5 SMBus Block Write Portion  \nByte Number  Byte Typ e Value  Description  \n1 Address  D0h Bits [7:1] for the PI7C9X2G 404SV  default Slave address of 68h, with bit \n0 Cleared to indicate a Write.  \n2 Cmd Code  08h Command Code  \n3 Offset  B4h Register address bits [7:0]  \n4 Port 01h For Port 1  \n5 Address  D0h Bits [7:1 ] for the PI7C9X2G 404SV  default Slave address of 68h, with bit \n0 Cleared to indicate a Write.  \n6 Cmd Code  08h Command Code  \n7 Address  D1h Bits [7:1] for the PI7C9X2G 404SV  default Slave address of 68h, with bit \n0 set 1 to indicate a Read . \n8 Data Byte 1  00h Data Byte for register bits [ 7:0] \n9 Data Byte 2  00h Data Byte for register bits [ 15:8] \n \n6.3 I2C SLAVE INTERFACE  \n \nInter -Integrated Circuit (I2C) is a bus used to connect Integrated Circuits (ICs). Multiple ICs can be connected to an I2C Bus, \nand I2C devices that have I2C mastering capability can initiate a Data transfer. I2C is used for Data transfers between ICs at \nrelatively low rates (100 Kbps), and is used in a variety of applications. For further details regarding I2C Buses, refer to the \nI2C Bus v2.1.  \n \nThe PI7C9X2G 404SV  is an I2C Slave. Slave op erations allow the PI7C9X2G 404SV  Configuration registers to be read from \nor written to by an I2C Master, external from the device. I2C is a sideband mechanism that allows the device Configuration \nregisters to be pr ogrammed, read from, or written to, independent of the PCI Express upstream Link.  \n S       Slave Addr      Wr                Cmd code = 08h                 S       Slave Adres s     Rd                                                   A                                   A  A A A Data Byte 1  Data Byte 2 P S       Slave Addr      Wr                Cmd Code = 08h                        Offset                                     Port                    A A A A P P \n \n \n \n \nPI7C9X2G 404SV  Page 41 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nFigure 6-4 Standard Devices to I2C Bus Connection Block Diagram  \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \nThe I2C interface on t he Packet Switch consists of a I2C clock pin ( SMBCLK ), a I2C data pin ( SMBDATA), and 3 I2C \naddress pins ( GPIO[7:5] ). The I2C clock pin provides or receives the clock signal. The I2C data pin facilitates the data \ntransmission and reception. Both of the cloc k and data pins are bi -directional. The I2C address pins determine the address to \nwhich the Packet Switch responds to. The I2C address pins generate addresses according to the following table:  \n \nTable 6-6 I2C Address Pin Configuration \nBIT I2C Address  \n0 GPIO[5]  \n1 GPIO[6]  \n2 GPIO[7]  \n3 1 \n4 1 \n5 1 \n6 0 \n \n6.3.1  I2C REGISTER WRITE ACCESS  \n \nThe PI7C9X2G 404SV  Configuration registers can be read from and written to, based upon I2C register Read and Write \noperations, respect ively. An I2C Write packet consists of Address Phase bytes and Command Phase bytes, followed by one to \nfour additional I2C Data bytes. Table  6-7 defines mapping of the I2C Data bytes to the Configuration register Data bytes.  \n \nThe I2C packet starts with th e S (START condition) bit. Data bytes are separated by the A (Acknowledge Control Packet \n(ACK)) or N (Negative Acknowledge (NAK)) bit. The packet ends with the P (STOP condition) bit.  \nIf the Master generates an invalid command ， the targeted PI7C9X2G 404SV  register is not modified.  \nThe PI7C9X2G 404SV  considers the 1st Data byte of the 4 -byte Data phase, following the four Command bytes in the \nCommand phase, as register Byte 3 (bits [31:24]). The next three Data bytes access regist er Bytes 2 through 0, respectively. \nFour Data bytes are required, regardless of the Byte Enable Settings in the Command phase. The Master can then generate \neither a STOP condition (to finish the transfer) or a repeated START condition (to start a new trans fer). If the I2C Master \nsends more than the four Data bytes (violating PI7C9X2G 404SV  protocol), further details regarding I2C protocol, the \nPI7C9X2G 404SV  returns  a NAK  for  the extra Data byte(s).  \n Table 6-8 describes each I\n2C Command byte for Write acce ss. In the packet described in Figure 6-5, Command Bytes 0 \nthrough 3 for Writes follow the format specified in Table  6-8. \n             +VDD  \n                 Pull -up resistors  \n       R P           R P \n \n \n \n \n SMBDATA (Serical Data Line)  \n \nSMBCLK (Serical Clock Line)  \n \nExternal  \nI2C Master  PI7C9X2G\n404SV  \n \n \n \n \nPI7C9X2G 404SV  Page 42 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nTable 6-7 I2C Register Write Access  \nI2C Data Byte Order  PCI Express Configuration Regi ster Byte  \n0 Written to register Byte 3  \n1 Written to register Byte 2  \n2 Written to register Byte 1  \n3 Written to register Byte 0  \n \nTable 6-8 I2C Command Format for Write Access  \nByte  Bit(s)  Description  \n1st (0) 7:3 Reserved  \n2:0 Command  \n011b = Write register  \n2nd (1) 7:6 Reserved  \n0 Port Select [1] \n2nd Command byte , bits [ 0], and 3rd Command byte , bit 7, combine to form a 2-bit Port Select . \n3rd (2) 7 Port Select [0] \n2nd Command byte, bits [ 0], and 3rd Command byte, bit 7, combine to form a 2-bit Port Select.  \nPort Select[ 1:0] is used to select Port to access.  \n   0… Port 0  \n   1… Port 1  \n   2… Port 2  \n   3… Port 3  \n6 Reserved  \n5:2 Byte Enable  \n \nBit  Description  \n2  Byte Enable for Data Byte 4 (PI7C9X2G 404SV  registe r bits [7:0])  \n3  Byte Enable for Data Byte 3  (PI7C9X2G 404SV  register bits [15:8])  \n4  Byte Enable for Data Byte 2 (PI7C9X2G 404SV  register bits [23:16])  \n5  Byte Enable for Data Byte 1 (PI7C9X2G 404SV  register bits [31:24])  \n \n0 = Corresponding  PI7C9X2G 404SV  register byte will not be modified  \n1 = Corresponding  PI7C9X2G 404SV  register byte will be modified  \n1:0 PI7C9X2G 404SV  Register Address [11:10]  \n4th (3) 7:0 PI7C9X2G 404SV  Register Address [9:2]  \nNote: Address bits[1:0] are fixed to 0.  \n \nFigure 6-5 I2C Write Packet  \nI2C Write Packet Address Phase Byte  \nAddress Cycle  \nSTART  7654321  0 ACK/NAK  \nS Slave Address [7:1]  Read/Write Bit  \n0 = Write  A \n I2C Write Packet Command Phase Byte  \nCommand Cycle  \n76543210  ACK/NAK  76543 210 ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  \nCommand \nByte 0  A Command \nByte 1  A Command \nByte 2  A Command \nByte 3  A \n I\n2C Write Packet Data Phase Byte  \nWrite Cycle  \n76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  STOP  \nRegister Byte 3  A Register Byte 2  A Register Byte 1  A Register Byte 0  A P \n \nThe following tables illustrate a sample I2C packet for writing the PI7C9X2G 404SV  SSID/SSVID register (offset B4 h) for \nPort 0, with data 1234_5678h  and suppose GPIO[7:5] is set to 000b.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 43 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nFigure 6-6 I2C Register Write Access Example  \nI2C Register Write Access Example –  Address Cycle  \nPhase  Value  Description  \nAddress  70h Bits [7:1] for PI7C9X2G 404SV  I2C Slave Address ( 38h) with last bit (bit 0) for Write = 0 \n \nI2C Register Write Access Example – Command Cycle  \nByte  Value  Description  \n0 03h [7:3]  Reserved    \n[2:0]  Command , 011b = Write register  \n1 00h for Port 0 [7:6] Reserved  \n[0] Port Select[ 1] \n2 3Ch for Port 0 [7]    Port Select [0] \n[6]    Reserved          \n[5:2] Byte Enable , all active.  \n[1:0] PI7C9X2G 404SV  Register Address, Bits [11:10]  \n3 2Dh [7:0] PI7C9X2G 404SV  Register Address, Bits [9:2]  \n I\n2C Register Write Access Example – Data Cycle  \nByte  Value  Description  \n0 12h Data to Write for Byte 3  \n1 34h Data t o Write for Byte 2  \n2 56h Data to Write for Byte 1  \n3 78h Data to Write for Byte 0  \n Figure 6-7 I\n2C Write Command Packet Example  \nI2C Write Packet Address Phase Bytes  \n1st Cycle  \nSTART  7654321  0 ACK/NAK  \nS Slave Address 1011 _000b  Read/Write Bit  \n0 = Write  A \n \nI2C Write Packet Command Phase Bytes  \nCommand Cycle  \n76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  \nCommand \nByte 0  \n0000_0011b  A Command \nByte 1  \n0000_0000b  A Command \nByte 2  \n0011_1100b  A Command \nByte 3  \n0010_1101 b A \n \nI2C Write Packet Data Phase Bytes  \nWrite Cycle  \n76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  STOP  \nRegister Byte 3  \n0001_0010b  A Register Byte 2  \n0011_0100b  A Register Byte 1  \n0101_0110b  A Register Byte 0  \n0111 _1000h  A P \n \n6.3.2  I2C REGISTER READ ACCESS  \n \nWhen the I2C Master attempts to read a PI7C9X2G 404SV  register, two packets are transmitted. The 1st packet consists of \nAddress and Command Phase bytes to the Slave. The 2nd packet consists of Address and Data Phase by tes. \n \nAccording to the I2C Bus, v2.1, a Read cycle is triggered when the Read/Write bit (bit 0) of the 1st cycle is Set. The \nCommand phase reads the requested register content into the internal buffer. When the I2C Read access occurs, the internal \nbuffer v alue is transferred on to the I2C Bus, starting from Byte 3 (bits [31: 24]), followed by the subsequent bytes, with Byte \n0 (bits  [7:0]) being transferred last.  If the I2C Master requests more than four bytes, the PI7C9X2G 404SV  re-transmits the \nsame byte se quence, starting from Byte 3 of the internal buffer.  \n \n \n \n \nPI7C9X2G 404SV  Page 44 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n \nThe 1st and 2nd I2C Read packets perform the following functions:  \n\uf09f 1st packet  -  Selects the register to read  \n\uf09f 2nd packet  -  Reads the register (sample 2nd packet provided is for a 7- bit PI7C9X2G 404SV  I2C Slave address)  \n Although two packets are shown for the I\n2C Read, the I2C Master can merge the two packets together into a single  packet, by \nnot generating the STOP at the end of the first packet (Master does not relinquish the bus) and generating REPEAT START.  \n \nTable 6-9 describes each I2C Command byte for Read access. In the packet described in Figure 6-8, Command Bytes 0 \nthrough 3 for Reads follow the format specified in Table  6-9. \n \nTable 6-9 I2C Command F ormat for Read Access  \nByte  Bit(s)  Description  \n1st (0) 7:3 Reserved  \n2:0 Command  \n100b = Read register  \n2nd (1) 7:6 Reserved  \n0 Port Select, Bits [ 1] \n2nd Command byte, bit [0], and 3rd Command byte, bit 7, combine to form a 2-bit Port Select.  \n3rd (2) 7 Port Select [0] \n2nd Command byte, bits [3:0], and 3rd Command byte, bit 7, combine to form a 2-bit Port Select.  \nPort Select[ 1:0] is used to select Port to access.  \n   0… Port 0  \n   1… Port 1  \n   2… Port 2 \n   3… Port 3  \n6 Reserved  \n5:2 Byte Enable  \n \nBit  Descri ption  \n2  Byte Enable for Data Byte 4 (PI7C9X2G 404SV  register bits [7:0])  \n3  Byte Enable for Data Byte 3  (PI7C9X2G 404SV  register bits [15:8])  \n4  Byte Enable for Data Byte 2 (PI7C9X2G 404SV  register bits [23:16])  \n5  Byte Enable for Data Byte 1 (PI7C9X2G 404SV  register bits [31:24])  \n \n0 = Corresponding  PI7C9X2G 404SV  register byte will not be modified  \n1 = Corresponding  PI7C9X2G 404SV  register byte will be modified  \n1:0 PI7C9X2G 404SV  Register Address [11:10]  \n4th (3) 7:0 PI7C9X2G 404SV  Register Address [9:2]  \nNote : Address bits[1:0] are fixed to 0.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 45 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nFigure 6-8 I2C Read Command Packet  \nI2C Read Command Packet Address Phase Byte (1st Packet)  \n1st Cycle  \nSTART  7654321  0 ACK/NAK  \nS Slave Address[7:1]  Read/Write Bit  \n0 = Wr ite A \n \nI2C Read Command Packet Command Phase Byte (1st Packet)  \nWrite Cycle  \n76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  \nCommand \nByte 0  A Command \nByte 1  A Command \nByte 2  A Command \nByte 3  A \n I\n2C Read Data Packet Address Phase Byte (2nd Packet)  \n1st Cycle  \nSTART  7654321  0 ACK/NAK  \nS Slave Address[7:1]  Read/Write Bit  \n1 = Read  A \n I\n2C Read Data Packet Data Phase Byte (2nd Packet)  \nWrite Cycle  \n76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  STOP  \nRegister \nByte 3  A Register \nByte 2  A Register \nByte 1  A Register \nByte 0  A P \n \nThe following tables illustrate a sample I2C packet for reading the PI7C9X2G 404SV  SSID/SSVID register (offset B4 h) for \nPort 0. The default value for SSI D/SSVID register is 0000_0000h  and suppose GPIO[7:5]=000b.  \n \nFigure 6-9 I2C Register Read Access Example  \nI2C Register Read Access Example –  Address Cycle (1st Packet)  \nPhase  Value  Description  \nAddress  70h Bits [7:1] for PI7C9X2G 404SV  I2C Slave Address ( 38h) w ith last bit (bit 0) for Write = 0  \n \nI2C Register Read Access Example –  Command Cycle (1st Packet)  \nByte  Value  Description  \n0 04h [7:3]  Reserved  \n[2:0]  Command , 100b = Read register  \n1 00h for Port 0  [7:6] Reserved    \n[0] Port Select[ 1] \n2 3Ch for Port 0  [7]    Port Select[0]  \n[6]    Reserved        \n[5:2] Byte Enable, All active.  \n[1:0] PI7C9X2G 404SV  Register Address, Bits [11:10]  \n3 2Dh [7:0] PI7C9X2G 404SV  Register Address, Bits [9:2]  \n \nI2C Register Read Access Example –  2nd Packet  \nPhase  Value  Description  \nAddress  71h Bits [7:1] for PI7C9X2G 404SV  I2C Slave Address ( 38h) with last bit (bit 0) for Read = 1  \nRead  00h Byte 3 of Register Read  \n00h Byte 2 of Register Read  \n00h Byte 1 of Register Read  \n00h Byte 0 of Register Read  \n \n \n \n \n \nPI7C9X2G 404SV  Page 46 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nFigure 6-10 I2C Read Command Packet  \nI2C Read Command Packet Address Phase Bytes (1st Packet)  \n1st Cycle  \nSTART  7654321  0 ACK/NAK  \nS Slave Address 1011 _000b  Read/Write Bit  \n0 = Write  A \n \nI2C Read Command Packet Command Phase Bytes (1st Pack et) \nCommand Cycle  \n76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  76543210  \nCommand  \nByte 0  \n0000_0100b  A Command  \nByte 1  \n0000_0000b  A Command  \nByte 2  \n0011_1100b  A Command  \nByte 3  \n0010_1101 b \n I\n2C Read Data Packet Address Phase Bytes (2nd Packet) \n1st Cycle \nSTART  7654321  0 ACK/NAK  \nS Slave Address [7:1] 0111 _000b  Read/Write Bit  \n1 = Read  A \n I\n2C Read Data Packet Data Phase Bytes (2nd Packet) \nCommand Cycle  \n76543210  ACK/NAK  76543210  ACK/NAK  76543210  ACK/NAK  76543210  Stop  \nRegister Byte3  \n0000_0000b  A Regist er Byte2  \n0000_0000b  A Register Byte1  \n0000_0000b  A Register Byte0  \n0000_00000b  P \n \n \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 47 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7 REGISTER DESCRIPTION  \n7.1 REGISTER TYPES  \n \nREGISTER TYPE  DEFINITION  \nHwInt  Hardware Initialization  \nRO Read Only  \nRW Read / Write  \nRWC  Read / Write 1 to Clear  \nRWCS  Sticky – Read Only  / Write 1 to Clear  \nRWS  Sticky – Read / Write  \nROS Sticky – Read  Only  \n \n7.2  TRANSPARENT MODE  CONFIGURATION  REGISTERS  \n \nWhen the port of the Switch is set to operate at the transparent mode, it is represented by a logical PCI -to-PCI Bridge that \nimplement s type 1 configuration space header. The following table  details  the allocation of the  register fields of the PCI 2.3 \ncompatible type 1 configuration space header.  \n \n31 –24  23 – 16  15 – 8 7 –0  BYTE OFFSET  \nDevice ID  Vendor ID  00h \nPrimary Status  Command  04h \nClass Code  Revision ID  08h \nReserved  Header Type  Primary Latency Timer  Cache Line Size  0Ch \nReserved  10h – 17h  \nSecondary Latency \nTimer  Subordinate Bus \nNumber  Secondary Bus \nNumber  Primary Bus Number  18h \nSecondary Status  I/O Limit Address  I/O Base Ad dress  1Ch \nMemory Limit Address  Memory Base Address  20h \nPrefetchable Memory Limit Address  Prefetchable Memory Base Address  24h \nPrefetchable Memory Base Address Upper 32 -bit 28h \nPrefetchable Memory Limit Address Upper 32 -bit 2Ch \nI/O Limit Address Upper 16-bit I/O Base Address Upper 16 -bit 30h \nReserved  Capability Pointer to \n40h 34h \nReserved  38h \nBridge Control  Interrupt Pin  Interrupt Line  3Ch \nPower Management Capabilities  Next Item Pointer=  \n4Ch  Capability ID=01 h 40h \nPM Data  PPB Support \nExtensions  Power Management Data  44h \nMessage Control  Next Item Pointer= : \n64h Capability ID=05 h 4Ch \nMessage Address  50h \nMessage Upper Address  54h \nReserved  Message Data  58h \nReserved  5Ch – 60h \nLength in Bytes ( 34h) Next Item Pointer= B0h Capability ID=09 h 64h \nXPIP_CS R0 68h \nXPIP_CSR1  6Ch \nACK Latency Timer  Replay Time -out Counter  70h \nPHY Parameter 0  Switch Modes  74h \nPHY Parameter 1  XPIP_CSR2  78h \nPHY Parameter 2  7Ch \nXPIP_CSR3  80h \nXPIP_CSR4  84h \nXPIP_CSR5  88h \nXPIP_CSR7  XPIP_CSR6  TL_CSR 0 8Ch \nPHY parameter 3  90h \n \n \n \n \nPI7C9X2G 404SV  Page 48 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n31 –24  23 – 16  15 – 8 7 –0  BYTE OFFSET  \nReserved  PHYL1 RXEQ  PHY TX Margin parameter  94h \nReserved  Buffer Ctrl  OP Mode  98h \nDebug Control  9Ch \nDebug Data Output  A0h \nReserved  A4h – ACh \nReserved  Next Item Pointer =C0h SSID/SSVID  \nCapability ID=0D h B0h \nSSID  SSVID  B4h \nGPIO Data and Control  B8h \nEEPROM Data  EEPROM Address  EEPROM Control  BCh \nPCI Express Capabilities Register  Next Item Pointer=00 h Capability ID=10 h C0h \nDevice Capabilities  C4h \nDevice Status  Device Control  C8h \nLink Capabilities  CCh \nLink Status  Link Control  D0h \nSlot Capabilities  D4h \nSlot Status  Slot Control  D8h \nReserved  DCh \nReserved  E0h \nDevice Capabilities 2  E4h \nDevice Status / Control 2  E8h \nLink Capabilities 2  ECh \nLink Status /Control 2  F0h \nSlot Capabilities 2  F4h \nSlot Status /Control 2  F8h \nReserved  FCh \n \nOther than the PCI 2.3 compatible configuration space header, the Switch also implements PCI express extended \nconfiguration space header, which includes advanced error reporting, virtual channel, and power budgeting capability \nregisters. The following table details  the allocation of the  register fields of PCI express extended  capability space header.  The \nfirst extended capability always begins at offset 100h with a PCI Express Enhanced Capability header and the rest of \ncapabilities are located at an offset greater than 0F Fh relative to the beginning of PCI compatible configuration space.  \n \n31 –24  23 – 16  15 - 8 7 –0  BYTE OFFSET  \nNext Capability Offset=140h  Cap. \nVersion  PCI Express Extended Capability ID=0001h  100h  \nUncorrectable Error Status Register  104h  \nUncorrectable Error Mask Register  108h  \nUncorrectable Error Severity Register  10Ch  \nCorrectable Error Status Register  110h  \nCorrectable Error Mask Register  114h  \nAdvanced Error Capabilities and Control Register  118h  \nHeader Log Register  11Ch – 128h  \nReserved  12Ch – 13Fh  \nNext Capability Offset= 20Ch Cap. \nVersion  PCI Express Extended Capability ID=0002h  140h  \nPort VC Capability Register 1  144h  \nVC Arbitration Table \nOffset=3  Port VC Capability Register 2  148h  \nPort VC Status Register  Port VC Control Register  14Ch  \nPort Ar bitration Table \nOffset=4  VC Resource Capability Register (0)  150h  \nVC Resource Control Register (0)  154h  \nVC Resource Status Register (0)  Reserved  158h  \nPort Arbitration Table \nOffset=6  VC Resource Capability Register (1)  15Ch  \nVC Resource Control Register (1) 160h  \nVC Resource Status Register (1)  Reserved  164h  \nReserved  16Ch – 168h  \nVC Arbitration Table with 32 Phases  170h – 17Ch  \nPort Arbitration Table with 128 Phases for VC0  180h – 1BCh  \nPort Arbitration Table with 128 Phases for VC1  1C0h – 1FCh  \nRese rved 200h – 20Bh  \n \n \n \n \nPI7C9X2G 404SV  Page 49 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n31 –24  23 – 16  15 - 8 7 –0  BYTE OFFSET  \nNext Capability Offset= 220h/230h Cap. \nVersion  PCI Express Extended Capability ID=0004h  20Ch  \nReserved  Data Select Register  210h  \nData Register  214h  \nReserved  Power Budget \nCapability Register  218h  \nReserved   21Ch  \nNext Capability Offset= 240h Cap \nversion  PCI Express Extended Capability ID=000 Dh 220h  \nACS Control  ACS Capability  224h  \nReserved  Egress Control Vector  228h  \nReserved  22Ch  \nNext Capability Offset= 240h Cap \nversion  PCI Express Extended Capability ID=00 18h 230h  \nReserved  Max No -\nSnoop  \nLatency \nScale  Max No -Snoop \nLatency Value Reserved  Max \nSnoop \nLatency \nScale  Max Snoop Latency \nValue  234h  \nReserved  238h – 23Ch  \nNext Capability Offset =260 h/250h  Cap \nversion  PCI Express Extended Capability ID=00 1Eh 240h  \nL1 PM Substates Capability   244h  \nL1 PM Substates Control 1  248h  \nL1 PM Substates Control 2  24Ch  \nNext Capability Offset =000h  Cap \nversion  PCI Express Extended Capability ID=00 1Dh 250h \nDPC Control  DPC Capability  254h \nDPC Error Source ID  DPC Status  258h \nReserved  25Ch  \nNext Capability Offset =000h  Cap \nversion  PCI Express Extended Capability ID=00 FEh 260h \nPTM Capability  264h  \nPTM Control  268h  \nReserved  26Ch – 2FCh \nMisc Control 0  300h  \nMisc Control 1  304h  \nMisc Control 2  308h  \nMisc Control 3  30Ch  \nMisc Control 4  310h  \nReserved  314h  \nPHY/DLL/T L Error Counter  318h  \nReserved  31Ch  \nPort Physical Layer Command and Status  320h  \nPort Disable / Quiet / Test Pattern Rate  324h  \nLED_CSR0  328h  \nLED_CSR1  32Ch  \nReserved  338h – 330h  \nLTSSM_CSR  33Ch  \nMAC_CSR  340h  \nTL_CSR 1 344h  \nDebugout Control  348h  \nDebugout  Data 34Ch  \n \n7.2.1  VENDOR ID REGISTER –  OFFSET 00h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Vendor ID  RO \nHWInt  Identifies Pericom as the vendor of this device.  The default value may be changed by \nSMBus or auto -loading from EEPROM.  \n \nReset to 12D8h . \n  \n \n \n \n \nPI7C9X2G 404SV  Page 50 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.2  DEVICE ID REGI STER – OFFSET 00h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:16  Device ID  RO Identifies this device as the PI7C9X2 G304. The default value may be changed by SMBus \nor auto -loading from EEPROM.  \n \nReset s to B404h. \n \n7.2.3  COMMAND REGISTER –  OFFSET 04h  \n \nBIT FUNCTION  TYPE  DESC RIPTION  \n0 I/O Space Enable  RW 0b: Ignore s I/O transactions on the primary interface  \n1b: Enable s response s to I/O transactions on the primary interface  \n \nReset s to 0b. \n1 Memory Space Enable RW 0b: Ignore s memory transactions on the primary interface  \n1b: Enables  response s to memory transactions on the primary interface  \n \nReset to 0 b. \n2 Bus Master Enable  RW 0b: Does  not initiate memory or I/O transactions on the upstream port and handles as  an \nUnsupported Request (UR) to memory and I/O transactions on the dow nstream port . \nFor Non -Posted Requests , a com pletion with UR completion status must be returned  \n1b: Enables the Switch Port to forward memory and I/O Read/Write transactions in the \nupstream direction  \n \nReset to 0 b. \n3 Special Cycle Enable  RO Does not apply t o PCI Express. Must be hardwired to 0b.  \n4 Memory Write And \nInvalidate Enable  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n5 VGA Palette Snoop \nEnable  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n6 Parity Error Response  \nEnable  RW 0b: Switch may ignore any parity errors that it detects and continue normal operation  \n1b: Switch must take its normal action when a parity error is detected  \n \nReset to 0 b. \n7 Wait Cycle Control  RO Does not apply to PCI Express. Must be hardwired to 0.  \n8 SERR# enable  RW 0b: Disable s the reporting of Non -fatal and Fatal errors de tected by the Switch to the \nRoot Complex  \nb1: Enable s the Non-fatal and Fatal error reporting to Root Complex  \n \nReset to 0 b. \n9 Fast Back -to-Back \nEnable  RO Does not apply to PCI Expr ess. Must be hardwired to 0b.  \n10 Interrupt Disable  RW Controls the ability of a PCI Express device to generate INTx Interrupt  Messages. In the \nSwitch, this bit does not affect the forwarding of INTx messages from the downstream \nports.  \n \nReset to 0b.  \n15:11  Reserved  RsvdP  Not Support.  \n \n7.2.4  PRIMARY STATUS REGISTER – OFFSET 04h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n18:16  Reserved  RsvdP  Not Support.  \n19 Interrupt Status  RO Indicates that an INTx Interrupt Message is pending internally to the device.  \nIn the Switch, the f orwarding of INTx messages from the downstream  device of the \nSwitch port is not reflected in this bit. Must be hardwired to 0b.  \n20 Capabilities List RO Set to 1 to enable support for the capability list (offset 34h is the pointer to the data \nstructure) . \n \nReset to 1 b. \n21 66MHz Capable  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n \n \n \n \nPI7C9X2G 404SV  Page 51 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n22 Reserved  RsvdP  Not Support.  \n23 Fast Back -to-Back \nCapable  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n24 Master Data Parity \nError  RWC  Set to 1 (by a requester) whenever a Parity error is detected or forwarded on the primary \nside of the port in a Switch . \n \nIf the Parity Error Response Enable bit is cleared, this bit is never set.  \n \nReset to 0 b. \n26:25  DEVSEL# timing  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n27 Signaled Target Abort  RO Set to 1 (by a comple ter) whenever completing a request on the primary side using the \nCompleter  Abort Completion Status.  \n \nReset to 0 b. \n28 Received Target Abort  RO Set to 1 (by a requestor) whenever recei ving a Completion with  Completer  Abort \nCompletion Status on the primary side.  \n \nReset to 0 b. \n29 Received Master \nAbort  RO Set to 1 (by a requestor) whenever receiving a Completion with  Unsupported Request  \nCompletion Status on primary side.  \n \nReset to 0 b. \n30 Signaled System Error  RWC  Set to 1 when the Switch sends an ERR_FATAL or ERR_ NONFATAL Message, and \nthe SERR Enable bit in the Command register is 1.  \n \nReset to 0 b. \n31 Detected Parity Error  RWC  Set to 1 when ever the primary side of the port in a Switch rec eives a Poisoned TLP.  \n \nReset to 0 b. \n \n7.2.5  REVISION ID REGISTER –  OFFSET 08h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Revision  RO Indicates revision number of device. Hardwired to 0 0h. \n \n7.2.6  CLASS CODE REGISTER – OFFSET 08h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:8 Programmi ng \nInterface  RO Read as 00h to indicate no programming interfaces have been defined for PCI -to-PCI \nBridges . \n23:16  Sub-Class Code  RO Read as 04h to indicate device is a PCI-to-PCI Bridge . \n31:24  Base Class Code  RO Read as 06h to indicate device is a Bridge  device . \n \n7.2.7  CACHE LINE REGISTER – OFFSET 0Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Cache Line Size  RW  The cache line size register is set by the system firmware and the operating system cache \nline size. This field is implemented by PCI Express devices as a RW  field for legacy \ncompatibility, but it has no impact on any PCI Express device functionality.  \n \nReset to 00h. \n \n7.2.8  PRIMARY LATENCY TIMER REGISTER –  OFFSET 0Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:8 Primary Latency timer  RO Does not apply to PCI Express. Must be  hardwired to 00h.  \n \n \n \n \nPI7C9X2G 404SV  Page 52 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.9  HEADER TYPE REGISTER – OFFSET 0Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n23:16  Header Type  RO Read as 01h to indicate that the register layout conforms to the standard PCI -to-PCI \nBridge layout . \n7.2.10  PRIMARY BUS NUMBER REGISTER – OFFSET 18h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Primary Bus Number  RW Indicates the number of the PCI bus to which the primary interface is connected.  The \nvalue is set in software during configuration . \n \nReset to 0 0h. \n \n7.2.11  SECONDARY BUS NUMBER REGISTER –  OFFSET 18h  \n \nBIT FUNCTIO N TYPE  DESCRIPTION  \n15:8 Secondary Bus \nNumber  RW Indicates the number of the PCI bus to which the secondary interface is connected.  The \nvalue is set in software during configuration . \n \nReset to 0 0h. \n \n7.2.12  SUBORDINATE BUS NUMBER REGISTER – OFFSET 18h  \n \nBIT FUNCT ION  TYPE  DESCRIPTION  \n23:16  Subordinate Bus Number  RW Indicates the number of the PCI bus with the highest number that is subordinate to the \nBridge.  The value is set in software during configuration . \n \nReset to 00h. \n \n7.2.13  SECONDARY LATENCY TIMER REGISTER –  OFFSET 18h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:24  Secondary Latency \nTimer  RO Does not apply to PCI Express. Must be hardwired to 00h.  \n \n7.2.14  I/O BASE ADDRESS REGISTER –  OFFSET 1Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n3:0 32-bit Indicator  RO Read as 1h to indicate 32 -bit I/O addressing . \n7:4 I/O Base Address \n[15:12]  RW Defines the bottom address of the I/O address range for the Bridge to determine when to \nforward I/O transactions from one interface to the other.  The upper 4 bits correspond to address bits [15:12] and are  writable.  The lower 12 bits corresponding to address bits \n[11:0] are assumed to be 0.  The upper 16 bits corresponding to address bits [31:16] are defined in the I/O base address upper 16 bits address register . \n \nReset to 0h.  \n \n7.2.15  I/O LIMIT ADDRESS REGISTER – OFFSET 1Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n11:8 32-bit Indicator  RO Read as 1h to indicate 32 -bit I/O addressing . \n15:12  I/O Limit Address  RW Defines the top address of the I/O address range for the Bridge to determine when to \n \n \n \n \nPI7C9X2G 404SV  Page 53 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n[15:12]  forward I/O transac tions from one interface to the other.  The upper 4 bits correspond to \naddress bits [15:12] and are writable.  The lower 12 bits corresponding to address bits \n[11:0] are assumed to be FFFh.  The upper 16 bits corresponding to address bits [31:16] \nare defin ed in the I/O limit address upper 16 bits address register . \n \nReset to 0 h. \n \n7.2.16  SECONDARY STATUS REGISTER – OFFSET 1Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n20:16  Reserved  RsvdP  Not Support.  \n21 66MHz Capable  RO Does not apply to PCI Express. Must be hardwired to 0b . \n22 Reserved  RsvdP  Not Support.  \n23 Fast Back -to-Back \nCapable  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n24 Master Data Parity \nError  RWC  Set to 1 (by a requester) whenever a Parity error is detected or forwarded on the \nsecondary side of  the port in a Switch . \n If the Parity Error Response Enable bit is cleared, this bit is never set.  \n \nReset to 0 b. \n26:25  DEVSEL_L timing  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n27 Signaled Target Abort  RO Set to 1 (by a comple ter) whenev er completing a request in the secondary side using \nCompleter  Abort Completion Status.  \n \nReset to 0 b. \n28 Received Target Abort  RO Set to 1 (by a requestor) whenever receiving a Completion with  Completer  Abort \nCompletion Status in the secondary side.  \n \nReset  to 0b. \n29 Received Master Abort  RO Set to 1 (by a requestor) whenever receiving a Completion with  Unsupported Request  \nCompletion Status in secondary side.  \n \nReset to 0 b. \n30 Received System Error  RWC  Set to 1 when the Switch sends an ERR_FATAL or ERR_ NONF ATAL Message, and \nthe SERR Enable bit in the Bridge Control register is 1.  \n \nReset to 0 b. \n31 Detected Parity Error  RWC  Set to 1 when ever the secondary side of the port in a Switch receives a Poisoned TLP.  \n \nReset to 0 b. \n \n7.2.17  MEMORY BASE ADDRESS REGISTER –  OFFS ET 20h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n3:0 Reserved  RsvdP  Not Support.  \n15:4 Memory Base Address \n[15:4]  RW Defines the bottom address of an address range for the Bridge to determine when to \nforward memory transactions from one interface to the other.  The upper 12 bits \ncorrespond to address bits [31:20] and are able to be written to.  The lower 20 bits \ncorresponding to address bits [19:0] are assumed to be 0 . \n \nReset to 0 00h. \n \n7.2.18  MEMORY LIMIT ADDRESS REGISTER –  OFFSET 20h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n19:16  Reserved  RsvdP  Not Support.  \n31:20  Memory Limit \nAddress [31:20]  RW Defines the top address of an address range for the Bridge to determine when to forward \nmemory transactions from one interface to the other.  The upper 12 bits correspond to \n \n \n \n \nPI7C9X2G 404SV  Page 54 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \naddress bits [3 1:20] and are writable.  The lower 20 bits corresponding to address bits \n[19:0] are assumed to be FFFFFh . \n \nReset to 000h.  \n \n7.2.19  PREFETCHABLE MEMORY BASE ADDRESS REGISTER –  OFFSET 24h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n3:0 64-bit addressing  RO Read as 1h to indica te 64-bit addressing . \n15:4 Prefetchable Memory \nBase Address [31:20]  RW Defines the bottom address of an address range for the Bridge to determine when to \nforward memory read and write transactions from one interface to the other.  The upper 12 bits corres pond to address bits [31:20] and are writable.  The lower 20 bits are \nassumed to be 0. The memory base register upper 32 bits contain the upper half of the base address . \n \nReset to 000h.  \n7.2.20  PREFETCHABLE MEMORY LIMIT ADDRESS REGISTER –  OFFSET 24h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n19:16  64-bit addressing  RO Read as 1h to i ndicate 64 -bit addressing . \n31:20  Prefetchable Memory \nLimit Address [31:20]  RW Defines the top address of an address range for the Bridge to determine when to forward \nmemory read and write transa ctions from one interface to the other.  The upper 12 bits \ncorrespond to address bits [31:20] and are writable.  The lower 20 bits are assumed to be FFFFFh. The memory limit upper 32 bits register contains the upper half of the limit \naddress.  \n \nReset to 000 h. \n \n7.2.21  PREFETCHABLE MEMORY BASE ADDRESS UPPER 32 -BITS REGISTER – \nOFFSET 28h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Prefetchable Memory \nBase Address, Upper \n32-bits [63:32]  RW Defines the upper 32 -bits of a 64 -bit bottom address of an address range for the Bridg e \nto determine when to forward memory read and write transactions from one interface to \nthe other.  \n \nReset to 0 000_0000h.  \n \n7.2.22  PREFETCHABLE MEMORY LIMIT ADDRESS UPPER 32 -BITS REGISTER – \nOFFSET 2Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Prefetchable Memory \nLimit Address, Upper \n32-bits [63:32]  RW Defines the upper 32 -bits of a 64 -bit top address of an address range for the Bridge to \ndetermine when to forward memory read and write transactions from one interface to the other.  \n \nReset to 0 000_0000h.  \n \n7.2.23  I/O BASE ADDRESS UPPER 16 -BITS REGISTER – OFFSET 30h  \n \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 I/O Base Address, RW Defines the upper 16 -bits of a 32 -bit bottom address of an address range for the Bridge \n \n \n \n \nPI7C9X2G 404SV  Page 55 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \nUpper 16 -bits [31:16]  to determine when to forward I/O transactions from  one interface to the other . \n \nReset to 0 000h.  \n \n7.2.24  I/O LIMIT ADDRESS UPPER 16 -BITS REGISTER – OFFSET 30h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:16  I/O Limit Address, \nUpper 16 -bits [31:16]  RW Defines the upper 16 -bits of a 32 -bit top address of an address range fo r the Bridge to \ndetermine when to forward I/O transactions from one interface to the other.  \n \nReset to 0 000h.  \n \n7.2.25  CAPABILITY POINTER REGISTER –  OFFSET 34h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Capability Pointer  RO Pointer points to the PCI power management reg isters . \n \nReset to 40h. \n \n7.2.26  INTERRUPT LINE REGISTER –  OFFSET 3Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Interrupt Line  RW Reset to 00h.  \n \n7.2.27  INTERRUPT PIN REGISTER –  OFFSET 3Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:8 Interrupt Pin  RO The Switch  implement s INTA virtual  wire interrupt signal s to represent  hot-plug event s \nat downstream port s. The default value on the downstream ports may be changed by \nSMBus or auto -loading from EEPROM.  \n \nReset to 00h.  \n \n7.2.28  BRIDGE CONTROL REGISTER – OFFSET 3Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n16 Parity Error Response  RW 0b: Ignore  Poisoned TLPs  on the secondary interface  \n1b: Enable the Poisoned TLPs reporting and detection on the secondary interface  \n \nReset to 0 b. \n17 S_SERR# enable  RW 0b: Disable s the forwarding of EER_COR, ERR_NONFATAL and ERR_ FATAL from \nsecondary to primary interface  \n1b: Enable s the forwarding of EER_COR, ERR_NONFATAL and ERR_FATAL from \nsecondary to primary interface  \n \nReset to 0 b. \n18 ISA Enable  RW 0b: Forwards downstream all I/O addresses in the address range defined by the I/ O Base, \nI/O Base, and Limit registers  \n1b: Forwards upstream all I/O addresses in the address range defined by the I/O Base \nand Limit registers that are in the first 64KB of PCI I/O address space (top 768 bytes \nof each 1KB block)  \n \nReset to 0b.  \n19 VGA Enabl e RW 0: Ignores access to the VGA memory or IO address range  \n \n \n \n \nPI7C9X2G 404SV  Page 56 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n1: Forwards transactions targeted at the VGA memory or IO address range  \n \nVGA memory range starts from 000A 0000h to 000B FFFFh  \nVGA IO addresses are in the first 64KB of IO  address space.  \nAD [9:0]  is in the ranges 3B0 to 3BBh and 3C0h to 3DFh.  \n \nReset to 0b.  \n20 VGA 16 -bit decode  RW 0b: Executes 10 -bit address decoding on VGA I/O accesses  \n1b: Executes 16 -bit address decoding on VGA I/O accesses  \n \nReset to 0b.  \n21 Master Abort Mode  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n22 Secondary Bus Reset  RW 0b: Does not trigger a hot reset on the corresponding PCI Express Port  \n1b: Triggers a hot reset on the corresponding PCI Express Port  \nAt the downstream port, it asserts PORT_RST# to the at tached downstream device. \n    At the upstream port, it asserts the PORT_RST# at all the downstream ports.  \n \nReset to 0 b. \n23 Fast Back -to-Back \nEnable  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n24 Primary Master \nTimeout  RO Does not apply to  PCI Express. Must be hardwired to 0b.  \n25 Secondary Master \nTimeout  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n26 Master Timeout Status  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n27 Discard Timer SERR# \nenable  RO Does not a pply to PCI Express. Must be hardwired to 0b.  \n31:28 Reserved  RsvdP  Not Support.  \n \n7.2.29  POWER MANAGEMENT CAPABILITY  REGISTER – OFFSET 40h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Enhanced Capabilities \nID RO Read as 01h to indicate that these are power management enh anced capability registers . \n15:8 Next Item Pointer  RO The pointer points to the  Message capability register.  \n \nReset to 4Ch . \n18:16  Power Management \nRevision  RO Read as 01 1b to indicate the device is compliant to Revision 1. 2 of PCI Power \nManagement In terface Specifications.  \n19 PME# Clock  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n20 Reserved  RsvdP  Not Support.  \n21 Device Specific \nInitialization  RO Read as 0 b to indicate Switch does not have device specific initialization requirements . \nThe default value may be changed by SMBus or auto -loading from EEPROM.  \n24:22  AUX Current  RO Reset as 111b to indicate the Switch needs 375 mA in D3 state. The default value may \nbe changed by SMBus or auto -loading from EEPROM.  \n25 D1 Power State \nSupport  RO Read as 1 b to indicate Switch supports the D1 power management state . The default \nvalue may be changed by SMBus or auto -loading from EEPROM.  \n26 D2 Power State \nSupport  RO Read as 1 b to indicate Switch supports the D2 power management state . The default \nvalue may be changed by SMBus or auto -loading from EEPROM.  \n31:27  PME# Support  RO Read as 11111b  to indicate Switch support s the forwarding of  PME# message in all \npower states . The default value may be changed by SMBus or auto -loading from \nEEPROM.  \n \n7.2.30  POWER M ANAGEMENT DATA REGISTER – OFFSET 44h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n1:0 Power State  RW Indicates the current power state of the Switch.  Writing a value of D0 when the \nprevious state was D3 cause a hot reset without asserting DWNRST_L.  \n \n00b: D0 state  \n01b: D1 state  \n10b: D2 state  \n \n \n \n \nPI7C9X2G 404SV  Page 57 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n11b: D3 hot state \n \nReset to 0 0b. \n2 Reserved  RsvdP  Not Support.  \n3 No_Soft_Reset  RO When set, this bit indicates that device transitioning from D3hot to D0 does not perform \nan internal reset. When clear, an internal reset is perform ed when power state transits  \nfrom D3hot to D0. This bit can be rewritten with EEPROM programming. The default \nvalue may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 1b.  \n7:4 Reserved  RsvdP  Not Support.  \n8 PME# Enable  RWS When asserted, the Sw itch will generate the PME# message . Reset to 0b.  \n12:9 Data Select  RW Select data registers.  \n \nReset to 0h.  \n14:13  Data Scale  RO Reset to 00b.  \n15 PME status  ROS Read as 0 b as the PME# message is not implemented.  \n \n7.2.31  PPB SUPPORT EXTENSIONS –  OFFSET 44h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n21:16  Reserved  RsvdP  Not Support.  \n22 B2_B3 Support for \nD3HOT RO Does not apply to PCI Express. Must be hardwired to 0b.  \n23 Bus Power / Clock \nControl Enable  RO Does not apply to PCI Express. Must be hardwired to 0b.  \n \n7.2.32  DATA REGI STER – OFFSET 44h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:24  Data Register  RO Data Register. The default value may be changed by SMBus or auto -loading from \nEEPROM.  \n \nReset to 0 0h. \n \n7.2.33  MSI CAPABILITY REGISTER –  OFFSET 4Ch \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Enhance d Capabilities \nID RO Read as 05h to indicate that this is message signal interrupt capability register . \n15:8 Next Item Pointer  RO Pointer points to the Vendor specific capability  register . \n \nReset to 64h. \n \n7.2.34  MESSAGE CONTROL REGISTER – OFFSET 4Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n16 MSI Enable  RW 0b: The function is prohibited from using MSI to request service  \n1b: The function is permitted to use MSI to request service and is prohibited from using \nits INTx # pin  \n \nReset to 0 b. \n19:17  Multiple Message \nCapabl e RO Read as 010b. \n22:20  Multiple Message \nEnable  RW Reset to 000b.  \n \n \n \n \nPI7C9X2G 404SV  Page 58 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n23 64-bit address capable RO 0b: The function is not capable of generating a 64 -bit message address  \n1b: The function is capable of gen erating a 64 -bit message address  \n \nReset to 1b.  \n31:24 Reserved  RsvdP  Not Support.  \n \n7.2.35  MESSAGE ADDRESS REGISTER – OFFSET 50h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n1:0 Reserved  RsvdP  Not Support.  \n31:2 Message Address  RW If the message enable bit is set, the contents of this register specify the DWORD aligned \naddress  for MSI memory write transaction.  \n \nReset to 0000_0000h.  \n \n7.2.36  MESSAGE UPPER ADDRESS REGISTER – OFFSET 54h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Message Upper \nAddress  RW This register is only effective if the device supports a 64 -bit message address is set.  \n \nReset to 0000 _0000h.  \n \n7.2.37  MESSAGE DATA REGISTER –  OFFSET 58h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Message Data  RW Reset to 0000h.  \n31:16  Reserved  RsvdP  Not Support.  \n \n7.2.38  VENDOR SPECIFIC CAPABILITY  REGISTER – OFFSET 64h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Enhanced  Capabilities \nID RO Read as 09h to indicate that these are vendor specific capability registers . \n \nReset to 09h.  \n15:8 Next Item Pointer  RO Pointer points to the SSID/SSVID capability  register . \n \nReset to B0h. \n31:16  Length Information RO The length fiel d provides the information for number of bytes in the capability \nstructure (including the ID and Next pointer bytes).  \n \nReset to 0034 h. \n \n7.2.39  XPIP CSR0  – OFFSET 68h (Test Purpose Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 XPIP_CSR0  RW Reset to 0400 _1060h.  \n \n7.2.40  XPIP CSR1 –  OFFSET 6Ch (Test Purpose Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 XPIP_CSR1  RW Reset to 0000_0800h . \n \n \n \n \nPI7C9X2G 404SV  Page 59 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.41  REPLAY TIME- OUT COUNTER –  OFFSET 70h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n11:0 User Replay Timer  RW A 12 -bit register contains a user-defined value. The default value may be changed by \nSMBus or auto -loading from EEPROM.  \n \nReset to 000h.  \n12 Enable User Replay \nTimer  RW When asserted, the user -defined replay time -out value is be employed. The default value \nmay be changed by SMBus or auto -loading from EEPR OM. \n \nReset to 0b.  \n13 Power Management \nCapability Disable  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n14 MSI Capability \nDisable  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset t o 0b.  \n15 Reserved  RsvdP  Not Support.  \n \n7.2.42  ACKNOWLEDGE LATENCY TIMER – OFFSET 70h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n29:16  User ACK Latency \nTimer  RW A 14 -bit register contains a user-defined value. The default value may be changed by \nSMBus or auto -loading from EEPROM.  \n \nReset to 0 000h.  \n30 Enable User ACK \nLatency  RW When asserted, the user -defined ACK latency value is be employed. The default value \nmay be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n31 VGA Decode Enable  RO Enable the VGA range dec ode. \n \nReset to 1b.  \n \n7.2.43  SWITCH OPERATION MODE –  OFFSET 74h (Upstream Port) \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Store -Forward  RW When set, a store -forward mode is used. Otherwise, the chip is working under cut -\nthrough mode. The default value may be changed by SM Bus or auto -loading from \nEEPROM.  \n \nReset to 0b.  \n2:1 Cut-through Threshold  RW Cut-through Threshold. When forwarding a packet from low -speed port to high -speed \nmode, the chip provides the capability to adjust the forwarding threshold. The default value may be changed by SMBus or auto -loading from EEPROM.  \n \n00b: the threshold is set at the middle of forwarding packet  \n01b: the threshold is set ahead 1 -cycle of middle point \n10b: the threshold is set ahead 2 -cycle of middle point.  \n11b: the threshold is set ahead 3 -cycle of middle point.  \n \nReset to 01b.  \n3 Port Arbitration Mode  RW When set, the round -robin arbitration will stay in the arbitrated port even if the credit is \nnot enough but request is pending.  \nWhen clear, the round -robin arbitration will always go to t he requesting port, which the \noutgoing credit is enough  for the packet queued in the port.  \nThe default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n \n \n \n \nPI7C9X2G 404SV  Page 60 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n4 Credit Update Mode RW When set, the frequency of releasing new credit to the link partner will be all types per \nupdate. \nWhen clear, the frequency of releasing new credit to the link partner will be type \noriented per update. \n \nThe default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b. \n5 Ordering on D ifferen t \nEgress Port Mode  RW When set, there has ordering rule on packets for different egress port . The default value \nmay be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b . \n6 Ordering on Different \nTag of Completion \nMode  RW When set, there has orderi ng rule between completion packet with different tag . The \ndefault value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b . \n7 Non-Post TLP Sotre -\nForward  RW When set, for Non -post TLP store -forward mode is used. Otherwise, Non -post TLP is \nworking under cut -through mode. The default value may be changed by SMBus or auto -\nloading from EEPROM.  \n \nReset to 0b. \n13:8 Power Management \nControl Parameter  RW The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 10_0001b.  \n14 RX Polarity Inversion \nDisable  HwInt  \nRO The default value may be changed by the status of strapped pin, SMBus or auto -loading \nfrom EEPROM.  \n \nReset to the status of RXPOLINV_DIS strapped pin.  \n15 Compliance pattern \nParity Control Disable  RO The default value ma y be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n20:16  C_DRV_LVL_3P5_NOM RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 1_0011b  \n25:21  C_DRV_LVL_6P0_NOM RO The default value may be changed by SMBus or a uto-loading from EEPROM.  \n \nReset to  10_011b  \n30:26  C_DRV_LVL_HALF_NOM  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  000_10b  \n31 Reserved  RsvdP  Not Support.  \n \n7.2.44  SWITCH OPERATION MODE –  OFFSET 74h (Downstream Port)  \n \nBIT FUN CTION  TYPE  DESCRIPTION  \n7:0 Reserved  RsvdP  Not Support.  \n13:8 Power Management \nControl Parameter  RW The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 10_0001b.  \n14 RX Polarity Inversion Disable  RO The default value may be cha nged by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n15 Compliance Pattern \nParity Control Disable  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n20:31 Reserved  RsvdP  Not Support.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 61 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.45  XPIP_CSR2 – OFFSET 78h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 XPIP_CSR2  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0080 h. \n \n7.2.46  PHY PARAMETER 1 – OFFSET 7 8h (Upstream Port Only)  \n      \nBIT FUNCTION  TYPE  DESCRIPTION  \n20:16 C_EMP_POST_GEN1\n_3P5_NOM  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 1_0101 b. \n25:21 C_EMP_POST_GEN2\n_3P5_NOM  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 10_101b. \n30:26 C_EMP_POST_GEN2\n_6P0_NOM  RO The defa ult value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 111_01b. \n31 Reserved  RsvdP  Not Support.  \n \n7.2.47  PHY PARAMETER 2 – OFFSET 7Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n3:0 C_TX_PHY_  \nLATENCY  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 7h. \n6:4 C_REC_DETEC_  \nUSEC  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 010b. \n7 Reserved  RsvdP  Not Support.  \n8 P_CDR_FREQLOOP_\nEN RO The default value may be changed by SMBus or auto -loading  from EEPROM.  \n \nReset to 1b. \n10:9 P_CDR_  \nTHRESHOLD  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 10b. \n12:11  P_CDR_FREQLOOP_GAIN  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 11b. \n15:13  Reserved  RsvdP  Not Support.  \n16 P_DRV_LVL_MGN_DELATA_EN  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  0b. \n17 P_DRV_LVL_NOM_DELATA_EN  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  0b. \n18 P_EMP_POST _MGN\n_DELATA_EN  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  0b. \n19 P_EMP_POST _NOM\n_DELATA_EN  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  0b. \n21:20  P_RX _SIGDET_LVL RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  01b. \n25:22  P_RX_EQ_1  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  0000 b. \n \n \n \n \nPI7C9X2G 404SV  Page 62 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n29:26  P_RX_EQ_2  RO The default value may be ch anged by SMBus or auto -loading from EEPROM.  \n \nReset to 0000b.  \n30 P_TXSWING  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  0b. \n31 Reserved  RsvdP  Not Support.  \n \n7.2.48  XPIP_CSR3 – OFFSET 80h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 XPIP_CSR3  RW The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  000F_0000 h. \n \n7.2.49  XPIP_CSR4 – OFFSET 84h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 XPIP_CSR4  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to  0000_0000h.  \n \n7.2.50  XPIP_CSR5 – OFFSET 88h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n29:0 XPIP_CSR5  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 7308_3333 h for Upstream port . \nReset to 3308_3333 h for Downstream ports . \n30 DO_CHG_DATA_  \nRATE_CTRL RO The default value may be changed by SMBus, I2C or auto -loading from EEPROM.  \n \nReset to 1b  (Upstream Port).  \nReset to 0b (Downstream Ports).  \n31 Gen1_Cap_Only  RO The default value may be changed by SMBus, I2C or auto -loading from EEPROM.  \n \n0b: GEN 2 capability  \n1b: GEN 1 capability  \n \nReset to 0b. \n \n7.2.51  TL_CSR 0 – OFFSET 8Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 TX_SOF_FORM  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b. \n1 PM Data Select \nRegister R/W \nCapability  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b. \n2 FC_UPDATE_MODE  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b. \n3 4K Boundary Check \nEnable  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b. \n \n \n \n \nPI7C9X2G 404SV  Page 63 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n4 FIFOERR_FIX_SEL  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b. \n5 MW Overpass Disable  RW The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b. \n6 Ordering Frozen \nDisable  RW Disable the RO ordering rule.  \nThe default value may be changed by SMBus or auto -loading from EEPROM  \n \nReset to 0b. \n7 Reserved  RsvdP  Not Support.  \n8:9 DO_CHG_DATA_CN\nT_SEL RO The trying number for doing change data  rate. The default value may be changed by \nSMBus or auto -loading from EEPROM.  \n \nReset to 00 b. \n10 Port Disable  RO Disable this port. The default value may be changed by SMBus or auto -loading from \nEEPROM.  \n \nReset to 0b. \n11 Reset Select  RO Reset select (upstr eam port only). The default value may be changed by SMBus or auto -\nloading from EEPROM.  It is valid for up port only.  \n \nReset to 1 b for up port.  \nReset to 0b for down port.  \n12 Power Saving Enable  HWIni\nt 0b: power saving disable  \n1b: power saving enable.  \n15:13 Reserved  RsvdP  Not Support.  \n23:16  XPIP_CSR6  RO XPIP_CSR6 Value. The default value may be changed by SMBus or auto -loading from \nEEPROM.  \n \nReset to 79 h. \n25:24  REV_TS_CTR  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0 0b. \n29:26  MAC Control \nParameter  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0 h. \n30 Reserved  RsvdP  Not Support.  \n31 P35_GEN2_MODE  RO The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0 b. \n \n7.2.52  PHY PARAMETER 3 – OFFSET 90h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n6:0 PHY Parameter 3 (per \nlane)  RO PHY ’s Lane mode . \n \nReset to  000_0000 b. \n14:7 Reserved  RsvdP  Not Support.  \n31:15  PHY Parameter 3 \n(global)  RO PHY ’s delta value setting.  \n \nReset to  0001h. \n \n7.2.53  PHY PARAMETER 4  - OFFSET 94h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 PHY TX Margin  RO Reset to 116 Bh. \n23:16  Multilane RXEQ  RO Upstream Port only .   \n \nReset to 86 h for Upstream Port.  \nReset to 00h for Downstream Port s. \n31:24  Reserved  RsvdP  Not Support.  \n \n \n \n \nPI7C9X2G 404SV  Page 64 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.54  OPERA TION MODE  –OFFSET 98h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Operation mode  RO {7\'d0, VC0_NEGO_PENDING, SCAN_MODE, PKG_SEL[1:0], PHY_MODE, \nDEBUG_MODE, FAST_MODE, IDDQB, SROM_BYPASS};  \n \nReset to 01 22h. \n20:16  Clock buffer control  HwInt  \nRO For Reference clo ck buffer control. The default value may be changed by the status of \nstrapped pin, SMBus or auto -loading from EEPROM.  \n \nBit[20]: Reset to the status of CLKBUF_PD strapped pin.  \nBit[19:16]: Reset to Fh. \n \nBit[20]: enable or disable reference clock outputs  \n     0b: enable reference clock outputs  \n     1b: disable reference clock outputs  \nBit[1 9:16]: enable or disable REFCLKO_P/N[ 3:0] \n     0b: disable  \n     1b: enable  \n31:21  Reserved  RsvdP  Not Support.  \n \n7.2.55  LTSSM DEBUG CONTROL REGISTER – OFFSET 9Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n1:0 Debug Port Select  RW Debug port select.  \n \nReset to 00b.  \n5:2 Trigger  Sel RW Select trigger point.  \n \n0001b: trigger from Detect state  \n0010b: trigger from Polling state  \n0011b: trigger from Configuration state  \n0100b: trigger from L0 state  \n0101b:  trigger from L0s state  \n0110b: trigger  from L1 state  \n0111b: trigger from L2 state  \n1000b: trigger from Disable state  \n1001b: trigger from Hot Reset state  \n1010b: trigger from Loopback state  \n1011b: trigger from Recovery state  \nOthers: Reserved  \n \nReset to 0h \n6 Clear RW When set, it will clear the embedded debug data buffer.  \n \nReset to 0b  \n31:7 Reserved  RsvdP  Not Support.  \n \n7.2.56  LTSSM DEBUG DATA OUTPUT REGSITER – OFFSET ACh  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Debug Data Output  RO It can be accessed by I2C/SMBUS only.  \n \n7.2.57  SSID/SSVID  CAPABILITY  REGISTER – OFFSET B0h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 SSID/SSVID \nCapabilities ID  RO Read as 0Dh to indicate that these are SSID/SSVID capability registers . \n \n \n \n \nPI7C9X2G 404SV  Page 65 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:8 Next Item Pointer  RO Pointer points  to the PCI Express capabili ty register.  \n \nReset to C0h. \n31:16  Reserved  RsvdP  Not Support.  \n \n7.2.58  SUBSYSTEM ID REGISTER – OFFSET B 4h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 SSVID  RO It indicates the sub -system vendor id. The default value may be changed by SMBus or \nauto-loading from EEPROM.  \n \nReset to 0000h.  \n31:16  SSID  RO It indicates the sub -system device id. The default value may be changed by SMBus or \nauto-loading from EEPROM.  \n \nReset to 0000h.  \n \n7.2.59  GPIO CONTROL REGISTER –  OFFSET B8h (Upstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 GPIO  [0] Input  HwInt  \nRO State of GPIO  [0] pin  \n1 GPIO  [0] Output \nEnable  RW 0b: GPIO  [0] is an input pin  \n1b: GPIO  [0] is an output pin  \n \nReset to 0 b. \n2 GPIO  [0] Output \nRegister  RW Value of this bit will be output to GPIO  [0] pin if GPIO  [0] is configured as an o utput \npin. \n \nReset to 0 b. \n3 Reserved  RsvdP  Not Support.  \n4 GPIO  [1] Input  HwInt  \nRO State of GPIO  [1] pin . \n5 GPIO  [1] Output \nEnable  RW 0b: GPIO  [1] is an input pin  \n1b: GPIO  [1] is an output pin  \n \nReset to 0 b. \n6 GPIO  [1] Output \nRegister  RW Value of this bit  will be output to GPIO  [1] pin if GPIO  [1] is configured as an output \npin. \n \nReset to 0 b. \n7 Reserved  RsvdP  Not Support.  \n8 GPIO  [2] Input  HwInt  \nRO State of GPIO  [2] pin  \n9 GPIO  [2] Output \nEnable  RW 0b: GPIO  [2] is an input pin  \n1b: GPIO  [2] is an output pi n \n \nReset to 0 b. \n10 GPIO  [2] Output \nRegister  RW Value of this bit will be output to GPIO  [2] pin if GPIO  [2] is configured as an output \npin. \n \nReset to 0 b. \n11 Reserved  RsvdP  Not Support.  \n12 GPIO  [3] Input  HwInt  \nRO State of GPIO  [3] pin . \n13 GPIO  [3] Outpu t \nEnable  RW 0b: GPIO  [3] is an input pin  \n1b: GPIO  [3] is an output pin  \n \nReset to 0 b. \n \n \n \n \nPI7C9X2G 404SV  Page 66 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n14 GPIO  [3] Output \nRegister  RW Value of this bit will be output to GPIO  [3] pin if GPIO  [3] is configured as an output \npin. \n \nReset to 0 b. \n15 Reserved  RsvdP  Not Support.  \n16 GPIO  [4] Input  HwInt  \nRO State of GPIO  [4] pin . \n17 GPIO  [4] Output \nEnable  RW 0b: GPIO  [4] is an input pin  \n1b: GPIO  [4] is an output pin  \n \nReset to 0 b. \n18 GPIO  [4] Output \nRegister  RW Value of this bit will be output to GPIO  [4] pin if GPIO  [4] is config ured as an output \npin. \n \nReset to 0 b. \n19 Reserved  RsvdP  Not Support.  \n20 GPIO  [5] Input  HwInt  \nRO State of GPIO  [5] pin . \n21 GPIO  [5] Output \nEnable  RW 0b: GPIO  [5] is an input pin  \n1b: GPIO  [5] is an output pin  \n \nReset to 0 b. \n22 GPIO  [5] Output \nRegister  RW Value of this bit will be output to GPIO  [5] pin if GPIO  [5] is configured as an output \npin. \n \nReset to 0 b. \n23 Reserved  RsvdP  Not Support.  \n24 GPIO  [6] Input  HwInt  \nRO State of GPIO  [6] pin . \n25 GPIO  [6] Output \nEnable  RW 0b: GPIO  [6] is an input pin  \n1b: GPIO  [6] is an output pin  \n \nReset to 0 b. \n26 GPIO  [6] Output \nRegister  RW Value of this bit will be output to GPIO  [6] pin if GPIO  [6] is configured as an output \npin. \n \nReset to 0 b. \n27 Reserved  RsvdP  Not Support.  \n28 GPIO  [7] Input  HwInt  \nRO State of GPIO  [7] pin . \n29 GPIO  [7] Output \nEnable  RW 0b: GPIO  [7] is an input pin  \n1b: GPIO  [7] is an output pin  \n \nReset to 0 b. \n30 GPIO  [7] Output \nRegister  RW Value of this bit will be output to GPIO  [7] pin if GPIO  [7] is configured as an output \npin. \n \nReset to 0 b. \n31 Reserved  RsvdP  Not Support.  \n \n7.2.60  EEPROM CONTROL REGISTER – OFFSET BCh (Upstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 EEPROM Start  RW Starts the EEPROM read or write cycle . \n \nReset to 0b.  \n1 EEPROM Command RW Sends the command to the EEPROM . \n \n0b: EEPROM read  \n1b: EEPROM write  \n \nReset to 0 b. \n \n \n \n \nPI7C9X2G 404SV  Page 67 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n2 EEPROM Error Status  RO 1b: EEPROM acknowledge was not received during the EEPROM cycle . \n \nReset to 0 b. \n3 EEPROM Autoload \nSuccess  RO 0b: EEPROM autoload was unsuccessful or is disabled  \n1b: EEPROM autolad occurred successfully  after RESET.  Configuration registers were \nloaded with values in the EEPROM  \n \nIt will be cleared when read at this bit.  \n4 EEPROM Autoload Status  RO 0b: EEPROM autoload was unsuccessful or is disabled  \n1b: EEPROM autoload occurred successfully after PREST. C onfiguration registers were \nloaded with values stored in the EEPROM  \n \nReset to 0b.  \n5 EEPROM Autoload Disable  RW 0b: EEPROM autoload enabled  \n1b: EEPROM autoload disabled  \n \nReset to 1b.  \n7:6 EEPROM Clock Rate  RW Determines the frequency of the EEPROM clock, w hich is derived from the primary \nclock . \n \n00b: Reserved  \n01b: PEXCLK / 1024 (PEXCLK is 125MHz)  \n10b: Reserved  \n11b: Test Mode  \n \nReset to 0 1b. \n \n7.2.61  EEPROM ADDRESS REGISTER – OFFSET BCh (Upstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n8 Reserved  RsvdP  Not Suppor t. \n15:9 EEPROM Address  RW Contains the EEPROM address . \n \nReset to 0 0h. \n \n7.2.62  EEPROM DATA REGISTER – OFFSET BCh (Upstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:16  EEPROM Data  RW Contains the data to be written to the EEPROM. After completion of a read c ycle, this \nregister will contain the data from the EEPROM . \n \nReset to 0000h.  \n \n7.2.63  PCI EXPRESS CAPABILITY REGISTER – OFFSET C0h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Enhanced Capabilities \nID RO Read as 10h to indicate that these are PCI express enhanced capabilit y registers . \n15:8 Next Item Pointer  RO Read as 00h.  No other ECP registers.  \n19:16  Capability Version  RO Read as 0 010b  to indicate the device is compliant to Revision .2.0a  of PCI Express Base \nSpecifications.  \n23:20  Device/Port Type  RO Indicates the type of PCI Express logical device . \n Reset to 0101b for Upstream port . \nReset to 0110b for Downstream ports . \n \n \n \n \nPI7C9X2G 404SV  Page 68 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n24 Slot Implemented  HwIn t \nRO When set, indicates that the PCIe Link associated with this Port is connected to a slot. \nThis field is valid for downs tream port of the Switch. The default value may be changed \nby the status of strapped pin, SMBus or auto -loading from EEPROM.  \n \nReset to the status of SLOT_IMP strapped pin.  \n29:25  Interrupt Messa ge \nNumber  RO Read as 0 b. No MSI messages are generated in the transparent mode.  \n31:30  Reserved  RsvdP  Not Support.  \n \n7.2.64  DEVICE  CAPABILITIES REGISTER – OFFSET C4h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n2:0 Max_Payload_Size \nSupported  HwIn t \nRO Indicates the maximum payload size that the device can support for TLPs.  \nEach port of the Switch supports 512 bytes max payload size.  The default value may be \nchanged by the status of strapped pin, SMBus or auto -loading from EEPROM.  \n \nReset to 001b when PL_512B strapped pin is set to 0.  \nReset to 010b when PL_512B strapped pin is set to 1.  \n4:3 Phantom Functions \nSupported RO Indicates the support for use of unclaimed function numbers as Phantom functions. \nRead as 00b, since the Switch does not act as a requester. \n \nReset to 00b.  \n5 Extended Tag Field \nSupported RO Indicates the maximum support ed size of Tag field as a Requester. Read as 0, since the \nSwitch does not act as a requester.  \n \nReset to 0b.  \n8:6 Endpoint L0s \nAcceptable Latency  RO Acceptable total latency that an Endpoint can withstand due to the transition from L0s \nstate to the L0 state.  For Switch, the ASPM software would not check this value.  \n \nReset to 000b.  \n11:9 Endpoint L1 Acceptable Latency  RO Acceptable total latency that an Endpoint can withstand due to the transition from L1 \nstate to the L0 state. For Switch, the ASPM software wo uld not check this value.  \n \nReset to 000b.  \n14:12  Reserved  RsvdP  Not Support.  \n15 Role_Based Error \nReporting  RO When set, indicates that the device implements the functionality originally defined in \nthe Error Reporting ECN. The default value may be changed by SMBus or auto -loading \nfrom EEPROM.  \n \nReset to 1b.  \n17:16 Reserved  RsvdP  Not Support.  \n25:18  Captured Slot Power Limit Value  RO It applies to Upstream Port only. In combination with the Slot Power Limit Scale value, \nspecifies the upper limit on power supp lied by slot.  \n \nThis value is set by the Set_Slot_Power_Limit message or hardwired to 00h.  \n \nReset to 00h.  \n27:26  Captured Slot Power \nLimit Scale  RO It applies to Upstream Port only. Specifies the scale used for the Slot Power Limit \nValue.  \n \nThis value is set  by the Set_Slot_Power_Limit message or hardwired to 00b.  \n \nReset to 00b.  \n31:28  Reserved  RsvdP  Not Support.  \n \n7.2.65  DEVICE  CONTROL REGISTER – OFFSET C8h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Correctable Error \nReporting Enable  RW 0b: Disable Correctable Error Reporti ng \n1b: Enable Correctable Error Reporting  \n \nReset to 0b.  \n \n \n \n \nPI7C9X2G 404SV  Page 69 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n1 Non-Fatal Error \nReporting Enable  RW 0b: Disable Non -Fatal Error Reporting  \n1b: Enable Non -Fatal Error Reporting  \n \nReset to 0b.  \n2 Fatal Error Reporting \nEnable  RW 0b: Disable Fatal Error Reporting  \n1b: Enable Fatal Error Reporting  \n \nReset to 0b.  \n3 Unsupported Request \nReporting Enable  RW 0b: Disable Unsupported Request Reporting  \n1b: Enable Unsupported Request Reporting  \n \nReset to 0b.  \n4 Enable Relaxed Ordering  RO When set, it permits the device to set the  Relaxed Ordering bit in the attribute field of \ntransaction. Since the Switch can not either act as a requester or alter the content of \npacket it forwards, this bit always returns ‘0’ when read. \n \nReset to 0b.  \n7:5 Max_Payload_Size  RW This field sets maximu m TLP payload size for the device.  Permissible values that can \nbe programmed are indicated by the Max_Payload_Size Supported in the Device \nCapabilities register. Any value exceeding the Max_Payload_Size Supported written to \nthis register results into clam ping to the Max_Payload_Size Supported value.  \n \nReset to 000b.  \n8 Extended Tag Field \nEnable  RW Does not apply to PCI Express Switch. Returns ‘0’ when read.  \n \nReset to 0 b. \n9 Phantom Function \nEnable  RW Does not apply to PCI Express Switch. Returns ‘0’ when re ad. \n \nReset to 0b.  \n10 Auxiliary (AUX) \nPower PM Enable  RWS  When set, indicates that a device is enabled to draw AUX power independent of PME \nAUX power.  \n \nReset to 0b.  \n11 Enable No Snoop RO When set, it permits to set the No Snoop bit in the attribute field of transaction. Since the \nSwitch can not either act as a requester or alter the content of packet it forwards, this bit \nalways returns ‘ 0’ when read.  \n      \nReset to 0b.  \n14:12  Max_Read_  \nRequest_Size RO This field sets the maximum Read Request size for the device as a Requester.  \nSince the Switch does not generate read request by itself, these bits are hardwired to \n000b.  \n \nReset to 000b.  \n15 Reserved  RsvdP  Not Support.  \n \n7.2.66  DEVICE  STATUS REGISTER –  OFFSET C8h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n16 Correctable Error \nDetected  RW1C Asserted when correctable error is detected. Errors are logged in this register regardless \nof whether error reporting is enabled or not in the Device Control register.  \n \nReset to 0b.  \n17 Non-Fatal Error \nDetected  RW1C Asserted when non -fatal err or is detected. Errors are logged in this register regardless of \nwhether error reporting is enabled or not in the Device Control register.  \n \nReset to 0b.  \n18 Fatal Error Detected  RW1C Asserted when fatal error is detected. Errors are logged in this register  regardless of \nwhether error reporting is enabled or not in the Device Control register.  \n \nReset to 0b.  \n19 Unsupported Request \nDetected  RW1C  Asserted when unsupported request is detected. Errors are logged in this register \nregardless of whether error repor ting is enabled or not in the Device Control register.  \n \nReset to 0b.  \n \n \n \n \nPI7C9X2G 404SV  Page 70 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n20 AUX Power Detected  RO Asserted when the AUX power is detected by the Switch  \n \nReset to 1b.  \n21 Transactions Pending  RO Each port of Switch does not issue Non -posted Requests on its own  behalf, so this bit is \nhardwired to 0b.  \n \nReset to 0b.  \n31:22  Reserved  RsvdP  Not Support.  \n \n7.2.67  LINK  CAPABILITIES REGISTER – OFFSET CCh \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n3:0 Maximum Link Speed  RO Indicate s the maximum speed of the Express link . \n \n0001b: 2.5Gb/s  \n0010b: 5.0Gb/s  \nOtherwise: Reserved  \n \nReset to 0010b.  \n 9:4 Maximum Link Width  RO Indicates the maximum wid th of the given PCIe Link.  \n \nReset to 00 _0001b (x1). \n11:10  Active State Power \nManagement (ASPM) \nSupport  RO Indicates the level of ASPM supported on the  given PCIe Link. Each port of Switch  \nsupports L0s and L1 entry. The default value may be changed by SMBus or auto -loading \nfrom EEPROM.  \n \nReset to 11b. \n14:12  L0s Exit Latency  RO Indicates the L0s exit latency for the given PCIe Link.  \nThe length of time thi s port requires to complete transition from L0s to L0 is in the range \nof 256ns to less than 512ns. The default value may be changed by SMBus or auto -\nloading from EEPROM.  \n \nReset to 011b.  \n17:15  L1 Exit  Latency  RO Indicates the L1 exit latency for the given  PCIe Link.  \nThe length of time this port requires to complete transition from L1 to L0 is in the range \nof 16us to less than 32us. The default value may be changed by SMBus or auto -loading \nfrom EEPROM.  \n \nReset to 000b.  \n18 Clock Power \nManagement  RO For upstr eam port, a value of 1b indicates that component tolerates the removal of any \nreference clock via CLKREQ#.  The default value may be changed by SMBUS or auto -\nloading from EEPROM.  \n \nReset to 1b for Upstream port.  \nReset to 0b for Downstream ports.  \n19 Surprise  Down \nCapability Enable  RO Valid for downstream ports only.  \n \nReset to 0b for Upstream port.  \nReset to 1b for Downstream ports.  \n20 Data Link Layer \nActive Reporting \nCapable RO For a Downstream Port, this bit must be set to 1b if the component supports the op tional \ncapability of reporting the DL_Active state of the Data Link Control and Management \nState Machine. For a hot -plug capable Downstream Port, this bit must be set to 1b.  \n \nFor Upstream Port, this bit must be hardwired to 0b.  \n Reset to 0b for upstream  port. \nReset to 0b for downstream ports.  \n21 Link bw notify cap  RO Reset to 0b for Upstream  port. \nReset to 1b for Downstream ports.  \n23:21  Reserved  RsvdP  Not Support.  \n \n \n \n \nPI7C9X2G 404SV  Page 71 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:24  Port Number  RO Indicates the PCIe Port Number for the given PCIe Link. The default va lue may be \nchanged by SMBus or auto -loading from EEPROM.  \n \nReset to 00h for Port 0.  \nReset to 01h for Port 1.  \nReset to 02h for Port 2.  \nReset to 03h for Port 3.  \n \n7.2.68  LINK  CONTROL REGISTER – OFFSET D0h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n1:0 Active State Power Management (ASPM) Control  RW 00b: ASPM is Disabled  \n01b: L0s Entry Enabled  \n10b: L1 Entry Enabled  \n11b: L0s and L1 Entry Enabled  \n Note that the receiver must be capable of entering L0s even when the field is disabled.  \nReset to 00b.  \n2 Reserved  RsvdP  Not Support.  \n3 Read Completion Boundary (RCB)  RO Does not apply to PCI Express Switch. Returns ‘0’ when read.  \n \nReset to 0b.  \n4 Link Disable  RW At upstream port, it is not allowed to disable the link, so this bit is hardwired to ‘0’. For \ndownstream ports, it disables th e link when this bit is set.  \n \nReset to 0b.  \n5 Retrain Link  RW At upstream port, it is not allowed to retrain the link, so this bit is hardwired to 0b. For \ndownstream ports, it initiates Link Retraining when this bit is set.  \n \nThis bit always returns 0b when  read.  \n6 Common Clock Configuration  RW 0b: The components at both ends of a link are operating with asynchronous reference \nclock  \n1b: The components at both ends of a link are operating with a distributed common \nreference clock  \n \nReset to 0b.  \n7 Extended Sy nch RW When set, it transmits 4096 FTS ordered sets in the L0s state for entering L0 state and \ntransmits 1024 TS1 ordered sets in the L1 state for entering L0 state.  \n \nReset to 0b.  \n8 Reserved  RsvdP  Not Support.  \n9 HW A utonomous  \nWidth Disable  RW Reset to 0b . \n10 Reserved  RO \n/ \nRW For upstream Port is RO and reset to 0b.  \n \nFor downstream Port is RW and Reset to 0b.  \n11 Reserved  RO \n/ \nRW For upstream Port is RO and reset to 0b.  \n \nFor downstream Port is RW and Reset to 0b.  \n15:12 Reserved  RsvdP  Not Support.  \n \n7.2.69  LINK  STATUS REGISTER – OFFSET D0h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n19:16 Link Speed  RO Indicate the negotiated speed of the Express link:  \n  \n0001 b: 2.5 Gb/s.  \n0010 b: 5.0 Gb/s. \n \nReset to 0010b.  \n \n \n \n \nPI7C9X2G 404SV  Page 72 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n25:20  Negotiated Link Width  RO Indicates the negotiated width of the g iven PCIe link.  \n \n0001b : x1 lin k \n \nReset to 0001b . \n26 Training Error RO When set, indicates a Link training error occurred . \nThis bit is cleared by hardware upon successful training of the link to the L0 link state.  \n \nReset to 0b.  \n27 Link Training  RO When se t, indicates the link training is in progress. Hardware clears this bit once link \ntraining is complete.  \n \nReset to 0b.  \n28 Slot Clock \nConfiguration  HwInt  \nRO 0b: the Switch uses an independent clock irrespective of the presence of a reference on \nthe connecto r \n1b: the Switch uses the same reference clock that  the platform provides on the connector  \n The default value may be changed by the status of strapped pin , SMBus  or auto -loading \nfrom EEPROM.  \n \nReset to the status of SLOTCLK strapped pin.  \n29 Data Link Layer  Link \nActive  RO Indicates the status of the Data Link Control and Management State Machine. It returns a \n1b to indicate the DL_Active state, 0b otherwise.  \n \nReset to 0b.  \n31:30  Reserved  RsvdP  Not Support.  \n \n7.2.70  SLOT  CAPABILITIES REGISTER – OFFSET D4h (Downstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Attention Button \nPresent  RO When set, it indicates that an Attention Button is implemented on the chassis for this slot. \nThe default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n1 Power Controller \nPresent  RO When set, it indicates that a Power Controller is implemented for this slot. The default \nvalue may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n2 Reserved  RsvdP  Not Support.  \n3 Attention Indicator \nPresent  RO When set, it indicates that an Attention Indicator is implemented on the chassis for this \nslot. The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n4 Power Indicator \nPresent  RO When set, it indicates that a Power Indicator is implemented on the chassis for this slot. \nThe default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 0b.  \n5 Hot-Plug Surprise  RO When set, it indicates that a device present in this slot might be removed from the system \nwithout any  prior notification. The default value may be changed by SMBus or auto -\nloading from EEPROM.  \n \nReset to 0b.  \n6 Hot-Plug Capable  RO When set, it indicates that this slot is capable of supporting Hot -Plug operation. The \ndefault value may be changed by SMBus or  auto-loading from EEPROM.  \n \nReset to 0b.  \n14:7 Slot Power Limit Value  RW It applies to Downstream Port only. In combination with the Slot Power Limit Scale \nvalue, specifies the upper limit on power supplied by slot. Writes to this register also \ncause the P ort to send the Set_Slot_Power_Limit message. The default value may be \nchanged by SMBus or auto -loading from EEPROM.  \n \nReset to 00h.  \n \n \n \n \nPI7C9X2G 404SV  Page 73 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n16:15  Slot Power Limit \nScale  RW It applies to Downstream Port only. Specifies the scale used for the Slot Power Limit \nValue . Writes to this register also cause the Port to send the Set_Slot_Power_Limit \nmessage. The default value may be changed by SMBus or auto -loading from EEPROM.  \n \nReset to 00b.  \n18:17  Reserved  RsvdP  Not Support.  \n31:19  Physical Slot \nNumber  RO It indicates the  physical slot number attached to this Port. The default value may be \nchanged by SMBus or auto -loading from EEPROM.  \n \nReset to 0000h.  \n \n7.2.71  SLOT  CONTROL REGISTER –  OFFSET D8h (Downstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Attention Button Pressed Enab le RW When set, it enables the generation of Hot -Plug interrupt or wakeup event on an \nattention button pressed event.  \n \nReset to 0b. \n1 Power Fault Detected \nEnable  RW When set, it enables the generation of Hot -Plug interrupt or wakeup event on a power \nfault event. \n \nReset to 0b. \n2 Reserved  RsvdP  Not Support.  \n3 Presence Detect \nChanged Enable  RW When set, it enables the generation of Hot -Plug interrupt or wakeup event on a presence \ndetect changed event. \n \nReset to 0b. \n4 Command Completed \nInterrupt Enable  RW When set, it enables the generation of Hot -Plug interrupt when the Hot -Plug Controller \ncompletes a command . \n \nReset to 0b. \n5 Hot-Plug Interrupt \nEnable  RW When set, it enables generation of Hot -Plug interrupt on enabled Hot -Plug events.  \n \nReset to 0b. \n7:6 Attention Indicator \nControl  RW Controls the display of Attention Indicator.  \n \n00b: Reserved  \n01b: On  \n10b: Blink  \n11b: Off  \n Writes to this register also cause the Port to send the ATTENTION_INDICATOR_* \nMessages.  \n \nReset to 11b.  \n9:8 Power Indicator \nControl  RW Controls the display of Power Indicator.  \n \n00b: Reserved  \n01b: On  \n10b: Blink  \n11b: Off  \n \nWrites to this register also cause the Port to send the POWER_INDICATOR_* Messages.  \n \nReset to 11b.  \n10 Power Controller Control  RW 0b: reset the power state of the slot (Powe r On)  \n1b: set the power state of the slot (Power Off)  \n \nReset to 0b.  \n11 Reserved  RsvdP  Not Support.  \n12 Data Link Layer State \nChanged Enable  RW If the Data Link Layer Link Active capability is implemented, when set to 1b, this field \nenables software notifi cation when Data Link Layer Link Active field is changed.  \n \nReset to 0b.  \n \n \n \n \nPI7C9X2G 404SV  Page 74 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:13  Reserved  RsvdP  Not Support.  \n \n7.2.72  SLOT  STATUS REGISTER  – OFFSET D8h (Downstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n16 Attention Button \nPressed  RW1C  When set, it indicates the Attention Button is pressed.  \n \nReset to 0b. \n17 Power Fault Detected  RW1C  When set, it indicates a Power Fault is detected.  \n \nReset to 0b. \n18 MRL Sensor Changed  RO When set, it indicates a MRL Sensor Changed is detected.  \n \nReset to 0b. \n19 Presence Detect Changed  RW1C  When set, it indicates a Presence Detect Changed is detected.  \n \nReset to 0b. \n20 Command Completed  RW1C  When set, it indicates the Hot-Plug Controller completes a n issued  command . \n \nReset to 0b. \n21 MRL Sensor State  RO Reflects the status o f MRL Sensor.  \n \n0b:  MRL Closed  \n1b:  MRL Opened  \n \nReset to 0b. \n22 Presence Detect State HwInt  \nRO Indicates the presence of a card in the slot.  \n 0b: Slot Empty  \n1b: Card Present in slot  \n \nThis register is implemented on all Downstream Ports that implement slots. For \nDownstream Ports not connected to slots (where the Slot Implemented bit of the PCI \nExpress Capabilities register is 0b), this bit returns 1b.  \n \nReset to 0b when PRSNT strapped pin is set to 1.  \nReset to 1b when PRSNT strapped pin is set to 0.  \n23 Rese rved RsvdP  Not Support.  \n24 Data Link Layer State \nChanged  RW1C  This bit is set when the value reported in the Data Link Layer Link Active field of the \nLink Status register is changed. \n \nReset to 1b.  \n31:25  Reserved  RsvdP  Not Support.  \n \n7.2.73  DEVICE  CAPABILITIES REGISTER 2 – OFFSET E4h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n10:0 Device Capabilities 2  RO Reset to 0 00h. \n11 LTR Mechanism \nSupported RO A value of 1b indicates support  for the optional Latency Tolerance Reporting (LTR) \nmechanism . \n \nReset to 1b. \n17:12  Device  Capabilities 2  RO Reset to 00h. \n19:18  OBFF Supported RO This field indicates if OBFF is supported . \n \nReset to 01 b. \n31:20 Device Capabilities 2  RO Reset to 0 00h. \n \n \n \n \n \nPI7C9X2G 404SV  Page 75 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.74  DEVICE CONTROL REGISTER 2 –  OFFSET E8h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n9:0 Device Control 2  RO Reset to 0 00h. \n10  LTR Mechanism \nEnable  RW Enable LTR Mechanism  \n \nReset to 0 b. \n12:11 Device Control 2  RO Reset to 0 0b. \n14:13  OBFF Enable  RW Enable OBFF  Mechanism and select the signaling method . \n \nReset to 0 0b. \n15 Device Control 2  RO Reset to 0 b. \n \n7.2.75  DEVIDE STATUS REGISTER 2 – OFFSET E 8h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:16  Device Status 2  RO Reset to 0 000_0000h.  \n \n7.2.76  LINK CAPABILITIES REGISTER 2 –  OFFSET ECh  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Link Capabilities 2  RO Reset to 0 000_0000h.  \n \n7.2.77  LINK CONTROL REGISTER 2 –  OFFSET F0h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n3:0 Target Link Speed RWS Reset to 0010 b. \n4 Enter Compliance  RWS  Reset to 0 b. \n5 HW_AutoSpeed_Dis  RW Reset to 0 b. \n6 Select_Deemp  RO Reset to 0 b for Upstream port . \nReset to 1b for Downstream port s. \n9:7 Tran_Margin  RWS  Reset to 000 b. \n10 Enter Modify \nCompliance  RWS  Reset to 0b. \n11 Compliance SOS  RWS  Reset to 0 b. \n12 Compliance_Deemp  RWS  Reset to 0 b. \n15:13  Reserved  RsvdP  Not Support.  \n \n7.2.78  LINK STATUS REGISTER 2 –  OFFSET F0 h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n16 Current De-emphasis \nLevel RO Reset to 0b.  \n31:17  Link Status 2  RO Reset to 0000h.  \n \n7.2.79  SLOT CAPABILITIES REGISTER 2 –  OFFSET F4h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Slot Capabilities 2  RO Reset to 0000_0000h.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 76 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.80  SLOT CONTORL REGISTER 2 – OFFSET F8h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Slot Control 2  RO Reset to 0000h.  \n \n7.2.81  SLOT STATUS REGISTER 2 –  OFFSET F8 h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:16  Slot Status 2  RO Reset to 0000h.  \n \n7.2.82  PCI EXPRESS ADVANCED ERROR REPORTING CAPABILITY  REGISTER – \nOFFS ET 100h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Extended Capabilities \nID RO Read as 0001h to indicate that these are PCI express extended capability registers for \nadvance er ror reporting.  \n19:16  Capability Version  RO Read as 1h.  Indicates PCI -SIG defined PCI Express capability structure version number.  \n31:20  Next Capability Offset RO Pointer points to the PCI Express  Extended VC capability  register . \n \nReset to 140h . \n \n7.2.83  UNCORRECTABLE ERROR STATUS  REGISTER – OFFSET 104h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Train ing Error Status  RW1C\nS When set, indicates that the Training Error event has occurred .  \n \nReset to 0b.  \n3:1 Reserved  RsvdP  Not Support.  \n4 Data Link Protocol \nError Status  RW1C\nS When set, indicates that the Data Link Protocol Error event has occurred .  \n \nRese t to 0b.  \n5 Surprise Down Error \nStatus  RW1C\nS When set, indicates that the Surprise Down Error event has occurred. It is valid for \ndownstream ports only.  \n \nReset to 0b.  \n11:6 Reserved  RsvdP  Not Support.  \n12 Poisoned TLP Status  RW1C\nS When set, indicates that a Poisoned TLP has been received or generated.  \n \nReset to 0b.  \n13 Flow Control Protocol \nError Status  RW1C\nS When set, indicates that the Flow Control Protocol Error event has occurred .  \n \nReset to 0b.  \n14 Completion Tim eout \nStatus  RW1C\nS When set, indicates t hat the Completion Timeout event has occurred .  \n \nReset to 0b.  \n15 Completer Abort  \nStatus  RW1C\nS When set, indicates that the Completer Abort event has occurred .  \n \nReset to 0b.  \n16 Unexpected \nCompletion Status  RW1C\nS When set, indicates that the Unexpected Co mpletion event has occurred .  \n \nReset to 0b.  \n17 Receiver Overflow Status  RW1C\nS When set, indicates that the Receiver Overflow event has occurred . \n \nReset to 0b.  \n18 Malformed TLP Status  RW1C\nS When set, indicates that a Malformed TLP has been received.  \n \nReset to 0b.  \n \n \n \n \nPI7C9X2G 404SV  Page 77 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n19 ECRC Error Status  RW1C\nS When set, indicates that an ECRC Error has been detected.  \n \nReset to 0b.  \n20 Unsupported Request \nError Status  RW1C\nS When set, indicates that an Unsupported Request event has occurred.  \n \nReset to 0b.  \n21 ACS Violation S tatus  RW1C\nS When set, indicates that an ACS Violation event has occurred  \n \nReset to 0b.  \n31:21  Reserved  RsvdP  Not Support.  \n \n7.2.84  UNCORRECTABLE ERROR MASK  REGISTER – OFFSET 108h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Training Error Mask  RWS  When set, the Training Er ror event is not logged in the Header Log register and not \nissued as an Error Message to RC either.  \n \nReset to 0b.  \n3:1 Reserved  RsvdP  Not Support.  \n4 Data Link Protocol Error Mask  RWS  When set, the Data Link Protocol Error event is not logged in the Heade r Log register \nand not issued as an Error Message to RC either.  \n \nReset to 0b.  \n5 Surprise Down Error \nMask  RWS  When set, the Surprise Down Error event is not logged in the Header Log register and \nnot issued as an Error Message to RC either. It is valid for downstream ports only.  \n \nReset to 0b.  \n11:6 Reserved  RsvdP  Not Support.  \n12 Poisoned TLP Mask RWS  When set, an event of Poisoned TLP has been received or generated is not logged in the \nHeader Log register and not issued as an Error Message to RC either.  \n \nReset to 0b.  \n13 Flow Control Protocol \nError Mask  RWS  When set, the Flow Control Protocol Error event is not logged in the Header Log register \nand not issued as an Error Message to RC either.  \n \nReset to 0b.  \n14 Completion Tim eout \nMask  RWS  When set, the Comple tion Timeout event is not logged in the Header Log register and \nnot issued as an Error Message to RC either.  \n \nReset to 0b.  \n15 Completer Abort  Mask  RWS  When set, the Completer Abort event is not logged in the Header Log register and not \nissued as an Error  Message to RC either.  \n \nReset to 0b.  \n16 Unexpected \nCompletion Mask  RWS  When set, the Unexpected Completion event is not logged in the Header Log register \nand not issued as an Error Message to RC either.  \n \nReset to 0b.  \n17 Receiver Overflow Mask  RWS  When set, the Receiver Overflow event is not logged in the Header Log register and not \nissued as an Error Message to RC either.  \n \nReset to 0b.  \n18 Malformed TLP Mask  RWS  When set, an event of Malformed TLP has been received is not logged in the Header \nLog regist er and not issued as an Error Message to RC either. \n \nReset to 0b.  \n19 ECRC Error Mask  RWS  When set, an event of ECRC Error has been detected is not logged in the Header Log \nregister and not issued as an Error Message to RC either.  \n \nReset to 0b.  \n20 Unsupported Request \nError Mask  RWS  When set, the Unsupported Request event is not logged in the Header Log register and \nnot issued as an Error Message to RC either. \n \nReset to 0b.  \n21 ACS Violation Mask  RWS  Reset to 0b  \n \n \n \n \nPI7C9X2G 404SV  Page 78 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:22 Reserved  RsvdP  Not Support.  \n \n7.2.85  UNCORRECTABLE ERROR SEVERITY R EGISTER – OFFSET 10Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Training Error \nSeverity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 1b.  \n3:1 Reserved  RsvdP  Not Support.  \n4 Data Link Protocol Error Severity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 1b.  \n5 Surprise Down Error Severity  RWS  0b: Non -Fata \n1b: Fatal  \n It is valid for downstreams port only.  \n \nReset to 1b.  \n11:6 Reserved  RsvdP  Not Support.  \n12 Poisoned TLP Severity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 0b.  \n13 Flow Control Protocol Error Severity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 1b.  \n14 Completion Tim eout \nError Severity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 0b.  \n15 Completer Abort  \nSeverity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 0b.  \n16 Unexpected \nCompletion Severity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 0b.  \n17 Receiver Overflow \nSeverity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 1b.  \n18 Malformed TLP \nSeverity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 1b.  \n19 ECRC Error Severity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 0.  \n20 Unsupported Request \nError Severity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 0b.  \n21 ACS violation \nSeverity  RWS  0b: Non -Fatal  \n1b: Fatal  \n \nReset to 0b.  \n31:21  Reserved  RsvdP  Not Support.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 79 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.86  CORRECTABLE ERROR STATUS  REGISTER – OFFSET 11 0 h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Receiver Error Status  RW1CS When set, the Receiver Error event is detected.  \n \nReset to 0b.  \n5:1 Reserved  RsvdP  Not Support.  \n6 Bad TLP  Status  RW1CS When set, the event of Bad TLP has been received is detected.  \n \nReset to 0b.  \n7 Bad DLLP Status  RW1CS When set, the event of Bad D LLP has been received is detected.  \n \nReset to 0b.  \n8 REPLAY_NUM \nRollover Status  RW1CS When set, the REPLAY_NUM Rollover event is detected.  \n \nReset to 0b.  \n11:9 Reserved  RsvdP  Not Support.  \n12 Replay Timer Tim eout \nStatus  RW1CS When set, the Replay Timer Timeo ut event is detected.  \n \nReset to 0b.  \n13 Advisory Non -Fatal \nError  status  RW1CS  When set, the Advisory Non -Fatal Error event is detected.  \n \nReset to 0b.  \n31:14 Reserved  RsvdP  Not Support.  \n \n7.2.87  CORRECTABLE ERROR MASK  REGISTER – OFFSET 114  h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Receiver Error Mask  RWS  When set, the Receiver Error event is not logged in the Header Log register and not \nissued as an Error Message to RC either.  \n \nReset to 0b.  \n5:1 Reserved  RsvdP  Not Support.  \n6 Bad TLP  Mask  RWS  When set, the event of Bad  TLP has been received is not logged in the Header Log \nregister and not issued as an Error Message to RC either.  \n \nReset to 0b.  \n7 Bad DLLP Mask  RWS  When set, the event of Bad DLLP has been received is not logged in the Header Log \nregister and not issued as  an Error Message to RC either.  \n \nReset to 0b.  \n8 REPLAY_NUM \nRollover Mask  RWS  When set, the REPLAY_NUM Rollover event is not logged in the Header Log register \nand not issued as an Error Message to RC either.  \n \nReset to 0b.  \n11:9 Reserved  RsvdP  Not Support.  \n12 Replay Timer Tim eout \nMask  RWS  When set, the Replay Timer Timeout event is not logged in the Header Log register and \nnot issued as an Error Message to RC either.  \n \nReset to 0b.  \n13 Advisory  Non -Fatal \nError Mask  RWS  When set, the Advisory Non -Fatal Erro r event is not logged in the Header Long register \nand not issued as an Error Message to RC either.  \n \nReset to 1b.  \n31:14 Reserved  RsvdP  Not Support.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 80 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.88  ADVANCE ERROR CAPABILITIES AND CONTROL REGISTER – OFFSET 118h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n4:0 First E rror Pointer ROS It indicates the bit position of the first error reported in the Uncorrectable Error Status \nregister.  \n \nReset to 00000b.  \n5 ECRC Generation \nCapable RO When set, it indicates the Switch has the capability to generate ECRC.  \n \nReset to 1b.  \n6 ECRC Generation \nEnable  RWS  When set, it enables the generation of ECRC when needed.  \n \nReset to 0b.  \n7 ECRC Check Capable RO When set, it indicates the Switch has the capability to check ECRC.  \n \nReset to 1b.  \n8 ECRC Check Enable  RWS  When set, the function of c hecking ECRC is enabled.  \n \nReset to 0b.  \n31:9 Reserved  RsvdP  Not Support.  \n \n7.2.89  HEADER LOG REGISTER – OFFSET From 11Ch to 128h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 1st DWORD  ROS  Hold the 1st DWORD of TLP Header. The Head byte is in big endian.  \n63:32  2nd DWORD  ROS  Hold the 2nd DWORD of TLP Header. The Head byte is in big endian.  \n95:64  3rd DWORD  ROS  Hold the 3rd DWORD of TLP Header. The Head byte is in big endian.  \n127:96  4th DWORD  ROS  Hold the 4th DWORD of TLP Header. The Head byte is in big endian.  \n \n7.2.90  PCI EXPRESS VIRTUAL CHANNEL CAPABILITY  REGISTER – OFFSET 140h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Extended Capabilities \nID RO Read as 0002h to indicate that these are PCI express extended capability registers for \nvirtual channel . \n19:16  Capability Version  RO Read as 1h.  Indicates PCI -SIG defined PCI Express capability structure version number.  \n31:20  Next Capability Offset RO Pointer points to the PCI Express  Power Budgeting c apability  register . \n \nReset to 20Ch. \n \n7.2.91  PORT VC CAPABILITY REGISTER 1 – OFFSET 144h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n2:0 Extended VC Count  RO \nHwInt  It indicates the number of extended Virtual Channels in addition to the default VC \nsupported by the Switch. The default value may be changed by the status of strapped \npin, or auto-loading  from EEPR OM. \n \nBit[2:1]: Reset to 00b.  \nBit[0]: Reset to the status of VC1_EN strapped pin.  \n3 Reserved  RsvdP  Not Support.  \n6:4 Low Priority Extended VC Count  RO It indicates the number of extended Virtual Channels in addition to the default VC \nbelonging to the low -priority VC (LPVC) group. The default value may be changed by \nauto-loading from EEPROM.  \n \nReset to 000b.  \n7 Reserved  RsvdP  Not Support.  \n \n \n \n \nPI7C9X2G 404SV  Page 81 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n9:8 Reference Clock  RO It indicates the reference clock for Virtual Channels that support time -based WRR Port \nArbitration . Defined encoding is 00b for 100 ns reference clock.  \n \nReset to 00b.  \n11:10  Port Arbitration Table \nEntry Size  RO Read as 10b to indicate the size of Port Arbitration table entry in the device is 4 bits.  \n \nReset to 10b.  \n31:12  Reserved  RsvdP  Not Support.  \n \n7.2.92  PORT VC CAPABILITY REGISTER 2 – OFFSET 148h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 VC Arbitration Capability  RO It indicates the types of VC Arbitration supported by the device for the LPVC group. \nThis field is valid when LPVC is greater than 0. The Switch sup ports Hardware fixed \narbitration scheme, e.g., Round Robin and Weight Round Robin arbitration with 32 \nphases in LPVC.  \n Reset to 03h  if offset 144h.bit[0]=1.  \nReset to 00h if offset 144h.bit[0]=0.  \n23:8 Reserved  RsvdP  Not Support.  \n31:24  VC Arbitration Table  \nOffset  RO It indicates the location of the VC Arbitration Table as an offset from the base address of \nthe Virtual Channel Capability register in the unit of DQWD (16 bytes).  \n Reset to 03h  if offset 144h.bit[0]=1.  \nReset to 00h if offset 144h.bit[0]=0.  \n \n7.2.93  PORT VC CONTROL REGISTER – OFFSET 14Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Load VC Arbitration \nTable  RW When set, the programmed VC Arbitration Table is applied to the hardware.  \nThis bit always returns 0b when read.  \n \nReset to 0b.  \n3:1 VC Arbitration Select RW This field is used to configure the VC Arbitration by selecting one of the supported VC \nArbitration schemes. The valid  values for the schemes supported by Switch are 0b and \n1b. Other value than these written into this register will be treated as default. \n \nReset to 0b.  \n15:4 Reserved  RsvdP  Not Support.  \n \n7.2.94  PORT VC STATUS REGISTER – OFFSET 14Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n16 VC Arbitration Table Status  RO When set, it indicates that any entry of the VC Arbitration Table is written by software. \nThis bit is c leared when hardware finishes loading values stored in the VC Arbitration \nTable after the bit of “ Load VC Arbitration Table ” is set.  \n \nReset to 0b.  \n31:17  Reserved  RsvdP  Not Support.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 82 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.95  VC RESOURCE CAPABILITY REGISTER (0) –  OFFSET 150h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Port Arbitration \nCapability  RO It indicates the types of Port Arbitration supported by the VC resource. The Switch \nsupports Hardware fixed arbitration scheme, e.g., Round Robin, Weight Round Robin (WRR) arbitration with 128 phases (3~4 enab led ports) and Time -based WRR with 128 \nphases (3~4 enabled ports). Note that the Time -based WRR is only valid in VC1.  \n \nReset to 09h. \n13:8 Reserved  RsvdP  Not Support.  \n14 Advanced Packet \nSwitching  RO When set, it indicates the VC resource only supports tra nsaction optimized for Advanced \nPacket Switching (AS).  \n \nReset to 0b.  \n15 Reject Snoop \nTransactions  RO This bit is not applied to PCIe Switch.  \n \nReset to 0b.  \n22:16  Maximum Time Slots  RO It indicates the maximum numbers of time slots (minus one) are  allocate d for \nIsochronous  traffic. The default value may be changed by auto -loading from EEPROM.  \n \nReset to 7Fh.  \n23 Reserved  RsvdP  Not Support.  \n31:24  Port Arbitration Table \nOffset  RO It indicates the location of the Port Arbitration Table (n) as an offset from th e base \naddress of the Virtual Channel Capability register in the unit of DQWD (16 bytes).  \n \nReset to 04h for Port Arbitration Table (0).  \n \n7.2.96  VC RESOURCE CONTROL REGISTER (0)  – OFFSET 15 4h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 TC/VC Map  RW This field indicates the TCs that are mapped to the VC resource. Bit locations within this \nfield correspond to TC values. When the bits in this field are set, it means that the \ncorresponding TCs are mapped to the VC resource.  The default value may be changed \nby auto -loading f rom EEPROM.  \n \nReset to FFh.  \n15:8 Reserved  RsvdP  Not Support.  \n16 Load Port Arbitration Table  RW When set, the programmed Port Arbitration Table is applied to the hardware.  \nThis bit always returns 0b when read.  \n \nReset to 0b.  \n19:17  Port Arbitration Select RW This field is used to configure the Port Arbitration by selecting one of the supported Port \nArbitration schemes. The permissible  values for the schemes supported by Switch are \n000b and 011b at VC0, other value than these written into this register will b e treated as \ndefault.  \n \nReset to 000b.  \n23:20  Reserved  RsvdP  Not Support.  \n26:24  VC ID  RO This field assigns a VC ID to the VC resource.  \n \nReset to 000b.  \n30:27  Reserved  RsvdP  Not Support.  \n31 VC Enable  RW 0b: disables this Virtual Channel  \n1b: enables this V irtual Channel \n \nReset to 1b.  \n \n7.2.97  VC RESOURCE STATUS REGISTER (0)  – OFFSET 15 8h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Reserved  RsvdP  Not Support.  \n \n \n \n \nPI7C9X2G 404SV  Page 83 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n16 Port Arbitration Table \nStatus  RO When set, it indicates that any entry of the Port Arbitration Table is writte n by software. \nThis bit is cleared when hardware finishes loading values stored in the Port Arbitration \nTable after the bit of “ Load Port Arbitration Table ” is set.  \n \nReset to 0b.  \n17 VC Negotiation \nPending  RO When set, it indicates that the VC resource is  still in the process of negotiation. This bit \nis cleared after the VC negotiation is complete.  \n \nReset to 0b.  \n31:18  Reserved  RsvdP  Not Support.  \n \n7.2.98  VC RESOURCE CAPABILITY REGISTER (1) – OFFSET 15Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Port Arbitration Capabi lity RO It indicates the types of Port Arbitration supported by the VC resource. The Switch \nsupports Hardware fixed arbitration scheme, e.g., Round Robin, Weight Round Robin \n(WRR) arbitration with 128 phases (3~4 enabled ports) and Time -based WRR with 128 \nphases (3~4 enabled ports). Note that the Time -based WRR is only valid in VC1.  \n \nReset to 19h if offset 144h.bit[0]=1.  \nReset to 00h if offset 144h.bit[0]=0.  \n13:8 Reserved  RsvdP  Not Support.  \n14 Advanced Packet \nSwitching  RO When set, it indicates the VC res ource only supports transaction optimized for Advanced \nPacket Switching (AS).  \n \nReset to 0b.  \n15 Reject Snoop \nTransactions  RO This bit is not applied to PCIe Switch.  \n \nReset to 0b.  \n22:16  Maximum Time Slots  RO It indicates the maximum numbers of time slots ( minus one) are  allocated for \nIsochronous  traffic.  The default value may be changed by auto -loading from EEPROM.  \n  \nReset to 7Fh if offset 144h.bit[0]=1.  \nReset to 00h if offset 144h.bit[0]=0.  \n23 Reserved  RsvdP  Not Support.  \n31:24  Port Arbitration Table \nOffset RO It indicates the location of the Port Arbitration Table (n) as an offset from the base \naddress of the Virtual Channel Capability register in the unit of DQWD (16 bytes).  \n \nReset to 08h for Port Arbitration Table (1) if offset 144h.bit[0]=1.  \nReset to 00h if offset 144h.bit[0]=0.  \n \n7.2.99  VC RESOURCE CONTROL REGISTER (1)  – OFFSET 160h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 TC/VC Map  RW \n(Exception \nfor bit0)  This field indicates the TCs that are mapped to the VC resource. Bit locations within \nthis field correspond  to TC values. When the bits in this field are set, it means that \nthe corresponding TCs are mapped to the VC resource. Bit 0 of this filed is read -only \nand must be set to “ 0” for the VC1. The default value may be changed by auto -\nloading from EEPROM.  \n \nReset  to 00h.  \n15:8 Reserved  RsvdP  Not Support.  \n16 Load Port Arbitration \nTable  RW When set, the programmed Port Arbitration Table is applied to the hardware. This bit \nalways returns 0b when read.  \n \nReset to 0b.  \n19:17  Port Arbitration Select RW This field is us ed to configure the Port Arbitration by selecting one of the supported \nPort Arbitration schemes. The permissible  values for the schemes supported by \nSwitch are 000b, 011b and 100b at VC1, other value than these written into this register will be treated as  default.  \n \nReset to 000b.  \n \n \n \n \nPI7C9X2G 404SV  Page 84 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n23:20  Reserved  RsvdP  Not Support.  \n26:24  VC ID  RW This field assigns a VC ID to the VC resource.  \n \nReset to 001b if offset 144h.bit[0]=1.  \nReset to 000b if offset 144h.bit[0]=0.  \n30:27  Reserved  RsvdP  Not Support.  \n31 VC Enable  RW 0b: disables this Virtual Channel  \n1b: enables this Virtual Channel  \n \nReset to 0b.  \n \n7.2.100  VC RESOURCE STATUS REGISTER (1) – OFFSET 164h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Reserved  RsvdP  Not Support.  \n16 Port Arbitration Table Status  RO When set, it indicates th at any entry of the Port Arbitration Table is written by software. \nThis bit is cleared when hardware finishes loading values stored in the Port Arbitration \nTable after the bit of “ Load Port Arbitration Table ” is set.  \n \nReset to 0b.  \n17 VC Negotiation \nPendi ng RO When set, it indicates that the VC resource is still in the process of negotiation. This bit \nis cleared after the VC negotiation is complete.  \n \nReset to 0b.  \n31:18  Reserved  RsvdP  Not Support.  \n \n7.2.101  VC ARBITRATION TABLE  REGISTER – OFFSET 170h  \n \nThe VC arbit ration table is a read -write register array that contains a table for VC arbitration. Each table entry allocates four \nbits, of which three bits are used to represent VC ID and one bit is reserved. A total of  32 entries are used to construct the VC \narbitration table. The layout for this register array is shown below.  \nTable 7-1 Register Array Layout for VC Arbitration  \n31 - 28 27 - 24 23 - 20 19 - 16 15 - 12 11 - 8 7 - 4 3 - 0 Byte Location  \nPhase  \n[7] Phase  \n[6] Phase  \n[5] Phase  \n[4] Phase  \n[3] Phase  \n[2] Phase  \n[1] Phase  \n[0] 00h \nPhase \n[15] Phase \n[14] Phase \n[13] Phase \n[12] Phase \n[11] Phase \n[10] Phase  \n[9] Phase  \n[8] 04h \nPhase \n[23] Phase \n[22] Phase \n[21] Phase \n[20] Phase \n[19] Phase \n[18] Phase \n[17] Phase \n[16] 08h \nPhase \n[31] Phase \n[30] Phase \n[29] Phase \n[28] Phase \n[27] Phase \n[26] Phase \n[25] Phase \n[24] 0Ch \n  \n7.2.102  PORT ARBITRATION TABLE  REGISTER (0) and (1) –  OFFSET 180h  and 1C0 h \n \nThe Port arbitration table is a read -write register array that contains a table for Port arb itration. Each table entry allocates two \nbits to represent Port Number. The table entry size is dependent on the number of enabled ports (refer to bit 10 and 11 of Po rt \nVC capability register 1). The arbitration table contains 128 entries if three or four ports are to be enabled. The following \ntable shows the register array layout for the size of entry equal to two.  \n \nTable 7-2 Table Entry Size in 4  Bits \n63 - 56 55 - 48 47 - 40 39 - 32 31 - 24 23 - 16 15 - 8 7 - 0 Byte Location  \nPhase \n[15:14]  Phase \n[13:12]  Phase \n[11:10]  Phase \n[9:8]  Phase \n[7:6]  Phase \n[5:4]  Phase \n[3:2]  Phase \n[1:0]  00h \nPhase Phase Phase Phase Phase Phase Phase Phase 08h \n \n \n \n \nPI7C9X2G 404SV  Page 85 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n63 - 56 55 - 48 47 - 40 39 - 32 31 - 24 23 - 16 15 - 8 7 - 0 Byte Location  \n[31:30]  [29:28]  [27:26]  [25:24]  [23:22]  [21:20]  [19:18]  [17:16]  \nPhase \n[47:46]  Phase \n[45:44]  Phase \n[43:42]  Phase \n[41:40]  Phase \n[39:38]  Phase \n[37:36]  Phase \n[35:34]  Phase \n[33:32]  10h \nPhase \n[63:62]  Phase \n[61:60]  Phase \n[59:58]  Phase \n[57:56]  Phase \n[55:54]  Phase \n[53:52]  Phase \n[51:50]  Phase \n[49:48]  18h \nPhase \n[79:78]  Phase \n[77:76]  Phase \n[75:74]  Phase \n[73:72]  Phase \n[71:70]  Phase \n[69:68]  Phase \n[67:66]  Phase \n[65:64]  20h \nPhase \n[95:94]  Phase \n[93:92]  Phase \n[91:90]  Phase \n[89:88]  Phase \n[87:86]  Phase \n[85:84]  Phase \n[83:82]  Phase \n[81:80]  28h \nPhase \n[111:110]  Phase \n[109:108]  Phase \n[107:106]  Phase \n[105:104]  Phase \n[103:102]  Phase \n[101:100]  Phase \n[99:98]  Phase \n[97:96]  30h \nPhase \n[127:126]  Phase \n[125:124]  Phase \n[123:122]  Phase \n[121:120]  Phase \n[119:118]  Phase \n[117:116]  Phase \n[115:114]  Phase \n[113:112]  38h \n \n7.2.103  PCI EXPRESS POWER BUDGETING CAPABILITY  REGISTER – OFFSET 20Ch \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 Extended Capabilities \nID RO Read as 0004h to indicate that these are PCI express extended capability registers for \npower budgeting . \n19:16  Capability Version  RO Read as 1h.  I ndicates PCI -SIG defined PCI Express capability structure version number.  \n31:20  Next Capability Offset RO Pointer points to the PCI Express  Extended ACS capability  register /LTR capability \nregister . \n \nReset to 230h for U pstream port.  \nReset to 220h for D ownstream ports.  \n \n7.2.104  DATA SELECT  REGISTER – OFFSET 210h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Data Selection  RW It indexes the power budgeting data reported through the data register.  \n When 00h, it selects D0 Max power budget  \nWhen 01h, it selects D0 Sustained power budget  \nOther values would r eturn zero power budgets , which means not supported  \n \nReset to 0 0h. \n31:8 Reserved  RsvdP  Not Support.  \n \n7.2.105  POWER BUDGETING DATA  REGISTER – OFFSET 214h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Base Power  RO It specifies the base power value in watts. This value represents the required power \nbudget in the given operation condition.  The default value may be changed by auto -\nloading from EEPROM.  \n \nReset to 04h.  \n9:8 Data Scale  RO It specifies the scale to apply to the base power value.  \n \nReset to 00b.  \n12:10  PM S ub State  RO It specifies the power management sub state of the given operation condition.  \nIt is initialized to the default sub state.  \n \nReset to 000b.  \n14:13  PM State  RO It specifies the power management state of the given operation condition.  \nIt defaults  to the D0 power state.  \n \nReset to 00b.  \n \n \n \n \nPI7C9X2G 404SV  Page 86 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n17:15  Type  RO It specifies the type of the given operation condition.  \nIt defaults to the Maximum power state.  \n \nReset to 111b.  \n20:18  Power Rail  RO It specifies the power rail of the given operation condition.  \n \nReset to 010b.  \n31:21  Reserved  RsvdP  Not Support.  \n \n7.2.106  POWER BUDGET CAPABILITY  REGISTER – OFFSET 218h \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 System Allocated  RO When set, it indicates that the power budget for the device is included within the system \npower budget. The d efault value may be changed by auto -loading from EEPROM.  \n \nReset to 0 b. \n31:1 Reserved  RsvdP  Not Support.  \n \n7.2.107  ACS EXTENDED CAPABILITY HEADER – OFFSET 220h (Downstream Port Only) \n                        \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0  PCI Express Exte nded \nCapability ID  RO Read as 000Dh to indicate PCI Express Extended Capability ID for ACS Extended \nCapability.  \n19:16  Capability Version  RO Must be 1h for this version . \n31:20  Next Capability ID  RO Pointer points to the PCI Express Extended L1PM Subs tates Extended capability \nregister . \n \nReset to 240h. \n \n7.2.108  ACS CAPABILITY REGISTER –  OFFSET 224h (Downstream Port Only) \n                       \nBIT FUNCTION  TYPE  DESCRIPTION  \n0  ACS Source \nValidation  RO Indicated the implements of ACS Source Validation . \n \nReset t o 1b.  \n1 ACS Translation \nBlocking  RO Indicated the implements of ACS Translation Blocking . \n \nReset to 1b.  \n2 ACS P2P Request Redirect  RO Indicated the implements of ACS P2P Request Redirect . \n \nReset to 1b.  \n3 ACS P2P Completion \nRedirect  RO Indicated the  implements of ACS P2P Completion Redirect . \n \nReset to 1b.  \n4 ACS Upstream Forwarding  RO Indicated the implements of ACS Upstream Forwarding . \n \nReset to 1b.  \n5 ACS P2P Egress control  RO Indicated the implements of ACS P2P Egress control . \n \nReset to 1b.  \n6 ACS  Direct Translated  \nP2P RO Indicated the implements of ACS Direct Translated P2P . \n \nReset to 1b.  \n7 Reserved  RsvdP  Not Support.  \n15:8  Egress Control Vector Size RO Encodings 01h –FFh directly indicate the number of applicable bits in the  Egress  \nControl Vec tor. \n \nReset to 08h. \n \n \n \n \nPI7C9X2G 404SV  Page 87 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n16 ACS Source \nValidation Enable  RW Enable the source validation . \n \nReset to 0b. \n17 ACS Translation Blocking Enable  RW Enable ACS Translation Blocking . \n \nReset to 0b. \n18 ACS P2P Request Redirect  RW Enable ACS  P2P Request Redirect . \n \nRese t to 0b. \n19 ACS P2P Completion Redirect Enable RW Enable ACS P2P Completion Redirect . \n \nReset to 0b. \n20 ACS Upstream Forwarding Enable  RW  Enable ACS Upstream Forwarding . \n \nReset to 0b. \n21 ACS P2P Egress control Enable  RW Enable ACS P2P Egress control . \n \nReset to 0b. \n22 ACS Direct Translated  \nP2P Enable  RW Enable ACS Direct Translated P2P . \n \nReset to 0b. \n31:23  Reserved  RsvdP  Not Support.  \n \n7.2.109   EGRESS CONTROL VECTOR –  OFFSET 228h (Downstream Port O nly) \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 Egress Control Vector  RW When a given bit is set, peer -to-peer requests targeting the associated Port are blocked or \nredirected . \n \nReset to 0 0h. \n31:8 Reserved  RsvdP  Not Support.  \n \n7.2.110  LTR EXTENDED CAPABILITY HEADER – OFFSET 230h (Upstream Port O nly) \n \nBIT FUNCTION  TYPE  DESCRIPT ION \n15:0  PCI Express Extended \nCapability ID  RO Read as 0018h to indicate PCI Express Extended Capability ID for LTR Extended \nCapability.  \n19:16  Capability Version  RO Must be 1h for this version . \n31:20  Next Capability ID  RO Pointer points to the PCI  Express Extended L1PM Substates Extended capability \nregister . \n \nReset to 240h. \n \n7.2.111  MAX SNOOP LATENCY REGISTER – OFFSET 234h (Upstream Port O nly) \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n9:0  Max Snoop Latency Value  RW .Specifies the maximum  snoop latency that a devic e is permitted to reques t \n \nReset to 000h. \n12:10  Max Snoop Latency \nScale  RW This register provides a scale  for the value contained within the Maximum Snoop   \nLatency  Value field  \n \nReset to 000b  \n15:13  Reserved  RsvdP  Not Support.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 88 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.112  MAX NO -SNOOP LATENCY REGISTER – OFFSET 23 4h (Upstream Port O nly) \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n25:16  Max No -Snoop \nLatency Value RW .Specifies the maximum  no-snoop latency that a device is permitted to reques t \n \nReset to 000h. \n28:26 Max No -Snoop \nLatency Scale  RW This re gister provides a scale  for the value contained within the Maximum No-Snoop   \nLatency  Value field  \n \nReset to 000b . \n31:29  Reserved  RsvdP  Not Support.  \n \n7.2.113  LI PM SUBSTATES EXTENDED CAPABILITY HEADER –  OFFSET 240h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0  PCI Expres s Extended \nCapability ID  RO Read as 001Eh to indicate PCI Express Extended Capability ID for L1 PM Substates \nExtended Capability.  \n \nReset to 001E h. \n19:16  Capability Version  RO Must be 1h for this version.  \n31:20  Next Capability ID  RO Pointer points to the PCI Express Extended PTM  Extended  capability  register /DPC  \nExtended c apability register.  \n \nReset to 260h for Upstream port.  \nReset to 250h for Downstream ports.  \n \n7.2.114  L1 PM SUBSTATES CAPABILITY REGISTER –  OFFSET 244h  \n                       \nBIT FUNCTION  TYPE  DESCRIPTION  \n0  Reserved  RsvdP  Not Support.  \n1 PCI-PM L1.1 \nSupported RO When set this bit indicates that PCI -PM L1.1 is supported and must be set by all ports \nimplementing L1 OM Substates. The default value may be changed by auto -loading \nfrom EEPROM.  \n \nReset to 1b. \n2 Reserved  RsvdP  Not Support.  \n3 ASPM L1.1 Supported  RO When set this bit indicates that ASPM L1.1 is supported.  The default value may be \nchanged by SMBus, I2C or auto -loading from EEPROM.  \n \nReset to 0 b. \n4 L1 PM Substates \nSupported RO When set this bit indicates that this port supports L1 PM Substates. The default value \nmay be changed by auto -loading from EEPROM.  \n \nReset to 1b. \n31:5 Reserved  RsvdP  Not Support.  \n \n7.2.115  L1 PM SUBSTATES CONTROL 1 REGISTER –  OFFSET 248h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 Reserved  RsvdP  Not Support.  \n1 PCI-PM L1.1 Enable  RW When set this bit enables PCI -PM L1.1. Required for both upstream and downstream \nports.  \n \nReset to 0 b. \n2 Reserved  RsvdP  Not Support.  \n \n \n \n \nPI7C9X2G 404SV  Page 89 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n3 ASPM L1.1 Enable  RW When set this bit enables ASPM L1.1. Required fo r both upstream and downstream \nports.  \n \nReset to 0 b. \n31:4 Reserved  RsvdP  Not Support.  \n  \n7.2.116  L1 PM SUBSTATES CONTROL 2 REGISTER –  OFFSET 24Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Reserved  RO Reset to 0000_0000h.  \n \n7.2.117  DPC EXTENDE D CAPABILITY HEADER – OFFSET 2 50h (Downstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0  PCI Express Extended \nCapability ID  RO Read as 001Dh to indicate PCI Express Extended Capability ID for DPC Extended \nCapability.  \n \nReset to 001D h. \n19:16  Capability Version  RO Must be 1h for th is version.  \n31:20  Next Capability ID  RO Read as 000h. No other ECP registers.  \n \n7.2.118  DPC CAPABILITY REGISTER –  OFFSET 2 54h (Downstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n4:0 DPC Interrupt \nMessage Number  RO This field indicates which MSI  vector is used for the interrupt message generated in \nassociation with the DPC Capability structure.  \n \nReset to 0_0001 b. \n15:5 Reserved  RsvdP  Not Support.  \n7.2.119  DPC CONTROL REGISTER – OFFSET 254h (Downstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n17:16  DPC Trigger Enable  RW This field enables DPC and controls the conditions that cause DPC to be triggered.  \n 00b… DPC is disabled  \n01b… DPC is enabled and is triggered when the Downstream port detects and unmasked \nuncorrectable error or when the Downstream port receives an ERR_FA TAL \nmessage.  \n10b… DPC is enabled and is triggered when the Downstream port detects an unmasked \nuncorrectable error or when the Downstream port receives an ERR_NONFATAL \nor ERR_FATAL message  \n11b… Reserved  \n \nReset to 00b. \n18 DPC Completion \nControl  RW This bit  controls the Completion Status for Completions formed during DPC.  \n \n0b: Completer Abort (CA) Completion Status  \n1b: Unsupported Request (UR) Completion Status  \n \nReset to 0b.  \n19 DPC Interrupt Enable  RW When set, this bit enables the generation of an interrup t to indicate that DPC has been \ntriggered.  \n \nReset to 0b.  \n \n \n \n \nPI7C9X2G 404SV  Page 90 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n20 DPC ERR_COR \nEnable  RW When set, this bit enables the sending of an ERR_COR message to indicate that DPC \nhas been triggered.  \n \nReset to 0b.  \n31:21  Reserved  RsvdP  Not Support.  \n \n7.2.120  DPC STATUS REGISTER – OFFSET 2 58h (Downstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 DPC Trigger Status  RW1C  When set, this bit indicates that DPC has been triggered.  \n \nReset to 0b.  \n2:1 DPC Trigger Reason  RW1C  This field indicates why DPC has been triggered.  \n \n00b… DPC w as triggered due to an unmasked uncorrectable error  \n01b… DPC was triggered due to receiving an ERR_NONFATAL  \n10b… DPC was triggered due to receiving an ERR_FATAL  \n11b… Reserved  \n \nReset to 2 ’b00. \n3 DPC Interrupt Status  RW1C  This bit is set if DPC is triggered  while the DPC interrupt Enable bit is set.  \n \nReset to 0b.  \n15:4 Reserved  RsvdP  Not Support.  \n \n7.2.121  DPC ERRO R SOURCE ID REGISTER –  OFFSET 2 58h (Downstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:16  DPC Error Source ID  RO When the DPC Trigger Reason field i ndicates that DPC was triggered due to the \nreception of an ERR_NONFATAL or ERR_FATAL, this register contains the Requester \nID of the received message. Otherwise, the value of this register is undefined. \n \nReset to 0000 h. \n \n7.2.122  PTM EXTENDED CAPABILITY  HEADER REG ISTER – OFFSET 260h  (Upstream \nPort Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0  PCI Express Extended \nCapability ID  RO Read as 001F h to indicate PCI Express Extended Capability ID for PTM Extended \nCapability.  \n19:16  Capability Version  RO Must be 1h for this version.  \n31:20  Next Capability ID  RO Read as 000h. No other ECP registers.  \n \n7.2.123  PTM CAPABILITY REGISTER –  OFFSET 2 64h (Upstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 PTM Requester \nCapable  RO Read as 1b to indicate the switch implement the PTM Req uester role.  \n1 PTM Responder \nCapable  RO Read as 1b to indicate the switch implement the PTM Responder role.  \n2 PTM Root Capable  RO Read as 1b to indicate  the switch implement a PTM Time Source Role and are capable \nof serving as the PTM Root.  \n7:3 Reserved  RsvdP  Not Support.  \n15:8 Local Clock \nGranularity  RO Indicates the period of this Time Source ’s local clock in ns.  \n \nReset to 00h.  \n \n \n \n \nPI7C9X2G 404SV  Page 91 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:16  Reserved  RsvdP  Not Support.  \n \n7.2.124  PTM CONTROL REGISTER – OFFSET 2 68h (Upstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 PTM Enable  RW When set, this function is permitted to participate in the PTM mechanism according to \nits selected role.  \n \nReset to 0b.  \n1 Root Select  RW When set, if the PTM Enable bit is also set, this Time Source is the PTM Root.  \n \nReset to 0b.  \n7:2 Reser ved RsvdP  Not Support.  \n15:8 Effective Granularity  RW This field provides information relating to the expected accuracy of the PTM clock, but \ndoesn not otherwise affect the PTM mechanism. \n \nReset to 00h.  \n31:16  Reserved  RsvdP  Not Support.  \n \n7.2.125  MISC CONTROL 0 REGISTER – OFFSET 300h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n19:0 CLKREQ_L  \nWait Time  RW Once entering L1.1 power state, the switch will deassert CLKREQ_L immediately. \nHowever, CLKREQ_L signal is an open -drain wire -or signal with the link partner. If the \nlink par tner does not deassert CLKREQ_L for a certain period of time, the switch will \nassert CLKREQ_L again to resume back to L0 state.  \n \nThe CLKREQ_L wait time decides how long the switch will wait for CLKREQ_L being \ndeasserted by the link partner. The unit is “ 10 ns”.  \n  \nReset to 0_0FFFh. It is about 40 us.  \n31:20  Reserved  RsvdP  Not Support.  \n \n7.2.126  MISC CONTROL 1 REGISTER –  OFFSET 304h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 PM_L1.1 Delay Time  RW It is used to decide when the port will enter into PM L1.1 state from L1 st ate. If the \nvalue of PM L1.1 delay time is smaller, the power saving is much effective, but it takes \nlonger time to recover from low power state. If the timer delay value is larger, the power \nsaving is not much effective, but it recovers from low power sta te to normal power state \nquicker.  \n The smallest value for PM L1.1 Delay is 0001h, which is equivalent to 4 ns.  \n \nReset to 01FFh.  \n31:16  ASPM_L1.1 Delay \nTime  RW It is used to decide when the port will enter into ASPM L1.1 state from L1 state. If the \nvalue of  ASPM L1.1 delay time is smaller, the power saving is much effective, but it \ntakes longer time to recover from low power state. If the timer delay value is larger, the \npower saving is not much effective, but it recovers from low power state to normal \npower  state quicker.  \n \nThe smallest value for ASPM L1.1 Delay is 0001h, which is equivalent to 4ns.  \n \nReset to 01FFh.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 92 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.127  MISC CONTROL 2 REGISTER –  OFFSET 308h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Misc Control  2 RW Reset to 0.  \n \n7.2.128  MISC CONTROL 3 REGISTER –  OFFSET 30 Ch \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Misc Contro l 3 RW Reset to 0.  \n \n7.2.129  MISC CONTROL 4 REGISTER –  OFFSET 310h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Misc Contro l 4 RW Reset to 000F_FFFFh.  \n \n7.2.130  PHY/DLL/TL ERROR COUNTER – OFFSET 318h  \n \nBIT FUNCTION  TYPE  DESCRIPTIO N \n15:0 PHY/DLL/TL Error \nCounter  RO Indicates the error number.  \n \nReset to 00h.  \n16 CPL Available Credit Error  RW1CS  When set, the CPL available  credit error is detected.  \n \nReset to 0b.  \n17 NP Available Credit Error  RW1CS  When set, the NP available  credit er ror is detected.  \n \nReset to 0b.  \n18 Post Available Credit \nError  RW1CS  When set, the Post available credit error is detected.  \n \nReset to 0b.  \n23:19  Reserved  RsvdP  Not Support.  \n28:24  PHY/DLL/TL Error \nSource Select  RW 0_0000b: training error  \n0_0001b: uc_sts er ror  \n0_0011b: acs error  \n0_0100b: rx error  \n0_0101b: replay rollover error  \n0_0110b: replay timerout error  \n0_0111b: cpl available  credit error \n0_1000b: np available credit error  \n0_1001b: post available credit error  \n0_1010b: rx nack  \n0_1011b: rx nack  \n0_1100b: r x recovery  \n0_1101b: tx recovery  \nOthers: reserved  \n \nReset to 0_0000b.  \n29 Reserved  RsvdP  Not Support.  \n30 Error Counter Clear RW When set, PHY/DLL/TL Error counter is clear. When read, will return ‘1’ always.  \n \nReset to 0b.  \n31 Enable Error Counter  RW When se t, it will enable PHY/DLL/TL Error counter.  \n \nReset to 0b.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 93 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.131  PORT PHYSICAL LAYER COMMAND AND STATUS REGISTER – OFFSET 320h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n0 PORT0_Loopback_  \nCMD  RW Test used only.  \nReset to 0b.  \n1 PORT0_Scramble_  \nDisable_CMD  RW Test used only . \nReset to 0b.  \n2 PORT0_Compliance_\nReceive  RW Test used only.  \nReset to 0b.  \n3 PORT 0_ \nLOOPBACK_ST_I  RW Test used only.  \nReset to 0b.  \n4 PORT0 _Rate_Ctrl RW Test used only.  \nReset to 0b.  \n5 PORT 0_Deemphasis_\nCtrl RW Test used only.  \nReset to 0b.  \n6 PORT 0_Complian ce_\nMode RW Test used only.  \nReset to 0b.  \n7 Reserved  RsvdP  Not Support.  \n8 PORT1 _Loopback_  \nCMD  RW Test used only.  \nReset to 0b.  \n9 PORT1 _Scramble_  \nDisable_CMD  RW Test used only.  \nReset to 0b.  \n10 PORT1 _Compliance_\nReceive  RW Test used only.  \nReset to 0b.  \n11 PORT1_ \nLOOPBACK_ST_I  RW Test used only.  \nReset to 0b.  \n12 PORT1 _Rate_Ctrl RW Test used only.  \nReset to 0b.  \n13 PORT1 _Deemphasis_\nCtrl RW Test used only.  \nReset to 0b.  \n14 PORT1 _Compliance_\nMode RW Test used only.  \nReset to 0b.  \n15 Reserved  RsvdP  Not Support.  \n16 PORT2 _Loopback_  \nCMD  RW Test used only.  \nReset to 0b.  \n17 PORT2 _Scramble_  \nDisable_CMD  RW Test used only.  \nReset to 0b.  \n18 PORT2 _Compliance_\nReceive  RW Test used only.  \nReset to 0b.  \n19 PORT2 _ \nLOOPBACK_ST_I  RW Test used only.  \nReset to 0b.  \n20 PORT2 _Rate_Ctrl RW Test used only.  \nReset to 0b.  \n21 PORT2 _Deemphasis_\nCtrl RW Test used only.  \nReset to 0b.  \n22 PORT2 _Compliance_\nMode RW Test used only.  \nReset to 0b.  \n23 Reserved  RsvdP  Not Support.  \n24 PORT 3_Loopback_  \nCMD  RW Test used only.  \nReset to 0b.  \n25 PORT 3_Scramble_  \nDisable_CMD  RW Test used only.  \nReset to 0b.  \n26 PORT 3_Compliance_\nReceive  RW Test used only.  \nReset to 0b.  \n27 PORT 3_ \nLOOPBACK_ST_I  RW Test used only.  \nReset to 0b.  \n28 PORT 3_Rate_Ctrl  RW Test used only.  \nReset to 0b.  \n29 PORT 3_Deemphasis_\nCtrl RW Test used only.  \nReset to 0b.  \n30 PORT 3_Compliance_\nMode  RW Test used only.  \nReset to 0b.  \n31 Reserved  RsvdP  Not Support.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 94 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.132  PORT DISABLE/QUIET/TEST PATTERN RATE REGISTER – OFFSET 324h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n3:0 Port Disable  RW 0b: Enable Link Training operation  \n1b: LTSSM remains in the Detect.Quiet state.  \n \nBit[0]: for Port 0  \nBit[1]: for Port 1  \nBit[2]: for Port 2  \nBit[3]: for Port 3  \n \nReset to 00 00b. \n7:4 Reserved  RsvdP  Not Support.  \n11:8 Port Quiet/Test Pattern Rate RW 0b: LTSSM is allowed to exit the Detect.Quiet stat e \n1b: LTSSM remains in the Detect.Quiet state  \n \nBit[8 ]: for Port 0  \nBit[9 ]: for Port 1  \nBit[10]: for Port 2  \nBit[11]: for Port 3  \n \nReset to 00 00b. \n15:12 Reserved  RsvdP  Not Support.  \n19:16 Port Pattern Rate  RW Test used only.  \n \nBit[16 ]: for Port 0  \nBit[17]: for P ort 1 \nBit[18]: for Port 2  \nBit[19]: for Port 3  \n \nReset to 0 000b. \n31:20  Reserved  RsvdP  Not Support.  \n \n7.2.133  CSR_LED0 – OFFSET 328h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 LED_CSR00  RW Reset to 00h. \n8 LED_CSR01  RW Reset to 0b.  \n31:9 Reserved  RsvdP  Not Support.  \n \n7.2.134  CSR_L ED1 – OFFSET 32Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 LED_CSR10  RW Reset to 00h. \n15:8 LED_CSR11  RW Reset to 00h. \n23:16  LED_CSR12  RW Reset to 00h. \n31:24  LED_CSR13  RW Reset to 00h. \n \n7.2.135  LTSSM_CSR – OFFSET 33Ch  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 LTSSM_CSR  RO The default value may be changed by auto -loading from EEPROM.  \nReset to  00h. \n31:8 Reserved  RsvdP  Not Support.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 95 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n7.2.136  MAC_CSR – OFFSET 340h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n15:0 MAC_CSR  RO The default value may be changed by auto -loading from EEPROM.  \n \nBit[4]: A daptive ACK Policy  \nBit[5]: Fix_Disable_Detect  \nReset to 04h. \n31:16  Reserved  RsvdP  Not Support.  \n \n7.2.137  TL_CSR1 – OFFSET 344h  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n7:0 TL_CSR1  RW Reset to 03h. \n31:8 Reserved  RsvdP  Not Support.  \n \n7.2.138  DEBUGOUT CONTROL –  OFFSET 348h (Upstream  Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n4:0 Debug Mode Select  RW Debug mode select. Selects a signal group for probing the current internal status.  \nFor example, “0” represents LTSSM signal group. As to other values, please inquire \ninternal team for fu rther information,  \n7:5 Debug Port_Select  RW Selects a port number for monitoring at a given signal group.  \n8 Debug Output Start  RW Start to capture debug output data.  \n31:9  Reserved  RsvdP  Not Support.  \n \n7.2.139  DEBUGOUT DATA  – OFFSET 34Ch (Upstream Port Only)  \n \nBIT FUNCTION  TYPE  DESCRIPTION  \n31:0 Debug Output Data  RO Content of the debug output data.  \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 96 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n8 CLOCK SCHEME  \n \nThe built -in HCSL integrated reference clock buffer of the PI7C9X2G4 04SV  supports three  reference clock outputs. It  can be \nenabled and disabled by s trapping the CLKBUF_PD pin.  \n \nWhen CLKBUF_PD pin is asserted low, the integrated reference clock buffer is enabled. The integrated reference clock buffer distributes a single 100MHz reference clock input to three  reference clock output pairs, REFCLKO _P[3:0] and \nREFCLKO _N[3:0]. One of the integrated reference clock buffer output pairs of the Switch can be connected to the Switch \nthrough REFCLKP/N  pins, and the other two  integrated reference clock buffer outputs can be used by downstream devices.  \n \nSpecified reference clock output pairs can be disabled  through the Clock Buffer Control bits in the Operation Mode Register \n(offset 98h.bit[23:16]) via either I2C, SMBUS or EEPROM.  \n \nThe integrated reference clock buffer requires an external 100MHz differential clock input pair through REFCLKI _P and \nREFCLKI_ N pins as show n in Table 8-1. \n \nTable 8-1 AC Switching  and DC Electrical Characteristics for REFCLKIP/N and REFCLKOP/N[3:0 ] \nSymbol Parameters  Min. Typ. Max. Unit Note \nFIN Reference Clock Frequency   100  MHz   \nTrise/ T fall  Rise and Fall Time   in 20 -80%  175  700 ps 2 \nΔTrise/ ΔTfall  Rise and Fall Time Variation    125 ps 2 \nTpd Propagation Delay  2.5  6.5 ns  \nVHIGH Voltage High including \novershoot  660  1150 mV 2 \nVLOW Voltage Low including \nundershoot  -300  VHIGH-0.5V  mV 2 \nVcross Absolute crossing point voltage  250  550 mV 2 \nVswing  Voltage including overshoot  300  1800  mV 2, 4 \nTDC  Duty Cycle  45  55 % 3 \n            Note:  \n1. Test configuration is Rs=33.2Ω  and 2pF.  \n2. Measurement taken from Single Ended waveform.  \n3. Measurement taken from Differential waveform.  \n4. If the referen ce clock input is HCSL type, it should use DC coupling; if not in HCSL protocol (ex: LVPECL, LVDS , etc), it should be AC \ncoupling, and refer to application note to add application circuit to rebuild dc bias. If rebuild dc bias for the best 400mV,  there is  no limit on the \nVswing. However, there have two exceptions can be accepted:  \na. If input is LVPECL, use ac -coupling  and no rebuild dc bias , the min V swing is 550mV  (single ended) . \nb. If input is LVDS with 100 ohm cross at the inputs and use dc -coupling, the min Vswing is 250mV  (single ended) . \n \nWhen CLKBUF_PD pin is asserted high, the clock buffer is disabled . PI7C9X2G404SV  requires an external 100MHz \ndifferent clock input pair through REFCLKP/N Pins as shown in Table 8-2. \n \nTable 8-2 AC Switching and DC Electrical Characteristics  for REFCLKP/N  \nSymbol Parameters  Min. Typ. Max. Unit Note \nFIN Reference Clock Frequency   100  MHz  1, 2 \nAj Accuracy  -300  +300  ppm 3 \nTREFCLK -HF-RMS > 1.5 MHz to Nyquist RMS \njitter after applying PCIe filter \nfunction    3.1 ps RMS  3 \nTREFCLK -LF-RMS 10 kHz - 1.5 MHz RMS jitter    3.0 ps RMS  3 \nSSC freq Spread Spectrum Clock \nfrequency  30  33 kHz 3 \nTrise/ Tfall  Rise and Fall Time   in 20 -80%  175  700 ps 2 \nΔTrise/ ΔTfall  Rise and Fall Time Variation    125 ps 2 \nTpd Propagation Delay  2.5  6.5 ns  \nVHIGH Voltage High including 0.8   V 2 \n \n \n \n \nPI7C9X2G 404SV  Page 97 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nSymbol Parameters  Min. Typ. Max. Unit Note \novershoot  \nVLOW Voltage Low including \nundershoot    800 mV 2 \nVswing  Voltage including overshoot  300   mV 2 \nTDC  Duty Cycl e 45  55 % 3 \n            Note:  \n1. Does not include ±300ppm. Only certain clock frequencies will produce valid PCI Express data.  \n2. Measurement taken from Single- end waveform.  \n3. Measurement taken from Differential waveform.  \n4. As PCIe PHY accept CML type reference c lock source and will rebuild command mode voltage by itself, it need s add ac -coupling.  \n \nWhen implement L1.1 function, t he connection of REFCLKO _P[3:0] and REFCLKO _N[3:0] to the REFCLKP/N  pins of \nPI7C9X2G 404SV  and the reference clock input of downstream -port devices have to follow the table shown below.  \n \nTable 8-3 Connection Map for REFCLK O_P/N [3:0] \nReference Clock \nSource Pins  REFCLKOP [ 0] \nREFCLKON [ 0] REFCLKO _P[1] \nREFCLKO _N[1] REFCLKO _P[2] \nREFCLKO _N[2] REFCLKO _P[3] \nREFCLKO _N[3] \nReference Clock \nDestination Pins  REFCLKP  \nREFCLKN  Downstream  \nport-1 device  Downstream  \nport-2 device  Downstream  \nport-3 device  \n The REFCLK O_P/N[ 3:0] is not only enabled or disabled by a global control signal CLKBUF_PD, but also controll ed by \nCLKREQ_L[3 :0] pins and internal downstream -port device clock status individually based on L1 PM Substate rule. T he \noutput control signals for REFCLKO _P/N [3:0] are mapped as the following table.  \n \nTable 8-4 Output Control for REFCLK O_P/N [3:0] \nReference Clock \nSource Pins  REFCLKOP [ 0] \nREFCLKON [ 0] REFCLKO _P[1] \nREFCLKO _N[1] REFCLKO _P[2] \nREFCLKO _N[2] REFCLKO _P[3] \nREFCLKO _N[3] \nClock Request \nControl Pins  CLKREQ_L[0]  CLKREQ_L[ 1] CLKREQ_L[2]  CLKREQ_L[ 3] \n \nThe CLKR EQ_L[0] is an upstream control signal that should be connected from the switch output with external pull -up to \nthe CLKREQ_L pin on the host chip (Root Complex). The switch combines the CLKREQ_L[3:1] and drives the resulting \nsignal out on the CLKREQ_L[0]. W hen endpoints do not have any packets to transmit, the switch and endpoints will not \ndrive CLKREQ_L[3:1], CLKREQ_L[3:1] will be high due to external pull -up resistor and the reference clock \nREFCLKOP/N[3:1] for down ports will stop. Then, the switch does not drive the CLKREQ_L[0] low on its upstream port.  If \nthe Root Complex does not have any packets requiring transmission, it does not drive the CLKREQ_L[0] either. In this case, \nthe CLKREQ_L[0] will be high due to external pull -up resistor and the reference clock REFCLKO/P[0] for the upstream port \nwill stop.  \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 98 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n9 IEEE 1149.1 COMPATIBLE JTAG CONTROLLER  \n \nAn IEEE 1149.1 compatible Test Access Port (TAP) controller and associated TAP pins are provided to support boundary \nscan in PI7C9X 2G404SV  for board- level conti nuity test and diagnostics. The TAP pins assigned are TCK, TDI, TDO, TMS \nand TRST_L. All digital input, output, input/output pins are tested except TAP pins.  \n \n9.1 INSTRUCTION REGISTER  \n The IEEE 1149.1 Test Logic consists of a TAP controller, an instruction reg ister, and a group of test data registers including \nBypass and Boundary Scan registers. The TAP controller is a synchronous 16 -state machine driven by the Test Clock (TCK) \nand the Test Mode Select (TMS) pins. An independent power on reset circuit is provid ed to ensure the machine is in \nTEST_LOGIC_RESET state at power -up.  \nPI7C9X 2G404SV  implements a 5 -bit Instruction register to control the operation of the JTAG logic. The defined instruction \ncodes are shown in the following table . Those bit combinations tha t are not listed are equivalent to the BYPASS (11111) \ninstruction . \n \nTable 9-1 Instruction Register Codes  \nInstruction  Operation Code (binary)  Register Selected  Operation  \nEXTEST  00000  Boundary Scan  Drives / rec eives off -chip test data  \nSAMPLE  00001  Boundary Scan  Samples inputs / pre -loads outputs  \nHIGHZ  00101  Bypass  Tri-states output and I/O pins except TDO pin  \nCLAMP  00100 Bypass  Drives pins from boundary -scan register and selects Bypass \nregister for shifts  \nIDCODE  01100 Device ID  Accesses the Device ID register, to read manufacturer ID, part \nnumber, and version number  \nBYPASS  11111  Bypass  Selected Bypass Register  \nINT_SCAN  00010  Internal Scan  Scan test  \nPHY_TEST_SIG  01001  Private  Private  \nMEM_BIST  01010  Memory BIST  Memory BIST test  \n \n9.2 BYPASS REGISTER  \n \nThe required bypass register (one- bit shift register) provides the shortest path between TDI and TDO when a bypass \ninstruction is in effect. This allows rapid movement of test data to and from other components on t he board.  This path can be \nselected when no test operation is being performed on the PI7C9X 2G404SV . \n \n9.3 DEVICE ID REGISTER  \n \nThis register identifies Pericom as the manufacturer of the device and details the part number and revision number for the \ndevice.  \nTabl e 9-2 JTAG Device ID Register  \nBit Type  Value  Description  \n31-28 RO 0001  Version number  \n27-12 RO 0000010100001000  Last 4 digits (hex) of the die part number  \n11-1 RO 01000111111  Pericom identifier assigned by  JEDEC  \n0 RO 1 Fixed bit equal to 1’b1  \n \n \n \n \nPI7C9X2G 404SV  Page 99 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n9.4 BOUNDARY SCAN REGISTER  \n \nThe boundary scan register has a set of serial shift -register cells. A chain of boundary scan cells is formed by connected the \ninternal signal of the PI7C9X 2G404SV  package pins.  The VDD, VSS,  and JTAG pins are not in the boundary scan chain. \nThe input to the shift register is TDI and the output from the shift register is TDO. There are 4 different types of boundary  \nscan cells, based on the function of each signal pin.  \n \nThe boundary scan regist er cells are dedicated logic and do not have any system function. Data may be loaded into the \nboundary scan register master cells from the device input pins and output pin- drivers in parallel by the mandatory SAMPLE \nand EXTEST instructions. Parallel loadin g takes place on the rising edge of TCK.  \n \n9.5 JTAG BOUNDARY SCAN REGISTER ORDER \n \nTable 9-3 JTAG Boundary Scan Register Definition  \nBoundary Scan  \nRegister Number  Pin Name  Ball Location  Type  Tri-state Control \nCell \n0 DWNRST_L[1]  5 Output2   \n1 DWNRST_L[2]  6 Output2   \n2 DWNRST_L[ 3] 7 Output2   \n3 TEST1  9 Input   \n4 PERST_L  10 Input   \n5 TEST2  16 Input   \n6 TEST3  17 Birdir  12 \n7 VC1_EN  18 Birdir  12 \n8 PRSNT[1]  19 Birdir  12 \n9 PRSNT[2]  20 Birdir  12 \n10 PRSNT[ 3] 21 Birdir  12 \n11 PORTSTSTUS_L1.1_SEL  22 Birdir  12 \n12   Control   \n13 RXPOLINV_DIS  24 Birdir  12 \n14 TEST5  25 Birdir  12 \n15 SMBCLK  26 Birdir  12 \n16 SMBDATA  27 Birdir  12 \n17 PWR_SAV  28 Birdir  12 \n18 SLOTCLK  33 Birdir  12 \n19 GPIO[0]  36 Birdir  20 \n20   Control   \n21 GPIO[1]  35 Birdir  22 \n22   Control   \n23 GPIO[2]  37 Birdir  24 \n24   Control   \n25 GPIO[3]  38 Birdir  26 \n26   Control   \n27 GPIO[4]  39 Birdir  28 \n28   Control   \n29 GPIO[5]  42 Birdir  30 \n30   Control   \n31 GPIO[6]  43 Birdir  32 \n32   Control   \n33 GPIO[7]  44 Birdir  34 \n34   Control   \n35 SLOT_IMP[1]  45 Birdir  45 \n36 SLOT_IMP[2]  46 Birdir  45 \n37 SLOT_IMP[ 3] 47 Birdir  45 \n38 CLKREQ_L[3] / PORTSTATUS[3]  48 Birdir  45 \n39 TEST6  51 Birdir  45 \n40   Internal   \n41 PL_512B  53 Birdir  45 \n42 SMBUS_EN  54 Birdir  45 \n43   Internal   \n \n \n \n \nPI7C9X2G 404SV  Page 100 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nBoundary Scan  \nRegister Number  Pin Name  Ball Location  Type  Tri-state Control \nCell \n44   Internal   \n45   Control   \n46   Internal   \n47 CLKBUF_PD  60 Birdir  45 \n48 CLKREQ_L[0] / PORTSTATUS[0]  67 Birdir  49 \n49   Control   \n50 CLKREQ_L[1] / PORTSTATUS[1]  68 Birdir  51 \n51   Control   \n52 CLKREQ_L[2] / PORTSTATUS[2]  69 Birdir  53 \n53   Control   \n54 EECL K 70 Output2   \n55 EEPD  71 Birdir  56 \n56   Control   \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 101 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n10 POWER MANAGEMENT  \n \nThe PI7C9X2G 404SV supports D0, D1, D2, D3 -hot, and D3 -cold Power States. The PCI Express Physical Link Layer of the \nPI7C9X2G 404SV device supports the PCI Express Link Power Management  with L0, L0s, L1, L2/L3 ready and L3 Power \nStates. PI7C9X2G 404SV also supports ASPM (Active State Power Management) to facilitate the link power saving. In \naddition, PCI -PM and ASPM L1.1 of L1 PM Substate is supported to reduce power consumption further.  \n \nIn order to reduce further power consumption of high- speed circuit in L1 power state, the switch follows PCI -SIG ECN of L1 \nPM Substates with CLKREQ to implement L1.1 power sub- state for each port of packet switch. When the link is already put \ninto L1 sta te, it can enter L1.1 sub -state by asserting CLKREQ sideband signal. In L1.1 sub -state, the PLL circuit and \nreceiver buffer are turned off to lower idle power dramatically for that link of associated port. Once CLKREQ de- assertion is \ndetected, the link is recovered from L1.1 sub -state to L1 state and the previously shut -down circuit is resumed.   \n \nThe PI7C9X2G 404SV requires that all lanes and ports enter L1.1 for power -saving to be effective. If any one of lanes or \nports is not in L1.1 (such as an empty dow nstream port or the port connected to device not supporting L1.1), the PLL, which \nis shared by all lanes or ports, cannot be turned off. As a result, the core power would not be reduced because of internal \nclock kept running. In such a scenario, it suggest s to put that port in L1 state instead of L1.1.  \n \n \n \n \nPI7C9X2G 404SV  Page 102 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n11 POWER SEQUENCE \n \nAs long as PERST# is active, all PCI Express functions are held in reset. The main supplies ramp up to their specified levels \n(3.3V). Some time during this stabilization time, the REFCLK starts and stabilizes. After there has been time (100 ms) for the \npower and clock to become stable, PERST# is deasserted high and the PCI Express functions can start up.  \n \nIt is recommended  to power up the I/O voltage (3.3V) first and then the core voltage (1.0V ) or p ower up I/O voltage  and core \nvoltage  simultaneously for both Aux and Main power rails.  \n \n \nFigure 11-1 Initial Power -Up Sequence  \n \nPower -down sequence  is the reverse of power -up sequence . \n \n \n \n \n \nPI7C9X2G 404SV  Page 103 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n12 ELECTRICAL AND  TIMING SPECIFICATIONS  \n \n12.1 ABSOLUTE MAXIMUM RATINGS  \n \nTable 12-1 Absolute Maximum Ratings  \n(Above which the useful life may be impaired. For user guidelines, not tested.)  \nItem  Absolute Max. Rating  \nStorage Temperat ure (T store) -65oC to 150oC \nJunction Temperature (T j) 125 oC \nDigital core and analog supply voltage to ground potential (VDDC , AVDD  and \nVDDCAUX)  -0.3v to 1.5v  \nDigital I/O and analog high supply voltage to ground potential (VDDR , CVDDR, \nAVDDH  and VAUX)  -0.3v to 4.0 v \nDC input voltage for Digital I/O signals  -0.3v to 4.0v \nESD Rating  \n     Human Body Model (JEDEC Class 2)  \n     Charge Device Mode (JEDEC Class 2)   \n2 kv \n200v \nNote:  \nStresses greater than those listed under MAXIMUM RATINGS may cause permanent d amage to the device. This is a stress rating only \nand functional operation of the device at these or any conditions above those indicated in the operational sections of this s pecification is \nnot implied. Exposure to absolute maximum rating conditions for e xtended periods of time may affect reliability.  \n \n12.2 DC SPECIFICATIONS  \n Table 12-2 DC Electrical Characteristics  \nSymbol  Description  Min.  Typ.  Max.  Unit  \nVDDC1 Digital Core Power  0.95 1.0 1.1 \nV VDDR  Digital I/O Po wer 3.0 3.3 3.6 \nCVDDR  Reference Clock Power  3.0 3.3 3.6 \nVDDCAUX1 Auxiliary Core Power  0.95 1.0 1.1 \nVAUX  Auxiliary I/O Power  3.0 3.3 3.6 \nAVDD1 PCI Express Analog Power  0.95 1.0 1.1 \nAVDDH  PCI Express Analog High Voltage Power  3.0 3.3 3.6 \nVIH Input High Voltage  2.0  5.5 \nVIL Input Low Voltage  -0.3  0.8 \nVOH Output High Voltage  2.4   \nVOL Output Low Voltage    0.4 \nRPU Pull-up Resistor  63K 92K 142K  Ω RPD Pull-down Resistor  57K 91K 159K  \nRST#Slew2 PERST_L Slew Rate  50   mV/ns  \nNote:  \n1. VDDC/VDDCAUX/AVDD pins\' voltage is 0.95v min. important to not operate below these levels. Taking typical \nPCB/power supply noise factors into consideration, we recommend  that customers use 1.0v typical voltage in their \nboard design to ensure solid margin.  \n2. The min. value for PERST_L Slew Rate is 50 mV/ns, which translates to the requirement that the time for PERST_L \nfrom 0V to 3.3V should be less than 66 ns.  \n \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 104 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n12.3 AC SPECIFI CATIONS  \n \nTable 12-3 PCI Express Interface -  Differential Transmitter (TX) Output (5.0 Gbps) Characteristics  \nParameter  Symbol  Min Typ Max  Unit  \nUnit Interval  UI 199.94  200.0  200.06  ps \nDifferential p-p TX volta ge swing  VTX-DIFF-P -P 800 - - mV \nppd \nLow power d ifferential p-p TX voltage \nswing  VTX-DIFF-P -P-LOW 400 - - mV \nppd \nTX de -emphasis  level ratio  VTX-DE-RATIO -3.5dB -3.0 - -4.0 dB \nTX de -emphasis  level ratio  VTX-DE-RATIO -6dB -5.5  -6.5 dB \nTransmitter Eye incl uding all jitter sources  TTX-EYE 0.75 - - UI \nTX deterministic jitter > 1.5 MHz  TTX-HF-DJ-DD - - 0.15 UI \nTX RMS jitter < 1.5 MHz  TTX-LF-RMS - - 3.0 Ps \nRMS  \nTransmitter rise and fall time  TTX-RISE -FALL 0.15 - - UI \nTX rise/fall mismatch  TRF-MISMATCH  - - 0.1 UI \nMaximum TX PLL Bandwidth  BW TX-PLL - - 16 MHz  \nMinimum  TX PLL BW for 3dB peaking  BW TX-PLL-LO-3DB 8 - - MHz  \nTX PLL peaking with 8 MHz min BW  PKG TX-PLL1 - - 3.0 dB \nDC Differential TX  Impedance  ZTX-DIFF -DC 80 - 120 Ω \nTransmitter Short -Circuit Current Limit  ITX-SHORT  - - 90 mA \nTX DC Common Mode Voltage  VTX-DC-CM 0 - 3.6 V \nAbsolute Delta of DC  Common Mode \nVoltage  During L0 and Electrical  Idle VTX-CM -DC-ACTIVE -IDLE-\nDELTA  0 - 100 mV \nAbsolute Delta of DC  Common Mode \nVoltage  between D+ and D – VTX-CM -DC-LINE-DELTA  0 - 25 mV \nElectrical Idle Differential  Peak Output \nVoltage  VTX-IDLE -DIFF-AC -p 0 - 20 mV \nDC Electrical Idle Differential Output \nVoltage  VTX-IDLE -DIFF-DC  0 - 5 mV \nThe Amount of Voltage Change Allowed \nDuring Receiver Detection  VTX-RCV -DETECT  - - 600 mV \nLane -to-Lane Output Skew  LTX-SKEW  - - 500 ps \n+ 4 UI  ps \n \nTable 12-4 PCI Express Interface -  Differential Transmitter (TX) Output (2.5 Gbps) Characteristics  \nParameter  Symbol  Min Typ Max  Unit  \nUnit Interv al UI 399.88  400.0  400.12  ps \nDifferential p-p TX voltage swing  VTX-DIFF-P -P 800 - - mV \nppd \nLow power d ifferential p-p TX voltage \nswing  VTX-DIFF-P -P-LOW 400 - - mV \nppd \nTX de -emphasis  level ratio  VTX-DE-RATIO  -3.0 - -4.0 dB \nMinimum TX eye width TTX-EYE 0.75 - - UI \nMaximum time between the jitter median \nand max deviation from the median  TTX-EYE -MEDIAN-to -MAX-\nJITTER  - - 0.125  UI \nTransmitter rise and fall time  TTX-RISE -FALL 0.125 - - UI \nMaximum TX PLL Bandwidth  BW TX-PLL - - 22 MHz  \nMaximum TX PLL BW for 3 dB peaking  BW TX-PLL-LO-3DB 1.5 - - MHz  \nAbsolute Delta of DC  Common Mode \nVoltage  During L0 and Electrical  Idle VTX-CM -DC-ACTIVE -IDLE-\nDELTA  0 - 100 mV \nAbsolute Delta of DC  Common Mode \nVoltage  between D+ and D – VTX-CM -DC-LINE -DELTA  0 - 25 mV \nElectrical Idl e Differential  Peak Output \nVoltage  VTX-IDLE -DIFF-AC -p 0 - 20 mV \nThe Amount of Voltage Change Allowed \nDuring Receiver Detection  VTX-RCV -DETECT  - - 600 mV \nTransmitter  DC Common Mode Voltage  VTX-DC-CM 0 - 3.6 V \nTransmitter Short -Circuit Current Limit  ITX-SHORT - - 90 mA \nDC Differential TX  Impedance  ZTX-DIFF -DC 80 100 120 Ω \nLane -to-Lane Output Skew  LTX-SKEW - - 500 ps ps \n \n \n \n \nPI7C9X2G 404SV  Page 105 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \nParameter  Symbol  Min Typ Max  Unit  \n+ 2 UI  \n \nTable 12-5 PCI Express Interface -  Differential Receiver (RX) Input (5.0 Gbps) Characteristics  \nParameter  Symbol  Min Typ Max  Unit  \nUnit Interval  UI 199.94 200.0 200.06 ps \nDifferential RX Peak -to-Peak Voltage  VRX-DIFF -PP-CC 120 - 1200 mV \nTotal jitter tolerance  TJRX 0.68 - - UI \nReceiver DC common mode i mpedance  ZRX-DC 40 - 60 Ω \nRX AC Common Mode Voltage  VRX-CM-AC-P - - 150 mV \nElectrical Idle Detect  Threshold  VRX-IDLE -DET -DIFFp -p 65 - 175 mV \n \nTable 12-6 PCI Express Interface -  Differential Receiver (RX) Input (2.5 Gbps) Characteristics  \nParameter  Symbol  Min Typ Max  Unit  \nUnit Interval  UI 399.88  400.0  400.1 2 ps \nDifferential RX Peak -to-Peak Voltage  VRX-DIFF -PP-CC 175 - 1200 mV \nReceiver eye time opening  TRX-EYE 0.4 - - UI \nMaximum time delta between median and \ndeviation from median  TRX-EYE -MEDIAN- to-MAX-\nJITTER  - - 0.3 UI \nReceiver DC common mode i mpedance  ZRX-DC 40 - 60 Ω \nDC differential impedance  ZRX-DIFF -DC 80 - 120 Ω \nRX AC Common Mode Voltage  VRX-CM-AC-P - - 150 mV \nDC input CM input i mpedance  during reset \nor power down  ZRX-HIGH-IMP-DC  200 - - kΩ \nElectrical Idle Detect  Threshold  VRX-IDLE -DET -DIFFp -p 65 - 175 mV \nLane to Lane skew  LRX-SKEW - - 20 ns \n \n12.4 POWER CONSUMPTION \n \nTable 12-7 Power Consumption \nActive \nLane per \nPort  1.0VDDC 1.0VAUX 1.0AVDD 3.3AVDDH  3.3VDDR 3.3VAUX Total  \nUnit  Typ Max  Typ Max  Typ Max  Typ Max Typ Max  Typ Max  Typ Max  \n1/1/1/1  120.00 297.00 2.20 2.42 128.00 283.8 0 29.37  32.31  26.40  87.12  0.03 0.04 306.00 702.68 mW \nTest Conditions:  \n- Typical power measured under the conditions of 1.0V/ 3.3V power rail without device usage on all downstream po rts. \n- Maximum power measured under the conditions of 1.1V/ 3.63V with PCIe2 devices usage on all downstream ports.  \n- Ambient Temperature at 25oC \n- Power consumption in the table is a reference, be affected by various environments, bus traffic and power su pply etc.  \n \n12.5 OPERATING AMBIENT TEMPERATURE  \n \nTable 12-8 Operating Ambient Temperature  \n(Above which the useful life may be impaired.)  \nItem  Min.  Max.  Unit  \nAmbient Temperature with power applied  -40 85 oC \nNote:  \nExposure to high temperature conditions  for extended periods of time may affect reliability.  \n \n \n \n \n \nPI7C9X2G 404SV  Page 106 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n13 THERMAL DATA \nThe information described in this section is provided for reference only.  \n \nTable 13-1 Thermal Data  \nPower \n(Watt)  Ta \n(℃) JEDEC \nBoard  Airflow  \n(m/s)  ƟJA \n(℃/W) Tj \n(℃) ƟJC \n(℃/W) \n0.64 85 4-Layer  0 25.5 101.32  \n11.7 1 21.3 98.632  \n2 19.9 97.736  \nNote:  \n1. Ta: Ambient Temperature  \n2. TJ: Junction Temperature  \n3. Maximum allowable junction temperature = 125 ℃ \n4. ƟJA: Thermal Resistance,  Junction -to-Ambient  \n5. ƟJC: Thermal Resistance, Junction -to-Case  \n6. Power measured under the conditions of 1.0V/ 3.3V with PCIe2 devices usage on all downstream ports  \n7. The shaded fields provide a recomm endation that allows PI7C9X2G 404SV  to support Industrial Tem perature Range.  \n \n \n \n \n \n \n \nPI7C9X2G 404SV  Page 107 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n14 PACKAGE INFORMATION  \n \nThe package of PI7C9X2 G404S V is a 1 4mm x 1 4mm LQFP  (128 Pin) package.  The following are the package information \nand mechanical dimension:  \n \nFigure 14-1 Package outlin e drawing  \n \nFigure 14-2 Part Marking  \n \n \n \n \nPI7C9X2G 404SV  Page 108 of 108 August 2022  \nDocument N umber DS41219 Rev 8-2  www.diodes.co m © 2022 Copyright Diodes Incorporated. All Rights Reserved.  PI7C9X2G404SV  \n15 ORDERING INFORMATION  \n \nPart Number  Temperature Range  Package  Description  Pb-Free & Green  \nPI7C9X2G404S VAFDEEX -40o to 85oC  \n(Industrial Temperature)  128-pin, Low Profile Q uad \nFlat Package  (LQFP ) Yes \nNotes:        \n1. No purposely added lead. Fully EU Directive 2002/95/EC (RoHS), 2011/65/EU (RoHS 2) & 2015/863/EU (RoHS 3) compliant.  \n2. See https://www.diodes.com/qualit y/lead -free/ for more information about Diodes Incorporated’s definitions of Halogen - and Antimony -free, "Green" and Lead -\nfree.  \n3. Halogen - and Antimony -free "Green” products are defined as those which contain <900ppm bromine, <900ppm chlorine (<1500ppm total Br + Cl) and \n<1000ppm antimony compounds.  \nPI  7C  9X2G404SV  A  FDE  E X\nPb-Free and Green\nPackage Code\nRevision\nDevice Type\nDevice Number\nPericomFamilyTape & Reel\n \n \n \n'}]
!==============================================================================!
### Component Summary: PI7C9X2G404SVAFDEEX

**Key Characteristics and Specifications:**

- **Voltage Ratings:**
  - Core Voltage (VDDC): 1.0V (typical)
  - I/O Voltage (VDDR): 3.3V (typical)
  - Auxiliary Power (VAUX): 3.3V (typical)

- **Current Ratings:**
  - Typical Power Consumption: 300 mW in L0 normal mode
  - Maximum Power Consumption: 702.68 mW (under maximum load conditions)

- **Power Consumption:**
  - Active: 306 mW (typical) to 702.68 mW (maximum)
  - Low Power Dissipation: 300 mW typical in L0 normal mode

- **Operating Temperature Range:**
  - Industrial Temperature Range: -40°C to 85°C

- **Package Type:**
  - 128-pin Low Profile Quad Flat Package (LQFP), dimensions 14mm x 14mm

- **Special Features:**
  - Supports PCI Express Gen 2 with 4 ports and 4 lanes
  - Integrated reference clock for downstream ports
  - Advanced power management features including L1.1 and L2/L3 states
  - Supports multiple virtual channels and traffic classes
  - Compliance with various PCI Express specifications (2.1, CEM 2.0, etc.)
  - JTAG boundary scan support for testing and diagnostics
  - Low power dissipation features for energy efficiency

- **Moisture Sensitive Level (MSL):**
  - MSL according to JEDEC J-STD-020E: Not specified in the provided data.

**Description:**
The **PI7C9X2G404SV** is a **PCI Express Gen 2 Packet Switch** designed to facilitate high-speed data transfer between multiple devices in a PCI Express architecture. It operates as a 4-port, 4-lane switch, allowing for peer-to-peer communication between downstream ports. The switch supports both "Cut-through" and "Store and Forward" modes for packet switching, ensuring flexibility in data handling.

**Typical Applications:**
- **Data Center Equipment:** Used in servers and networking equipment to manage data flow between multiple PCIe devices.
- **High-Performance Computing:** Facilitates communication in systems requiring high bandwidth and low latency.
- **Embedded Systems:** Ideal for applications needing efficient power management and high-speed data transfer.
- **Consumer Electronics:** Can be utilized in devices that require PCIe connectivity for peripherals or expansion cards.

This component is particularly suited for applications that demand robust performance in data routing and power efficiency, making it a valuable asset in modern electronic designs.