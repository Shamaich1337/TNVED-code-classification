[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': "Give me information about the component of APDS-9960 production of BROADCOM LIMITED from the text:APDS-9960\nDigital Proximity, Ambient Light, RGB and Gesture Sensor\nData Sheet\nDescription\nThe APDS-9960 device features advanced Gesture detec -\ntion, Proximity detection, Digital Ambient Light Sense \n(ALS) and Color Sense (RGBC). The slim modular package, \nL 3.94 × W 2.36 × H 1.35 mm, incorporates an IR LED and \nfactory calibrated LED driver for drop-in compatibility \nwith existing footprints.\nGesture detection\nGesture detection utilizes four directional photodiodes to \nsense reflected IR energy (sourced by the integrated LED) \nto convert physical motion information (i.e. velocity, direc -\ntion and distance) to a digital information. The architec -\nture of the gesture engine features automatic activation \n(based on Proximity engine results), ambient light sub -\ntraction, cross-talk cancelation, dual 8-bit data convert -\ners, power saving inter-conversion delay, 32-dataset FIFO, \nand interrupt-driven I2C-bus communication. The gesture \nengine accommodates a wide range of mobile device ges -\nturing requirements: simple UP-DOWN-RIGHT-LEFT ges -\ntures or more complex gestures can be accurately sensed. \nPower consumption and noise are minimized with adjust -\nable IR LED timing.\nDescription continued on next page...\nApplications\n• Gesture Detection\n• Color Sense\n• Ambient Light Sensing\n• Cell Phone Touch Screen Disable\n• Mechanical Switch Replacement\n \nOrdering Information\nPart Number Packaging Quantity\nAPDS-9960 Tape & Reel 5000 per reelFeatures\n• Ambient Light and RGB Color Sensing, Proximity \nSensing, and Gesture Detection in an Optical Module\n• Ambient Light and RGB Color Sensing\n- UV and IR blocking filters\n- Programmable gain and integration time\n- Very high sensitivity – Ideally suited for operation \nbehind dark glass\n• Proximity  Sensing\n- Trimmed to provide consistent reading\n- Ambient light rejection\n- Offset compensation\n- Programmable driver for IR LED current\n- Saturation indicator bit\n• Complex Gesture Sensing\n- Four separate diodes sensitive to different directions\n- Ambient light rejection\n- Offset compensation\n- Programmable driver for IR LED current\n- 32 dataset storage FIFO\n- Interrupt driven I2C-bus communication\n• I2C-bus Fast Mode Compatible Interface\n- Data Rates up to 400 kHz\n- Dedicated Interrupt Pin\n• Small Package L 3.94 × W 2.36 × H 1.35 mm\n\n2Functional Block DiagramDescription (Cont.) \nColor and ALS detection\nThe Color and ALS detection feature provides red, green, \nblue and clear light intensity data. Each of the R, G, B, C \nchannels have a UV and IR blocking filter and a dedicated \ndata converter producing16-bit data simultaneously. This \narchitecture allows applications to accurately measure \nambient light and sense color which enables devices to \ncalculate color temperature and control display backlight.\nInterrupt\nI2C Interface\nINTSCL\nSDABlue\nThreshold \nControlGNDGreenRedClear\nRightLeftDownUpLED KLED AVDD\nLDR\n32 x 4 Byte\nFIFOGesture \nEngine\nProximity EngineALSRGBC\nADC\nPWMMUXOscillatorProximity detection\nThe Proximity detection feature provides distance mea -\nsurement (E.g. mobile device screen to user’s ear) by pho -\ntodiode detection of reflected IR energy (sourced by the in -\ntegrated LED). Detect/release events are interrupt driven, \nand occur whenever proximity result crosses upper and/\nor lower threshold settings. The proximity engine features \noffset adjustment registers to compensate for system \noffset caused by unwanted IR energy reflections appear -\ning at the sensor. The IR LED intensity is factory trimmed \nto eliminate the need for end-equipment calibration due \nto component variations. Proximity results are further im -\nproved by automatic ambient light subtraction.\n3I/O Pins Configuration\nPin Name Type Description\n1 SDA I/O I2C serial data I/O terminal - serial data I/O for I2C-bus\n2 INT O Interrupt - open drain (active low)\n3 LDR LED driver input for proximity IR LED, constant current source LED driver\n4 LEDK LED Cathode, connect to LDR pin when using internal LED driver circuit\n5 LEDA LED Anode, connect to V LEDA  on PCB\n6 GND Power supply ground. All voltages are referenced to GND\n7 SCL I I2C serial clock input terminal - clock signal for I2C serial data\n8 VDD Power supply voltage\nAbsolute Maximum Ratings over operating free-air temperature range (unless otherwise noted)*\nParameter Symbol Min Max Units Conditions\nPower supply voltage [1] VDD 3.8 V\nInput voltage range VIN -0.5 3.8 V\nOutput voltage range VOUT -0.3 3.8 V\nStorage temperature range Tstg -40 85 °C\n* Stresses beyond those listed under “absolute maximum ratings” may cause permanent damage to the device. These are stress ratings only and \nfunctional operation of the device at these or any other conditions beyond those indicated under “recommended operating conditions” is not \nimplied. Exposure to absolute-maximum-rated conditions for extended periods may affect device reliability. \nNote 1.  All voltages are with respect to GND.\nRecommended Operating Conditions\nParameter Symbol Min Typ Max Units\nOperating ambient temperature TA -30 85 °C\nPower supply voltage VDD 2.4 3.0 3.6 V\nSupply voltage accuracy, V DD total error \nincluding transients -3 +3 %\nLED supply voltage VLEDA 3.0 4.5 V\nOperating Characteristics, V DD = 3 V, T A = 25 °C (unless otherwise noted)\nParameter Symbol Min Typ Max Units Test Conditions\nIDD supply current [1] IDD 200 250 µA Active ALS state\nPON = AEN = 1, PEN = 0\n790 Proximity, LDR pulse ON,\nPPulse = 8  (I LDR not included)\n790 Gesture, LDR pulse ON,\nGPulse = 8  (I LDR not included)\n38 Wait state\nPON = 1, AEN = PEN = 0\n1.0 10.0 Sleep state [2]\nVOL INT, SDA output low voltage VOL 0 0.4 V 3 mA sink current\nILEAK  leakage current, SDA, SCL, INT pins ILEAK −5 5 µA\nILEAK  leakage current, LDR P\\pin ILEAK −10 10 µA\nSCL, SDA input high voltage, V IH VIH 1.26 VDD V\nSCL, SDA input low voltage, V IL VIL 0.54 V\nNotes \n1. Values are shown at the VDD pin and do not include current through the IR LED.\n2. Sleep state occurs when PON = 0 and I2C bus is idle. If Sleep state has been entered as the result of operational flow, SAI = 1, PON will be high.\n4Optical Characteristics, V DD = 3 V, T A = 25 °C, AGAIN = 16 ×, AEN = 1 (unless otherwise noted)\nParameter Red Channel Green Channel Blue Channel Units Test\nConditions\nIrradiance \nresponsivity [1]Min Max Min Max Min Max\n0 15 10 42 57 100 % λD = 465 nm [2]\n4 25 54 85 10 45 λD = 525 nm [3]\n64 120 0 14 3 29 λD = 625 nm [4]\nNotes: \n1.  The percentage shown represents the ratio of the respective red, green, or blue channel value to the clear channel value.\n2. The 465 nm input irradiance is supplied by an InGaN light-emitting diode with the following characteristics: \n dominant wavelength λ D = 465 nm, spectral halfwidth Δλ ½ = 22 nm.\n3.  The 525 nm input irradiance is supplied by an InGaN light-emitting diode with the following characteristics:\n dominant wavelength λ D = 525 nm, spectral halfwidth Δλ ½ = 35 nm.\n4.  The 625 nm input irradiance is supplied by a AlInGaP light-emitting diode with the following characteristics:\n dominant wavelength λ D = 625 nm, spectral halfwidth Δλ ½ = 15 nm.\nRGBC Characteristics, V DD = 3 V, T A = 25 °C, AGAIN = 16 ×, AEN = 1 (unless otherwise noted)\nParameter Min Typ Max Units Test Conditions\nDark ALS count value 0 3 counts Ee = 0, AGAIN = 64×, \nATIME = 0×DB (100 ms)\nADC integration time step size 2.78 ms ATIME = 0×FF\nADC number of integration steps 1 256 steps\nFull scale ADC counts per step 1025 counts\nFull scale ADC count value 65535 counts ATIME = 0×C0 (175 ms)\nGain scaling, relative to 1× gain setting 3.6 4 4.4 4×\n14.4 16 17.6 16×\n57.6 64 70.4 64×\nClear channel irradiance responsivity 18.88 23.60 28.32 counts/(µW/cm2) Neutral white LED, l = 560 nm\nProximity Characteristics, V DD = 3 V, T A = 25 °C, PEN = 1 (unless otherwise noted)\nParameter Min Typ Max Units Test Conditions\nADC conversion time step size 696.6 µs\nADC number of integration steps 1 steps\nFull scale ADC counts 255 counts\nLED pulse count [1] 1 64 pulses\nLED pulse width – LED on time [2] 4 µs PPLEN = 0\n8 PPLEN = 1\n16 PPLEN = 2\n32 PPLEN = 3\nLED drive current [3] 100 mA LDRIVE = 0\n50 LDRIVE = 1\n25 LDRIVE = 2\n12.5 LDRIVE = 3\nLED boost [3] 100 % LED_BOOST = 0\n150 LED_BOOST = 1\n200 LED_BOOST = 2\n300 LED_BOOST = 3\nProximity ADC count value,  \nno object [4]10 25 counts VLEDA  = 3 V, LDRIVE = 100 mA, \nPPULSE = 8, PGAIN = 4x, PPLEN = \n8 ms, LED_BOOST = 100%, open \nview (no glass) and no reflective \nobject above the module.\nTable continued on next page...\n5Proximity Characteristics, V DD = 3 V, T A = 25 °C, PEN = 1 (unless otherwise noted) (continued)\nParameter Min Typ Max Units Test Conditions\nProximity ADC count value,  \n100 mm distance object [5, 6]96 120 144 counts Reflecting object – 73 mm × 83 mm Kodak  \n90% grey card, 100 mm distance, V LEDA  = 3 V,  \nLDRIVE = 100 mA, PPULSE = 8, PGAIN = 4x, \nPPLEN = 8 ms, LED_BOOST = 100%,  \nopen view (no glass) above the module. \nNotes:\n1. This parameter is ensured by design and characterization and is not 100% tested. 8 pulses are the recommended driving conditions. For other \ndriving conditions, contact Avago Field Sales.\n2. Value may be as much as 1.36 µs longer than specified.\n3. Value is factory-adjusted to meet the Proximity count specification. Considerable variation (relative to the typical value) is possible after adjustment. \nLED BOOST increases current setting (as defined by LDRIVE or GLDRIVE). For example, if LDRIVE = 0 and LED BOOST = 100%, LDR current is 100 mA.\n4. Proximity offset value varies with power supply characteristics and noise.\n5. ILEDA is factory calibrated to achieve this specification. Offset and crosstalk directly sum with this value and is system dependent.\n6. No glass or aperture above the module. Tested value is the average of 5 consecutive readings.\nGesture Characteristics, V DD = 3 V, T A = 25 °C, GEN = 1 (unless otherwise noted)\nParameter Min Typ Max Units Test Conditions\nADC conversion time step size [1] 1.39 ms\nLED pulse count [2] 1 64 pulses\nLED pulse width – LED on time [3] 4 µs GPLEN = 0\n8 GPLEN = 1\n12 GPLEN = 2\n16 GPLEN = 3\nLED drive current [4] 100 mA GLDRIVE = 0\n50 GLDRIVE = 1\n25 GLDRIVE = 2\n12.5 GLDRIVE = 3\nLED boost [4] 100 % LED_BOOST = 0\n150 LED_BOOST = 1\n200 LED_BOOST = 2 [5]\n300 LED_BOOST = 3 [5]\nGesture ADC count value,  \nno object [6]10 25 counts VLEDA  = 3 V, GLDRIVE = 100 mA, GPULSE = \n8, GGAIN = 4x, GPLEN = 8 ms, LED_BOOST = \n100%, open view (no glass) and no reflective \nobject above the module, sum of UP & DOWN \nphotodiodes.\nGesture ADC count value [7, 8] 96 120 144 counts Reflecting object – 73 mm × 83 mm Kodak \n90% grey card, 100 mm distance, V LEDA  = 3 V, \nGLDRIVE = 100 mA, GPULSE = 8, GGAIN = 4x, \nGPLEN = 8 ms, LED_BOOST = 100%,  \nopen view (no glass) above the module,  \nsum of UP & DOWN photodiodes.\nGesture wait step size 2.78 ms GTIME = 0x01\nNotes:\n1. Each U/D or R/L pair requires a conversion time of 696.6 ms. For all four directions the conversion requires twice as much time.\n2. This parameter ensured by design and characterization and is not 100% tested. 8 pulses are the recommended driving conditions. For other \ndriving conditions, contact Avago Field Sales.\n3. Value may be as much as 1.36 ms longer than specified.\n4. Value is factory-adjusted to meet the Gesture count specification. Considerable variation (relative to the typical value) is possible after adjustment.\n5. When operating at these LED drive conditions, it is recommended to separate the VDD and VLEDA supplies.\n6. Gesture offset value varies with power supply characteristics and noise.\n7. ILEDA is factory calibrated to achieve this specification. Offset and crosstalk directly sum with this value and is system dependent.\n8. No glass or aperture above the module. Tested value is the average of 5 consecutive readings.\n6Figure 1. Timing DiagramsStart\nConditionStop\nConditionPSDAt tHD;DAT t BUF\nVIH\nVILSCL\ntSU;STA tHIGHtf tr\ntHD;STAtLOW\nVIH\nVIL\nS P SSU;DATtSU;STOIR LED Characteristics, V DD = 3 V, T A = 25 °C (unless otherwise noted)\nParameter Min Typ Max Units Test Conditions\nPeak Wavelength, λ P 950 nm IF = 20 mA\nSpectrum Width, Half  Power, Δλ 30 nm IF = 20 mA\nOptical Rise Time, T R 20 ns IF = 100 mA\nOptical Fall Time, T F 20 ns IF = 100 mA\nWait Characteristics, V DD = 3 V, T A = 25 °C, WEN = 1 (unless otherwise noted)\nParameter Min Typ Max Units Test Conditions\nWait Step Size 2.78 ms WTIME = 0×FF\nAC Electrical Characteristics, V DD = 3 V, T A = 25 °C (unless otherwise noted) *\nParameter Symbol Min. Max. Unit\nClock frequency (I2C-bus only) fSCL 0 400 kHz\nBus free time between a STOP and START condition tBUF 1.3 – µs\nHold time (repeated) START condition. After this period, the first clock pulse \nis generatedtHDSTA 0.6 – µs\nSet-up time for a repeated START condition tSU;STA 0.6 – µs\nSet-up time for STOP condition tSU;STO 0.6 – µs\nData hold time tHD;DAT 30 – ns\nData set-up time tSU;DAT 100 – ns\nLOW period of the SCL clock tLOW 1.3 – µs\nHIGH period of the SCL clock tHIGH 0.6 – µs\nClock/data fall time tf 20 300 ns\nClock/data rise time tr 20 300 ns\nInput pin capacitance Ci – 10 pF\n* Specified by design and characterization; not production tested.\n7040008000120001600020000\n0 4000 8000 12000 16000 20000Avg Sensor LUX\nMeter LUX\n02004006008001000\n0 200 400 600 800 1000Avg Sensor LUX\nMeter LUX2345Avg Sensor LUX\n01\nMeter LUX0 1 2 3 4 5\n0.600.700.800.901.001.101.201.301.40\n-60 -40 -20 0 20 40 60 80 100Normalized IDD @ 3V \nTemperature (°C)0.600.700.800.901.001.101.201.301.40\n2.2 2.4 2.6 2.8 3 3.2 3.4 3.6 3.8 4Normalized IDD @ 3V 25°C\nVDD (V)0%20%40%60%80%100%120%\n300 400 500 600 700 800 900 1000 1100Normalized Responsivity\nWavelength (nm)Clear\nRed\nGreen\nBlue\nUp/Down/Left/RightR\nBC\nG\nU,D,L,R\nFigure 4a. Normalized IDD vs. VDDFigure 3c. ALS Sensor LUX vs Meter LUX using White LightFigure 3a. ALS Sensor LUX vs Meter LUX using White Light\nFigure 3b. ALS Sensor LUX vs Meter LUX using Incandescent LightFigure 2. Spectral Response\nFigure 4b. Normalized IDD vs. Temperature\n8I2C-bus ProtocolA Acknowledge (0)\nN Not Acknowledged (1)\nP Stop Condition\nR Read (1)\nS Start Condition\nSr Repeated Start Condition\nW Write (0)\n… Continuation of protocol\n Master-to-Slave\n Slave-to-Master\n1 7 1 1 8 1 8 1 1\nS Slave Address W A Register Address A Data A ... P\nI2C-bus Write Protocol\n1 7 1 1 8 1 1 7 1 1 8 1\nS Slave Address W A Register Address A Sr Slave Address R A Data A\n8 1 1\nData A ... P1 7 1 1 8 1 8 1 1\nS Slave Address R A Data A Data A ... P\nI2C-bus Read ProtocolThe I2C-bus standard provides for three types of bus trans -\naction: read, write, and a combined protocol. During a \nwrite operation, the first byte written is a command byte \nfollowed by data. In a combined protocol, the first byte \nwritten is the command byte followed by reading a series \nof bytes. If a read command is issued, the register address \nfrom the previous command will be used for data access. \nLikewise, if the MSB of the command is not set, the device \nwill write a series of bytes at the address stored in the last \nvalid command with a register address. The command \nbyte contains either control information or a 5-bit register \naddress. The control commands can also be used to clear \ninterrupts.\nThe I2C-bus protocol was developed by Philips (now NXP). \nFor a complete description of the I2C-bus protocol, please \nreview the NXP I2C-bus design specification at http://\nwww.i2c−bus.org/references/.I2C-bus Protocol\nInterface and control are accomplished through an I2C-bus \nserial compatible interface (standard or fast mode) to a set \nof registers that provide access to device control functions \nand output data. The devices support the 7-bit I2C-bus ad -\ndressing protocol. \nThe device supports a single slave address of 0 ×39 Hex \nusing 7-bit addressing protocol. (Contact factory for other \naddressing options.)Figure 5b. Normalized LED Angular Emitting Profile Figure 5a. Normalized PD Responsitivity vs. Angular Displacement\nI2C-bus Read Protocol - Combined Format00.10.20.30.40.50.60.70.80.911.1\n-50 -40 -30 -20 -10 0 10 20 30 40 50Normalized Responsitivity\nAngle (Deg)00.10.20.30.40.50.60.70.80.911.1\n-60 -50 -40 -30 -20 -10 0 10 20 30 40 50 60Normalized Radiant Intensity \nAngle (Deg)Half-power point Half-power\npoint\n9Detailed Description\nGesture detection, proximity detection, and RGBC color \nsense/ambient light sense functionality is controlled by a \nstate machine, as depicted in Figure 6, which reconfigures \non-chip analog resources when each functional engine is \nentered. Functional states/engines can be individually in -\ncluded or excluded from the progression of state machine \nflow. Each functional engine contains controls (E.g., Gain, \nADC integration time, wait time, persistence, thresholds, \netc.) that govern operation. Control of the Led Drive pin, \nLDR, is shared between Proximity and Gesture function -\nality. The color/ALS engine does not use the IR LED, but \ncross talk from IR LED emissions during an optical pattern \ntransmission may affect results.\nThe operational cycle of the device for Gesture/Proximity/\nColor is as depicted in Figure 6 and Figure 7.\nUpon power-up, POR, the device initializes and immedi -\nately enters the low power SLEEP state. In this operational \nstate the internal oscillator and other circuitry are not \nactive, resulting in ultra-low power consumption. If I²C \ntransaction occurs during this state, the oscillator and I²C \ncore wakeup temporarily to service the communication. \nOnce the Power ON bit, PON, is enabled, the internal os -\ncillator and attendant circuitry are active, but power con -\nsumption remains low until one of the functional engine \nblocks are entered. The first time the SLEEP state is exited \nand any of the analog engines are enabled (PEN, GEN, AEN Figure 6. Simplified State Diagram \nFigure 7. Detailed State Diagram=1) an EXIT SLEEP pause occurs; followed by an immedi -\nate entry into the selected engine. If multiple engines are \nenabled, then the operational flow progresses in the fol -\nlowing order: idle, proximity, gesture (if GMODE = 1), wait, \ncolor/ALS, and sleep (if SAI = 1 and INT pin is asserted). \nThe wait operational state functions to reduce the power \nconsumption and data collection rate. If wait is enabled, \nWEN=1, the delay is adjustable from 2.78 ms to 8.54 s, as \nset by the value in the WTIME register and WLONG control \nbit.\nPROXIDLE\nGESTURE WAITCOLOR\nALSSLEEP\nGesture, Proximity\nColor/ALS\nState Machine\nPORINITILIZE \n(5.7 ms)\nSLEEP\nIDLEEXIT SLEEP \n(7 ms)\nGESTURE \nENGINEPROXIMITY \nENGINECOLOR\nENGINE\nWAIT\n(0 –8.5ms)PON == 1 ?PEN || \nGEN || \nAEN == 1 ?\nSAI == 1 \n&& INT \nPIN == 0 ?\nAEN == 1 ?\nGEN == \n1 && \nGMODE \n== 1 ?Operational States\nY\nNY N\nYN\nNYNY\nPON = 1\nPEN = 0AEN = 0\nGEN = 0\nGMODE = 0 / 1\nPEN = 0AEN = 1GEN = 0 / 1\nGMODE = 0 PEN = 1\nAEN = 0 / 1\nGEN = 0 / 1\nGMODE = 0 PEN = 1\nAEN = 0 / 1GEN = 1\nGMODE = 1 \nGMODE is set by host\nGMODE is set \nby Prox\n10Sleep After Interrupt Operation\nAfter all the enabled engines/operational states have ex -\necuted, causing a hardware interrupt, the state machine \nreturns to either IDLE or SLEEP , as selected by the Sleep \nAfter Interrupt bit, SAI. SLEEP is entered when two condi -\ntions are met: SAI = 1, and the INT pin has been asserted. \nEntering SLEEP does not automatically change any of the \nregister settings (E.g. PON bit is still high, but the normal \noperational state is over-ridden by SLEEP state). SLEEP \nstate is terminated by an I²C clear of the INT pin or if SAI \nbit is cleared.Proximity Operation\nThe Proximity detection feature provides distance mea -\nsurement by photodiode detection of reflected IR energy \nsourced by the integrated LED. The following registers and \ncontrol bits govern proximity operation and the opera -\ntional flow is depicted in Figure 8.\nTable 1. Proximity Controls\nRegister/Bit Address Description\nENABLE<PON> 0x80<0> Power ON\nENABLE<PEN> 0x80<2> Proximity Enable\nENABLE<PIEN> 0x80<5> Proximity Interrupt Enable\nPILT 0x89 Proximity low threshold\nPIHT 0x8B Proximity high threshold\nPERS<PPERS> 0x8C<7:4> Proximity Interrupt Persistence\nPPULSE<PPLEN> 0x8E<7:6> Proximity Pulse Length\nPPULSE<PPULSE> 0x8E<5:0> Proximity Pulse Count\nCONTROL<PGAIN> 0x8F<3:2> Proximity Gain Control\nCONTROL<LDRIVE> 0x8F<7:6> LED Drive Strength\nCONFIG2<PSIEN> 0x90<7> Proximity Saturation Interrupt Enable\nCONFIG2<LEDBOOST> 0x90<5:4> Proximity/Gesture LED Boost\nSTATUS<PGSAT> 0x93<6> Proximity Saturation\nSTATUS<PINT> 0x93<5> Proximity Interrupt\nSTATUS<PVALID> 0x93<1> Proximity Valid\nPDATA 0x9C Proximity Data\nPOFFSET_UR 0x9D Proximity Offset UP/RIGHT\nPOFFSET_DL 0x9E Proximity Offset DOWN/LEFT\nCONFIG3<PCMP> 0x9F<5> Proximity Gain Compensation Enable\nCONFIG3<PMSK_U> 0x9F<3> Proximity Mask UP Enable\nCONFIG3<PMSK_D> 0x9F<2> Proximity Mask DOWN Enable\nCONFIG3<PMSK_L> 0x9F<1> Proximity Mask LEFT Enable\nCONFIG3<PMSK_R> 0x9F<0> Proximity Mask RIGHT Enable\nPICLEAR 0xE5 Proximity Interrupt Clear\nAICLEAR 0xE7 All Non-Gesture Interrupt Clear\n11Figure 8. Detailed Proximity Diagram Proximity results are affected by three fundamental \nfactors: IR LED emission, IR reception, and environmental \nfactors, including target distance and surface reflectivity.\nThe IR reception signal path begins with IR detection from \nfour [directional gesture] photodiodes and ends with the \n8-bit proximity result in PDATA register. Signal from the \nphotodiodes is combined, amplified, and offset adjusted \nto optimize performance. The same four photodiodes are \nused for gesture operation as well as proximity operation. \nDiodes are paired to form two signal paths: UP/RIGHT and \nDOWN/LEFT. Regardless of pairing, any of the photodiodes \ncan be masked to exclude its contribution to the proxim -\nity result. Masking one of the paired diodes effectively \nreduces the signal by half and causes the full-scale result \nto be reduced from 255 to 127. To correct this reduction \nin full-scale, the proximity gain compensation bit, PCMP , \ncan be set, returning F.S. to 255. Gain is adjustable from \n1x to 8x using the PGAIN control bits. Offset correction or \ncross-talk compensation is accomplished by adjustment \nto the POFFSET_UR and POFSET_DL registers.The analog \ncircuitry of the device applies the offset value as a subtrac -\ntion to the signal accumulation; therefore a positive offset \nvalue has the effect of decreasing the results.\nOptically, the IR emission appears as a pulse train. The \nnumber of pulses is set by the PPULSE bits and the period \nof each pulse is adjustable using the PPLEN bits. The in -\ntensity of the IR emission is selectable using the LDRIVE \ncontrol bits; corresponding to four, factory calibrated, \ncurrent levels. If a higher intensity is required (E.g. longer \ndetection distance or device placement beneath dark \nglass) then the LEDBOOST bit can be used to boost current \nup to an additional 300%.\nLED duty cycle and subsequent power consumption of \nthe integrated IR LED can be calculated using the follow -\ning table shown in Table 2, and equations. If proximity \nevents are separated by a wait time, as set by AWAIT and \nWLONG, then the total LED off time must be increased by \nthe wait time.\nTable 2. Approximate Proximity Timing\nPPLENtINIT\n(μs)tLED ON \n(μs)tACC\n(μs)tCNVT\n(μs)\n4 μs 40.8 5.4 28.6 796.6\n8 μs 44.9 9.5 36.73 796.6\n16 μs 53.0 17.7 53.1 796.6\n32 μs 69.4 34.0 85.7 796.6\ntPROX RESULT  = t INIT + t CNVT  + PPULSE x t ACC\ntTOTAL LED ON  = PPULSE x t LED ON\ntTOTAL LED OFF  = t PROX RESULT  – tTOTAL LED ONCOLLECT\nPROX\nDATA\nDATA TO \nPDATA\nPVALI D = 1PEN = 1ENTER\nPROX\nPERSISTANCE ++PILT <= \nPDATA  \n<= PIHT\nNY\nRESET\nPERSISTANCE\nPERSISTANCE  \n>=\nPPERSN\nPINT = 1Y\nASSERT INT PINPIEN ==1 \n?\nYN\nEXITPROXIMITY ENGIN E\nPVALI D is automat ically  reset \nwhene ver PDATA is read. \nPINT must be m anually reset \nby a write-access to PICLEAR \nor AICLEAR.\n12An Interrupt can be generated with each new proximity \nresult or whenever proximity results exceed or fall below \nlevels set in the PIHT and/or PILT threshold registers. To \nprevent premature/ false interrupts an interrupt persis -\ntence filter is also included; interrupts will only be assert -\ned if the consecutive number of out-of-threshold results \nis equal or greater than the value set by PPERS. Each “in-\nthreshold” proximity result, PDATA, will reset the persis -\ntence count. If the analog circuitry becomes saturated, \nthe PGSAT bit will be asserted to indicate PDATA results may not be accurate. The PINT and PGSAT bits are always \navailable for I²C polling, but PIEN bit must be set for PINT \nto assert a hardware interrupt on the INT pin. Similarly, \nsaturation of the analog data converter can be detected \nby polling PGSAT bit; to enable this feature the PSIEN bit \nmust be set. PVALID is cleared by reading PDATA. PGSAT, \nand PINT are cleared by “address accessing” (i.e. I²C trans -\naction consisting of only two bytes: chip address, followed \nby a register address with R/W=1) PICLEAR or AICLEAR.\nTable 3. Color / ALS Controls\nRegister/Bit Address Description\nENABLE<PON> 0x80<0> Power ON\nENABLE<AEN> 0x80<1> ALS Enable\nENABLE<AIEN> 0x80<4> ALS Interrupt Enable\nENABLE<WEN> 0x80<3> Wait Enable\nATIME 0x81 ALS ADC Integration Time\nWTIME 0x83 Wait Time\nAILTL 0x84 ALS low threshold, lower byte\nAILTH 0x85 ALS low threshold, upper byte\nAIHTL 0x86 ALS high threshold, lower byte\nAIHTH 0x87 ALS high threshold, upper byte\nPERS<APERS> 0x8C<3:0> ALS Interrupt Persistence\nCONFIG1<WLONG> 0x8D<1> Wait Long Enable\nCONTROL<AGAIN> 0x8F<1:0> ALS Gain Control\nCONFIG2<CPSIEN> 0x90<6> Clear diode Saturation Interrupt Enable\nSTATUS<CPSAT> 0x93<7> Clear Diode Saturation\nSTATUS<AINT> 0x93<4> ALS Interrupt\nSTATUS<AVALID> 0x93<0> ALS Valid\nCDATAL 0x94 Clear Data, Low byte\nCDATAH 0x95 Clear Data, High byte\nRDATAL 0x96 Red Data, Low byte\nRDATAH 0x97 Red Data, High byte\nGDATAL 0x98 Green Data, Low byte\nGDATAH 0x99 Green Data, High byte\nBDATAL 0x9A Blue Data, Low byte\nBDATAH 0x9B Blue Data, High byte\nCICLEAR 0xE5 Clear Channel Interrupt Clear\nAICLEAR 0xE7 All Non-Gesture Interrupt Clear\n13Figure 9. Color / ALS State DiagramColor and Ambient Light Sense Operation\nThe Color and Ambient Light Sense detection functional -\nity uses an array of color and IR filtered photodiodes to \nmeasure red, green, and blue content of light, as well as \nthe non-color filtered clear channel. The following regis -\nters and control bits govern Color/ALS operation and the \noperational flow is depicted in Figure 9.The Color/ALS reception signal path begins with filtered \nRGBC detection at the photodiodes and ends with the \n16-bit results in the RGBC data registers. Signal from the \nphotodiode array accumulates for a period of time set by \nthe value in ATIME before the results are placed into the \nRGBCDATA registers. Gain is adjustable from 1x to 64x, \nand is determined by the setting of CONTROL<AGAIN>. \nPerformance characteristics such as accuracy, resolution, \nconversion speed, and power consumption can be adjust -\ned to meet the needs of the application.\nBefore entering (re-entering) the Color/ALS engine, an \nadjustable, low power consumption, delay is entered. \nThe wait time for this delay is selectable using the WEN, \nWTIME and WLONG control bits and ranges from 0 to \n8.54s. During this period the internal oscillator is still \nrunning, but all other circuitry is deactivated.\nAn interrupt can be generated whenever Clear Channel \nresults exceed or fall below levels set in the AILTL/AIHTL \nand/or AILTH/AIHTH threshold registers. To prevent pre -\nmature/false interrupts a persistence filter is also includ -\ned; interrupts will only be asserted if the consecutive \nnumber of out-of-threshold results is equal or greater \nthan the value set by APERS. Each “in-threshold” Clear \nchannel result, CDATA, will reset the persistence count. If \nthe analog circuitry becomes saturated, the ASAT bit will \nbe asserted to indicate RGBCDATA results may not be ac -\ncurate. The AINT and CPSAT bits are always available for \nI²C polling, but AIEN bit must be set for AINT to assert a \nhardware interrupt on the INT pin. Similarly, saturation \nof the analog data converter can be detected by polling \nCPSAT bit; to enable this feature the CPSIEN bit must be \nset. AVALID is cleared by reading RGBCDATA. ASAT, and \nAINT are cleared by “address  accessing” (i.e. I²C transac -\ntion consisting of only two bytes: chip address, followed \nby a register address with R/W=1) CICLEAR or AICLEAR. \nRGBC results can be used to calculate ambient light levels \n(i.e. Lux) and color temperature (i.e. Kelvin).COLLEC T\nCOLOR\nDATA\nDATA TO \nR,G,B, CDATA\nAVALID = 1AEN = 1ENTER \nCOLOR\nPERSISTANCE++AIL/H\nRESET\nPERSISTANC E\nPERSI STANCE \n>=\nAPERSN\nAINT = 1Y\nASSERT INT PINAIEN ==1 \n?\nYN\nEXITCOLOR/ ALS ENGINE\nAVALI D is aut omatically reset \nwhenever any of C,R,G,B-\nDATA registers are read. AINT \nand C PSAT are manually  \nreset by a write-access t o \nCICLEAR  or AICLEAR.TL <=\nCDATA\n<= A L/HTH\n?\n14Gesture Operation\nThe Gesture detection feature provides motion detection by utilizing directionally sensitive photodiodes to sense re -\nflected IR energy sourced by the integrated LED. The following registers and control bits govern gesture operation and \nthe operational flow is depicted in Figure 10.\nTable 4. Gesture Controls\nRegister/Bit Address Description\nENABLE<PON> 0x80<0> Power ON\nENABLE<GEN> 0x80<6> Gesture Enable\nGPENTH 0xA0 Gesture Proximity Entry Threshold\nGEXTH 0xA1 Gesture Exit Threshold\nGCONFIG1<GFIFOTH> 0xA2<7:6> Gesture FIFO Threshold\nGCONFIG1<GEXMSK> 0xA2<5:2> Gesture Exit Mask\nGCONFIG1<GEXPERS> 0xA2<1:0> Gesture Exit Persistence\nGCONFIG2<GGAIN> 0xA3<6:5> Gesture Gain Control\nGCONFIG2<GLDRIVE> 0xA3<4:3> Gesture LED Drive Strength\nGCONFIG2<GWTIME> 0xA3<2:0> Gesture Wait Time\nSTATUS<PGSAT> 0x93<6> Gesture Saturation\nCONFIG2<LEDBOOST> 0x90<5:4> Gesture/Proximity LED Boost\nGOFFSET_U 0xA4 Gesture Offset, UP\nGOFFSET_D 0xA5 Gesture Offset, DOWN\nGOFFSET_L 0xA7 Gesture Offset, LEFT\nGOFFSET_R 0xA9 Gesture Offset, RIGHT\nGPULSE<GPULSE> 0xA6<5:0> Pulse Count\nGPULSE<GPLEN> 0xA6<7:6> Gesture Pulse Length\nGCONFIG3<GDIMS> 0xAA<1:0> Gesture Dimension Select\nGCONFIG4<GFIFO_CLR>  0xAB<2> Gesture FIFO Clear\nGCONFIG4<GIEN> 0xAB<1> Gesture Interrupt Enable\nGCONFIG4<GMODE> 0xAB<0> Gesture Mode\nGFLVL 0xAE Gesture FIFO Level\nGSTATUS<GFOV> 0xAF<1> Gesture FIFO Overflow\nGSTATUS<GVALID> 0xAF<0> Gesture Valid\nGFIFO_U 0xFC Gesture FIFO Data, UP\nGFIFO_D 0xFD Gesture FIFO Data, DOWN\nGFIFO_L 0xFE Gesture FIFO Data, LEFT\nGFIFO_R 0xFF Gesture FIFO Data, RIGHT\nCONFIG1<LOWPOW> 0x8D Low Power Clock Mode\n15Figure 10. Detailed Gesture DiagramCOLLECT U/D\nPHOTODIODE\nDATAGFLVLs++GDIMS !=10\nCOLLECT L/R\nPHOTODIODE\nDATADATA TO FIFO\nGDIMS !=01\nASSERT INT PINGFLVLs >=\nGFIFOTHs\n?GFLVLs ==32\n?\nNY\nGIEN ==1\n?PERSISTANCE++UNMASKED\nGDATA <=\nGEXTH sN\nYRESET\nPERSISTANCE\nWAITGWTIME >0\n?N\nYPERSISTANCE\n>=\nGEXPERS sN\nGVALID ==1\n?\nRESET FIFO\n(Orphanded data) YNGMODE=0YENTER\nGESTURE\nEXIT\nGESTUREN\nN\nY\nDATA AQUISITION FIFO & INTERRUPTS\nWAITGWTIME>0\n?N\nY\nWAIT\nLOOP CONTROLYN\nYGESTURE ENGINE\nGMODE =1\nGVALID =1\nGINT=1GFOV = 1\n*Special state to clear FIFO in \nthe event of gesture entry \nfollowed by rapid exit. This \ncondition results in to few \nFIFO datasets to assert GINT.  \nThis state prevents the \ncondition where “old” data \nexists in FIFO that is not part \nof current gesture entry.\nGMODE =0\nGVALID =0/1\nGFLVL >=0\nGINT=1Has FIFO\n over/f_lowed?\nEnough data\nIn FIFO to assert \ninterrupt?\nIs GDATA \nindicating \n“hand wave” \nhas /f_inished?\nHave enough “hand wave \nover” datasets occurred \nconsecutively to exit \nGesture?N\nY\nCGEXTH s==0\n?\nRemain in gesture mode \ninde/f_inatly?Y\nNGVALID =0/1\nGINT=0/1\nGMODE ==0\n?\nYN\nHas GMODE \nbeen \ncleared by host?\nASSERT INT PINGIEN ==1\n?\nYNGINT=1Conditions:\n1. Gesture entry (GMODE=1)2. GFLVL < GFIFOTH (GINT always 0)3. Gesture exit (GMODE = 0)GFLVLs >=\nGFIFOTHs\n?\nGVALID =1GINT =1\nGFLVLs ==0\n?GINT=0N\nY\nGMODE ==1\n?Y\nNGVALID =0N\nYGFLVLs>=\nGFIFOTHs\n?\nGVALID=1GINT=1N\nY\n*Ifgesture motion hasended,\nGMODE =0,butGDATA isstill\navailable after exitfrom gesture\nengine.yaaryy y\nmielielimlimrelmliePPrePremimmmmelimelielielimlimlimlimimimlimlililimlimimimmimlimlielielimelimiPDDDee\nataashasassa\nDsh\nDDDa\n161x to 8x using the GGAIN control bits. Offset correction is \naccomplished by individual adjustment to GOFFSET_U, \nGOFFSET_D, GOFFSET_L, GOFFSET_R registers to improve \ncross-talk performance. The analog circuitry of the device \napplies offset values as a subtraction to the signal accu -\nmulation; therefore a positive offset value has the effect of \ndecreasing the results.\nOptically, the IR emission appears as a pulse train. The \nnumber of pulses is set by the GPULSE bits and the period \nof each pulse is adjustable using the GPLEN bits. Pulse \ntrain repetition (i.e. the circular flow of operation inside \nthe gesture state machine) can be delayed by setting a \nnon-zero value in the gesture wait time bits, GWTIME. The \ninclusion of a wait state reduces the both the power con -\nsumption and the data rate.\nThe intensity of the IR emission is selectable using the \nGLDRIVE control bits; corresponding to four, factory cali -\nbrated, current levels. If a higher intensity is required (E.g. \nlonger detection distance or device placement beneath \ndark glass) then the LEDBOOST bit can be used to boost \ncurrent up to an additional 300%.\nThe current consumption of the integrated IR LED is shown \nin Table 5. (Three examples at various LED drive settings)\nTable 5. Simplified Power Calculation\nCase 1 Case 2 Case 3\nILED (mA) 100 150 300\nGPULSE (no of pulses) 8 8 8\nGPLEN (us) 16 16 32\nGWTIME (No of wait state) 2 2 1\nTotal Current  (mA) 3.76 5.49 16.14Gesture results are affected by three fundamental factors: \nIR LED emission, IR reception, and environmental factors, \nincluding motion.\nDuring operation, the Gesture engine is entered when \nits enable bit, GEN, and the operating mode bit, GMODE, \nare both set. GMODE can be set/reset manually, via I²C, or \nbecomes set when proximity results, PDATA, is greater or \nequal to the gesture proximity entry threshold, GPENTH. \nExit of the gesture engine will not occur until GMODE is \nreset to zero. During normal operation, GMODE is reset \nwhen all 4-bytes of a gesture dataset fall below the exit \nthreshold, GEXTH, for GEXPERS times. This exit condi -\ntion is also influenced by the gesture exit mask, GEXMSK, \nwhich includes all non-masked datum (i.e. singular 1-byte \nU, D, L, R points). To prevent premature exit, a persistence \nfilter is also included; exit will only occur if a consecutive \nnumber of below-threshold results is greater or equal to \nthe persistence value, GEXPERS. Each dataset result that \nis above-threshold will reset the persistence count. False \nor incomplete gestures (engine entry and exit without \nGVALID transitioning high) will not generate a gesture in -\nterrupt, GINT, and FIFO data will automatically be purged.\nOnce in operating inside the gesture engine, the IR recep -\ntion signal path begins with IR detection at the photodi -\nodes and ends with the four, 8-bit gesture results corre -\nsponding to accumulated signal strength on each diode. \nSignal from the four photodiodes is amplified, and offset \nadjusted to optimize performance. Photodiodes are paired \nto form two signal paths: UP/DOWN and LEFT/RIGHT. Pho -\ntodiode pairs can be masked to exclude its results from the \ngesture FIFO data. For example, if only UP-DOWN motions \ndetection is required the gesture dimension control bits, \nGDIMS, may be set to 0x01. FIFO data will be zero for \nRIGHT/LEFT results and accumulation/ADC integration \ntime will be approximately halved. Gain is adjustable from \n17Figure 11. Directional OrientationAn interrupt is generated based on the number of gesture \n“datasets” results placed in the FIFO. A dataset is defined \nas 4-byte directional data corresponding to U-D-L-R.The \nFIFO can buffer up to 32 datasets before it overflows. If \nthe FIFO overflows (host did not read quickly enough) \nthen the most recent data will be lost. If the FIFO level, \nGFLVL, becomes greater or equal to the threshold value \nset by GFIFOTH, then the GVALID bit is set, indicating valid \ndata is available; the gesture interrupt bit, GINT, is assert -\ned, and if GIEN bit is set a hardware interrupt on the INT \npin will also assert. Before exit of gesture engine, one final \ninterrupt will always occur if GVALID is asserted, signaling \ndata remains in the FIFO. Gesture Interrupts flags: GINT, \nGVALID, and GFLVL are cleared by emptying FIFO (i.e., all \ndata has been read).The correlation of motion to FIFO data and direction char -\nacteristics) is not obvious at first glance. As depicted in \nFigure 12, the four directional sensors are placed in an \northogonal pattern optically lensed aperture. Diodes are \ndesignated as: U, D, L, R; the 8-bit results corresponding \nto each diode is available at the following sequential FIFO \nlocations: 0xFC, 0xFD, 0xFE, and 0xFF.\nIdeally, gesture detection works by capturing and compar -\ning the amplitude and phase difference between direc -\ntional sensor results. The directional sensors are arranged \nsuch that the diode opposite to the directional motion \nreceives a larger portion of the reflected IR signal upon \nentry, then a smaller portion upon exit. In the example il -\nlustration, a downward or rightward motion of a target is \nillustrated per the respective arrows in Figure 11.\nDirectional Orientation\nCounts\nTime\nUp 0xFC Down 0xFD Left 0xFE Right 0xFFCounts\nTime\nUp 0xFC Down 0xFD Left 0xFE Right 0xFF LEDU\nDL RIdeal response\nIdeal responseDownward\nmotion\nRightward\nmotion\n18Figure 13a. PS Output vs. Distance at LDRIVE = 100 mA, PPULSE = 8, PGAIN = \n4x, PPLEN = 8 ms, LED_BOOST = 100% with various objects. No glass in front \nof the moduleFigure 13b. PS Output vs. Distance at LDRIVE = 100 mA, PGAIN = 4x, PPLEN \n= 8 ms, LED_BOOST = 100% with various pulses. No glass in front of the \nmoduleOptical and Mechanical Design Consideration\nOptical Transmittance of Window Material\nWindows with an IR transmittance of at least 80% (mea -\nsured at 950 nm) are recommended for use with the \nAPDS-9960.  Note that for aesthetic reasons, the window’s \nmaterial could be tinted or coated with a dark ink. For \nexample, a 20% (measured at 550 nm) visible transmit -\ntance window with 80% IR transmittance can be used. \nSuch a coating would have transmittance spectral re -\nsponse with low transmittance within the visible range \nand a high transmittance in the infrared range. This low \nto high transmittance transition wavelength should be \nshorter than 650 nm to minimize crosstalk.\nExamples of recommended window material part \nnumbers are shown in Table 6.\nTable 6. Recommended Plastic Materials\nMaterial numberVisible light \ntransmission Refractive index\nMakrolon LQ2647 87% 1.587\nMakrolon LQ3147 87% 1.587\nMakrolon LQ3187 85% 1.587\nLexan OQ92S 88 - 90% -\nLexan OQ4120R 88 - 90% 1.586\nLexan OQ4320R 88 - 90% 1.586Crosstalk and Window Air Gap\nCrosstalk is PS or Gesture output caused by unwanted LED \nIR rays reflection without any object present. To control \ncrosstalk when operating the sensor in gesture mode, we \nrecommend that a rubber isolating barrier be fitted over \nthe sensor. A possible design is shown in Figure 12.\nThe rubber consists of two cylindrical openings, one for \nthe LED and the other for the Photodetector. The window \nthickness should not be more than 1 mm. When assem -\nbled the rubber barrier should form a good optical seal to \nthe bottom of the window. \nRecommended dimensions of the barrier are:\nAir GapPD Opening \nDiameterLED Opening \nDiameter\n1 mm 2 mm 1.5 mm\nResidual crosstalk of the Up, Down, Left and Right Gesture \noutput may be reduced by writing to the individual \nGOFFSET registers. Such calibration is necessary to ensure \ngood gesture sensing performance.\nFigure 12. Rubber Barrier\nPD Opening DiameterOptical\nBarrier Air Gap or Barrier Height\nLED Opening \nDiameterWindow \nThickness\n050100150200250300\n0 5 10 15PS Count\nDistance (cm)050100150200250300PS Count90% Kodak Card\n18% Kodak Card\nOpteka Black Card\n4 9 14 3 8 13 2 7 12 1 6 114P\n8P\n0 5 10 15\nDistance (cm)4 9 14 3 8 13 2 7 12 1 6 11\n19Register Set\nThe APDS-9960 is controlled and monitored by data registers and a command register accessed through the serial \ninterface. These registers provide for a variety of control functions and can be read to determine results of the ADC \nconversions. \nAddress Register Name Type Register Function Reset Value \n0x00 – \n0x7FRAM R/W RAM 0x00\n0x80 ENABLE R/W Enable states and interrupts 0x00\n0x81 ATIME R/W ADC integration time 0xFF\n0x83 WTIME R/W Wait time (non-gesture) 0xFF\n0x84 AILTL R/W ALS interrupt low threshold low byte --\n0x85 AILTH R/W ALS interrupt low threshold high byte --\n0x86 AIHTL R/W ALS interrupt high threshold low byte 0x00\n0x87 AIHTH R/W ALS interrupt high threshold high byte 0x00\n0x89 PILT R/W Proximity interrupt low threshold 0x00\n0x8B PIHT R/W Proximity interrupt high threshold 0x00\n0x8C PERS R/W Interrupt persistence filters (non-gesture) 0x00\n0x8D CONFIG1 R/W Configuration register one 0x60\n0x8E PPULSE R/W Proximity pulse count and length 0x40\n0x8F CONTROL R/W Gain control 0x00\n0x90 CONFIG2 R/W Configuration register two 0x01\n0x92 ID R Device ID ID\n0x93 STATUS R Device status 0x00\n0x94 CDATAL R Low byte of clear channel data 0x00\n0x95 CDATAH R High byte of clear channel data 0x00\n0x96 RDATAL R Low byte of red channel data 0x00\n0x97 RDATAH R High byte of red channel data 0x00\n0x98 GDATAL R Low byte of green channel data 0x00\n0x99 GDATAH R High byte of green channel data 0x00\n0x9A BDATAL R Low byte of blue channel data 0x00\n0x9B BDATAH R High byte of blue channel data 0x00\n0x9C PDATA R Proximity data 0x00\n0x9D POFFSET_UR R/W Proximity offset for UP and RIGHT photodiodes 0x00\n0x9E POFFSET_DL R/W Proximity offset for DOWN and LEFT photodiodes 0x00\n0x9F CONFIG3 R/W Configuration register three 0x00\n0xA0 GPENTH R/W Gesture proximity enter threshold 0x00\n0xA1 GEXTH R/W Gesture exit threshold 0x00\n0xA2 GCONF1 R/W Gesture configuration one 0x00\n0xA3 GCONF2 R/W Gesture configuration two 0x00\n0xA4 GOFFSET_U R/W Gesture UP offset register 0x00\n0xA5 GOFFSET_D R/W Gesture DOWN offset register 0x00\n0xA7 GOFFSET_L R/W Gesture LEFT offset register 0x00\n0xA9 GOFFSET_R R/W Gesture RIGHT offset register 0x00\n0xA6 GPULSE R/W Gesture pulse count and length 0x40\n0xAA GCONF3 R/W Gesture configuration three 0x00\n0xAB GCONF4 R/W Gesture configuration four 0x00\n0xAE GFLVL R Gesture FIFO level 0x00\n0xAF GSTATUS R Gesture status 0x00\n0xE4 (1) IFORCE W Force interrupt 0x00\n0xE5 (1) PICLEAR W Proximity interrupt clear 0x00\n0xE6 (1) CICLEAR W ALS clear channel interrupt clear 0x00\n0xE7 (1) AICLEAR W All non-gesture interrupts clear 0x00\n0xFC GFIFO_U R Gesture FIFO UP value 0x00\n0xFD GFIFO_D R Gesture FIFO DOWN value 0x00\n0xFE GFIFO_L R Gesture FIFO LEFT value 0x00\n0xFF GFIFO_R R Gesture FIFO RIGHT value 0x00\nNote\n1. Interrupt clear and force registers require a special I2C “address accessing” transaction. Please refer to the Register Description section for details.\n20Enable Register (0x80)\nThe ENABLE register is used to power the device on/off, enable functions and interrupts.\nField Bits Description\nReserved 7 Reserved. Write as 0.\nGEN 6 Gesture Enable.  When asserted, the gesture state machine can be activated.  \nActivation is subject to the states of PEN and GMODE bits.\nPIEN 5 Proximity Interrupt Enable. When asserted, it permits proximity interrupts to be generated, subject to the \npersistence filter settings.\nAIEN 4 ALS Interrupt Enable. When asserted, it permits ALS interrupts to be generated, subject to the persistence \nfilter settings.\nWEN 3 Wait Enable. This bit activates the wait feature. Writing a one activates the wait timer. Writing a zero \ndisables the wait timer.\nPEN 2 Proximity Detect Enable. This field activates the proximity detection. \nWriting a one activates the proximity. Writing a zero disables the proximity.\nAEN 1 ALS Enable. This field activates ALS function. Writing a one activates the ALS. Writing a zero disables the \nALS.\nPON 0 Power ON. This field activates the internal oscillator to permit the timers and ADC channels to operate. \nWriting a one activates the oscillator.  Writing a zero disables the oscillator and puts the device into a low \npower sleep mode. During reads and writes over the I2C interface, this bit is temporarily overridden and \nthe oscillator is enabled, independent of the state of PON.\nNote: Before enabling Gesture, Proximity, or ALS, all of the bits associated with control of the desired function must be set. Changing control register \nvalues while operating may result in invalid results.\nADC Integration Time Register (0x81) \nThe ATIME register controls the internal integration time of ALS/Color analog to digital converters. Upon power up, the \nADC integration time register is set to 0xFF.\nThe maximum count (or saturation) value can be calculated based upon the integration time and the size of the count \nregister (i.e. 16 bits). For ALS/Color, the maximum count will be the lesser of either:\n• 65535 (based on the 16 bit register size) or\n• The result of equation: CountMAX = 1025 x CYCLES \nField Bits Description\nATIME 7:0 FIELD VALUE CYCLES TIME MAX COUNT\n0 256 712 ms 65535\n182 72 200 ms 65535\n= 256 – TIME / 2.78 ms … … …\n219 37 103 ms 37889\n246 10 27.8 ms 10241\n255 1  2.78 ms 1025\nNote:  The ATIME register is only applicable to ALS/Color engine (16-bit data). The integration time for the 8-bit Proximity/Gesture engine, is a factor of \nfour less than the nominal time (2.78ms), resulting in a fixed time of 0.696ms.\n21ALS Interrupt Threshold Register (0x84 – 0x87)\nALS level detection uses data generated by the Clear Channel. The ALS Interrupt Threshold registers provide 16-bit \nvalues to be used as the high and low thresholds for comparison to the 16-bit CDATA values. If AIEN is enabled and \nCDATA is greater than AILTH/AIHTH or less than AILTL/AIHTL for the number of consecutive samples specified in APERS \nan interrupt is asserted on the interrupt pin.\nField Address Bits Description\nAILTL 0x84 7:0 This register provides the low byte of the low interrupt threshold.\nAILTH 0x85 7:0 This register provides the high byte of the low interrupt threshold.\nAIHTL 0x86 7:0 This register provides the low byte of the high interrupt threshold.\nAIHTH 0x87 7:0 This register provides the high byte of the high interrupt threshold.\nProximity Interrupt Threshold Register (0x89/0x8B)\nThe Proximity Interrupt Threshold Registers set the high and low trigger points for the comparison function which gen -\nerates an interrupt. If PDATA, the value generated by proximity channel, crosses below the lower threshold specified, or \nabove the higher threshold, an interrupt may be signaled to the host processor. Interrupt generation is subject to the \nvalue set in persistence (PERS).\nField Address Bits Description\nPILT 0x89 7:0 This register provides the low interrupt threshold.\nPIHT 0x8B 7:0 This register provides the high interrupt threshold. Wait Time Register (0x83)\nThe WTIME controls the amount of time in a low power mode between Proximity and/or ALS cycles. It is set 2.78ms \nincrements unless the WLONG bit is asserted in which case the wait times are 12× longer. WTIME is programmed as a 2’s \ncomplement number. Upon power up, the wait time register is set to 0xFF.\nField Bits Description\nWTIME 7:0 FIELD VALUE WAIT TIME TIME (WLONG = 0) TIME (WLONG = 1)\n0 256 712 ms 8.54 s\n= 256 – TIME / 2.78 ms … …\n171 85 236 ms 2.84 s\n255 1  2.78 ms 0.03 s\nNotes:\n1. The wait time register should be configured before AEN and/or PEN is asserted.\n2. During any Proximity and/or ALS cycle, the wait state, depicted in the functional block diagram, is entered. For example, Prox only, Prox and ALS, \nor ALS only cycles always enter the WAIT state and are separated by the time defined by WTIME.\n22Persistence Register (0x8C)\nThe Interrupt Persistence Register sets a value which is compared with the accumulated amount of ALS or Proximity \ncycles in which results were outside threshold values. Any Proximity or ALS result that is inside threshold values resets \nthe count.\nSeparate counters are provided for proximity and ALS persistence detection.\nField Bits Description\nPPERS 7:4 Proximity Interrupt Persistence. Controls rate of proximity interrupt to the host processor.\nFIELD VALUE INTERRUPT GENERATED WHEN…\n0 Every proximity cycle\n1 Any proximity value outside of threshold range\n2 2 consecutive proximity values out of range\n3 3 consecutive proximity values out of range\n… …\n15 15 consecutive proximity values out of range\nAPERS 3:0 ALS Interrupt Persistence. Controls rate of Clear channel interrupt to the host processor.\nFIELD VALUE INTERRUPT GENERATED WHEN…\n0 Every ALS cycle\n1 Any ALS value outside of threshold range\n2 2 consecutive ALS values out of range\n3 3 consecutive ALS values out of range\n4 5 …\n5 10 …\n6 15 …\n7 20 …\n8 25 …\n9 30 …\n10 35 …\n11 40 …\n12 45 …\n13 50 …\n14 55 …\n15 60 consecutive ALS values out of range\n23Configuration Register One (0x8D)\nThe CONFIG1 register sets the wait long time. The register is set to 0x40 at power up.\nField Bits Description\nReserved 7 Reserved. Write as 0.\nReserved 6 Reserved. Write as 1.\nReserved 5 Reserved. Write as 1.\nReserved 4 Reserved. Write as 0.\nReserved 3 Reserved. Write as 0.\nReserved 2 Reserved. Write as 0.\nWLONG 1 Wait Long. When asserted, the wait cycle is increased by a factor 12x from that programmed in \nthe WTIME register.\nReserved 0 Reserved. Write as 0.\nNotes:\n1. Bit 6 is reserved, and is automatically set to 1 at POR.\n2. Bit 5 is reserved, and is automatically set to 1 at POR. If this bit is not set, power consumption will increase during wait states.\nProximity Pulse Count Register (0x8E)\nThe Proximity Pulse Count Register sets Pulse Width Modified current during a Proximity Pulse. The proximity pulse \ncount register bits set the number of pulses to be output on the LDR pin. The Proximity Length register bits set the \namount of time the LDR pin is sinking current during a proximity pulse.\nField Bits Description\nPPLEN 7:6 Proximity Pulse Length. Sets the LED-ON pulse width during a proximity LDR pulse.\nFIELD VALUE PULSE LENGTH\n0 4 µs\n1 8 µs (default)\n2 16 µs\n3 32 µs\nPPULSE 5:0 Proximity Pulse Count. Specifies the number of proximity pulses to be generated on LDR. \nNumber of pulses is set by PPULSE value plus 1.\nFIELD VALUE NUMBER OF PULSES\n0 1\n1 2\n2 3\n… …\n63 64\nNotes:\n1. The time described by PPLEN is the actual signal integration time. The LED will be activated slightly longer (typically 1.36 μs) than the integration \ntime.\n2. The Proximity Pulse Count Register resets to 0x40\n24Control Register One (0x8F)\nField Bits Description\nLDRIVE 7:6 LED Drive Strength. \nFIELD VALUE LED CURRENT\n0 100 mA\n1 50 mA\n2 25 mA\n3 12.5 mA\nReserved 5 Reserved. Write as 0.\nReserved 4 Reserved. Write as 0.\nPGAIN 3:2 Proximity Gain Control. \nFIELD VALUE GAIN VALUE\n0 1x\n1 2x\n2 4x\n3 8x\nAGAIN 1:0 ALS and Color Gain Control.\nFIELD VALUE GAIN VALUE\n0 1x\n1 4x\n2 16x\n3 64x\nConfiguration Register Two (0x90)\nThe Configuration Register Two independently enables or disables the saturation interrupts for Proximity and Clear \nchannel. Saturation Interrupts are cleared by accessing the Clear Interrupt registers at 0xE5, 0xE6 and 0xE7. The LED_\nBOOST bits allow the LDR pin to sink more current above the maximum setting by LDRIVE and GLDRIVE.\nField Bits Description\nPSIEN 7 Proximity Saturation Interrupt Enable.\n0 = Proximity saturation interrupt disabled\n1 = Proximity saturation interrupt enabled\nCPSIEN 6 Clear Photodiode Saturation Interrupt Enable.\n0 = ALS Saturation Interrupt disabled\n1 = ALS Saturation Interrupt enabled\nLED_BOOST 5:4 Additional LDR current during proximity and gesture LED pulses. Current value, set by LDRIVE, \nis increased by the percentage of LED_BOOST.\nFIELD VALUE LED BOOST CURRENT\n0 100%\n1 150%\n2 200%\n3 300%\nRESERVED 3:1 Reserved. Write as 0.\nRESERVED 0 Reserved. Write as 1. Set high by default during POR.\nNote: A LED_BOOST value of 0 results in 100% of the current as set by LDRIVE (no additional current).\n25ID Register (0x92)\nThe read-only ID Register provides the device identification.\nField Bits Description\nID 7:0 Part number identification.\n0xAB = APDS-9960\nStatus Register (0x93)\nThe read-only Status Register provides the status of the device. The register is set to 0x04 at power-up.\nField Bits Description\nCPSAT 7 Clear Photodiode Saturation. When asserted, the analog sensor was at the upper end of its \ndynamic range. The bit can be de-asserted by sending a Clear channel interrupt command \n(0xE6 CICLEAR) or by disabling the ADC (AEN=0). This bit triggers an interrupt if CPSIEN is set.\nPGSAT 6 Indicates that an analog saturation event occurred during a previous proximity or gesture \ncycle. Once set, this bit remains set until cleared by clear proximity interrupt special function \ncommand (0xE5 PICLEAR) or by disabling Prox (PEN=0). This bit triggers an interrupt if PSIEN\nis set.\nPINT 5 Proximity Interrupt. This bit triggers an interrupt if PIEN in ENABLE is set.\nAINT 4 ALS Interrupt. This bit triggers an interrupt if AIEN in ENABLE is set.\nRESERVED 3 Do not care.\nGINT 2 Gesture Interrupt. GINT is asserted when GFVLV becomes greater than GFIFOTH or if GVALID \nhas become asserted when GMODE transitioned to zero. The bit is reset when FIFO is \ncompletely emptied (read).\nPVALID 1 Proximity Valid. Indicates that a proximity cycle has completed since PEN was asserted or since \nPDATA was last read. A read of PDATA automatically clears PVALID.\nAVALID 0 ALS Valid. Indicates that an ALS cycle has completed since AEN was asserted or since a read \nfrom any of the ALS/Color data registers.\nRGBC Data Register (0x94 – 0x9B)\nRed, green, blue, and clear data is stored as 16-bit values. The read sequence must read byte pairs (low followed by high) \nstarting on an even address boundary (0x94, 0x96, 0x98, or 0x9A) inside the RGBC Data Register block. When the lower \nbyte register is read, the upper eight bits are stored into a shadow register, which is read by a subsequent read to the \nupper byte. The upper register will read the correct value even if additional ADC integration cycles end between the \nreading of the lower and upper registers. \nField Address Bits Description\nCDATAL 0x94 7:0 Low Byte of clear channel data.\nCDATAH 0x95 7:0 High Byte of clear channel data.\nRDATAL 0x96 7:0 Low Byte of red channel data.\nRDATAH 0x97 7:0 High Byte of red channel data.\nGDATAL 0x98 7:0 Low Byte of green channel data.\nGDATAH 0x99 7:0 High Byte of green channel data.\nBDATAL 0x9A 7:0 Low Byte of blue channel data.\nBDATAH 0x9B 7:0 High Byte of blue channel data.\nNote: When reading register contents, a read of the lower byte data automatically latches the corresponding higher byte data (16 bit latch). This \nfeature guarantees that the high byte value has not been updated by the ADC between I2C reads. In addition, reading CDATAL register not only latches \nCDATAH but also latches all eight RGBC register simultaneously (64 bit latch).\n26Proximity Data Register (0x9C)\nProximity data is stored as an 8-bit value.\nField Address Bits Description\nPDATA 0x9C 7:0 Proximity data.\nProximity Offset UP / RIGHT Register (0x9D)\nIn proximity mode, the UP and RIGHT photodiodes are connected forming a diode pair. The POFFSET_UR is an 8-bit value \nused to scale an internal offset correction factor to compensate for crosstalk in the application. This value is encoded in \nsign/magnitude format.\nField Bits Description\nPOFFSET_UR 7:0 FIELD VALUE Offset Correction Factor\n01111111 127\n… …\n00000001 1\n00000000 0\n10000001 -1\n… …\n11111111 -127\nProximity Offset DOWN / LEFT Register (0x9E)\nIn Proximity mode, the DOWN and LEFT photodiodes are connected forming a diode pair. The POFFSET_DL is an 8-bit \nvalue used to scale an internal offset correction factor to compensate for crosstalk in the application. This value is \nencoded in sign/magnitude format.\nField Bits Description\nPOFFSET_DL 7:0 FIELD VALUE Offset Correction Factor\n01111111 127\n… …\n00000001 1\n00000000 0\n10000001 -1\n… …\n11111111 -127\n27Configuration Three Register (0x9F)\nThe CONFIG3 register is used to select which photodiodes are used for proximity. Two photodiodes are paired to provide \nsignal. In proximity mode, UP and RIGHT photodiodes are connected forming a diode pair; similarly the DOWN and LEFT \nphotodiodes form a diode pair.\nField Bits Description\nRESERVED 7:6 Reserved. Write as 0.\nPCMP 5 Proximity Gain Compensation Enable. This bit provides gain compensation when proximity \nphotodiode signal is reduced as a result of sensor masking. If only one diode of the diode pair \nis contributing, then only half of the signal is available at the ADC; this results in a maximum \nADC value of 127. Enabling PCMP enables an additional gain of 2X, resulting in a maximum \nADC value of 255.\nPMASK_X (U, D, L, R) PCMP\n0, 1, 1, 1 1\n1, 0, 1, 1 1\n1, 1, 0, 1 1\n1, 1, 1, 0 1\n0, 1, 0, 1 1\n1, 0, 1, 0 1\nAll Others 0\nSAI 4 Sleep After Interrupt. When enabled, the device will automatically enter low power mode \nwhen the INT pin is asserted and the state machine has progressed to the SAI decision block. \nNormal operation is resumed when INT pin is cleared over I2C.\nPMASK_U 3 Proximity Mask UP Enable. Writing a 1 disables this photodiode.\nPMASK_D 2 Proximity Mask DOWN Enable. Writing a 1 disables this photodiode.\nPMASK_L 1 Proximity Mask LEFT Enable. Writing a 1 disables this photodiode.\nPMASK_R 0 Proximity Mask RIGHT Enable. Writing a 1 disables this photodiode.\nGesture Proximity Enter Threshold Register (0xA0)\nThe Gesture Proximity Enter Threshold Register value is compared with Proximity value, PDATA, to determine if the \ngesture state machine is entered. The proximity persistence filter, PPERS, is not used to determine gesture state machine \nentry.\nField Bits Description\nGPENTH 7:0 Gesture Proximity Entry Threshold. This register sets the Proximity threshold value used to \ndetermine a “gesture start” and subsequent entry into the gesture state machine.\nNote: Bit 4 must be set to 0.\n28Gesture Exit Threshold Register (0xA1)\nThe Gesture Proximity Exit Threshold Register value compares all non-masked gesture detection photodiodes (UDLR). \nGesture state machine exit is also governed by the value in the Gesture Exit Persistence register, GEPERS.\nField Bits Description\nGEXTH 7:0 Gesture Exit Threshold. This register sets the threshold value used to determine a “gesture end” \nand subsequent exit of the gesture state machine. Setting GTHR_OUT to 0x00 will prevent \ngesture exit until GMODE is set to 0.\nGesture Configuration One Register (0xA2)\nThe Gesture Configuration One Register contains settings that govern gesture detector masking, FIFO interrupt genera -\ntion and gesture exit persistence filter.\nField Bits Description\nGFIFOTH 7:6 Gesture FIFO Threshold. This value is compared with the FIFO Level (i.e. the number of UDLR \ndatasets) to generate an interrupt (if enabled).\nFIELD VALUE THRESHOLD\n0 Interrupt is generated after 1 dataset is added to FIFO\n1 Interrupt is generated after 4 datasets are added to FIFO\n2 Interrupt is generated after 8 datasets are added to FIFO\n3 Interrupt is generated after 16 datasets are added to FIFO\nGEXMSK 5:2 Gesture Exit Mask. Controls which of the gesture detector photodiodes (UDLR) will be included \nto determine a “gesture end” and subsequent exit of the gesture state machine. Unmasked \nUDLR data will be compared with the value in GTHR_OUT. Field value bits correspond to UDLR \ndetectors.\nFIELD VALUE EXIT MASK\n0000 All UDLR detector data will be included in sum\n0001 R detector data will not be included in sum\n0010 L detector data will not be included in sum\n0100 D detector data will not be included in sum\n1000 U detector data will not be included in sum\n0101 …\n0110 L and D detector data will not be included in sum\n1111 All UDLR detector data will not be included in sum\nGEXPERS 1:0 Gesture Exit Persistence. When a number of consecutive “gesture end” occurrences become \nequal or greater to the GEPERS value, the Gesture state machine is exited.\nFIELD VALUE PERSISTENCE\n0 1st 'gesture end' occurrence results in gesture state machine exit.\n1 2nd 'gesture end' occurrence results in gesture state machine exit.\n2 4th 'gesture end' occurrence results in gesture state machine exit.\n3 7th 'gesture end' occurrence results in gesture state machine exit.\n29Gesture Configuration Two Register (0xA3)\nThe Gesture Configuration Two register contains settings that govern wait time, LDR drive current strength and Gesture \ngain control. The GWTIME controls the amount of time in a low power mode between gesture detection cycles. GPDRIVE \nsets the LDR drive current strength governing LED intensity. GGAIN sets the analog gain associated with the photodiode \noutput.\nField Bits Description\nRESERVED 7 Reserved. Write as 0.\nGGAIN  6:5 Gesture Gain Control. Sets the gain of the proximity receiver in gesture mode.\nFIELD VALUE GAIN VALUE\n0 1x\n1 2x\n2 4x\n3 8x\nGLDRIVE 4:3 Gesture LED Drive Strength. Sets LED Drive Strength in gesture mode.\nFIELD VALUE LED CURRENT\n0 100 mA\n1 50 mA\n2 25 mA\n3 12.5 mA\nGWTIME 2:0 Gesture Wait Time. The GWTIME controls the amount of time in a low power mode between \ngesture detection cycles.\nFIELD VALUE WAIT TIME\n0 0 ms\n1 2.8 ms\n2 5.6 ms\n3 8.4 ms\n4 14.0 ms\n5 22.4 ms\n6 30.8 ms\n7 39.2 ms\nNotes:\n1. The wait time register should be configured before GEN is asserted.\n2. The time described by GTIME is the actual signal integration time. The LED will be activated slightly longer (typically 1.33 µs) than the integration \ntime.\n30Gesture UP Offset Register (0xA4)\nThe GOFFSET_U is an 8-bit value used to scale an internal offset correction factor to compensate for crosstalk in the ap -\nplication. This value is encoded in sign/magnitude format.\nField Bits Description\nGOFFSET_U 7:0 FIELD VALUE Offset Correction Factor\n01111111 127\n… …\n00000001 1\n00000000 0\n10000001 -1\n… …\n11111111 -127\nGesture DOWN Offset Register (0xA5)\nThe GOFFSET_D is an 8-bit value used to scale an internal offset correction factor to compensate for crosstalk in the ap -\nplication. This value is encoded in sign/magnitude format.\nField Bits Description\nGOFFSET_D 7:0 FIELD VALUE Offset Correction Factor\n01111111 127\n… …\n00000001 1\n00000000 0\n10000001 -1\n… …\n11111111 -127\nGesture LEFT Offset Register (0xA7)\nThe GOFFSET_L is an 8-bit value used to scale an internal offset correction factor to compensate for crosstalk in the ap -\nplication. This value is encoded in sign/magnitude format.\nField Bits Description\nGOFFSET_L 7:0 FIELD VALUE Offset Correction Factor\n01111111 127\n… …\n00000001 1\n00000000 0\n10000001 -1\n… …\n11111111 -127\n31Gesture RIGHT Offset Register (0xA9)\nThe GOFFSET_R is an 8-bit value used to scale an internal offset correction factor to compensate for crosstalk in the ap -\nplication. This value is encoded in sign/magnitude format.\nField Bits Description\nGOFFSET_L 7:0 FIELD VALUE Offset Correction Factor\n01111111 127\n… …\n00000001 1\n00000000 0\n10000001 -1\n… …\n11111111 -127\nGesture Pulse Count and Length Register (0xA6)\nThe Gesture Pulse Count Register sets Pulse Width Modified current during a Gesture Pulse. The Gesture pulse count \nregister bits set the number of pulses to be output on the LDR pin. The Gesture Length register bits set the amount of \ntime the LDR pin is sinking current during a gesture pulse.\nField Bits Description\nGPLEN 7:6 Gesture Pulse Length. Sets the LED_ON pulse width during a Gesture LDR Pulse. \nFIELD VALUE PULSE LENGTH\n0 4 μs\n1 8 μs (default)\n2 16 μs\n3 32 μs\nGPULSE 5:0 Number of Gesture Pulses. Specifies the number of pulses to be generated on LDR.\nNumber of pulses is set by GPULSE value plus 1.\nFIELD VALUE Number OF PULSES\n0 1\n1 2\n2 3\n… …\n63 64\nNote:\n1. The Gesture Pulse Count Register resets to 0x40 at initial power up (POR).\n32Gesture Configuration Three Register (0xAA)\nThe Gesture Configuration Three Register contains settings that govern which gesture photodiode pair: UP-DOWN and/\nor RIGHT-LEFT will be enabled (have valid data in FIFO) while the gesture state machine is collecting directional data. \nNormal mode enables all four gesture photodiodes and places data into FIFO as expected. Disabling a photodiode pair, \nessentially allows the enabled pair to collect data twice as fast. Data stored in the FIFO for a disabled pair is not valid. \nThis feature is useful to improve reliability and accuracy of gesture detection when only one-dimensional gestures are \nexpected.\nField Bits Description\nRESERVED 7:2 Reserved. Write as 0.\nGDIMS 1:0 Gesture Dimension Select. Selects which gesture photodiode pairs are enabled to gather \nresults during gesture.\nFIELD VALUE GESTURE DIRECTION\n0 Both pairs are active. UP-DOWN and LEFT-RIGHT FIFO data is valid.\n1 Only the UP-DOWN pair is active. Ignore LEFT-RIGHT data in FIFO.\n2 Only the LEFT-RIGHT pair is active. Ignore UP-DOWN data in FIFO.\n3 Both pairs are active. UP-DOWN and LEFT-RIGHT FIFO data is valid.\nGesture Configuration Four Register (0xAB)\nThe Gesture Configuration Four Register contains settings that govern Gesture interrupts and interrupt  clearing/reset \nas well as operation mode control and status.\nField Bits Description\nRESERVED 7:3 Reserved. Write as 0.\nGFIFO_CLR 2 Setting this bit to '1' clears GFIFO, GINT, GVALID, GFIFO_OV and GFIFO_LVL.\nGIEN 1 Gesture interrupt enable. Gesture Interrupt Enable. When asserted, all gesture related \ninterrupts are unmasked.\nGMODE 0 Gesture Mode. Reading this bit reports if the gesture state machine is actively running, 1 \n= Gesture, 0= ALS, Proximity, Color. Writing a 1 to this bit causes immediate entry in to the \ngesture state machine (as if GPENTH had been exceeded). Writing a 0 to this bit causes exit of \ngesture when current analog conversion has finished (as if GEXTH had been exceeded).\nGesture FIFO Level Register (0xAE)\nThe GFLVL Register indicates the number of datasets that are currently available in the FIFO for read. Reading a complete \nFIFO dataset (from address 0xFC to 0xFF) constitutes the reduction of the GPENTH register by one.\nField Bits Description\nGFLVL 7:0 Gesture FIFO Level. This register indicates how many four byte data points - UDLR are ready for \nread over I2C. One four-byte dataset is equivalent to a single count in GFLVL.\n33Gesture Status Register (0xAF)\nThe GSTATUS Register indicates the operational condition of the gesture state machine.\nField Bits Description\nRESERVED 7:2 Do not care.\nGFOV 1 Gesture FIFO Overflow. A setting of 1 indicates that the FIFO has filled to capacity and that new \ngesture detector data has been lost.\nGVALID 0 Gesture FIFO Data. GVALID bit is sent when GFLVL becomes greater than GFIFOTH (i.e. FIFO \nhas enough data to set GINT). GFIFOD is reset when GMODE = 0 and the GFLVL=0 (i.e., All FIFO \ndata has been read).\nNote: If GINT (irrespective of GVALID) remains set after the FIFO has been read GFLVL times, this indicates that new data has been added to FIFO during \nthe last FIFO read.\nClear Interrupt Registers (0xE4 – 0xE7)\nInterrupts are cleared by “address accessing” the appropriate register. This is special I2C transaction consisting of only \ntwo bytes: chip address with R/W = 0, followed by a register address.\nRegisters Address Bits Description\nIFORCE 0xE4 7:0 Forces an interrupt (any value)\nPICLEAR 0xE5 7:0 Proximity interrupt clear (any value)\nCICLEAR 0xE6 7:0 ALS interrupt clear (any value)\nAICLEAR 0xE7 7:0 Clears all non-gesture interrupts (any value)\nGesture FIFO Register (0xFC – 0xFF)\nIn Gesture mode, the RAM area is repurposed as a 32 x 4 byte FIFO. Data is stored in four byte blocks. Each block, called a \ndataset, contains one integration cycle of UP , DOWN, LEFT, & RIGHT gesture data. Thirty-two separate datasets are stored \nwithin the FIFO before wrap-around overflow. If the FIFO overflows (i.e., 33 datasets before host/system can empty FIFO) \nnew datasets will not replace existing datasets; instead an overflow flag will be set and new data will be lost. \nHost/Systems acquire gesture data by reading addresses: 0xFC, 0xFD, 0xFE, & 0xFF, which directly correspond to UP , \nDOWN, LEFT, & RIGHT data points. Data can be read a single byte at a time (four consecutive I2C transactions) or by using \na page read.\nThe internal FIFO read pointer and the FIFO Level register, GFLVL, values are updated when address 0xFF is accessed \n(single byte transactions) or when every fourth byte, corresponding to address 0xFF, is accessed in in page mode. If the \nFIFO continues to be accessed after GFLVL register is zero, dataset will be read as zero values.\nThe recommended procedure for reading data stored in the FIFO begins when a gesture interrupt is generated (GFLVL > \nGFIFOTH). Next, the host reads the FIFO Level register, GFLVL, to determine the amount of valid data in the FIFO.\nFinally, the host begins to read address 0xFC (page read), and continues to read (clock-out data) until the FIFO is empty \n(Number of bytes is 4X GFLVL). For example, if GFLVL = 2, then the host should initiate a read at address 0xFC, and se -\nquentially read all eight bytes. As the four-byte blocks are read, GFLVL register is decremented and the internal FIFO \npointers are updated.\nField Address Bits Description\nGFIFO_U 0xFC 7:0 Gesture FIFO UP value.\nGFIFO_D 0xFD 7:0 Gesture FIFO DOWN value.\nGFIFO_L 0xFE 7:0 Gesture FIFO LEFT value.\nGFIFO_R 0xFF 7:0 Gesture FIFO RIGHT value.\n34APDS-9960 INT\nSDASCLVDD\nLEDA1  µFVoltage\nRegulator\nVoltage\nRegulator\n ≥ 10 µF\n* Cap Value Per Regulator Manufacturer RecommendationGNDVBUS\nRP RP RPIC*\n1  µFLDRLEDK\n1  µFVoltage\nRegulator\n ≥ 10 µF\n1  µF22 Ω\nAPDS-9960 INT\nSDASCLVDD\nLEDAGNDVBUS\nRP RP RPILDRLEDKApplication Information Hardware\nFigure 14a. Circuit Implementation using Separate Power Supplies\nFigure 14b. Circuit Implementation using Single Power SupplyIf operating from a single supply, use a 22 Ω resistor in \nseries with the VDD supply line and a 1 µF low ESR capaci -\ntor to filter any power supply noise. The previous capaci -\ntor placement considerations apply. However note that \nwhere LED current is boosted beyond 100 mA, it is rec -\nommended that the LEDA pin be connected to a separate \npower supply. \nVBUS in the figures refers to the I²C-bus voltage.  The I²C \n-bus signals and the Interrupt are open-drain outputs and \nrequire pull−up resistors. The pull-up resistor (R P) value is \na function of the I²C-bus speed, the I²C-bus voltage, and \nthe capacitive load. A 10-k Ω pull-up resistor (R PI) can be \nused for the interrupt line.In a proximity sensing system, the internal IR LED can \nbe pulsed by more than 100 mA of rapidly switching \ncurrent, therefore, a few design considerations must be \nkept in mind to get the best performance. The key goal is \nto reduce the power supply noise coupled back into the \ndevice during the LED pulses. \nIn many systems, there is a quiet analog supply and a noisy \ndigital supply. By connecting the quiet supply to the VDD \npin and the noisy supply to the LED, the key goal can be \nmeet. Place a 1 µF low-ESR decoupling capacitor as close \nas possible to the VDD pin and another at the LEDA pin, \nalong with a bulk storage capacitor (≥ 10 µF) at the output \nof the LED voltage regulator to supply the current surge.\n35Package Outline Dimensions\nPCB Pad Layout\nSuggested PCB pad layout guidelines for the Dual Flat No-Lead surface mount package are shown as follows: \n0.60 0.60 0.72 (×8)0.25 (×6)0.80\nNote:   All linear dimensions are in mm.1\n2\n3\n481\n2\n3\n4 5678\nPINOUT\n1 - SDA2 - INT3 - LDR4 - LEDK5 - LEDA6 - GND7 - SCL8 - VDD0.54±0.05 1.18±0.05∅ 0.90±0.05∅ 1.10±0.05\n2.70±0.05\n(1.15)\nIR EMITTERRECEIVER\n2.36±0.20\n2.10±0.101.35 ±0.103.94±0.20 3.73±0.100.60±0.08\n(×8)\n0.05 (0.80)\n0.60±0.08\n(×8)0.05(0.41)\n(×6)\n567\n36Tape Dimensions\nK0\nA0B012+0.30\n-0.104 ±0.10\nØ 1.50 ±0.10\n1.75 ±0.10\n2 ±0.05\n8 ±0.10\n5.50 ±0.05\nØ 1 ±0.05Unit OrientationA A\n4.30 ±0.100.29 ±0.02\n1.70 ±0.106° Max\n2.70 ±0.10 8° Max\nNote:   All linear dimensions are in mm.\nReel Dimensions\n\n37Moisture Proof Packaging\nAll APDS-9960 options are shipped in moisture proof package. Once opened, moisture absorption begins.  This part is \ncompliant to JEDEC MSL 3. \nUnits in A Sealed\nMositure-Proof\nPackage \nPackage Is\nOpened (Unsealed) \nEnvironment\nless than 30 deg C, and\nless than 60% RH? \nPackage Is\nOpened less\nthan 168 hours? \nPerform Recommended\nBaking ConditionsNo Baking\nIs Necessary \nNoYes\nNoYes\nRecommended Storage Conditions\nStorage Temperature 10 °C to 30 °C\nRelative Humidity below 60% RH\nTime from unsealing to soldering\nAfter removal from the bag, the parts should be soldered \nwithin 168 hours if stored at the recommended storage \nconditions. If times longer than 168 hours are needed, the \nparts must be stored in a dry box.Baking Conditions\nPackage Temperature Time\nIn Reel 60 °C 48 hours\nIn Bulk 100 °C 4 hours\nIf the parts are not stored in dry conditions, they must be \nbaked before reflow to prevent damage to the parts.\nBaking should only be done once.\nFor product information and a complete list of distributors, please go to our web site:         www.avagotech.com\nAvago Technologies, and the A logo are trademarks of Avago Technologies in the United States and other countries.\nData subject to change.  Copyright © 2005-2015 Avago Technologies. All rights reserved.  \nAV02-4191EN  -  November 13, 2015The reflow profile is a straight-line representation of \na nominal temperature profile for a convective reflow \nsolder process. The temperature profile is divided into \nfour process zones, each with different ∆T/∆time tem -\nperature change rates or duration. The ∆T/∆time rates or \nduration are detailed in the above table. The temperatures \nare measured at the component to printed circuit board \nconnections.\nIn process zone P1, the PC board and component pins \nare heated to a temperature of 150 °C to activate the flux \nin the solder paste. The temperature ramp up rate, R1, is \nlimited to 3 °C per second to allow for even heating of \nboth the PC board and component pins.\nProcess zone P2 should be of sufficient time duration (100 \nto 180 seconds) to dry the solder paste. The temperature is \nraised to a level just below the liquidus point of the solder. \nProcess zone P3 is the solder reflow zone. In zone P3, the \ntemperature is quickly raised above the liquidus point of Recommended Reflow Profile\nProcess Zone Symbol ∆TMaximum ∆T/∆time  \nor Duration\nHeat Up P1, R1 25 °C to 150 °C 3 °C/s\nSolder Paste Dry P2, R2 150 °C to 200 °C 100 s to 180 s\nSolder ReflowP3, R3\nP3, R4200 °C to 260 °C\n260 °C to 200 °C3 °C/s\n-6 °C/s\nCool Down P4, R5 200 °C to 25 °C -6 °C/s\nTime maintained above liquidus point , 217 °C > 217 °C 60 s to 120 s\nPeak Temperature 260 °C –\nTime within 5 °C of actual Peak Temperature > 255 °C 20 s to 40 s\nTime 25 °C to Peak Temperature 25 °C to 260 °C 8 mins\nsolder to 260 °C (500 °F) for optimum results. The dwell \ntime above the liquidus point of solder should be between \n60 and 120 seconds. This is to assure proper coalescing \nof the solder paste into liquid solder and the formation \nof good solder connections. Beyond the recommended \ndwell time the intermetallic growth within the solder con -\nnections becomes excessive, resulting in the formation of \nweak and unreliable connections. The temperature is then \nrapidly reduced to a point below the solidus temperature \nof the solder to allow the solder within the connections to \nfreeze solid. \nProcess zone P4 is the cool down after solder freeze. The \ncool down rate, R5, from the liquidus point of the solder to \n25 °C (77 °F) should not exceed 6 °C per second maximum. \nThis limitation is necessary to allow the PC board and \ncomponent pins to change dimensions evenly, putting \nminimal stresses on the component.\nIt is recommended to perform reflow soldering no more \nthan twice.50 100 150 200 250 300\nt-TIME\n(SECONDS)2580120150180200230255\n0TEMPERATURE (°C)R1R2R3 R4\nR5217MAX 260° C \nP1\nHEAT UPP2\nSOLDER PASTE DRYP3\nSOLDER\nREFLOWP4\nCOOL \nDOWN60 sec to 120 sec\nAbove 217° C\nMouser Electronics\n  \nAuthorized Distributor\n \n  \nClick to View Pricing, Inventory, Delivery & Lifecycle Information:\n \n \n \n Broadcom Limited:   \n\xa0 APDS-9960\n"}]
!==============================================================================!
### Component Summary: APDS-9960

**Description:**
The APDS-9960 is a digital sensor from Broadcom Limited that integrates multiple functionalities including proximity detection, ambient light sensing (ALS), RGB color sensing, and gesture detection. It is designed in a compact package (3.94 mm x 2.36 mm x 1.35 mm) and features an integrated IR LED for gesture detection. The device is suitable for applications requiring touchless control and environmental light sensing.

**Key Specifications:**

- **Voltage Ratings:**
  - Operating Supply Voltage (VDD): 2.4V to 3.6V
  - Absolute Maximum Supply Voltage: 3.8V

- **Current Ratings:**
  - Supply Current (IDD): 200 µA (typical in active ALS state), up to 790 µA in proximity and gesture modes.
  - LED Drive Current: Configurable (up to 100 mA).

- **Power Consumption:**
  - Active state: 200-790 µA depending on the mode.
  - Sleep state: 1.0 to 10.0 µA.

- **Operating Temperature Range:**
  - Ambient Temperature (TA): -30°C to 85°C
  - Storage Temperature (Tstg): -40°C to 85°C

- **Package Type:**
  - LQFN (Leadless Quad Flat No-lead) package, dimensions: 3.94 mm x 2.36 mm x 1.35 mm.

- **Special Features:**
  - Gesture detection with four directional photodiodes.
  - Integrated IR LED for proximity and gesture sensing.
  - I2C-bus fast mode compatible interface (up to 400 kHz).
  - Programmable gain and integration time for ALS and RGB sensing.
  - Ambient light and RGB color sensing with UV and IR blocking filters.
  - FIFO storage for gesture data (32 datasets).
  - Interrupt-driven operation for efficient power management.

- **Moisture Sensitive Level:**
  - MSL 3 (Moisture Sensitivity Level according to JEDEC J-STD-020E).

**Typical Applications:**
- Gesture detection for touchless user interfaces in mobile devices and consumer electronics.
- Ambient light sensing for automatic brightness adjustment in displays.
- Color sensing for applications requiring color temperature calculation and display backlight control.
- Proximity sensing for applications such as cell phone touch screen disable when near the user's ear.
- Mechanical switch replacement in various electronic devices.

The APDS-9960 is a versatile sensor that combines multiple sensing capabilities into a single compact module, making it ideal for modern electronic applications that require user interaction without physical contact.