[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of NCN5121MNTWG production of ON SEMICONDUCTOR from the text:© Semiconductor Components Industries, LLC, 2015\nAugust, 2019 − Rev. 21 Publication Order Number:\nNCN5121/DNCN5121\nTransceiver for KNX\nTwisted Pair Networks\nIntroduction\nNCN5121 is a receiver −transmitter IC suitable for use in KNX\ntwisted pair networks (KNX TP1 −256). It supports the connection of\nactuators, sensors, microcontrollers, switches or other applications ina building network.\nNCN5121 handles the transmission and reception of data on the bus.\nIt generates from the unregulated bus voltage stabilized voltages for its\nown power needs as well as to power external devices, for example, amicrocontroller.\nNCN5121 assures safe coupling to and decoupling from the bus.\nBus monitoring warns the external microcontroller in case of loss of\npower so that critical data can be stored in time.\nKey Features\n•9600 baud KNX Communication Speed\n•Supervision of KNX Bus V oltage and Current\n•Supports Bus Current Consumption up to 24 mA\n•High Efficient DC −DC Converters\n♦3.3 V Fixed\n♦1.2 V to 21 V Selectable\n•Control and Monitoring of Power Regulators\n•Linear 20 V Regulator\n•Buffering of Sent Data Frames (Extended Frames Supported)\n•Selectable UART or SPI Interface to Host Controller\n•Selectable UART and SPI baud Rate to Host Controller\n•Optional CRC on UART to the Host\n•Optional Received Frame −end with MARKER Service\n•Optional Direct Analog Signaling to Host\n•Operates with Industry Standard Low Cost 16 MHz Quartz\n•Generates Clock of 8 or 16 MHz for External Devices\n•Auto Acknowledge (optional)\n•Auto Polling (optional)\n•Temperature Monitoring\n•Extended Operating Temperature Range −40°C to +105 °C\n•These Devices are Pb −Free and are RoHS Compliant\nwww. onsemi.com\nQFN40\nMN SUFFIX\nCASE 485AU\nSee detailed ordering and shipping information in the package\ndimensions section on page 57 of this data sheet.ORDERING INFORMATIONA = Assembly Location\nWL = Wafer Lot\nYY = YearWW = Work WeekG = Pb −Free PackageMARKING DIAGRAM401\nNCN5121\n21420−005\nAWLYYWWG\n\nNCN5121\nwww. onsemi.com\n2BLOCK DIAGRAM\nFigure 1. Block Diagram NCN5121POR\nTW\nTSDUVDDC/DC\nConverter 1\nDC/DC\nConverter 2NCN5121CAV\nVBUS1\nCCP\nTXO\nFANINVBUS2\nV20V\nXTAL1\nXTAL2\nXSEL\nXCLK\nSAVEB RESETB ANAOUTVSS2VDD2VDD2MVVDD2MCVSW2VSS1VDD1VDD1MVSW1VINMODE2MODE1TREQCSB/UC1SDO/TXDSDI/RXDSCK/UC2VSSD VDDD VDDA VSSA VFILT CEQ2CEQ1\n20V LDOFan−In\nControlBus Coupler\nImpedance\nControl\nTransmitter\nOSCReceiverUART\nSPIKNX\nDLL\nInterface\nController\nMode\nRC\nOSC\nDiagnostics\nXCLKCTRIG\nANALOG\nBUFFER\nPIN OUT\nVSSA\nVBUS2\nTXO\nCCP\nCAV\nVBUS1\nCEQ1\nCEQ2\nVFILT\nVDD2MV\nVDD2MC\nVDD2\nVSS2\nVSW2\nVSW1\nVSS1\nVDD1\nVDD1MXCLKCTRIGMODE1MODE2TREQCSB/UC1SDI/RXDSDO/TXDSCK/UC2VDDDVSSDXCLKXSELXTAL2XTAL1SAVEBRESETBFANINANAOUTVDDA\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n2030\n29\n28\n27\n26\n25\n24\n23\n22\n2140\n39\n38\n37\n36\n35\n34\n33\n32\n31\nNCN5121\nV20V\nFigure 2. Pin Out NCN5121 (Top View)\nVIN\nNCN5121\nwww. onsemi.com\n3PIN DESCRIPTION\nTable 1. PIN LIST AND DESCRIPTION\nName Pin Description TypeEquivalent\nSchematic\nVSSA 1 Analog Supply Voltage Ground Supply\nVBUS2 2 Ground for KNX Transmitter Supply\nTX0 3 KNX Transmitter Output Analog Output Type 1\nCCP 4 AC coupling external capacitor connection Analog I/O Type 2\nCAV 5 Capacitor connection to average bus DC voltage Analog I/O Type 3\nVBUS1 6 KNX power supply input Supply Type 5\nCEQ1 7 Capacitor connection 1 for defining equalization pulse Analog I/O Type 4\nCEQ2 8 Capacitor connection 2 for defining equalization pulse Analog I/O Type 4\nVFILT 9 Filtered bus voltage Supply Type 5\nV20V 10 20V supply output Supply Type 5\nVDD2MV 11 Voltage monitor of Voltage Regulator 2 Analog Input Type 8\nVDD2MC 12 Current monitor input 1 of Voltage Regulator 2 Analog Input Type 9\nVDD2 13 Current monitor input 2 of Voltage Regulator 2 Analog Input Type 8\nVSS2 14 Voltage Regulator 2 Ground Supply\nVSW2 15 Switch output of Voltage Regulator 2 Analog Output Type 6\nVIN 16 Voltage Regulator 1 and 2 Power Supply Input Supply Type 5\nVSW1 17 Switch output of Voltage Regulator 1 Analog Output Type 6\nVSS1 18 Voltage Regulator 1 Ground Supply\nVDD1 19 Current Input 2 and Voltage Monitor Input of Voltage Regulator 1 Analog Input Type 8\nVDD1M 20 Current Monitor Input 1 of Voltage Monitor 1 Analog Input Type 9\nXCLKC 21 Clock Frequency Configure Digital Input Type 12\nTRIG 22 Transmission Trigger Output Digital Output Type 13\nMODE1 23 Mode Selection Input 1 Digital Input Type 12\nMODE2 24 Mode Selection Input 2 Digital Input Type 12\nTREQ 25 Transmit Request Input Digital Input Type 12\nCSB/UC1 26 Chip Select Output (SPI) or Configuration Input (UART)\nor 20 V LDO Disable (Analog Mode)Digital Output or\nDigital InputType 13 or 14\nSDI/RXD 27 Serial Data Input (SPI) or Receive Input (UART) Digital Input Type 14\nSDO/TXD 28 Serial Data Output (SPI) or Transmit Output (UART) Digital Output Type 13\nSCK/UC2 29 Serial Clock Output (SPI) or Configuration Input (UART)or Voltage Regulator 2 Disable (Analog Mode) Digital Output or\nDigital InputType 13 or 14\nVDDD 30 Digital Supply Voltage Input Supply Type 7\nVSSD 31 Digital Supply Voltage Ground Supply\nXCLK 32 Oscillator Clock Output Digital Output Type 13\nXSEL 33 Clock Selection (Quartz or Digital Clock) Digital Input Type 12\nXTAL2 34 Clock Generator Output (Quartz) or Input (Digital Clock) Analog Output or\nDigital InputType 10 or 14\nXTAL1 35 Clock Generator Input (Quartz) Analog Input Type 10\nSAVEB 36 Save Signal (open drain with pull −up) Digital Output Type 15\nRESETB 37 Reset Signal (open drain with pull −up) Digital Output Type 15\nFANIN 38 Fan−In Input Digital Input Type 11\nANAOUT 39 Analog Signal Output Analog Output Type 16\nVDDA 40 Analog Supply Voltage Input Supply Type 7\nNOTE: Type of CSB/UC1 and SCK/UC2 is depending on status MODE1 − MODE2 pin\nType of XTAL1 and XTAL2 pin is depending on status XSEL pin.\nNCN5121\nwww. onsemi.com\n4EQUIVALENT SCHEMATICS\nFollowing figure gives the equivalent schematics of the user relevant inputs and outputs. The diagrams are simplified\nrepresentations of the circuits used.\nTXO\n60VCCP\n60V\n60VCAV\n7VCEQx\n60V\nType 1: TXO −pin Type 2: CCP −pin Type 3: CAV −pin Type 4: CEQ1 and CEQ2 −pin\nVBUS1\n60VVBUS1\nVFILT\n60VVFILT\nV20V\n60VV20V\nVIN\n60VVIN\nVSWxVIN\n60V\nType 5: VBUS1 −, VFILT−, V20V and VIN −pin Type 6: VSW1 and VSW2 −pinVDDAVDDA\n7VVDDDVDDD\n7V\nVDD2MV\n7VVDD2\n60VVDD1\n7VType 7: VDDD − and VDDA −pin\nType 8: VDD1 −, VDD2− and VDD2MV −pinVDD1MVDD1\n7V\n7VVDD2MCVDD2\n7V\n60V\nXTAL2VDDD\nXTAL1VDDDType 9: VDD1M − and VDD2MC −pin\nType 10: XTAL1 − and XTAL2 −pinINVDDD\nRDOWN\nOUTVDDD\nINVDDD\nOUTVDDD\nRUPType 12: MODE1 −, MODE2 −,\nTREQ−, XCLKC − and XSEL −pin\nType 13: CSB/UC1 −,\nSDO/TXD −, SCK/UC2 −,\nTRIG− and XCLK −pinType 14: CSB/UC1 −,\nSDI/RXD −, SCK/UC2\nand XTAL2 −pinType 15: RESETB − and\nSAVEB−pinType 11: FANIN −pin\nANAOUTVDDA\nType 16: ANAOUTFANINVAUX\n7V\nNOTE: Type of CSB/UC1 and SCK/UC2 is depending on status MODE1 − MODE2 pin\nType of XTAL1 and XTAL2 pin is depending on status XSEL pin.\nFigure 3. In − and Output Equivalent Diagrams\nNCN5121\nwww. onsemi.com\n5ELECTRICAL SPECIFICATION\nTable 2. ABSOLUTE MAXIMUM RATINGS  (Notes 1 and 2)\nSymbol Parameter Min Max Unit\nVTXO KNX Transmitter Output Voltage −0.3 +45 V\nITXO KNX Transmitter Output Current (Note 3) − 250 mA\nVCCP Voltage on CCP −pin −10.5 +14.5 V\nVCAV Voltage on CAV −pin −0.3 +3.6 V\nVBUS1 Voltage on VBUS1 −pin −0.3 +45 V\nVANAOUT Voltage on ANAOUT pin −0.3 +3.6 V\nIBUS1 Current Consumption VBUS1 −pin 0 120 mA\nVCEQ Voltage on pins CEQ1 and CEQ2 −0.3 +45 V\nVFILT Voltage on VFILT −pin −0.3 +45 V\nV20V Voltage on V20V −pin −0.3 +25 V\nVDD2MV Voltage on VDD2MV −pin −0.3 +3.6 V\nVDD2MC Voltage on VDD2MC −pin −0.3 +45 V\nVDD2 Voltage on VDD2 −pin −0.3 +45 V\nVSW Voltage on VSW1 − and VSW2 −pin −0.3 +45 V\nVIN Voltage on VIN −pin −0.3 +45 V\nVDD1 Voltage on VDD1 −pin −0.3 +3.6 V\nVDD1M Voltage on VDD1M −pin −0.3 +3.6 V\nVDIG Voltage on pins MODE1, MODE2, TREQ, CSB/UC1, SDI/TXD, SDO/RXD, SCK/\nUC2, XCLK, XSEL, SAVEB, RESETB, XCLKC, TRIG, and FANIN−0.3 +3.6 V\nVDD Voltage on VDDD − and VDDA −pin −0.3 +3.6 V\nVXTAL Voltage on XTAL1 − and XTAL2 −pin −0.3 +3.6 V\nTST Storage temperature −55 +150 °C\nTJ Junction Temperature (Note 4) −40 +155 °C\nVHBM Human Body Model electronic discharge immunity (Note 5) −2 +2 kV\nStresses exceeding those listed in the Maximum Ratings table may damage the device. If any of these limits are exceeded, device function ality\nshould not be assumed, damage may occur and reliability may be affected.1. Convention: currents flowing in the circuit are defined as positive.2. VBUS2, VSS1, VSS2, VSSA and VSSD form the common ground. They are hard connected to the PCB ground layer.\n3. Room temperature, 27 /C0087 shunt resistor for transmitter, 250 mA over temperature range.\n4. Normal performance within the limitations is guaranteed up to the Thermal Warning level. Between Thermal Warning and Thermal Shutdown\ntemporary loss of function or degradation of performance (which ceases after the disturbance ceases) is possible.\n5. According to JEDEC JESD22 −A114.\nNCN5121\nwww. onsemi.com\n6Recommend Operation Conditions\nOperating ranges define the limits for functional operation and parametric characteristics of the device. Note that the\nfunctionality of the chip outside these operating ranges is not guaranteed. Operating outside the recommended operating ranges\nfor extended periods of time may affect device reliability.\nTable 3. OPERATING RANGES\nSymbol Parameter Min Max Unit\nVBUS1 VBUS1 Voltage (Note 6) +20 +33 V\nVDD Digital and Analog Supply Voltage (VDDD − and VDDA −pin) +3.13 +3.47 V\nVIN Input Voltage DC −DC Converter 1 and 2 (Note 7) +33 V\nVCCP Input Voltage at CCP −pin −10.5 +14.5 V\nVCAV Input Voltage at CAV −pin 0 +3.3 V\nVDD1 Input Voltage on VDD1 −pin +3.13 +3.47 V\nVDD1M Input Voltage on VDD1M −pin +3.13 +3.57 V\nVDD2 Input Voltage on VDD2 −pin +1.2 +21 V\nVDD2MC Input Voltage on VDD2MC −pin +1.2 +21.1 V\nVDD2MV Input Voltage on VDD2MV −pin +1.2 VDD V\nVDIG Input Voltage on pins MODE1, MODE2, TREQ, CSB/UC1, SDI/RXD, SCK/UC2,\nXCLKC, and XSEL0 VDD V\nVFANIN Input Voltage on FANIN −pin 0 3.6 V\nfclk Clock Frequency External Quartz 16 MHz\nTA Ambient Temperature −40 +105 °C\nTJ Junction Temperature (Note 8) −40 +125 °C\nFunctional operation above the stresses listed in the Recommended Operating Ranges is not implied. Extended exposure to stresse s beyond\nthe Recommended Operating Ranges limits may affect device reliability.6. Voltage indicates DC value. With equalization pulse bus voltage must be between 11 V and 45 V.\n7. Minimum operating voltage on VIN −pin should be at least 1 V larger than the highest value of VDD1 and VDD2.\n8. Higher junction temperature can result in reduced lifetime.\nNCN5121\nwww. onsemi.com\n7Table 4. DC PARAMETERS  The DC parameters are given for a device operating within the Recommended Operating Conditions\nunless otherwise specified. Convention: currents flowing in the circuit are defined as positive.\nSymbol Pin(s) Parameter Remark/Test Conditions Min Typ Max Unit\nPOWER SUPPLY\nVBUS1 VBUS1 Bus DC voltage Excluding active and\nequalization pulse20 − 33 V\nIBUS1_Int Bus Current Consumption VBUS = 30 V, IBUS = 10 mA,DC2, V20V disabled, no crystal\nor clock− 2.00 2.70 mA\nBus Current Consumption VBUS = 20 V, IBUS = 20 mA − 3.20 4.10\nVBUSH Undervoltage release level VBUS1  rising, see Figure 4 17.1 18.0 18.9 V\nVBUSL Undervoltage trigger level VBUS1  falling, see Figure 4 15.9 16.8 17.7 V\nVBUS_Hyst Undervoltage hysteresis 0.6 − − V\nVDDD VDDD Digital Power Supply 3.13 3.3 3.47 V\nVDDA VDDA Analog Power Supply 3.13 3.3 3.47 V\nVAUX Auxiliary Supply Internal supply, for info only 2.8 3.3 3.6 V\nKNX BUS COUPLER\n/C0068Icoupler //C0068t VBUS1 Bus Coupler Current Slope\nLimitationFANIN floating, V FILT > V FILTH − 0.40 0.50 A/s\nFANIN = 0, V FILT > V FILTH − 0.80 1.00 A/s\nIcoupler_lim,\nstartupVBUS1 Bus Coupler Startup Current\nLimitationFANIN floating, V FILT > V FILTH 20.0 25.0 30.0 mA\nFANIN = 0, V FILT > V FILTH 40.0 50.0 60.0 mA\nIcoupler_lim VBUS1 Bus Coupler Current Limitation FANIN floating, V FILT > V FILTH 10.6 11.4 12.0 mA\nFANIN = 0, V FILT > V FILTH 20.5 22.3 24.0 mA\nVcoupler_drop VBUS1,\nVFILTCoupler Voltage Drop(V\ncoupler_drop  = V BUS1  − VFILT)IBUS1  = 10 mA − 1.72 2.32 V\nIBUS1  = 20 mA − 2.34 2.80 V\nVFILTH VFILT Undervoltage release level VFILT rising, see Figure 5 10.1 10.6 11.2 V\nVFILTL Undervoltage trigger level VFILT falling, see Figure 5 8.4 8.9 9.4 V\nFIXED DC −DC CONVERTER\nVIN VIN Input Voltage 4.47 − 33 V\nVDD1 VDD1 Output Voltage 3.13 3.3 3.47 V\nVDD1_rip Output Voltage Ripple VIN = 25 V, I DD1 = 40 mA,\nL1 = 220 /C0109H− 40 − mV\nIDD1_lim Overcurrent Threshold R2 = 1 /C0087, see Figure 13 −100 −−200 mA\n/C0104VDD1 Power Efficiency\n(DC Converter Only)Vin = 25 V, I DD1 = 35 mA, \nL1 = 220 /C0109H (1.26 /C0087 ESR), \nsee Figure 1290 − %\nRDS(on)_p1 RDS(on)  of power switch See Figure 18 − − 9 /C0087\nRDS(on)_n1 RDS(on)  of flyback switch See Figure 18 − − 4 /C0087\nVDD1M VDD1M Input voltage VDD1M −pin − − 3.57 V\nNCN5121\nwww. onsemi.com\n8Table 4. DC PARAMETERS  The DC parameters are given for a device operating within the Recommended Operating Conditions\nunless otherwise specified. Convention: currents flowing in the circuit are defined as positive.\nSymbol Unit Max Typ Min Remark/Test Conditions Parameter Pin(s)\nADJUSTABLE DC −DC CONVERTER\nVIN VIN Input Voltage VDD2 \n+ 1− 33 V\nVDD2 VDD2 Output Voltage VIN ≥ VDD2 1.2 − 21 V\nVDD2H Undervoltage release level VDD2 rising, see Figure 6 − 0.9 x\nVDD2− V\nVDD2L Undervoltage trigger level VDD2 falling, see Figure 6 − 0.8 x\nVDD2− V\nVDD2_rip Output Voltage Ripple VIN = 25 V, V DD2 = 3.3 V, \nIDD2 = 40 mA, L2 = 220 /C0109H− 40 − mV\nIDD2_lim Overcurrent Threshold R3 = 1 /C0087, see Figure 13 −100 −−250 mA\n/C0104VDD2 Power Efficiency\n(DC Converter Only)Vin = 25 V, V DD2 = 3.3 V, \nIDD2 = 35 mA, L 2 = 220 /C0109H\n(1.26 /C0087 ESR), see Figure 13− 90 − %\nRDS(on)_p2 RDS(on)  of power switch See Figure 18 − − 8 /C0087\nRDS(on)_n2 RDS(on)  of flyback switch See Figure 18 − − 4 /C0087\nVDD2M VDD2MC Input voltage VDD2MC −pin − − 21.1 V\nRVDD2M VDD2MV Input Resistance VDD2MV −pin 1 − − M/C0087\nIleak,vsw2 Half−bridge leakage − − 20 /C0109A\nV20V REGULATOR\nV20V V20V V20V Output Voltage I20V < I20V_lim , VFILT ≥ 21 V 18 20 22 V\n/C0068I20V, STEP V20V Output Current \nLimitation StepFANIN floating − 1.25 − mA\nFANIN = 0 − 2.50 − mA\nI20V_lim V20V Output Current Limitation(for V20VCLIMIT[2:0] = 100) FANIN floating 6 7.5 9 mA\nFANIN = 0 12 15 18 mA\nV20VH V20V Undervoltage releaselevel V20V rising, see Figure 7 14.2 15.0 15.8 V\nV20VL V20V Undervoltage triggerlevel V20V falling, see Figure 7 13.2 14.0 14.8 V\nV20V_hyst V20V Undervoltage hysteresis V20V_hyst  = V 20VH – V 20VL − 1.0 − V\nXTAL OSCILLATOR\nVXTAL XTAL1, XTAL2 Voltage on XTAL −pin − − VDDD V\nFAN−IN CONTROL\nIpu,fanin FANIN Pull−Up Current FANIN −pin FANIN shorted to GND, \nPull−up connected to V AUX10 20 40 /C0109A\nNCN5121\nwww. onsemi.com\n9Table 4. DC PARAMETERS  The DC parameters are given for a device operating within the Recommended Operating Conditions\nunless otherwise specified. Convention: currents flowing in the circuit are defined as positive.\nSymbol Unit Max Typ Min Remark/Test Conditions Parameter Pin(s)\nDIGITAL INPUTS\nVIL SCK/UC2,\nSDI/RXD,\nCSB/UC1,\nTREQ,\nMODE1,\nMODE2,\nXSEL, XCLKC,\nXTAL2Logic Low Threshold 0 − 0.7 V\nVIH Logic High Threshold 2.65 − VDDD V\nRDOWN Internal Pull −Down Resistor SCK/UC2 −, SDI/RXD − and\nCSB/UC1 pin excluded. Only\nvalid in Normal State.5 10 28 k/C0087\nDIGITAL OUTPUTS\nVOL SCK/UC2,\nSDO/TXD,\nCSB/UC1,\nXCLK, TRIGLogic low output level 0 − 0.4 V\nVOH Logic high output level VDDD −\n0.45− VDDD V\nIL SCK/UC2,\nXCLK, TRIGLoad Current − − 8 mA\nSDO/TXD,\nCSB/UC1− − 4 mA\nVOL SAVEB,\nRESETBLogic low level open drain IOL = 4 mA − − 0.4 V\nRup Internal Pull −up Resistor 20 40 80 k/C0087\nANALOG OUTPUT\nPVBUS ANAOUT Analog output division ratio for V BUS 0.067 0.071 0.075 −\nPVFILT Analog output division ratio for V FILT 0.071 0.075 0.079 −\nPV20V Analog output division ratio for V 20V 0.086 0.091 0.096 −\nPVDDA Analog output division ratio for V DDA 0.438 0.462 0.485 −\nPVDD2 Analog output division ratio for V DD2MV 0.950 1.000 1.050 −\nPIBUS Analog output conversion ratio for I BUS 14.0 20.9 28.8 V/A\nPTJ Analog output conversion ratio for T junction − −4 − mV/K\nVTJ OFF Analog output offset for T junction  at 300K − 1.309 − V\nVOFF Analog output offset voltage −12 − 12 mV\ntSW,ANA Time between writing Analog Control Register 1 and stable\nANAOUT voltage (<1 nF capacitive load)− 33 − /C0109s\nTEMPERATURE MONITOR\nTTW Thermal Warning Rising temperature\nSee Figure 8105 115 125 °C\nTTSD Thermal shutdown Rising temperature \nSee Figure 8130 140 150 °C\nTHyst Thermal Hysteresis See Figure 8 5 11 15 °C\n/C0068T Delta T TSD and T TW See Figure 8 − 21.7 − °C\nPACKAGE THERMAL RESISTANCE VALUE\nR/C0113,ja Thermal Resistance \nJunction−to−AmbientSimulated Conform \nJEDEC JESD −51, (2S2P)− 30 − K/W\nSimulated Conform \nJEDEC JESD −51, (1S0P)− 60 − K/W\nR/C0113,jp Thermal Resistance \nJunction−to−Exposed Pad− 0.95 − K/W\nNCN5121\nwww. onsemi.com\n10Table 5. AC PARAMETERS  The AC parameters are given for a device operating within the Recommended Operating Conditions\nunless otherwise specified.\nSymbol Pin(s) Parameter Remark/Test Conditions Min Typ Max Unit\nPOWER SUPPLY\ntBUS_FILTER VBUS1 VBUS1 filter time See Figure 4 − 2 − ms\nFIXED DC −DC CONVERTER\ntVSW1_rise VSW1 Rising slope at VSW1 −pin − 0.45 − V/ns\ntVSW1_fall Falling slope at VSW1 −pin − 0.6 − V/ns\nADJUSTABLE DC −DC CONVERTER\ntVSW2_rise VSW2 Rising slope at VSW2 −pin − 0.45 − V/ns\ntVSW2_fall Falling slope at VSW2 −pin − 0.6 − V/ns\nXTAL OSCILLATOR\nfXTAL XTAL1, XTAL2 XTAL Oscillator Frequency − 16 − MHz\nWATCHDOG\ntWDPR  Prohibited Watchdog\nAcknowledge DelaySee Watchdog, p22 2  − 33 ms\ntWDTO Watchdog Timeout Interval Selectable over UART or SPI 33  − 524 ms\ntWDTO_acc Watchdog Timeout Interval\nAccuracy =Xtal accuracy\ntWDRD Watchdog Reset Delay   − 0  − ns\ntRESET Reset Duration  − 8  − /C0109s\nMASTER SERIAL PERIPHERAL INTERFACE (MASTER SPI)\ntsck SCK SPI Clock period SPI Baudrate depending on\nconfiguration input bits (see\nInterface Mode, p26). Toleranceis equal to Xtal oscillator\ntolerance. \nSee also Figure 10− 2 − /C0109s\n− 8 − /C0109s\ntSCK_HIGH SPI Clock high time − tSCK / 2 −\ntSCK_LOW SPI Clock low time − tSCK / 2 −\ntSDI_SET SDI SPI Data Input setup time 125 − − ns\ntSDI_HOLD SPI Data Input hold time 125 − − ns\ntSDO_VALID SDO SPI Data Output valid time CL = 20 pF, See Figure 10 − − 100 ns\ntCS_HIGH CSB SPI Chip Select high time See Figure 10 0.5 x\ntSCK− −\ntCS_SET SPI Chip Select setup time 0.5 x\ntSCK− −\ntCS_HOLD SPI Chip Select hold time 0.5 x\ntSCK− −\ntTREQ_LOW TREQ TREQ low time See Figure 11 125 − − ns\ntTREQ_HIGH TREQ high time 125 − − ns\ntTREQ_SET TREQ setup time 125 − − ns\ntTREQ_HOLD TREQ hold time 125 − − ns\nUNIVERSAL ASYNCHRONOUS RECEIVER/TRANSMITTER (UART)\nfUART TXD, RXD UART Interface Baudrate Baudrate depending on\nconfiguration input pins (see\nInterface Mode , p26). \nTolerance is equal to tolerance\nof Xtal oscillator tolerance.− 19200 − Baud\n− 38400 − Baud\nProduct parametric performance is indicated in the Electrical Characteristics for the listed test conditions, unless otherwise noted. Product\nperformance may not be indicated by the Electrical Characteristics if operated under different conditions.\nNCN5121\nwww. onsemi.com\n11Figure 4. Bus Voltage Undervoltage ThresholdVBUS\ntVBUSH\nVBUSL\ntBUS_FILTER\n<VBUS>tBUS_FILTER\nComments: <VBUS> is an internal signal which can be verified with the Internal State Service\ntVFILT\nVFILTLVFILTH\n<VFILT>\nFigure 5. VFILT Undervoltage ThresholdComments: <VFILT> is an internal signal which can be verified with the Internal State Service\ntVDD2\nVDD2LVDD2H\n<VDD2>\nFigure 6. VDD2 Undervoltage ThresholdsComments: <VDD2> is an internal signal which can be verified with the Internal State Service\nNCN5121\nwww. onsemi.com\n12tV20V\nV20VLV20VH\n<V20V>\nV20V_hyst\nFigure 7. V20V Undervoltage Threshold LevelsComments: <V20V> is an internal signal which can be verified with the Internal State Service\nFigure 8. Temperature Monitoring Levels<TW>\nSAVEB\nRESETBtT\nTTWTTSD\nTHyst\nTHyst\n/C0110TNormal\nStand-By\nReset\nStart-Up\nNormalStand-ByAnalog State\nRemarks: − <TW> is an internal signal which can be verified with the System State Service.\n− No SPI/UART communication possible when RESETB is low!\n− It’s assumed all voltage supplies are within their operating condition.\nNCN5121\nwww. onsemi.com\n13<WDEN>\nWD TimerRESETB\nEnable\nWatchdogRe−enable\nWatchdog\ntWDPRtWDTO>tWDPR and < t WDTO /C0118tWDPR and/C0119tWDTO tWDRDt\nt\nttreset\nFigure 9. Watchdog Timing DiagramComments: − WD Timer is an internal timer\n− tWDTO  = <WDT[3:0]>\n− <WDEN> and <WDT[3:0]> are Watchdog Register bitsÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉ\nÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉ\nÉÉÉÉÉÉ\nDO\nÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉ\nÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉ\nÉÉÉÉÉÉ\nCLK\nDICS\ntSCKtSDI_SET tSDI _HOLD\ntCS _ SET tSCK _HIGH tSCK _LOW\ntCS_HOLDtCS _HIGHtSDO_VALID\nFigure 10. SPI Bus Timing DiagramÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉ\nÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉ\nÉÉÉÉÉÉÉÉÉÉ\nDOCLK\nDICS\nTREQ\ntTREQ _SETLSB 1 7 2\nDummy Dummy Dummy Dummy\ntTREQ _LOW tTREQ_HIGHtTREQ_HOLD\nFigure 11. TREQ Timing Diagram\nNCN5121\nwww. onsemi.com\n14TYPICAL APPLICATION SCHEMATICS\nFigure 12. Typical Application Schematic, 8 −bit UART Mode (38400 bps), Single Supply, 20 mA Bus Current Limit and\n1 mA/ms Bus Current Slopes,  8 MHz Microcontroller Clock SignalNCN5121VSSA1\nVBUS22\nTXO3\nCCP4\nCAV5\nVBUS16\nCEQ17\nCEQ28\nVFILT9\nVDD2MV11\nVDD2MC12\nVDD213\nVSS214\nVSW215\nVIN16\nVSW117\nVSS118\nVDD119\nVDD1M20XCLKC21TRIG22MODE123TREQ25\nMODE224CSB/UC126SDI/RXD27SDO/TXD28\nV20V10SCK/UC229VDDD30VSSD31XCLK32XSEL33XTAL234XTAL135SAVEB36RESETB37FANIN38ANAOUT39VDDA403.3\nC5\nD1 R1\nC1\nC3C4C7C2\nL1C103.33.3C9 C8\nA\nBGNDVCC3.3\nTxD\nRxDSAVEbRESETb\nR2X1uC CLK\n3.3C6\nD2\nNCN5121\nwww. onsemi.com\n15TYPICAL APPLICATION SCHEMATICS\nFigure 13. Typical Application Schematic, SPI (500 kbps), Dual Supply, 10 mA Bus Current Limit and 0.5 mA/ms\nBus Current Slopes, 16 MHz Clock for MicrocontrollerNCN5121VSSA1\nVBUS22\nTXO3\nCCP4\nCAV5\nVBUS16\nCEQ17\nCEQ28\nVFILT\nVDD2MV11\nVDD2MC12\nVDD213\nVSS214\nVSW215\nVIN16\nVSW117\nVSS118\nVDD119\nVDD1M209\nXCLKC21TRIG22MODE123TREQ25\nMODE224CSB/UC126SDI/RXD27SDO/TXD28\nV20V10SCK/UC229VDDDVSSD31XCLK32XSEL33XTAL234XTAL135SAVEB36RESETB37FANIN38ANAOUT39VDDA40\n303.3\n3.33.3\nGNDVCC3.3\nSDO\nSDISAVEbRESETb\nV2V2\nVCC2\nSCK\nSCBuC CLK\nTREQA\nBD2D1 R1\nC1\nC2\nC7 C3 C4C5X1C8 C9\nC6\nC10\nC11R3R5 R4R2L2 L1\nNCN5121\nwww. onsemi.com\n16TYPICAL APPLICATION SCHEMATICS\nFigure 14. Typical Application Schematic, Analog Mode, Single Supply, 20 mA Bus Current Limit and 1.0 mA/ms\nBus Current Slopes, 8 MHz Clock Signal for MicrocontrollerNCN5121VSSA1\nVBUS22\nTXO3\nCCP4\nCAV5\nVBUS16\nCEQ17\nCEQ28\nVFILT9\nVDD2MV11\nVDD2MC12\nVDD213\nVSS214\nVSW215\nVIN16\nVSW117\nVSS118\nVDD119\nVDD1M20XCLKC21TRIG22MODE123TREQ25\nMODE224CSB/UC126SDI/RXD27SDO/TXD28\nV20V10SCK/UC229VDDD30VSSD31XCLK32XSEL33XTAL234XTAL135SAVEB36RESETB37FANIN38ANAOUT39VDDA403.3\nC5\nR1\nC1\nC3C4C7C2\nL1C103.33.3\nC6GNDVCC3.3\nTxD\nRxDSAVEbRESETb\nR23.3D1\nD2A\nB\nNCN5121\nwww. onsemi.com\n17Table 6. EXTERNAL COMPONENTS LIST AND DESCRIPTION\nComp. Function Min Typ Max Unit Remarks Notes\nC1 AC coupling capacitor 42.3 47 51.7 nF 50 V, Ceramic 9\nC2 Equalization capacitor 198 220 242 nF 50 V, Ceramic 9\nC3 Capacitor to average bus DC voltage 80 100 120 nF 50 V, Ceramic 9\nC4 Storage and filter capacitor VFILT 80 100 4000 /C0109F 35 V 9, 16\nC5 VDDA HF rejection capacitor 80 100 − nF 6.3 V, Ceramic  \nC6 VDDD HF rejection capacitor 80 100  − nF 6.3 V, Ceramic  \nC7 Load Capacitor V20V  − 1  − /C0109F 35 V, Ceramic, ESR < 2 /C0087 14,\n15, 16\nC8, C9 Parallel capacitor X −tal 8 10 12 pF 6.3 V, Ceramic 10\nC10 Load capacitor VDD1 8 10  /C0109F 6.3 V, Ceramic, ESR < 0.1 /C0087  \nC11 Load capacitor VDD2 8 10  /C0109F Ceramic, ESR < 0.1 /C0087 11\nR1 Shunt resistor for transmitting 24.3 27 29.7 /C0087 1 W 9\nR2 DC1 sensing resistor 0.47 1 10 /C0087 1/16 W  \nR3 DC2 sensing resistor 0.47 1 10 /C0087 1/16 W  \nR4 Voltage divider to specify VDD2 0 −  /C0087 1/16 W, see p19 for\ncalculating the exact value \nR5 0  −  1 M/C0087  \nL1, L2 DC1/DC2 inductor − 220 − /C0109H   \nD1 Reverse polarity protection diode SS16   12\nD2 Voltage suppressor 1SMA40CA    \nX1 Crystal oscillator FA-238   13\n9. Component must be between minimum and maximum value to fulfill the KNX requirement.\n10.Actual capacitor value depends on X1. If a crystal oscillator is chosen, the capacitors need to be chosen in such a way that  the frequency\nequals 16 MHz. Capacitors are not required if external clock signal is supplied.\n11. Voltage of capacitor depends on VDD2 value defined by R4 and R5. See p16 for more details on defining VDD2 voltage value.\n12.Reverse polarity diode is mandatory to fulfill the KNX requirement.13.A clock signal of 16 MHz (50 ppm or less) is mandatory to fulfill the KNX requirements. Or a crystal oscillator of 16 MHz, 5 0 ppm is used\n(C8 and C9 need to be of the correct value based on the crystal datasheet), or an external 16 MHz clock is used.\n14.It’s allowed to short this pin to VFILT-pin15.High capacitor value might affect the start up time\n16.Total charge of C4 and C7 may not be higher than 121 mC to fulfill the KNX requirement.\nNCN5121\nwww. onsemi.com\n18ANALOG FUNCTIONAL DESCRIPTION\nBecause NCN5121 follows the KNX standard only a brief\ndescription of the KNX related blocks is given in thisdatasheet. Detailed information on the KNX Bus can be\nfound on the KNX website ( www.knx.org\n) and in the KNX\nstandards.\nKNX Bus Interfacing\nEach bit period is 104 /C0109s. Logic 1 is simply the DC level\nof the bus voltage which is between 20 V and 33 V. Logic 0\nis encoded as a drop in the bus voltage with respect to the DC\nlevel. Logic 0 is known as the active pulse.The active pulse is produced by the transmitter and is\nideally rectangular. It has a duration of 35 /C0109s and a depth\nbetween 6 and 9 V (V act). Each active pulse is followed by\nan equalization pulse with a duration of 69 /C0109s. The latter is\nan abrupt jump of the bus voltage above the DC levelfollowed by an exponential decay down to the DC level. The\nequalization pulse is characterized by its height V\neq and the\nvoltage V end reached at the end of the equalization pulse.\nSee the KNX Twisted Pair Standard (KNX TP1 −256) for\nmore detailed KNX information.\nDC LevelVBUS\nt\n104/C0109s35/C0109s6 9 /C0109sActive Pulse Equalization Pulse\n104/C0109s\n01 Veq Vact\nVen d\nFigure 15. KNX Bus Voltage versus Digital Value\nKNX Bus Transmitter\nThe purpose of the transmitter is to produce an active\npulse (see Figure 15) between 6 V and 9 V regardless of the\nbus impedance (Note 1). In order to do this the transmitterwill sink as much current as necessary until the bus voltagedrops by the desired amount.\nKNX Bus Receiver\nThe receiver detects the beginning and the end of the\nactive pulse. The detection threshold for the start of theactive pulse is −0.45 V (typ.) below the average bus voltage.\nThe detection threshold for the end of the active pulse is\n−0.2 V (typ.) below the average bus voltage giving a\nhysteresis of 0.25 V (typ.).\nBus Coupler\nThe role of the bus coupler is to extract the DC voltage\nfrom the bus and provide a stable voltage supply for the\npurpose of powering the NCN5121. This stable voltage\nsupplied by the bus coupler is called VFILT, and will follow\nthe average bus voltage. The bus coupler also makes surethat the current drawn from the bus changes very slowly. Forthis a large filter capacitor is used on the VFILT −pin. Abrupt\nload current steps are absorbed by the filter capacitor.Long−term stability requires that the average bus coupler\ninput current is equal to the average (bus coupler) load\ncurrent. This is shown by the parameter /C0068I\ncoupler //C0068t, which\nindicates the bus current slope limit. The bus coupler willalso limit the current to a maximum of I\ncoupler_lim . At\nstartup, this current limit is increased to I coupler_lim,startup  to\nallow for fast charging of the VFILT bulk capacitance.\nThere are 4 conditions that determine the dimensioning of\nthe VFILT capacitor. First, the capacitor value should be\nbetween 12.5 /C0109F and 4000 /C0109F to garantuee proper operation\nof the part. The next requirement on the VFILT capacitor isdetermined by the startup time of the system. According tothe KNX specification, the total startup time must be below10 s. This time is comprised of the time to charge the VFILTcapacitor to 12 V (where the DCDC convertor becomesoperatonal) and the startup time of the rest of the systemt\nstartup,system . This gives the following formula:\nC/C0116/C046610 s/C0042tstartup,system/C0467/C0032Icoupler_Ilim,startup\nVFILTH\n1. Maximum bus impedance is specified in the KNX Twisted Pair Standard\nNCN5121\nwww. onsemi.com\n19The third limit on VFILT capacitor value is the required\ncapacitor value to filter out current steps /C0068Istep of the system\nwithout going into reset.\nC/C0117/C0068Istep2\n/C04662/C0064(VBUS1/C0042Vcoupler_drop/C0042VFILTL)/C0064Islope/C0467\nThe last condition on the size of VFILT is the desired\nwarning time t warning  between SA VEB and RESETB in case\nthe bus voltage drops away. This is determined by the current\nconsumption of the system I system .\nC/C0117Isystem/C0032/C0466twarning/C0041tbusfilter/C0467\n/C0466VBUS1/C0042Vcoupler_drop/C0042VFILTL/C0467\nThe bus coupler is implemented as a linear voltage\nregulator. For ef ficiency purpose, the voltage drop over the\nbus coupler is kept minimal (see Table 4).\nKNX Impedance Control\nThe impedance control circuit defines the impedance of\nthe bus device during the active and equalization pulses. Theimpedance can be divided into a static and a dynamiccomponent, the latter being a function of time. The staticimpedance defines the load for the active pulse current and\nthe equalization pulse current. The dynamic impedance is\nproduced by a block, called an equalization pulse generator,\nthat reduces the device current consumption (i.e. increasesthe device impedance) as a function of time during theequalization phase so as to return energy to the bus.\nFixed and Adjustable DC −DC Converter\nThe device contains two DC −DC buck converters, both\nsupplied from VFILT.\nDC1 provides a fixed voltage of 3.3 V. This voltage is used\nas an internal low voltage supply (V DDA and V DDD) but can\nalso be used to power external devices (VDD1 −pin). DC1 is\nautomatically enabled during the power −up procedure (see\nAnalog State Diagram, p23).\nDC2 provides a programmable voltage by means of an\nexternal resistor divider. It is not used as an internal voltage\nsupply making it not mandatory to use this DC −DC\nconverter (if not needed, tie the VDD2MV pin to VDD1, see\nalso Figure 12).\nDC2 can be monitored (<VDD2>, see System Status\nService, p37), and/or disabled by a command from the host\ncontroller (<DC2EN>, see Analog Control Register 0, p54).\nDC2 will only be enabled when VFILT −bit is set (<VFILT>,\nsee System Status Service, p37). The status of DC2 can bemonitored (<VDD2>, see System Status Service, p37).\nThe voltage divider can be calculated as follows:\n(eq. 1) R4/C0043R5/C0032VVDD2/C00421.2\n1.2\nBoth DC−DC converters make use of slope control to\nimprove EMC performance (see Table 5). To operate DC1and DC2 correctly, the voltage on the VIN −pin should be\nhigher than the highest value of DC1 and DC2.\nAlthough both DC −DC converters are capable of\ndelivering 100 mA, the maximum current capability will not\nalways be usable. One always needs to make sure that theKNX bus power consumption stays within the KNXspecification. The maximum allowed current for the DC −DC\nconverters and V20V regulator can be estimated as next:\nVBUS/C0032/C0466IBUS/C0042I20V/C0467\n2/C0032/C0426/C0466VDD1/C0032IDD1/C0467/C0041/C0466VDD2/C0032IDD2/C0467/C0427/C01191(eq. 2)\nIBUS will be limited by the KNX standard and should be\nlower or equal to I coupler  (see Table 4). Minimum V BUS is\n20 V (see KNX standard). V DD1 and V DD2 can be found back\nin Table 4. I DD1, IDD2 and I 20V must be chosen in a correct\nway to be in line with the KNX specification (Note 2).\nAlthough DC2 can operate up to 21 V , it will not be\npossible to generate this 21 V under all operating conditions.\nSee application note AND9135 for defining the optimuminductor and capacitor of the DC −DC converters. When\nusing low series resistance output capacitors on DC2, it isadvised to split the current sense resistor as shown inFigure 18 to reduce ripple current for low load conditions.\nV20V Regulator\nThis is the 20 V low drop linear voltage regulator used to\nsupply external devices. As it draws current from VFILT,this current is seen without any power conversion directly at\nthe VBUS1 pin.\nThe V20V regulator starts up by default but can be\ndisabled by a command from the host controller\n(<V20VEN>, see Analog Control Register 0, p54). When\nthe V20V regulator is not used, no load capacitor needs tobe connected (see C7 of Figures 12, 13 and 14). ConnectV20V−pin with VFILT−pin in this case.\nV20V regulator will only be enabled when VFILT −bit is\nset (<VFILT>, see System Status Service, p37). The hostcontroller can also monitor the status of the regulator(<V20V>, see System Status Service, p37). The 20 V\nregulator has a current limit that depends on the FANIN resistor\nvalue, and the value of bits 0 −3 (V20VCLIMIT[0:2]) of the\nanalog control register. In Table 4, the typical value of thecurrent limit at startup is given as I\n20V_lim  (V20VCLIMIT[0:2]\ninitializes at 100). For each bit difference, the current limit\nis adjusted up or down by /C0068I20 V ,STEP .\nXtal Oscillator\nAn analog oscillator cell generates the main clock of\n16 MHz. This clock is directly pr ovided to the digital block\nto generate all necessary clock domains.\nAn input pin XSEL is foreseen to enable the use of a quartz\ncrystal (see Figure 16) or an external clock generator (see\nFigure 17) to generate the main clock.\n2. The formula is for a typical KNX application. It‘s only given as guidance and does not guarantee compliance with the KNX stan dard.\nNCN5121\nwww. onsemi.com\n20Figure 16. XTAL Oscillator Figure 17. External Clock GeneratorXTAL1XTAL2\nXCLKOSC\nXSEL323534\n33 21\n8 MHz @ XCLC = VSS\n16 MHz @ XCLC = VDDVDD\nXCLKCMicrocontroller\nXTAL1XTAL2\nXCLKOSC\nXSEL323534\n33 21\nVDDXCLKC\n8 MHz @ XCLC = VSS\n16 MHz @ XCLC = VDD\nThe XCLK −pin can be used to supply a clock signal to the\nhost controller. This clock signal can be switched off by acommand from the host controller (<XCLKEN>, see\nAnalog Control Register 0, p54).\nAfter power −up, a 4 MHz (Note 3) clock signal will be\npresent on the XCLK −pin during Stand −By. When Normal\nState is entered, a 8 or 16 MHz clock signal will be presenton the XCLK −pin. See also Figure 20. To output an 8 MHz\nclock on the XCLK pin, the XCLKC pin must be pulled toground. When the XCLKC pin is pulled up to VDDD, theXCLK pin will output a 16 MHz clock signal.\nWhen Normal State is left and Stand −By State is\nre−entered due to an issue different than an Xtal issue, the 8\nor 16 MHz clock signal will still be present on theXCLK−pin during the Stand −By State. If however\nStand−By is entered from Normal State due to an Xtal issue,\nthe 4 MHz clock signal will be present on the XCLK −pin.\nSee also Table 7.\nFANIN−pin\nThe FANIN −pin defines the maximum allowed bus\ncurrent and bus current slopes. If the FANIN −pin is kept\nfloating, pulled up to V DD, or pulled down with a resistance\nhigher than 250 k /C0087, NCN5121 will limit the KNX bus\ncurrent slopes to 0.5 mA/ms at all times. NCN5121 will also\nlimit the KNX bus current to 30 mA during start −up. During\nnormal operation, NCN5121 is capable of taking 12 mA (=\nIcoupler ) from the KNX bus for supplying external loads\n(DC1, DC2 and V20V).\nIf the FANIN −pin is pulled to ground with a resistance\nsmaller than 2 k /C0087 the operation is similar as above with the\nexception that the KNX bus current slopes will be limited to\n1 mA/ms at all times, the KNX bus current will be limited\nto 60 mA during start −up and up to 24 mA (I coupler ) can be\ntaken from the KNX bus during normal operation.\nDefinitions for Start−Up and Normal Operation (as given\nabove) can be found in the KNX Specification.\nTransmit Trigger\nWhen bit 3 of analog control register 0 is set, the\nTRIG−pin will output a signal that goes high 1 bit time\nbefore the start of a scheduled transmission, and goes lowwhen the transmission is complete or a collision is detected.\nThis can be used during development as verification oftransmission. Note that a scheduled transmission is a frame\nthat is sent less than t\nBUS,IDLE  (TODO s) after previous\ncommunication on the bus. When a frame is transmitted on\na bus which has been idle for a longer time, or anACK/NACK/BUSY response is sent, the transmission willstart immediately after the trigger goes high, and the timebetween trigger high and frame transmission start will not be\nconsistent.\nRESETB − and SAVEB −pin\nThe RESETB signal can be used to keep the host\ncontroller in a reset state. When RESETB is low thisindicates that the bus voltage is too low for normal operation\nand that the fixed DC −DC converter has not started up. It\ncould also indicate a Thermal Shutdown (TSD). The\nRESETB signal also indicates if communication between\nhost and NCN5121 is possible.\nThe SA VEB signal indicates correct operation. When\nSAVEB goes low, this indicates a possible issue (loss of buspower or too high temperature) which could trigger the host\ncontroller to save critical data or go to a save state. SA VEB\ngoes low immediately when VFILT goes below 14 V (dueto sudden large current usage) or after 2 ms when VBUS\ngoes below 20 V . RESETB goes low when VFILT goes\nbelow 12 V .\nRESETB− and SA VEB −pin are open −drain pins with an\ninternal pull −up resistor to V\nDDD.\nVoltage Supervisors\nNCN5121 has different voltage supervisors monitoring\nVBUS, VFILT, VDD2 and V20V . The general function of a\nvoltage supervisor is to detect when a voltage is above orbelow a certain level. The levels for the different voltagesmonitored can be found back in T able 4 (see also Figures 4,\n5, 6 and 7).\nThe status of the voltage supervisors can be monitored by\nthe host controller (see System Status Service, p37).\nDepending on the voltage supervisor outputs, the device\ncan enter different states (see Analog State Diagram, p23).\n3. The 4 MHz clock signal is internally generated and will be less accurate as the crystal generated clock signal of 8 or 16 MHz .\nNCN5121\nwww. onsemi.com\n21Figure 18. Fixed (VDD1) and Adjustable (VDD2) DC −DC ConverterVSW1VIN\nVSS1\nVDD1M\nVDD1\nVSW2\nVSS2\nVDD2MV\nVDD2MC\nVDD2COMPSwitch\nController\nCOMPSwitch\nControllerFrom VFILT\n1Ω\n10μFVDD1 = 3.3V\n0.47 Ω\n10μFVDD2 = 3.3V – 20V\nNCN5121R5R4L2L1\nP2\nN2P1\nN1\n0.47 Ω\nNCN5121\nwww. onsemi.com\n22Table 7. STATUS OF SEVERAL BLOCKS DURING THE DIFFERENT (ANALOG) STATES\nState Osc XCLK VDD1 VDD2/V20V SPI/UART KNX\nReset Off Off Off Off Inactive Inactive\nStart−Up Off Off Start−up Off Inactive Inactive\nStand−By (Note 17) Off 4 MHz On Start−Up Active Inactive\n(Note 22)\nStand−By (Note 18) On\n(Note 20)On\n(Note 20)On On (Note 21) Active Inactive\n(Note 22)\nNormal On On\n(Note 19)On On Active Active\n17.Only valid when entering Stand −By from Start −Up State.\n18.Only valid when entering Stand −By from Normal State.\n19.8 MHz or 16 MHz depending on XCLKC.20.4 MHz signal if Stand −By state was entered due to oscillator issue. Otherwise 8 MHz or 16 MHz clock signal.\n21.Only operational if Stand −By state was not entered due to VDD2 or V20V issue.\n22.Under certain conditions KNX bus is (partly) active. See Digital State Diagram for more details.\nTemperature Monitor\nThe device produces an over −temperature warning (TW)\nand a thermal shutdown warning (TSD). Whenever thejunction temperature rises above the Thermal W arning level\n(T\nTW), the SA VEB −pin will go low to signal the issue to the\nhost controller. Because the SA VEB −pin will not only go\nlow on a Thermal Warning (TW), the host controller needs\nto verify the issue by requesting the status (<TW>, seeSystem Status Service, p37). When the junction temperature\nis above TW, the host controller should undertake actions to\nreduce the junction temperature and/or store critical data.\nWhen the junction temperature reaches Thermal\nShutdown (T\nTSD), the device will go to the Reset State. The\nThermal Shutdown will be stored (<TSD>, see Analog\nStatus Register, p56) and the analog and digital power\nsupply will be stopped (to protect the device). The devicewill stay in the Reset State as long as the temperature staysabove T\nTSD.\nIf the temperature drops below T TSD, Start−Up State will\nbe entered (see also Figure 19). At the moment VDD1 isback up and the OTP memory is read, Stand −By State will\nbe entered and RESETB will go high. The Xtal oscillator\nwill be started. Once the temperature has dropped below\nT\nTW and all voltages are high enough, Normal State will be\nentered. SA VEB will go high and KNX communication isagain possible.\nThe TW−bit will be reset at the moment the junction\ntemperature drops below T\nTW. The TSD −bit will only be\nreset when the junction temperature is below T TSD and the\n<TSD> bit is read (see Analog Status Register, p56).\nFigure 8 gives a better view on the temperature monitor.\nWatchdog\nNCN5121 provides a Watchdog function to the host\ncontroller. The W atchdog function can be enabled by means\nof the WDEN −bit (<WDEN>, see W atchdog Register, p54).Once this bit is set to ‘1’, the host controller needs to re −write\nthis bit to clear the internal timer before the WatchdogTimeout Interval expires (Watchdog Timeout Interval =\n<WDT>, see Watchdog Register, p54).\nIn case the Watchdog is acknowledged too early (before\nt\nWDPR ) or not within the Watchdog Timeout Interval\n(tWDTO ), the RESETB −pin will be made low (= reset host\ncontroller).\nTable 8 gives the Watchdog timings t WDTO  and t WDPR .\nDetails on <WDT> can be found in the Watchdog Register,\np54.\nTable 8. WATCHDOG TIMINGS\nWDT[3:0] tWDTO  [ms] tWDPR  [ms]\n0000 33 2\n0001 66 4\n0010 98 6\n0011 131 8\n0100 164 10\n0101 197 12\n0110 229 14\n0111 262 16\n1000 295 18\n1001 328 20\n1010 360 23\n1011 393 25\n1100 426 27\n1101 459 29\n1110 492 30\n1111 524 31\nNCN5121\nwww. onsemi.com\n23Analog State Diagram\nThe analog state diagram of NCN5121 is given in\nFigure 19. The status of the oscillator, XCLK−pin, DC−DC\nconverters, V20V regulator, serial and KNXcommunication during the different (analog) states is given\nin Table 7.\nFigure 20 gives a detailed view on the start −up behavior\nof NCN5121. After applying the bus voltage, the filtercapacitor starts to charge. During this Reset State, thecurrent drawn from the bus is limited to I\ncoupler  (for details\nsee the KNX Standards). Once the voltage on the filtercapacitor reaches 10 V (typ.), the fixed DC −DC converter\n(powering VDDA) will be enabled and the device enters the\nStart−Up State. When V\nDD1 gets above 2.8 V (typ.), the\nOTP memory is read out to trim some analog parameters\n(OTP memory is not accessible by the user). When done, the\nStand−By State is entered and the RESETB −pin is made\nhigh. If at this moment V BUS is above V BUSH , the VBUS −bit\nwill be set (<VBUS>, see System Status Service, p37 ). After\naprox. 2 ms the Xtal oscillator will start. When V FILT is\nabove V FILTH  DC2 and V20V will be started. When the Xtaloscillator has started, no Thermal W arning (TW) or Thermal\nShutdown (TSD) was detected and the VBUS −, VFILT−,\nVDD2− and V20V −bits are set, the Normal State will be\nentered and SA VEB −pin will go high.\nFigure 21 gives a detailed view on the shut −down\nbehavior. If the KNX bus voltage drops below V BUSL  for\nmore than t bus_filter , the VBUS −bit will be reset (<VBUS>,\nsee System Status Service, p37) and the Standy −By State is\nentered. SA VEB will go low to signal this. When VFILTdrops below V\nFILTL , DC2 and the V20V regulator will be\nswitched off. When VFILT drops below 6.5 V (typ), DC1\nwill be switched off and V DD1 drops below 2.8 V (typ.) the\ndevice goes to Reset State (RESETB low).\nAnalog Output\nA multiplexed analog signal is available on the\nANAOUT −pin for monitoring signal levels. The signal read\nout on this pin can be configured through the Analog Output\nControl bits (<ANAOUTCTRL>, see Analog ControlRegister 1, p 52).\nRemarks: /C0042 <TW>, <XTAL>, <VBUS>, <VFILT>, <VDD2> and <V20V> are internal status bits which can be verified with the System \nState Service.\n/C0042 <TSD> is an internal signal indicating a Thermal Shutdown. This internal signal cannot be read out.\n/C0042 Although Reset State could be entered from Normal State on a TSD, Stand /C0042By State will be entered first due to a TW.\nFigure 19. Analog State DiagramReset\nRESETB = ‘0’\nSAVEB = ‘0’\nStart−Up\nRESETB = ‘0’\nSAVEB = ‘0’\nStand−By\nRESETB = ‘1’\nSAVEB = ‘0’\nNormal\nRESETB = ‘1’\nSAVEB = ‘1’VFILT > 12V\nand\nTemp < TSD\nVFILT < 6.5V\nVDDA OK\nand\nOTP read done\n<TSD> = ‘1’\norV\nDDA nOKEnable DC1 Disable DC1\nEnable DC2 and V20V\nVFILT > V FILTHDisable DC2 and V20V\nVFILT < V FILTL\nDisable DC1VFILT < 6.5V\n<TW> = ‘0’ and <XTAL> = ‘1’ andDisable DC1, DC2 and V20V\n<TSD> = ‘1’\nor\nVDDA nOK<VBUS> = ‘1’ and <VFILT> = ‘1’ and\n<VDD2> = ‘1’ and <V20V> = ‘1’<TW> = ‘1’ or <XTAL> = ‘0’ or\n<VBUS> = ‘0’ or <VFILT> = ‘0’ or\n<VDD2> = ‘0’ or <V20V> = ‘0’and clock present\nNCN5121\nwww. onsemi.com\n24Figure 20. Start −Up Behavior<VFILT>\n<VDD2>\n<V20V>\nRESETB\nSAVEB\nXCLKVBUS\nVFILT\nIBUS\nIcoupler_lim,startup\nVDD112VVFILTH\n2.8V\nVXTAL\nXtal Oscillator\n±2ms\n<VBUS>VBUSH\nVDD2\n0.9 x V DD2\nV20V\nV20VH\nReset Start −Up Stand −By Normalt±2ms\nRemarks: VDD1 directly connected to VDDA.\nNCN5121\nwww. onsemi.com\n25Figure 21. Shut −Down Behavior<VFILT>\n<VDD2>\n<V20V>\nRESETB\nSAVEB\nXCLKVBUS\nVFILT\nIBUS\nVDD16.5VVFILTL\n2.8V\nVXTAL\nXtal Oscillator\n<VBUS>VBUSH\nVDD2\n0.9 x V DD2\nV20V\nReset Stand-By NormaltVBUSL\ntbus_filter tbus_filter\nNormal Stand-By\nRemarks: VDD1 directly connected to VDDA.\nNCN5121\nwww. onsemi.com\n26Interface Mode\nThe device can communicate with the host controller by\nmeans of a UART interface or an SPI interface. Theselection of the interface is done by the pins MODE1,\nMODE2, TREQ, SCK/UC2 and CSB/UC1.\nTable 9. INTERFACE SELECTION\nTREQ MODE2 MODE1 SCK/UC2 CSB/UC1 SDI/RXD SDO/TXD Description\n0 0 0 0 0 RXD TXD 9−bit UART −Mode, 19200 bps\n0 0 0 0 1 9−bit UART −Mode, 38400 bps\n0 0 0 1 0 8−bit UART −Mode, 19200 bps\n0 0 0 1 1 8−bit UART −Mode, 38400 bps\n1 0 0 DC2EN V20VEN Driver Receiver Analog Mode\nTREQ 0 1 SCK (out) CSB (out) SDI SDO SPI Master, 125 kbps\nTREQ 1 0 SPI Master, 500 kbps\nNOTE: X = Don‘t Care\nUART Interface\nThe UART interface is selected by pulling pins TREQ,\nMODE1 and MODE2 to ground. Pin UC2 is used to selectthe UART Mode (‘0’ = 9 −bit, ‘1’ = 8 −bit) and pin UC1 is\nused to select the baudrate (‘0’ = 19200 bps, ‘1’ =\n38400 bps). The UART interface allows full duplex,asynchronous communication.\nThe difference between 8 −bit mode and 9 −bit mode is that\nin 9−bit an additional parity bit is transmitted. This parity bit\nis used as an even parity bit (with exception of the internalregister read and write services where the parity bit ismeaningless and should be ignored). However, when theNCN5121 detects an acceptance window error or pulse\nduration error on the KNX bus, the parity bit is also encoded\nto indicate an error in the byte. In 8 −bit mode one extra\nservice is available (U_FrameState.ind). The SDI/RXD −pin\nis the NCN5121 UART receive pin and is used to send datafrom the host controller to the device. Pin SDO/TXD is theNCN5121 UART transmit pin and is used to transmit databetween the device and the host controller. Figure 12 givesan UART application example (9 −bit, 19200 bps). Data is\ntransmitted LSB first.\nStart\n(= 0)Bit 0 Bit 1 Bit 2 Bit 3 Bit 4 Bit 5 Bit 6 Bit 7Stop\n(= 1)\nFigure 22. 8 −bit UART Mode\nStart\n(= 0)Bit 0 Bit 1 Bit 2 Bit 3 Bit 4 Bit 5 Bit 6 Bit 7 ParityStop\n(= 1)\nFigure 23. 9 −bit UART Mode\nOne special UART Mode is foreseen called Analog Mode.\nWhen this mode is selected (TREQ = ‘1’, MODEx = ‘0’) an\nimmediate connection is made with the KNX transmitter\nreceiver (see Figure 24). Bit level coding/decoding has to be\ndone by the host controller. Keep in mind that the signals on\nthe SDI/RXD − and SDO/TXD −pin are inverted. Figure 14\ngives an Analog Mode application example. In AnalogMode, the UC1 and UC2 pins are used to enable or disable\nthe 20 V regulator and DC2 controller. When pulled low,these blocks are enabled. When one of these pins is pulled\nto VDDD, the respective block is disabled. When using the\ndevice in Analog Mode, no clock needs to be provided to the\ndevice.\nNCN5121\nwww. onsemi.com\n27Figure 24. Analog UART ModePOR\nTW/\nTSDUVDDC/DC\nConverter 1\nDC/DC\nConverter 2OSCNCN5121CAV\nVBUS1\nCCP\nTXO\nFANINVBUS2\nV20V\nXTAL1\nXTAL2\nXSEL\nXCLKC\nSAVEB RESETB ANAOUTVSS2VDD2VDD2MVVDD2MCVSW2VSS1VDD1VDD1MVSW1VINMODE2MODE1TREQ  (TREQ = 1)CSB/UC1SDO/TXDSDI/RXDSCK/UC2VSSD VDDD VDDA VSSA VFILT CEQ2 CEQ1\n20V LDOFan−In\nControlBus Coupler\nImpedance\nControl\nTransmitterReceiver\nRC\nOsc\nDiagnosticsOSC\nXCLK\nNCN5121\nwww. onsemi.com\n28SPI Interface\nThe SPI interface is selected by MODE1 − and\nMODE2−pin. The baudrate is determined by which\nMODE−pin is pulled high (MODE1 pulled high = 125 kbps,\nMODE2 pulled high = 500 kbps).The SPI interface allows full duplex synchronous\ncommunication between the device and the host controller.\nThe interface operates in Mode 0 (CPOL and CPHA = ‘0’)\nmeaning that the data is clocked out on the falling edge and\nsampled on the rising edge. The LSB is transmitted first.ÉÉÉÉÉÉÉÉSCK\nSDICSB\nLSB 1 2 3 4 5 6 MSB SDO1 0 3 2 5 4 7 6\nLSB 1 2 3 4 5 6 MSB\nFigure 25. SPI Transfer\nDuring SPI transmission, data is transmitted (shifted out\nserially) on the SDO/TXD −pin and received (shifted in\nserially) on the SDI/RXD −pin simultaneously. SCK/UC2 is\nset as output and is used as the serial clock (SCK) to\nsynchronize shifting and sampling of the data on the SDI −and SDO−pin. The speed of this clock signal is selectable\n(see Table 9). The slave select line (CSB/UC1 −pin) will go\nlow during each transmission allowing to selection the host\ncontroller (CSB −pin is high when SPI is in idle state).\nShift Register\nControl\nNCN5121SDO /TXD\nSDI/RXD\nSCK /UC2\nCSB /UC1Shift Register\nHost ControllerMISOMOSI\nSCLK\nSS Control\nFigure 26. SPI Master\nIn an SPI network only one SPI Master is allowed (in this\ncase NCN5121). To allow the host controller tocommunicate with the device the TREQ −pin can be used\n(Transmit Request). When NCN5121 detects a negativeedge on TREQ, the device will issue dummy transmission\nof 8 bits which will result in a transmission of data byte fromthe host controller to the device. See Figure 11 for details on\nthe timings. See Figure 13 for an SPI application example.\nSCK\nSDICSB\nSDO\nTREQ01 2 3 4 567\nDD D D D DDD01 2 3 4\nDD D D DDummy\nStart dummy transmission\nFigure 27. Transmission Request\nNCN5121\nwww. onsemi.com\n29DIGITAL FUNCTIONAL DESCRIPTION\nThe implementation of the Data Link Layer as specified in the KNX standard is divided in two parts. All functions related\nto communication with the Physical Layer and most of the Data Link Layer services are inside NCN5121, the rest of thefunctions and the upper communication layers are implemented into the host controller (see Figure 28).\nThe host controller is responsible for handling:\n•Checksum\n•Parity\n•Addressing\n•Length\nThe NCN5121 is responsible for handling:\n•Checksum\n•Parity\n•Acknowledge\n•Repetition\n•Timing\nDigital State Diagram\nThe digital state diagram is given in Figure 29.\nThe current mode of operation can be retrieved by the host controller at any time (when RESETB −pin is high) by issuing\nthe U_SystemStat.req service and parsing back U_SystemStat.ind service (see System Status Service, p37).\nTable 10. NCN5121 DIGITAL STATES\nState Explanation\nRESET Entered after Power On Reset (POR) or in response to a U_Reset.req service issued by the host controller. In this\nstate NCN5121 gets initialized, all features disabled and services are ignored and not executed.\nPOWER −UP /\nPOWER −UP\nSTOPEntered after Reset State or when VBUS, VFILT or Xtal are not operating correctly (operation of VBUS, VFILT and\nXTAL can be verified by means of the System Status Service, p37). Communication with KNX bus is not allowed. \nU_SystemStat.ind can be used to verify this state (code 00).\nSYNC NCN5121 remains in this state until it detects silence on the KNX bus for at least 40 Tbits. Although the receiver of\nNCN5121 is on, no frames are transmitted to the host controller. \nU_SystemStat.ind can be used to verify this state (code 01).\nSTOP This state is useful for setting −up NCN5121 safely or temporarily interrupting reception from the KNX bus.\nU_SystemStat.ind can be used to verify this state (code 10).\nNORMAL In this state the device is fully functional. Communication with the KNX bus is allowed.U_SystemStat.ind can be used to verify this state (code 11).\nNCN5121\nwww. onsemi.com\n30Application Layer\nPresentation Layer\nSession Layer\nTransport Layer\nNetwork Layer\nData Link LayerLogic Link Control\nMedia Access Control\nPhysical Layer7\n6\n5\n4\n3\n2\n1\nNCN5121 Host Controller\nFigure 28. OSI Model Reference\nReset\nInitialize device\nDeactivate all featuresPOR or U_Reset.req\nPower−Up\nCode: 00\nKNX Rx = off\nKNX Tx = off\nSync\nCode: 01\nKNX Rx = on\nKNX Tx = offStop\nCode: 10\nKNX Rx = off\nKNX Tx = off\nNormal\nCode: 11\nKNX Rx = on\nKNX Tx = onPower−Up Stop\nCode: 00\nKNX Rx = off\nKNX Tx = off\n<X T A L>=‘ 1 ’\nand\n<VBUS> = ‘1’\nand\n<VFILT> = ‘1’< X T A L >=‘ 0 ’\nor<VBUS> = ‘0’\nor\n<VFILT> = ‘0’<XTAL > = ‘1’\nand\n<VBUS> = ‘1’\nand\n<VFILT> = ‘1’<XTAL> = ‘0’\nor<VBUS> = ‘0’\nor\n<VFILT> = ‘0’\n<XTAL> = ‘0’\nor\n<VBUS> = ‘0’\nor\n<VFILT> = ‘0’\nSend U _Reset .ind\nto hostKNX bus idle for /C011940 TbitsU_ExitStopMode.req\nSend U_StopMode.ind\nto hostU_StopMode.req\nU_StopMode.req and\nno activity for /C011930 TbitsU_ExitStopMode .reqSend U_StopMode.ind\nto hostU_StopMode .req\nFigure 29. Digital State Diagram\nNCN5121\nwww. onsemi.com\n31Services\nExecution of services depends on the digital state (Figure 29). Certain services are rejected if received outside the Normal\nState. The following table gives a view of all services and there acceptance during the different digital states.\nTable 11. ACCEPTANCE OF SERVICES\nServiceState\nNormal Stop Sync Power−Up Bus Monitor\nU_Reset.req E E E E E\nU_State.req E E E E I\nU_SetBusy.req E E E E I\nU_QuitBusy.req E E E E I\nU_Busmon.req E E E E I\nU_SetAddress.req E E E E I\nU_SetRepetition.req E E E E I\nU_L_DataOffset.req E E E E I\nU_SystemStat.req E E E E I\nU_StopMode.req E I E E E\nU_ExitStopMode.req I E I I E\nU_Ackn.req E R R R I\nU_Configure.req E E E E I\nU_IntRegWr.req E E E E E\nU_IntRegRd.req E E E E E\nU_L_DataStart.req E R R R I\nU_L_DataCont.req E R R R I\nU_L_DataEnd.req E R R R I\nU_PollingState.req E E E E I\nNOTE:\nBus Monitor state is not a separate state. It is applied on top of Normal, Stop, Sync or Power −Up State.\nLegend: E = service is executed\nI = service is ignored (not executed and no feedback sent to the host controller)\nR = service is rejected (not executed, protocol error is sent back to the host controller through U_State.ind)\nSee Internal Register Read Service (p39) for limitations of U_IntRegRd.req\nNCN5121\nwww. onsemi.com\n32Table 12. SERVICES FROM HOST CONTROLLER\nControl Field\nService Name Hex RemarkExtra Following\nBytesTotal\nBytes 7 6 5 4 3 2 1 0\nINTERNAL COMMANDS – DEVICE SPECIFIC\n0 0 0 0 0 0 0 1 U_Reset.req 01 1\n0 0 0 0 0 0 1 0 U_State.req 02 1\n0 0 0 0 0 0 1 1 U_SetBusy.req 03 1\n0 0 0 0 0 1 0 0 U_QuitBusy.req 04 1\n0 0 0 0 0 1 0 1 U_Busmon.req 05 1\n1 1 1 1 0 0 0 1 U_SetAddress.req F1 AddrHigh\nAddrLow\nX (don’t care)4\n1 1 1 1 0 0 1 0 U_SetRepetition.req F2 RepCntrs\nX (don’t care)\nX (don’t care)4\n0 0 0 0 1 i i i U_L_DataOffset.req 08−0C iii = MSB byte\nindex (0 …4)1\n0 0 0 0 1 1 0 1 U_SystemState.req 0D 1\n0 0 0 0 1 1 1 0 U_StopMode.req 0E 1\n0 0 0 0 1 1 1 1 U_ExitStopMode.req 0F 1\n0 0 0 1 0 n b a U_Ackn.req 10−17 n = nack\nb = busy\na = addressed1\n0 0 0 1 1 p c m U_Configure.req 18−1F p = auto−polling\nc = CRC −CCITT\nm = frame endwith MARKER1\n0 0 1 0 1 0 a a U_IntRegWr.req 28−2B aa = address of\ninternal registerData to be written 2\n0 0 1 1 1 0 a a U_IntRegRd.req 38−3B 1\n1 1 1 0 s s s s U_PollingState.req E0−EE s = slot number\n(0 … 14)PollAddrHigh  \nPollAddrLow\nPollState4\nKNX TRANSMIT DATA COMMANDS\n1 0 0 0 0 0 0 0 U_L_DataStart.req 80 Control Octet (CTRL) 2\n1 0 i i i i i i U_L_DataCont.req 81−BF i = index (1 …63) Data octet (CTRLE,\nSA, DA, AT, NPCI, LG,\nTPDU)2\n0 1 l l l l l l U_L_DataEnd.req 47−7F l = last index + 1\n(7 … 63)Check Octet (FCS) 2\nWith respect to command length, there are two types of services from the host controller:\n•Single−byte commands: the control byte is the only data sent from the host controller to NCN5121.\n•Multiple−byte commands: the following data byte(s) need to be handled according to the already received control byte.\nWith respect to command purpose there are two types of services from the host controller:\n•Internal command: does not initiate any communication on the KNX bus.\n•KNX transmit data command: initiates KNX communication\nNCN5121\nwww. onsemi.com\n33Table 13. SERVICES TO HOST CONTROLLER\nControl Field\nService Name RemarkExtra\nFollowing\nBytesTotal\nBytes 7 6 5 4 3 2 1 0\nDLL (LAYER 2) SERVICES (DEVICE IS TRANSPARENT)\n1 0 r 1 p1 p0 0 0 L_Data_Standard.ind r = not repeated (‘1’) or\nrepeated L_Data frame (‘0’)\np1, p0 = priorityn\n0 0 r 1 p1 p0 0 0 L_Data_Extended.ind n\n1 1 1 1 0 0 0 0 L_Poll_Data.ind n\nACKNOWLEDGE SERVICES (DEVICE IS TRANSPARENT IN BUS MONITOR MODE)\nx x 0 0 x x 0 0 L_Ackn.ind x = acknowledge frame 1\nz 0 0 0 1 0 1 1 L_Data.con z = positive (‘1’) or negative\n(‘0’) confirmation1\nCONTROL SERVICES – DEVICE SPECIFIC\n0 0 0 0 0 0 1 1 U_Reset. .ind 1\nsc re te pe tw 1 1 1 U_State.ind sc = slave collision\nre = receive error\nte = transmit errorpe = protocol error \ntw = temperature warning1\nre ce te 1 res 0 1 1 U_FrameState.ind re = parity or bit errorce = checksum or length\nerrorte = timing error\nres = reserved1\n0 b aa ap c m 0 1 U_Configure.ind b = reservedaa = auto −acknowledge\nap = auto −polling\nc = CRC −CCITT\nm = frame end with\nMARKER1\n1 1 0 0 1 0 1 1 U_FrameEnd.ind 1\n0 0 1 0 1 0 1 1 U_StopMode.ind 1\n0 1 0 0 1 0 1 1 U_SystemStat.ind V20V, VDD2,\nVBUS, VFILT,\nXTAL , TW,\nMode2\nEach data byte received from the KNX bus is transparently transmitted to the host controller. An exception is the\nAcknowledge byte which is transmitted to the host controller only in bus monitoring mode. Other useful information can be\ntransmitted to the host controller by request using internal control services.\nA detailed description of the services is given on the next pages. For all figures, the MSB bit is always given on the left sid e\nno matter how the arrow is drawn.\nHost Ctrl NCN5121 KNX Bus\nMSB\n6\n5\n4\n3\n2\n1\nLSBMSB\n6\n5\n4\n3\n2\n1\nLSB\nMSB\n6\n5\n4\n3\n2\n1\nLSBMSB\n6\n5\n4\n3\n2\n1\nLSB\nFigure 30. Bit Order of Services\nNCN5121\nwww. onsemi.com\n34Reset Service\nReset the device to the initial state.\n0 0 00 0 00 1U_Reset.req\n0 0 00 0 01 1U_Reset.indHost Ctrl NCN5121 KNX Bus\nFigure 31. Reset Service\nRemark:  U_Reset.Ind will be send when entering Normal State (see Digital State Diagram, p29).\nState Service\nGet internal communication state of the device.\n0 0 00 0 01 0U_State.req\nsc re tepe tw 11 1U_State.indHost Ctrl NCN5121 KNX Bus\nFigure 32. State Service\nsc (slave collision): ‘1’ if collision is detected during transmission of polling state\nre (receive error): ‘1’ if corrupted bytes were sent by the host controller. Corruption involves incorrect parity (9 −bit\nUART only) and stop bit of every byte as well as incorrect control octet, length or checksum of frame\nfor transmission.\nte (transceiver error): ‘1’ if error detected during frame transmission (sending ‘0’ but receiving ‘1’).pe (protocol error): ‘1’ if an incorrect sequence of commands sent by the host controller is detected.tw (thermal warning): ‘1’ if thermal warning condition is detected.\nSet Busy Service\nActivate BUSY mode.\nDuring this time and when autoacknowledge is active (see Set Address Service p35), NCN5121 rejects the frames whose\ndestination address corresponds to the stored physical address by sending the BUSY acknowledge. This service has no ef fect\nif autoacknowledge is not active.\n00000011U_SetBusy.reqHost Ctrl NCN5121 KNX Bus\nFigure 33. Set Busy Service\nRemark:  BUSY mode is deactivated immediately if the host controller confirms a frame by sending U_Ackn.req service.\nQuit Busy Service\nDeactivate the BUSY mode.\nRestores back to the normal autoacknowledge behavior with ACK sent on the bus in response to addressing frame (only if\nautoacknowledge is active). This service has no effect if autoacknowledge is not active or BUSY mode was not set.\n00000100U_QuitBusy.reqHost Ctrl NCN5121 KNX Bus\nFigure 34. Quit Busy Service\nNCN5121\nwww. onsemi.com\n35Bus Monitor Service\nActivate bus monitoring state.\nIn this mode all data received from the KNX bus is sent to the host controller without performing any filtering on Data Link\nLayer. Acknowledge Frames are also transmitted transparently. This state can only be exited by the Reset Service (see p34).\n0 0 00 0 10 1U_Busmon.req\nxx x xx x xxKNX MessageHost Ctrl NCN5121 KNX Bus\nxx x xx x xxKNX Message\nxx x xx x xxKNX Message\nxx x xx x xxKNX Message\n0 0 00 0 00 1U_Reset.req\n0 0 00 0 01 1U_Reset.indxx 00 x x0 0Acknowledge\nxx 00 x x0 0Acknowledge\nFigure 35. Bus Monitor Service\nRemark:\nx = don‘t care\nSet Address Service\nSets the physical address of the device and activates the auto −acknowledge function.\nNCN5121 starts accepting all frames whose destination address corresponds to the stored physical address or whose\ndestination address is the group address by sending IACK on the bus. In case of an error detected during such frame reception,\nNCN5121 sends NACK instead of IACK.\nWhen issued several times after each other, the first call will set the physical address and activate the auto −acknowledge.\nFollowing calls will only set the physical address because auto −acknowledge is already activated.\nNCN5121 confirms activation of auto −acknowledge function by sending the U_Configure.ind service to the host controller.\n1 1 11 0 00 1U_SetAddress.reqHost Ctrl NCN5121 KNX Bus\nxx x xx x xxAddress High Byte\nxx x xx x xxAddress Low Byte\n0 baaap cm 0 1U_Configure.indxx x xx x xxDummy\nFigure 36. Set Address Service\nNCN5121\nwww. onsemi.com\n36b (busy mode): ‘1’ if busy mode is active. Can be enabled with U_SetBusy.req (see Set Busy Service, p34) and\ndisabled with U_QuitBusy.req service (see Quit Busy Service , p34) or U_Ackn.req service\n(see Receive Frame Service , p47).\naa (auto−acknowledge):‘1’ if auto −acknowledge feature is active. Can be enabled with U_SetAddress.req service\n(see Set Address Service , p35).\nap (auto−polling): ‘1’ if auto −polling feature is active. This feature can be enabled with U_Configure.req service\n(see Configure Service , p38).\nc (CRC−CCITT): ‘1’ if CRC −CCITT feature is active. This feature can be enabled with U_Configure.req service\n(see Configure Service , p38).\nm (frame end with MARKER): ‘1’ when feature is active. This feature can be enabled with U_Configure.req service\n(see Configure Service , p38).\nRemarks:\n•Set Address Service can be issued any time but the new physical address and the autoacknowledge function will only\nget active after the KNX bus becomes idle.\n•Autoacknowledge can only be deactivated by a Reset Service (p34)\n•x = don’t care\n•Dummy byte can be anything. NCN5121 completely disregards this information.\nSet Repetition Service\nSpecifies the maximum repetition count for transmitted frames when not acknowledged with IACK.\nSeparate counters can be set for NACK and BUSY frames. Initial value of both counters is 3.\nIf the acknowledge from remote Data Link Layer is BUSY during frame transmission, NCN5121 tries to repeat after at least\n150 bit times KNX bus idle. The BUSY counter determines the maximum amount of times the frame is repeated. If the BUSYacknowledge is still received after the last try, an L_Data.con with a negative conformation is sent back to the host controlle r.\nFor all other cases (NACK acknowledgment received, invalid/corrupted acknowledge received or time −out after 30 bit\ntimes) NCN5121 will repeat after 50 bit times of KNX bus idle. The NACK counter determines the maximum retries.L_Data.con with a negative confirmation is send back to the host controller when the maximum retries were reached.\nIn worst case, the same request is transmitted (NACK + BUSY + 1) times before NCN5121 stops retransmission.\nFigure 37. Set Repetition Service1 1 1 1 0 0 1 0U_SetRepetition.reqHost Ctrl NCN5121 KNX Bus\n0 b 0 nMaximum Repetitions\nb b n n\nx x x xDummy\nx x x x\nx x x xDummy\nx x x x\nbbb: BUSY counter (a frame will be retransmitted bbb −times if acknowledge with BUSY).\nnnn: NACK counter (a frame will be retransmitted nnn −times if acknowledge with NACK).\nRemark:  Bit 3 and 7 of the second byte need to be zero (‘0’)!\nNCN5121\nwww. onsemi.com\n37System Status Service\nRequest the internal system state of the device.\n0 0 00 1 10 1U_SystemStat .reqHost Ctrl NCN5121 KNX Bus\n0 1 00 1 01 1U_SystemStat .ind\n2nd byte\nXTALVFILTVBU SVDD2V20V\nTW\nMode\nFigure 38. System State Service\nV20V: ‘1’ if V20V linear voltage regulator is within normal operating range\nVDD2: ‘1’ if DC2 regulator is within normal operating rangeVBUS: ‘1’ if KNX bus voltage is within normal operating rangeVFILT: ‘1’ if voltage on tank capacitor is within normal operating range State ServiceXTAL: ‘1’ if crystal oscillator frequency is within normal operating rangeTW: ‘1’ if thermal warning condition is present (can also be verified with U_State.ind service (see State Service,\np34)\nMode: Operation mode (see also Digital State Diagram, p29).\nBit\nMode 1 0\n0 0 Power−Up\n0 1 Sync\n1 0 Stop\n1 1 Normal\nNote:  SA VEB−pin is low if any of bits 3 to 7 is ‘0’ (zero) or bit 2 is ‘1’.\nStop Mode Service\nGo to Stop State. A confirmation is sent to indicate that device has switched to the Stop State. See also Digital State Diagram ,\np29\n0 0 00 1 11 0U_StopMode.reqHost Ctrl NCN5121 KNX Bus\n0 0 10 1 01 1U_StopMode.ind\nFigure 39. Stop Mode Service\nNCN5121\nwww. onsemi.com\n38Exit Stop Mode Service\nRequest transition from Stop to Sync State. An acknowledge service is send later to confirm that device has switched from\nSync to Normal State. See also Digital State Diagram, p29.\n0 0 00 1 11 1U_ExitStopMode .reqHost Ctrl NCN5121 KNX Bus\n0 0 00 0 01 1U_Reset.ind\nFigure 40. Exit Stop Mode Service\nConfigure Service\nActivate additional features (which are disabled after reset).\nU_Configure.ind service is send back to the host controller at the exact moment when the new features get activated. This\nis done during bus idle or outside the Normal State. It confirms the execution of the request service.\nHost Ctrl NCN5121 KNX Bus\n0 0 01 1 mU_Configure.req\nc p\n0 baaap c 1U_Configure.ind\n0 m\nFigure 41. Configure Service\np (auto polling): when active, NCN5121 automatically fills in corresponding poll slot of polling telegrams.\nHost controller is responsible to provide appropriate polling information with theU_PollingState.req service (See Slave Polling Frame Service and Master Polling Frame\nService, p50 and 51).\nc (CRC−CCITT): when active, NCN5121 accompanies every received frame with a 2 −byte CRC −CCITT\nvalue. CRC −CCITT is also known as CRC −16−CCITT.\nm (frame end with MARKER): End of received frames is normally reported with a silence of 2.6 ms on the Tx line to the host\ncontroller. With this feature active, NCN5121 marks en d of frame with U_FrameEnd.ind +\nU_FrameState.ind services (See Send Frame Service and Receive Frame Service, p39 and 47).\nb: ‘1’ if busy mode is active. Can be enabled with U_SetBusy.req (see Set Busy Service, p34)\nand disabled with U_QuitBusy.req service (see Quit Busy Service, p34) or U_Ackn.req\nservice (see Receive Frame Service, p47).\naa: ‘1’ if auto −acknowledge feature is active. Can be enabled with U_SetAddress.req service\n(see Set Address Service, p35).\nap (auto−polling): ‘1’ if auto −polling feature is active. This feature can be enabled with U_Configure.req service.\nc (CRC−CCITT): ‘1’ if CRC −CCITT feature is active. See p53 for info on CRC −CCITT.\nThis feature can be enabled with U_Configure.req service.\nm (frame end with MARKER): ‘1’ when feature is active. This feature can be enabled with U_Configure.req service.\nRemark:\nActivation of the additional features is done by setting the corresponding bit to ‘1’. Setting the bit to ‘0’ (zero) has no eff ect\n(will not deactivate feature). Features can only be deactivated by a reset. Set all bits (m, c and p) to ‘0‘ (zero) to poll the curre nt\nconfiguration status.\nNCN5121\nwww. onsemi.com\n39Internal Register Write Service\nWrite a byte to an internal device −specific register (see Internal Device −Specific Registers , p54). The address of the register\nis specified in the request. The data to be written is transmitted after the request.\n0 0 10 1 0a aU_IntRegWr .reqHost Ctrl NCN5121 KNX Bus\nxx x xx x xxData Byte\nFigure 42. Internal Register Write Service\naa: address of the internal register\nRemarks:\n•x = don’t care (in line with Internal Device −Specific Registers , p54).\n•Internal Register Write is not synchronized with other services. One should only use this service when all previous\nservices are ended. When using communication over SPI, it is recommended to go to stop mode when performing a\nregister write. When communicating over UART, this is not required.\nInternal Register Read Service\nRead a byte from an internal device −specific register (see Internal Device −Specific Registers , p54). The address of the\nregister is specified in the request. The next byte returns the data of the addressed register.\n001110aaU_IntRegRd.reqHost Ctrl NCN5121 KNX Bus\nxxxxxxxxData Byte\nFigure 43. Internal Register Read Service\naa: address of the internal register\nRemarks:\n•x = don’t care (in line with Internal Device −Specific Registers , p54).\n•It’s advised to only use this service in Stop, Power −Up Stop or Power −Up State. In the other state erroneous behavior\ncould occur.\n•Internal Register Read is not synchronized with other services. One should only use this service when all previousservices are ended. When using communication over SPI or UART, it is recommended to go to stop mode when\nperforming a register write.\nSend Frame Service\nSend data over the KNX bus.\nThe U_L_DataStart.req is used to start transmission of a new frame. The byte following this request is the control byte of\nthe KNX telegram.\nThe different bytes following the control byte are assembled by using U_L_DataCont.req. The byte following\nU_L_DataCont.req is the data byte of the KNX telegram. U_L_DataCont.req contains the index which specifies the position\nof the data byte inside the KNX telegram. It‘s allowed to transmit bytes in random order and even overwrite bytes (= writeseveral times into the same index). It‘s up to the host controller to correctly populate all data bytes of the KNX telegram.\nU_L_DataEnd.req is used to finalize the frame and start the KNX transfer. The byte following U_L_DataEnd.req is the\nchecksum of the KNX telegram. If the checksum received by the device corresponds to the calculated checksum, the devicestarts the transmission on the KNX bus. If not, the device returns U_State.ind message to the host controller with Receive Error\nflag set (see State Service  p34 for U_State.ind).\nNCN5121\nwww. onsemi.com\n40U_L_DataStart/DataCont/DataEnd only provides space for 6 index bits. Because an extended frame can consist out of\n263 bytes, an index of 9 bits long is needed. U_DataOffset.req provides the 3 most significant bits of the data byte index. The\nvalue is stored internally until a new offset is provided with another call.\nEach transmitted data octet on the KNX bus will also be transmitted back to the host controller.\nEach transmission is ended with a L_Data.con service where the MSB indicates if an acknowledgment was received or not.\nWhen operating in SPI or UART 8 −bit Mode, L_Data.con is preceded with U_FrameState.ind.\nDepending on the activated features, a CRC −CCITT service and/or a MARKER could be included.\nNext figures give different examples of send frames.\n1 00 0 00 0 0U_L_DataStart.reqHost Ctrl NCN5121 KNX Bus\nx x xx x xx xControl Byte\n1 0 i ii i i iU_L_DataCont.req\nx x xx x xx xData Octet 1\n0 00 0 1 i i iU_L_DataOffSet .req\n1 0 i ii i i iU_L_DataCont.req\nx x xx x xx xData Octet N\n0 1 l ll l l lU_L_DataEnd.req\nx x xx x xx xChecksum\nx x xx x xx xControl Byte\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksumx 0 r1p1p0 0 0L_Data.ind\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksum\nx x xx x xx xImmediate Ackn\nrece te 1 res 0 1 1U_FrameState.ind\nx 00 0 10 1 1L_Data.con/C01192.6ms silence\nFigure 44. Send Frame, SPI or 8 −bit UART Mode, Frame End with Silence, No CRC −CCITT\nNCN5121\nwww. onsemi.com\n411 00 0 00 0 0U_L_DataStart.reqHost Ctrl NCN5121 KNX Bus\nx x xx x xx xControl Byte\n1 0 i ii i i iU_L_DataCont.req\nx x xx x xx xData Octet 1\n0 00 0 1 i i iU_L_DataOffSet .req\n1 0 i ii i i iU_L_DataCont.req\nx x xx x xx xData Octet N\n0 1 l ll l l lU_L_DataEnd.req\nx x xx x xx xChecksum\nx x xx x xx xControl Byte\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksumx 0 r1p1p0 0 0L_Data.ind\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksum\nx x xx x xx xImmediate Ackn\nx 00 0 10 1 1L_Data.con/C01192.6ms silence\nFigure 45. Send Frame, 9 −bit UART Mode, Frame End with Silence, No CRC −CCITT\nNCN5121\nwww. onsemi.com\n421 00 0 00 0 0U_L_DataStart.reqHost Ctrl NCN5121 KNX Bus\nx x xx x xx xControl Byte\n1 0 i ii i i iU_L_DataCont.req\nx x xx x xx xData Octet 1\n0 00 0 1 i i iU_L_DataOffSet .req\n1 0 i ii i i iU_L_DataCont.req\nx x xx x xx xData Octet N\n0 1 l ll l l lU_L_DataEnd.req\nx x xx x xx xChecksum\nx x xx x xx xControl Byte\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksumx 0 r1p1p0 0 0L_Data.ind\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksum\nx x xx x xx xImmediate Acknx x xx x xx xCRC−CCITT Low Byte\n/C01192.6 ms silencex x xx x xx xCRC−CCITT High Byte\nx 00 0 10 1 1L_Data.con\nFigure 46. Send Frame, 9 −bit UART Mode, Frame End with Silence, with CRC −CCITT\nNCN5121\nwww. onsemi.com\n431 00 0 00 0 0U_L_DataStart.reqHost Ctrl NCN5121 KNX Bus\nx x xx x xx xControl Byte\n1 0 i ii i i iU_L_DataCont.req\nx x xx x xx xData Octet 1\n0 00 0 1 i i iU_L_DataOffSet .req\n1 0 i ii i i iU_L_DataCont.req\nx x xx x xx xData Octet N\n0 1 l ll l l lU_L_DataEnd.req\nx x xx x xx xChecksum\nx x xx x xx xControl Byte\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksumx 0 r1p1p0 0 0L_Data.ind\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksum\nx x xx x xx xImmediate Acknx x xx x xx xCRC−CCITT Low Byte\n/C01192.6ms silencex x xx x xx xCRC−CCITT High Byte\nrece te 1 res 0 1 1U_FrameState.ind\nx 00 0 10 1 1L_Data.con\nFigure 47. Send Frame, SPI or 8 −bit UART Mode, Frame End with Silence, with CRC −CCITT\nNCN5121\nwww. onsemi.com\n441 0 00 0 00 0U_L_DataStart .reqHost Ctrl NCN5121 KNX Bus\nxx x xx x xxControl Byte\n1 0 ii i ii iU_L_DataCont .req\nxx x xx x xxData Octet 1\n0 0 00 1 ii iU_L_DataOffSet .req\n1 0 ii i ii iU_L_DataCont .req\nxx x xx x xxData Octet N\n0 1 ll l ll lU_L_DataEnd.req\nxx x xx x xxChecksum\nxx x xx x xxControl Byte\nxx x xx x xxData Octet 1\nxx x xx x xxData Octet N\nxx x xx x xxChecksumx0 r1p1 p0 0 0L_Data.ind\nxx x xx x xxData Octet 1\nxx x xx x xxData Octet N\nxx x xx x xxChecksum\nxx x xx x xxImmediate Ackn\nrece te 1 res 01 1U_FrameState .ind\nx0 00 1 01 1L_Data.con1 1 00 1 01 1U_FrameEnd.ind\nFigure 48. Send Frame, All Modes, Frame End with MARKER, No CRC −CCITT\nNCN5121\nwww. onsemi.com\n451 0 00 0 00 0U_L_DataStart.reqHost Ctrl NCN5121 KNX Bus\nxx x xx x xxControl Byte\n1 0 ii i ii iU_L_DataCont.req\nxx x xx x xxData Octet 1\n0 0 00 1 ii iU_L_DataOffSet .req\n1 0 ii i ii iU_L_DataCont.req\nxx x xx x xxData Octet N\n0 1 ll l ll lU_L_DataEnd.req\nxx x xx x xxChecksum\nxx x xx x xxControl Byte\nxx x xx x xxData Octet 1\nxx x xx x xxData Octet N\nxx x xx x xxChecksumx0 r1p1 p0 0 0L_Data.ind\nxx x xx x xxData Octet 1\nxx x xx x xxData Octet N\nxx x xx x xxChecksum\nxx x xx x xxImmediate Ackn\nxx x xx x xxCRC−CCITT Low Bytexx x xx x xxCRC−CCITT High Byterece te 1 res 01 1U_FrameState .ind\nx0 00 1 01 1L_Data.con1 1 00 1 01 1U_FrameEnd.ind\nFigure 49. Send Frame, All Modes, Frame End with MARKER and with CRC −CCITT\nNCN5121\nwww. onsemi.com\n46re (receive error): ‘1’ if newly received frame contained corrupted bytes (wrong parity, wrong stop bit or \nincorrect bit timings)\nce (checksum or length error): ‘1’ if newly received frame contained wrong checksum or length which does not correspond\nto the number of received bytes\nte (timing error): ‘1’ if newly received frame contained bytes whose timings do not comply with the KNX \nstandard\nres (reserved): Reserved for future use (will be ‘0’).\nRemarks:\n−If the repeat flag is not set (see Set Repetition Service p36), the device will only perform one attempt to send the KNX\ntelegram.\n−Sending of the KNX telegram over the KNX bus is only started after all data bytes are received and the telegram is\nassembled.\n−When starting transmission of a new frame with U_L_DataStart.req, the device automatically resets the internal offset of\nthe data index to zero.\n−Data offsets of 5, 6 and 7 are forbidden (U_L_DataOffset.req)!\nRemarks on Figures 44 to 49:\n−x = don‘t care (in respect with KNX standard)\n−See Tables 12 and 13 for more details on all the bits\n−Code of U_FrameEnd.ind (0xCB) can also be part of the KNX frame content (Data Octet). When NCN5121 transmits\nthe data octet (0xCB) on the KNX bus, 2 bytes (2 times 0xCB) will be transmitted back to the host controller to make itpossible for the host controller to distinguish between a data octet (0xCB) and U_FrameEnd.ind. This remark is onlyvalid if frame end with MARKER is enabled.\n−See p53 for info on CRC −CCITT.\nNCN5121\nwww. onsemi.com\n47Receive Frame Service\nReceive data over the KNX bus.\nUpon reception from the control byte, the control byte is checked by the device. If correct, the control byte is transmitted\nback to the host (L_Data_Standard.ind or L_Data_Extended.ind depending if standard or extended frame type is received).After the control byte, all data bytes are transparently transmitted back to the host controller. Handling of this data is a ta sk\nfor the Data Link Layer which should be implemented in the host controller.\nThe host controller can indicate if the device is addressed by setting the NACK, BUSY or ACK flag (U_Ackn.req).\nWhen working in SPI or 8 −bit UART Mode, each frame is ended with an U_FrameState.ind. Depending on the activated\nfeatures, a CRC −CCITT or MARKER could be added to the complete frame.\nBelow figures give different examples of receive frames.\nHost Ctrl NCN5121 KNX Bus\nx x x x x x x xControl Byte\nx x x x x x x xData Octet 1\nx x x x x x x xChecksumx 0 r1p1 p0 0 0L_Data.ind\nx x x x x x x xData Octet 1\nx x x x x x x xData Octet N\nx x x x x x x xChecksum\nx x x x x x x xImmediate Ackn\nre ce te 1 0 0 1 1U_FrameState .ind0 0 0 1 0 n b aU_Ackn.req\nx x x x x x x xData Octet N\n/C01192.6 ms silence\nFigure 50. Receive Frame, SPI or 8 −bit UART Mode, Frame End with Silence, No CRC −CCITT\nNCN5121\nwww. onsemi.com\n48Host Ctrl NCN5121 KNX Bus\nx x x x x x x xControl Byte\nx x x x x x x xData Octet 1\nx x x x x x x xChecksumx 0 r1p1 p0 0 0L_Data.ind\nx x x x x x x xData Octet 1\nx x x x x x x xData Octet N\nx x x x x x x xChecksum\nx x x x x x x xImmediate Ackn0 0 0 1 0 n b aU_Ackn.req\nx x x x x x x xData Octet N\n/C01192.6 ms silence\nFigure 51. Receive Frame, 9 −bit UART Mode, Frame End with Silence, No CRC −CCITT\nHost Ctrl NCN5121 KNX Bus\nx x xx x xx xControl Byte\nx x xx x xx xData Octet 1\nx x xx x xx xChecksumx 0 r1p1p0 0 0L_Data.ind\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksum\nx x xx x xx xImmediate Ackn0 00 1 0n b aU_Ackn.req\nx x xx x xx xData Octet N\n/C01192.6ms silencex x xx x xx xCRC−CCITT Low Bytex x xx x xx xCRC−CCITT High Byte\nFigure 52. Receive Frame, 9 −bit UART Mode, Frame End with Silence, with CRC −CCITT\nNCN5121\nwww. onsemi.com\n49Host Ctrl NCN5121 KNX Bus\nx x xx x xx xControl Byte\nx x xx x xx xData Octet 1\nx x xx x xx xChecksumx 0 r1p1p0 0 0L_Data.ind\nx x xx x xx xData Octet 1\nx x xx x xx xData Octet N\nx x xx x xx xChecksum\nx x xx x xx xImmediate Ackn0 00 1 0n b aU_Ackn.req\nx x xx x xx xData Octet N\n/C01192.6ms silencex x xx x xx xCRC−CCITT Low Bytex x xx x xx xCRC−CCITT High Byte\nrece te 1 res 0 1 1U_FrameState.ind\nFigure 53. Receive Frame, SPI or 8 −bit UART Mode, Frame End with Silence, with CRC −CCITT\nHost Ctrl NCN5121 KNX Bus\nxx x xx x xxControl Byte\nxx x xx x xxData Octet 1\nxx x xx x xxChecksumx0 r1p1 p0 0 0L_Data.ind\nxx x xx x xxData Octet 1\nxx x xx x xxData Octet N\nxx x xx x xxChecksum\nxx x xx x xxImmediate Ackn0 0 01 0 nb aU_Ackn.req\nxx x xx x xxData Octet N\nrece te 1 res 01 1U_FrameState.ind1 1 00 1 01 1U_FrameEnd.ind\nFigure 54. Receive Frame, All Modes, Frame End with MARKER, No CRC −CCITT\nNCN5121\nwww. onsemi.com\n50Host Ctrl NCN5121 KNX Bus\nx x x x x x x xControl Byte\nx x x x x x x xData Octet 1\nx x x x x x x xChecksumx 0 r1p1 p0 0 0L_Data.ind\nx x x x x x xxData Octet 1\nx x x x x x xxData Octet N\nx x x x x x xxChecksum\nx x x x x x x xImmediate Ackn0 0 01 0 n b aU_Ackn.req\nx x x x x x x xData Octet N\nx x x x x x xxCRC−CCITT Low Bytex x x x x x xxCRC−CCITT High Byterece te 1 res 0 1 1U_FrameState .ind1 1 00 1 0 1 1U_FrameEnd .ind\nFigure 55. Receive Frame, All Modes, Frame End with MARKER, with CRC −CCITT\nre (receive error): ‘1’ if newly received frame contained corrupted bytes (wrong parity, wrong stop bit or \nincorrect bit timings)\nce (checksum or length error): ‘1’ if newly received frame contained wrong checksum or length which does not correspond\nto the number of received bytes\nte (timing error) : ‘1’ if newly received frame contained bytes whose timings do not comply with the KNX \nstandard\nres (reserved) : Reserved for future use (will be ‘0’).\nRemarks on Figures 50 to 55:\n−x = don‘t care (in respect with KNX standard)\n−See Tables 12 and 13 for more details on all the bits\n−Code of U_FrameEnd.ind (0xCB) can also be part of the KNX frame content (Data Octet). To make a distinguish\nbetween a data octet and U_FrameEnd.ind, NCN5121 duplicates the data content (if 0xCB). This will result in 2 bytestransmitted to the host controller (two times 0xCB) corresponding to 1 byte received on the KNX bus.Above is only valid if frame end with MARKER is enabled.\n−See p53 for info on CRC −CCITT.\nSlave Polling Frame Service\nUpon reception and consistency check of the polling control byte, the control byte is send back to the host controller\n(L_Poll_Data.ind). The host controller will send the slot number to the device (U_PollingState.req), followed by the polling\naddress and the polling state. At the same time the source address, polling address, slot count and checksum is received over\nthe KNX bus. If the polling address received from the KNX bus is equal to the polling address received from the host controller ,\nNCN5121 will send the polling data in the slot as define by U_PollingState.req (only if the slotcount is higher as the defineslot).\nU_PollingState.req can be sent at any time (not only during a transmission of a polling telegram). The information is stored\ninternally in NCN5121 and can be reused for further polling telegrams if auto −polling function gets activated.\nNCN5121\nwww. onsemi.com\n51Host Ctrl NCN5121 KNX Bus\n1 1 11 0 00 0Control Byte\nxx x xx x xxSource Address\nxx x xx x xxChecksum1 1 11 0 00 0L_Poll_Data.ind\n1 1 10 s s ssU_PollingState.req\nxx x xx x xxSlot 0xx x xx x xxPollAddrHighxx x xx x xxSource Address\nxx x xx x xxPollAddrLowxx x xx x xxPoll Address\nxx x xx x xxPoll Address\nxx x xx x xxSlot Countxx x xx x xxPollState\nxx x xx x xxSlot N\nFigure 56. Slave Polling Frame Service\nRemarks:\nx = don’t care (in respect with KNX standard)\nssss = slot number\nMaster Polling Frame Service\nWhen NCN5121 receives the polling frame from the host controller, the polling frame will be transmitted over the KNX bus.\nNCN5121\nwww. onsemi.com\n52Host Ctrl NCN5121 KNX Bus\n1 1 11 0 00 0Control Byte\nxx x xx x xxSource Address\nxx x xx x xxChecksum1 1 11 0 00 0L_Poll_Data.ind\n1 1 10 s s ssU_PollingState.req\nxx x xx x xxSlot 0xx x xx x xxPoll Addressxx x xx x xxSource Address\nxx x xx x xxPollAddrLowxx x xx x xxPoll Address\nxx x xx x xxPoll Address\nxx x xx x xxSlot Count\nxx x xx x xxPollState\nxx x xx x xxSlot Nxx x xx x xxSource Address\nxx x xx x xxPollAddrHighxx x xx x xxSource Address\nxx x xx x xxPoll Address\nxx x xx x xxSlot Count\nxx x xx x xxChecksum\nxx x xx x xxSlot 0\nxx x xx x xxSlot N1 1 11 0 00 0Control Byte\nxx x xx x xxSource Address\nxx x xx x xxChecksumxx x xx x xxSource Address\nxx x xx x xxPoll Address\nxx x xx x xxPoll Address\nxx x xx x xxSlot Count\nFigure 57. Master Polling Frame Service\nRemarks:\nx = don‘t care (in respect with KNX standard)\nssss = slot number\nNCN5121\nwww. onsemi.com\n53CRC−CCITT\nCRC order − 16 bit\nCRC polynom (hex) − 1021\nInitial value (hex) − FFFF\nFinal XOR value (hex) − 0\nNo reverse on output CRC\nTest string „123456789“ is 29B1h\nCRC−CCITT value over a buffer of bytes can be calculated with following code fragment in C, where\npBuf  is pointer to the start of frame buffer\nuLength  is the frame length in bytes\nunsigned short calc_CRC_CCITT(unsigned char* pBuf, unsigned short uLength)\n{\nunsigned short u_crc_ccitt;\nfor (u_crc_ccitt = 0xFFFF; uLength −−; p++)\n{\nu_crc_ccitt = get_CRC_CCITT(u_crc_ccitt, *p);\n}return u_crc_ccitt;\n}\nunsigned short get_CRC_CCITT(unsigned short u_crc_val, unsigned char btVal)\n{\nu_crc_val = ((unsigned char)(u_crc_val >> 8)) | (u_crc_val << 8);u_crc_val ^= btVal;u_crc_val ^= ((unsigned char)(u_crc_val & 0xFF)) >> 4;u_crc_val ^= u_crc_val << 12;\nu_crc_val ^= (u_crc_val & 0xFF) << 5;\nreturn u_crc_val;\n}\nNCN5121\nwww. onsemi.com\n54Internal Device −Specific Registers\nIn total 4 device-specific register are available:\n•Watchdog Register (0x00)\n•Analog Control Register 0 (0x01)\n•Analog Control Register 1 (0x02)\n•Analog Status Register 0 (0x03)\n•Revision ID Register (0x05)\nWatchdog Register\nThe Watchdog Register is located at address 0x00 and can be used to enable the watchdog and set the watchdog time.\nTable 14. WATCHDOG REGISTER\nExtWatchdogCtrl (ExtWR)\nAddress Bit 7 Bit 6 Bit 5 Bit 4 Bit 3 Bit 2 Bit 1 Bit 0\n0x00 Access R/W R/W R/W R/W R/W R/W R/W R/W\nReset 0 0 0 0 1 1 1 1\nData WDEN - - - WDT\nTable 15. WATCHDOG REGISTER PARAMETERS\nParameter Value Description Info\nWDEN 0 Disable Enables/disables the watchdog p22\n1 Enable\nWDT 0000 33 ms Defines the watchdog time. The watchdog needs to be re-enabled (WDEN)\nwithin this time or a watchdog event will be triggered.0001 66 ms\n0010 98 ms\n0011 131 ms\n0100 164 ms\n0101 197 ms\n0110 229 ms\n0111 262 ms\n1000 295 ms\n1001 328 ms\n1010 360 ms\n1011 393 ms\n1100 426 ms\n1101 459 ms\n1110 492 ms\n1111 524 ms\nRemark:  Bit 4 … 6 are reserved.\nAnalog Control Register 0\nThe Analog Control Register 0 is located at address 0x01 and can be used to disable the V20V and the DC2 regulator, to\ndisable the XCLK-pin, to enable the transmit trigger signal and to set the 20 V LDO current limit.\nTable 16. ANALOG CONTROL REGISTER 0\nAnalog Control Register 0 (AnaCtrl0)\nAddress Bit 7 Bit 6 Bit 5 Bit 4 Bit 3 Bit 2 Bit 1 Bit 0\n0x01 Access R/W R/W R/W R/W R/W R/W R/W R/W\nReset 0 1 1 1 0 1 0 0\nData − V20VEN DC2EN XCLKEN TRIGEN V20VCLIMIT\nNCN5121\nwww. onsemi.com\n55Table 17. ANALOG CONTROL REGISTER 0 PARAMETERS\nParameter Value Description Info\nV20VEN 0 Disable Enables/disables the V20V regulator p 19\n1 Enable\nDC2EN 0 Disable Enables/disables the DC2 converter p 19\n1 Enable\nXCLKEN 0 Disable Enables/disables the XCLK output signal p 19\n1 Enable\nTRIGEN 0 Disable TRIG/ARXD pin outputs the Tx activity monitor signal when enabled.\nWhen disabled the TRIG/ARXD pin is tri −state.p 19\n1 Enable\nV20VCLIMIT 000 − 111 Adjustment of the V20V current limit as configured by R 6 by /C0068I20V, STEP  per bit p 19\nRemark:  Bit 7 is reserved.\nAnalog Control Register 1\nThe Analog Control Register 1 is located at address 0x02 and can be used to configure the voltage monitors.\nTable 18. ANALOG CONTROL REGISTER 1\nAnalog Control Register 1 (AnaCtrl1)\nAddress Bit 7 Bit 6 Bit 5 Bit 4 Bit 3 Bit 2 Bit 1 Bit 0\n0x02 Access R/W R/W R/W R/W R/W R/W R/W R/W\nReset 0 1 1 0 0 0 0 0\nData − V20V_OK_M VDD2_OK_M VFILT_OK_M ANAOUTCTRL -\nTable 19. ANALOG CONTROL REGISTER 1 PARAMETERS\nParameter Value Description Info\nV20V_OK_M 0 Enable Enable to include the voltage monitor output in the SAVEB calculation. p 19\n1 Disable\nVDD2_OK_M 0 Enable Enable to include the voltage monitor output in the SAVEB calculation. p 19\n1 Disable\nVFILT_OK_M 0 Enable Enable to include the voltage monitor output in the SAVEB calculation. p 18\n1 Disable\nANAOUTCTRL 000 Disable Analog output is disabled p 23\n001 Enable Analog output monitors VBUS1\n010 Enable Analog output monitors VFILT\n011 Enable Analog output monitors V20V\n100 Enable Analog output monitors VDD2\n101 Enable Analog output monitors VDDA\n110 Enable Analog output monitors Bus current\n111 Enable Analog output monitors Temperature\nRemark:  Bit 0 and bit 7 are reserved.\nNCN5121\nwww. onsemi.com\n56Analog Status Register\nThe Analog Status Register is located at address 0x03 and can be used to verify the voltage monitors, Xtal and thermal status.\nTable 20. ANALOG STATUS REGISTER\nAnalog Status Register (AnaStat)\nAddress Bit 7 Bit 6 Bit 5 Bit 4 Bit 3 Bit 2 Bit 1 Bit 0\n0x03 Access R R R R R R R R\nReset 0 0 0 0 0 0 0 0\nData − V20V VDD2 VBUS VFILT XTAL TW TSD\nTable 21. ANALOG STATUS REGISTER PARAMETERS\nParameter Value Value Description Info\nV20V 0 nOK ‘1’ if voltage on V20V-pin is above the V20V undervoltage level p 19\n1 OK\nVDD2 0 nOK ‘1’ if voltage on VDD2-pin is above the VDD2 undervoltage level p 19\n1 OK\nVBUS 0 nOK ‘1’ if bus voltage is above the VBUS undervoltage level p 18\n1 OK\nVFILT 0 nOK ‘1’ if voltage on VFILT-pin is above the VFILT undervoltage level p 18\n1 OK\nXTAL 0 nOK ‘1’ if XTAL is up and running p 19\n1 OK\nTW 0 No TW ‘1’ if Thermal Warning detected p 22\n1 TW\nTSD 0 No TSD Contains information about the previous Thermal Shutdown situation\n1 TSD\nRemark:  Bit 7 is reserved.\nRevision ID register\nThe Revision ID register is located at address 0x05 and can be read out to check the revision ID of the silicon and by the\nfirmwire of the host controller to determine the part number of the transceiver\nTable 22. REVISION ID REGISTER\nRevision ID Register (RevID)\nAddress Bit 7 Bit 6 Bit 5 Bit 4 Bit 3 Bit 2 Bit 1 Bit 0\n0x05 Access R R R R R R R R\nReset X X X 0 1 1 0 1\nData Revision Part Number\nTable 23. REVISION ID REGISTER PARAMETERS\nParameter Value Value Description Info\nRevision Silicon revision ID\nPart Number 01101 NCN5121 Transceiver Part Number\nNCN5121\nwww. onsemi.com\n57PACKAGE THERMAL CHARACTERISTICS\nThe NCN5121 is available in a QFN40 package. For cooling optimizations, the QFN40 has an exposed thermal pad which\nhas to be soldered to the PCB ground plane. The ground plane needs thermal vias to conduct the heat to the bottom layer.\nFigure 58 gives an example of good heat transfer. The exposed thermal pad is soldered directly on the top ground layer (left\npicture of Figure 58). It‘s advised to make the top ground layer as large as possible (see arrows Figure 58). To improve the heat\ntransfer even more, the exposed thermal pad is connected to a bottom ground layer by using thermal vias (see right picture of\nFigure 58). It‘s advised to make this bottom ground layer as large as possible and with as less as possible interruptions.\nFor precise thermal cooling calculations the major thermal resistances of the device are given (T able 4). The thermal media\nto which the power of the devices has to be given are:−Static environmental air (via the case)\n−PCB board copper area (via the exposed pad)\nThe major thermal resistances of the device are the Rth from the junction to the ambient (Rth\nja) and the overall Rth from\nthe junction to exposed pad (Rth jp). In Table 4 one can find the values for the Rth ja and Rth jp, simulated according to JESD −51.\nThe Rth ja for 2S2P is simulated conform JEDEC JESD −51 as follows:\n−A 4−layer printed circuit board with inner power planes and outer (top and bottom) signal layers is used\n−Board thickness is 1.46 mm (FR4 PCB material)\n−The 2 signal layers: 70 /C0109m thick copper with an area of 5500 mm2 copper and 20% conductivity\n−The 2 power internal planes: 36 /C0109m thick copper with an area of 5500 mm2 copper and 90% conductivity\nThe Rth ja for 1S0P is simulated conform to JEDEC JESD −51 as follows:\n−A 1−layer printed circuit board with only 1 layer\n−Board thickness is 1.46 mm (FR4 PCB material)\n−The layer has a thickness of 70 /C0109m copper with an area of 5500 mm2 copper and 20% conductivity\nFigure 58. PCB Ground Plane Layout Condition (Left Picture Displays the Top Ground Layer, Right Picture\nDisplays the Bottom Ground Layer)\nORDERING INFORMATION\nDevice Number Temperature Range Package Shipping†\nNCN5121MNG −40°C to 105 °C QFN−40\n(Pb−Free)50 Units / Tube\n100 Tubes / Box\nNCN5121MNTWG −40°C to 105 °C QFN−40\n(Pb−Free)3000 / Tape & Reel\n†For information on tape and reel specifications, including part orientation and tape sizes, please refer to our Tape and Reel Packaging\nSpecifications Brochure, BRD8011/D.\nNCN5121\nwww. onsemi.com\n58KNX and the KNX Logos are trademarks of KNX Association.\nQFN40 6x6, 0.5P\nCASE 485AU −01\nISSUE O\nDATE 01 JUL 2008\nSCALE 2:1\nSEATINGNOTE 4\nK0.15 C\n(A3)\nA\nA1\nD2\nb111 20\n21\n40E2\n40X10\n30L\nBOTTOM VIEWTOP VIEW\nSIDE VIEWD AB\nE\n0.15 C\nÉÉÉÉPIN ONE\nLOCATION\n0.10 C\n0.08 C\nC\n31\ne\nA 0.10 B C\n0.05 CNOTES:\n1. DIMENSIONING AND TOLERANCING PER\nASME Y14.5M, 1994.\n2. CONTROLLING DIMENSIONS: MILLIMETERS.3. DIMENSION b APPLIES TO PLATED\nTERMINAL AND IS MEASURED BETWEEN0.15 AND 0.30mm FROM TERMINAL TIP.\n4. COPLANARITY APPLIES TO THE EXPOSED\nPAD AS WELL AS THE TERMINALS.\nDIM MIN MAXMILLIMETERS\nA 0.80 1.00\nA1 0.00 0.05\nA3 0.20 REF\nb 0.18 0.30\nD 6.00 BSC\nD2 3.10 3.30\nE 6.00 BSC\n3.30 E2 3.10\ne 0.50 BSC\nL 0.30 0.50K401\n*This information is generic. Please refer to\ndevice data sheet for actual part marking.\nPb−Free indicator, “G” or microdot “ /C0071”,\nmay or may not be present.GENERIC\nMARKING DIAGRAM*\nXXX = Specific Device Code\nA = Assembly Location\nWL = Wafer LotYY = YearWW = Work Week\nG = Pb −Free PackageXXXXXXXX\nAWLYYWWGPLANE\nDIMENSIONS: MILLIMETERS0.50 PITCH3.32\n0.283.32\n40X0.6340X\n6.306.30\n*For additional information on our Pb −Free strategy and soldering\ndetails, please download the ON Semiconductor Soldering and\nMounting Techniques Reference Manual, SOLDERRM/D.SOLDERING FOOTPRINT*\n1L1\nDETAIL AL\nOPTIONAL\nCONSTRUCTIONSLÉÉÉÉÉÉÉÉÉ\nDETAIL BMOLD CMPD EXPOSED Cu\nOPTIONAL\nCONSTRUCTIONSDETAIL B\nDETAIL A0.20 MIN\nL1−−− 0.15\nA 0.10 B C\nA 0.10 B C\nPACKAGE\nOUTLINEMECHANICAL CASE OUTLINE\nPACKAGE DIMENSIONS\nON Semiconductor and          are trademarks of Semiconductor Components Industries, LLC dba ON Semiconductor or its subsidiari es in the United States and/or other countries.\nON Semiconductor reserves the right to make changes without further notice to any products herein. ON Semiconductor makes no wa rranty, representation or guarantee regarding\nthe suitability of its products for any particular purpose, nor does ON Semiconductor assume any liability arising out of the a pplication or use of any product or circuit, and specifically\ndisclaims any and all liability, including without limitation special, consequential or incidental damages. ON Semiconductor do es not convey any license under its patent rights nor the\nrights of others.\n98AON31154E DOCUMENT NUMBER:\nDESCRIPTION:Electronic versions are uncontrolled except when accessed directly from the Document Repository.\nPrinted  versions are uncontrolled  except  when stamped  “CONTROLLED COPY” in red.\nPAGE 1 OF 1 QFN40, 6x6,  0.5P\n© Semiconductor Components Industries, LLC, 2019 www.onsemi.com\nonsemi ,  , and other names, marks, and brands are registered and/or common law trademarks of Semiconductor Components Industries, LLC  dba “ onsemi ” or its af filiates\nand/or subsidiaries in the United States and/or other countries. onsemi  owns the rights to a number of patents, trademarks, copyrights, trade secrets, and other intellectual property.\nA listing of onsemi ’s product/patent coverage may be accessed at www.onsemi.com/site/pdf/Patent −Marking.pdf . onsemi  reserves the right to make changes at any time to any\nproducts or information herein, without notice. The information herein is provided “as −is” and onsemi  makes no warranty, representation or guarantee regarding the accuracy of the\ninformation, product features, availability, functionality, or suitability of its products for any particular purpose, nor does  onsemi  assume any liability arising out of the application or use\nof any product or circuit, and specifically disclaims any and all liability, including without limitation special, consequentia l or incidental damages. Buyer is responsible for its products\nand applications using onsemi  products, including compliance with all laws, regulations and safety requirements or standards, regardless of any support or a pplications information\nprovided by onsemi . “Typical” parameters which may be provided in onsemi  data sheets and/or specifications can and do vary in different applications and actual performance may\nvary over time. All operating parameters, including “Typicals” must be validated for each customer application by customer’s te chnical experts. onsemi  does not convey any license\nunder any of its intellectual property rights nor the rights of others. onsemi  products are not designed, intended, or authorized for use as a critical component in life support systems\nor any FDA Class 3 medical devices or medical devices with a same or similar classification in a foreign jurisdiction or any de vices intended for implantation in the human body. Should\nBuyer purchase or use onsemi  products for any such unintended or unauthorized application, Buyer shall indemnify and hold onsemi  and its of ficers, employees, subsidiaries, affiliates,\nand distributors harmless against all claims, costs, damages, and expenses, and reasonable attorney fees arising out of, direct ly or indirectly, any claim of personal injury or death\nassociated with such unintended or unauthorized use, even if such claim alleges that onsemi  was negligent regarding the design or manufacture of the part. onsemi  is an Equal\nOpportunity/Affirmative Action Employer. This literature is subject to all applicable copyright laws and is not for resale in a ny manner.\nPUBLICATION ORDERING INFORMATION\nTECHNICAL SUPPORT\nNorth American Technical Support:\nVoice Mail: 1 800 −282−9855 Toll Free USA/Canada\nPhone: 011 421 33 790 2910LITERATURE FULFILLMENT :\nEmail Requests to:  orderlit@onsemi.com\nonsemi Website:  www.onsemi.comEurope, Middle East and Africa Technical Support:\nPhone: 00421 33 790 2910\nFor additional information, please contact your local Sales Representative\n◊\nMouser Electronics\n  \nAuthorized Distributor\n \n  \nClick to View Pricing, Inventory, Delivery & Lifecycle Information:\n \n \n \n onsemi:   \n\xa0 NCN5121MNTWG\n'}]
!==============================================================================!
### Component Summary: NCN5121MNTWG

**Description:**
The NCN5121 is a receiver-transmitter integrated circuit (IC) designed for use in KNX twisted pair networks (KNX TP1-256). It facilitates communication between various devices such as actuators, sensors, and microcontrollers within a building automation network. The IC manages data transmission and reception on the bus, generates stabilized voltages from the unregulated bus voltage for its own power needs, and can also power external devices.

**Key Specifications:**
- **Voltage Ratings:**
  - VBUS1 (Bus Voltage): 20V to 33V
  - VDD (Digital and Analog Supply Voltage): 3.13V to 3.47V
  - VDD2 (Adjustable DC-DC Converter Output): 1.2V to 21V
  - V20V (Linear Regulator Output): 18V to 22V

- **Current Ratings:**
  - Supports bus current consumption up to 24 mA
  - Maximum output current for V20V: 12 mA (up to 18 mA depending on configuration)

- **Power Consumption:**
  - Typical bus current consumption: 2.00 mA (at VBUS = 30V, IBUS = 10 mA)
  - Maximum current consumption: 120 mA (VBUS1 pin)

- **Operating Temperature Range:**
  - -40°C to +105°C

- **Package Type:**
  - QFN-40 (6x6 mm, 0.5 mm pitch)

- **Special Features:**
  - Supports 9600 baud KNX communication speed
  - Integrated DC-DC converters (3.3V fixed and adjustable 1.2V to 21V)
  - UART and SPI interface options for host communication
  - Bus monitoring and voltage supervision features
  - Thermal shutdown and warning capabilities
  - Pb-Free and RoHS compliant

- **Moisture Sensitive Level (MSL):**
  - MSL Level 1 (JEDEC J-STD-020E)

**Typical Applications:**
The NCN5121 is primarily used in building automation systems, specifically for:
- **Power Management:** It generates and regulates power for connected devices.
- **Signal Processing:** It handles data transmission and reception over the KNX bus.
- **Device Communication:** It connects various devices in a KNX network, enabling them to communicate effectively.
- **Monitoring Systems:** It supervises bus voltage and current, ensuring reliable operation and data integrity.

This IC is ideal for applications in smart homes, commercial building automation, and any system requiring reliable communication over twisted pair networks.