[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of DAC161S997RGHR production of TEXAS INSTRUMENTS from the text:COMABASE\nOUT\nC2SCLK\nC3SDI\nC1VD\nERRLVLCSBVA\nCOMD\n40\nHART \nModulatorLDO\n4-20 mA \nLoopS P I\n80kIDAC/cd0/cc2 DAC\n16\nDAC161S997LOOP+\nLOOP-ERRB+\n-\nSDO\nNCVDInternal \nReference\nProduct\nFolder\nSample &\nBuy\nTechnical\nDocuments\nTools &\nSoftware\nSupport &\nCommunity\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nDAC161S997 16-Bit SPI-Programmable DACfor4-20mALoops\n1Features 3Description\nThe DAC161S997 isavery low power 16-bitΣΔ\n1•16-Bit Resolution\ndigital-to-analog converter (DAC) fortransmitting an•Very-Low Supply Current of100µAanalog output current over anindustry standard 4-20\n•5ppmFS/ °CGain Error mAcurrent loop. The DAC161S997 has asimple 4-\nwire SPI fordata transfer and configuration ofthe •Pin-Programmable Power-Up Condition\nDAC functions. Toreduce power and component•Loop-Error Detection andReportingcount incompact loop-powered applications, the•Programmable Output-Current Error LevelsDAC161S997 contains aninternal ultra-low power\nvoltage reference and aninternal oscillator. The low •Simple HART Modulator Interfacing\npower consumption oftheDAC161S997 results in•Highly Integrated Feature SetinSmall Footprintadditional current being available fortheremainingWQFN-16 (4-×4-mm, 0.5-mm Pitch)portion ofthe system. The loop drive ofthe\nDAC161S997 interfaces toaHighway Addressable2ApplicationsRemote Transducer (HART) modulator, allowing\ninjection ofFSK modulated digital data intothe4-20 •Two-Wire 4-to20-mA Current-Loop Transmitter\nmAcurrent loop. This combination ofspecifications•Loop-Power Transmittersandfeatures makes theDAC161S997 ideal for2-and•Industrial Process Control4-wire industrial transmitters. The DAC161S997 is\n•Actuator Control available ina16-pin 4-mm ×4-mm WQFN package\nand isspecified over the extended industrial\ntemperature range of–40°Cto+105 °C.\nDevice Information(1)\nPART NUMBER PACKAGE BODY SIZE (NOM)\nDAC161S997 WQFN (16) 4.00 mmx4.00 mm\n(1)Forallavailable packages, see theorderable addendum at\ntheendofthedatasheet.\n4Simplified Schematic\n1\nAnIMPORTANT NOTICE attheend ofthisdata sheet addresses availability, warranty, changes, useinsafety-critical applications,\nintellectual property matters andother important disclaimers. PRODUCTION DATA.\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nTable ofContents\n8.3 Feature Description ................................................... 8 1Features .................................................................. 1\n8.4 Device Functional Modes .......................................... 9 2Applications ........................................................... 1\n8.5 Programming .......................................................... 103Description ............................................................. 1\n8.6 Register Maps ......................................................... 134Simplified Schematic ............................................. 1\n9Application andImplementation ........................ 175Revision History ..................................................... 2\n9.1 Application Information ............................................ 176PinConfiguration andFunctions ......................... 39.2 Typical Application ................................................. 237Specifications ......................................................... 410Power Supply Recommendations ..................... 297.1 Absolute Maximum Ratings ...................................... 4\n11Layout ................................................................... 297.2 ESD Ratings ............................................................ 4\n11.1 Layout Guidelines ................................................. 297.3 Recommended Operating Conditions ....................... 4\n11.2 Layout Example .................................................... 297.4 Thermal Information .................................................. 4\n12Device andDocumentation Support ................. 317.5 Electrical Characteristics ........................................... 5\n12.1 Trademarks ........................................................... 317.6 Timing Requirements ............................................... 6\n12.2 Electrostatic Discharge Caution ............................ 317.7 Typical Characteristics .............................................. 7\n12.3 Glossary ................................................................ 318Detailed Description .............................................. 8\n13Mechanical, Packaging, andOrderable8.1 Overview ................................................................... 8Information ........................................................... 318.2 Functional Block Diagram ......................................... 8\n5Revision History\nChanges from Original (June 2013) toRevision A Page\n•Added ESD Ratings table, Feature Description section, Device Functional Modes, Application andImplementation\nsection, Power Supply Recommendations section, Layout section, Device andDocumentation Support section, and\nMechanical, Packaging, andOrderable Information section ................................................................................................. 1\n2 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\n1\n2\n3\n412\n11\n10\n95\n6\n7\n816\n15\n14\n13\nDAP=COMACOMA\nCOMD\nVD\nSCLKC3\nNC\nERRLVL\nOUTBASE\nVA\nC1\nC2SDI\nCSB\nSDOERRB\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\n6PinConfiguration andFunctions\nRGH Package\n16-Pin WQFN\n(Top View)\nPinFunctions\nPIN\nTYPE(1)DESCRIPTION\nNAME NO.\nBASE 16 A External NPN base drive\nCOMA 1 P Analog-block negative supply rail(local COMMON)\nCOMD 2 P Digital-block negative supply rail(local COMMON)\nCSB 6 I SPIchip select\nC1 14 A External capacitor\nC2 13 A External capacitor, HART input\nC3 12 A External capacitor\nEERB 7 O Error flagoutput, open drain, active LOW\nERRLVL 10 I Sets output-current level atpower upandunder-error conditions.\nNC 11 – Donotconnect tothispin.\nOUT 9 A Loop output current source output\nSCLK 4 I SPIclock input\nSDI 5 I SPIdata input\nSDO 8 O SPIdata output\nVA 15 P Analog-block positive supply rail\nVD 3 P Digital-block positive supply rail.\nDAP DAP P Dieattach pad. Connect directly tolocal COMMON (COMA, COMD).\n(1) G=Ground, I=Digital Input, O=Digital Output, P=Power, A=Analog\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 3\nProduct Folder Links: DAC161S997\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\n7Specifications\n7.1 Absolute Maximum Ratings(1)\nMIN MAX UNIT\nSupply voltage (VA, VDtoCOMA, COMD) –0.3 6 V\nVoltage between anytwopins(2)6 V\nCurrent INorOUT ofanypin—except OUT pin(3)5 mA\nOutput current atOUT 50 mA\nJunction Temperature 150 °C\nOperating Temperature –40 105 °C\nStorage temperature, Tstg –65 150 °C\n(1) Stresses beyond those listed under Absolute Maximum Ratings may cause permanent damage tothedevice. These arestress ratings\nonly, andfunctional operation ofthedevice atthese oranyother conditions beyond those indicated under Recommended Operating\nConditions isnotimplied. Exposure toabsolute-maximum-rated conditions forextended periods may affect device reliability.\n(2) Allvoltages aremeasured with respect toCOMA =COMD =0V,unless otherwise specified.\n(3) When theinput voltage (VIN) atanypinexceeds power supplies (VIN <COMA orVIN>VA), thecurrent atthatpinmust notexceed 5\nmA, andthevoltage (VIN) atthatpinrelative toanyother pinmust notexceed 6V.See forPinDescriptions foradditional details of\ninput structures.\n7.2 ESD Ratings\nVALUE UNIT\nV(ESD) Electrostatic discharge Human-body model (HBM), perANSI/ESDA/JEDEC JS-001(1)(2)2000 V\n(1) JEDEC document JEP155 states that500-V HBM allows safe manufacturing with astandard ESD control process.\n(2) TheHuman Body Model (HBM) isa100pFcapacitor charged tothespecified voltage then discharged through a1.5kΩresistor into\neach pin.\n7.3 Recommended Operating Conditions\nMIN MAX UNIT\nBASE load toCOMA 0 15 pF\n(COMA -COMD) 0 V\nOUT load toCOMA none\n(VA-VD) 0 V\nVA,VDD Supply voltage 2.7 3.6 V\nTA Temperature –40 105 °C\n7.4 Thermal Information\nDAC161S997\nWQFN UNIT\n16PINS\nRθJA Package thermal impedance(1)35 °C/W\n(1) Thepackage thermal impedance iscalculated inaccordance with JESD 51-7.\n4 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\n7.5 Electrical Characteristics\nUnless otherwise noted, these specifications apply forVA=VD=3.3V,COMA =COMD =0V,TA=25°C,external bipolar\ntransistor: 2N3904, RE=22Ω,C1=C2=C3=2.2nF.\nPARAMETER TEST CONDITIONS MIN(1)TYP MAX(1)UNIT\nPOWER SUPPLY\nVA,VD Supply voltage VA=VD 2.7 3.6 V\n-40°C≤TA≤105°C\nVAsupply current DACCODE =0x0200(2)43 µA\nVDsupply current 57 µA\nICC Total supply current 100 125 µA\nDCACCURACY\nN Resolution 16 bits\nINL Integral non-linearity(3)0x2AAA <DACCODE <0xD555 –1.5 2.6 µA\n(4mA<ILOOP <20mA)\nDNL Differential non-linearity see(4)–0.2 0.2 µA\nTUE Total unadjusted error 0x2AAA <DACCODE <0xD555 0.01 %FS\nOE Offset error see(5)–7.86 0.84 7.86 µA\nΔOE Offset error temperature coefficient -40°C≤TA≤105°C 0.48 ppmFS/ °C\nGE Gain error see(6)0.007 %FS\nΔGE Gain error temperature coefficient -40°C≤TA≤105°C 5 ppmFS/ °C\nIERRL LOW ERROR current ERR_LOW =default 3.36 3.375 3.39 mA\nIERRH HIGH ERROR current ERR_HIGH =default 21.70 21.75 21.82 mA\nLTD Long term drift—mean shift of12 90 ppmFS\nmAoutput current after 1000 hours\nat150°C\nLOOP CURRENT OUTPUT (OUT)\nIOUTMIN Minimum output current Tested atDACCODE =0x01C2(7)0.19 mA\nIOUTMAX Maximum output current Tested atDACCODE =0xFFFF 23.95 mA\nROUT Output impedance 200 MΩ\nCOMA toOUT voltage drop IOUT=24mA 960 mV\nBASE OUTPUT\nIOUTSC BASE short circuit output current BASE forced toCOMA potential 10 mA\nDYNAMIC CHARACTERISTICS\nOutput noise density 1kHz 20 nA/rtHz\nIntegrated output noise 1Hzto1kHzband 300 nARMS\nINTERNAL TIMER\nTM Timeout period Default setting ofTIMEOUT in 100 ms\nCONFIG register\nDIGITAL INPUT CHARACTERISTICS\nIIN Digital input leakage current –10 10 µA\nVIL Input lowvoltage 0.2×VD V\nVIH Input high voltage 0.7×VD V\nCIN Input capacitance 5 pF\n(1) Limits areensured bytesting, design, orstatistical analysis at25°C.Limits over theoperating temperature range areensured through\ncorrelations using statistical quality control (SQC) method.\n(2) Atcode 0x0200 theBASE current isminimal, forexample, device current contribution topower consumption isminimized. SPIis\ninactive, forexample, after transmitting code 0x200 totheDAC161S997, there arenomore transitions inthechannel during thesupply\ncurrent measurement.\n(3) INLismeasured using thebest-fit method intheoutput current range of4mAto20mA.\n(4) Specified bydesign.\n(5) Offset isthey-intercept ofthestraight linedefined by4mAand20mApoints ofthemeasured transfer characteristic.\n(6) Gain Error isthedifference inslope ofthestraight linedefined bymeasured 4mAand20mApoints oftransfer characteristic, andthat\noftheideal characteristic.\n(7) This must betreated astheminimum LOOP current ensured inself-powered mode.\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 5\nProduct Folder Links: DAC161S997\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nElectrical Characteristics (continued)\nUnless otherwise noted, these specifications apply forVA=VD=3.3V,COMA =COMD =0V,TA=25°C,external bipolar\ntransistor: 2N3904, RE=22Ω,C1=C2=C3=2.2nF.\nPARAMETER TEST CONDITIONS MIN(1)TYP MAX(1)UNIT\nDIGITAL OUTPUT CHARACTERISTICS\nVOL Output Low voltage Isink=200μA 0.4 V\nVOH Output HIGH voltage Isink=200μA 2.6 V\nIOZH,IOZL TRI-STATE leakage current –10 10 µA\nCOUT TRI-STATE output capacitance 5 pF\n7.6 Timing Requirements\nMIN NOM MAX UNIT\nfCLK SCLK frequency 0 10 MHz\ntH SCLK high time 0.4/FCLK 50 ns\ntL SCLK lowtime 0.4/FCLK 50 ns\ntCSB CSB pulse width 5 40 ns\ntCSS CSB set-up time prior toSCLK rising edge 5 ns\ntSCH 24th rising edge ofSCLK toCSB rising edge 15 ns\ntCSH CSB hold time after the24th falling edge ofSCLK 6 10 ns\ntZSDO CSB falling edge toSDO valid 10 35 ns\ntSDOZ CSB rising edge toSDO HiZ 10 ns\ntDS SDIdata set-up time prior toSCLK rising edge 10 ns\ntDH SDIdata hold time after SCLK rising edge 6 10 ns\ntDO SDO output data valid 30 ns\nFigure 1.SPITiming Diagrams\n6 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\n1 10 100 1k 10k 100k 1M020406080100120PSRR (dB)\nFREQUENCY (Hz)C1=C2=C3=1nF\nC1=C2=C3=2.2nF\nC1=C2=C3=10nF\nC1=C2=C3=100nF\n1 10 100 1k 10k 100k 1M020406080100120PSRR (dB)\nFREQUENCY (Hz)C1=C2=C3=1nF\nC1=C2=C3=2.2nF\nC1=C2=C3=10nF\nC1=C2=C3=100nF\n1 10 100 1k 10k 100k1101001k10k100k1MSETTLING TIME ( /c1ds)\nINPUT CODE STEP (lsb)C1=C2=C3=2.2nF\nHART Adaptation\nC1=C2=C3=1nF\n-40 -20 0 20 40 60 80 100 120-2.5-2.0-1.5-1.0-0.50.00.51.01.52.02.5INL (/c1dA)\nTEMPERATURE (°C)Min INL\nMax INL\n0 4 8 12 16 20 240123456OUTPUT CURRENT RIPPLE /c1dA(rms)\nOUTPUT CURRENT (mA)Integration BW=1kHz\nIntegration BW=10kHz\n1 10 100 1k 10k 100k-80-70-60-50-40-30-20-100MAGNITUDE RESPONSE (dB)\nFREQUENCY (Hz)C1=C2=C3=2.2nF\nHART Adaptation\nC1=C2=C3=1nF\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\n7.7 Typical Characteristics\nUnless otherwise noted, data presented here was collected under these conditions VA=VD=3.3V,TA=25°C,external\nbipolar transistor: 2N3904, RE=22Ω,C1=C2=C3=2.2nF.\nFigure 2.Intergrated Noise vsILOOP Figure 3.ΣΔModulator Filter Response\nFigure 4.Settling Time vsInput Step Size Figure 5.Output Linearity vsTemperature\nFigure 6.PSRR: ILOOP =4mA Figure 7.PSRR: ILOOP =20mA\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 7\nProduct Folder Links: DAC161S997\nCOMABASE\nOUT\nC2SCLK\nC3SDI\nC1VD\nERRLVLCSBVA\nCOMD\n40µCSensor\nSPIIN\nHART ModulatorLDOIndustrial 4-20mA Transmitter\n0-24 mA Loop\n+\n-LOOP \nSUPPLY\nLOOP \nRECEIVERS P I\n80kIDAC/cd0/cc2 DAC\n16\nDAC161S997LOOP+\nLOOP-ERRB+\n-\nINTSDO\nNCVDInternal \nReference\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\n8Detailed Description\n8.1 Overview\nThe DAC161S997 isa16-bit DAC realized asa∑Δmodulator. The DAC ’soutput isacurrent pulse train thatis\nfiltered bytheon-board lowpass RCfilter. The final output current isamultiplied copy ofthefiltered modulator\noutput. This architecture ensures anexcellent linearity performance, while minimizing power consumption ofthe\ndevice.\nThe DAC161S997 eases thedesign ofrobust, precise, long-term stable industrial systems byintegrating all\nprecision elements on-chip. Only afewexternal components areneeded torealize alow-power, high-precision\nindustrial 4-20mAtransmitter.\nIncase ofafault, orduring initial power-up theDAC161S997 willoutput current ineither upper orlower error\ncurrent band. The choice ofband isuser selectable viaadevice pin. The error current value isuser\nprogrammable viaSPI.\n8.2 Functional Block Diagram\n8.3 Feature Description\n8.3.1 Error Detection And Reporting\nBydefault, theDAC161S997 detects andreports several types oferrors.\n8.3.1.1 Loop Error\nAloop error occurs when thedevice isunable tosustain therequired output current atOUT pin,typically caused\nbyadrop inloop supply, oranincrease inload impedance.\nWhen aloop error occurs, theDAC161S997 changes theOUT-pin current tothevalue intheERROR_LOW\nregister, unless theMASK_LOOP_ERR issetto1.IftheMASK_LOOP_ERR isnotset, then thedevice also\nperiodically attempts toreassert theOUT current setinDACCODE bydefault. IftheDACCODE-current output is\nset, theDAC161S997 then stops reporting aloop error. The interval between reasserts iscontrolled bythe\nL_RETRY_TIME field intheERROR_CONFIG register. IftheDIS_RETRY_LOOP field intheERROR_CONFIG\nregister ischanged to1,thedevice does notperiodically check theloop and, instead, only checks theloop after\naread oftheERR_STATUS (0x09) register. Iftheloop error isnotresolved, then theloop-error current persists.\n8 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nFeature Description (continued)\nWhen aloop error occurs, theDAC161S997 sets theCURR_LOOP_STATUS andLOOP_STATUS fields inthe\nSTATUS register to1.The LOOP_STATUS field remains setto1until theSTATUS register isread orthedevice\nisreset. Iftheloop error iscleared, either bythedevice reasserting theloop current orbychanging theOUT\ncurrent ,then theCURR_LOOP_STATUS field clears.\n8.3.1.2 SPITimeout Error (Channel Error)\nThe DAC161S997 expects toreceive periodic SPI write commands toensure that theSPI connection is\nfunctioning normally. IfnoSPIwrite command occurs within thetime indicated bytheSPI_TIMEOUT field inthe\nERROR_CONFIG register, thedevice reports aSPI timeout error. Note that theSPI write command must be\nproperly formatted toavoid SPITimeout errors (such asawrite command thatgenerates aframe error does not\nprevent animminent SPITimeout error).\nSPITimeout error reporting isinhibited byMASK_SPI_TOUT. SPITimeout errors arenotreported ontheloop if\nMASK_SPI_ERR issetto1.\nNote that awrite command toaddress 0isnotconsidered avalid write command and willnotprevent aSPI\nTimeout error.\n8.3.1.3 Frame Error\nIfaSPIwrite command hasanincorrect number ofSCLK pulses, thedevice reports aframe error. The number\nofSCLK pulses must beaninteger andamultiple of24.Aframe error isalways reported byERRB being pulled\nlow. Aframe error does notaffect theloop current.\n8.3.1.4 Alarm Current\nBydefault, theDAC161S997 reports faults totheplant controller byforcing theOUT current intooneoftwoerror\nbands. The error current bands aredefined aseither greater than 20mA, orless than 4mA. Loop errors are\nreported bysetting current ofERR_LOW.\nIfSPI Timeout Errors arereported ontheloop (this isthedefault; itcan bechanged bysetting theregister\nERR_CONFIG:MASK_LOOP_ERR), theerror band iscontrolled bytheERRLVL pin.When ERRLVL istiedto\ntheCOMD voltage, theERR_LOW current isthereporting current. IfERRLVL istiedtoVDthen theERR_HIGH\ncurrent isthecurrent-on pin,OUT, ifaSPItimeout error occurs.\nThe exact value oftheoutput current used toindicate fault isdictated bythecontents ofERR_HIGH and\nERR_LOW registers.\nInthecase ofaconflicting alarm-current setting (such asaloop error and SPI timeout error occurring\nsimultaneously andERRLVL istiedhigh), thecurrent-on pin,OUT, isdetermined byERR_LOW current.\n8.4 Device Functional Modes\nThe DAC161S997 reports errors in3different ways, bychanging theOUT pincurrent, pulling theERRB pinlow,\nandbyupdating theread-only register STATUS. The reporting onERRB andOUT piniscustomized bysetting\ntheERROR_CONFIG register.\nTheERRB pinconnects toaGPIO pinonthemicrocontroller tofunction asaninterrupt ifanerror occurs.\nIfaLoop error and aSPITimeout error occur simultaneously and thedevice isconfigured with conflicting error\noutput currents, theOUT pincurrent reports theLoop Error.\nSTATUS Register Loop Reporting ERRB Reporting\nFrame Error Reported inFERR_STS Notreported Always reported\nReported bydefault unless Reported bydefault unlessReported inLOOP_STS andLoop Error ERR_CONFIG:MASK_LOOP_E ERR_CONFIG:DIS_LOOP_ERR_ERRBCURR_LOOP_STSRRissetto1 issetto1\nReported bydefault unless either\nERR_CONFIG:MASK_SPI_ERR Reported bydefault unless\nSPITimeout Error Reported inSPI_TIMEOUT_ERR or ERR_CONFIG:MASK_SPI_TOUT isset\nERR_CONFIG:MASK_SPI_TOU to1\nTaresetto1\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 9\nProduct Folder Links: DAC161S997\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\n8.5 Programming\n8.5.1 Serial Interface\nThe 4-wire interface iscompatible with SPI, QSPI, and MICROWIRE, aswell asmost DSPs. See theTiming\nRequirements section fortiming information about theread and write sequences. The serial interface is\ncomprised ofCSB, SCLK, SDIs and SDO. The DAC161S997 supports both Mode 0and Mode 3oftheSPI\nprotocol.\nAbustransaction isinitiated bythefalling edge ofCSB. When CSB islow, theinput data issampled attheSDI\npinbytherising edge oftheSCLK. Theoutput data isasserted ontheSDO pinatthefalling edge ofSCLK.\nAvalid transfer requires aninteger multiple of24SCLK cycles. IfCSB israised before the24th rising edge ofthe\nSCLK, thetransfer aborts and aFrame Error isreported. IfCSB isheld lowafter the24th falling edge ofthe\nSCLK and additional SCLK edges occur, thedata continues toflow through theFIFO and outtheSDO pin.\nWhen CSB transitions high, theinternal controller decodes themost recent 24bitsthatwere received before the\nrising edge ofCSB. CSB must transition tohigh after aninteger multiple of24clock cycles, otherwise aFrame\nError isreported andthetransaction isconsidered invalid. When avalid number ofSCLK pulses occur with CSB\nlow, theDAC then performs therequested operation after CSB transitions high.\nFigure 8.SPIData Format\nThe acquired data isshifted intoaninternal 24-bit shift register (MSB first) which isconfigured asa24-bit deep\nFIFO. Asthedata isbeing shifted into theFIFO viatheSDI pin, theprior contents oftheregister arebeing\nshifted outthrough theSDO output. While CSB ishigh, SDO isinahigh Z-state. Atthefalling edge ofCSB, SDO\npresents theMSB ofthedata present intheshift register. SDO isupdated onevery subsequent falling edge of\nSCLK.\nNOTE\nThe firstSDO transition willhappen onthefirstfalling edge AFTER thefirstrising edge of\nSCLK when CSB islow.\nThe 24bitsofdata contained intheFIFO areinterpreted asan8-bit COMMAND word followed by16-bits of\nDATA. The general format ofthe24-bit data stream isshown inFigure 9.Complete instruction setistabulated in\ntheDetailed Description section.\nFigure 9.SPICommand andData Words\n10 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nProgramming (continued)\n8.5.1.1 SPIWrite\nSPIwrite operation isused tochange thestate ofthedevice. Handshaking does notoccur between themaster\nand theslave (DAC161S997), and themaster must control thecommunication onthefollowing inputs: SCLK,\nCSB, SDI. Theformat ofthedata transfer isdescribed intheSerial Interface section.\nAwrite iscomposed oftwosections, 8-bits corresponding toacommand and 16-bits ofdata. Acommand is\nsimply theaddress ofthedesired register toupdate. Note that some registers areread-only; awrite tothese\nregisters willhave noeffect onthedevice operation and theregister contents willnotchange. The user\ninstruction setisshown intheDetailed Description section.\nDuring power upordevice reset, theregister contents ofallwritable registers aresettothelisted values inthe\nDetailed Description section.\nIftheDAC161S997 isused inahighly noisy environment inwhich SPI errors arepotentially anissue, the\nDAC161S997 supports amore robust protocol (see Optional Protected SPIWrites ).\n8.5.1.2 SPIRead\nThe read operation requires all4wires oftheSPIinterface, which areSCLK, SCB, SDI, andSDO. The simplest\nREAD operation occurs automatically during any valid transaction ontheSPI bus because theSDO pinof\nDAC161S997 always shifts outthecontents oftheinternal FIFO. Therefore thedata being shifted intotheFIFO\nisverified byinitiating another transaction and acquiring data atSDO, allowing only fortheverification ofFIFO\ncontents.\nThe internal registers areaccessed bytheuser through aregister read command. Aregister read command is\nformed bysetting bit7ofthecommand to1(effectively ORing with 0x80) with theaddress ofthedesired register\ntoberead andsending theresulting 8bitsasthecommand (see Detailed Description ).Forexample, theregister\nread command oftheSTATUS register (address 0x05) would be0x85.\nAregister read requires two SPI transactions torecover theregister data. The first transaction shifts inthe\nregister read command; an8-bits ofcommand byte followed by16-bits ofdummy data. The register read\ncommand transfers thecontents oftheinternal register intotheFIFO. The second transaction shifts outtheFIFO\ncontents; an8-bit command byte (which isacopy ofprevious transaction) followed bytheregister data. The\nRegister Read operation isshown inFigure 10.\nFigure 10.SPIRegister Read Operation\n8.5.1.3 Optional Protected SPIWrites\nTheDAC161S997 supports anoptional SPIprotocol intended toprovide robust support against SPIwrite errors.\nWhen PROTECT_REG_WR issetto1,allregister writes require asubsequent XFER_REG command (awrite of\n0x00FF toXFER_REG[0x01]) toload thetransferred data into theregister address (see Figure 11).This\nrequirement provides protection against write errors inanelectrically noisy environment.\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 11\nProduct Folder Links: DAC161S997\nCSB\nSDI\nSDOSPI Write n Register Load\nSCLK\nAddr n Data n\nPrior Data Prior Addr8 1 2 9 24\nXFER_REG 0x00FF\nData n Addr n8 1 2 9 24NOP\nNOP 0xXXXX\n0x00FF XFER_REG8 1 2 9 24\nCSB\nSDI\nSDOSPI Write n Register Load\nSCLK\nAddr n Data n\nPrior Data Prior Addr8 1 2 9 24\nXFER_REG 0x00FF\nData n Addr n8 1 2 9 24\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nProgramming (continued)\nFigure 11.Protected SPIwrites\n8.5.1.3.1 SPIWrite Error Correction\nTominimize thechance ofaSPIwrite error, TIrecommends toappend aNOP command onto theendofevery\nregister write sequence toverify thattheXFER_REG isproperly executed, asshown inFigure 12.\nFigure 12.Protected SPIwrites with NOP command\nThe XFER_REG command combined with theautomatic SDO loopback oftheprevious SPIwrite data prevents\nloading ofincorrect data into aregister. Iftheloopback indicates acommunication error has occurred (see\nFigure 13),theCSB pinisheld lowand theprevious write command isrepeated. Although thesecond SPI\ntransaction had 48SCLK pulses instead of24pulses, thisisnotconsidered aframe error. Aframe error is\nindicated when thenumber ofSCLK pulses isnotaninteger multiple of24.\n12 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nCSB\nSDI\nSDOSPI Write n Register Load\nSCLK\nAddr n Data n\nPrior Data Prior Addr8 1 2 9 24\nXFER_REG 0x00FF\nData n Addr n8 1 2 9 24\nCommunication Error Error reported to MCUNOP\nAddr n Data n\n0x00FF? XFER_REG?8 1 2 9 24SPI Write n Register Load\nAddr n Data n\nPrior Data Prior Addr8 1 2 9 24\nXFER_REG 0x00FF\nData n Addr n8 1 2 9 24NOP\nNOP 0xXXXX\n0x00FF XFER_REG8 1 2 9 24\nCSB\nSDI\nSDOSPI Write nRegister Load /cb1 Error Detected\nSCLK\nAddr n Data n\nPrior Data Prior Addr8 1 2 9 24\nXFER_REG 0x00FF\nData n Addr n8 1 2 9 24\nCommunication Error\nError reported to MCU25 26 48\nAddr n Data n\n0X00FF XFER_REGResend Register Load\nData OK, pull CSB high to complete \noperation\nXFER_REG 0x00FF\nData n Addr n8 1 2 9 24Repeat Write n NOP\nNOP 0xXXXX\n0x00FF XFER_REG8 1 2 9 24Do Not pull CSB high\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nProgramming (continued)\nFigure 13.Detection ofError inRegister Load\nIfacommunication error occurs intheXFER_REG command, itisdetected during thetrailing NOP command\n(see Figure 14).Although theregister load isincomplete, thedevice has notchanged operations. Repeat the\noriginal data andXFER_REG command.\nFigure 14.Detection ofError inRegister Readback\n8.6 Register Maps\nUnless otherwise indicated, bitsoutside theregister fields listed below aredonotcare,and willnotchange\ndevice configuration. Register read operations onsuch donotcare fields willbe0.Registers areread/write\nunless indicated otherwise.\nTable 1.XFER_REG (Write Only)\nAddress =0x01\nBitField Field Name Description\nWhen PROTECT_REG_WR issetto1,then aXFER_REG command isnecessary to\n15:0 XFER[15:0] transfer theprevious register write data intotheappropriate address. Setthisregister\nto0x00FF toperform aXFER_REG command.\nTable 2.NOP\nAddress =0x02\nBitField Field Name Description\nNoOperation. Awrite tothisregister willnotchange anydevice configuration.\n15:0 NOP[15:0] This command indicates thattheSPIconnection isfunctioning andisused toavoid\nSPI_INACTIVE errors.\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 13\nProduct Folder Links: DAC161S997\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nTable 3.WR_MODE\nAddress =0x03; Default =0x0000\nBitField Field Name Description\n0:Register write data transfers toappropriate address immediately after CSB goes\nhigh. Default value.\n0 PROTECT_REG_WR 1:Enable protected register transfers: allregister writes require asubsequent\nXFER_REG command tofinalize theloading ofregister data. Refer toOptional\nProtected SPIWrites .\nTable 4.DACCODE\nAddress =0x04; Default =0x2400, 0xE800\nBitField Field Name Description\n16-bit natural binary word, where D15 istheMSB, which indicates thedesired DAC\noutput code.\n15:0 DACCODE[15:0]\nNote thedefault value ofthisregister isbased onthestate oftheERR_LVL pinduring\nstartup orreset.\nTable 5.ERR_CONFIG\nAddress =0x05; Default =0x0102\nBitField Field Name Description\nL_RETRY_TIME sets thetime interval between successive attempts toreassert the\ndesired DACCODE output current when aloop error ispresent. This hasnoeffect if\neither MASK_LOOP_ERR issetto1orifDIS_RETRY_LOOP issetto1.10:8 L_RETRY_TIME[2:0]\nLOOP Retry time =(L_RETRY_TIME +1)×50ms\nDefault value =1(100 ms)\n0:When aloop error isoccurring, periodically attempt tosend desired DACCODE\noutput current instead ofthesetERR_LOW current. Theinterval between attempts is\nsetbyL_RETRY_TIMER. Default value. 7 DIS_RETRY_LOOP\n1:Donotperiodically reassert DACCODE output when aloop error ispresent;\nreassert DACCODE after STATUS Register isread out.\n0:When aLOOP error isdetected theDAC161S997 outputs thecurrent indicated by\nERR_LOW instead ofDACCCODE. Default value.\n6 MASK_LOOP_ERR\n1:When aLoop Error isdetected theDAC161S997 tries tomaintain DACCODE\ncurrent onpinOUT.\n0:When aLOOP error isdetected theDAC161S997 drives ERRB pinlow.Default\nvalue. 5 DIS_LOOP_ERR_ERRB\n1:When aLOOP error isdetected theDAC161S997 does notdrive ERRB pinlow.\n0:SPItimeout errors change theOUT pincurrent toanerror value, which is\ndetermined byERRLVL pinandcontents ofERR_LOW orERR_HIGH. Note:\n4 MASK_SPI_ERR MASK_SPI_TOUT must besetto0forthistobereported. Default value.\n1:SPItimeout errors donotchange theOUT pincurrent toanerror value.\nSPI_TIMEOUT sets thetime interval forSPItimeout error reporting. After each SPI\nwrite command, aninternal timer isreset; ifnosubsequent write occurs before the\ntimer reaches SPItimeout, aSPItimeout error isreported. SPI_ERROR reporting is\ninhibited bysetting MASK_SPI_TOUT.\n3:1 SPI_TIMEOUT[2:0]ANOP write isconsidered avalid write andresets thetimer without changing the\ndevice configuration.\nSPITimeout =(SPI_TIMEOUT +1)×50ms\nSPI_TIMEOUT default value =1(100 ms)\n0:SPItimeout error reporting isenabled. ASPItimeout error drives ERRB lowwhen a\nSPITimeout error occurs. Default value. 0 MASK_SPI_TOUT\n1:SPItimeout error reporting isinhibited.\n14 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nTable 6.ERR_LOW\nAddress =0x06; Default =0x2400\nBitField Field Name Description\nUnder some error conditions theoutput current corresponding tothisvalue istheDAC\noutput, regardless ofthevalue ofDACCODE. TheERR_LOW value isused asthe\nupper byte oftheDACCODE, while thelower byte isforced to0x00.\n15:8 ERR_LOW[7:0] ERR_LOW must bebetween 0x00(0 mA) and0x80(12 mA). TheDAC161S997\nignores anyvalue outside ofthatrange andretains theprevious value intheregister.\nRefer totheError Detection And Reporting section foradditional details.\nThedefault value is0x24, which corresponds toapproximately 3.37 mAonpinOUT.\nTable 7.ERR_HIGH\nAddress =0x07; Default =0xE800\nBitField Field Name Description\nUnder some error conditions theoutput current corresponding tothisvalue istheDAC\noutput, regardless ofthevalue ofDACCODE. TheERR_HIGH value isused asthe\nupper byte oftheDACCODE, while thelower byte isforced to0x00.\n15:8 ERR_HIGH[7:0] ERR_HIGH must begreater than orequal to0x80 (12mA). TheDAC161S997 ignores\nanyvalue below 0x80 andretains theprevious value intheregister. Refer totheError\nDetection And Reporting section foradditional details.\nThedefault value is0xE8, which corresponds toapproximately 21.8 mAonpinOUT.\nTable 8.RESET\nAddress =0x08\nBitField Field Name Description\nWrite 0xC33C totheRESET register followed byaNOP toreset thedevice. All15:0 RESET[15:0]writable registers arereturned todefault values.\nTable 9.STATUS (Read-Only)\nAddress =0x09 or0x7F\nBitField Field Name Description\nDAC resolution\n7:5 DAC_RES[2:0]\nOnDAC161S997, returns a111.\nReturns thestate oftheERRLVL pin:\n4 ERRLVL_PIN 1=ERRLVL pinistiedHIGH\n0=ERRLVL pinistiedLOW\nFrame-error status sticky bit\n1=Aframe error hasoccurred since thelastSTATUS read.\n0=Noframe error occurred since thelastSTATUS read.3 FERR_STS\nThis error iscleared byreading theSTATUS register. Aframe error iscaused byan\nincorrect number ofclocks during aregister write. Aregister write without aninteger\nmultiple of24clock cycles willcause aFrame error.\nSPItime outerror\n1=TheSPIinterface hasnotreceived avalid command within theinterval setby\nSPI_TIMEOUT.\n2 SPI_TIMEOUT_ERR 0=TheSPIinterface hasreceived avalid command within theinterval setby\nSPI_TIMEOUT\nIfthiserror occurs, itiscleared with aproperly formatted write command toavalid\naddress.\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 15\nProduct Folder Links: DAC161S997\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nTable 9.STATUS (Read-Only) (continued)\nAddress =0x09 or0x7F\nBitField Field Name Description\nLoop status sticky bit\n1=Aloop error hasoccurred since lastread ofSTATUS.\n0=Noloop error hasoccurred since lastread ofSTATUS. 1 LOOP_STS\nReturns theloop error status. When thevalue inthisregister is1,theDAC161S997 is\nunable tomaintain theoutput current setbyDACCODE atsome point since thelast\nSTATUS read. This indicator clears after reading theSTATUS register.\nCurrent loop status\n1=Aloop error isoccurring.\n0 CURR_LOOP_STS 0=Noloop error isoccurring.\nReturns thecurrent Loop error status. When thevalue inthisregister is1,the\nDAC161S997 isunable tomaintain theoutput current setbyDACCODE.\n16 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nDAC- +IDACIAUX\nILOOPLOOP+\nLOOP-R1 = 80k+\n-\nID IABASE\nOUTCOMA\nR2 = 40IE\nI2\nDAC161S997VD VA\nRE\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\n9Application andImplementation\nNOTE\nInformation inthe following applications sections isnot part ofthe TIcomponent\nspecification, and TIdoes notwarrant itsaccuracy orcompleteness. TI’scustomers are\nresponsible fordetermining suitability ofcomponents fortheir purposes. Customers should\nvalidate andtesttheir design implementation toconfirm system functionality.\n9.1 Application Information\n9.1.1 16-bit DacAnd Loop Drive\n9.1.1.1 DCCharacteristics\nThe DAC converts the16-bit input code intheDACCODE registers toanequivalent current output. TheΣΔDAC\noutput isacurrent pulse which isthen filtered byathird-order RClowpass filter andboosted toproduce theloop\ncurrent (ILOOP)atthedevice OUT pin.\nFigure 15.Loop-Powered Transmitter\nFigure 15shows theprinciple ofoperation oftheDAC161S997 intheLoop-Powered Transmitter (the circuit\ndetails areomitted forclarity). InFigure 15,IDandIArepresent supply (quiescent) currents oftheinternal digital\nandanalog blocks. IAUXrepresents supply (quiescent) current ofcompanion devices present inthesystem, such\nasthevoltage regulator andthedigital interface. Because both thecontrol loop formed bytheamplifier andthe\nbipolar transistor force thevoltage across R1andR2tobeequal, under normal conditions, theILOOP isdependent\nonly onIDACthrough thefollowing relationship (see Equation 1).\nILOOP =(1+R1/R2)IDAC\nwhere\n•IDAC=ƒ(DACCODE) (1)\nAlthough ILoophasanumber ofcomponent currents, ILOOP =IDAC+ID+IA+IAUX+IE,only IEisregulated bythe\nloop tomaintain therelationship shown inEquation 1.Because only themagnitude ofIEiscontrolled, notthe\ndirection, there isalower limit toILOOP.This limit isdependent onthefixed components IAandID,andonsystem\nimplementation through IAUX.\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 17\nProduct Folder Links: DAC161S997\nDAC- +IDACIAUX\nILOOPLOOP+\nLOOP-R1 = 80k+\n-\nID IABASE\nOUTCOMA\nDAC161S997VD VA\nVLOCAL+\n-\nIE\nR2 = 40 I2RE\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nApplication Information (continued)\nFigure 16.Self-Powered Transmitter\nFigure 16shows thevariant ofthetransmitter where thelocal supply provides supply currents tothesystem\nblocks, and notthe4-20mA loop Self-Powered Transmitter. The ame basic relationship between theILOOP and\nIDACcontinues, butthecomponent currents ofILOOP areonly IDACandIE.\n9.1.1.2 DCInput-Output Transfer Function\nTheoutput current sourced bytheOUT pinofthedevice isexpressed byEquation 2.\nILOOP =24mA(DACCODE /216) (2)\nThe valid DACCODE range isthefull16-bit code space (0x0000 to0xFFFF), resulting intheIDACrange of0to\napproximately 12μA,which, however, does notresult intheILOOP range of0to24mA. The maximum output\ncurrent sourced outofOUT pin, ILOOP,is24mA. The minimum output current isdependent onthesystem\nimplementation. The minimum output current isthesum ofthesupply currents oftheDAC161S997 internal\nblocks, IA,ID,andcompanion devices present inthesystem, IAUX.The lastcomponent current, IE,istheoretically\ncontrolled down to0,however, duetothestability considerations ofthecontrol loop, notallowing theIEtodrop\nbelow 200μAisadvised.\nThe graph inFigure 17shows theDCtransfer characteristic ofthe4-20mA transmitter, including minimum\ncurrent limits. The minimum current limit fortheLoop-Powered Transmitter istypically around 400μA(ID+IA+\nIAUX+IE).The minimum current limit fortheSelf-Powered Transmitter istypically around 200μA(IE).Typical\nvalues forIDandIAarelisted intheElectrical Characteristics table. IEdepends ontheBJT device used.\n18 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nILOOP (mA)\nDACCODE (hex)\nfull accuracy range24.0\n21.5\n20.0\n4.0\n3.5\n0.4\n0.2\n00000222 2500\n2AAA\nD555\nE500\nFFFF0444Programmable I ERROR\nProgrammable I ERROR\nMIN(ILOOP) /cb1 Loop Powered\nMIN(ILOOP) /cb1 Self Powered\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nApplication Information (continued)\nFigure 17.DAC-DC Transfer Function\n9.1.1.3 Loop Interface\nThe DAC161S997 cannot directly interface tothetypical 4-20mAloop due totheexcessive loop supply\nvoltage. The loop interface hastoprovide themeans ofstepping down theLOOP Supply to3.6V. This canbe\naccomplished with either alinear regulator (LDO) orswitching regulator while keeping inmind thattheregulator ’s\nquiescent current willhave direct effect ontheminimum achievable ILOOP (see DCInput-Output Transfer\nFunction ).\nThe second component oftheloop interface istheexternal NPN transistor (BJT). This device ispart ofthe\ncontrol circuit thatregulates thetransmitter ’soutput current (ILOOP).Since theBJT operates over thewide current\nrange, spanning atleast 4-20mA, itisnecessary todegenerate theemitter inorder tostabilize transistor ’s\ntransconductance (gm).The degeneration resistor of22Ωissuggested intypical applications. Forcircuit details,\nseeFigure 21.\nThe NPN BJT should notbereplaced with anN-channel FET (Field Effect Transistor) forthefollowing reasons:\ndiscrete FET’stypically have high threshold voltages (VT), intheorder of1.5V to2V,which isbeyond theBASE\noutput maximum range; discrete FET’spresent higher load capacitance which may degrade system stability\nmargins; andBASE output relies ontheBJT’sbase current forbiasing.\n9.1.1.4 Loop Compliance\nThe maximum V(LOOP+,LOOP-) potential islimited bythechoice ofstep-down regulator, andtheexternal BJT’s\nCollector Emitter breakdown voltage. Forminimum V(LOOP+, LOOP−)potential consider TROUBLE Figure 16.\nHere, observe that V(LOOP+,LOOP −)≅min(V CE)+ILOOPRE+ILOOPR2=min(V CE)+0.53V +0.96V =3.66V, at\nILOOP =24mA. Thevoltage drop across internal R2isspecified inElectrical Characteristics .\n9.1.1.5 ACCharacteristics\nTheapproximate frequency dependent characteristics oftheloop drive circuit canbeanalyzed using thecircuit in\nFigure 18.\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 19\nProduct Folder Links: DAC161S997\nA(s) =sAo/c26o\nLOOP+\nLOOP-R1 R2+\n-A(s)Gm\nIDACIAUX- +ILOOP\nve\nILOOPA(s)Gmve\nro\nLOOP+\nLOOP-DAC161S997\nBASE\nOUTCOMARX1\nCX1CX2\nCX3\nCX4- +A(s) gm+\n-IAUX\nR1 R2REGm\nIDACro\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nApplication Information (continued)\nFigure 18.Capacitances Affecting Control Loop\nHere itisassumed thattheinternal amplifier dominates thefrequency response ofthesystem, andithasasingle\npole response. The BJT’sresponse, inthebandwidth ofthecontrol loop, isassumed tobefrequency\nindependent andischaracterized bythetransconductance gmandtheoutput resistance ro.\nAsinprevious sections IDACandIAUXrepresent thefiltered output ofthe∑Δmodulator andthequiescent current\nofthecompanion devices.\nThe circuit inFigure 18can befurther simplified byomitting theon-board capacitances, whose effect willbe\ndiscussed inStability ,andbycombining theamplifier, theexternal transistor andresistor REintooneGmblock.\nTheresulting circuit isshown inFigure 19.\nByassuming thattheBJT’soutput resistance (ro)islarge, theloop current ILOOP canbeexpressed as:\n(3)\nFigure 19.ACAnalysis Model ofaTransmitter\nThesum ofvoltage drops around thepath containing R1,R2andveis:\n(4)\nAnassumption ismade ontheresponse oftheinternal amplifier:\n(5)\n20 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nILOOP = IDAC (1 + + I AUXR1\nR2)sR2\nREAo/c26o\nR2\nREs + Ao/c26oR2\nREs + Ao/c26o\n/c26R1\nR2)\n0 dB\nAoGmR2/c26oILOOP = IDAC (1 + + I AUXR1\nR2)s\ns + AoGmR2/c26oAoGmR2/c26o\ns + AoGmR2/c26o\n20 log (1 +\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nApplication Information (continued)\nBycombining theabove thefinal expression fortheILOOP asafunction of2inputs IDACandIAUXis:\n(6)\nThe result above reveals that there are2distinct paths from theinputs IDACand IAUXtotheoutput ILOOP.IDAC\nfollows thelow-pass, andtheIAUXfollows thehigh-pass path.\nInboth cases thecorner frequency isdependent ontheeffective transconductance, Gm,oftheexternal\ntransistor. This implies thatcontrol loop dynamics could vary with theoutput current ILOOP ifGmwere allowed to\nbejustnative device transconductance gm.This undesirable behavior ismitigated bythedegenerating resistor\nREwhich stabilizes Gmasfollows:\n(7)\nThis results inthefrequency response which islargely independent oftheoutput current ILOOP:\n(8)\nWhile thebandwidth oftheIDACpath may notbeofgreat consequence given thelowfrequency nature ofthe4-\n20mAcurrent loop systems, thelocation ofthepole intheIAUXpath directly affects PSRR ofthetransmitter\ncircuit. This isfurther discussed inPSRR .\n9.1.1.5.1 Step Response\nThe transient input-output characteristics oftheDAC161S997 aredominated bytheresponse oftheRCfilter at\ntheoutput ofthe∑ΔDAC. Settling times duetostep input areshown inTypical Characteristics .\n9.1.1.5.2 Output Impedance\nTheoutput impedance isdescribed as:\n(9)\nByconsidering thecircuit inFigure 19,andsetting IDAC=IAUX=0,thefollowing expression canbeobtained:\n(10)\nAsinACCharacteristics anassumption canbemade onthefrequency response oftheinternal amplifier, and\ntheeffective transconductance Gmshould bestabilized with external REleading to:\n(11)\nTheoutput impedance ofthetransmitter isaproduct oftheexternal BJT\'s output resistance ro,andthefrequency\ncharacteristics oftheinternal amplifier. Atlow frequencies this results inalarge impedance that does not\nsignificantly affect theoutput current accuracy.\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 21\nProduct Folder Links: DAC161S997\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nApplication Information (continued)\n9.1.1.5.3 PSRR\nPower Supply Rejection Ratio isdefined astheability ofthecurrent control loop toreject thevariations inthe\nsupply current ofthecompanion devices, IAUX.Specifically:\n(12)\nItwas shown inACCharacteristics that theIAUXaffects ILOOP viathehigh-pass path whose corner frequency is\ndependent ontheeffective Gmoftheexternal BJT. Ifthatdependence were notmitigated with thedegenerating\nresistor RE,thePSRR would bedegraded atlowoutput current ILOOP.\nThetypical PSRR performance ofthetransmitter shown inFigure 6isshown inTypical Characteristics .\n9.1.1.5.4 Stability\nThe current control loop\'s stability isaffected bytheimpedances present inthesystem. Figure 18shows the\nsimplified diagram ofthecontrol loop, formed bytheon-board amplifier and anexternal BJT, and thelumped\ncapacitances CX1through CX4thatmodel anyother external elements.\nCX1typically represents alocal step-down regulator, orLDO, andanyother companion devices powered from the\nLOOP+. This capacitance reduces thestability margins ofthecontrol loop, and therefore itshould belimited.\nRX1 canbeused toisolate CX1from LOOP+ node andthus remedy thestability margin reduction. IfRX1=0,CX1\ncannot exceed 10nF.RX1=200Ωisrecommended ifitcanbetolerated. Minimum RX1=40ΩifCX1exceeds 10\nnF.\nCX3also adversely affects stability oftheloop anditmust belimited to20pF.CX4affects thecontrol loop inthe\nsame way asCX1,and itshould betreated inthesame way asCX1.CX2istheonly capacitance that improves\nstability margins ofthecontrol loop. Itsmaximum size islimited only bythesafety requirements.\nStability isafunction ofILOOP aswell. Since ILOOP isapproximately equal tothecollector current oftheexternal\nBJT, GmoftheBJT, and thus loop dynamics, depend onILOOP.This dependence can bereduced by\ndegenerating theemitter oftheBJT with asmall resistance asdiscussed inLoop Interface .Inductance inseries\nwith theLOOP+ andLOOP−donotsignificantly affect thecontrol loop.\n9.1.1.5.5 Noise andRipple\nTheoutput oftheDAC isacurrent pulse train. Thetransition density varies throughout theDAC input code range\n(ILOOP range). Attheextremes ofthecode range, thetransition density isthelowest which results inlow\nfrequency components oftheDAC output passing through theRCfilter. Hence, themagnitude oftheripple\npresent inILOOP isthe highest atthe ends ofthe transfer characteristic ofthe device (see Typical\nCharacteristics ).\nItshould benoted that atwide noise measurement bandwidth, itistheripple due tothe∑Δmodulator that\ndominates thenoise performance ofthedevice throughout theentire code range oftheDAC. This results inthe\n“U”shaped noise characteristic asafunction ofoutput current. Atnarrow bandwidths, and particularly atmid-\nscale output currents, itistheamplifier driving theexternal BJT thatstarts todominate asanoise source.\n9.1.1.5.6 Digital Feedthrough\nDigital feedthrough isindiscernible from theripple induced bythe∑Δmodulator.\n9.1.1.5.7 HART Signal Injection\nTheHART specification requires minimum suppression ofthesensor signal intheHART signal band (1-2 kHz) of\nabout 60dB.Thefilter inFigure 20below meets thatrequirement.\n22 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nVA VD\nCOMA COMDERRB\nC3BASEIN OUT\nGNDLM2936-3.3\n22µ\n22100n 100n 20100\n100n 3.3µ\n2.2n 2.2n 2.2nDAC161S9971µ 100nLOOP+\nLOOP-PZT3904\nINTµCMSP430G2553_PW_2\nCSBSDOSDISCLK\nC2C1OUTSPI\nIDAC\nILOOPLOOP+\nLOOP-80k 4015k 15k 15k\n390n 6.8n 220n 1n\nVHART15 mV\n1 mA\n500 mVVH\nVHDAC161S997\nC1 C2 C3BASE\nOUTCOMAvirtual ground\n500 nAIHART\nRE\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nApplication Information (continued)\nFigure 20.HART Signal Injection\n9.1.1.5.8 RCFilter Limitation\nInaneffort tospeed upthetransient response ofthedevice theuser canreduce thecapacitances associated\nwith thelow-pass filter attheoutput ofthe∑Δmodulator. However, tomaintain stability margins ofthecurrent\ncontrol loop itisnecessary tohave atleast C1=C2=C3=1nF.\n9.2 Typical Application\nFigure 21.Typical Application Schematic\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 23\nProduct Folder Links: DAC161S997\nDAC\n- +IDACIAUX\nILOOPLOOP+\nLOOP-R1= 80k+\n-\nID IABASE\nOUTCOMA\nR2= 40IE\nI2\nDAC161S997VD VA\nRE\n24\nLOOP DAC D A E 16DAC _ CODEI I I I I 24 mA\n2/c233 /c249/c61 /c43 /c43 /c43 /c61 /c180/c234 /c250/c235 /c251\nwhere\n• I DAC= f(DAC_CODE),\n• I Dand I Arepresent the supply currents of internal digital and analog blocks,\n• I AUXrepresents the supply current of companion devices present in the system,\n• I Eis the only component which is regulated by the control loop to ensure that the actual loop current\ncorresponds to the DAC input code applied by the MCU.\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nTypical Application (continued)\n9.2.1 Design Requirements\nThe objective oftheexample below istofocus onthedesign ofarobust, low-power, precise, long- term stable,\n2-wire, loop-powered, 4-to20-mA current-output temperature transmitter bymaking best use ofsignal chain,\npower and computing solutions. This design uses aRTD-temperature sensor with a4-to20-mA current-loop\ntransmitter.\n9.2.2 Detailed Design Procedure\nThe DAC161S997output isacurrent pulse which isthen filtered byathird-order RClow-pass filter andboosted\ntoproduce theloop current (ILOOP)atthedevice OUT pin. Figure 22shows theprinciple ofoperation ofthe\nDAC161S997 intheloop-powered transmitter. The ILOOP has anumber ofcomponent currents asgiven in\nEquation 13.\n(13)\nFigure 22.Loop Powered Transmitter\n9.2.2.1 Reasons forChoosing a3.9-V Zener Diode\nThefirstandmost important requirement fortheproper functioning oftheentire circuitry isastable power supply.\nAgood design ensures thattheLDO gets thesufficient input voltage (VIN_LDO )togenerate astable 3.3Vunder\nminimum-loop, power-supply voltage andminimum-loop current conditions.\nVIN_LDO (MIN REQUIRED at3.3mA)=VCC+VDO(MIN) =3.3V+0.1V=3.4V (14)\nFrom thecircuit implementation, itisevident that theLDO input voltage VIN_LDO isfunction ofloop current and\ncollector-emitter drop (VCE)ofthebipolar junction transistor (BJT). Apply Kirchhoff ’sVoltage Law (KVL) inthe\ninner loop:\nV(IN_LDO) =[(RC×ILOOP)+VZENER +VCE+(RE×ILOOP) ] (15)\nAtminimum loop power supply voltage, BJT operation ispushed towards saturation, which means that VCEis\napproximately 0V(minimum). Due tothestability considerations ofthecurrent control loop, theminimum output\ncurrent (ILOOP(MIN) )below 200μAisnotadvised asshown inFigure 23.\nV(IN_LDO) (atminimum VSUPPLY &minimum ILOOP)=[(RC×ILOOP(MIN) )+VZENER +VCE(MIN) +(RE×ILOOP(MIN) )] (16)\n24 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nTypical Application (continued)\nToensure stable 3.3-V LDO output under these conditions, thefollowing relation must befulfilled.\nV(IN_LDO) (atminimum VSUPPLY &minimum ILOOP )>VIN_LDO (MIN REQUIRED at3.3mA) (17)\n[(100Ω×200μA)+VZENER +0V+(20ΩX200μA)]>3.4V\n[VZENER +0.024 V]>3.4V\nFrom Equation 17,itisclear that without having azener diode, avoltage greater than 3.4Vattheinput ofthe\nLDO cannot beensured. Therefore, choose azener diode having azener voltage (VZENER )greater than 3.4V\nandable tohandle power dissipation, PDZ=VZENER ×ILOOP(MAX) .Inthisapplication, thedesign uses a3.9-V, 500-\nmW zener diode.\nFigure 23.DAC DCTransfer Function\n9.2.2.2 Loop Compliance Voltage\nTocalculate theminimum-loop, compliance-voltage (loop-power supply voltage), addallvoltage drops intheloop\natthemaximum-expected loop current.\nFrom acurrent control loop stability point ofview, VCE(MIN) must stay greater than maximum VCE(SAT) :\nVCE(MIN) >0.2V (18)\nApplying Kirchhoff ’sVoltage Law intheouter loop, tofindouttheVCE(MIN) :\nVCE(MIN) =VSUPPLY(MIN) –(2×VWIRE)-(2×VF)-VRC(MAX) -VZENER -VRE(MAX) –VSENSE(MAX) –VLOAD(MAX)\nwhere\n•2×VWIRE isvoltage drop across system wiring. Ifsystem wiring runs over alength (L)along oneway, wire\nresistance perunitlength isρandcurrent intheloop isILOOP,then thevoltage drop foroneconductor canbegiven\nas:\n•VWIRE(MAX) =ρ×L×ILOOP(MAX)\n•Forexample, a24-AWG wire hasresistance perunitlength (ρ)of0.026Ω/ftor0.0755Ω/m.\n•VLOAD isthevoltage drop caused bytheinternal resistance oftheloop receiver. Theinternal resistance oftheloop\nreceiver may vary from 50Ωto250Ω.\n•VLOAD(MAX) =RLOAD ×ILOOP(MAX)\n•VSENSE isthevoltage drop across 40-Ωsense resistor internal totheDAC.\n•VFistheforward-voltage drop across thereverse polarity protection diode.\n•VF=0.7Vat30mAforward current (from TVS data sheet, SM6T39CA Data Sheet, SM6T39CA ). (19)\nRewriting Equation 19,\nVSUPPLY(MIN) >0.2V+(2xρxLxILOOP(MAX) )+(2x0.7V)+(100ΩxILOOP(MAX) )+3.9V+(20ΩxILOOP(MAX) )+(40Ωx\nILOOP(MAX) )+(RLOAD xILOOP(MAX) )+(40ΩxILOOP(MAX) )+(R LOAD xILOOP(MAX) ) (20)\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 25\nProduct Folder Links: DAC161S997\nFailure\nInformationFailure\nInformationExtended Working Range 3.8 to 20.5mA\n(Measurement is still valid)Normal Range 4 to 20mA\n(Measurement is valid)\nLoop Current\nin mA\n0.00mA3.60mA3.80mA4.00mA\n20.0mA\n20.5mA\n21.0mA\nTPS7A1601\nRELoop\n+\nLoop-BASE\nCOMA\n40RWIRE\nRWIRE+\n±\nRLOAD\nLoop\nReceiverILOOP\nILOOPDAC161S997Length (L)+\n- VIN_LDO\n+\n--\n+- +\n+ -- +\n+ -VF\nVFVWIRE\nVWIREVLOAD\nVSENSE\nILOOPAVDDEN\nGNDVCC =\n3.3V\nOUTLoop Power\nSupplyVSUPPLY+\n-VCE\n+\n-VRERC\n+\n-VRC+\n-\nVZENER\n+\n-VXMTR\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nTypical Application (continued)\nThe maximum output current that can besourced outoftheOUT pinbyDAC161S997, ILOOP (MAX) ,is\napproximately 24mA.\nFigure 24.Series Voltage Drops inCurrent Loop System\nFigure 25.Specification forLoop Current Output\nNext, examine what NAMUR NE43 hastosayabout loop current. NAMUR NE43 isaninternational association\nofprocess instrumentation user companies that have worked onimproving thediagnostic coverage in4-to20-\nmAanalog output transmitters toaddress associated safety issues. NAMUR NE43 provides theguideline for\nsignaling-failure information tothesafety-interlock systems over a4-to20-mA loop. NAMUR NE43 recommends\nusing 3.8mAto20.5 mAasanextended measurement information range. NAMUR NE43 recommends using\nloop current below 3.6mAorabove 21mAisinthediagnostic failure information range. Choose ILOOP(MAX) =24\nmA, depending upon DAC capability and also tocomply with theNAMUR NE43 recommendation asshown in\nFigure 26.\nFigure 26.NAMUR NE43 Recommendation\n26 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\n10.6V\n11.8V\n13.0V\n14.2V\n15.4V11.1V\n12.3V\n13.5V\n14.7V\n15.9V2 X 150m\n11.8V\n13.0V\n14.2V\n15.4V\n16.6V2 X 350m\n12.4V\n13.6V\n14.8V\n16.0V\n17.2V2 X 500m\n13.1V\n14.3V\n15.5V\n16.7V\n17.9V2 X 700mSystem Wiring\nLength (in m)\nVSUPPLYVSUPPLY2 X 15m\n50Ÿ\n100Ÿ\n150Ÿ\n200Ÿ\n250ŸRLOAD\n10.6V\n11.8V\n13.0V\n14.2V\n15.4V11.2V\n12.4V\n13.6V\n14.8V\n16.0V2 X 500ft\n11.8V\n13.0V\n14.2V\n15.4V\n16.6V2 X 1000ft\n12.4V\n13.6V\n14.8V\n16.0V\n17.2V2 X 1500ft\n13.1V\n14.3V\n15.5V\n16.7V\n17.9V2 X 2000ftSystem Wiring\nLength (in ft)\nVSUPPLYVSUPPLY2 X 50ft\n50Ÿ\n100Ÿ\n150Ÿ\n200Ÿ\n250ŸRLOAD\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\nTypical Application (continued)\nRewriting Equation 20,\nVSUPPLY(MIN) >0.2V+(2xρxLx24mA) +(2x0.7V)+(100Ωx24mA) +3.9V+(20Ωx24mA) +(40Ωx24mA)\n+(RLOAD x24mA) +(40Ωx24mA) +(RLOAD x24mA) (21)\nVSUPPLY(MIN) >2×0.026Ω/ftxLx24mA) +(RLOAD ×24mA) +9.34 V (22)\nFigure 27and Figure 28give theloop supply voltages calculated using Equation 22atdifferent receiver load\nresistances andsystem wiring lengths.\nFigure 27.Loop Power Supply Voltage forDifferent Loads andSystem Wiring Length inFeet\nFigure 28.Loop Power Supply Voltage forDifferent Loads andSystem Wiring Length inMeter\nHowever, themaximum loop compliance voltage must notexceed theabsolute maximum voltage rating ofany\ndevice used intheloop. Therefore, select thedevice inorder tomeet themaximum loop compliance voltage\nrequirement\n9.2.2.3 Selection ofExternal BJT\nDAC161S997 hasbeen designed touseanexternal NPN transistor (BJT). Transistor Q1conducts themajority of\nthesignal-dependent, 4-20mA loop current. Using anexternal transistor avoids on-chip power dissipation and\nthermally-induced errors. Since theexternal transistor ispart ofacurrent control loop, theexternal transistor\ncharacteristics arenotcritical. Virtually anytransistor with sufficient voltage, current and, power rating may be\nused. Basic requirements areasfollows:\n•VCEO=40Vminimum\n•β=40minimum\n•Must beable tohandle power dissipation, PD=VCE(MAX) ×ILOOP(MAX)\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 27\nProduct Folder Links: DAC161S997\n4 6 8 10 12 14 16 18 20-1.5-1.0-0.50.00.51.01.52.02.5\nINL (µA)\nOUTPUT CURRENT (mA)\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nTypical Application (continued)\nThe NPN BJT should notbereplaced with anN-channel Field Effect Transistor (FET) forthefollowing reasons.\nDiscrete FET ’stypically have high threshold voltages (VTH),intheorder of1.5Vto2V,which isbeyond the\nBASE output maximum range. Discrete FETs present higher load capacitance, which may degrade system\nstability margins. BASE output relies ontheBJT’sbase current forbiasing.\nForfurther information onacomplete reference design ofaSmall Form Factor, 2-Wire, 4-to20-mA Current-\nLoop, RTD Temperature Transmitter, refer toTIDU385A .\n9.2.3 Application Curve\nUnless otherwise noted, these specifications apply forVA=VD=3.3V,COMA =COMD =0V,TA=25°C,external bipolar\ntransistor: 2N3904, RE=22Ω,C1=C2=C3=2.2nF.\nFigure 29.Linearity vsILOOP\n28 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\n10Power Supply Recommendations\nThe DAC161S997 requires avoltage supply within 2.7Vand3.6V.Multilayer ceramic bypass X7R capacitors of\n0.1μFbetween theVAand GND pins, and between theVDand GND pins arerecommended. Ifthesupply is\nlocated more than afewinches from theDAC161S997, additional bulk capacitance may berequired inaddition\ntotheceramic bypass capacitors. Anelectrolytic capacitor with avalue of10μFor22μFisatypical choice\n11Layout\n11.1 Layout Guidelines\nTomaximize theperformance oftheDAC161S997 inanyapplication, good layout practices and proper circuit\ndesign must befollowed. Afewrecommendations specific totheDAC161S997 are:\n•Make sure thatVDandVAhave decoupling capacitors local totherespective terminals.\n•Minimize trace length between theC1,C2,andC3capacitors andtheDAC161S997 pins.\n11.2 Layout Example\nFigure 30toFigure 32show theDAC161S997 evaluation module (EVM) layout\nFigure 30.Example PCB layout: TopAssembly Layer\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 29\nProduct Folder Links: DAC161S997\nDAC161S997\nSNAS621A –JUNE 2013 –REVISED DECEMBER 2014 www.ti.com\nLayout Example (continued)\nFigure 31.Example PCB layout: TopLayer\nFigure 32.Example PCB layout: Bottom Layer\n30 Submit Documentation Feedback Copyright ©2013 –2014, Texas Instruments Incorporated\nProduct Folder Links: DAC161S997\nDAC161S997\nwww.ti.com SNAS621A –JUNE 2013 –REVISED DECEMBER 2014\n12Device andDocumentation Support\n12.1 Trademarks\nAlltrademarks aretheproperty oftheir respective owners.\n12.2 Electrostatic Discharge Caution\nThese devices have limited built-in ESD protection. The leads should beshorted together orthedevice placed inconductive foam\nduring storage orhandling toprevent electrostatic damage totheMOS gates.\n12.3 Glossary\nSLYZ022 —TIGlossary .\nThis glossary listsandexplains terms, acronyms, anddefinitions.\n13Mechanical, Packaging, andOrderable Information\nThe following pages include mechanical, packaging, and orderable information. This information isthemost\ncurrent data available forthedesignated devices. This data issubject tochange without notice and revision of\nthisdocument. Forbrowser-based versions ofthisdata sheet, refer totheleft-hand navigation.\nCopyright ©2013 –2014, Texas Instruments Incorporated Submit Documentation Feedback 31\nProduct Folder Links: DAC161S997\nPACKAGE OPTION ADDENDUM\nwww.ti.com 10-Dec-2020\nAddendum-Page 1PACKAGING INFORMATION\nOrderable Device Status\n(1)Package Type Package\nDrawingPinsPackage\nQtyEco Plan\n(2)Lead finish/\nBall material\n(6)MSL Peak Temp\n(3)Op Temp (°C) Device Marking\n(4/5)Samples\nDAC161S997RGHR ACTIVE WQFN RGH 164500RoHS & Green SN Level-3-260C-168 HR -40 to 105 161S997\nDAC161S997RGHT ACTIVE WQFN RGH 16250RoHS & Green SN Level-3-260C-168 HR -40 to 105 161S997\n \n(1) The marketing status values are defined as follows:\nACTIVE: Product device recommended for new designs.\nLIFEBUY:  TI has announced that the device will be discontinued, and a lifetime-buy period is in effect.\nNRND: Not recommended for new designs. Device is in production to support existing customers, but TI does not recommend using this part in a new design.\nPREVIEW:  Device has been announced but is not in production. Samples may or may not be available.\nOBSOLETE:  TI has discontinued the production of the device.\n \n(2) RoHS:  TI defines "RoHS" to mean semiconductor products that are compliant with the current EU RoHS requirements for all 10 RoHS substances,  including the requirement that RoHS substance\ndo not exceed 0.1% by weight in homogeneous materials. Where designed to be soldered at high temperatures, "RoHS" products are suitable for use in specified lead-free processes. TI may\nreference these types of products as "Pb-Free".\nRoHS Exempt:  TI defines "RoHS Exempt" to mean products that contain lead but are compliant with EU RoHS pursuant to a specific EU RoHS exemption.\nGreen: TI defines "Green" to mean the content of Chlorine (Cl) and Bromine (Br) based flame retardants meet JS709B low halogen requirements of <=1000ppm threshold.  Antimony trioxide based\nflame retardants must also meet the <=1000ppm threshold requirement.\n \n(3) MSL, Peak Temp. - The Moisture Sensitivity Level rating according to the JEDEC industry standard classifications, and peak solder temperature.\n \n(4) There may be additional marking, which relates to the logo, the lot trace code information, or the environmental category on the device.\n \n(5) Multiple Device Markings will be inside parentheses. Only one Device Marking contained in parentheses and separated by a "~" will appear on a device. If a line is indented then it is a continuation\nof the previous line and the two combined represent the entire Device Marking for that device.\n \n(6) Lead finish/Ball material - Orderable Devices may have multiple material finish options. Finish options are separated by a vertical ruled line. Lead finish/Ball material values may wrap to two\nlines if the finish value exceeds the maximum column width.\n \nImportant Information and Disclaimer: The information provided on this page represents TI\'s knowledge and belief as of the date that it is provided. TI bases its knowledge and belief on information\nprovided by third parties, and makes no representation or warranty as to the accuracy of such information. Efforts are underway to better integrate information from third parties. TI has taken and\ncontinues to take reasonable steps to provide representative and accurate information but may not have conducted destructive testing or chemical analysis on incoming materials and chemicals.\nTI and TI suppliers consider certain information to be proprietary, and thus CAS numbers and other limited information may not be available for release.\n \nIn no event shall TI\'s liability arising out of such information exceed the total purchase price of the TI part(s) at issue in this document sold by TI to Customer on an annual basis.\nPACKAGE OPTION ADDENDUM\nwww.ti.com 10-Dec-2020\nAddendum-Page 2 \nPACKAGE MATERIALS INFORMATION\n  \nwww.ti.com 9-Aug-2022\nTAPE AND REEL INFORMATION\nReel Width (W1)REEL DIMENSIONS\nA0\nB0\nK0\nWDimension designed to accommodate the component length\nDimension designed to accommodate the component thickness\nOverall width of the carrier tape\nPitch between successive cavity centersDimension designed to accommodate the component widthTAPE DIMENSIONS\nK0 P1\nB0W\nA0 Cavity\nQUADRANT ASSIGNMENTS FOR PIN 1 ORIENTATION IN TAPE\nPocket QuadrantsSprocket Holes\nQ1 Q1 Q2 Q2\nQ3 Q3 Q4 Q4 User Direction of FeedP1Reel\nDiameter\n \n*All dimensions are nominal\nDevice Package\nTypePackage\nDrawingPinsSPQ Reel\nDiameter\n(mm)Reel\nWidth\nW1 (mm)A0\n(mm)B0\n(mm)K0\n(mm)P1\n(mm)W\n(mm)Pin1\nQuadrant\nDAC161S997RGHR WQFN RGH 164500 330.0 12.4 4.34.31.38.012.0 Q1\nDAC161S997RGHT WQFN RGH 16250 178.0 12.4 4.34.31.38.012.0 Q1\nPack Materials-Page 1\nPACKAGE MATERIALS INFORMATION\n  \nwww.ti.com 9-Aug-2022\nTAPE AND REEL BOX DIMENSIONS\nWidth (mm)\nWLH\n \n*All dimensions are nominal\nDevice Package Type Package Drawing Pins SPQ Length (mm) Width (mm) Height (mm)\nDAC161S997RGHR WQFN RGH 164500 356.0 356.0 35.0\nDAC161S997RGHT WQFN RGH 16250 367.0 367.0 35.0\nPack Materials-Page 2\nwww.ti.comPACKAGE OUTLINE\nC\nSEE TERMINAL\nDETAIL\n16X 0.3\n0.22.6 0.1\n16X 0.50.30.8 MAX\n(A) TYP0.050.00\n12X 0.5\n4X\n1.5B4.13.9 A\n4.13.90.30.20.50.3WQFN - 0.8 mm max height RGH0016A\nPLASTIC QUAD FLATPACK - NO LEAD\n4214978/B   01/2017 DIM A\n OPT 1\n OPT 1\n(0.1) (0.2)PIN 1 INDEX AREA\n0.08SEATING PLANE\n149\n125 8\n16 13\n(OPTIONAL)PIN 1 ID0.1 C A B\n0.05EXPOSEDTHERMAL PAD\n17 SYMM\nSYMM\nNOTES: 1. All linear dimensions are in millimeters. Any dimensions in parenthesis are for reference only. Dimensioning and tolerancing    per ASME Y14.5M. 2. This drawing is subject to change without notice. 3. The package thermal pad must be soldered to the printed circuit board for optimal thermal and mechanical performance.SCALE  3.000\nDETAIL\nOPTIONAL TERMINAL\nTYPICAL\nwww.ti.comEXAMPLE BOARD LAYOUT\n0.07 MIN\nALL AROUND0.07 MAX\nALL AROUND16X (0.25)16X (0.6)\n(0.2) TYP\nVIA12X (0.5)(3.8)\n(3.8)(1)(2.6)\n(R0.05)\nTYP\n(1)WQFN - 0.8 mm max height RGH0016A\nPLASTIC QUAD FLATPACK - NO LEAD\n4214978/B   01/2017SYMM\n1\n4\n5 891213 16\nSYMM\nLAND PATTERN EXAMPLE\nEXPOSED METAL SHOWN\nSCALE:15X17\nNOTES: (continued) 4. This package is designed to be soldered to a thermal pad on the board. For more information, see Texas Instruments literature    number SLUA271 (www.ti.com/lit/slua271).5. Vias are optional depending on application, refer to device data sheet. If any vias are implemented, refer to their locations shown    on this view. It is recommended that vias under paste be filled, plugged or tented.SOLDER MASKOPENING\nMETAL UNDERSOLDER MASK\nSOLDER MASK\nDEFINEDEXPOSED METALMETAL\nSOLDER MASKOPENING\nSOLDER MASK DETAILSNON SOLDER MASK\nDEFINED\n(PREFERRED)EXPOSED METAL\nwww.ti.comEXAMPLE STENCIL DESIGN\n16X (0.6)\n16X (0.25)\n12X (0.5)\n(3.8)(3.8)4X ( 1.15)\n(0.675)\nTYP(0.675) TYP\n(R0.05)\nTYPWQFN - 0.8 mm max height RGH0016A\nPLASTIC QUAD FLATPACK - NO LEAD\n4214978/B   01/2017\nNOTES: (continued) 6. Laser cutting apertures with trapezoidal walls and rounded corners may offer better paste release. IPC-7525 may have alternate   design recommendations.SYMMTYPEXPOSED METAL\nSOLDER PASTE EXAMPLE\nBASED ON 0.125 mm THICK STENCIL\n \nEXPOSED PAD 17\n78% PRINTED SOLDER COVERAGE BY AREA UNDER PACKAGE\nSCALE:20XSYMM1\n4\n5 891213 16\n17\nIMPORTANT NOTICE AND DISCLAIMER\nTI PROVIDES TECHNICAL AND RELIABILITY DATA (INCLUDING DATA SHEETS), DESIGN RESOURCES (INCLUDING REFERENCE \nDESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND OTHER RESOURCES “AS IS” \nAND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING WITHOUT LIMITATION ANY \nIMPLIED WARRANTIES OF MERCHANTABILIT Y, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT OF THIRD \nPARTY INTELLECTUAL PROPERTY RIGHTS.\nThese resources are intended for skilled developers designing with TI products. Y ou are solely responsible for (1) selecting the appropriate \nTI products for your application, (2) designing, validating and testing your application, and (3) ensuring your application meets applicable \nstandards, and any other safety, security, regulatory or other requirements.\nThese resources are subject to change without notice. TI grants you permission to use these resources only for development of an \napplication that uses the TI products described in the resource. Other reproduction and display of these resources is prohibited. No license \nis granted to any other TI intellectual property right or to any third party intellectual property right. TI disclaims responsibility for , and you \nwill fully indemnify TI and its representatives against, any claims, damages, costs, losses, and liabilities arising out of your use of these \nresources.\nTI’s products are provided subject to TI’s Terms of Sale or other applicable terms available either on ti.com or provided in conjunction with \nsuch TI products. TI’s provision of these resources does not expand or otherwise alter TI’s applicable warranties or warranty disclaimers for \nTI products.\nTI objects to and rejects any additional or different terms you may have proposed. IMPORTANT NOTICE\nMailing Address: Texas Instruments, Post Office Box 655303, Dallas, Texas 75265\nCopyright © 202 2, Texas Instruments Incorporated\n'}]
!==============================================================================!
### Component Summary: DAC161S997RGHR

#### Key Specifications:
- **Voltage Ratings:**
  - Supply Voltage (VA, VD): 2.7V to 3.6V
  - Absolute Maximum Supply Voltage: -0.3V to 6V
- **Current Ratings:**
  - Output Current (OUT): Up to 24mA
  - Maximum Output Current at OUT pin: 50mA
- **Power Consumption:**
  - Total Supply Current: 100µA (typical)
- **Operating Temperature Range:**
  - -40°C to +105°C
- **Package Type:**
  - WQFN-16 (4mm x 4mm)
- **Special Features:**
  - 16-bit resolution
  - Integrated ultra-low power voltage reference
  - SPI interface for data transfer and configuration
  - Loop-error detection and reporting
  - Programmable output-current error levels
  - Simple HART modulator interfacing
- **Moisture Sensitive Level (MSL):**
  - Level 3, according to JEDEC J-STD-020E

#### Description:
The **DAC161S997** is a 16-bit digital-to-analog converter (DAC) designed for low-power applications, specifically for transmitting analog output current over a standard 4-20 mA current loop. It utilizes a sigma-delta modulation architecture to achieve high linearity and low power consumption. The device features a simple 4-wire SPI interface for configuration and data transfer, making it suitable for integration into various industrial applications.

#### Typical Applications:
- **Industrial Process Control:** The DAC161S997 is ideal for use in industrial transmitters that require precise control of analog signals.
- **Loop-Powered Transmitters:** It is commonly used in 2-wire and 4-wire current loop transmitters, where it can efficiently drive the output current while minimizing power consumption.
- **Actuator Control:** The device can be employed in systems that require accurate control of actuators based on analog signals.
- **HART Communication:** The DAC161S997 can interface with HART modulators, allowing for the transmission of digital data over the same 4-20 mA loop used for analog signals.

This component is particularly advantageous in applications where low power consumption and high precision are critical, such as in remote sensing and monitoring systems.