[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of STM8AF6266TDY production of ST MICROELECTRONICS from the text:This is information on a product in full production. June 2016 DocID14952 Rev 11 1/99STM8AF6246 STM8AF6248 \nSTM8AF6266 STM8AF6268\nAutomotive 8-bit MCU, with up to 32 Kbyte Flash, data EEPROM, \n10-bit ADC, timers, LIN,  SPI, I2C, 3 to 5.5 V\nDatasheet - production data\nFeatures\n•AEC-Q10x qualified\n•Core\n–M a x  fCPU: 16 MHz\n– Advanced STM8A core with Harvard \narchitecture and 3-stage pipeline\n– Average 1.6 cycles/inst ruction resulting in \n10 MIPS at 16 MHz fCPU for industry \nstandard benchmark\n•Memories\n– Flash Program memory: 16 to 32 Kbyte \nFlash; data retention 20 years at 55 °C after 1 kcycle\n– Data memory:  0.5 to 1 Kbyte true data \nEEPROM; endurance 300 kcycle\n– RAM: 2 Kbyte\n•Clock management \n– Low-power crystal re sonator oscillator with \nexternal clock input\n– Internal, user-trimmable 16 MHz RC and \nlow-power 128 kHz RC oscillators\n– Clock security system with clock monitor\n•Reset and supply management\n– Wait/auto-wakeup/Halt low-power modes \nwith user definable clock gating\n– Low consumption power-on and power-\ndown reset\n•Interrupt management\n– Nested interrupt controller with 32 vectors– Up to 34 external interrupts on 5 vectors\n•Timers \n– Up to 2 general purpose 16-bit PWM timers \nwith up to 3 CAPCOM channels each (IC, OC or PWM)\n– Advanced control timer: 16-bit, 4 CAPCOM \nchannels, 3 complementary outputs, dead-time insertion and flex ible synchronization\n– 8-bit AR basic timer with 8-bit prescaler – Auto-wakeup timer\n– Window and independent watchdog timers\n•Communication interfaces \n–L I N U A R T– LIN 2.2 compliant, master/slave modes \nwith automatic resynchronization \n– SPI interface up to 8 Mbit/s or f\nMASTER /2\n–I2C interface up to 400 Kbit/s\n•Analog-to-digital converter (ADC)\n– 10-bit accuracy, 2L SB TUE accuracy, 2LSB \nTUE linearity ADC and up to 10 multiplexed \nchannels with individual data buffer\n– Analog watchdog, scan and continuous \nsampling mode\n•I/Os\n– Up to 38 user pins including 10 HS I/Os\n– Highly robust I/O design, immune against \ncurrent injection\n•Operating temperature up to 150 °C\n•Qualification conforms to AEC-Q100 rev GLQFP48 LQFP32 VFQFPN32 \n(5x5 mm)  (7x7 mm) (7x7 mm)\nwww.st.com\nContents STM8AF6246/48/66/68\n2/99 DocID14952 Rev 11Contents\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9\n2 Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\n3 Product line-up  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11\n4 Block diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12\n5 Product overview  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n5.1 STM8A central processing unit (CPU) . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n5.1.1 Architecture and registers  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n5.1.2 Addressing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 145.1.3 Instruction set  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n5.2 Single wire interface module (SWIM)  and debug module (DM) . . . . . . . . 15\n5.2.1 SWIM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.2.2 Debug module . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.3 Interrupt controller  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.4 Flash program and data EEPROM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.4.1 Architecture  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.4.2 Write protection (WP)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n5.4.3 Protection of user boot code (UBC) . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165.4.4 Read-out protection (ROP)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n5.5 Clock controller . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n5.5.1 Features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n5.5.2 16 MHz high-speed internal RC oscillator (HSI)  . . . . . . . . . . . . . . . . . . 18\n5.5.3 128 kHz low-speed internal  RC oscillator (LSI) . . . . . . . . . . . . . . . . . . . 19\n5.5.4 16 MHz high-speed external crystal osc illator (HSE) . . . . . . . . . . . . . . . 19\n5.5.5 External clock input  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19\n5.5.6 Clock security system (CSS) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19\n5.6 Low-power operating modes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n5.7 Timers  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n5.7.1 Watchdog timers  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n5.7.2 Auto-wakeup counter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n5.7.3 Beeper . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\nDocID14952 Rev 11 3/99STM8AF6246/48/66/68 Contents\n45.7.4 Advanced control and general purpose timers  . . . . . . . . . . . . . . . . . . . 21\n5.7.5 Basic timer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22\n5.8 Analog-to-digital converter (ADC)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\n5.9 Communication interfaces  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\n5.9.1 Serial peripheral interface (SPI) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n5.9.2 Inter integrated circuit (I2C) interface . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n5.9.3 Universal asynchronous rece iver/transmitter with LIN support  \n(LINUART) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25\n5.10 Input/output specifications  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26\n6 Pinouts and pin description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\n6.1 Package pinouts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\n6.2 Alternate function remapping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\n7 Memory and register map . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n7.1 Memory map  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n7.2 Register map  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\n8 Interrupt table  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43\n9 Option bytes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44\n10 Electrical characteristi cs  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n10.1 Parameter conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n10.1.1 Minimum and maximum values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n10.1.2 Typical values  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4910.1.3 Typical curves  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n10.1.4 Loading capacitor  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\n10.1.5 Pin input voltage  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\n10.2 Absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\n10.3 Operating conditions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n10.3.1 VCAP external capacitor  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\n10.3.2 Supply current characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\n10.3.3 External clock sources and timing characteristics . . . . . . . . . . . . . . . . . 57\n10.3.4 Internal clock sources and timing characte ristics  . . . . . . . . . . . . . . . . . 59\n10.3.5 Memory characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62\n10.3.6 I/O port pin characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63\nContents STM8AF6246/48/66/68\n4/99 DocID14952 Rev 1110.3.7 Reset pin characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67\n10.3.8 TIM 1, 2, 3, and 4 timer specifications . . . . . . . . . . . . . . . . . . . . . . . . . . 6910.3.9 SPI serial peripheral interface  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69\n10.3.10 I\n2C interface characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\n10.3.11 10-bit ADC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\n10.3.12 EMC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75\n11 Package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78\n11.1 VFQFPN32 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78\n11.2 LQFP48 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82\n11.3 LQFP32 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85\n11.4 Thermal characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88\n11.4.1 Reference document . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88\n11.4.2 Selecting the product temperature range  . . . . . . . . . . . . . . . . . . . . . . . 88\n12 Ordering information  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90\n13 STM8 development tools  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91\n13.1 Emulation and in-circuit debugging tools  . . . . . . . . . . . . . . . . . . . . . . . . . 91\n13.1.1 STice key features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91\n13.2 Software tools . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92\n13.2.1 STM8 toolset  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92\n13.2.2 C and assembly toolchains  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92\n13.3 Programming tools . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93\n14 Revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94\nDocID14952 Rev 11 5/99STM8AF6246/48/66/68 List of tables\n6List of tables\nTable 1. STM8AF6246/48/66/68 product line-up . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11\nTable 2. Peripheral clock gating bit assignments in CLK_PCKENR1/2 registers. . . . . . . . . . . . . . . 19Table 3. Advanced control and general purpose timers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21Table 4. TIM4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22\nTable 5. ADC naming . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 23\nTable 6. Communication peripheral naming correspondence  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23\nTable 7. Legend/abbreviation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28\nTable 8. STM8AF6246/48/66/68 (32 Kbyte) microcontroller pin description  . . . . . . . . . . . . . . . . . . 29\nTable 9. Memory model for the devices covered in this datas heet. . . . . . . . . . . . . . . . . . . . . . . . . . 33\nTable 10. I/O port hardware register map. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\nTable 11. General hardware register map  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34\nTable 12. CPU/SWIM/debug module/interrupt controller registers.  . . . . . . . . . . . . . . . . . . . . . . . . . . 41\nTable 13. Temporary memory unprotection registers. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42\nTable 14. STM8A interrupt table. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 43\nTable 15. Option bytes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . . 44\nTable 16. Option byte description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 46\nTable 17. Voltage characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\nTable 18. Current characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51\nTable 19. Thermal characteristics.  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 51\nTable 20. Operating lifetime . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . 51\nTable 21. General operating conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 52\nTable 22. Operating conditions at power-up/power-down  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53Table 23. Total current consumptio n in Run, Wait and Slow mode.  \nGeneral conditions for V\nDD apply, TA = -40 to 150 °C  . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\nTable 24. Total current consumption in Halt and Active-halt modes.  \nGeneral conditions for VDD apply, TA = -40 to 55 °C  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55\nTable 25. Oscillator current consumption . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55\nTable 26. Programming current consumption. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5 6\nTable 27. Typical peripheral current consumption VDD = 5.0 V . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56\nTable 28. HSE user external clock characteri stics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5 7\nTable 29. HSE oscillator characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58\nTable 30. HSI oscillator characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59\nTable 31. LSI oscillator characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60\nTable 32. Flash program memory/data EEPROM memory  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62Table 33. Flash program memory. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62\nTable 34. Data memory  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62\nTable 35. I/O static characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 63\nTable 36. NRST pin characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 67\nTable 37. TIM 1, 2, 3, and 4 electrical specifications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  69\nTable 38. SPI characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69\nTable 39. I\n2C characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\nTable 40. ADC characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\nTable 41. ADC accuracy for VDDA = 5 V. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74\nTable 42. EMS data  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . . 75\nTable 43. EMI data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\nTable 44. ESD absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\nTable 45. Electrical sensitivities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . 77\nTable 46. VFQFPN32 - 32-pin, 5x5 mm, 0.5 mm pitch very thin profile fine pitch quad  \nList of tables STM8AF6246/48/66/68\n6/99 DocID14952 Rev 11 flat package mechanical data  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79\nTable 47. LQFP48 - 48-pin, 7 x 7 mm low-profile quad flat package  \nmechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 83\nTable 48. LQFP32 - 32-pin, 7 x 7 mm low-profile quad flat package  \nmechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 86\nTable 49. Thermal characteristics.  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 88\nTable 50. Document revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94\nDocID14952 Rev 11 7/99STM8AF6246/48/66/68 List of figures\n8List of figures\nFigure 1. STM8AF6246/48/66/68 block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12\nFigure 2. Flash memory organization of STM8AF6246/48/66/68  . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\nFigure 3. VFQFPN/LQFP 32-pin pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  27\nFigure 4. LQFP 48-pin pinout. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28\nFigure 5. Register and memory map of STM8A products . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\nFigure 6. Pin loading conditions. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\nFigure 7. Pin input voltage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . 50\nFigure 8. fCPUmax  versus VDD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\nFigure 9. External capacitor CEXT . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\nFigure 10. Typ. IDD(RUN)HSE  vs. VDD @fCPU = 16 MHz, peripheral = on . . . . . . . . . . . . . . . . . . . . . . . 56\nFigure 11. Typ. IDD(RUN)HSE  vs. fCPU @ VDD = 5.0 V, peripheral = on  . . . . . . . . . . . . . . . . . . . . . . . . 56\nFigure 12. Typ. IDD(RUN)HSI  vs. VDD @ fCPU = 16 MHz, peripheral = off . . . . . . . . . . . . . . . . . . . . . . . 57\nFigure 13. Typ. IDD(WFI)HSE  vs. VDD @ fCPU = 16 MHz, peripheral = on . . . . . . . . . . . . . . . . . . . . . . . 57\nFigure 14. Typ. IDD(WFI)HSE  vs. fCPU @ VDD = 5.0 V, peripheral = on . . . . . . . . . . . . . . . . . . . . . . . . . 57\nFigure 15. Typ. IDD(WFI)HSI  vs. VDD @ fCPU = 16 MHz, peripheral = off  . . . . . . . . . . . . . . . . . . . . . . . 57\nFigure 16. HSE external clock source . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 58\nFigure 17. HSE oscillator circuit diagram. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 59\nFigure 18. Typical HSI frequency vs VDD. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60\nFigure 19. Typical LSI frequency vs VDD. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61\nFigure 20. Typical VIL and VIH vs VDD @ four temperatures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64\nFigure 21. Typical pull-up resistance RPU vs VDD @ four temperatures . . . . . . . . . . . . . . . . . . . . . . . 64\nFigure 22. Typical pull-up current Ipu vs VDD @ four temperatures . . . . . . . . . . . . . . . . . . . . . . . . . . . 65\nFigure 23. Typ. VOL @ VDD = 3.3 V (standard ports). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65\nFigure 24. Typ. VOL @ VDD = 5.0 V (standard ports). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65\nFigure 25. Typ. VOL @ VDD = 3.3 V (true open drain ports)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65\nFigure 26. Typ. VOL @ VDD = 5.0 V (true open drain ports)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65\nFigure 27. Typ. VOL @ VDD = 3.3 V (high sink ports)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66\nFigure 28. Typ. VOL @ VDD = 5.0 V (high sink ports)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66\nFigure 29. Typ. VDD - VOH @ VDD = 3.3 V (standard ports). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66\nFigure 30. Typ. VDD - VOH @ VDD = 5.0 V (standard ports). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66\nFigure 31. Typ. VDD - VOH @ VDD = 3.3 V (high sink ports)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66\nFigure 32. Typ. VDD - VOH @ VDD = 5.0 V (high sink ports)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66\nFigure 33. Typical NRST VIL and VIH vs VDD @ four temperatures  . . . . . . . . . . . . . . . . . . . . . . . . . . 67\nFigure 34. Typical NRST pull-up resistance RPU vs VDD. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68\nFigure 35. Typical NRST pull-up current Ipu vs VDD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68\nFigure 36. Recommended reset pin protection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68\nFigure 37. SPI timing diagram where slav e mode and CPHA = 0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70\nFigure 38. SPI timing diagram where slav e mode and CPHA = 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70\nFigure 39. SPI timing diagram - master mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  71\nFigure 40. Typical application with ADC  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\nFigure 41. ADC accuracy characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 74\nFigure 42. VFQFPN32 - 32-pin, 5x5 mm, 0.5 mm pitch very thin profile fine pitch quad  \n flat package outline . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 78\nFigure 43. VFQFPN32 - 32-pin, 5x5 mm, 0.5 mm pitch very thin profile fine pitch quad  \n flat package recommended footprint . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80\nFigure 44. VFQFPN32 marking example (package top view) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81\nFigure 45. LQFP48 - 48-pin, 7 x 7 mm low-profile quad flat package outline  . . . . . . . . . . . . . . . . . . . 82\nFigure 46. LQFP48 - 48-pin, 7 x 7 mm low-profile quad flat package  \nList of figures STM8AF6246/48/66/68\n8/99 DocID14952 Rev 11recommended footprint. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84\nFigure 47. LQFP48 marking example (package top view). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84\nFigure 48. LQFP32 - 32-pin, 7 x 7 mm low-profile quad flat package outline  . . . . . . . . . . . . . . . . . . . 85\nFigure 49. LQFP32 - 32-pin, 7 x 7 mm low-profile quad flat package  \nrecommended footprint. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87\nFigure 50. LQFP32 marking example (package top view). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87\nFigure 51. STM8AF6246/48/66/68 ordering information scheme(1) (2) . . . . . . . . . . . . . . . . . . . . . . . . 90\nDocID14952 Rev 11 9/99STM8AF6246/48/66/68 Introduction\n931 Introduction\nThis datasheet refers to the STM8AF6246, STM8AF6248, STM8AF6266 and STM8AF6268 \nproducts with 16 to 32  Kbyte of Flash program memory. \nIn the order code, the letter ‘F’ refers to produc t versions with data EEPROM and ‘H’ refers \nto product versions without data EEPROM. The identifiers ‘F’ and ‘H’ do not coexist in a \ngiven order code.\nThe datasheet contains the description of family  features, pinout, electr ical characteristics, \nmechanical data and ordering information.\n• For complete information on the STM8A microcontroller memory, registers and \nperipherals, please refer to STM8S series and STM8AF series 8-bit microcontrollers \nreference manual (RM0016).\n• For information on programming, erasing and protection of the internal Flash memory \nplease refer to the STM8 Flash programming manual (PM0051).\n• For information on the debug and SWIM (s ingle wire interface module) refer to the \nSTM8 SWIM communication protocol and debug module user manual (UM0470).\n• For information on the STM8 core, please refer to the STM8 CPU programming manual \n(PM0044).\nDescription STM8AF6246/48/66/68\n10/99 DocID14952 Rev 112 Description\nThe STM8AF6246, STM8AF6248, STM8AF6266  and STM8AF6268 automotive 8-bit \nmicrocontrollers offer from 16 to 32  Kbyte of Flash program me mory and integrated true \ndata EEPROM. They are referred  to as medium density STM8 A devices in STM8S series \nand STM8AF series 8-bit microcontrollers reference manual (RM0016).\nAll devices of the STM8A product line provi de the following benefits: reduced system cost, \nperformance and robustness, short deve lopment cycles, and product longevity.\nThe system cost is reduced thanks to an integrated true data EEPROM for up to 300 k \nwrite/erase cycles and a high system integrat ion level with internal clock oscillators, \nwatchdog, and brown-out reset.\nDevice performance is ensured by a clock frequency of up to 16 MHz CPU and enhanced characteristics which include robust I/O, independent watchdogs (with a separate clock \nsource), and a clock security system.\nShort development cycles ar e guaranteed due  to application scalability across a common \nfamily product architecture wi th compatible pinout, memory map and modular peripherals. \nFull documentation is offered with a wide choice of development tools.\nProduct longevity is ensured in the STM8A fam ily thanks to their advanced core which is \nmade in a state-of-the art technology for auto motive applications with 3.3 V to 5 V operating \nsupply.\nAll STM8A and ST7 microcontrollers are supported by the same tools including  \nSTVD/STVP development environment, the STice emulator and  a low-cost, third party in-\ncircuit debugging tool.\nDocID14952 Rev 11 11/99STM8AF6246/48/66/68 Product line-up\n933 Product line-up\n          ²Table 1. STM8AF6246/48/66/68 product line-up \nOrder code PackageMedium \ndensity \nFlash \nprogram \nmemory\n(byte)RAM \n(byte)Data EE\n(byte)10-bit \nA/D ch.Timers\n(IC/OC/PWM)Serial \ninterfacesI/0 \nwakeup \npins\nSTM8AF/P6268\nLQFP48 \n(7x7)32 K\n2 K1 K\n101x8-bit: TIM4\n3x16-bit: TIM1, \nTIM2, TIM3\n(9/9/9)LIN(UART), \nSPI, I²C38/35\nSTM8AF/P6248 16 K 0.5 K\nSTM8AF/P6266\nLQFP32 \n(7x7)32 K 1 K\n71x8-bit: TIM4\n3x16-bit: TIM1, \nTIM2, TIM3\n(8/8/8)LIN(UART), \nSPI, I²C25/23\nSTM8AF/P6246 16 K 0.5 K\nSTM8AF/P6266\nVFQFPN3232 K 1 K\n71x8-bit: TIM4\n3x16-bit: TIM1, \nTIM2, TIM3\n(8/8/8)LIN(UART), \nSPI, I²C25/23\nSTM8AF/P6246 16 K 0.5 K\nBlock diagram STM8AF6246/48/66/68\n12/99 DocID14952 Rev 114 Block diagram\nFigure 1. STM8AF6246/48/66/68 block diagram\n06\x16\x1a\x1a\x1c\x169\x14;7$/\x03\x14\x10\x14\x19\x030+]\n5&\x03LQW\x11\x03\x14\x19\x030+]\n5&\x03LQW\x11\x03\x14\x15\x1b\x03N+]\n670\x1b$\x03FRUH\n\'HEXJ\x126:,0\n63,/,18$57\n\x1b\x10ELW\x03EDVLF\x03WLPHU\n\x0b7,0\x17\x0c5HVHW\x03EORFN\n5HVHW\n325 %25&ORFN\x03FRQWUROOHU\n\'HWHFWRU\n&ORFN\x03WR\x03SHULSKHUDOV\x03DQG\x03FRUH\n\x14\x13\x030ELW\x12V0DVWHU\x12VODYH\nDXWRPDWLF\nUHV\\QFKURQL]DWLRQ\n$GGUHVV\x03DQG\x03GDWD\x03EXV:LQGRZ\x03:\'*\n8S\x03WR\x03\x16\x15\x03.E\\WHSURJUDP\x03)ODVK\n8S\x03WR\x03\x14\x03.E\\WH\n\x15\x03.E\\WH\x035$0\n\x14\x13\x10ELW\x03$\'&5HVHW\n\x17\x13\x13\x03.ELW\x12V6LQJOH\x03ZLUH\nGHEXJ\x03LQWHUIDFH\n\x14\x19\x10ELW\x03DGYDQFHG\x03FRQWURO\nWLPHU\x03\x0b7,0\x14\x0c\n\x14\x19\x10ELW\x03JHQHUDO\x03SXUSRVH\nWLPHUV\x03\x0b7,0\x15\x0f\x037,0\x16\x0cGDWD\x03((3520\n$:8\x03WLPHU,QGHSHQGHQW\x03:\'*\n\x1c\x03&$3&20\nFKDQQHOV8S\x03WR\n\x14\x19\x03FKDQQHOV,\x15&%RRW\x03520\nDocID14952 Rev 11 13/99STM8AF6246/48/66/68 Block diagram\n931. Legend:  \nADC: Analog-to-digital converter  \nbeCAN: Controller area network  \nBOR: Brownout reset  \nI²C: Inter-integrated circuit multimaster interface  \nIWDG: Independent window watchdog  \nLINUART: Local interconnect network unive rsal asynchronous receiver transmitter  \nPOR: Power on reset  \nSPI: Serial peripheral interface  \nSWIM: Single wire interface module  \nUSART: Universal synchronous as ynchronous receiver transmitter  \nWindow WDG: Window watchdog\nProduct overview STM8AF6246/48/66/68\n14/99 DocID14952 Rev 115 Product overview \nThis section describes the family features that  are implemented in the products covered by \nthis datasheet.\nFor more detailed information on each feature please refer to STM8S series and STM8AF \nseries 8-bit microcontrollers reference manual (RM0016).\n5.1 STM8A central processing unit (CPU)\nThe 8-bit STM8A core is a modern CISC core and has been designed for code efficiency and performance. It contains 21 internal r egisters (six directly addressable in each \nexecution context), 20 addressing modes including indexed indirect and relative addressing and 80 instructions.\n5.1.1 Architecture and registers\n• Harvard architecture\n• 3-stage pipeline\n• 32-bit wide program memory bus with single  cycle fetching for most instructions\n• X and Y 16-bit index registers, enabling indexed addressing modes with or without \noffset and read-modify-write type data manipulations\n• 8-bit accumulator\n• 24-bit program counter with 16-Mbyte linear memory space\n• 16-bit stack pointer with access to a 64 Kbyte stack\n• 8-bit condition code register with seven cond ition flags for the result of the last \ninstruction.\n5.1.2 Addressing\n• 20 addressing modes\n• Indexed indirect addressing mode for look-up tables located anywhere in the address \nspace\n• Stack pointer relative addressing mode for efficient implementation of local variables \nand parameter passing \n5.1.3 Instruction set\n• 80 instructions with 2-byte average instruction size\n• Standard data movement and logic/arithmetic functions\n• 8-bit by 8-bit multiplication\n• 16-bit by 8-bit and 16-bit by 16-bit division\n• Bit manipulation\n• Data transfer between stack and accumu lator (push/pop) with direct stack access\n• Data transfer using the X and Y registers or direct memory-to-memory transfers\nDocID14952 Rev 11 15/99STM8AF6246/48/66/68 Product overview\n935.2 Single wire interface module  (SWIM) and debug module (DM)\n5.2.1 SWIM\nThe single wire interface module, SWIM, together with an integrated debug module, permits \nnon-intrusive, real-time in-circuit debugging and fast memory programming. The interface \ncan be activated in all device operation modes and can be connected to a running device (hot plugging).The maximum data transmission speed is 145 bytes/ms.\n5.2.2 Debug module\nThe non-intrusive debugging module features  a performance close to a full-flavored \nemulator. Besides memory and peripheral operation, CPU operation can also be monitored in real-time by means of shadow registers.\n• R/W of RAM and peripheral registers in real-time \n• R/W for all resources when th e application is stopped\n• Breakpoints on all program-m emory instructions (software breakpoints), except the \ninterrupt vector table\n• Two advanced breakpoints and 23 predefined breakpoint configurations\n5.3 Interrupt controller\n• Nested interrupts with three software priority levels\n• 21 interrupt vectors with hardware priority\n• Five vectors for external interrupts (up to 34 depending on the package)\n• Trap and reset interrupts\n5.4 Flash program and data EEPROM\n• 16 Kbyte to 32 Kbyte of medium dens ity single voltage program Flash memory\n• Up to 1 Kbyte true (not emulated) data EEPROM\n• Read while write: writing in the data memory is possible while executing code in the \nFlash program memory\nThe whole Flash program memo ry and data EEPROM are fa ctory programmed with 0x00.\n5.4.1 Architecture\n• The memory is organized in blocks of 128 bytes each\n• Read granularity: 1 word = 4 bytes\n• Write/erase granularity: 1 word (4 bytes) or 1 block (128 bytes) in parallel\n• Writing, erasing, word and block management  is handled automatically by the memory \ninterface.\nProduct overview STM8AF6246/48/66/68\n16/99 DocID14952 Rev 115.4.2 Write protection (WP)\nWrite protection in application mode is intended  to avoid unintentional  overwriting of the \nmemory. The write protection can be removed te mporarily by executin g a specific sequence \nin the user software. \n5.4.3 Protection of us er boot code (UBC)\nIf the user chooses to update the Flash program memory using a specific boot code to \nperform in application programming (IAP), this  boot code needs to be protected against \nunwanted modification.\nIn the STM8A a memory area of up to 32 Kbyt e can be protected from  overwriting at user \noption level. Other than the standard write prot ection, the UBC protection can exclusively be \nmodified via the debug interface, the user software cannot modify the UBC protection \nstatus.\nThe UBC memory area contains the reset and in terrupt vectors and its size can be adjusted \nin increments of 512 bytes by programming the UBC and NUBC option bytes  \n(see Section  9: Option bytes on page  44).\nFigure 2. Flash memory organi zation of STM8AF6246/48/66/68\n06\x16\x1a\x1a\x1c\x179\x148%&\x03DUHD\n)ODVK\x03SURJUDP\x03PHPRU\\\x03DUHD\n\'DWD\x03PHPRU\\\x03DUHD\x03\x0b\x03\x14\x03.E\\WH\x0c5HPDLQV\x03ZULWH\x03SURWHFWHG\x03GXULQJ\x03,$3\n\'DWD\n((3520\nPHPRU\\:ULWH\x03DFFHVV\x03SRVVLEOH\x03IRU\x03,$3\n2SWLRQ\x03E\\WHV3URJUDPPDEOH\nDUHD\x03PD[LPXP\x16\x15\x03.E\\WH\x03\n\x03)ODVK\x03SURJUDP\nPHPRU\\\nDocID14952 Rev 11 17/99STM8AF6246/48/66/68 Product overview\n935.4.4 Read-out protection (ROP)\nThe STM8A provides a read-out protection of  the code and data memory which can be \nactivated by an option byte setting (s ee the ROP option byte in section 10). \nThe read-out protection prevents reading and writing Flash program memory, data memory \nand option bytes via the debug module and SWIM in terface. This protection is active in all \ndevice operation modes. Any attempt to remove the protection by overwriting the ROP option byte triggers a global erase of the program and data memory. \nThe ROP circuit may provide a temporary acce ss for debugging or failure analysis. The \ntemporary read access is protected by a user defined, 8-byte keyword stored in the option bytes area. This keyword must be entered via the SWIM interf ace to temporarily unlock the \ndevice. \nIf desired, the temporary unlock mechanism can be permanently disabled by the user \nthrough OPT6/NOPT6 option bytes.\n5.5 Clock controller\nThe clock controller distributes the system clock coming from different os cillators to the core \nand the peripherals. It also manages clock gating for low-power modes and ensures clock robustness.\n5.5.1 Features\n• Clock sources\n– 16 MHz high-speed internal RC oscillator (HSI)– 128 kHz low-speed internal RC (LSI)– 1-16 MHz high-speed external crystal (HSE)– Up to 16 MHz high-speed user-external clock (HSE user-ext)\n• Reset : After reset the microcontroller restarts by default with an internal 2-MHz clock \n(16 MHz/8). The clock source and speed can be changed by the application program as soon as the code execution starts.\n• Safe clock switching : Clock sources can be changed safely on the fly in Run mode \nthrough a configuration register. The clock signal is not switched until the new clock \nsource is ready. The design guarantees glitch-free switching. \n• Clock management : To reduce power consumption, the clock controller can stop the \nclock to the core or individual peripherals.\n• Wakeup : In case the device wakes up from low-power modes, the internal RC \noscillator (16 MHz/8) is used for quick star tup. After a stabilization time, the device \nswitches to the clock source that was selected before Halt mode was entered.\n• Clock security system (CSS) : The CSS permits monitoring of external clock sources \nand automatic switching to the internal RC (16 MHz/8) in case of a clock failure.\n• Configurable main clock output (CCO) : This feature permits to output a clock signal \nfor use by the application.\nProduct overview STM8AF6246/48/66/68\n18/99 DocID14952 Rev 115.5.2 16 MHz high-speed intern al RC oscillator (HSI)\n• Default clock after reset 2 MHz (16 MHz/8)\n• Fast wakeup time\nUser trimming\nThe register CLK_HSITRIMR with three trimming bits plus one additional bit for the sign \npermits frequency tuning by the application program. The adjustment range covers all possible frequency variations versus supply voltage and temperature. This trimming does \nnot change the initial production setting.\nFor reason of compatibility with other devices from the STM8A family, a special mode with only two trimming bits plus sign can be selected. This selection is controlled \nwith the HSITRIM0 bit in the option byte registers OPT3 and NOPT3.\nDocID14952 Rev 11 19/99STM8AF6246/48/66/68 Product overview\n935.5.3 128 kHz low-speed inte rnal RC oscillator (LSI)\nThe frequency of this clock is 128 kHz and it is independent from the main clock. It drives \nthe independent watchdog or the AWU wakeup timer. \nIn systems which do not need independent clock sources for the watchdog counters, the 128 kHz signal can be used as the system cloc k. This configuration has to be enabled by \nsetting an option byte (OPT3/OPT3N, bit LSI_EN).\n5.5.4 16 MHz high-speed exter nal crystal oscillator (HSE)\nThe external high-speed crystal oscillator can be selected to deliver  the main clock in \nnormal Run mode. It operates with qu artz crystals and ceramic resonators.\n• Frequency range: 1 MHz to 16 MHz\n• Crystal oscillation mode:  preferred fundamental\n• I/Os: standard I/O pins mult iplexed with OSCIN, OSCOUT\n5.5.5 External clock input\nAn external clock signal can be  applied to the OSCIN input pin of the crystal oscillator. The \nfrequency range is 0 to 16 MHz.\n5.5.6 Clock security system (CSS)\nThe clock security system protects against a syst em stall in case of an external crystal clock \nfailure. \nIn case of a clock failure an interrupt is generated and the high-speed internal clock (HSI) is automatically selected with a fr equency of 2 MHz (16 MHz/8). \n          Table 2. Peripheral clock gating bit a ssignments in CLK_PC KENR1/2 registers\nBitPeriphera\nl clockBitPeripheral \nclockBitPeripheral \nclockBitPeripheral \nclock\nPCKEN17 TIM1 PCKEN13 LINUART PCKEN27 Reserved PCKEN23 ADC\nPCKEN16 TIM3 PCKEN12 Reserved PCKEN26 Reserved PCKEN22 AWU\nPCKEN15 TIM2 PCKEN11 SPI PCKEN25 Reserved PCKEN21 Reserved\nPCKEN14 TIM4 PCKEN10 I2C PCKEN24 Reserved PCKEN20 Reserved\nProduct overview STM8AF6246/48/66/68\n20/99 DocID14952 Rev 115.6 Low-power operating modes\nFor efficient power management , the application can be put in one of four different low \npower modes. Users can configure each mode  to obtain the best compromise between \nlowest power consumption, fastest star t-up time and available wakeup sources.\n• Wait mode\nIn this mode, the CPU is stopped but perip herals are kept running. The wakeup is \nperformed by an internal or external interr upt or reset.\n• Active-halt mode with regulator on\nIn this mode, the CPU and peripheral clocks are stopped. An internal wakeup is \ngenerated at programmable intervals by th e auto wake up unit (AWU). The main \nvoltage regulator is kept powered on, so current consumption is higher than in Active-halt mode with regulator off, but the wakeup time is faster. Wakeup is triggered by the internal AWU interrupt, ex ternal interrupt or reset.\n• Active-halt mode with regulator off\nThis mode is the same as Active-halt with re gulator on, except that the main voltage \nregulator is powered off, so the wake up time is slower.\n• Halt mode\nCPU and peripheral clocks ar e stopped, the main voltage regulator is powered off.\nWakeup is triggered by external event or reset.\nIn all modes the CPU and peri pherals remain perm anently powered on, the system clock is \napplied only to selected modules. The RAM content is preserved and the brown-out reset circuit remains activated.\n5.7 Timers\n5.7.1 Watchdog timers\nThe watchdog system is based on two independent timers providing maximum security to the applications. The watchdog timer activity  is controlled by the application program or \noption bytes. Once the watchdog is activated, it cannot be disabled by the user program \nwithout going through reset.\nWindow watchdog timer\nThe window watchdog is used to detect the occurrence of a software fault, usually generated by external interferences or by un expected logical conditions, which cause the \napplication program to abandon its normal sequence.\nThe window function can be used to trim the watchdog behavior to match the application timing perfectly. The application software must refresh the counter before time-out and during a limited time window. If the counter is refreshed outside this ti me window, a reset is \nissued.\nDocID14952 Rev 11 21/99STM8AF6246/48/66/68 Product overview\n93Independent watchdog timer\nThe independent watchdog peripheral can be us ed to resolve malfunctions due to hardware \nor software failures.\nIt is clocked by the 128 kHz LSI internal RC cloc k source, and thus stays active even in case \nof a CPU clock failure. If the hardware watchdog feature is enabled through the device option bits, the watchdog is automatically enabled at power-on, and generates a reset unless the key register is written by software  before the counter reaches the end of count.\n5.7.2 Auto-wakeup counter\nThis counter is used to cyclically wakeup the device in Active-halt mode. It can be clocked \nby the internal 128 kHz in ternal low-frequency RC o scillator or external clock.\nLSI clock can be internally connected to TI M3 input capture channel 1 for calibration.\n5.7.3 Beeper\nThis function generates a rectangular signal in the range of 1, 2 or 4 kHz which can be \noutput on a pin. This is useful when audi ble sounds without interference need to be \ngenerated for use in the application.\n5.7.4 Advanced control and general purpose timers\nSTM8A devices described in this datasheet, cont ain up to three 16-bit advanced control and \ngeneral purpose timers providing nine CAPCOM channels in total. A CAPCOM channel can be used either as input compare, output compare or PWM channel. These timers are named TIM1, TIM2 and TIM3.\n          Table 3. Advanced control and general purpose timers\nTimerCounter \nwidthCounter \ntypePrescaler \nfactorChannelsInverted \noutputsRepetition \ncountertrigger \nunitExternal \ntriggerBreak \ninput\nTIM1 16-bit Up/down 1 to 65536 4 3 Yes Yes Yes Yes\nTIM2 16-bit Up2n\nn = 0 to 153 None No No No No\nTIM3 16-bit Up2n\nn = 0 to 152 None No No No No\nProduct overview STM8AF6246/48/66/68\n22/99 DocID14952 Rev 11TIM1: Advanced control timer\nThis is a high-end timer designed for a wi de range of control applications. With its \ncomplementary outputs, dead-tim e control and center-aligned PW M capability, the field of \napplications is extended to motor c ontrol, lighting and bridge driver.\n• 16-bit up, down and up/down AR (auto-rel oad) counter with 16-bit fractional prescaler.\n• Four independent CAPCOM channels configurab le as input capture, output compare, \nPWM generation (edge and center aligned mode) and single pulse mode output\n• Trigger module which allows th e interaction of TIM1 with other on-chip peripherals. In \nthe present implementation it is possibl e to trigger the ADC upon a timer event.\n• External trigger to change the timer behavior depending on external signals\n• Break input to force the timer outputs into a defined state\n• Three complementary outputs with adjustable dead time\n• Interrupt sources: 4 x input capture/output compare, 1 x overflow/update, 1 x break\nTIM2 and TIM3: 16-bit general purpose timers\n• 16-bit auto-reload up-counter\n• 15-bit prescaler adjustable to fixed power of two ratios 1…32768\n• Timers with three or two individually configurable CAPCOM channels\n• Interrupt sources:  2 or 3 x input capture/output  compare, 1 x overflow/update\n5.7.5 Basic timer\nThe typical usage of this timer (TIM4) is the generation of a clock tick.\n          \n• 8-bit auto-reload, adjustable prescaler ratio to any power of two from 1 to 128\n• Clock source: master clock\n• Interrupt source: 1 x overflow/updateTable 4. TIM4\nTimerCounter \nwidthCounter \ntypePrescaler \nfactorChannelsInverted \noutputsRepetition \ncountertrigger \nunitExternal \ntriggerBreak \ninput\nTIM4 8-bit Up2n\nn = 0 to 70 None No No No No\nDocID14952 Rev 11 23/99STM8AF6246/48/66/68 Product overview\n935.8 Analog-to-digital converter (ADC)\nThe STM8A products described in this datasheet contain a 10-bit successive approximation \nADC with up to 16 multiplexed input channels, depending on the package. \nThe ADC name differs between the datasheet and STM8S series and STM8AF series 8-bit microcontrollers reference manual (see \nTable  5).\n          \nADC features\n• 10-bit resolution\n• Single and continuous conversion modes\n• Programmable prescaler: fMASTER  divided by 2 to 18\n• Conversion trigger on timer events and external events\n• Interrupt generation at end of conversion\n• Selectable alignment of 10-bit data in 2 x 8 bit result register\n• Shadow registers for data consistency\n• ADC input range: VSSA ≤  VIN ≤  VDDA\n• Analog watchdog\n• Schmitt-trigger on analog inputs can be disabled to reduce power consumption\n• Scan mode (single and continuous)\n• Dedicated result register for each conversion channel\n• Buffer mode for continuous conversion\nNote: An additional AIN12 analog input is not selectable in ADC scan mode or with analog \nwatchdog. Values converted from AIN12 ar e stored only into the ADC_DRH/ADC_DRL \nregisters.\n5.9 Communication interfaces\nThe following sections give a brief overview of the communication peripheral. Some peripheral names differ between the datasheet and STM8S series and STM8AF series 8-bit microcontrollers reference manual (see \nTable  6).\n          Table 5. ADC naming\nPeripheral name in datasheetPeripheral name in reference manual \n(RM0016) \nADC ADC1\nTable 6. Communication peripheral naming correspondence\nPeripheral name in datasheetPeripheral name in reference manual \n(RM0016) \nLINUART UART2\nProduct overview STM8AF6246/48/66/68\n24/99 DocID14952 Rev 115.9.1 Serial peripheral interface (SPI)\nThe devices covered by this datasheet contain one SPI. The SPI is available on all the \nsupported packages.\n• Maximum speed: 10 Mbit/s or fMASTER /2 both for master and slave\n• Full duplex synchronous transfers\n• Simplex synchronous transfers on two lines  with a possible bidirectional data line\n• Master or slave operation - selectable by hardware or software\n• CRC calculation\n• 1 byte Tx and Rx buffer\n• Slave mode/master mode management by hardware or software for both master and \nslave\n• Programmable clock polarity and phase\n• Programmable data order with MSB-first or LSB-first shifting\n• Dedicated transmission and receptio n flags with inte rrupt capability\n• SPI bus busy status flag\n• Hardware CRC feature for reliable communication:\n– CRC value can be transmitted as last byte in Tx mode– CRC error checking for last received byte\n5.9.2 Inter integrated circuit (I2C) interface\nThe devices covered by this datasheet contain one I2C interface. The inte rface is available \non all the supported packages.\n• I2C master features:\n– Clock generation– Start and stop generation\n• I\n2C slave features:\n– Programmable I2C address detection\n– Stop bit detection\n• Generation and detection of 7-bit/10-bit addressing and general call\n• Supports different communication speeds:\n– Standard speed (up to 100 kHz),– Fast speed (up to 400 kHz)\n• Status flags:\n– Transmitter/receiver mode flag– End-of-byte transmission flag–I\n2C busy flag\n• Error flags:\n– Arbitration lost condition for master mode– Acknowledgment failure after address/data transmission– Detection of misplaced start or stop condition– Overrun/underrun if clock stretching is disabled\nDocID14952 Rev 11 25/99STM8AF6246/48/66/68 Product overview\n93• Interrupt:\n– Successful address/data communication– Error condition– Wakeup from Halt\n• Wakeup from Halt on address detection in slave mode\n5.9.3 Universal asynch ronous receiver/transmitter with LIN support  \n(LINUART)\nThe devices covered by this datasheet contain one LINUART interface. The interface is \navailable on all the supported packages. The LINUART is an asynchronous serial communication interface which supports ext ensive LIN functions tailored for LIN slave \napplications. In LIN mode it is compliant to the LIN standards rev 1.2 to rev 2.2.\nDetailed feature list:\nLIN mode\nMaster mode:\n• LIN break and delimiter generation\n• LIN break and delimiter detection with separate flag and interrupt source for read back \nchecking.\nSlave mode:\n• Autonomous header handling – one single interrupt per valid header\n• Mute mode to filter responses\n• Identifier parity error checking\n• LIN automatic resynchronizat ion, allowing operation with internal RC oscillator (HSI) \nclock source\n• Break detection at any time, even during a byte reception\n• Header errors detection:\n– Delimiter too short– Synch field error– Deviation error (if automatic resynchronization is enabled)– Framing error in synch field or identifier field– Header time-out\nProduct overview STM8AF6246/48/66/68\n26/99 DocID14952 Rev 11UART mode\n• Full duplex, asynchronous communications - NRZ standard format (mark/space)\n• High-precision baud rate generator\n– A common programmable transmit and receive baud rates up to fMASTER /16\n• Programmable data word length (8 or 9 bits) – 1 or 2 stop bits – parity control\n• Separate enable bits for transmitter and receiver\n• Error detection flags\n• Reduced power consumption mode\n• Multi-processor communication - enter mute  mode if address match does not occur\n• Wakeup from mute mode (by idle line detection or address mark detection)\n• Two receiver wakeup modes:\n– Address bit (MSB)– Idle line\n5.10 Input/output specifications\nThe product features four different I/O types:\n• Standard I/O 2 MHz\n• Fast I/O up to 10 MHz\n• High sink 8 mA, 2 MHz\n• True open drain (I2C interface)\nTo decrease EMI (electromagnetic interference), high sink I/Os have a limited maximum \nslew rate. The rise and fall times ar e similar to those of standard I/Os. \nThe analog inputs are equipped with a low leakage analog switch. Additionally, the schmitt-\ntrigger input stage on the analog I/Os can be disabled in order to reduce the device standby consumption. \nSTM8A I/Os are designed to withstand current in jection. For a negative injection current of \n4 mA, the resulting leakage current in the adjacent input does not exceed 1  µA. Thanks to \nthis feature, external protec tion diodes against current injection are no longer required.\nDocID14952 Rev 11 27/99STM8AF6246/48/66/68 Pinouts and pin description\n936 Pinouts and pin description\n6.1 Package pinouts\nFigure 3. VFQFPN/LQFP 32-pin pinout\n1. (HS) high sink capability.\nI2C_SCL/AIN4/PB4\nTIM1_ETR/AIN3/PB3\nTIM1_CH3N/AIN2/PB2\nTIM1_CH2N/AIN1/PB1TIM1_CH1N/AIN0/PB0V\nDDA\nVSSA\nI2C_SDA/AIN5/PB532 31 30 29 28 27 26 25\n24\n23\n222120191817\n9 1 01 11 21 31 41 5 161\n234\n5\n6 7 8 \nVCAP\nVDD\nVDDIO\nAIN12/PF4NRST\nOSCIN/PA1\nOSCOUT/PA2\nVSS\nPC3 (HS)/TIM1_CH3PC2 (HS)/TIM1_CH2\nPC1 (HS)/TIM1_CH1PE5/SPI_NSSPC7/SPI_MISO\nPC6/SPI_MOSI\nPC5/SPI_SCK\nPC4 (HS)/TIM1_CH4PD3 (HS)/TIM2_CH2/ADC_ETR\nPD2 (HS)/TIM3_CH1/TIM2_CH3\nPD1 (HS)/SWIMPD0 (HS)/TIM3_CH2/CLK_CCO/TIM1_BRK PD7/TLI\nPD6/LINUART_RXPD5/LINUART_TX PD4 (HS)/TIM2_CH1/BEEP \nPinouts and pin description STM8AF6246/48/66/68\n28/99 DocID14952 Rev 11Figure 4. LQFP 48-pin pinout\n2. (HS) high sink capability.\n          Table 7. Legend/abbreviation\nType I= input, O = output, S = power supply\nLevel Input CM = CMOS (standard for all I/Os)\nOutput HS = High sink (8 mA)\nOutput speed O1 = Standard (up to 2 MHz)  \nO2 = Fast (up to 10 MHz)  \nO3 = Fast/slow programmability with slow as default state after reset  \nO4 = Fast/slow programmability with fast as default state after reset\nPort and control \nconfigurationInput float = floating, wpu = weak pull-up\nOutput T = true open drain, OD = open drain, PP = push pull\nReset stateBold X (pin state after reset release).\nUnless otherwise specified, the pin state is the same during the reset phase (i.e.\n“under reset”) and after internal reset release (i.e. at reset state).44 43 42 41 40 39 38 37\n36\n35\n34\n3332\n31\n30\n29\n28\n27\n26\n25\n242312\n13 14 15 16 17 18 19 20 21 221\n23\n4\n56 7 \n8 \n9 \n10\n1148 47 46 45\nPA6\nAIN8/PE7PC1 (HS)/TIM1_CH1\nPE5/SPI_NSSPG1AIN9/PE6PD3 (HS)/TIM2_CH2/ADC_ETR\nPD2 (HS)/TIM3_CH1\nPE0/CLK_CCO \nPE1/I2C_SCL \nPE2/I2C_SDA\nPE3/TIM1_BKIN PD7/TLI\nPD6/LINUART_RXPD5/LINUART_TXPD4 (HS)/TIM2_CH1/BEEP\nPD1 (HS)/SWIM\nPD0 (HS)/TIM3_CH2\nVSSIO_2\nPC5/SPI_SCK\nPC4 (HS)/TIM1_CH4\nPC3 (HS)/TIM1_CH3\nPC2 (HS)/TIM1_CH2PG0\nPC7/SPI_MISO\nPC6/SPI_MOSI\nVDDIO_2AIN7/PB7\nAIN6/PB6AIN5/PB5AIN4/PB4\nTIM1_ETR/AIN3/PB3\nTIM1_CH3N/AIN2/PB2TIM1_CH2N/AIN1/PB1TIM1_CH1N/AIN0/PB0V\nDDA\nVSSAVSS\nVCAP\nVDD\nVDDIO_1\nTIM2_CH3/PA3\nPA4\nPA5NRST\nOSCIN/PA1\nOSCOUT/PA2\nVSSIO_1\nDocID14952 Rev 11 29/99STM8AF6246/48/66/68 Pinouts and pin description\n93          Table 8. STM8AF6246/48/66/68 (32 Kbyte) microcontroller pin description(1)(2)  \nPin \nnumber\nPin name\nTypeInput Output\nMain function\n(after reset)Default alternate \nfunctionAlternate \nfunction after \nremap\n[option bit]LQFP48\nVFQFPN/LQFP32\nfloating\nwpu\nExt. interrupt \nHigh sink\nSpeed\nOD\nPP\n1 1 NRST I/O - X - - - - - Reset -\n22 P A 1 / O S C I N(3)I/O XX-- O 1 X X Port A1 Resonator/crystal in -\n3 3 PA2/OSCOUT I/O XXX- O 1 X X Port A2 Resonator/crystal out -\n4- VSSIO_1 S - - - - - - - I/O ground -\n54 VSS S - - - - - - - Digital ground -\n6 5 VCAP S - - - - - - - 1.8 V regulator capacitor -\n76 VDD S - - - - - - - Digital power supply -\n87 VDDIO_1 S - - - - - - - I/O power supply -\n- 8 PF4/AIN12(4)(5)I/O XX- O 1 X X Port F4 Analog input 12 -\n9 - PA3/TIM2_CH3 I/O XXX- O 1 X X Port A3 Timer 2 - channel 3TIM3_CH1 \n[AFR1]\n10 - PA4 I/O XXX- O 3 X X Port A4 -\n11 - PA5 I/O XXX- O 3 X X Port A5 -\n12 - PA6 I/O XXX- O 3 X X Port A6 -\n13 9 VDDA S - - - - - - - Analog power supply -\n14 10 VSSA S - - - - - - - Analog ground -\n15 - PB7/AIN7 I/O XXX- O 1 X X Port B7 Analog input 7 -\n16 - PB6/AIN6 I/O XXX- O 1 X X Port B6 Analog input 6 -\n17 11 PB5/AIN5 I/O XXX- O 1 X X Port B5 Analog input 5I2C_SDA  \n[AFR6]\n18 12 PB4/AIN4 I/O XXX- O 1 X X Port B4 Analog input 4I2C_SCL  \n[AFR6]\n19 13 PB3/AIN3 I/O XXX- O 1 X X Port B3 Analog input 3TIM1_ETR  \n[AFR5]\n20 14 PB2/AIN2 I/O XXX- O 1 X X Port B2 Analog input TIM1_NCC3  \n[AFR5]\n21 15 PB1/AIN1 I/O XXX- O 1 X X Port B1 Analog input 1TIM1_NCC2  \n[AFR5]\n22 16 PB0/AIN0 I/O XXX- O 1 X X Port B0 Analog input 0TIM1_NCC1  \n[AFR5]\n23 - PE7/AIN8 I/O XX- O 1 X X Port E7 Analog input 8 -\nPinouts and pin description STM8AF6246/48/66/68\n30/99 DocID14952 Rev 1124 PE6/AIN9 I/O XXX- O 1 X X Port E7 Analog input 9 -\n25 17 PE5/SPI_NSS I/O XXX- O 1 X X Port E5 SPI master/slave select -\n26 18 PC1/TIM1_CH1 I/O XXX H S O 3 X X Port C1 Timer 1 - channel 1 -\n27 19 PC2/TIM1_CH2 I/O XXX H S O 3 X X Port C2 Timer 1- channel 2 -\n28 20 PC3/TIM1_CH3 I/O XXX H S O 3 X X Port C3 Timer 1 - channel 3 -\n29 21 PC4/TIM1_CH4 I/O XXX H S O 3 X X Port C4 Timer 1 - channel 4 -\n30 22 PC5/SPI_SCK I/O XXX O 3 X X Port C5 SPI clock -\n31 - VSSIO_2 S - - - - - - - I/O ground -\n32 - VDDIO_2 S - - - - - - - I/O power supply -\n33 23 PC6/SPI_MOSI I/O XXX- O 3 X X Port C6SPI master out/  \nslave in-\n34 24 PC7/SPI_MISO I/O XXX- O 3 X X Port C7 SPI master in/ slave out -\n35 - PG0 I/O XX-- O 1 X X Port G0 --\n36 - PG1 I/O XX-- O 1 X X Port G1 --\n37 - PE3/TIM1_BKIN I/O XXX- O 1 X X Port E3 Timer 1 - break input -\n38 - PE2/I2C_SDA I/O X -X- O 1 T(6)-Port E2 I2C data -\n39 - PE1/I2C_SCL I/O X -X- O 1 T(6)-Port E1 I2C clock -\n40 - PE0/CLK_CCO I/O XXX- O 3 X X Port E0Configurable clock \noutput-\n41 25 PD0/TIM3_CH2 I/O XXX H S O 3 X X Port D0 Timer 3 - channel 2TIM1_BKIN \n[AFR3]/ CLK_CCO \n[AFR2]\n42 26 PD1/SWIM\n(7)I/O X X XH S O 4X X Port D1 SWIM data interface -\n43 27 PD2/TIM3_CH1 I/O XXX H S O 3 X X Port D2 Timer 3 - channel 1TIM2_CH3 \n[AFR1]\n44 28 PD3/TIM2_CH2 I/O XXX H S O 3 X X Port D3 Timer 2 - channel 2ADC_ETR \n[AFR0] \n45 29PD4/TIM2_CH1/  \nBEEPI/O XXX H S O 3 X X Port D4 Timer 2 - channel 1BEEP output \n[AFR7]\n46 30PD5/ \nLINUART_TXI/O XXX- O 1 X X Port D5 LINUART data transmit -Table 8. STM8AF6246/48/66/68 (32 Kb yte) microcontroller pin description(1)(2)  (continued)\nPin \nnumber\nPin name\nTypeInput Output\nMain function\n(after reset)Default alternate \nfunctionAlternate \nfunction after \nremap\n[option bit]LQFP48\nVFQFPN/LQFP32\nfloating\nwpu\nExt. interrupt \nHigh sink\nSpeed\nOD\nPP\nDocID14952 Rev 11 31/99STM8AF6246/48/66/68 Pinouts and pin description\n936.2 Alternate func tion remapping\nAs shown in the rightmost column of Table  8, some alternate functions can be remapped at \ndifferent I/O ports by programming one of eight  AFR (alternate function remap) option bits. \nRefer to Section  9: Option bytes on page  44. When the remapping option is active, the \ndefault alternate function is no longer available.\nTo use an alternate function, the corresponding peripheral must be enabled in the peripheral \nregisters. \nAlternate function remapping does not effect  GPIO capabilities of the I/O ports (see the \nGPIO section of STM8S series and STM8AF se ries 8-bit microcontrollers reference manual, \nRM0016). 47 31PD6/ \nLINUART_RXI/O XXX- O 1 X X Port D6 LINUART data receive -\n48 32 PD7/TLI(8)I/O XXX- O 1 X X Port D7 Top level interrupt -\n1. Refer to Table 7  for the definition of the abbreviations. \n2. Reset state is shown in bold.3. In Halt/Active-halt mode this pad behaves in the following way:  \n- the input/output path is disabled  \n- if the HSE clock is used for wakeup,  the internal weak  pull up is disabled  \n- if the HSE clock is off, internal weak pull up setting from corresponding OR bit is used  \nBy managing the OR bit correctly, it must be ensured that  the pad is not left floating during Halt/Active-halt.\n4. On this pin, a pull-up re sistor as specified in Table 35 . I/O static characteristics is enab led during the reset phase of the \nproduct. \n5. AIN12 is not selectable in ADC scan mode or with analog watchdog.6. In the open-drain output column, ‘T’ defines a true open-drai n I/O (P-buffer, week pull-up, and protection diode to V\nDD are \nnot implemented)\n7. The PD1 pin is in input pull-up during the reset phase and after reset release.8. If this pin is configured as interr upt pin, it will trigger the TLI.Table 8. STM8AF6246/48/66/68 (32 Kb yte) microcontroller pin description(1)(2)  (continued)\nPin \nnumber\nPin name\nTypeInput Output\nMain function\n(after reset)Default alternate \nfunctionAlternate \nfunction after \nremap\n[option bit]LQFP48\nVFQFPN/LQFP32\nfloating\nwpu\nExt. interrupt \nHigh sink\nSpeed\nOD\nPP\nMemory and register map STM8AF6246/48/66/68\n32/99 DocID14952 Rev 117 Memory and register map\n7.1 Memory map\nFigure 5. Register and memory map of STM8A products \n8S\x03WR\x03\x16\x15\x03.E\\WH\x03RI\x03)ODVK\n\x03SURJUDP\x03PHPRU\\\x13[\x13\x13\x03\x13\x13\x13\x13\n5$0\n5$0\x03HQG\x0b\x15\x03.E\\WH\x0c\n\x03VWDFN\n\x13[\x13\x13\x03\x17\x17\x13\x13XS\x03WR\x03\x14\x03.E\\WH\x03GDWD\x03((35205HVHUYHG\n5HVHUYHG\n)ODVK\x03SURJUDP\x03PHPRU\\\x03HQG,QWHUUXSW\x03YHFWRUV\x13[\x13\x13\x03\x19\x13\x13\x13\n\x13[\x13\x13\x03\x19\x1b\x13\x13\n\x13[\x13\x13\x03\x1b\x13\x13\x13&38\x126:,0\x12GHEXJ\x12,7&\nUHJLVWHUV\x13[\x13\x13\x03\x1a)\x13\x135HVHUYHG\n5HVHUYHG2SWLRQ\x03E\\WHV\n\x13[\x13\x13\x03\x17\x1c\x13\x13\x13[\x13\x13\x03\x17\x1b\x13\x13\x13[\x13\x13\x03\x17\x13\x13\x13\n\x13[\x13\x13\x03\x1b\x13\x1b\x135HVHUYHG+DUGZDUH\x03UHJLVWHUV\x13[\x13\x13\x03\x18\x13\x13\x13\n\x13[\x13\x13\x03\x18\x1b\x14\'\n06\x16\x1a\x1a\x1c\x189\x14\x15\x03.E\\WH\x03RI\x03%RRW\x03520\x03\nDocID14952 Rev 11 33/99STM8AF6246/48/66/68 Memory and register map\n93          \n7.2 Register map\nIn this section the memory and register map of the devices covered by this datasheet is \ndescribed. For a detailed description of the functionality of the registers, refer to STM8S series and STM8AF series 8-bit microcontrollers reference manual, RM0016.\n          Table 9. Memory model for the devices covered in this datasheet \nFlash program \nmemory sizeFlash program \nmemory end \naddressRAM sizeRAM end \naddressStack roll-over \naddress\n32K 0x00 0FFFF\n2K 0x00 07FF 0x00 0600\n16K 0x00 0BFFF\nTable 10. I/O port hardware register map \nAddress Block Register label Register nameReset \nstatus\n0x00 5000\nPort APA_ODR Port A data output latch register 0x00\n0x00 5001 PA_IDR Port A input pin value register 0xXX(1)\n0x00 5002 PA_DDR Port A data direction register 0x00\n0x00 5003 PA_CR1 Port A control register 1 0x00\n0x00 5004 PA_CR2 Port A control register 2 0x000x00 5005\nPort BPB_ODR Port B data output latch register 0x00\n0x00 5006 PB_IDR Port B input pin value register 0xXX\n(1)\n0x00 5007 PB_DDR Port B data direction register 0x00\n0x00 5008 PB_CR1 Port B control register 1 0x00\n0x00 5009 PB_CR2 Port B control register 2 0x00\n0x00 500A\nPort CPC_ODR Port C data output latch register 0x00\n0x00 500B PB_IDR Port C input pin value register 0xXX(1)\n0x00 500C PC_DDR Port C data direction register 0x000x00 500D PC_CR1 Port C control register 1 0x00\n0x00 500E PC_CR2 Port C control register 2 0x00\n0x00 500F\nPort DPD_ODR Port D data output latch register 0x00\n0x00 5010 PD_IDR Port D input pin value register 0xXX\n(1)\n0x00 5011 PD_DDR Port D data direction register 0x00\n0x00 5012 PD_CR1 Port D control register 1 0x02\n0x00 5013 PD_CR2 Port D control register 2 0x00\nMemory and register map STM8AF6246/48/66/68\n34/99 DocID14952 Rev 11          0x00 5014\nPort EPE_ODR Port E data output latch register 0x00\n0x00 5015 PE_IDR Port E input pin value register 0xXX(1)\n0x00 5016 PE_DDR Port E data direction register 0x00\n0x00 5017 PE_CR1 Port E control register 1 0x00\n0x00 5018 PE_CR2 Port E control register 2 0x000x00 5019\nPort FPF_ODR Port F data output latch register 0x00\n0x00 501A PF_IDR Port F input pin value register 0xXX\n(1)\n0x00 501B PF_DDR Port F data direction register 0x00\n0x00 501C PF_CR1 Port F control register 1 0x00\n0x00 501D PF_CR2 Port F control register 2 0x00\n0x00 501E\nPort GPG_ODR Port G data output latch register 0x00\n0x00 501F PG_IDR Port G input pin value register 0xXX(1)\n0x00 5020 PG_DDR Port G data direction register 0x00\n0x00 5021 PG_CR1 Port G control register 1 0x00\n0x00 5022 PG_CR2 Port G control register 2 0x00\n1. Depends on the external circuitry.\nTable 11. General hardware register map \nAddress Block Register label Register nameReset \nstatus\n0x00 505A\nFlashFLASH_CR1 Flash control register 1 0x00\n0x00 505B FLASH_CR2 Flash control register 2 0x00\n0x00 505C FLASH_NCR2 Flash complementary control register 2 0xFF\n0x00 505D FLASH_FPR Flash protection register 0x00\n0x00 505E FLASH_NFPRFlash complementary protection \nregister 0xFF\n0x00 505F FLASH_IAPSRFlash in-application programming \nstatus register0x40\n0x00 5060 to \n0x00 5061Reserved area (2 bytes)\n0x00 5062 Flash FLASH_PUKRFlash Program memory unprotection \nregister0x00\n0x00 5063 Reserved area (1 byte)\n0x00 5064 Flash FLASH_DUKR Data EEPR OM unprotection register 0x00\n0x00 5065 to \n0x00 509FReserved area (59 bytes)Table 10. I/O port hardware register map (continued)\nAddress Block Register label Register nameReset \nstatus\nDocID14952 Rev 11 35/99STM8AF6246/48/66/68 Memory and register map\n930x00 50A0\nITCEXTI_CR1 External interrupt control register 1 0x00\n0x00 50A1 EXTI_CR2 External interrupt control register 2 0x00\n0x00 50A2 to \n0x00 50B2Reserved area (17 bytes)\n0x00 50B3 RST RST_SR Reset status register 0xXX(1)\n0x00 50B4 to \n0x00 50BFReserved area (12 bytes)\n0x00 50C0\nCLKCLK_ICKR Internal clock control register 0x01\n0x00 50C1 CLK_ECKR External clock control register 0x00\n0x00 50C2 Reserved area (1 byte)\n0x00 50C3 \nCLK CLK_CMSR Clock master status register 0xE1 \n0x00 50C4 CLK_SWR Clock mast er switch register 0xE1 \n0x00 50C5 CLK_SWCR Clock swit ch control register 0xXX \n0x00 50C6 CLK_CKDIVR Clock divider register 0x18 \n0x00 50C7 CLK_PCKENR1 Peripheral clock gating register 1 0xFF \n0x00 50C8 CLK_CSSR Clock security system register 0x00 0x00 50C9 CLK_CCOR Configurable clock control register 0x00 \n0x00 50CA CLK_PCKENR2 Peripheral clock gating register 2 0xFF \n0x00 50CB Reserved area (1 byte)\n0x00 50CC \nCLKCLK_HSITRIMR HSI clock calibration trimming register 0x00\n0x00 50CD CLK_SWIMCCR SWIM clock control register 0bXXXX \nXXX0 \n0x00 50CE \nto 0x00 50D0 Reserved area (3 bytes) \n0x00 50D1 \nWWDG WWDG_CR WWDG contro l register 0x7F \n0x00 50D2 WWDG_WR WWDR window register 0x7F \n0x00 50D3 to \n0x00 50DF Reserved area (13 bytes) \n0x00 50E0 \nIWDG IWDG_KR IWDG key register 0xXX\n(2)\n0x00 50E1 IWDG_PR IWDG prescaler register 0x00 \n0x00 50E2 IWDG_RLR IWDG reload register 0xFF \n0x00 50E3 to \n0x00 50EF Reserved area (13 bytes) \n0x00 50F0 \nAWU AWU_CSR1 AWU control/status register 1 0x00 \n0x00 50F1 AWU_APR AWU asynchronous prescaler buffer \nregister 0x3F \n0x00 50F2 AWU_TBR AWU timebase selection register 0x00 Table 11. General hardware register map (continued)\nAddress Block Register label Register nameReset \nstatus\nMemory and register map STM8AF6246/48/66/68\n36/99 DocID14952 Rev 110x00 50F3 BEEP BEEP_CSR BEEP contro l/status register 0x1F \n0x00 50F4 to \n0x00 50FF Reserved area (12 bytes) \n0x00 5200 \nSPI SPI_CR1 SPI control register 1 0x00 \n0x00 5201 SPI_CR2 SPI control register 2 0x00 0x00 5202 SPI_ICR SPI interrupt control register 0x00 \n0x00 5203 SPI_SR SPI stat us register 0x02 \n0x00 5204 SPI_DR SPI data register 0x00 0x00 5205 SPI_CRCPR SPI CRC polynomial register 0x07 \n0x00 5206 SPI_RXCRCR SPI Rx CRC register 0xFF \n0x00 5207 SPI_TXCRCR SPI Tx CRC register 0xFF \n0x00 5208 to \n0x00 520F Reserved area (8 bytes) \n0x00 5210 \nI2CI2C_CR1 I2C control register 1 0x00 \n0x00 5211 I2C_CR2 I2C control register 2 0x00 \n0x00 5212 I2C_FREQR I2C frequency register 0x00 0x00 5213 I2C_OARL I2C own address register low 0x00 \n0x00 5214 I2C_OARH I2C own address register high 0x00 \n0x00 5215  Reserved area (1 byte) 0x00 5216 I2C_DR I2C data register 0x00 \n0x00 5217 I2C_SR1 I2C status register 1 0x00 \n0x00 5218 I2C_SR2 I2C status register 2 0x00 0x00 5219 I2C_SR3 I2C status register 3 0x00 \n0x00 521A I2C_ITR I2C interrupt control register 0x00 \n0x00 521B I2C_CCRL I2C clock control register low 0x00 \n0x00 521C I2C_CCRH I2C clock control register high 0x00 \n0x00 521D I2C_TRISER I2C TRISE register 0x02 \n0x00 521E to \n0x00 523FReserved area (24 bytes) Table 11. General hardware register map (continued)\nAddress Block Register label Register nameReset \nstatus\nDocID14952 Rev 11 37/99STM8AF6246/48/66/68 Memory and register map\n930x00 5240 \nLINUARTUART2_SR LINUART status register 0xC0 \n0x00 5241 UART2_DR LINUART data register 0xXX 0x00 5242 UART2_BRR1 LINUART baud rate register 1 0x00 \n0x00 5243 UART2_BRR2 LINUART baud rate register 2 0x00 \n0x00 5244 UART2_CR1 LINUART control register 1 0x00 \n0x00 5245 UART2_CR2 LINUART control register 2 0x00 \n0x00 5246 UART2_CR3 LINUART control register 3 0x00 \n0x00 5247 UART2_CR4 LINUART control register 4 0x00 \n0x00 5248  Reserved\n0x00 5249 UART2_CR6 LINUART control register 6 0x00 \n0x00 524A to \n0x00 524F Reserved area (6 bytes)\n0x00 5250 \nTIM1 TIM1_CR1 TIM1 control register 1 0x00 \n0x00 5251 TIM1_CR2 TIM1 control register 2 0x00 \n0x00 5252 TIM1_SMCR TIM1 slave mode control register 0x00 \n0x00 5253 TIM1_ETR TIM1 exter nal trigger register 0x00 \n0x00 5254 TIM1_IER TIM1 Interrupt enable register 0x00 \n0x00 5255 TIM1_SR1 TIM1 status register 1 0x00 \n0x00 5256 TIM1_SR2 TIM1 status register 2 0x00 0x00 5257 TIM1_EGR TIM1 event generation register 0x00 \n0x00 5258 TIM1_CCMR1 TIM1 captur e/compare mode register 1 0x00 \n0x00 5259 TIM1_CCMR2 TIM1 captur e/compare mode register 2 0x00 \n0x00 525A TIM1_CCMR3 TIM1 captur e/compare mode register 3 0x00 \n0x00 525B TIM1_CCMR4 TIM1 captur e/compare mode register 4 0x00 \n0x00 525C TIM1_CCER1 TIM1 capture/compare enable register \n1 0x00 \n0x00 525D TIM1_CCER2 TIM1 capture/compare enable register \n2 0x00 \n0x00 525E TIM1_CNTRH TIM1 counter high 0x00 \n0x00 525F TIM1_CNTRL TIM1 counter low 0x00 \n0x00 5260 TIM1_PSCRH TIM1 prescaler register high 0x00 0x00 5261 TIM1_PSCRL TIM1 prescaler register low 0x00 \n0x00 5262 TIM1_ARRH TIM1 auto-reload register high 0xFF \n0x00 5263 TIM1_ARRL TIM1 auto -reload register low 0xFF \n0x00 5264 TIM1_RCR TIM1 repetit ion counter register 0x00 Table 11. General hardware register map (continued)\nAddress Block Register label Register nameReset \nstatus\nMemory and register map STM8AF6246/48/66/68\n38/99 DocID14952 Rev 110x00 5265 \nTIM1TIM1_CCR1H TIM1 capture/comp are register 1 high 0x00 \n0x00 5266 TIM1_CCR1L TIM1 capture/ compare register 1 low 0x00 \n0x00 5267 TIM1_CCR2H TIM1 capture/ compare register 2 high 0x00 \n0x00 5268 TIM1_CCR2L TIM1 capture/ compare register 2 low 0x00 \n0x00 5269 TIM1_CCR3H TIM1 capture/ compare register 3 high 0x00 \n0x00 526A TIM1_CCR3L TIM1 captur e/compare register 3 low 0x00 \n0x00 526B TIM1_CCR4H TIM1 capture/ compare register 4 high 0x00 \n0x00 526C TIM1_CCR4L TIM1 captur e/compare register 4 low 0x00 \n0x00 526D TIM1_BKR TIM1 break register 0x00 \n0x00 526E TIM1_DTR TIM1 dead-time register 0x00 \n0x00 526F TIM1_OISR TIM1 output  idle state register 0x00 \n0x00 5270 to \n0x00 52FF Reserved area (147 bytes)\n0x00 5300 \nTIM2 TIM2_CR1 TIM2 control register 1 0x00 \n0x00 5301 TIM2_IER TIM2 interrupt enable register 0x00 \n0x00 5302 TIM2_SR1  TIM2 status register 1 0x00 0x00 5303 TIM2_SR2  TIM2 status register 2 0x00 \n0x00 5304 TIM2_EGR TIM2 event generation register 0x00 \n0x00 5305 TIM2_CCMR1  TIM2 capture/compare mode register 1 0x00 0x00 5306 TIM2_CCMR2  TIM2 capture/compare mode register 2 0x00 \n0x00 5307 TIM2_CCMR3  TIM2 capture/compare mode register 3 0x00 \n0x00 5308 TIM2_CCER1 TIM2 capture/compare enable register \n1 0x00 \n0x00 5309 TIM2_CCER2 TIM2 capture/compare enable register \n2 0x00 \n0x00 530A TIM2_CNTRH TIM2 counter high 0x00 \n0x00 530B TIM2_CNTRL TIM2 counter low 0x00 \n00 530C0x TIM2_PSCR TIM2 prescaler register 0x00 0x00 530D TIM2_ARRH TIM2 auto-reload register high 0xFF \n0x00 530E TIM2_ARRL TIM2 auto -reload register low 0xFF \n0x00 530F TIM2_CCR1H TIM2 capture/ compare register 1 high 0x00 \n0x00 5310 TIM2_CCR1L TIM2 capture/ compare register 1 low 0x00 \n0x00 5311 TIM2_CCR2H TIM2 capture/compare reg. 2 high 0x00 \n0x00 5312 TIM2_CCR2L TIM2 capture/ compare register 2 low 0x00 \n0x00 5313 TIM2_CCR3H TIM2 capture/ compare register 3 high 0x00 Table 11. General hardware register map (continued)\nAddress Block Register label Register nameReset \nstatus\nDocID14952 Rev 11 39/99STM8AF6246/48/66/68 Memory and register map\n930x00 5314 TIM2 TIM2_CCR3L TIM2 captur e/compare register 3 low 0x00 \n0x00 5315 to \n0x00 531F Reserved area (11 bytes) \n0x00 5320 \nTIM3 TIM3_CR1 TIM3 control register 1 0x00 \n0x00 5321 TIM3_IER TIM3 interrupt enable register 0x00 0x00 5322 TIM3_SR1 TIM3 status register 1 0x00 \n0x00 5323 TIM3_SR2 TIM3 status register 2 0x00 \n0x00 5324 TIM3_EGR TIM3 event generation register 0x00 0x00 5325 TIM3_CCMR1 TIM3 captur e/compare mode register 1 0x00 \n0x00 5326 TIM3_CCMR2 TIM3 captur e/compare mode register 2 0x00 \n0x00 5327 TIM3_CCER1 TIM3 capture/compare enable register \n1 0x00 \n0x00 5328 TIM3_CNTRH TIM3 counter high 0x00 \n0x00 5329 TIM3_CNTRL TIM3 counter low 0x00 \n0x00 532A TIM3_PSCR TIM3 prescaler register 0x00 \n0x00 532B TIM3_ARRH TIM3 auto-reload register high 0xFF \n0x00 532C TIM3_ARRL TIM3 auto -reload register low 0xFF \n0x00 532D TIM3_CCR1H TIM3 capture/ compare register 1 high 0x00 \n0x00 532E TIM3_CCR1L TIM3 captur e/compare register 1 low 0x00 \n0x00 532F TIM3_CCR2H TIM3 capture/ compare register 2 high 0x00 \n0x00 5330 TIM3_CCR2L TIM3 capture/ compare register 2 low 0x00 \n0x00 5331 to \n0x00 533F Reserved area (15 bytes) \n0x00 5340 \nTIM4 TIM4_CR1 TIM4 control register 1 0x00 \n0x00 5341 TIM4_IER TIM4 interrupt enable register 0x00 0x00 5342 TIM4_SR TIM4 st atus register 0x00 \n0x00 5343 TIM4_EGR TIM4 event generation register 0x00 \n0x00 5344 TIM4_CNTR TIM4 counter 0x00 0x00 5345 TIM4_PSCR TIM4 prescaler register 0x00 \n0x00 5346 TIM4_ARR TIM4 auto-reload register 0xFF \n0x00 5347 to \n0x00 53DF Reserved area (185 bytes) Table 11. General hardware register map (continued)\nAddress Block Register label Register nameReset \nstatus\nMemory and register map STM8AF6246/48/66/68\n40/99 DocID14952 Rev 110x00 53E0\nADCADC _DB0RH ADC data buffer register 0 high 0x00\n0x00 53E1 ADC _DB0RL ADC data buffer register 0 low 0x00\n0x00 53E2 ADC _DB1RH ADC data buffer register 1 high 0x00\n0x00 53E3 ADC _DB1RL ADC data buffer register 1 low 0x00\n0x00 53E4 ADC _DB2RH ADC data buffer register 2 high 0x00\n0x00 53E5 ADC _DB2RL ADC data buffer register 2 low 0x00\n0x00 53E6 ADC _DB3RH ADC data buffer register 3 high 0x00\n0x00 53E7 ADC _DB3RL ADC data buffer register 3 low 0x00\n0x00 53E8 ADC _DB4RH ADC data buffer register 4 high 0x00\n0x00 53E9 ADC _DB4RL ADC data buffer register 4 low 0x00\n0x00 53EA ADC _DB5RH ADC data buffer register 5 high 0x00\n0x00 53EB ADC _DB5RL ADC data buffer register 5 low 0x00\n0x00 53EC ADC _DB6RH ADC data buffer register 6 high 0x00\n0x00 53ED ADC _DB6RL ADC data buffer register 6 low 0x00\n0x00 53EE ADC _DB7RH ADC data buffer register 7 high 0x00\n0x00 53EF ADC _DB7RL ADC data buffer register 7 low 0x00\n0x00 53F0 ADC _DB8RH ADC data buffer register 8 high 0x00\n0x00 53F1 ADC _DB8RL ADC data buffer register 8 low 0x00\n0x00 53F2 ADC _DB9RH ADC data buffer register 9 high 0x00\n0x00 53F3 ADC _DB9RL ADC data buffer register 9 low 0x00\n0x00 53F4 to \n0x00 53FFReserved area (12 bytes)\n0x00 5400 \nADCADC _CSR ADC control/status register 0x00 \n0x00 5401 ADC_CR1 ADC configuration register 1 0x00 \n0x00 5402 ADC_CR2 ADC configuration register 2 0x00 0x00 5403 ADC_CR3 ADC configuration register 3 0x00 \n0x00 5404 ADC_DRH ADC data register high 0xXX \n0x00 5405 ADC_DRL ADC data register low 0xXX \n0x00 5406 ADC_TDRH ADC Schmitt trigger disable register \nhigh 0x00 \n0x00 5407 ADC_TDRL ADC Schmitt trigger disable register \nlow 0x00 \n0x00 5408 ADC _HTRH ADC high threshold register high 0xFF\n0x00 5409 ADC_HTRL ADC high threshold register low 0x03\n0x00 540A ADC _LTRH ADC low threshold register high 0x00Table 11. General hardware register map (continued)\nAddress Block Register label Register nameReset \nstatus\nDocID14952 Rev 11 41/99STM8AF6246/48/66/68 Memory and register map\n93          0x00 540B\nADCADC_LTRL ADC low threshold register low 0x00\n0x00 540C ADC _AWSRH ADC watchdog status register high 0x00\n0x00 540D ADC_AWSRL ADC watchdog status register low 0x00\n0x00 540E ADC _AWCRH ADC watchdog control register high 0x00\n0x00 540F ADC _AWCRL ADC watchdog control register low 0x00\n0x00 5410 to \n0x00 541F Reserved area (16 bytes)\n1. Depends on the previous reset source.\n2. Write only register.Table 11. General hardware register map (continued)\nAddress Block Register label Register nameReset \nstatus\nTable 12. CPU/SWIM/debug module/interrupt controller registers \nAddress Block Register label Register nameReset \nstatus\n0x00 7F00\nCPU(1)A Accumulator 0x00\n0x00 7F01 PCE Program counter extended 0x00\n0x00 7F02 PCH Program counter high 0x800x00 7F03 PCL Program counter low 0x00\n0x00 7F04 XH X index register high 0x00\n0x00 7F05 XL X index register low 0x000x00 7F06 YH Y index register high 0x00\n0x00 7F07 YL Y index register low 0x00\n0x00 7F08 SPH Stack pointer high 0x17\n(2)\n0x00 7F09 SPL Stack pointer low 0xFF\n0x00 7F0A CC Condition code register 0x28\n0x00 7F0B to \n0x00 7F5FReserved area (85 bytes)\n0x00 7F60 CPU CFG_GCR Global configuration register 0x00\n0x00 7F70 \nITC ITC_SPR1 Interrupt software priority register 1 0xFF \n0x00 7F71 ITC_SPR2 Interrupt software priority register 2 0xFF \n0x00 7F72 ITC_SPR3 Interrupt software priority register 3 0xFF \n0x00 7F73 ITC_SPR4 Interrupt software priority register 4 0xFF 0x00 7F74 ITC_SPR5 Interrupt software priority register 5 0xFF \n0x00 7F75 ITC_SPR6 Interrupt software priority register 6 0xFF \n0x00 7F76 to \n0x00 7F79Reserved area (4 bytes)\n0x00 7F80 SWIM SWIM_CSR SWIM control status register 0x00 \nMemory and register map STM8AF6246/48/66/68\n42/99 DocID14952 Rev 11          0x00 7F81 to \n0x00 7F8FReserved area (15 bytes)\n0x00 7F90 \nDM DM_BK1RE DM breakpoint 1 register extended byte 0xFF \n0x00 7F91 DM_BK1RH DM breakpoint 1 register high byte 0xFF \n0x00 7F92 DM_BK1RL DM breakpoint 1 register low byte 0xFF 0x00 7F93 DM_BK2RE DM breakpoint 2 register extended byte 0xFF \n0x00 7F94 DM_BK2RH DM breakpoint 2 register high byte 0xFF \n0x00 7F95 DM_BK2RL DM breakpoint 2 register low byte 0xFF 0x00 7F96 DM_CR1 DM debug module control register 1 0x00 \n0x00 7F97 DM_CR2 DM debug module control register 2 0x00 \n0x00 7F98 DM_CSR1 DM debug module  control/status register 1 0x10 \n0x00 7F99 DM_CSR2 DM debug module  control/status register 2 0x00 \n0x00 7F9A DM_ENFCTR DM enable function register 0xFF \n0x00 7F9B to \n0x00 7F9FReserved area (5 bytes)\n1. Accessible by debug module only\n2. Product dependent value, see Figure 5: Register and memory map of STM8A products .Table 12. CPU/SWIM/debug module/interrupt controller registers (continued)\nAddress Block Register label Register nameReset \nstatus\nTable 13. Temporary memory unprotection registers\nAddress Block Register label Register nameReset \nstatus\n0x00 5800\nTMUTMU_K1 Temporary memory unprotection key register 1 0x00\n0x00 5801 TMU_K2 Temporary memory unprotection key register 2 0x00\n0x00 5802 TMU_K3 Temporary memory unprotection key register 3 0x00\n0x00 5803 TMU_K4 Temporary memory unprotection key register 4 0x000x00 5804 TMU_K5 Temporary memory unprotection key register 5 0x00\n0x00 5805 TMU_K6 Temporary memory unprotection key register 6 0x00\n0x00 5806 TMU_K7 Temporary memory unprotection key register 7 0x000x00 5807 TMU_K8 Temporary memory unprotection key register 8 0x00\n0x00 5808 TMU_CSRTemporary memory unprotec tion control and status \nregister0x00\nDocID14952 Rev 11 43/99STM8AF6246/48/66/68 Interrupt table\n938 Interrupt table\n          Table 14. STM8A interrupt table \nPrioritySource \nblockDescriptionInterrupt vector \naddressWakeup \nfrom HaltComments\n- Reset Reset 0x00 8000 Yes User RESET vector\n- TRAP SW interrupt 0x00 8004 - -\n0 TLI External top level interrupt 0x00 8008 - -\n1 AWU Auto-wakeup from Halt 0x00 800C Yes -\n2Clock \ncontrollerMain clock controller 0x00 8010 - -\n3 MISC Ext interrupt E0 0x00 8014 Yes Port A interrupts\n4 MISC Ext interrupt E1 0x00 8018 Yes Port B interrupts\n5 MISC Ext interrupt E2 0x00 801C Yes Port C interrupts\n6 MISC Ext interrupt E3 0x00 8020 Yes Port D interrupts7 MISC Ext interrupt E4 0x00 8024 Yes Port E interrupts\n8 Reserved\n(1)\n1. All reserved and unused interrupts must be initialized with ‘IRET’ for robust programming.-- - -\n9 Reserved(1)-- - -\n10 SPI End of transfer 0x00 8030 Yes -\n11 Timer 1Update/overflow/  \ntrigger/break0x00 8034 - -\n12 Timer 1 Capture/compare 0x00 8038 - -\n13 Timer 2 Update/overflow 0x00 803C - -\n14 Timer 2 Capture/compare 0x00 8040 - -15 Timer 3 Update/overflow 0x00 8044 - -\n16 Timer 3 Capture/compare 0x00 8048 - -\n17 Reserved\n(1)-- - -\n18 Reserved(1)-- - -\n19 I2C I2C interrupts 0x00 8054 Yes -\n20 LINUART Tx comple te/error 0x00 8058 - -\n21 LINUART Receive data full reg. 0x00 805C - -\n22 ADC End of conversion 0x00 8060 - -\n23 Timer 4 Update/overflow 0x00 8064 - -\n24 EEPROMEnd of Programming/\nWrite in not allowed area0x00 8068 - -\nOption bytes STM8AF6246/48/66/68\n44/99 DocID14952 Rev 119 Option bytes\nOption bytes contain configurations for device hardware features as well as the memory \nprotection of the device. They are stored in a dedicated block of the memory. Each option \nbyte has to be stored twice, for redundancy, in a regular form (OPTx) and a complemented one (NOPTx), except for the ROP (read-out prot ection) option byte and option bytes 8 to 16.\nOption bytes can be modified in ICP mode (via SWIM) by access ing the EEPROM address \nshown in Table  15: Option bytes  below.\nOption bytes can also be modified ‘on the fly’  by the application in IAP mode, except the \nROP and UBC options that can only be toggled in ICP mode (via SWIM).\nRefer to the STM8 Flash programming manual (PM0051) and STM8 SWIM communication \nprotocol and debug module user manual (UM0470) for information on SWIM programming procedures.\n          Table 15. Option bytes \nAddr.Option \nnameOption \nbyte no.Option bits Factory \ndefault setting 765 4 3 2 1 0\n0x00 \n4800Read-out \nprotection \n(ROP)OPT0 ROP[7:0] 0x00\n0x00 \n4801 User boot \ncode \n(UBC)OPT1 Reserved UBC[5:0 ] 0x00\n0x00 \n4802NOPT1 Reserved NUBC[5:0 ] 0xFF\n0x00 \n4803Alternate \nfunction \nremapping \n(AFR)OPT2 AFR7 AFR6 AFR5 AFR4 AFR3 AFR2 AFR1 AFR0 0x00\n0x00 \n4804NOPT2NAFR\n7NAFR\n6NAFR\n5NAFR\n4NAFR\n3NAFR\n2NAFR\n1NAFR\n00xFF\n0x00 \n4805Watchdog \noptionOPT3 Reserved16MHZ\nTRIM0LSI\n_ENIWDG\n_HWWWDG \n_HWWWDG \n_HALT0x00\n0x00 \n4806NOPT3 ReservedN16MHZ\nTRIM0NLSI\n_ENNIWDG\n_HWNWWD\nG_HWNWWG\n_HALT0xFF\n0x00 \n4807Clock \noptionOPT4 ReservedEXT\nCLKCKAWU \nSELPRS\nC1 PRS\nC00x00\n0x00 \n4808NOPT4 ReservedNEXT\nCLKNCKAW\nUSELNPR\nSC1NPR\nSC00xFF\n0x00 \n4809HSE clock \nstartupOPT5 HSECNT[7:0] 0x00\n0x00 \n480ANOPT5 NHSECNT[7:0] 0xFF\nDocID14952 Rev 11 45/99STM8AF6246/48/66/68 Option bytes\n930x00 \n480B\nTMUOPT6 TMU[3:0] 0x00\n0x00 \n480CNOPT6 NTMU[3:0] 0xFF\n0x00 \n480DFlash wait \nstatesOPT7 ReservedWAIT \nSTATE0x00\n0x00 \n480ENOPT7 ReservedNWAIT \nSTATE0xFF\n0x00 \n480F Reserved\n0x00 \n4810\nTMUOPT8 TMU_KEY 1 [7:0] 0x00\n0x00 \n4811OPT9 TMU_KEY 2 [7:0] 0x00\n0x00 \n4812OPT10 TMU_KEY 3 [7:0] 0x00\n0x00 \n4813OPT11 TMU_KEY 4 [7:0] 0x00\n0x00 \n4814OPT12 TMU_KEY 5 [7:0] 0x00\n0x00 \n4815OPT13 TMU_KEY 6 [7:0] 0x00\n0x00 \n4816OPT14 TMU_KEY 7 [7:0] 0x00\n0x00 \n4817OPT15 TMU_KEY 8 [7:0] 0x00\n0x00 \n4818OPT16 TMU_MAXATT [7:0] 0xC7\n0x00 \n4819 \nto \n487DReserved\n0x00 \n487EBoot-\nloader(1)OPT17 BL [7:0] 0x00\n0x00 \n487FNOPT17 NBL[7:0] 0xFF\n1. This option consists of two bytes that must have a complementar y value in order to be valid. If the option is invalid, it has  no \neffect on EMC reset. Table 15. Option bytes (continued)\nAddr.Option \nnameOption \nbyte no.Option bits Factory \ndefault setting 765 4 3 2 1 0\nOption bytes STM8AF6246/48/66/68\n46/99 DocID14952 Rev 11          Table 16. Option byte description \nOption byte no. Description\nOPT0ROP[7:0]: Memory readout protection (ROP)\n0xAA: Enable readout protection (w rite access via SWIM protocol)  \nNote: Refer to STM8S series and STM8 AF series 8-bit microcontrollers \nreference manual (RM0016) se ction on Flash/EEPROM memory \nreadout protection for details.\nOPT1UBC[5:0]: User boot code area\n0x00: No UBC, no write-protection  \n0x01: Page 0 to 1 defined as UBC, memory write-protected  \n0x02: Page 0 to 3 defined as UBC, memory write-protected  \n0x03 to 0x3F: Pages 4 to 63 defined as UBC, memory write-protected  \nNote: Refer to STM8S series and STM8 AF series 8-bit microcontrollers \nreference manual (RM0016) sectio n on Flash/EEPROM write protection \nfor more details. \nOPT2AFR7: Alternate function  remapping option 7\n0: Port D4 alternate function = TIM2_CH1  \n1: Port D4 alternate function = BEEP\nAFR6: Alternate function  remapping option 6\n0: Port B5 alternate function = AI N5, port B4 alternate function = AIN4  \n1: Port B5 alternate function = I2C_SDA, port B4 al ternate function = \nI2C_SCL.\nAFR5: Alternate function  remapping option 5\n0: Port B3 alternate f unction = AIN3, port B2 alternate function = AIN2,  \nport B1 alternate function = AIN1, port B0 alternate function = AIN0.  \n1: Port B3 alternate function = TI M1_ETR, port B2 alternate function = \nTIM1_CH3N, port B1 alternate function = TIM1_CH2N, port B0 alternate \nfunction = TIM1_CH1N.\nAFR4: Alternate function  remapping option 4\nReserved, bit must be kept at “0”\nAFR3: Alternate function  remapping option 3\n0: Port D0 alternate function = TIM3_CH2  \n1: Port D0 alternate function = TIM1_BKIN\nAFR2: Alternate function  remapping option 2\n0: Port D0 alternate function = TIM3_CH2  \n1: Port D0 alternate function = CLK_CCO  \nNote: AFR2 option has priority over AFR3 if both are activated\nAFR1: Alternate function  remapping option 1\n0: Port A3 alternate function = TI M2_CH3, port D2 alternate function \nTIM3_CH1.  \n1: Port A3 alternate function = TI M3_CH1, port D2 alternate function \nTIM2_CH3.\nAFR0: Alternate function  remapping option 0\n0: Port D3 alternate function = TIM2_CH2  \n1: Port D3 alternate function = ADC_ETR\nDocID14952 Rev 11 47/99STM8AF6246/48/66/68 Option bytes\n93OPT3HSITRIM: Trimming option for 16 MHz internal RC oscillator\n0: 3-bit on-the-fly trimming (compa tible with devices based on the 128K \nsilicon)\n1: 4-bit on-the-fly trimming\nLSI_EN:  Low speed internal clock enable\n0: LSI clock is not available as CPU clock source  \n1: LSI clock is available as CPU clock source\nIWDG_HW:  Independent watchdog \n0: IWDG independent watchdog activated by software  \n1: IWDG independent watchdog activated by hardware\nWWDG_HW: Window watchdog activation\n0: WWDG window watchdog activated by software  \n1: WWDG window watchdog activated by hardware\nWWDG_HALT:  Window watchdog reset on Halt\n0: No reset generated on Halt if WWDG active  \n1: Reset generated on Halt if WWDG active\nOPT4EXTCLK: External clock selection\n0: External crystal connected to OSCIN/OSCOUT  \n1: External clock signal on OSCIN\nCKAWUSEL:  Auto-wakeup unit/clock\n0: LSI clock source selected for AWU  \n1: HSE clock with prescaler sele cted as clock source for AWU\nPRSC[1:0]: AWU clock prescaler\n00: Reserved  \n01: 16 MHz to 128 kHz prescaler  \n10: 8 MHz to 128 kHz prescaler  \n11: 4 MHz to 128 kHz prescaler\nOPT5HSECNT[7:0]:  HSE crystal oscillator stabilization time\nThis configures the stabilization time  to 0.5, 8, 128, and 2048 HSE cycles \nwith corresponding option byte values of 0xE1, 0xD2, 0xB4, and 0x00.\nOPT6TMU [3:0]: Enable temporary memory unprotection\n0101: TMU disabled (permanent ROP).  \nAny other value: TMU enabled.\nOPT7 Reserved\nOPT8TMU_KEY 1 [7:0]: Temporary unprotection key 0\nTemporary unprotection key: Must be different from 0x00 or 0xFF\nOPT9TMU_KEY 2 [7:0]: Temporary unprotection key 1\nTemporary unprotection key: Must be different from 0x00 or 0xFF\nOPT10TMU_KEY 3 [7:0]: Temporary unprotection key 2\nTemporary unprotection key: Must be different from 0x00 or 0xFF\nOPT11TMU_KEY 4 [7:0]: Temporary unprotection key 3\nTemporary unprotection key: Must be different from 0x00 or 0xFFTable 16. Option byte description (continued)\nOption byte no. Description\nOption bytes STM8AF6246/48/66/68\n48/99 DocID14952 Rev 11OPT12TMU_KEY 5 [7:0]: Temporary unprotection key 4\nTemporary unprotection key: Must be different from 0x00 or 0xFF\nOPT13TMU_KEY 6 [7:0]: Temporary unprotection key 5\nTemporary unprotection key: Must be different from 0x00 or 0xFF\nOPT14TMU_KEY 7 [7:0]: Temporary unprotection key 6\nTemporary unprotection key: Must be different from 0x00 or 0xFF\nOPT15TMU_KEY 8 [7:0]: Temporary unprotection key 7\nTemporary unprotection key: Must be different from 0x00 or 0xFF\nOPT16TMU_MAXATT [7:0]: TMU access failure counter \nTMU_MAXATT can be initialized with the desired value only if TMU is \ndisabled (TMU[3:0]=0101 in OPT6 option byte).\nWhen TMU is enabled, any attemp t to temporary remove the readout \nprotection by using wrong key values increments the counter.\nWhen the option byte value reaches 0x08, the Flash memory and data \nEEPROM are erased.\nOPT17BL [7:0]: Bootloader enable\nIf this option byte is set to 0x55 (complementary value 0xAA) the \nbootloader program is activated also in case of a programmed code \nmemory  \n(for more details, see the bootloader user manual, UM0560).Table 16. Option byte description (continued)\nOption byte no. Description\nDocID14952 Rev 11 49/99STM8AF6246/48/66/68 Electrical characteristics\n9310 Electrical characteristics\n10.1 Parameter conditions\nUnless otherwise specified, all voltages are referred to VSS.\n10.1.1 Minimum and maximum values\nUnless otherwise specified the minimum and ma ximum values are guaranteed in the worst \nconditions of ambient temperature, supply voltage and frequencies by tests in production on 100% of the devices with an ambient temperature at T\nA = -40 °C, TA = 25 °C, and TA = \nTAmax (given by the selected temperature range).\nData based on characterization results, design  simulation and/or technology characteristics \nare indicated in the table footnotes and are not tested in production. \n10.1.2 Typical values\nUnless otherwise specified, typical data are based on TA = 25 °C, VDD = 5.0 V. They are \ngiven only as design guidelines and are not tested.\nTypical ADC accuracy values are determined by characterization of a batch of samples from \na standard diffusion lot over the full temperature range .\n10.1.3 Typical curves\nUnless otherwise specified, all typical curves  are given only as design guidelines and are \nnot tested.\n10.1.4 Loading capacitor\nThe loading conditions used for pin parameter measurement are shown in Figure  6.\nFigure 6. Pin loading conditions\n670\x1b$\x033,1\n\x18\x13\x03S)\n06Y\x16\x1a\x1a\x1c\x199\x14\nElectrical characterist ics STM8AF6246/48/66/68\n50/99 DocID14952 Rev 1110.1.5 Pin input voltage\nThe input voltage measurement on a pin of the device is described in Figure  7.\nFigure 7. Pin input voltage\n10.2 Absolute maximum ratings\nStresses above those listed as ‘absolute maximum ratings’ may cause permanent damage \nto the device. This is a stress rating only and functional operation of the device under these \nconditions is not implied. Ex posure to maximum rating conditions for extended periods may \naffect device reliability.\n           670\x1b$\x033,1\n06Y\x16\x1a\x1a\x1c\x1a9\x149,1\nTable 17. Voltage characteristics\nSymbol Ratings Min Max Unit\nVDDx - VSS Supply voltage (including VDDA and VDDIO)(1)\n1. All power (VDD, VDDIO, VDDA) and ground (VSS, VSSIO, VSSA) pins must always be connected to the \nexternal power supply-0.3 6.5 V\nVINInput voltage on true open drain pins (PE1, PE2)(2)\n2. IINJ(PIN)  must never be exceeded. This is implicitly insured if VIN maximum is respected. If VIN maximum \ncannot be respected, the injection current must be limited externally to the IINJ(PIN)  value. A positive \ninjection is induced by VIN > VDD while a negative injection is induced by VIN < VSS. For true open-drain \npads, there is no positive injection current, and the corresponding VIN maximum must always be respectedVSS - 0.3 6.5\nV\nInput voltage on any other pin(2)VSS - 0.3 VDD + 0.3\n|VDDx - VDD| Variations between different power pins - 50\nmV\n|VSSx - VSS| Variations between all the different ground pins - 50\nVESD Electrostatic discharge voltagesee Absolute maximum ratings \n(electrical sensitivity) on \npage 76\nDocID14952 Rev 11 51/99STM8AF6246/48/66/68 Electrical characteristics\n93           \n          \n          Table 18. Current characteristics\nSymbol Ratings  Max. Unit\nIVDDIO Total current into VDDIO power lines (source)(1)(2)(3)\n1. All power (VDD, VDDIO, VDDA) and ground (VSS, VSSIO, VSSA) pins must always be connected to the \nexternal supply.\n2. The total limit applies to the sum of operation and injected currents.3. V\nDDIO includes the sum of the positive injection currents. VSSIO includes the sum of the negative injection \ncurrents.100\nmAIVSSIO Total current out of VSS IO ground lines (sink)(1)(2)(3)100\nIIOOutput current sunk by any I/O and control pin 20\nOutput current source by any I/Os and control pin -20\nIINJ(PIN)(4)\n4. This condition  is implicitly insured if VIN maximum is respected. If VIN maximum cannot be respected, the \ninjection current must be limited externally to the IINJ(PIN)  value. A positive injection is induced by VIN > VDD \nwhile a negative injection is induced by VIN < VSS. For true open-drain pads, there is no positive injection \ncurrent allowed and the corresponding VIN maximum must always be respected.Injected current on any pin ±10\nIINJ(TOT) Sum of injected currents 50\nTable 19. Thermal characteristics\nSymbol Ratings  Value Unit\nTSTG Storage temperature range -65 to 150\n°C\nTJ Maximum junction temperature 160\nTable 20. Operating lifetime(1)\n1. For detailed mission profile a nalysis, please contact the near est local ST Sales Office.Symbol Ratings  Value Unit\nOLF Conforming to AEC-Q100 rev G-40 to 125 °C Grade 1\n-40 to 150 °C Grade 0\nElectrical characterist ics STM8AF6246/48/66/68\n52/99 DocID14952 Rev 1110.3 Operating conditions\n          \nFigure 8. fCPUmax  versus VDDTable 21. General operating conditions\nSymbol Parameter  Conditions Min Max Unit\nfCPU Internal CPU clock frequency TA = -40 °C to 150 °C 0 16 MHz\nVDD/VDDIO Standard operating voltage  - 3.0 5.5 V\nVCAP(1)\n1. Care should be taken when selecting the capacitor, due to its tolerance, as well as the parameter \ndependency on temperature, DC bias and frequency in addi tion to other factors. The parameter maximum \nvalue must be respected for the full application range.CEXT: capacitance of external \ncapacitor- 470 3300 nF\nESR of external capacitor\nat 1 MHz(2)\n2. This frequency of 1 MHz as a condition for VCAP parameters is given by design of internal regulator.-0 . 3 Ω\nESL of external capacitor - 15 nH\nPDPower dissipation (all \ntemperature ranges)LQFP32 - 85\nmW VFQFPN32 - 200\nLQFP48 - 88\nTA Ambient temperatureSuffix A\n-4085\n°CSuffix C 125\nSuffix D 150\nTJ Junction temperature rangeSuffix A 90\nSuffix C 130\nSuffix D 155\n06Y\x16\x1a\x1a\x1c\x1b9\x14ϭϲ\nϭϮ\nϴ\nϰ\nϬ\n\x16\x11\x13 \x17\x11\x13 \x18\x11\x13 \x18\x11\x18)XQFWLRQDOLW\\\x03JXDUDQWHHG\n#7$\x03\x10\x17\x13\x03WR\x03\x14\x18\x13\x03\x83&\x03\x03\n6XSSO\\\x03YROWDJH\x03\x0b9\x0c)XQFWLRQDOLW\\\x03\nQRW\x03JXDUDQWHHG\x03LQ\x03WKLV\x03DUHDI\n&38\x03\x0b0+]\x0c\n\x15\x17\nDocID14952 Rev 11 53/99STM8AF6246/48/66/68 Electrical characteristics\n93          Table 22. Operating conditi ons at power-up/power-down\nSymbol Parameter Conditions Min Typ Max Unit\ntVDDVDD rise time rate - 2(1)\n1. Guaranteed by design, not tested in production- ∞\nµs/V\nVDD fall time rate - 2(1) - ∞\ntTEMPReset release delay VDD rising - 1 1.7 ms\nReset generation delay VDD falling - 3 - µs\nVIT+Power-on reset \nthreshold(2) (3)\n2. If VDD is below 3 V, the code execution is guaranteed above the VIT- and VIT+ thresholds. RAM content is \nkept. The EEPROM programming sequence must not be initiated.\n3. There is inrush current into VDD present after device power on to charge CEXT capacitor. This inrush energy \ndepends from CEXT capacitor value. For example, a CEXT of 1μF requires Q=1 μF x 1.8V = 1.8 μC.- 2.65 2.8 2.95\nV\nVIT-Brown-out reset \nthreshold- 2.58 2.73 2.88\nVHYS(BOR)Brown-out reset \nhysteresis-- 70(1) -m V\nElectrical characterist ics STM8AF6246/48/66/68\n54/99 DocID14952 Rev 1110.3.1 VCAP external capacitor\nStabilization for the main regulator is achi eved connecting an external capacitor CEXT to the \nVCAP pin. CEXT is specified in Table  21. Care should be taken to limit the series inductance \nto less than 15 nH.\nFigure 9. External capacitor CEXT\n1. Legend: ESR is the equivalent series resist ance and ESL is the equivalent inductance.\n10.3.2 Supply current characteristics\nThe current consumption is measured as described in Figure  6 on page  49 and Figure  7 on \npage  50.\nIf not explicitly stated, general condit ions of temperature and voltage apply.\n          06Y\x16\x19\x17\x1b\x1b9\x14(65\n5/HDN(6/ &\nTable 23. Total current consumption in Run, Wait and Slow mode. \nGeneral conditions for VDD apply, TA = −40 to 150 °C\nSymbol Parameter Conditions Typ Max Unit\nIDD(RUN)(1)\n1. The current due to I/O utilization is not taken into account in these values.Supply \ncurrent in \nRun modeAll peripherals \nclocked, code \nexecuted from Flash program memory, \nHSE external clock \n(without resonator)f\nCPU = 16 MHz 7.4 14\nmAfCPU = 8 MHz 4.0 7.4(2)\n2. Values not tested in produc tion. Design guidelines only.fCPU = 4 MHz 2.4 4.1(2)\nfCPU = 2 MHz 1.5 2.5\nIDD(RUN)(1)Supply \ncurrent in Run modeAll peripherals \nclocked, code executed from RAM \nand EEPROM, HSE \nexternal clock (without resonator)f\nCPU = 16 MHz 3.7 5.0\nfCPU = 8 MHz 2.2 3.0(2)\nfCPU = 4 MHz 1.4 2.0(2)\nfCPU = 2 MHz 1.0 1.5\nIDD(WFI)(1)Supply \ncurrent in \nWait mode CPU stopped, all \nperipherals off, HSE \nexternal clockfCPU = 16 MHz 1.65 2.5\nfCPU = 8 MHz 1.15 1.9(2)\nfCPU = 4 MHz 0.90 1.6(2)\nfCPU = 2 MHz 0.80 1.5\nIDD(SLOW)(1)Supply \ncurrent in Slow mode f\nCPU scaled down,  \nall peripherals off, \ncode executed from \nRAM Ext. clock 16 MHz\nfCPU = 125 kHz1.50 1.95\nLSI internal RC\nfCPU = 128 kHz1.50 1.80(2)\nDocID14952 Rev 11 55/99STM8AF6246/48/66/68 Electrical characteristics\n93          \nCurrent consumption for on-chip peripherals\n          Table 24. Total current consumption in Halt and Active-halt modes. \nGeneral conditions for VDD apply, TA = −40 to 55 °C\nSymbol ParameterConditions\nTyp Max UnitMain \nvoltage \nregulator \n(MVR)(1)Flash \nmode(2)Clock source and \nspecific \ntemperature \ncondition\nIDD(H) Supply current in Halt mode OffPower-\ndownClocks stopped 5 35(3)\nµAClocks stopped, \nTA = 25 °C52 5\nIDD(AH)Supply current in Active-halt \nmode with regulator onOnPower-\ndownExt. clock 16 MHz\nfMASTER  = 125 kHz770 900(3)\nLSI clock 128 kHz 150 230(3)\nSupply current in Active-halt \nmode with regulator offOffPower-\ndownLSI clock 128 kHz 25 42(3)\nLSI clock 128 kHz,\nTA = 25 °C25 30\ntWU(AH)Wakeup time from Active-\nhalt mode with regulator onOn\nOperating \nmodeTA = -40 to 150 °C10 30(3)\nµs\nWakeup time from Active-\nhalt mode with regulator offOff 50 80(3)\n1. Configured by the REGAH bit in the CLK_ICKR register.\n2. Configured by the AHALT bit in the FLASH_CR1 register.\n3. Data based on characterization results. Not tested in production.\nTable 25. Oscillator current consumption\nSymbol Parameter Conditions Typ Max(1)\n1. During startup, the oscillator current consumption may reach 6 mA.Unit\nIDD(OSC)HSE oscillator current \nconsumption(2)\n2. The supply current of the oscillator can be further opt imized by selecting a high quality resonator with small \nRm value. Refer to crystal manufacturer for more detailsQuartz or \nceramic \nresonator,\nCL = 33 pF\nVDD = 5 VfOSC = 24 MHz 1 2.0(3)\n3. Informative data.mAfOSC = 16 MHz 0.6 -\nfOSC = 8 MHz 0.57 -\nQuartz or \nceramic \nresonator,\nCL = 33 pF\nVDD = 3.3 VfOSC = 24 MHz 0.5 1.0(3)\nfOSC = 16 MHz 0.25 -\nfOSC = 8 MHz 0.18 -\nElectrical characterist ics STM8AF6246/48/66/68\n56/99 DocID14952 Rev 11          \n          \n          \nCurrent consumption curves\nFigure  10 to Figure  15 show typical current consumption measured with code executing in \nRAM.\n          Table 26. Programming current consumption\nSymbol Parameter Conditions Typ Max Unit\nIDD(PROG) Programming currentVDD = 5 V, -40 °C to 150 °C, \nerasing and programming data \nor Flash program memory1.0 1.7 mA\nTable 27. Typical peripheral current consumption VDD = 5.0 V(1)\n1. Typical values not tested in production. Since t he peripherals are powered by an internally regulated, \nconstant digital supply voltage,  the values are similar in the full supply voltage range.Symbol ParameterTyp. fmaster = \n2 MHzTyp. fmaster = \n16 MHzUnit\nIDD(TIM1) TIM1 supply current(2)\n2. Data based on a differential IDD measurement between no peripheral clocked and a single active \nperipheral. This measurement does not include the pad toggling consumption. 0.03 0.23\nmAIDD(TIM2) TIM2 supply current (2)0.02 0.12\nIDD(TIM3) TIM3 supply current(2)0.01 0.1\nIDD(TIM4) TIM4 supply current(2)0.004 0.03\nIDD(LINUART) LINUART supply current(2)0.03 0.11\nIDD(SPI) SPI supply current(2)0.01 0.04\nIDD(I2C) I2C supply current(2)0.02 0.06\nIDD(AWU) AWU supply current(2)0.003 0.02\nIDD(TOT_DIG) All digital peripherals on 0.22 1\nIDD(ADC)ADC supply current when \nconverting(3)\n3. Data based on a differential IDD measurement between reset configuration and continuous A/D \nconversions.0.93 0.95\nFigure 10. Typ. IDD(RUN)HSE  vs. VDD \n@fCPU = 16 MHz, peripheral = onFigure 11. Typ. IDD(RUN)HSE  vs. fCPU \n@ VDD = 5.0 V, peripheral = on\n012345678910\n2 . 533 . 544 . 555 . 56\nVDD [V]IDD(RUN)HSE  [mA]25° C\n85° C\n12 5°C\n012345678910\n0 5 10 15 20 25 30\nfcpu [MHz]IDD(RUN)HSE  [mA]25 ° C\n85 ° C\n12 5°C\nDocID14952 Rev 11 57/99STM8AF6246/48/66/68 Electrical characteristics\n93          \n          \n10.3.3 External clock sources and timing characteristics\nHSE user external clock\nSubject to general operating conditions for VDD and TA.\n          Figure 12. Typ. IDD(RUN)HSI  vs. VDD \n@ fCPU = 16 MHz, peripheral = offFigure 13. Typ. IDD(WFI)HSE  vs. VDD \n@ fCPU = 16 MHz, peripheral = on\n01234\n2.5 3.5 4.5 5.5 6.5\nVDD [V]IDD(RUN)HSI [mA]25°C\n85°C\n125°C0123456\n2.5 3.5 4.5 5.5 6.5\nVDD [V]IDD(WFI)HSE [mA]25°C\n85°C\n125°C\nFigure 14. Typ. IDD(WFI)HSE  vs. fCPU \n@ VDD = 5.0 V, peripheral = onFigure 15. Typ. IDD(WFI)HSI  vs. VDD \n@ fCPU = 16 MHz, peripheral = off\n0123456\n0 5 10 15 20 25 30\nfcpu [MHz]IDD(WFI)HSE  [mA]\n25 ° C\n85 ° C\n12 5°C00.511.522.5\n2 . 53 3 . 54 4 . 55 5 . 56\nVDD [V]IDD(WFI)HSI  [mA]\n25 ° C\n85 ° C\n12 5°C\nTable 28. HSE user external clock characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nfHSE_extUser external clock source \nfrequencyTA is -40 to \n150 °C0(1)\n1. In CSS is used, the external clock must have a frequency above 500 kHz.-1 6 M H z\nVHSEdHL Comparator hysteresis - 0.1 x VDD --\nVVHSEHOSCIN input pin high level \nvoltage- 0.7 x VDD -VDD\nVHSELOSCIN input pin low level \nvoltage-VSS - 0.3 x VDD\nILEAK_HSEOSCIN input leakage \ncurrentVSS < VIN < VDD -1 - +1 µA\nElectrical characterist ics STM8AF6246/48/66/68\n58/99 DocID14952 Rev 11Figure 16. HSE external clock source\nHSE crystal/ceramic resonator oscillator\nThe HSE clock can be supplied using a crystal/ceram ic resonator oscillator of up to 16 MHz. \nAll the information given in this paragraph is based on characterization results with specified typical external components. In the application,  the resonator and the load capacitors have \nto be placed as close as possible to the oscillato r pins in order to mini mize output distortion \nand startup stabilization time. Re fer to the crystal resonator m anufacturer for more details \n(frequency, package , accuracy...).\n          9+6(+\n9+6(/\n([WHUQDO\x03FORFN\nVRXUFH26&,1I+6(\n670\x1b\n06\x16\x19\x17\x1b\x1c9\x14\nTable 29. HSE oscillator characteristics \nSymbol Parameter Conditions Min Typ Max Unit\nRF Feedback resistor - - 220 - k Ω \nCL1/CL2(1)Recommended load capacitance - - - 20 pF\ngm Oscillator transconductance - 5 - - mA/V\ntSU(HSE)(2)Startup time VDD is \nstabilized-2 . 8 - m s\n1. The oscillator needs two load capacitors, CL1 and CL2, to act as load for the crystal. The total load capacitance (Cload) is \n(CL1 * CL2)/(CL1 + CL2). If CL1 = CL2, Cload = CL1 / 2. Some oscillators have built-in load capacitors, CL1 and CL2.\n2. This value is the startup time, measured from the moment it  is enabled (by software) until a stabilized 16 MHz oscillation is  \nreached. It can vary with the crystal type that is used.\nDocID14952 Rev 11 59/99STM8AF6246/48/66/68 Electrical characteristics\n93Figure 17. HSE oscilla tor circuit diagram\nHSE oscillator critical gm formula\nThe crystal characteristics have to be checked with the following formula:\ngmgmcrit»\nwhere gmcrit can be calculated with the crystal parameters as follows:\ngmcrit2Π × HSEf× ()2Rm× 2Co C + ()2=\nRm: Notional resistance (s ee crystal specification)  \nLm: Notional inductance (see crystal specification)  \nCm: Notional capacitance (see crystal specification)  \nCo: Shunt capacitance (see crystal specification)  \nCL1 = CL2 = C: Grounded external capacitance\n10.3.4 Internal clock source s and timing characteristics\nSubject to general operating conditions for VDD and TA.\nHigh speed internal RC oscillator (HSI)\n          06Y\x16\x1a\x1a\x1c\x1c9\x1426&28726&,1I+6(\x03WR\x03\x03FRUH\n&/\x145)\n670\x1b5HVRQDWRU\n&XUUHQW\x03FRQWUROJP5P\n&P/P\n5HVRQDWRU\n&/\x15&2\nTable 30. HSI oscillator characteristics\nSymbol Parameter Condi tions Min Typ Max Unit\nfHSI Frequency - - 16 - MHz \nElectrical characterist ics STM8AF6246/48/66/68\n60/99 DocID14952 Rev 11Figure 18. Typical HSI frequency vs VDD\nLow speed internal RC oscillator (LSI)\nSubject to general operating conditions for VDD and TA.\n          ACCHSHSI oscillator user \ntrimming accuracyTrimmed by the application \nfor any VDD and TA \nconditions-1(1)-1(1)\n%-0.5(1)-0 . 5(1)\nHSI oscillator accuracy \n(factory calibrated)3.0 V ≤  VDD ≤  5.5 V,  \n-40 °C ≤  TA ≤  150 °C-5 - 5\n3.0V  ≤  VDD ≤  5.5V,  \n-40°C  ≤  TA ≤  125 °C-2.5(2)-2 . 5(2)\ntsu(HSI)HSI oscillator wakeup \ntime-- - 2(3)µs\n1. Depending on option byte setting (OPT3 and NOPT3)\n2. These values are guaranteed for ST M8AF62x6ITx order codes only.\n3. Guaranteed by characterizati on, not tested in production\nTable 31. LSI oscillator characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nfLSI Frequency - 112 128 144 kHz \ntsu(LSI) LSI oscillator wakeup time - - - 7(1)\n1. Data based on characterization results, not tested in production.µsTable 30. HSI oscillator characteristics\nSymbol Parameter Condi tions Min Typ Max Unit\n-3%-2%-1%0%1%2%3%\n2.5 3 3.5 4 4.5 5 5.5 6\nVDD [V]HSI frequency variation [%]-40°C\n25°C\n85°C\n125°C\nDocID14952 Rev 11 61/99STM8AF6246/48/66/68 Electrical characteristics\n93Figure 19. Typical LSI frequency vs VDD\n-3%-2%-1%0%1%2%3%\n2.5 3 3.5 4 4.5 5 5.5 6VDD [V]LSI frequency variation [%]25°C\nElectrical characterist ics STM8AF6246/48/66/68\n62/99 DocID14952 Rev 1110.3.5 Memory characteristics\nFlash program memory/data EEPROM memory \nGeneral conditions: TA = -40 to 150  °C.\n          \n          \n          Table 32. Flash program memory/data EEPROM memory\nSymbol Parameter  Conditions Min Typ Max Unit\nVDDOperating voltage  \n(all modes, execution/write/erase)fCPU is 0 to 16 MHz \nwith 0 ws3.0 - 5.5\nV\nVDDOperating voltage  \n(code execution)fCPU is 0 to 16 MHz \nwith 0 ws2.6 - 5.5\ntprogStandard programming time (including \nerase) for byte/word/block  \n(1 byte/4 bytes/128 bytes) -- 6 6 . 6\nmsFast programming time for 1 block \n(128 bytes)-- 3 3 . 3\nterase Erase time for 1 block (128 bytes) - - 3 3.3\nTable 33. Flash program memory\nSymbol Parameter Condition Min Max Unit\nTWE Temperature for writing and erasing - -40 150 °C\nNWEFlash program memory endurance \n(erase/write cycles)(1)\n1. The physical granularity of the memory is four byte s, so cycling is performed on four bytes even when a \nwrite/erase operation addresses a single byte.TA = 25 °C 1000 - cycles\ntRET Data retention timeTA = 25 °C 40 -\nyears\nTA = 55 °C 20 -\nTable 34. Data memory\nSymbol Parameter Condition Min Max Unit\nTWE Temperature for writing and erasing - -40 150 °C\nNWEData memory endurance(1)  \n(erase/write cycles)\n1. The physical granularity of the memory is four byte s, so cycling is performed on four bytes even when a \nwrite/erase operation addresses a single byte.TA = 25 °C 300 k -\ncycles\nTA = -40°C to 125 °C 100 k(2)\n2. More information on the relationship between data retention time and number of write/erase cycles is \navailable in a separate technical document.-\ntRET Data retention timeTA = 25 °C 40(2)(3)\n3. Retention time for 256B of data memory after up to 1000 cycles at 125 °C.-\nyears\nTA = 55 °C 20(2)(3)-\nDocID14952 Rev 11 63/99STM8AF6246/48/66/68 Electrical characteristics\n9310.3.6 I/O port pin characteristics\nGeneral characteristics\nSubject to general operating conditions for VDD and TA unless otherwise specified. All \nunused pins must be kept at a fixed voltage, using the output mode of the I/O for example or \nan external pull-up or pull-down resistor. \n          Table 35. I/O static characteristics \nSymbol Parameter Conditions Min Typ Max Unit\nVIL Input low level voltage\n--0.3 V - 0.3 x VDD\nVVIH Input high level voltage 0.7 x VDD -VDD + 0.3 V\nVhys Hysteresis(1)-0.1 x \nVDD-\nVOH Output high level voltageStandard I/0, VDD = 5 V, \nI = 3 mAVDD - 0.5 V - -\nStandard I/0, VDD = 3 V,\nI = 1.5 mAVDD - 0.4 V - -\nVOL Output low level voltageHigh sink and true open \ndrain I/0, VDD = 5 V\nI = 8 mA-- 0 . 5\nStandard I/0, VDD = 5 V\nI = 3 mA-- 0 . 6\nStandard I/0, VDD = 3 V\nI = 1.5 mA-- 0 . 4\nRpu Pull-up resistor VDD = 5 V, VIN = VSS 35 50 65 k Ω\ntR, tFRise and fall time  \n(10% - 90%)Fast I/Os\nLoad = 50 pF-- 3 5(2)\nnsStandard and high sink I/Os\nLoad = 50 pF-- 1 2 5(2)\nFast I/Os\nLoad = 20 pF-- 2 0(2)\nStandard and high sink I/Os\nLoad = 20 pF-- 5 0(2)\nIlkgDigital input pad leakage \ncurrentVSS ≤ VIN ≤ VDD -- ± 1 µ A\nIlkg anaAnalog input pad leakage \ncurrentVSS ≤  VIN ≤  VDD\n-40 °C < TA < 125 °C- - ±250\nnA\nVSS ≤  VIN ≤  VDD\n-40 °C < TA < 150 °C- - ±500\nIlkg(inj)Leakage current in \nadjacent I/O(3) Injection current ±4 mA - - ±1(3)µA\nIDDIOTotal current on either \nVDDIO or VSSIOIncluding injection currents - - 60 mA\n1. Hysteresis voltage between Schmitt trigger switching levels . Based on characterization results, not tested in production.\nElectrical characterist ics STM8AF6246/48/66/68\n64/99 DocID14952 Rev 11Figure 20. Typical VIL and VIH vs VDD @ four temperatures\nFigure 21. Typical pull-up resistance RPU vs VDD @ four temperatures2. Guaranteed by design.\n3. Data based on characterization results, not tested in production.\n0123456\n2.5 3 3.5 4 4.5 5 5.5 6\nVDD [V]VIL / V IH [V]-40°C\n25°C\n85°C\n125°C\n30354045505560\n2 . 53 3 . 544 . 55 5 . 56\nVDD [V]Pull-Up resistance [k ohm]\n-40°C\n25°C\n85°C\n125°C\nDocID14952 Rev 11 65/99STM8AF6246/48/66/68 Electrical characteristics\n93Figure 22. Typical pull-up current Ipu vs VDD @ four temperatures\nTypical output level curves\nFigure  23 to Figure  32 show typical output level curves measured with output on a single \npin. \n          \n          020406080100120140\n0123456\nVDD [V]Pull-Up current [µA]-40°C\n25°C\n85°C\n125°C\nNote: The pull-up is a pure resistor (slope goes through 0).\nFigure 23. Typ. VOL @ VDD = 3.3 V (standard \nports)Figure 24. Typ. VOL @ VDD = 5.0 V (standard \nports)\n00.250.50.7511.251.5\n01234567\nIOL [mA]VOL [V]-40°C\n25°C\n85°C\n125°C\n00.250.50.7511.251.5\n02468 1 0 1 2\nIOL [mA]VOL [V]-40°C\n25°C\n85°C\n125°C\nFigure 25. Typ. VOL @ VDD = 3.3 V (true open \ndrain ports)Figure 26. Typ. VOL @ VDD = 5.0 V (true open \ndrain ports)\n00.250.50.7511.251.51.752\n02468 1 0 1 2 1 4\nIOL [mA]VOL [V]-40°C\n25°C\n85°C\n125°C\n00.250.50.7511.251.51.752\n0 5 10 15 20 25\nIOL [mA]VOL [V]-40°C\n25°C\n85°C\n125°C\nElectrical characterist ics STM8AF6246/48/66/68\n66/99 DocID14952 Rev 11          \n          \n          Figure 27. Typ. VOL @ VDD = 3.3 V (high sink \nports)Figure 28. Typ. VOL @ VDD = 5.0 V (high sink \nports)\n00.250.50.7511.251.5\n02468 1 0 1 2 1 4\nIOL [mA]VOL [V]-40°C\n25°C\n85°C\n125°C\n00.250.50.7511.251.5\n0 5 10 15 20 25\nIOL [mA]VOL [V]-40°C\n25°C\n85°C\n125°C\nFigure 29. Typ. VDD - VOH @ VDD = 3.3 V \n(standard ports)Figure 30. Typ. VDD - VOH @ VDD = 5.0 V \n(standard ports)\n00.250.50.7511.251.51.752\n01234567\nIOH [mA]VDD - V OH [V]-40°C\n25°C\n85°C\n125°C\n00.250.50.7511.251.51.752\n02468 1 0 1 2\nIOH [mA]VDD - V OH [V]-40°C\n25°C\n85°C\n125°C\nFigure 31. Typ. VDD - VOH @ VDD = 3.3 V (high \nsink ports)Figure 32. Typ. VDD - VOH @ VDD = 5.0 V (high \nsink ports)\n00.250.50.7511.251.51.752\n02468 1 0 1 2 1 4\nIOH [mA]VDD - V OH [V]-40°C\n25°C\n85°C\n125°C\n00.250.50.7511.251.51.752\n0 5 10 15 20 25\nIOH [mA]VDD - V OH [V]-40°C\n25°C\n85°C\n125°C\nDocID14952 Rev 11 67/99STM8AF6246/48/66/68 Electrical characteristics\n9310.3.7 Reset pin characteristics\nSubject to general operating conditions for VDD and TA unless otherwise specified.\n          \nFigure 33. Typical NRST VIL and VIH vs VDD @ four temperaturesTable 36. NRST pin characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nVIL(NRST) NRST input low level voltage(1)\n1. Data based on characterization results, not tested in production.- VSS - 0.3 x VDD\nV VIH(NRST) NRST input high level voltage(1)- 0.7 x VDD - VDD\nVOL(NRST) NRST output low level voltage(1)IOL= 3 mA - - 0.6\nRPU(NRST) NRST pull-up resistor - 30 40 60 k Ω\ntIFP NRST input filtered pulse(1)-8 5 - 3 1 5\nns\ntINFP(NRST)NRST Input not filtered pulse \nduration(2)\n2. Data guaranteed by design, not tested in production.-5 0 0 - -\n0123456\n2.5 3 3.5 4 4.5 5 5.5 6\nVDD [V]VIL / V IH [V]-40°C\n25°C\n85°C\n125°C\nElectrical characterist ics STM8AF6246/48/66/68\n68/99 DocID14952 Rev 11Figure 34. Typical NRST pull-up resistance RPU vs VDD\nFigure 35. Typical NRST pull-up current Ipu vs VDD\nThe reset network shown in Figure  36 protects the device against parasitic resets. The user \nmust ensure that the level on the NRST pin can go below VIL(NRST) max (see Table  36: \nNRST pin characteristics ), otherwise the reset is not taken into account internally.\nFigure 36. Recommended reset pin protection30354045505560\n2.5 3 3.5 4 4.5 5 5.5 6\nVDD [V]NRST Pull-Up resistance [k ohm]-40°C\n25°C\n85°C\n125°C\n020406080100120140\n0123456\nVDD [V]NRST Pull-Up current [µA]-40°C\n25°C\n85°C\n125°C\n06Y\x16\x1b\x16\x17\x149\x14([WHUQDO\x03\nUHVHW\x03\nFLUFXLW\x03\x03\n\x13\x11\x14\x03ȝ)1567 )LOWHU670\x1b$\n\x0b2SWLRQDO\x0c9\'\'\n538\n,QWHUQDO\x03UHVHW\nDocID14952 Rev 11 69/99STM8AF6246/48/66/68 Electrical characteristics\n9310.3.8 TIM 1, 2, 3, a nd 4 timer specifications\nSubject to general operating conditions for VDD, fMASTER , and TA unless otherwise \nspecified.\n           \n10.3.9 SPI serial peripheral interface\nUnless otherwise specified,  the parameters given in Table  38 are derived from tests \nperformed under ambient temperature,  fMASTER  frequency and VDD supply voltage \nconditions. tMASTER  = 1/fMASTER .\nRefer to I/O port characteristics for more de tails on the input/output alternate function \ncharacteristics (NSS,  SCK, MOSI, MISO).\n          Table 37. TIM 1, 2, 3, and 4 electrical specifications\nSymbol Parameter Conditions Min Typ Max Unit\nfEXT Timer external clock frequency(1)\n1. Not tested in production. On 64 Kbyte devices, the frequency is limited to 16 MHz.-- - 1 6 M H z\nTable 38. SPI characteristics \nSymbol Parameter Conditions Min Max Unit\nfSCK\n1/tc(SCK)SPI clock frequencyMaster mode  0 10\nMHz\nSlave modeVDD < 4.5 V 0 6(1)\nVDD = 4.5 V to 5.5 V 0 8(1)\ntr(SCK )\ntf(SCK)SPI clock rise and fall time Capacitive load: C = 30 pF - 25(2)\nnstsu(NSS)(3)NSS setup time Slave mode 4 * tMASTER -\nth(NSS)(3)NSS hold time Slave mode 70 -\ntw(SCKH)(3)\ntw(SCKL)(3)SCK high and low time Master mode tSCK/2 - 15 tSCK/2 + 15\ntsu(MI)(3)\ntsu(SI)(3) Data input setup timeMaster mode 5 -\nSlave mode 5 -\nth(MI)(3)\nth(SI)(3) Data input hold timeMaster mode 7 -\nSlave mode 10 -\nta(SO)(3)(4)Data output access time Slave mode -  3* tMASTER\ntdis(SO)(3)(5)Data output disable time Slave mode 25\ntv(SO)(3)Data output valid timeSlave mode  \n(after enable edge)VDD < 4.5 V - 75\nVDD = 4.5 V to 5.5 V - 53\ntv(MO)(3)Data output valid time Master mode (after enable edge) - 30\nth(SO)(3)\nData output hold timeSlave mode (after enable edge) 31 -\nth(MO)(3)Master mode (after enable edge) 12 -\n1. fSCK < fMASTER /2.\n2. The pad has to be configured accordingly (fast mode).\nElectrical characterist ics STM8AF6246/48/66/68\n70/99 DocID14952 Rev 11Figure 37. SPI timing diagram where slave mode and CPHA = 0\n1. Measurement points are at CMOS levels: 0.3 VDD and 0.7 VDD.\nFigure 38. SPI timing diagram where slave mode and CPHA = 1\n1. Measurement points are at CMOS levels: 0.3 VDD and 0.7 VDD.3. Values based on design simulation and/or charac terization results, and not tested in production.\n4. Min time is for the minimum time to drive the output and the max time is for the maximum time to validate the data.\n5. Min time is for the minimum time to invalidate the output and th e max time is for the maximum time to put the data in Hi-Z.\nDL\x14\x17\x14\x16\x17F6&.\x03,QSXW166\x03LQSXW\nW68\x0b166\x0c WF\x0b6&.\x0c WK\x0b166\x0c\n&3+$ \x13\n&32/ \x13\n&3+$ \x13\n&32/ \x14WZ\x0b6&.+\x0c\nWZ\x0b6&./\x0c\nW9\x0b62\x0c WK\x0b62\x0cWU\x0b6&.\x0c\nWI\x0b6&.\x0cWGLV\x0b62\x0cWD\x0b62\x0c\n0,62\n287387\n026,\n,138706%\x03287 %,7\x19\x03287 /6%\x03287\nWVX\x0b6,\x0c\nWK\x0b6,\x0c06%\x03,1 %,7\x14\x03,1 /6%\x03,1\nDL\x14\x17\x14\x16\x18E166\x03LQSXW\nW68\x0b166\x0c WF\x0b6&.\x0c WK\x0b166\x0c6&.\x03LQSXW&3+$ \x14\n&32/ \x13\n&3+$ \x14\n&32/ \x14WZ\x0b6&.+\x0c\nWZ\x0b6&./\x0c\nWD\x0b62\x0cWY\x0b62\x0c WK\x0b62\x0cWU\x0b6&.\x0c\nWI\x0b6&.\x0cWGLV\x0b62\x0c\n0,62\n287387\n026,\n,1387WVX\x0b6,\x0c WK\x0b6,\x0c06%\x03287\n06%\x03,1%,7\x19\x03287 /6%\x03287\n/6%\x03,1 %,7\x03\x14\x03,1\nDocID14952 Rev 11 71/99STM8AF6246/48/66/68 Electrical characteristics\n93Figure 39. SPI timing diagram - master mode\n1. Measurement points are at CMOS levels: 0.3 VDD and 0.7 VDD.DL\x14\x17\x14\x16\x19F6&.\x032XWSXW&3+$ \x13\n026,\n2873870,62\n,1387&3+$ \x13\n/6%\x03287/6%\x03,1&32/ \x13\n&32/ \x14\n%,7\x14\x03287166\x03LQSXW\nWF\x0b6&.\x0c\nWZ\x0b6&.+\x0c\nWZ\x0b6&./\x0cWU\x0b6&.\x0c\nWI\x0b6&.\x0c\nWK\x0b0,\x0c+LJK6&.\x032XWSXW&3+$ \x14\n&3+$ \x14&32/ \x13\n&32/ \x14\nWVX\x0b0,\x0c\nWY\x0b02\x0c WK\x0b02\x0c06%\x03,1 %,7\x19\x03,1\n06%\x03287\nElectrical characterist ics STM8AF6246/48/66/68\n72/99 DocID14952 Rev 1110.3.10 I2C interface characteristics\n          Table 39. I2C characteristics\nSymbol ParameterStandard mode I2CF a s t  m o d e  I2C(1)\n1. fMASTER , must be at least 8 MHz to achieve max fast I2C speed (400 kHz)Unit\nMin(2)\n2.Data based on standard I2C protocol requirement, not tested in productionMax(2)Min(2)Max(2)\ntw(SCLL) SCL clock low time 4.7 - 1.3 -\nµs\ntw(SCLH) SCL clock high time 4.0 - 0.6 -\ntsu(SDA) SDA setup time 250 - 100 -\nnsth(SDA) SDA data hold time 0(3)\n3.The maximum hold time of the start condition has only to be met if the interface does not stretch the low \ntime- 0(4)\n4.The device must internally provide a hold time of at least 300 ns for t he SDA signal in order to bridge the \nundefined region of the falling edge of SCL900(3)\ntr(SDA)\ntr(SCL)SDA and SCL rise time  \n(VDD = 3 to 5.5 V)- 1000 - 300\ntf(SDA)\ntf(SCL)SDA and SCL fall time  \n(VDD = 3 to 5.5 V)- 300 - 300 \nth(STA) START condition hold time 4.0 - 0.6 -\nµstsu(STA) Repeated START condition setup time 4.7 - 0.6 -\ntsu(STO) STOP condition setup time 4.0 - 0.6 -\ntw(STO:STA)STOP to START condition time  \n(bus free)4.7 - 1.3 -\nCb Capacitive load for each bus line - 400 - 400 pF\nDocID14952 Rev 11 73/99STM8AF6246/48/66/68 Electrical characteristics\n9310.3.11 10-bit ADC characteristics\nSubject to general operating conditions for VDDA, fMASTER , and TA unless otherwise \nspecified.\n          \nFigure 40. Typical application with ADC\n1. Legend: RAIN = external resistance, CAIN = capacitors, Csamp = internal sample and hold capacitor.\n          Table 40. ADC characteristics\nSymbol Parameter  Conditions Min Typ Max Unit\nfADC ADC clock frequency - 111 kHz - 4 MHz kHz/MHz\nVDDA Analog supply - 3 - 5.5\nVVREF+ Positive reference voltage - 2.75 - VDDA\nVREF- Negative reference voltage - VSSA -0 . 5\nVAIN Conversion voltage range(1)\n1. During the sample time, the sampling capacitance, Csamp (3 pF typ), can be charged/discharged by the \nexternal source. The internal resistance of the analog so urce must allow the capacitance to reach its final \nvoltage level within tS. After the end of the sample time tS, changes of the analog input voltage have no \neffect on the conversion result.- VSSA - VDDA\nDevices with \nexternal VREF+/ \nVREF- pinsVREF- - VREF+\nCsamp Internal sample and hold capacitor - - - 3 pF\ntS(1) Sampling time  \n(3 x 1/fADC)fADC = 2 MHz - 1.5 -\nµsfADC = 4 MHz - 0.75 -\ntSTAB Wakeup time from standbyfADC = 2 MHz - 7 -\nfADC = 4 MHz - 3.5 -\ntCONVTotal conversion time including \nsampling time  \n(14 x 1/fADC)fADC = 2 MHz - 7 -\nfADC = 4 MHz - 3.5 -\nRswitch Equivalent switch resistance - - - 30 k Ω\n06Y\x16\x1b\x16\x17\x159\x14^dDϴ\x04\n5$,1\n&$,19$,1\x04/Eǆs\x18\x18\n97\n\x13\x11\x19\x039\n97\n\x13\x11\x19\x039&VDPS ,/\x14\x13\x10ELW\x03$\x12\'\nFRQYHUVLRQ5VZLWFK\n7V\nElectrical characterist ics STM8AF6246/48/66/68\n74/99 DocID14952 Rev 11          \nFigure 41. ADC accuracy characteristics\n1. Example of an actual transfer curve\n2. The ideal transfer curve\n3. End point correlation line  \nET = Total unadjusted error: Maximum deviation betw een the actual and the ideal transfer curves.  \nEO = Offset error: Deviation between the fi rst actual transition and the first ideal one.  \nEG = Gain error: Deviation between the last ideal transition and the last actual one.  \nED = Differential linearity error: Maximum deviation between actual steps and the ideal one.  \nEL = Integral linearity error: Maximum deviation between  any actual transition an d the end point correlation \nline.Table 41. ADC accuracy for VDDA = 5 V \nSymbol Parameter  Conditions Typ Max(1)\n1. Max value is based on characte rization, not tested in production.Unit\n|ET| Total unadjusted error(2)\n2. ADC accuracy vs. injection current: Any positive or negat ive injection current within the limits specified for \nIINJ(PIN)  and ΣIINJ(PIN)  in Section 10.3.6  does not affect the ADC accuracy.fADC = 2 MHz1.4 3(3)\n3. TUE 2LSB can be reached on specific sale s types on the whole temperature range.LSB|EO| Offset error(2)0.8 3\n|EG| Gain error(2)0.1 2\n|ED| Differential linearity error(2)0.9 1\n|EL| Integral linearity error(2)0.7 1.5\n|ET| Total unadjusted error(2)\nfADC = 4 MHz1.9(4)\n4. Target values.4(4)\n|EO| Offset error(2)1.3(4)4(4)\n|EG| Gain error(2)0.6(4)3(4)\n|ED| Differential linearity error(2)1.5(4)2(4)\n|EL| Integral linearity error(2)1.2(4)1.5(4)\nEOEG\n1L S BIDEAL1LSBIDEALVDDAVSSA–\n1024---------------------------------------- - =1023\n1022\n1021\n5\n43\n2\n1\n07\n6\n1234567 10211022 10231024(1)(2)\nET\nEDEL(3)\nVDDA VSSA\nDocID14952 Rev 11 75/99STM8AF6246/48/66/68 Electrical characteristics\n9310.3.12 EMC characteristics\nSusceptibility tests are perfor med on a sample basis during  product characterization.\nFunctional EMS (electromagnetic susceptibility)\nWhile executing a simple application (toggling 2 LEDs through I/O ports), the product is \nstressed by two electromagnetic events until a failure occurs (indicated by the LEDs).\n• ESD: Electrostatic discharge (positive and negati ve) is applied on all pins of the device \nuntil a functional disturbance occurs. Th is test conforms with the IEC 1000-4-2 \nstandard.\n• FTB: A burst of fast transient voltage (p ositive and negative) is applied to VDD and VSS \nthrough a 100 pF capacitor, until a function al disturbance occurs. This test conforms \nwith the IEC 1000-4-4 standard.\nA device reset allows normal operations to be resumed. The test results are given in the \ntable below based on the EMS levels and classes defined in application note AN1709.\nDesigning hardened software to avoid noise problems\nEMC characterization and optimization are per formed at component level with a typical \napplication environment and simplified MCU soft ware. It should be noted that good EMC \nperformance is highly dependent on the user application and the software in particular.\nTherefore it is recommended that the user  applies EMC software optimization and \nprequalification tests in re lation with the EMC level requested for his application.\nSoftware recommendations\nThe software flowchart must include the m anagement of runaway conditions such as:\n• Corrupted program counter\n• Unexpected reset\n• Critical data corruption (control registers...)\nPrequalification trials\nMost of the common failures (unexpected reset and program counter corruption) can be \nrecovered by applying a low state on the NR ST pin or the oscillato r pins for 1 second.\nTo complete these trials, ESD stress can be applie d directly on the device, over the range of \nspecification values. When unexpected behavior is detected, the software can be hardened \nto prevent unrecoverable errors occurring (see application note AN1015).\n          Table 42. EMS data \nSymbol Parameter Conditions Level/class\nVFESDVoltage limits to be applied on any I/O pin \nto induce a functional disturbanceVDD = 3.3 V, TA= 25 °C,  \nfMASTER = 16 MHz (HSI clock),  \nConforms to IEC 1000-4-23/B\nVEFTBFast transient voltage burst limits to be \napplied through 100 pF on VDD and VSS \npins to induce a functional disturbanceVDD= 3.3 V, TA= 25 °C,  \nfMASTER = 16 MHz (HSI clock),  \nConforms to IEC 1000-4-44/A\nElectrical characterist ics STM8AF6246/48/66/68\n76/99 DocID14952 Rev 11Electromagnetic interference (EMI)\nEmission tests conform to the IEC 61967-2 standard for test software, board layout and pin \nloading.\n          \nAbsolute maximum ratings (electrical sensitivity)\nBased on two different tests (ESD and LU) using specific measurement methods, the \nproduct is stressed to determine its performance in terms of electrical sensitivity. For more \ndetails, refer to the application note AN1181.\nElectrostatic discharge (ESD)\nElectrostatic discharges (3 positive then 3 negative pulses separated by 1 second) are \napplied to the pins of each sample according to each pin combinati on. The sample size \ndepends on the number of supply pins in the device (3 parts*(n+1) supply pin). This test \nconforms to the JESD22-A114A/A115A standard. For more details, refer to the application note AN1181. \n           Table 43. EMI data\nSymbol ParameterConditions\nUnit\nGeneral conditionsMonitored\nfrequency bandMax fCPU(1)\n1. Data based on characterization results, not tested in production.8 \nMHz16 \nMHz\nSEMIPeak levelVDD = 5 V,  \nTA = 25 °C,  \nLQFP80 package \nconforming to IEC 61967-20.1 MHz to 30 MHz 15 17\ndBµV30 MHz to 130 MHz 18 22\n130 MHz to 1 GHz -1 3\nEMI level - 2 2.5\nTable 44. ESD absolute maximum ratings\nSymbol Ratings Conditions ClassMaximum \nvalue(1)\n1. Data based on characterization results, not tested in productionUnit\nVESD(HBM)Electrostatic discharge voltage  \n(Human body model)TA = 25°C, conforming to \nJESD22-A1143A 4000\nV VESD(CDM)Electrostatic discharge voltage  \n(Charge device model)TA= 25°C, conforming to \nJESD22-C1013 500\nVESD(MM)Electrostatic discharge voltage  \n(Machine model)TA= 25°C, conforming to \nJESD22-A115B 200\nDocID14952 Rev 11 77/99STM8AF6246/48/66/68 Electrical characteristics\n93Static latch-up\nTwo complementary static tests are required  on 10 parts to assess the latch-up \nperformance. \n• A supply overvoltage (applied to each power supply pin) and \n• A current injection (applied to each input, output and configurable I/O pin) are \nperformed on each sample. \nThis test conforms to the EIA/JESD 78 IC la tch-up standard. For more details, refer to the \napplication note AN1181.\n          Table 45. Electrical sensitivities\nSymbol Parameter Conditions Class(1)\n1. Class description: A Class is an STMi croelectronics internal specification.  All its limits are higher than the \nJEDEC specifications, that means when a device belongs to class A it exceeds the JEDEC standard. B \nclass strictly covers all the JEDE C criteria (international standard).LU Static latch-up classTA = 25 °C\nATA = 85 °C\nTA = 125 °C\nTA = 150 °C\nPackage information STM8AF6246/48/66/68\n78/99 DocID14952 Rev 1111 Package information\nIn order to meet environmental requirements, ST offers these devices in different grades of \nECOPACK® packages, depending on their level of environmental compliance. ECOPACK® \nspecifications, grade definitions a nd product status are available at: www.st.com . \nECOPACK® is an ST trademark.\n11.1 VFQFPN32 package information\nFigure 42. VFQFPN32 - 32-pin, 5x5 mm, 0.5 mm  pitch very thin profile fine pitch quad\n flat package outline\n1. Drawing is not to scale.\x14\x12?-%?!-+/2?6\x116HDWLQJ\x03SODQH\nGGG &&\n$\x16 $\x14$\n\'\nH\n\x1c \x14\x19\n\x14\x1a\n\x15\x17\n\x16\x15\n3LQ\x03\x06\x03\x14\x03,\'\n5\x03 \x03\x13\x11\x15\x13\x1b\n(\n//\n\'\x15\x14E(\x15\n%RWWRP\x03YLHZ\nDocID14952 Rev 11 79/99STM8AF6246/48/66/68 Package information\n93          Table 46. VFQFPN32 - 32-pin, 5x5 mm, 0.5 mm pitch very thin profile fine pitch quad\n flat package mechanical data \nSymbolmillimeters inches(1)\n1. Values in inches are converted from mm and rounded to 4 decimal digits.Min Typ Max Min Typ Max\nA 0.800 0.900 1.000 0.0315  0.0354 0.0394\nA1  0.000  0.020 0.050  0.0000  0.0008 0.0020A3  - 0.200  -  - 0.0079 -\nb 0.180 0.250 0.300 0.0071 0.0098 0.0118\nD 4.850 5.000 5.150 0.1909 0.1969 0.2028\nD2 3.500 3.600 3.700 0.1378 0.1417 0.1457\nE 4.850 5.000 5.150 0.1909 0.1969 0.2028\nE2 3.500 3.600 3.700 0.1378 0.1417 0.1457\ne - 0.500 - - 0.0197 -\nL 0.300 0.400 0.500 0.0118 0.0157 0.0197\nddd - - 0.050 - - 0.0020\nPackage information STM8AF6246/48/66/68\n80/99 DocID14952 Rev 11Figure 43. VFQFPN32 - 32-pin, 5x5 mm, 0.5 mm  pitch very thin profile fine pitch quad\n flat package recommended footprint\n1. Dimensions are expr essed in millimeters.\x14\x12?&0?!-+/2?6\x11\x18\x11\x16\x13\n\x16\x11\x1b\x13\n\x13\x11\x19\x13\n\x16\x11\x14\x13\x03\x0b9DU\x03$\x0c\n\x16\x11\x19\x13\x03\x0b9DU\x03%\x0c\n\x13\x11\x18\x13\x18\x11\x16\x13\n\x13\x11\x16\x13\n\x13\x11\x1a\x18\n\x16\x11\x1b\x13\x16\x11\x1b\x13\x16\x11\x14\x13\x03\x0b9DU\x03$\x0c\n\x16\x11\x19\x13\x03\x0b9DU\x03%\x0c\nDocID14952 Rev 11 81/99STM8AF6246/48/66/68 Package information\n93Device marking\nThe following figure gives an example of topsid e marking orientation versus pin 1 identifier \nlocation.\nFigure 44. VFQFPN32 marking example (package top view)\n06\x16\x1a\x1a\x1c\x159\x143URGXFW\x03\nLGHQWLILFDWLRQ\x0b\x14\x0c\n3LQ\x03\x14\x03LGHQWLILHU5HYLVLRQ\x03FRGH\'DWH\x03FRGH\n:8 8\n6WDQGDUG\x0367\x03ORJR999999\nPackage information STM8AF6246/48/66/68\n82/99 DocID14952 Rev 1111.2 LQFP48 package information\nFigure 45. LQFP48 - 48-pin, 7 x 7 mm low-profile quad flat package outline\n1. Drawing is not to scale.\x15"?-%?6\x120).\x00\x11\n)$%.4)&)#!4)/.CCC##\n$\x13\x10\x0e\x12\x15\x00MM\n\'!5\'%\x000,!.%\nB\n!\x11!\n!\x12\nC\n!\x11\n,\x11,$\n$\x11\n%\x13\n%\x11\n%\nE\x11\x12 \x11\x11\x13\x12\x14\x12\x15 \x13\x16\n\x13\x17\n\x14\x183%!4).\'\n0,!.%\n+\nDocID14952 Rev 11 83/99STM8AF6246/48/66/68 Package information\n93          Table 47. LQFP48 - 48-pin, 7 x 7 mm low-profile quad flat package \nmechanical data \nSymbolmillimeters inches(1)\n1. Values in inches are converted from mm and rounded to 4 decimal digits.Min Typ Max Min Typ Max\nA  -  - 1.600  -  - 0.0630\nA1 0.050  - 0.150 0.0020 - 0.0059A2 1.350 1.400 1.450 0.0531 0.0551 0.0571\nb 0.170 0.220 0.270 0.0067 0.0087 0.0106\nc 0.090  - 0.200 0.0035 - 0.0079\nD 8.800 9.000 9.200 0.3465 0.3543 0.3622\nD1 6.800 7.000 7.200 0.2677 0.2756 0.2835\nD3  - 5.500  -  - 0.2165 - \nE 8.800 9.000 9.200 0.3465 0.3543 0.3622\nE1 6.800 7.000 7.200 0.2677 0.2756 0.2835\nE3  - 5.500  -  - 0.2165  -\ne  - 0.500  -  - 0.0197  -\nL 0.450 0.600 0.750 0.0177 0.0236 0.0295\nL1  - 1.000  -  - 0.0394  -\nk 0 °3 . 5 °7 ° 0 °3 . 5 °7 °\nccc - - 0.080 - - 0.0031\nPackage information STM8AF6246/48/66/68\n84/99 DocID14952 Rev 11Figure 46. LQFP48 - 48-pin, 7 x 7 mm low-profile quad flat package \nrecommended footprint\n1. Dimensions are expr essed in millimeters.\nDevice marking\nThe following figure gives an example of topsid e marking orientation versus pin 1 identifier \nlocation.\nFigure 47. LQFP48 marking example (package top view)\x19\x0e\x17\x10\x15\x0e\x18\x10\x17\x0e\x13\x10\n\x11\x12\x12\x14\n\x10\x0e\x12\x10\n\x17\x0e\x13\x10\n\x11\x13\x17\x13\x16\n\x11\x0e\x12\x10\n\x15\x0e\x18\x10\n\x19\x0e\x17\x10\x10\x0e\x13\x10\x12\x15\x11\x0e\x12\x10\x10\x0e\x15\x10\nAI\x11\x14\x19\x11\x11D\x11\x13 \x14\x18\n3URGXFW\x03\nLGHQWLILFDWLRQ\x0b\x14\x0c\n3LQ\x03\x14\x03LGHQWLILHU5HYLVLRQ\x03FRGH\'DWH\x03FRGH\n:8 86WDQGDUG\x0367\x03ORJR999999\n999999\n06\x16\x1a\x1a\x1c\x149\x14\nDocID14952 Rev 11 85/99STM8AF6246/48/66/68 Package information\n9311.3 LQFP32 package information\nFigure 48. LQFP32 - 32-pin, 7 x 7 mm low-profile quad flat package outline\n1. Drawing is not to scale.$\n$\x11\n$\x13\n%\x13\n%\x11\n%\n\x11 \x18\x19\x11\x16\x11\x17 \x12\x14\n\x12\x15\n\x13\x12\n!\x11\n,\x11,+!\x11!\x12!\nCB\'!5\'%\x000,!.%\x10\x0e\x12\x15\x00MM3%!4).\'\n0,!.%\n#\n0).\x00\x11\n)$%.4)&)#!4)/.CCC#\n\x167@.&@7\x13E\nPackage information STM8AF6246/48/66/68\n86/99 DocID14952 Rev 11          Table 48. LQFP32 - 32-pin, 7 x 7 mm low-profile quad flat package \nmechanical data \nSymbolmillimeters inches(1)\n1. Values in inches are converted from mm and rounded to 4 decimal digits.Min Typ Max Min Typ Max\nA  -  - 1.600  -  - 0.0630\nA1 0.050  - 0.150 0.0020  - 0.0059A2 1.350 1.400 1.450 0.0531 0.0551 0.0571\nb 0.300 0.370 0.450 0.0118 0.0146 0.0177\nc 0.090  - 0.200 0.0035  - 0.0079\nD 8.800 9.000 9.200 0.3465 0.3543 0.3622\nD1 6.800 7.000 7.200 0.2677 0.2756 0.2835\nD3  - 5.600  -  - 0.2205  -\nE 8.800 9.000 9.200 0.3465 0.3543 0.3622\nE1 6.800 7.000 7.200 0.2677 0.2756 0.2835\nE3  - 5.600  -  - 0.2205  -\ne  - 0.800  -  - 0.0315  -\nL 0.450 0.600 0.750 0.0177 0.0236 0.0295\nL1  - 1.000  -  - 0.0394  -\nk 0 °3 . 5 °7 ° 0 °3 . 5 °7 °\nccc - - 0.100 - - 0.0039\nDocID14952 Rev 11 87/99STM8AF6246/48/66/68 Package information\n93Figure 49. LQFP32 - 32-pin, 7 x 7 mm low-profile quad flat package \nrecommended footprint\n1. Dimensions are expr essed in millimeters.\nDevice marking\nThe following figure gives an example of topsid e marking orientation versus pin 1 identifier \nlocation.\nFigure 50. LQFP32 marking example (package top view)\x156?&0?6\x12\x12 \x19\x1a\x12\x17\x12\x18 \x13\x15\n\x13\x16\n\x14\x13\x19\x0e\x17\x10\x17\x0e\x13\x10\n\x17\x0e\x13\x10\n\x11\x0e\x12\x10\x13\x11\x16\x13\x10\x0e\x15\x10\x11\x0e\x12\x10\n\x16\x0e\x11\x10\n\x19\x0e\x17\x10\x10\x0e\x18\x10\n\x16\x0e\x11\x10\n06\x16\x1a\x1a\x1b\x1c9\x143URGXFW\x03\nLGHQWLILFDWLRQ\x0b\x14\x0c\n3LQ\x03\x14\x03LGHQWLILHU5HYLVLRQ\x03FRGH\'DWH\x03FRGH\n:8 86WDQGDUG\x0367\x03ORJR999999\n999999\nPackage information STM8AF6246/48/66/68\n88/99 DocID14952 Rev 1111.4 Thermal characteristics\nIn case the maximum chip junction temperature (TJmax) specified in  Table  21: General \noperating conditions on page  52 is exceeded, the functiona lity of the device cannot be \nguaranteed.\nTJmax, in degrees Celsius, may be calculated using the following equation:\nTJmax = TAmax + (PDmax  x ΘJA)\nWhere:\n–TAmax is the maximum ambient temperature in °C\n– ΘJA is the package junction-to-ambient thermal resistance in ° C/W\n–PDmax  is the sum of PINTmax  and PI/Omax (PDmax  = PINTmax  + PI/Omax )\n–PINTmax  is the product of IDD and VDD, expressed in Watts. This is the maximum \nchip internal power.\n–PI/Omax  represents the maximum power dissipation on output pins  \nWhere:  \nPI/Omax = Σ (VOL*IOL) + Σ((VDD-VOH)*IOH),  \ntaking into account the actual VOL/IOL and VOH/IOH of the I/Os at low and high level \nin the application.\n          \n11.4.1 Reference document\nJESD51-2 integrated circuits thermal test method environment conditions - natural convection (still air). Available from www.jedec.org.\n11.4.2 Selecting the product temperature range\nWhen ordering the microcontroller, the temperature range is specified in the order code (see \nSection  12: Ordering information ).\nThe following example shows how to calculate the temperature range needed for a given application. Table 49. Thermal characteristics(1)\n1. Thermal resistances are based on JEDEC JESD51- 2 with 4-layer PCB in a natural convection \nenvironment.Symbol Parameter Value Unit\nΘJAThermal resistance junction-ambient  \nLQFP 48 - 7 x 7 mm57 °C/W\nΘJAThermal resistance junction-ambient  \nLQFP 32 - 7 x 7 mm59 °C/W\nΘJAThermal resistance junction-ambient  \nVFQFPN3225 °C/W\nDocID14952 Rev 11 89/99STM8AF6246/48/66/68 Package information\n93Assuming the following ap plication conditions:\nMaximum ambient temperature TAmax= 82 °C (measured according to JESD51-2), \nIDDmax = 14 mA, VDD = 5 V, maximum 20 I/Os used at the same time in output at low \nlevel with IOL = 8 mA, VOL= 0.4 V\nPINTmax  = 14 mA x 5 V= 70 mW\nPIOmax  = 20 x 8 mA x 0.4 V = 64 mW\nThis gives: PINTmax = 70 mW and PIOmax  64 mW:\nPDmax  = 70 mW + 64 mW\nThus: PDmax  = 134 mW.\nUsing the values obtained in Table  49: Thermal characteristics  TJmax is calculated as \nfollows:\nFor LQFP64 46 °C/W \nTJmax = 82 °C + (46 °C/W x 134 mW) = 82 °C + 6 °C = 88 °C\nThis is within the range of th e suffix C version parts (-40 < TJ < 125 °C).\nParts must be ordered at least with the temperature range suffix C.\nOrdering information STM8AF6246/48/66/68\n90/99 DocID14952 Rev 1112 Ordering information\nFigure 51. STM8AF6246/48/66/68 ordering information scheme(1) (2)\n1. For a list of available options  (e.g. memory size, package) and orderable part numbers or for further \ninformation on any aspect of this device, please go to  www.st.com  or contact the nearest ST Sales Office.\n2. Parts marked as “ES”, “E” or accompanied by an Engineering Sample notification letter, are not yet \nqualified and therefore not yet ready to be used in  production and any consequences  deriving from such \nusage will not be at ST charge. In no event, ST will  be liable for any customer usage of these engineering \nsamples in production. ST Quality has to be cont acted prior to any decisi on to use these Engineering \nSamples to run qualification activity.\n3. Customer specific FASTROM code or  custom device configuration. This  field shows ‘SSS’ if the device \ncontains a super set silicon, usually equipped with bi gger memory and more I/Os.  This silicon is supposed \nto be replaced later by the target silicon.  STM8A F 62 6 6 I T D xxx(3)Y\nProduct class\n8-bit automotive microcontroller\nProgram memory size\n4 = 16 Kbyte\n6 = 32 Kbyte\nPackage type\nT = LQFP\nU = VFQFPNExample:\nDevice family\n62 = Silicon rev X and rev W, LIN onlyProgram memory typeF = Flash + EEPROMP = FASTROM\nTemperature rangeA = -40 to 85 °CC = -40 to 125 °C\nD = -40 to 150 °CPin count\n6 = 32 pins\n8 = 48 pins\nPacking\nY = Tray\nU = TubeX = Tape and reel compliant with EIA 481-CHSI accuracyBlank = ± 5 %\nI = ± 2.5 %\nDocID14952 Rev 11 91/99STM8AF6246/48/66/68 STM8 development tools\n9313 STM8 development tools\nDevelopment tools for the STM8A microcontrollers include the \n• STice emulation system offeri ng tracing and code profiling\n• STVD high-level language debugger including assembler and visual development \nenvironment - seamless integration of third party C compilers.\n• STVP Flash programming software\nIn addition, the STM8A comes with starter kits , evaluation boards and low-cost in-circuit \ndebugging/programming tools.\n13.1 Emulation and in-c ircuit debugging tools\nThe STM8 tool line includes the STice emul ation system offering a complete range of \nemulation and in-circuit debugging features on a platform that is desi gned for versatility and \ncost-effectiveness. In addition, STM8A application development is supported by a low-cost in-circuit debugger/programmer.\nThe STice is the fourth generation of full-fe atured emulators from STMicroelectronics. It \noffers new advanced debugging  capabilities including tracin g, profiling and code coverage \nanalysis to help detect execution bottlenecks and dead code.\nIn addition, STice offers in-circuit debuggi ng and programming of STM8A microcontrollers \nvia the STM8 single wire interface module  (SWIM), which allows non-intrusive debugging of \nan application while it runs on the target microcontroller.\nFor improved cost effectiveness, STice is bas ed on a modular design that allows users to \norder exactly what they need to meet their development requirements and to adapt their \nemulation system to support existing  and future ST microcontrollers.\n13.1.1 STice key features\n• Program and data trace recording up to 128 K records\n• Advanced breakpoints with up to 4 levels of conditions\n• Data breakpoints\n• Real-time read/write of all device resources during emulation\n• Occurrence and time profiling and code coverage analysis (new features)\n• In-circuit debugging/prog ramming via SWIM protocol\n• 8-bit probe analyzer\n• 1 input and 2 output triggers\n• USB 2.0 high speed interface to host PC\n• Power supply follower managing application voltages between 1.62 to 5.5 V\n• Modularity that allows users to specify the components they need to meet their \ndevelopment requirements and adapt to future requirements.\n• Supported by free software tools that include integrated development environment \n(IDE), programming software interface and assembler for STM8.\nSTM8 development tools STM8AF6246/48/66/68\n92/99 DocID14952 Rev 1113.2 Software tools\nSTM8 development tools are supported by a complete, free software package from  \nSTMicroelectronics that includes ST vis ual develop (STVD) IDE and the ST visual  \nprogrammer (STVP) software interface. STVD pr ovides seamless integr ation of the Cosmic \nand Raisonance C co mpilers for STM8.\n13.2.1 STM8 toolset\nThe STM8 toolset  with STVD integrated development environment and STVP programming \nsoftware is available for free download  at www.st.com. This package includes:\nST visual develop\nFull-featured integrated development environment from STMicroelectronics, featuring:\n• Seamless integration of C and ASM toolsets\n• Full-featured debugger\n• Project management\n• Syntax highlighting editor\n• Integrated programming interface\n• Support of advanced emulatio n features for STice such as  code profiling and coverage\nST visual programmer (STVP)\nEasy-to-use, unlimited graphical interface allowi ng read, write and verification of the STM8A \nmicrocontroller Flash memory. STVP also offers project mode for saving programming configurations and automating programming sequences.\n13.2.2 C and assembly toolchains\nControl of C and assembly toolchains is seam lessly integrat ed into the STVD integrated \ndevelopment environment, making it possible to configure and control the building of the application directly from an ea sy-to-use graphical interface.\nAvailable toolchains include:\nC compiler for STM8\nAll compilers are available in free version with a limited code size depending on the \ncompiler. For more information, refer to ww w.cosmic-software.com, www.raisonance.com, \nand www.iar.com.\nSTM8 assembler linker\nFree assembly toolchain included in the STM8 toolset, which allows users to assemble and \nlink the application source code.\nDocID14952 Rev 11 93/99STM8AF6246/48/66/68 STM8 development tools\n9313.3 Programming tools\nDuring the development cycle, STice provides in-circuit pr ogramming of the STM8A Flash \nmicrocontroller on the user application board via the SWIM protocol. Additional tools are used to include a low-cost in-circuit programmer as well as ST socket boards, which provide dedicated programming platforms with sockets for programming the user STM8A.\nFor production environments, programmers will include a comp lete range of  gang and \nautomated programming solutions from thir d-party tool developers already supplying \nprogrammers for the STM8 family.\nRevision history STM8AF6246/48/66/68\n94/99 DocID14952 Rev 1114 Revision history\n          Table 50. Document revision history \nDate Revision Changes\n22-Aug-2008 1 Initial release\n10-Aug-2009 2Document revised as the following:\nUpdated Features ;\nUpdated Table: Device summary;\nUpdated Section: Product line-up;\nChanged Section: Product overview ;\nUpdated Section: Pinouts and pin description;\nChanged Section: Register map;\nUpdated Section: Interrupt table;\nUpdated Section: Option bytes;\nUpdated Section: Electrical  characteristics;\nUpdated Section: Package information;\nUpdated Section: Ordering information;\nAdded Section: STM8 development tools.\n22-Oct-2009 3Adapted Table: STM8AF61xx/62xx (32 Kbyte) microcontroller pin \ndescription.\nAdded Section: LIN header error wh en automatic resynchronization \nis enabled.\n08-Jul-2010 4Updated title on cover page. \nAdded VFQFPN32 5x 5 mm package.\nAdded STM8AF62xx devices, and modified cover page header to \nclarify the part numbers covered by the datasheets. Updated Note 1  \nbelow Table: Device summary.\nUpdated D temperature range to -40 to 150°C.\nContent of Section: Product overview  reorganized.\nRenamed Section: Memory and register map , and content merged \nwith Register map section. \nRenamed BL_EN and NBL_EN, BL and NBL, respectively, in Table: \nOption bytes.\nAdded  Table: Operating lifetime.\nAdded CEXT and PD (power dissipation) in Table: General operating \nconditions , and Section: VCAP external capacitor.\nSuffix D maximum junction temperature (TJ) updated in Table: \nGeneral operating conditions.\nUpdate t VDD in Table: Operating conditions  at power-up/power-down .\nMoved Table: Typical peripheral current consumption VDD = 5.0 V  to \nSection: Current consumption for on-chip peripherals  and removed \nIDD(CAN) .\nUpdated Section: Ordering information for the devices supported by \nthe datasheet.\nUpdated Section: STM8 development tools.\nDocID14952 Rev 11 95/99STM8AF6246/48/66/68 Revision history\n9831-Jan-2011 5Modified references to reference manual, and Flash programming \nmanual in the whole document.\nAdded reference to AEC Q100 standard on cover page. \nRenamed timer types as follows:– Auto-reload timer to general purpose timer\n– Multipurpose timer to advanced control timer\n– System timer to basic timer  \nIntroduced concept of medium density Flash program memory. \nUpdated timer names in  Figure: STM8A block diagram.  \nAdded TMU brief description in Section: Flash program and data \nEEPROM , and updated TMU_MAXATT description in Table: Option \nbyte description .\nUpdated clock sources in clock controller features. Changed \n16MHZTRIM0 to HSITRIM bit in Section: User trimming.\nAdded Table: Peripheral clock gating bits.\nUpdated Section: Low-power operating modes. \nAdded calibration using TIM3 in Section: Auto-wakeup counter.\nAdded  Table: ADC naming and Table: Communication peripheral \nnaming correspondence. \nAdded  Note 1  related AIN12 pin in Section: Analog-to-digital \nconverter (ADC) and Table: STM8AF61xx/ 62xx (32 Kbyte) \nmicrocontroller pin description.\nUpdated SPI data rate to 10 Mbit/s or f\nMASTER /2 in Section: Serial \nperipheral interface (SPI).\nAdded reset state in Table: Legend/abbreviation.\nTable: STM8AF61xx/62xx (32 Kbyte) microcontroller pin description:  \nadded Note 7 related to PD1/SWIM, modified Note 6,  corrected wpu \ninput for PE1 and PE2, and renamed TIMn_CCx and TIMn_NCCx to \nTIMn_CHx and TIMn_CHxN, respectively.\nSection: Register map:  \nReplaced tables describing register maps and reset values for non-\nvolatile memory, global configuration, reset status, clock controller, \ninterrupt controller, ti mers, communication interfaces, and ADC, by \nTable: General hardware register map . \nAdded Note 1 for Px_IDR registers in Table: I/O port hardware \nregister map. Updated register reset values for Px_IDR registers.\nAdded SWIM and debug module register map. Table 50. Document revision history (continued)\nDate Revision Changes\nRevision history STM8AF6246/48/66/68\n96/99 DocID14952 Rev 1131-Jan-20115 \n(continued)Renamed Fast Active Halt mode to Active-halt mode with regulator \non, and Slow Active Halt mode to Active-halt mode wi th regulator off.\nUpdated Table: Total current consumption in Halt and Active-halt \nmodes.  General conditions for VDD apply, TA = -40 to 55 °C , in \nparticular IDD(FAH) and IDD(SAH) renamed IDD(AH) ; tWU(FAH) and \ntWU(SAH) renamed tWU(AH) , and temperature condition added.\nRemoved IDD(USART) from Table: Typical peripheral current \nconsumption VDD = 5.0 V.\nUpdated general conditions in Section: Memory characteristics.  \nModified TWE maximum value in Table: Flash program memory  and \nTable: Data memory.\nUpdate Ilkg ana maximum value for TA ranging from −40 to 150 °C in \nTable: I/O static characteristics .\nAdded tIFP(NRST) and renamed VF(NRST) tIFP in Table: NRST pin \ncharacteristics.  Added recommendations concerning NRST pin level \nabove  Figure: Recommended reset pin protection, and updated \nexternal capacitor value.\nAdded Raisonance compiler in  Section: Software tools.\nMoved know limitations to separate errata sheet.\n18-Jul-2012 6Updated wildcards of document part numbers.\nTable: Device summary: u pdated the footnotes to all STM8AF61xx \npart numbers.\nSection: Introduction:  small text change in first paragraph.\nTable: STM8AF62xx product line-up : added “P” version for all order \ncodes; updated RAM.\nTable: STM8AF/H61xx product line-up : added “P” version for all \norder codes.\nFigure: STM8A block diagram : updated POR, BOR and WDG; \nupdated LINUART input; added legend.\nSection: Flash program and data EEPROM:  removed non relevant \nbullet points and added a sentence about the factory programmer.\nTable: Peripheral clock gating bit assignments in CLK_PCKENR1/2 \nregisters:  updated\nADC features:  updated ADC input range.\nTable: Memory model for the devices covered in this datasheet: \nupdated 16 Kbyte and 8 Kbyte information.\nTable: Option bytes : updated factory default setting for NOPT17; \nadded footnote 1. \nSection: Minimum and maximum values: TA = -40 °C (not  \n40 °C).\nTable: General operating conditions: updated VCAP.\nTable: Total current consumption in Run, Wait and Slow mode \nGeneral conditions for VDD apply, TA = -40 to 150 °C : updated \nconditions for IDD(RUN) .\nTable: I/O static characteristics : added new condition and new max \nvalues for rise and fall  time; updated the footnote.Table 50. Document revision history (continued)\nDate Revision Changes\nDocID14952 Rev 11 97/99STM8AF6246/48/66/68 Revision history\n9818-Jul-20126\n(continued)Section: Reset pin characteristics:  updated text below Figure: Typical \nNRST pull-up current Ipu vs VDD .\nFigure: Recommended reset pin protection : updated unit of \ncapacitor.\nTable: SPI characteristics: updated SCK high and low time \nconditions and values.\nFigure: SPI timing diagram - master mode : replaced ‘SCK input’ \nsignals with ‘SCK output’ signals. \nUpdated Table: VFQFPN 32-lead very thin fine pitch quad flat no-\nlead package mechanical data,  Table: LQFP 48-pin low profile quad \nflat package mechanical data , and Table: LQFP 32-pin low profile \nquad flat package mechanical data.\nReplaced Figure: LQFP 48-pin low profile quad flat package (7 x 7) \nand Figure: LQFP 32-pin low profile quad flat package (7 x 7) .\nAdded Figure: LQFP 48-pin recommended footprint and Figure: \nLQFP 32-pin recommended footprint.\nFigure: Ordering information scheme(1):  added footnote 1, added \n“xxx” and footnote 2, updated example and device family; added \nFASTROM.\nSection: C and assembly toolchains:  added www.iar.com\n04-Apr-2014 7Updated:\n– Table: Device summary,\n– Table: STM8AF62xx product line-up,\n– Table: STM8AF/H61xx product line-up.– SPI description in Features.\n– The typical and maximum values for t\nTEMP  reset release delay in \nTable: Operating conditions at power-up/power-down.\n– The symbol for NRST Input not filtered pulse duration in  Table: \nNRST pin characteristics\n– The address and comment of Reset interrupt in Table: STM8A \ninterrupt table.\nAdded the three footnotes to Figure VFQFPN 32-lead very thin fine \npitch quad flat no-lead package (5 x 5) .\n24-Jun-2014 8Updated Table: HSI oscillator characteristics.\nAdded HSI accuracy and removed temperature range B in Figure: \nOrdering information scheme(1).\n12-Nov-2014 9Updates in Table: HSI oscillator characteristics (HSI oscillator \naccuracy (factory calibrated) values) and Figure: Ordering \ninformation scheme(1)  (changed the value for I).Table 50. Document revision history (continued)\nDate Revision Changes\nRevision history STM8AF6246/48/66/68\n98/99 DocID14952 Rev 1109-Jun-2015 10Updated:\n– the product naming in the document headers and captions,– LIN version in Features  and Section 5.9.3: Universal \nasynchronous receiver/transmitter with LIN support (LINUART) .\nAdded:\n– the third table footnote to Table 22: Operating conditions at power-\nup/power-down ,\n–Figure 44: VFQFPN32 marking example (package top view) ,\n–Figure 47: LQFP48 marking example (package top view) ,\n–Figure 50: LQFP32 marking example (package top view) ,\n– the note about the parts marked “E” and “ES” below Figure 51: \nSTM8AF6246/48/66/68 ordering information scheme(1) (2) ,\n– the standard for EMI characteristics in Table 43: EMI data .\nRemoved the references to STM8AF61xx and STM8AH61xx \nobsolete products.\nMoved Section 11.4: Therma l characteristics  to Section 11: Package \ninformation .\n14-Jun-2016 11Update Table 46: VFQFPN32 - 32-pin, 5x5 mm, 0.5 mm pitch very \nthin profile fine pitch quad flat package mechanical dataTable 50. Document revision history (continued)\nDate Revision Changes\nDocID14952 Rev 11 99/99STM8AF6246/48/66/68\n99          \nIMPORTANT NOTICE – PLEASE READ CAREFULLY\nSTMicroelectronics NV and its subsidiaries (“ST”) reserve the right to make changes, corrections, enhancements, modifications, and \nimprovements to ST products and/or to this document at any time without notice. Purchasers should obtain the latest relevant in formation on \nST products before placing orders. ST products are sold pursuant to ST’s terms and conditions of sale in place at the time of o rder \nacknowledgement.\nPurchasers are solely responsible for the choice, selection, and use of ST products and ST assumes no liability for application  assistance or \nthe design of Purchasers’ products.\nNo license, express or implied, to any intellectual property right is granted by ST herein.Resale of ST products with provisions different from the information set forth herein shall void any warranty granted by ST for  such product.\nST and the ST logo are trademarks of ST. All other product or service names are the property of their respective owners.Information in this document supersedes and replaces information previously supplied in any prior versions of this document.\n© 2016 STMicroelectronics – All rights reserved\n'}]
!==============================================================================!
### Component Summary: STM8AF6266TDY

#### Key Characteristics and Specifications:
- **Voltage Ratings**: 3.0V to 5.5V
- **Current Ratings**: 
  - Supply current in Run mode: Up to 14 mA (at 16 MHz)
  - Output current: 20 mA (sink) / -20 mA (source)
- **Power Consumption**: 
  - Typical supply current in Run mode: 7.4 mA (at 16 MHz)
  - Supply current in Halt mode: 5 µA (max)
- **Operating Temperature Range**: -40°C to 150°C
- **Package Type**: Available in LQFP32 (7x7 mm), LQFP48 (7x7 mm), and VFQFPN32 (5x5 mm)
- **Special Features**:
  - AEC-Q100 qualified for automotive applications
  - Integrated true data EEPROM (up to 1 Kbyte)
  - 10-bit ADC with up to 10 multiplexed channels
  - Multiple communication interfaces: LIN, SPI, I2C
  - Low-power modes: Wait, Halt, and Active-halt
- **Moisture Sensitive Level**: MSL 3 (JEDEC J-STD-020E)

#### Description:
The STM8AF6266TDY is an automotive-grade 8-bit microcontroller (MCU) from STMicroelectronics, part of the STM8A family. It features a Harvard architecture with a maximum CPU frequency of 16 MHz, providing efficient processing capabilities. The MCU includes up to 32 Kbytes of Flash memory, 2 Kbytes of RAM, and a true data EEPROM, making it suitable for various applications requiring reliable data storage and processing.

#### Typical Applications:
The STM8AF6266TDY is designed for automotive applications, particularly in areas such as:
- **Power Management**: Efficiently managing power consumption through various low-power modes.
- **Signal Processing**: Utilizing its integrated ADC for sensor data acquisition and processing.
- **Communication**: Supporting LIN, SPI, and I2C protocols for interfacing with other automotive components and systems.
- **Control Systems**: Implementing control algorithms for automotive systems, including motor control and lighting systems.

This microcontroller is ideal for applications that require robustness, reliability, and compliance with automotive standards, making it a suitable choice for automotive electronics and embedded systems.