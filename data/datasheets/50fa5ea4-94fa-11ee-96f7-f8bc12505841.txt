[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of ATXMEGA32D4-MHR production of MICROCHIP TECHNOLOGY from the text: Atmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Features\n\uf06cHigh-performance, low-power Atmel® AVR® XMEGA® 8/16-bit Microcontroller\n\uf06cNonvolatile program and data memories\n\uf06c16K - 128KBytes of in-system self-programmable flash\n\uf06c4K - 8KBytes boot section\n\uf06c1K - 2KBytes EEPROM\n\uf06c2K - 8KBytes internal SRAM\n\uf06cPeripheral Features\n\uf06cFour-channel event system\n\uf06cFour 16-bit timer/counters\n\uf06cTwo timer/counters with 4 output co mpare or input capture channels\n\uf06cTwo timer/counters with 2 output co mpare or input capture channels\n\uf06cHigh-resolution extensions on all timer/counters\n\uf06cAdvanced waveform extension (AWeX) on one timer/counter\n\uf06cTwo USARTs with IrDA support for one USART\n\uf06cTwo two-wire interfaces with dual address match (I2C and SMBus compatible)\n\uf06cTwo serial peripheral interfaces (SPIs)\n\uf06cCRC-16 (CRC-CCITT) and CRC-32  (IEEE 802.3) generator\n\uf06c16-bit real time counter (R TC) with separate oscillator\n\uf06cOne twelve-channel, 12-bit, 200ksps Analog to Digital Converter\n\uf06cTwo Analog Comparators with window co mpare function, and current sources\n\uf06cExternal interrupts on all general purpose I/O pins\n\uf06cProgrammable watchdog timer with separate on-chip ultra low power oscillator \n\uf06cQTouch® library support\n\uf06cCapacitive touch buttons, sliders and wheels\n\uf06cSpecial microcontroller features\n\uf06cPower-on reset and programmable brown-out detection\n\uf06cInternal and external clock options with PLL and prescaler\n\uf06cProgrammable multilevel interrupt controller\n\uf06cFive sleep modes\n\uf06cProgramming and debug interfaces\n\uf06cPDI (program and debug interface)\n\uf06cI/O and packages\n\uf06c34 Programmable I/O pins\n\uf06c44 - lead TQFP\n\uf06c44 - pad VQFN/QFN\n\uf06c49 - ball VFBGA\n\uf06cOperating voltage\n\uf06c1.6 – 3.6V\n\uf06cOperating frequency\n\uf06c0 – 12MHz from 1.6V\n\uf06c0 – 32MHz from 2.7V8/16-bit Atmel XMEGA D4 Microcontroller\nATxmega128D4 / ATxmega64D4 /\nATxmega32D4 / ATxmega16D4\n2 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20161. Ordering Information\nOrdering CodeFlash \n(Bytes)EEPROM \n(Bytes)SRAM \n(Bytes)Speed \n(MHz)Power \nSupply Package(1)(2)(3)Temp\nATxmega128D4-AU 128K + 8K 2K 8K\n32 1.6 - 3.6V44A\n-40\uf0b0C - 85\uf0b0CATxmega128D4-AUR(4)128K + 8K 2K 8K\nATxmega64D4-AU 64K + 4K 2K 4K\nATxmega64D4-AUR(4)64K + 4K 2K 4K\nATxmega32D4-AU 32K + 4K 1K 4K\nATxmega32D4-AUR(4)32K + 4K 1K 4K\nATxmega16D4-AU 16K + 4K 1K 2K\nATxmega16D4-AUR(4)16K + 4K 1K 2K\nATxmega128D4-MH 128K + 8K 2K 8K\n44M1ATxmega128D4-MHR(4)128K + 8K 2K 8K\nATxmega64D4-MH 64K + 4K 2K 4K\nATxmega64D4-MHR(4)64K + 4K 2K 4K\nATxmega32D4-MH 32K + 4K 1K 4K\nATxmega32D4-MHR(4)32K + 4K 1K 4K\nATxmega16D4-MH 16K + 4K 1K 2K\nATxmega16D4-MHR(4)16K + 4K 1K 2K\nATxmega128D4-CU 128K + 8K 2K 8K\n49C2ATxmega128D4-CUR(4)128K + 8K 2K 8K\nATxmega64D4-CU 64K + 4K 2K 4K\nATxmega64D4-CUR(4)64K + 4K 2K 4K\nATxmega32D4-CU 32K + 4K 1K 4K\nATxmega32D4-CUR(4)32K + 4K 1K 4K\nATxmega16D4-CU 16K + 4K 1K 2K\nATxmega16D4-CUR(4)16K + 4K 1K 2K\n3 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Notes: 1. This device can also be supplied in wafer form. Please contact your local Atmel sales office for detailed ordering info rmation.\n2. Pb-free packaging, complies to the European Directive for Restri ction of Hazardous Substances (RoHS directive). Also Halide f ree and fully Green.\n3. For packaging information see ”Packaging information” on page 64 .\n4. Tape and Reel.\nTypical ApplicationsATxmega128D4-AN 128K + 8K 2K 8K\n32 1.6 - 3.6V44A\n-40\uf0b0C - 105\uf0b0CATxmega128D4-ANR(4)128K + 8K 2K 8K\nATxmega64D4-AN 64K + 4K 2K 4K\nATxmega64D4-ANR(4)64K + 4K 2K 4K\nATxmega32D4-AN 32K + 4K 1K 4K\nATxmega32D4-ANR(4)32K + 4K 1K 4K\nATxmega16D4-AN 16K + 4K 1K 2K\nATxmega16D4-ANR(4)16K + 4K 1K 2K\nATxmega128D4-M7 128K + 8K 2K 8K\n44M1ATxmega128D4-M7R(4)128K + 8K 2K 8K\nATxmega64D4-M7 64K + 4K 2K 4K\nATxmega64D4-M7R(4)64K + 4K 2K 4K\nATxmega32D4-M7 32K + 4K 1K 4K\nATxmega32D4-M7R(4)32K + 4K 1K 4K\nATxmega16D4-M7 16K + 4K 1K 2K\nATxmega16D4-M7R(4)16K + 4K 1K 2K\nPackage type\n44A 44-lead, 10*10mm body size, 1.0mm body th ickness, 0.8mm lead pitch, thin profile plastic quad flat package (TQFP)\n44M1 44-Pad, 7*7*1mm body, lead pitch 0.50mm, 5.20mm exposed pad, thermally enhanced plastic very  thin quad no lead package (VQFN)\n49C2 49-ball (7 * 7 Array), 0.65mm pitch, 5.0*5.0*1.0mm, very thin, fine-pitch ball grid array package (VFBGA)\nIndustrial control Climate control Low power battery applications\nFactory automation RF and ZigBee®Power tools\nBuilding control USB connectivity HVAC\nBoard control Sensor control Utility metering\nWhite goods Optical Medical applicationsOrdering CodeFlash \n(Bytes)EEPROM \n(Bytes)SRAM \n(Bytes)Speed \n(MHz)Power \nSupply Package(1)(2)(3)Temp\n4 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20162. Pinout/Block diagram \nFigure 2-1. Block Diagram and QFN/TQFP Pinout\nNote: 1. For full details on pinout and pin functions refer to “Pinout and Pin Functions” on page 49 .1\n2\n3\n4\n44\n43\n424140\n39\n38\n5\n6\n789\n10\n1133\n32\n31\n3029\n28\n272625\n24\n2337\n36\n35\n3412\n13\n14\n1516\n17\n18\n19\n20\n2122PA0PA1PA2PA3PA4\nPB0\nPB1\nPB3PB2PA7PA6PA5\nGND\nVCC\nPC0\nVCCGNDPC1\nPC2\nPC3\nPC4\nPC5\nPC6\nPC7\nPD0\nPD1PD2PD3PD4PD5PD6VCC\nGND\nPD7PE0PE1PE2PE3RESET/PDI\nPDIPR0PR1AVCC\nGND\nPower \nSupervisionPort A\nEVENT ROUTING NETWORKBUS \nmatrix\nSRAM\nFLASHADC\nAC0:1\nOCD\nPort E Port DProg/Debug\nInterface\nEEPROM\nPort CTC0:1Event System \nControllerWatchdog \nTimerWatchdogOSC/CLK \nControl\nReal Time\nCounter\nInterrupt \nController\nDATA BUSDATA BUSPort R\nUSART0\nTWISPI\nTC0\nUSART0\nSPI\nTC0\nTWIPort BAREFAREF\nSleep \nControllerReset\nControllerIRCOMCRC\nCPUInternal\nreferencesInternal\noscillatorsXOSC TOSCDigital function\nAnalog function / OscillatorsProgramming, debug, test\nExternal clock / Crystal pins\nGeneral Purpose I /OGroundPower\n5 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 2-2. VFBGA Pinout\n1 2 3 4 5 6 7\nA PA3 AVCC GND PR1 PR0 PDI PE3\nB PA4 PA1 PA0 GND RESET /PDI_CLK PE2 VCC\nC PA5 PA2 PA6 PA7 GND PE1 GND\nD PB1 PB2 PB3 PB0 GND PD7 PE0\nE GND GND PC3 GND PD4 PD5 PD6\nF VCC PC0 PC4 PC6 PD0 PD1 PD3\nG PC1 PC2 PC5 PC7 GND VCC PD2A\nBCDEFG1234567\nA\nBCDEFG765432 1\nTop view Bottom view\n6 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20163. Overview\nThe Atmel AVR XMEGA is a family of low power, high perfo rmance, and peripheral rich 8/16-bit microcontrollers based \non the AVR enhanced RISC architecture. By executing instructions in a single clock cycle, the AVR XMEGA device achieves throughputs CPU approaching one million instructions  per second (MIPS) per megahertz, allowing the system \ndesigner to optimize power consumption versus processing speed.\nThe AVR CPU combines a rich instruction set with 32 general purpose working registers. All 32 registers are directly \nconnected to the arithmetic logic unit (ALU), allowing two independent registers to be accessed in a single instruction, executed in one clock cycle. The resulting architecture is more code efficient while achieving throughputs many times \nfaster than conventional single-accumu lator or CISC based microcontrollers.\nThe AVR XMEGA D4 devices provide the following features : in-system programmable flash with read-while-write \ncapabilities; internal EEPROM and SRAM; four-channel event system and programmable multilevel interrupt controller, \n34 general purpose I/O lines, 16-bit real-tim e counter (RTC); four flexible, 16-b it timer/counters with compare and PWM \nchannels; two USARTs; two two-wire serial interfaces (TWIs) ; two serial peripheral interfaces (SPIs); one twelve-\nchannel, 12-bit ADC with optional differential input with pr ogrammable gain; two analog comparators (ACs) with window \nmode; programmable watchdog timer with separate internal o scillator; accurate internal oscillators with PLL and \nprescaler; and programmable brown-out detection.\nThe program and debug interface (PDI), a fast, two-pi n interface for programming and debugging, is available.\nThe XMEGA D4 devices have five software selectable power saving modes. The idle mode stops the CPU while allowing \nthe SRAM, event system, interrupt controller, and all peripherals to continue functioning. The power-down mode saves the SRAM and register contents, but stops the oscillators, disabling all other functions until the next TWI, or pin-change \ninterrupt, or reset. In power-save mode, the asynchronous real -time counter continues to run, allowing the application to \nmaintain a timer base while the rest of the device is sleeping. In standby mode, the external crystal oscillator keeps \nrunning while the rest of the device is sleeping. This allows very fast startup from the external crystal, combined with low \npower consumption. In extended standby mode, both the main oscillator and the asynchronous timer continue to run. To \nfurther reduce power consumption, the peripheral clock to each individual peripheral can optionally be stopped in active \nmode and idle sleep mode.\nAtmel offers a free QTouch library for embedding capacitive touch buttons, sliders and wheels functionality into AVR \nmicrocontrollers.\nThe devices are manufactured using Atmel high-density, nonvol atile memory technology. The program flash memory can \nbe reprogrammed in-system through the PDI interface. A boot  loader running in the device can use any interface to \ndownload the application program to the flash memory. The boot lo ader software in the boot flash section will continue to \nrun while the application flash section is updated, providi ng true read-while-write operation. By combining an 8/16-bit \nRISC CPU with in-system, self-programmable flash, the AVR XM EGA is a powerful microcontroller family that provides a \nhighly flexible and cost effective solution for many embedded applications.\nAll Atmel AVR XMEGA devices are supported with a full suite of program and system development tools, including C \ncompilers, macro assemblers, program debugger/simulators, programmers, and evaluation kits.\n7 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20163.1 Block Diagram\nFigure 3-1. XMEGA D4 Block Diagram\nPower \nSupervision\nPOR/BOD & \nRESETPORT A (8)\nPORT B (4)SRAM ADCAACA\nOCDInt. Refs.PDIPA[0..7]\nPB[0..3]Watchdog \nTimerWatchdog\nOscillator\nInterrupt \nControllerDATA BUS\nProg/Debug\nControllerVCC\nGNDOscillator \nCircuits/ \nClock \nGeneration\nOscillator \nControlReal Time\nCounter\nEvent System \nController\nAREFA\nAREFBPDI_DATARESET/\nPDI_CLKSleep \nController\nCRC\nPORT C (8)\nPC[0..7] TCC0:1\nUSARTC0\nTWICSPIC\nPD[0..7] PE[0..3]PORT D (8)\nTCD0\nUSARTD0\nSPID\nTCE0\nTWIE\nPORT E (4)TemprefVCC/10PORT R (2)XTAL/\nTOSC1\nXTAL2/\nTOSC2PR[0..1]\nDATA BUSNVM Controller\nMORPEE hsalFIRCOMBUS Matrix\nCPU\nTOSC1\nTOSC2To Clock \nGeneratorEVENT ROUTING NETWORKDigital function\nAnalog functionProgramming, debug, test\nOscillator/Crystal/Clock\nGeneral Purpose I/O\n8 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20164. Resources\nA comprehensive set of development tools, application notes and datasheets are available for download on \nhttp://www.atmel.com/avr .\n4.1 Recommended Reading\n\uf06c Atmel AVR XMEGA D manual\n\uf06c XMEGA application notes\nThis device data sheet only contains part specific informati on with a short description of each peripheral and module. The \nXMEGA D manual describes the modules and peripherals in depth. The XMEGA application notes contain example code \nand show applied use of the modules and peripherals.\nAll documentations are available from www.atmel.com/avr .\n5. Capacitive Touch Sensing\nThe Atmel QTouch library provides a simple to use soluti on to realize touch sensitive interfaces on most Atmel AVR \nmicrocontrollers. The patented charge-transfer signal acqui sition offers robust sensing and includes fully debounced \nreporting of touch keys and includes Adjacent Key Suppression® (AKS®) technology for unambiguous detection of key \nevents. The QTouch library includes support for the QTouch and QMatrix acquisition methods.\nTouch sensing can be added to any application by linki ng the appropriate Atmel QTouch library for the AVR \nmicrocontroller. This is done by using a simple set of APIs to define the touch channels and sensors, and then calling the \ntouch sensing API’s to retrieve the channel information and determine the touch sensor states.\nThe QTouch library is FREE and downloadable from the Atmel website at the following location: \nhttp://www.atmel.com/tools/QTOUCHLIBRARY.aspx . For implementation details and other information, refer to the \nQTouch library user guide - also available for download from the Atmel website.\n9 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20166. AVR CPU\n6.1 Features\n\uf06c8/16-bit, high-performance Atmel AVR RISC CPU\n\uf06c137 instructions\n\uf06cHardware multiplier\n\uf06c32x8-bit registers directly connected to the ALU\n\uf06cStack in RAM\n\uf06cStack pointer accessible in I/O memory space\n\uf06cDirect addressing of up to 16MB of program memory and 16MB of data memory\n\uf06cTrue 16/24-bit access to 16/24-bit I/O registers\n\uf06cEfficient support for 8-, 16-, and 32-bit arithmetic\n\uf06cConfiguration change protection of system-critical features\n6.2 Overview\nAll Atmel AVR XMEGA devices use the 8/16-bit AVR CPU. T he main function of the CPU is to execute the code and \nperform all calculations. The CPU is able to access memories , perform calculations, control peripherals, and execute the \nprogram in the flash memory. Interrupt handling is described in a separate section, refer to “Interrupts and Programmable \nMultilevel Interrupt Controller” on page 27 .\n6.3 Architectural Overview\nIn order to maximize performance and parallelism, the AVR CPU uses a Harvard architecture with separate memories \nand buses for program and data. Instructions in the program memo ry are executed with single-level pipelining. While one \ninstruction is being executed, the next instruction is pre-fe tched from the program memory. This enables instructions to \nbe executed on every clock cycle. For details of all AVR instructions, refer to http://www.atmel.com/avr .\nFigure 6-1. Block Diagram of  the AVR CPU Architecture\n10 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016The arithmetic logic unit (ALU) supports arithmetic and l ogic operations between registers or between a constant and a \nregister. Single-register operations can also be executed in t he ALU. After an arithmetic operation, the status register is \nupdated to reflect information about the result of the operation.\nThe ALU is directly connected to the fast-access register file. The 32 x 8-bit general purpose working registers all have \nsingle clock cycle access time allowing single-cycle arithmet ic logic unit (ALU) operation between registers or between a \nregister and an immediate. Six of the 32 registers can be used as three 16-bit address pointers for program and data \nspace addressing, enabling efficient address calculations.\nThe memory spaces are linear. The data memory space and the program memory space are two different memory \nspaces.\nThe data memory space is divided into I/O registers, SRAM, and external RAM. In addition, the EEPROM can be \nmemory mapped in the data memory.\nAll I/O status and control registers reside in the lowest 4KB addresses of the data memory. This is referred to as the I/O \nmemory space. The lowest 64 addresses can be accessed directly, or as the data space locations from 0x00 to 0x3F. The rest is the extended I/O memory space, ranging from 0x0040 to 0x0FFF. I/O registers here must be accessed as \ndata space locations using load (LD/LDS/LDD) and store (ST/STS/STD) instructions.\nThe SRAM holds data. Code execution from SRAM is not s upported. It can easily be accessed through the five different \naddressing modes supported in the AVR architecture. The first SRAM address is 0x2000.\nData addresses 0x1000 to 0x1FFF are reserved for memory mapping of EEPROM.The program memory is divided in two sections, the applic ation program section and the boot program section. Both \nsections have dedicated lock bits for write and read/write protection. The SPM instruction that is used for self-\nprogramming of the application flash memory must reside in t he boot program section. The application section contains \nan application table section with separate lock bits for write and read/write protection. The application table section can \nbe used for safe storing of nonvolatile data in the program memory.\n6.4 ALU - Arithmetic Logic Unit\nThe arithmetic logic unit (ALU) supports arithmetic and l ogic operations between registers or between a constant and a \nregister. Single-register operations can also be executed. The ALU operates in direct connection with all 32 general \npurpose registers. In a single clock cycle, arithmetic oper ations between general purpose registers or between a register \nand an immediate are executed and the result is stored in the r egister file. After an arithmetic or logic operation, the \nstatus register is updated to reflect information about the result of the operation.\nALU operations are divided into three main categories – ar ithmetic, logical, and bit functions. Both 8- and 16-bit \narithmetic is supported, and the instruction set allows for efficient implementation of 32- bit aritmetic. The hardware \nmultiplier supports signed and unsigned multiplication and fractional format.\n6.4.1 Hardware Multiplier\nThe multiplier is capable of multiplying two 8-bit numbers into  a 16-bit result. The hardware multiplier supports different \nvariations of signed and unsigned integer and fractional numbers:\n\uf06c Multiplication of unsigned integers\n\uf06c Multiplication of signed integers\n\uf06c Multiplication of a signed integer with an unsigned integer\n\uf06c Multiplication of unsigned fractional numbers\n\uf06c Multiplication of signed fractional numbers\n\uf06c Multiplication of a signed fractional number with an unsigned one\nA multiplication takes two CPU clock cycles.\n11 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20166.5 Program Flow\nAfter reset, the CPU starts to execute instructions from the lowest address in the flash programmemory ‘0.’ The program \ncounter (PC) addresses the next instruction to be fetched.\nProgram flow is provided by conditional and unconditional  jump and call instructions capable of addressing the whole \naddress space directly. Most AVR instructions use a 16-bit word format, while a limited number use a 32-bit format.\nDuring interrupts and subroutine calls, the return address PC is stored on the stack. The stack is allocated in the general \ndata SRAM, and consequently the stack size is only limited by the total SRAM size and the usage of the SRAM. After reset, the stack pointer (SP) points to the highest address in the internal SRAM. The SP is read/write accessible in the \nI/O memory space, enabling easy implementation of multiple stacks or stack areas. The data SRAM can easily be \naccessed through the five different addressing modes supported in the AVR CPU.\n6.6 Status Register\nThe status register (SREG) contains information about the result of the most recently executed arithmetic or logic \ninstruction. This information can be used for altering program flow in order to perform conditional operations. Note that \nthe status register is updated after all ALU operations, as specif ied in the instruction set reference. This will in many \ncases remove the need for using the dedicated compare instructions, resulting in faster and more compact code.\nThe status register is not automatically stored when ente ring an interrupt routine nor restored when returning from an \ninterrupt. This must be handled by software.\nThe status register is accessible in the I/O memory space.\n6.7 Stack and Stack Pointer\nThe stack is used for storing return addresses after interrupts and subroutine calls. It can also be used for storing \ntemporary data. The stack pointer (SP) register always points to the top of the stack. It is implemented as two 8-bit \nregisters that are accessible in the I/O memory space. Data are pushed and popped from the stack using the PUSH and POP instructions. The stack grows from a higher memory locati on to a lower memory location. This implies that pushing \ndata onto the stack decreases the SP, and popping data off the stack increases the SP. The SP is automatically loaded \nafter reset, and the initial value is the highest address of the internal SRAM. If the SP is changed, it must be set to point above address 0x2000, and it must be defined before any subr outine calls are executed or before interrupts are enabled.\nDuring interrupts or subroutine calls, the return address is automatically pushed on the stack. The return address can be \ntwo or three bytes, depending on program memory size of the device. For devices with 128KB or less of program \nmemory, the return address is two bytes, and hence the stack pointer is decremented/incremented by two. For devices with more than 128KB of program memory, the return address is three bytes, and hence the SP is \ndecremented/incremented by three. The return address is popped off the stack when returning from interrupts using the \nRETI instruction, and from subroutine calls using the RET instruction.\nThe SP is decremented by one when data are pushed on the stack with the PUSH instruction, and incremented by one \nwhen data is popped off the stack using the POP instruction.\nTo prevent corruption when updating the stack pointer from software, a write to SPL will automatically disable interrupts \nfor up to four instructions or until the next I/O memory write.\nAfter reset the stack pointer is initialized to the highest address of the SRAM. See Figure 7-2 on page 15 .\n6.8 Register File\nThe register file consists of 32 x 8-bit general purpose worki ng registers with single clock cycle access time. The register \nfile supports the following input/output schemes:\n\uf06c One 8-bit output operand and one 8-bit result input\n\uf06c Two 8-bit output operands and one 8-bit result input\n\uf06c Two 8-bit output operands and one 16-bit result input\n\uf06c One 16-bit output operand and one 16-bit result input\n12 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Six of the 32 registers can be used as three 16-bit address r egister pointers for data space addressing, enabling efficient \naddress calculations. One of these address pointers can also  be used as an address pointer for lookup tables in flash \nprogram memory.\n7. Memories\n7.1 Features\n\uf06cFlash program memory\n\uf06cOne linear address space\n\uf06cIn-system programmable\n\uf06cSelf-programming and boot loader support\n\uf06cApplication section for application code\n\uf06cApplication table section for application code or data storage\n\uf06cBoot section for application code or boot loader code\n\uf06cSeparate read/write protection lock bits for all sections\n\uf06cBuilt in fast CRC check of a select able flash program memory section\n\uf06cData memory\n\uf06cOne linear address space\n\uf06cSingle-cycle access from CPU\n\uf06cSRAM\n\uf06cEEPROM\n\uf06cByte and page accessible\n\uf06cOptional memory mapping for direct load and store\n\uf06cI/O memory\n\uf06cConfiguration and status registers for all peripherals and modules\n\uf06c16 bit-accessible general purpose registers for global variables or flags\n\uf06cProduction signature row memory for factory programmed data\n\uf06cID for each microcontroller device type\n\uf06cSerial number for each device\n\uf06cCalibration bytes for fact ory calibrated peripherals\n\uf06cUser signature row\n\uf06cOne flash page in size\n\uf06cCan be read and written from software\n\uf06cContent is kept after chip erase\n7.2 Overview\nThe Atmel AVR architecture has two main memory spaces, the program memory and the data memory. Executable code \ncan reside only in the program memory, while data can be stored in the program memory and the data memory. The data \nmemory includes the internal SRAM, and EEPROM for nonvol atile data storage. All memory spaces are linear and \nrequire no memory bank switching. Nonvolatile memory (N VM) spaces can be locked for further write and read/write \noperations. This prevents unrestricted access to the application software.\nA separate memory section contains the fuse bytes. These are used for configuring important system functions, and can \nonly be written by an external programmer.\nThe available memory size configurations are shown in “Ordering Information” on page 2 . In addition, each device has a \nFlash memory signature row for calibration data, device identification, serial number etc.\n13 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20167.3 Flash Program Memory\nThe Atmel AVR XMEGA devices contain on-chip, in-system  reprogrammable flash memory for program storage. The \nflash memory can be accessed for read and write from an ex ternal programmer through the PDI or from application \nsoftware running in the device.\nAll AVR CPU instructions are 16 or 32 bits wide, and each flas h location is 16 bits wide. The flash memory is organized \nin two main sections, the application section and the boot loader section. The sizes of the different sections are fixed, but device-dependent. These two sections have separate lock bits, and can have different levels of protection. The store \nprogram memory (SPM) instruction, which is used to write to the flash from the application software, will only operate \nwhen executed from the boot loader section.\nThe application section contains an application table section with separate lock settings. This enables safe storage of \nnonvolatile data in the program memory. \nFigure 7-1. Flash Program Memory (Hexadecimal Address)\n7.3.1 Application Section\nThe Application section is the section of the flash that is used for storing the executable application code. The protection \nlevel for the application section can be selected by the boot lock bits for this section. The application section can not store  \nany boot loader code since the SPM instruction cannot be executed from the application section.\n7.3.2 Application Table Section\nThe application table section is a part of the application sect ion of the flash memory that can be used for storing data. \nThe size is identical to the boot loader section. The protection level for the application table section can be selected by the boot lock bits for this section. The possibilities for different protection levels on the application section and the \napplication table section enable safe parameter storage in the program memory. If this section is not used for data, \napplication code can reside here.\n7.3.3 Boot Loader Section\nWhile the application section is used for storing the application code, the boot loader software must be located in the boot \nloader section because the SPM instruction can only initiate  programming when executing fr om this section. The SPM \ninstruction can access the entire flash, including the boot lo ader section itself. The protection level for the boot loader \nsection can be selected by the boot loader lock bits. If this section is not used for boot loader software, application code \ncan be stored here.Word address\nATxmega128D4 ATxmega64D4 ATxmega32D4 ATxmega16D4\n0 0 0 0Application section\n(128K/64K/32K/16K)\n...\nEFFF / 77FF / 37FF / 17FF\nF000 / 7800 / 3800 / 1800Application table section\n(8K/4K/4K/4K)FFFF / 7FFF / 3FFF / 1FFF\n10000 / 8000 / 4000 / 2000Boot section\n(8K/4K/4K/4K)10FFF / 87FF / 47FF / 27FF\n14 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20167.3.4 Production Signature Row\nThe production signature row is a separate memory section for factory programmed data. It contains calibration data for \nfunctions such as oscillators and analog modules. Some of the calibration values will be automatically loaded to the \ncorresponding module or peripheral unit during reset. Other va lues must be loaded from the signature row and written to \nthe corresponding peripheral registers from software . For details on calibration conditions, refer to “Electrical \nCharacteristics” on page 64 .\nThe production signature row also contains an ID that identif ies each microcontroller device type and a serial number for \neach manufactured device. The serial number consists  of the production lot number, wafer number, and wafer \ncoordinates for the device. The device ID for the available devices is shown in Table 7-1 on page 14 .\nThe production signature row cannot be written or erased, but it can be read from application software and external \nprogrammers.\nTable 7-1. Device ID Bytes for Atmel AVR XMEGA D4 Devices\n7.3.5 User Signature Row\nThe user signature row is a separate memory section that is  fully accessible (read and write) from application software \nand external programmers. It is one flash page in size, and is mean t for static user parameter storage, such as calibration \ndata, custom serial number, identification numbers, random number  seeds, etc. This section is not erased by chip erase \ncommands that erase the flash, and requires a dedicated erase command. This ensures parameter storage during \nmultiple program/erase operations and on-chip debug sessions.\n7.4 Fuses and Lock Bits\nThe fuses are used to configure important system functions , and can only be written from an external programmer. The \napplication software can read the fuses. The fuses are used to configure reset sources such as brownout detector and \nwatchdog, startup configuration, JTAG enable, and JTAG user ID.\nThe lock bits are used to set protection levels for the different  flash sections (that is, if read and/or write access should b e \nblocked). Lock bits can be written by external programmers and application software, but only to stricter protection levels. \nChip erase is the only way to erase the lock bits. To ensure that flash contents are protected even during chip erase, the \nlock bits are erased after the rest of the flash memory has been erased.\nAn unprogrammed fuse or lock bit will have the value one, whil e a programmed fuse or lock bit will have the value zero.\nBoth fuses and lock bits are reprogrammable like the flash program memory.\n7.5 Data Memory\nThe data memory contains the I/O memory, internal SRAM , optionally memory mapped EEPROM, and external memory \nif available. The data memory is organized as one continuous memory section, see Figure 7-2 on page 15 . To simplify \ndevelopment, I/O Memory, EEPROM and SRAM will always hav e the same start addresses for all Atmel AVR XMEGA \ndevices.Device Device ID bytes\nByte 2 Byte 1 Byte 0\nATxmega16D4 42 94 1E\nATxmega32D4 42 95 1E\nATxmega64D4 47 96 1E\nATxmega128D4 47 97 1E\n15 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 7-2. Data Memory Map (Hexadecimal Address)\n \n7.6 EEPROM\nXMEGA D devices have EEPROM for nonvolatile data storage. It is either addressable in a separate data space (default) \nor memory mapped and accessed in normal data space. The EEPROM supports both byte and page access. Memory mapped EEPROM allows highly efficient EEPROM readi ng and EEPROM buffer loading. When doing this, EEPROM is \naccessible using load and store instructions. Memory mapped EEPROM will always start at hexadecimal address \n0x1000.\n7.7 I/O Memory\nThe status and configuration registers for peripherals and modules, including the CPU, are addressable through I/O \nmemory locations. All I/O locations can be accessed by the load (LD/LDS/LDD) and store (ST/STS/STD) instructions, \nwhich are used to transfer data between the 32 registers in the register file and the I/O memory. The IN and OUT instructions can address I/O memory locations in the range of 0x00 to 0x3F directly. In the address range 0x00 - 0x1F, \nsingle-cycle instructions for manipulation and c hecking of individual bits are available.\nThe I/O memory address for all peripherals and modules in XMEGA D4 is shown in the “Peripheral Module Address Map” \non page 54 .\n7.7.1 General Purpose I/O Registers\nThe lowest 16 I/O memory addresses are reserved as general purpose I/O registers. These registers can be used for \nstoring global variables and flags, as they are directly bit- accessible using the SBI, CBI, SBIS, and SBIC instructions.Byte address ATxmega64D4 Byte address ATxmega32D4 Byte address ATxmega16D4\n0\nI/O Registers  (4K)0\nI/O Registers (4K)0\nI/O Registers (4K)\nFFF FFF FFF\n1000\nEEPROM  (2K)1000\nEEPROM (1K)1000\nEEPROM (1K)\n17FF 13FF 13FF\nRESERVED RESERVED RESERVED\n2000\nInternal SRAM (4K)2000\nInternal SRAM (4K)2000\nInternal SRAM (2K)\n2FFF 2FFF 27FF\nByte address ATxmega128D4\n0\nI/O Registers (4K)\nFFF\n1000\nEEPROM (2K)\n17FF\nRESERVED\n2000\nInternal SRAM (8K)\n3FFF\n16 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20167.8 Data Memory and Bus Arbitration\nSince the data memory is organized as four separate sets of memories, the bus masters (CPU, etc.) can access different \nmemory sections at the same time.\n7.9 Memory Timing\nRead and write access to the I/O memory takes one CPU clock cycle. A write to SRAM takes one cycle, and a read from SRAM takes two cycles. EEPROM page load (write) takes one cycle, and three cycles are required for read. For burst read, new data are available every second cycle. Refer to the instruction summary for more details on instructions and \ninstruction timing.\n7.10 Device ID and Revision\nEach device has a three-byte device ID. This ID identifies Atmel as the manufacturer of the device and the device type. A \nseparate register contains the revision number of the device.\n7.11 I/O Memory Protection\nSome features in the device are regarded as critical for safety in some applications. Due to this, it is possible to lock the I/O register related to the clock system, the event system, and the advanced waveform extensions. As long as the lock is enabled, all related I/O registers are locked and they can not be written from the application software. The lock registers \nthemselves are protected by the configuration change protection mechanism.\n7.12 Flash and EEPROM Page Size\nThe flash program memory and EEPROM data memory are or ganized in pages. The pages are word accessible for the \nflash and byte accessible for the EEPROM.\nTable 7-2 on page 16  shows the Flash Program Memory organization and Program Counter (PC) size. Flash write and \nerase operations are performed on one page at a time, while reading the Flash is done one byte at a time. For Flash access the Z-pointer (Z[m:n]) is used for addressing. The mo st significant bits in the address (FPAGE) give the page \nnumber and the least significant address bits (FWORD) give the word in the page.\nTable 7-2. Number of Words and Pages in the Flash\nTable 7-3 on page 17  shows EEPROM memory organization for the Atmel AVR XMEGA D4 devices. EEEPROM write \nand erase operations can be performed one page or one byte at a time, while reading the EEPROM is done one byte at \na time. For EEPROM access the NVM address register (ADDR[m: n]) is used for addressing. The most significant bits in \nthe address (E2PAGE) give the page number and the least signifi cant address bits (E2BYTE) give the byte in the page.Devices PC size Flash size Page Size FWORD FPAGE Application Boot\nbits bytes words Size No of  pages Size No of pages\nATxmega16D4 14 16K + 4K 128 Z[7:1] Z[13:8] 16K 64 4K 16\nATxmega32D4 15 32K + 4K 128 Z[7:1] Z[14:8] 32K 128  4K 16\nATxmega64D4 16 64K + 4K 128 Z[7:1] Z[15:8] 64K 256  4K 16\nATxmega128D4 17 128K + 8K 128 Z[9:1] Z[16:8] 128K 512 8K 32\n17 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 7-3. Number of Bytes and Pages in the EEPROM\nDevices EEPROM Page Size E2BYTE E2PAGE No of Pages\nSize bytes\nATxmega16D4 1K 32 ADDR[4:0] ADDR[10:5] 32\nATxmega32D4 1K 32 ADDR[4:0] ADDR[10:5] 32\nATxmega64D4 2K 32 ADDR[4:0] ADDR[10:5] 64\nATxmega128D4 2K 32 ADDR[4:0] ADDR[10:5] 64\n18 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20168. Event System\n8.1 Features\n\uf06cSystem for direct peripheral-to- peripheral communication and signaling\n\uf06cPeripherals can directly send, receive, and react to peripheral events\n\uf06cCPU independent operation\n\uf06c100% predictable signal timing\n\uf06cShort and guaranteed response time\n\uf06cFour event channels for up to four different and parallel signal routing configurations\n\uf06cEvents can be sent and/or used by most peripherals, clock system, and software\n\uf06cAdditional functions include\n\uf06cQuadrature decoders\n\uf06cDigital filtering of I/O pin state\n\uf06cWorks in active mode and idle sleep mode\n8.2 Overview\nThe event system enables direct peripheral-to-peripheral  communication and signaling. It allows a change in one \nperipheral’s state to automatically trigger actions in other peripherals. It is designed to provide a predictable system for \nshort and predictable response times between peripherals. It allows for autonomous peripheral control and interaction \nwithout the use of interrupts, CPU, and is thus a powerful tool for reducing the complexity, size and execution time of \napplication code. It also allows for synchronized timing of actions in several peripheral modules.\nA change in a peripheral’s state is referred to as an event, and usually corresponds to the peripheral’s interrupt \nconditions. Events can be directly passed to other peripherals using a dedicated routing network called the event routing \nnetwork. How events are routed and used by the peripherals is configured in software.\nFigure 8-1  shows a basic diagram of all connected peripherals. The event system can directly connect together analog to \ndigital converter, analog comparators, I/O port pins, the re al-time counter, timer/counters, and IR communication module \n(IRCOM). Events can also be generated from software and the peripheral clock.\nFigure 8-1. Event System Overvi ew and Connected Peripherals\nThe event routing network consists of four software-configurable multiplexers that control how events are routed and \nused. These are called event channels, and allow for up to four parallel event routing configurations. The maximum \nrouting latency is two peripheral clock cycles. The event system works in both active mode and idle sleep mode.Timer / \nCountersADC\nReal Time \nCounter\nPort pinsCPU / \nSoftware\nIRCOMEvent Routing Network\nEvent\nSystem\nControllerclkPER\nPrescaler\nAC\n19 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20169. System Clock and Clock Options\n9.1 Features\n\uf06cFast start-up time\n\uf06cSafe run-time clock switching\n\uf06cInternal oscillators:\n\uf06c32MHz run-time calibrated and tuneable oscillator\n\uf06c2MHz run-time calibrated oscillator\n\uf06c32.768kHz calibrated oscillator\n\uf06c32kHz ultra low power (ULP) oscillator with 1kHz output\n\uf06cExternal clock options\n\uf06c0.4MHz - 16MHz crystal oscillator\n\uf06c32.768kHz crystal oscillator\n\uf06cExternal clock\n\uf06cPLL with 20MHz - 128MHz output frequency\n\uf06cInternal and external clock options and 1x to 31x multiplication\n\uf06cLock detector\n\uf06cClock prescalers with 1x to 2048x division\n\uf06cFast peripheral clocks running at two and four times the CPU clock\n\uf06cAutomatic run-time calibration of internal oscillators\n\uf06cExternal oscillator and PLL lock failure detection with optional non-maskable interrupt\n9.2 Overview\nAtmel AVR XMEGA D4 devices have a flexible clock system s upporting a large number of clock sources. It incorporates \nboth accurate internal oscillators and external crysta l oscillator and resonator support. A high-frequency phase locked \nloop (PLL) and clock prescalers can be used to generate a wide range of clock frequencies. A calibration feature (DFLL) \nis available, and can be used for automatic run-time calibration of the internal oscillators to remove frequency drift over \nvoltage and temperature. An oscillator failure monitor can be enabled to issue a non-maskable interrupt and switch to the \ninternal oscillator if the external oscillator or PLL fails.\nWhen a reset occurs, all clock sources except the 32kHz ultra low power oscillator are disabled. After reset, the device \nwill always start up running from the 2MHz internal oscill ator. During normal operation, the system clock source and \nprescalers can be changed from software at any time.\nFigure 9-1 on page 20  presents the principal clock system in the XMEGA D4 family of devices. Not all of the clocks need \nto be active at a given time. The clocks for the CPU and peripherals can be stopped using sleep modes and power \nreduction registers, as described in “Power Management and Sleep Modes” on page 22 .\n20 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 9-1. The Clock System, Clo ck Sources and Clock Distribution \n9.3 Clock Sources\nThe clock sources are divided in two main groups: internal oscillators and external clock sources. Most of the clock \nsources can be directly enabled and disabled from softwa re, while others are automatically enabled or disabled, \ndepending on peripheral settings. After reset, the device starts up running from the 2MHz internal oscillator. The other \nclock sources, DFLLs and PLL, are turned off by default.\nThe internal oscillators do not require any external component s to run. For details on characteristics and accuracy of the \ninternal oscillators, refer to the device datasheet.\n9.3.1 32kHz Ultra Low Power Internal Oscillator\nThis oscillator provides an approximate 32kHz clock. The 32kHz  ultra low power (ULP) internal oscillator is a very low \npower clock source, and it is not designed for high accuracy. The oscillator employs a built-in prescaler that provides a Real Time\nCounterPeripherals RAM AVR CPUNon-Volatile\nMemory\nWatchdog\nTimerBrown-out\nDetectorSystem Clock Prescalers\nSystem Clock Multiplexer\n(SCLKSEL)\nPLLSRCRTCSRC\nDIV32\n32 kHz\nInt. ULP32.768 kHz\nInt. OSC32.768 kHz\nTOSC2 MHz\nInt. Osc32 MHz\nInt. Osc0.4 – 16 MHz\nXTAL\nDIV32\nDIV32DIV4\nXOSCSELPLL\nTOSC1TOSC2XTAL1XTAL2clkSYSclkRTCclkPER2clkPER\nclkCPU\nclkPER4\n21 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20161kHz output. The oscillator is automatically enabled/disabled when it is used as clock source for any part of the device. \nThis oscillator can be selected as the clock source for the RTC.\n9.3.2 32.768kHz Calibrate d Internal Oscillator\nThis oscillator provides an approximate 32.768kHz clock. It is  calibrated during production to provide a default frequency \nclose to its nominal frequency. The calibration register can also  be written from software for run-time calibration of the \noscillator frequency. The oscillator employs a built-in pre scaler, which provides both a 32.768kHz output and a 1.024kHz \noutput.\n9.3.3 32.768kHz Crystal Oscillator\nA 32.768kHz crystal oscillator can be connected between the TOSC1 and TOSC2 pins and enables a dedicated low \nfrequency oscillator input circuit. A low power mode with reduc ed voltage swing on TOSC2 is available. This oscillator \ncan be used as a clock source for the system clock and RTC, and as the DFLL reference clock.\n9.3.4 0.4 - 16MHz Crystal Oscillator\nThis oscillator can operate in four different modes optimized for different frequency ranges, all within 0.4 - 16MHz.\n9.3.5 2MHz Run-time Calibr ated Internal Oscillator\nThe 2MHz run-time calibrated internal oscillator is the default system clock source after reset. It is calibrated during \nproduction to provide a default frequency close to its nominal frequency. A DFLL can be enabled for automatic run-time \ncalibration of the oscillator to compensate for temperature and voltage drift and optimize the oscillator accuracy.\n9.3.6 32MHz Run-time Calib rated Internal  Oscillator\nThe 32MHz run-time calibrated internal oscillator is a high-frequency oscillator. It is calibrated during production to \nprovide a default frequency close to its nominal frequency. A digital frequency looked loop (DFLL) can be enabled for \nautomatic run-time calibration of the oscillator to compens ate for temperature and voltage drift and optimize the oscillator \naccuracy. This oscillator can also be adjusted and calibrated to any frequency between 30MHz and 55MHz.\n9.3.7 External Clock Sources\nThe XTAL1 and XTAL2 pins can be used to drive an external oscillator, either a quartz crystal or a ceramic resonator. \nXTAL1 can be used as input for an external clock signal . The TOSC1 and TOSC2 pins is dedicated to driving a \n32.768kHz crystal oscillator.\n9.3.8 PLL with 1x-31x Multiplication Factor\nThe built-in phase locked loop (PLL) can be used to generat e a high-frequency system clock. The PLL has a user-\nselectable multiplication factor of from 1 to 31. In combin ation with the prescalers, this gives a wide range of output \nfrequencies from all clock sources.\n22 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201610. Power Management and Sleep Modes\n10.1 Features\n\uf06cPower management for adjusting power consumption and functions\n\uf06cFive sleep modes\n\uf06cIdle\n\uf06cPower down\n\uf06cPower save\n\uf06cStandby\n\uf06cExtended standby\n\uf06cPower reduction register to disable clock and turn off unused peripherals in active and idle modes\n10.2 Overview\nVarious sleep modes and clock gating are provided in order to  tailor power consumption to application requirements. \nThis enables the Atmel AVR XMEGA microcontroller to stop unused modules to save power.\nAll sleep modes are available and can be entered from active mode. In active mode, the CPU is executing application \ncode. When the device enters sleep mode, program execution is stopped and interrupts or a reset is used to wake the \ndevice again. The application code decides which sleep m ode to enter and when. Interrupts from enabled peripherals \nand all enabled reset sources can restore the microcontroller from sleep to active mode.\nIn addition, power reduction registers provide a method to st op the clock to individual peripherals from software. When \nthis is done, the current state of the peripheral is frozen, and there is no power consumption from that peripheral. This \nreduces the power consumption in active mode and idle sleep modes and enables much more fine-tuned power \nmanagement than sleep modes alone.\n10.3 Sleep Modes\nSleep modes are used to shut down modules and clock domains in the microcontroller in order to save power. XMEGA \nmicrocontrollers have five different sleep modes tuned to match the typical functional stages during application \nexecution. A dedicated sleep instruction (SLEEP) is avail able to enter sleep mode. Interrupts are used to wake the \ndevice from sleep, and the available interrupt wake-up sources are dependent on the configured sleep mode. When an \nenabled interrupt occurs, the device will wake up and execute the interrupt service routine before continuing normal \nprogram execution from the first instruction after the SLEEP instruction. If other, higher priority interrupts are pending when the wake-up occurs, their interrupt service routines will be executed according to their priority before the interrupt \nservice routine for the wake-up interrupt is executed. After wake-up, the CPU is halted for four cycles before execution \nstarts.\nThe content of the register file, SRAM and registers are kept  during sleep. If a reset occurs during sleep, the device will \nreset, start up, and execute from the reset vector.\n10.3.1 Idle Mode\nIn idle mode the CPU and nonvolatile memory are stopped (note that any ongoing programming will be completed), but all peripherals, including the interrupt controller, and event system are kept running. Any enabled interrupt will wake the \ndevice.\n10.3.2 Power-down Mode\nIn power-down mode, all clocks, including the real-time count er clock source, are stopped. This allows operation only of \nasynchronous modules that do not require a running clock. The only interrupts that can wake up the MCU are the two-wire interface address match interrupt, and asynchronous port interrupts.\n23 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201610.3.3 Power-save Mode\nPower-save mode is identical to power down, with one excepti on. If the real-time counter (RTC) is enabled, it will keep \nrunning during sleep, and the device can also wake up from either an RTC overflow or compare match interrupt.\n10.3.4 Standby Mode\nStandby mode is identical to power down, with the exception that the enabled system clock sources are kept running \nwhile the CPU, peripheral, and RTC clocks are stopped. This reduces the wake-up time.\n10.3.5 Extended Standby Mode\nExtended standby mode is identical to power-save mode, with the exception that the enabled system clock sources are kept running while the CPU and peripheral clocks are stopped. This reduces the wake-up time.\n24 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201611. System Control and Reset\n11.1 Features\n\uf06cReset the microcontroller and set it to initial state when a reset source goes active\n\uf06cMultiple reset sources that cover different situations\n\uf06cPower-on reset\n\uf06cExternal reset\n\uf06cWatchdog reset\n\uf06cBrownout reset\n\uf06cPDI reset\n\uf06cSoftware reset\n\uf06cAsynchronous operation\n\uf06cNo running system clock in the device is required for reset\n\uf06cReset status register for reading the reset source from the application code\n11.2 Overview\nThe reset system issues a microcontroller reset and sets the device to its initial state. This is for situations where \noperation should not start or continue, such as when the micr ocontroller operates below its power supply rating. If a reset \nsource goes active, the device enters and is kept in reset until all reset sources have released their reset. The I/O pins \nare immediately tri-stated. The program counter is set to the reset vector location, and all I/O registers are set to their \ninitial values. The SRAM content is kept. However, if the device accesses the SRAM when a reset occurs, the content of the accessed location can not be guaranteed.\nAfter reset is released from all reset sources, the default oscillator is started and calibrated before the device starts \nrunning from the reset vector address. By default, this is the lowest program memory address, 0, but it is possible to \nmove the reset vector to the lowest address in the boot section.\nThe reset functionality is asynchronous, and so no running syst em clock is required to reset the device. The software \nreset feature makes it possible to issue a controlled system reset from the user software.\nThe reset status register has individual status flags fo r each reset source. It is cleared at power-on reset, and shows \nwhich sources have issued a reset since the last power-on.\n11.3 Reset Sequence\nA reset request from any reset source will immediately rese t the device and keep it in reset as long as the request is \nactive. When all reset requests are released, the device will go through three stages before the device starts running \nagain:\n\uf06c Reset counter delay\n\uf06c Oscillator startup\n\uf06c Oscillator calibration\nIf another reset requests occurs during this process, the reset sequence will start over again.\n25 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201611.4 Reset Sources\n11.4.1 Power-on Reset\nA power-on reset (POR) is generated by an on-chip detection circuit. The POR is activated when the VCC rises and \nreaches the POR threshold voltage (VPOT), and this will start the reset sequence.\nThe POR is also activated to power down the device properly when the VCC falls and drops below the VPOT level.\nThe VPOT level is higher for falling VCC than for rising VCC. Consult the datasheet for POR characteristics data.\n11.4.2 Brownout Detection\nThe on-chip brownout detection (BOD) circuit monitors the VCC level during operation by comparing it to a fixed, \nprogrammable level that is selected by the BODLEVEL fuses. If disabled, BOD is forced on at the lowest level during chip \nerase and when the PDI is enabled.\n11.4.3 External Reset\nThe external reset circuit is connected to the external RESET  pin. The external reset will trigger when the RESET  pin is \ndriven below the RESET  pin threshold voltage, VRST, for longer than the minimum pulse period, tEXT. The reset will be \nheld as long as the pin is kept low. The RESET  pin includes an internal pull-up resistor.\n11.4.4 Watchdog Reset\nThe watchdog timer (WDT) is a system function for monitoring correct program operation. If the WDT is not reset from the software within a programmable timeout period, a watchdog reset will be given. The watchdog reset is active for one \nto two clock cycles of the 2MHz internal oscillator. For more details see “WDT – Watchdog Timer” on page 26 .\n11.4.5 Software Reset\nThe software reset makes it possible to issue a system reset from software by writing to the software reset bit in the reset \ncontrol register.The reset will be issued within two CPU clock cycl es after writing the bit. It is not possible to execute any \ninstruction from when a software reset is requested until it is issued.\n11.4.6 Program and Debug Interface Reset\nThe program and debug interface reset contains a separate reset source that is used to reset the device during external \nprogramming and debugging. This reset source is acce ssible only from external debuggers and programmers.\n26 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201612. WDT – Watchdog Timer\n12.1 Features\n\uf06cIssues a device reset if the timer is not reset before its timeout period\n\uf06cAsynchronous operation from dedicated oscillator \n\uf06c1kHz output of the 32kHz ultra low power oscillator\n\uf06c11 selectable timeout periods, from 8ms to 8s\n\uf06cTwo operation modes:\n\uf06cNormal mode\n\uf06cWindow mode\n\uf06cConfiguration lock to prevent unwanted changes\n12.2 Overview\nThe watchdog timer (WDT) is a system function for monitoring correct program operation. It makes it possible to recover \nfrom error situations such as runaway or deadlocked code.  The WDT is a timer, configured to a predefined timeout \nperiod, and is constantly running when enabled. If the WDT is not reset within the timeout period, it will issue a microcontroller reset. The WDT is reset by executing the WDR (watchdog timer reset) instruction from the application \ncode.\nThe window mode makes it possible to define a time slot or window inside the total timeout period during which WDT \nmust be reset. If the WDT is reset outside this window, either too early or too late, a system reset will be issued. \nCompared to the normal mode, this can also catch situat ions where a code error causes constant WDR execution.\nThe WDT will run in active mode and all sleep modes, if e nabled. It is asynchronous, runs from a CPU-independent clock \nsource, and will continue to operate to issue a system reset even if the main clocks fail.\nThe configuration change protection mechanism ensures that the WDT settings cannot be changed by accident. For \nincreased safety, a fuse for locking the WDT settings is also available.\n27 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201613. Interrupts and Programmable Multilevel Interrupt Controller\n13.1 Features\n\uf06cShort and predictable interrupt response time\n\uf06cSeparate interrupt configuration and vector address for each interrupt\n\uf06cProgrammable multilevel interrupt controller\n\uf06cInterrupt prioritizing according to level and vector address\n\uf06cThree selectable interrupt levels for all interrupts: low, medium and high\n\uf06cSelectable, round-robin priority scheme within low-level interrupts\n\uf06cNon-maskable interrupts for critical functions\n\uf06cInterrupt vectors optionally placed in the application section or the boot loader section\n13.2 Overview\nInterrupts signal a change of state in peripherals, and this c an be used to alter program execution. Peripherals can have \none or more interrupts, and all are individually enabled and configured. When an interrupt is enabled and configured, it \nwill generate an interrupt request when the interrupt condition is present. The programmable multilevel interrupt controller (PMIC) controls the handling and prioritizing of  interrupt requests. When an interrupt request is acknowledged \nby the PMIC, the program counter is set to point to t he interrupt vector, and the interrupt handler can be executed.\nAll peripherals can select between three different priority leve ls for their interrupts: low, medium, and high. Interrupts are \nprioritized according to their level and their interrupt vect or address. Medium-level interrupts will interrupt low-level \ninterrupt handlers. High-level interrupts wil l interrupt both medium- and low-level interrupt handlers. Within each level, the \ninterrupt priority is decided from the interrupt vector addres s, where the lowest interrupt vector address has the highest \ninterrupt priority. Low-level interrupts have an optional r ound-robin scheduling scheme to ensure that all interrupts are \nserviced within a certain amount of time.\nNon-maskable interrupts (NMI) are also supported, and can be used for system critical functions.\n13.3 Interrupt Vectors\nThe interrupt vector is the sum of the peripheral’s base interrupt address and the offset address for specific interrupts in \neach peripheral. The base addresses for the Atmel AVR XMEGA D4 devices are shown in Table 13-1 on page 28 . Offset \naddresses for each interrupt available in the peripheral ar e described for each peripheral in the XMEGA D manual. For \nperipherals or modules that have only one inte rrupt, the interrupt vector is shown in Table 13-1 on page 28 . The program \naddress is the word address.\n28 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 13-1. Reset and Interrupt Vectors\nProgram Address\n(Base Address) Source Interrupt Description\n0x000 RESET\n0x002 OSCF_INT_vect Crystal Oscillator Failure Interrupt vector (NMI)\n0x004 PORTC_INT_base Port C Interrupt base\n0x008 PORTR_INT_base Port R Interrupt base\n0x014 RTC_INT_base Real Time Counter Interrupt base\n0x018 TWIC_INT_base Two-Wire Interface on Port C Interrupt base\n0x01C TCC0_INT_base Timer/Counter 0 on po rt C Interrupt base\n0x028 TCC1_INT_base Timer/Counter 1 on po rt C Interrupt base\n0x030 SPIC_INT_vect SPI on port C Interrupt vector\n0x032 USARTC0_INT_base USART 0 on port C Interrupt base\n0x040 NVM_INT_base Non-Volatile Memory Interrupt base\n0x044 PORTB_INT_base Port B Interrupt base\n0x056 PORTE_INT_base Port E Interrupt base\n0x05A TWIE_INT_base Two-Wire Interface on Port E Interrupt base\n0x05E TCE0_INT_base Timer/Counter 0 on po rt E Interrupt base\n0x080 PORTD_INT_base Port D Interrupt base\n0x084 PORTA_INT_base Port A Interrupt base\n0x088 ACA_INT_base Analog Comparator on Port A Interrupt base\n0x08E ADCA_INT_base Analog to Digital Converter on Port A Interrupt base\n0x09A TCD0_INT_base Timer/Counter 0 on po rt D Interrupt base\n0x0AE SPID_INT_vector SPI on port D Interrupt vector\n0x0B0 USARTD0_INT_base USART 0 on port D Interrupt base\n29 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201614. I/O Ports\n14.1 Features\n\uf06c34 general purpose input and output pins with individual configuration\n\uf06cOutput driver with configurable driver and pull settings:\n\uf06cTotem-pole\n\uf06cWired-AND\n\uf06cWired-OR\n\uf06cBus-keeper\n\uf06cInverted I/O\n\uf06cInput with synchronous and/or asynchronous sensing with interrupts and events\n\uf06cSense both edges\n\uf06cSense rising edges\n\uf06cSense falling edges\n\uf06cSense low level\n\uf06cOptional pull-up and pull-down resistor on input and Wired-OR/AND configurations\n\uf06cAsynchronous pin change sensing that can wake the device from all sleep modes\n\uf06cTwo port interrupts with pin masking per I/O port\n\uf06cEfficient and safe access to port pins\n\uf06cHardware read-modify-write through de dicated toggle/clear/set registers\n\uf06cConfiguration of multiple pins in a single operation\n\uf06cMapping of port registers into bit-accessible I/O memory space\n\uf06cPeripheral clocks output on port pin\n\uf06cReal-time counter clock output to port pin\n\uf06cEvent channels can be output on port pin\n\uf06cRemapping of digital peripheral pin functions\n\uf06cSelectable USART, SPI, and timer/counter input/output pin locations\n14.2 Overview\nOne port consists of up to eight port pins: pin 0 to 7. Each port pin can be configured as input or output with configurable \ndriver and pull settings. They also implement synchronous an d asynchronous input sensing with interrupts and events for \nselectable pin change conditions. Asynchronous pin-change sensin g means that a pin change can wake the device from \nall sleep modes, included the modes where no clocks are running.\nAll functions are individual and configurable per pin, but se veral pins can be configured in a single operation. The pins \nhave hardware read-modify-write  (RMW) functionality for safe and correct change of drive value and/or pull resistor \nconfiguration. The direction of one port pin can be changed without unintentionally changing the direction of any other \npin.\nThe port pin configuration also controls input and output selection of other device functions. It is possible to have both the \nperipheral clock and the real-time clock output to a port pin, and available for external use. The same applies to events from the event system that can be used to synchronize and cont rol external functions. Other digital peripherals, such as \nUSART, SPI, and timer/counters, can be remapped to selectabl e pin locations in order to optimize pin-out versus \napplication needs.\nThe notation of the ports are PORTA, PORTB, PORTC, PORTD, PORTE, and PORTR.\n30 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201614.3 Output Driver\nAll port pins (Pxn) have programmable output configuration.\n14.3.1 Push-pull\nFigure 14-1. I/O Configuration - Totem-pole\n14.3.2 Pull-down\nFigure 14-2. I/O Configuration - Totem-pole with Pull-down (on Input)\n14.3.3 Pull-up\nFigure 14-3. I/O Configuration - Totem-pole with Pull-up (on Input)\n14.3.4 Bus-keeper\nThe bus-keeper’s weak output produces the same logical level as the last output level. It acts as a pull-up if the last level \nwas ‘1’, and pull-down if the last level was ‘0’.INxnOUTxnDIRxn\nPxn\nINxnOUTxnDIRxn\nPxn\nINxnOUTxnDIRxn\nPxn\n31 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 14-4. I/O Configuration - Totem-pole with Bus-keeper\n14.3.5 Others\nFigure 14-5. Output Configuration - Wired-OR with Optional Pull-down\nFigure 14-6. I/O Configuration - Wired-AND with Optional Pull-up\n14.4 Input Sensing\nInput sensing is synchronous or asynchronous depending on the enabled clock for the ports, and the configuration is \nshown in Figure 14-7 .INxnOUTxnDIRxn\nPxn\nINxnOUTxn\nPxn\nINxn\nOUTxnPxn\n32 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 14-7. Input Sensing System Overview\nWhen a pin is configured with inverted I/O, the pin value is inverted before the input sensing.\n14.5 Alternate Port Functions\nMost port pins have alternate pin functions in addition to being a general purpose I/O pin. When an alternate function is \nenabled, it might override the normal port pin function or pin va lue. This happens when other per ipherals that require pins \nare enabled or configured to use pins. If and how a peripheral will override and use pins is described in the section for \nthat peripheral. “Pinout and Pin Functions” on page 49  shows which modules on peripherals that enable alternate \nfunctions on a pin, and which alternate functions that are available on a pin.DQ\nR\nINVERTED I/OInterrupt\nControl\nDQ\nRPxn\nSynchronizer\nINn\nEDGE\nDETECT\nSynchronous sensingEDGE\nDETECT\nAsynchronous sensing\nIRQ\nSynchronous \nEvents\nAsynchronous \nEvents\n33 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201615. TC0/1 – 16-bit Timer/ Counter Type 0 and 1\n15.1 Features\n\uf06cFour 16-bit timer/counters\n\uf06cThree timer/counters of type 0\n\uf06cOne timer/counter of type 1\n\uf06c32-bit timer/counter support by cascading two timer/counters\n\uf06cUp to four compare or capture (CC) channels\n\uf06cFour CC channels for ti mer/counters of type 0\n\uf06cTwo CC channels for timer/counters of type 1\n\uf06cDouble buffered timer period setting\n\uf06cDouble buffered capture or compare channels\n\uf06cWaveform generation:\n\uf06cFrequency generation\n\uf06cSingle-slope pulse width modulation\n\uf06cDual-slope pulse width modulation\n\uf06cInput capture:\n\uf06cInput capture with noise cancelling\n\uf06cFrequency capture\n\uf06cPulse width capture\n\uf06c32-bit input capture\n\uf06cTimer overflow and error interrupts/events\n\uf06cOne compare match or input capture interrupt/event per CC channel\n\uf06cCan be used with event system for:\n\uf06cQuadrature decoding\n\uf06cCount and direction control\n\uf06cCapture\n\uf06cHigh-resolution extension\n\uf06cIncreases frequency and waveform resolution by 4x (2-bit) or 8x (3-bit)\n\uf06cAdvanced waveform extension:\n\uf06cLow- and high-side output with pr ogrammable dead-time insertion (DTI)\n\uf06cEvent controlled fault protection for safe disabling of drivers\n15.2 Overview\nAtmel AVR XMEGA devices have a set of four flexible 16-bi t Timer/Counters (TC). Their capabilities include accurate \nprogram execution timing, frequency and waveform generation, and input capture with time and frequency measurement of digital signals. Two timer/counters can be cascaded to create a 32-bit timer/counter with optional 32-bit capture.\nA timer/counter consists of a base counter and a set of compare or capture (CC) channels. The base counter can be \nused to count clock cycles or events. It has direction control and period setting that can be used for timing. The CC \nchannels can be used together with the base counter to do compare match control, frequency generation, and pulse width waveform modulation, as well as various input capture operations. A timer/counter can be configured for either \ncapture or compare functions, but cannot perform both at the same time.\nA timer/counter can be clocked and timed from the peripheral  clock with optional prescaling or from the event system. \nThe event system can also be used for direction cont rol and capture trigger or to synchronize operations.\nThere are two differences between timer/counter type 0 and type 1. Timer/counter 0 has four CC channels, and \ntimer/counter 1 has two CC channels. All information related to CC channels 3 and 4 is valid only for timer/counter 0. \nOnly Timer/Counter 0 has the split mode feature that split it into two 8-bit Timer/Counters with four compare channels \neach.\n34 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Some timer/counters have extensions to enable more specialized waveform and frequency generation. The advanced \nwaveform extension (AWeX) is intended for motor control and other power control applications. It enables low- and high-\nside output with dead-time insertion, as well as fault protecti on for disabling and shutting down external drivers. It can \nalso generate a synchronized bit pattern across the port pins.\nThe advanced waveform extension can be enabled to provide extra and more advanced features for the Timer/Counter. \nThis are only available for Timer/Counter 0. See “AWeX – Advanced Waveform Extension” on page 36  for more details.\nThe high-resolution (hi-res) extension can be used to increase the waveform output resolution by four or eight times by \nusing an internal clock source running up to four  times faster than the peripheral clock. See “Hi-Res – High Resolution \nExtension” on page 37  for more details.\nFigure 15-1. Overview of a Timer/Coun ter and Closely Related Peripherals\nPORTC has one Timer/Counter 0 and one Timer/Counter1. PORTD and PORTE each has one Timer/Conter0. Notation \nof these are TCC0 (Time/Counter C0), TCC1, TCD0 and TCE0, respectively.AWeXCompare/Capture Channel D\nCompare/Capture Channel C\nCompare/Capture Channel B\nCompare/Capture Channel A\nWaveform \nGenerationBufferComparator\nHi-ResFault \nProtectionCapture \nControlBase Counter\nCounterControl LogicTimer PeriodPrescaler\nDead-Time \nInsertionPattern \nGenerationclk PER4\nPORTEvent \nSystemclk PERTimer/Counter\n35 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201616. TC2 Timer/Counter Type 2\n16.1 Features\n\uf06cSix eight-bit timer/counters\n\uf06cThree Low-byte timer/counter\n\uf06cThree High-byte timer/counter\n\uf06cUp to eight compare channels in each Timer/Counter 2\n\uf06cFour compare channels for the low-byte timer/counter\n\uf06cFour compare channels for the high-byte timer/counter\n\uf06cWaveform generation\n\uf06cSingle slope pulse width modulation\n\uf06cTimer underflow interrupts/events\n\uf06cOne compare match interrupt/event per compare channel for the low-byte timer/counter\n\uf06cCan be used with the event system for count control\n16.2 Overview\nThere are three Timer/Counter 2. These are realized when a Timer/Counter 0 is set in split mode. It is then a system of \ntwo eight-bit timer/counters, each with four compare channels. This results in eight configurable pulse width modulation \n(PWM) channels with individually controlled duty cycles, and is intended for applications that require a high number of \nPWM channels.\nThe two eight-bit timer/counters in this system are referred to as the low-byte timer/counter and high-byte timer/counter, \nrespectively. The difference between them is that only the low-byte timer/counter can be used to generate compare match interrupts and events. The two eight-bit timer/counters have a shared clock source and separate period and \ncompare settings. They can be clocked and timed from the periphe ral clock, with optional prescaling, or from the event \nsystem. The counters are always counting down.\nPORTC, PORTD and PORTE each has one Timer/Counter 2. Nota tion of these are TCC2 (Time/Counter C2), TCD2 and \nTCE2, respectively.\n36 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201617. AWeX – Advanced Waveform Extension\n17.1 Features\n\uf06cWaveform output with complementary output from each compare channel\n\uf06cFour dead-time insertion (DTI) units\n\uf06c8-bit resolution\n\uf06cSeparate high and low side dead-time setting\n\uf06cDouble buffered dead time\n\uf06cOptionally halts timer during dead-time insertion\n\uf06cPattern generation unit creating synchronised bit pattern across the port pins\n\uf06cDouble buffered pattern generation\n\uf06cOptional distribution of one compar e channel output across the port pins\n\uf06cEvent controlled fault protection for instant and predictable fault triggering\n17.2 Overview\nThe advanced waveform extension (AWeX) provides extra func tions to the timer/counter in waveform generation (WG) \nmodes. It is primarily intended for use with different types of motor control and other power control applications. It \nenables low- and high side output with dead-time insertion and fault protection for disabling and shutting down external \ndrivers. It can also generate a synchronized bit pattern across the port pins.\nEach of the waveform generator outputs from the timer/count er 0 are split into a complimentary pair of outputs when any \nAWeX features are enabled. These output pairs go through a dead-time insertion (DTI) unit that generates the non-inverted low side (LS) and inverted high side (HS) of the WG output with dead-time insertion between LS and HS \nswitching. The DTI output will override the normal port value according to the port override setting.\nThe pattern generation unit can be used to generate a synchroniz ed bit pattern on the port it is connected to. In addition, \nthe WG output from compare channel A can be distributed to and override all the port pins. When the pattern generator \nunit is enabled, the DTI unit is bypassed.\nThe fault protection unit is connected to the event system, enabling any event to trigger a fault condition that will disable \nthe AWeX output. The event system ensures predictable and instant fault reaction, and gives flexibility in the selection of \nfault triggers.\nThe AWeX is available for TCC0. The notation of this is AWEXC.\n37 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201618. Hi-Res – High R esolution Extension\n18.1 Features\n\uf06cIncreases waveform generator resolution up to 8x (three bits)\n\uf06cSupports frequency, single-slope PWM, and dual-slope PWM generation\n\uf06cSupports the AWeX when this is used for the same timer/counter\n18.2 Overview\nThe high-resolution (hi-res) extension can be used to increase the resolution of the waveform generation output from a \ntimer/counter by four or eight. It can be used for a time r/counter doing frequency, single-slope PWM, or dual-slope PWM \ngeneration. It can also be used with the AWeX if this is used for the same timer/counter.\nThe hi-res extension uses the peripheral 4x clock (ClkPER4). The system clock prescalers must be configured so the \nperipheral 4x clock frequency is four times higher than t he peripheral and CPU clock frequency when the hi-res extension \nis enabled.\nThere is one hi-res extension that can be enabled for each timer/counter on PORTC. The notation of this is HIRESC.\n38 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201619. RTC – 16-bit Real-Time Counter\n19.1 Features\n\uf06c16-bit resolution\n\uf06cSelectable clock source\n\uf06c32.768kHz external crystal\n\uf06cExternal clock\n\uf06c32.768kHz internal oscillator\n\uf06c32kHz internal ULP oscillator\n\uf06cProgrammable 10-bit clock prescaling\n\uf06cOne compare register\n\uf06cOne period register\n\uf06cClear counter on period overflow\n\uf06cOptional interrupt/event on overflow and compare match\n19.2 Overview\nThe 16-bit real-time counter (RTC) is a counter that typica lly runs continuously, including in low-power sleep modes, to \nkeep track of time. It can wake up the device from sleep modes and/or interrupt the device at regular intervals.\nThe reference clock is typically the 1.024kHz output from a high-accuracy crystal of 32.768kHz, and this is the \nconfiguration most optimized for low power consumption. The faster 32.768kHz output can be selected if the RTC needs \na resolution higher than 1ms. The RTC can also be clock ed from an external clock signal, the 32.768kHz internal \noscillator or the 32kHz internal ULP oscillator.\nThe RTC includes a 10-bit programmable prescaler that c an scale down the reference clock before it reaches the \ncounter. A wide range of resolutions and time-out periods can be configured. With a 32.768kHz clock source, the \nmaximum resolution is 30.5µs, and time-out periods can range up to 2000 seconds. With a resolution of 1s, the \nmaximum timeout period is more than18 hours (65536 seconds). The RTC can give a compare interrupt and/or event when the counter equals the compare register value, and an overflow interrupt and/or event when it equals the period \nregister value.\nFigure 19-1. Real-ti me Counter Overview\n32.768kHz Crystal Osc\n32.768kHz Int. OscTOSC1\nTOSC2External ClockDIV32\nDIV32\n32kHz int ULP (DIV32)\nRTCSRC\n10-bit\nprescalerclkRTC\nCNTPER\nCOMP==\n”match”/\nCompareTOP/\nOverflow\n39 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201620. TWI – Two-Wire Interface\n20.1 Features\n\uf06cTwo identical two-wire interface peripherals\n\uf06cBidirectional, two-wire communication interface\n\uf06cPhillips I2C compatible\n\uf06cSystem Management Bus (SMBus) compatible\n\uf06cBus master and slave operation supported\n\uf06cSlave operation\n\uf06cSingle bus master operation\n\uf06cBus master in multi-master bus environment\n\uf06cMulti-master arbitration\n\uf06cFlexible slave address match functions\n\uf06c7-bit and general call address recognition in hardware\n\uf06c10-bit addressing supported\n\uf06cAddress mask register for dual address match or address range masking\n\uf06cOptional software address recognition for unlimited number of addresses\n\uf06cSlave can operate in all sleep modes, including power-down\n\uf06cSlave address match can wake device from all sleep modes\n\uf06c100kHz and 400kHz bus frequency support\n\uf06cSlew-rate limited output drivers\n\uf06cInput filter for bus noise and spike suppression\n\uf06cSupport arbitration between start/r epeated start and data bit (SMBus)\n\uf06cSlave arbitration allows support for addr ess resolve protocol (ARP) (SMBus)\n20.2 Overview\nThe two-wire interface (TWI) is a bidirectional, two-wire communication interface. It is I2C and System Management Bus \n(SMBus) compatible. The only external hardware needed to im plement the bus is one pull-up resistor on each bus line.\nA device connected to the bus must act as a master or a slave. The master initiates a data transaction by addressing a \nslave on the bus and telling whether it wants to transmit or receive data. One bus can have many slaves and one or \nseveral masters that can take control of the bus. An arbitration process handles priority if more than one master tries to \ntransmit data at the same time. Mechanisms for resolving bus contention are inherent in the protocol.\nThe TWI module supports master and slave functionality. T he master and slave functionality are separated from each \nother, and can be enabled and configured separately. The ma ster module supports multi-master bus operation and \narbitration. It contains the baud rate generator. Both 100kHz and 400kHz bus frequency is supported. Quick command \nand smart mode can be enabled to auto-trigger operations and reduce software complexity.\nThe slave module implements 7-bit address match and general address call recognition in hardware. 10-bit addressing is \nalso supported. A dedicated address mask register can act as  a second address match register or as a register for \naddress range masking. The slave continues to operate in  all sleep modes, including power-down mode. This enables \nthe slave to wake up the device from all sleep modes on TWI address match. It is possible to disable the address matching to let this be handled in software instead.\nThe TWI module will detect START and STOP conditions, bus collisions, and bus errors. Arbitration lost, errors, collision, \nand clock hold on the bus are also detected and indicated in separate status flags available in both master and slave \nmodes.\nIt is possible to disable the TWI drivers in the device, and enable a four-wire digital interface for connecting to an external  \nTWI bus driver. This can be used for applications  where the device operates from a different V\nCC voltage than used by \nthe TWI bus.\nPORTC and PORTE each has one TWI. Notation of these peripherals are TWIC and TWIE.\n40 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201621. SPI – Serial Pe ripheral Interface\n21.1 Features\n\uf06cTwo identical SPI peripherals\n\uf06cFull-duplex, three-wire synchronous data transfer\n\uf06cMaster or slave operation\n\uf06cLsb first or msb first data transfer\n\uf06cEight programmable bit rates\n\uf06cInterrupt flag at the end of transmission\n\uf06cWrite collision flag to indicate data collision\n\uf06cWake up from idle sleep mode\n\uf06cDouble speed master mode\n21.2 Overview\nThe Serial Peripheral Interface (SPI) is a high-speed synchr onous data transfer interface using three or four pins. It \nallows fast communication between an Atmel AVR XMEGA device and peripheral devices or between several \nmicrocontrollers. The SPI supports full-duplex communication.\nA device connected to the bus must act as a master or slave. The master initiates and controls all data transactions.PORTC and PORTD each has one SPI. Notation of these peripherals are SPIC and SPID.\n41 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201622. USART\n22.1 Features\n\uf06cTwo identical USART peripherals\n\uf06cFull-duplex operation\n\uf06cAsynchronous or synchronous operation\n\uf06cSynchronous clock rates up to 1/2 of the device clock frequency\n\uf06cAsynchronous clock rates up to 1/8 of the device clock frequency\n\uf06cSupports serial frames with 5, 6, 7, 8, or 9 data bits and 1 or 2 stop bits\n\uf06cFractional baud rate generator\n\uf06cCan generate desired baud rate from any system clock frequency\n\uf06cNo need for external oscillator with certain frequencies\n\uf06cBuilt-in error detection and correction schemes\n\uf06cOdd or even parity generation and parity check\n\uf06cData overrun and framing error detection\n\uf06cNoise filtering includes false start bit detection and digital low-pass filter\n\uf06cSeparate interrupts for\n\uf06cTransmit complete\n\uf06cTransmit data register empty\n\uf06cReceive complete\n\uf06cMultiprocessor communication mode\n\uf06cAddressing scheme to address a specif ic devices on a multidevice bus\n\uf06cEnable unaddressed devices to automatically ignore all frames\n\uf06cMaster SPI mode\n\uf06cDouble buffered operation\n\uf06cOperation up to 1/2 of the peripheral clock frequency\n\uf06cIRCOM module for IrDA compliant pulse modulation/demodulation\n22.2 Overview\nThe universal synchronous and asynchronous serial receiver and transmitter (USART) is a fast and flexible serial \ncommunication module. The USART supports full-duplex communication and asynchronous and synchronous operation. \nThe USART can be configured to operate in SPI master mode and used for SPI communication.\nCommunication is frame based, and the frame format c an be customized to support a wide range of standards. The \nUSART is buffered in both directions, enabling continued dat a transmission without any delay between frames. Separate \ninterrupts for receive and transmit complete enable fully interrupt driven communication. Frame error and buffer overflow are detected in hardware and indicated with separate st atus flags. Even or odd parity generation and parity check can \nalso be enabled.\nThe clock generator includes a fractional baud rate generator that is able to generate a wide range of USART baud rates \nfrom any system clock frequencies. This removes the need to use an external crystal oscillator with a specific frequency to achieve a required baud rate. It also supports ex ternal clock input in synchronous slave operation.\nWhen the USART is set in master SPI mode, all USART-spec ific logic is disabled, leaving the transmit and receive \nbuffers, shift registers, and baud rate generator enabled. Pin control and interrupt generation are identical in both modes. \nThe registers are used in both modes, but their functionality differs for some control settings.\nAn IRCOM module can be enabled for one USART to suppor t IrDA 1.4 physical compliant pulse modulation and \ndemodulation for baud rates up to 115.2kbps.\nPORTC and PORTD each has one USART. Notation of thes e peripherals are USARTC0 and USARTD0 respectively.\n42 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201623. IRCOM – IR Communication Module\n23.1 Features\n\uf06cPulse modulation/demodulation for infrared communication\n\uf06cIrDA compatible for baud rates up to 115.2kbps\n\uf06cSelectable pulse modulation scheme\n\uf06c3/16 of the baud rate period\n\uf06cFixed pulse period, 8-bit programmable\n\uf06cPulse modulation disabled\n\uf06cBuilt-in filtering\n\uf06cCan be connected to and used by any USART\n23.2 Overview\nAtmel AVR XMEGA devices contain an infrared communication mo dule (IRCOM) that is IrDA compatible for baud rates \nup to 115.2Kbps. It can be connected to any USART to enable infrared pulse encoding/decoding for that USART.\n43 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201624. CRC – Cyclic Redu ndancy Check Generator\n24.1 Features\n\uf06cCyclic redundancy check (CRC) generation and checking for\n\uf06cCommunication data\n\uf06cProgram or data in flash memory\n\uf06cData in SRAM and I/O memory space\n\uf06cIntegrated with flash memory and CPU\n\uf06cAutomatic CRC of the complete or a selectable range of the flash memory\n\uf06cCPU can load data to the CRC generator through the I/O interface\n\uf06cCRC polynomial software selectable to\n\uf06cCRC-16 (CRC-CCITT)\n\uf06cCRC-32 (IEEE 802.3)\n\uf06cZero remainder detection\n24.2 Overview\nA cyclic redundancy check (CRC) is an error detection technique test algorithm used to find accidental errors in data, and \nit is commonly used to determine the correctness of a dat a transmission, and data present in the data and program \nmemories. A CRC takes a data stream or a block of data as input and generates a 16- or 32-bit output that can be \nappended to the data and used as a checksum. When the same data are later received or read, the device or application \nrepeats the calculation. If the new CRC result does not match the one calculated earlier, the block contains a data error. The application will then detect this and may take a corrective action, such as requesting the data to be sent again or \nsimply not using the incorrect data.\nTypically, an n-bit CRC applied to a data block of arbitrary length will detect any single error burst not longer than n bits \n(any single alteration that spans no more than n bits of the data), and will detect the fraction 1-2\n-n of all longer error \nbursts. The CRC module in Atmel AVR XMEGA devices s upports two commonly used CRC polynomials; CRC-16 (CRC-\nCCITT) and CRC-32 (IEEE 802.3).\n\uf06c CRC-16:\n\uf06c CRC-32:      Polynomial: x16+x12+x5+1\n  Hex value: 0x1021\n  Polynomial: x32+x26+x23+x22+x16+x12+x11+x10+x8+x7+x5+x4+x2+x+1\n   Hex value: 0x04C11DB7\n44 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201625. ADC – 12-bit Analog to Digital Converter\n25.1 Features\n\uf06cOne Analog to Digital Converters (ADC)\n\uf06c12-bit resolution\n\uf06cUp to 200 thousand samples per second\n\uf06cDown to 3.6µs conversion time with 8-bit resolution\n\uf06cDown to 5.0µs conversion time with 12-bit resolution\n\uf06cDifferential and single-ended input\n\uf06cUp to 12 single-ended inputs\n\uf06c12x4 differential inputs without gain\n\uf06c12x4 differential input with gain\n\uf06cBuilt-in differential gain stage\n\uf06c1/2x, 1x, 2x, 4x, 8x, 16x, 32x, and 64x gain options\n\uf06cSingle, continuous and scan conversion options\n\uf06cThree internal inputs\n\uf06cInternal temperature sensor\n\uf06cAVCC voltage divided by 10\n\uf06c1.1V bandgap voltage\n\uf06cInternal and external reference options\n\uf06cCompare function for accurate monitoring of user defined thresholds\n\uf06cOptional event triggered conversion for accurate timing\n\uf06cOptional interrupt/event on compare result\n25.2 Overview\nThe ADC converts analog signals to digital values. The ADC has 12-bit resolution and is capable of converting up to 200 \nthousand samples per second (ksps). The input select ion is flexible, and both single-ended and differential \nmeasurements can be done. For differential measurements, an op tional gain stage is available to increase the dynamic \nrange. In addition, several internal signal inputs are available. The ADC can provide both signed and unsigned results.\nThe ADC measurements can either be started by applicati on software or an incoming event from another peripheral in \nthe device. The ADC measurements can be started with predictable timing, and without software intervention.\nBoth internal and external reference voltages can be used. An  integrated temperature sensor is available for use with the \nADC. The AVCC/10 and the bandgap voltage can also be measured by the ADC.\nThe ADC has a compare function for accurate monitoring of user defined thresholds with minimum software intervention \nrequired.\n45 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 25-1. ADC overview\nThe ADC may be configured for 8- or 12-bit result, reducing the minimum conversion time (p ropagation delay) from 5.0µs \nfor 12-bit to 3.6µs for 8-bit result.\nADC conversion results are provided left- or right adjusted with optional ‘1’ or ‘0’ padding. This eases calculation when \nthe result is represented as a signed integer (signed 16-bit number).\nNotation of this peripheral is ADCA. The PORTA has  ADCA inputs 0..7 and PORTB has ADCA inputs 8..11.CH0 ResultCompare \nRegister\n<\n>Threshold\n(Int Req)\nInternal 1.00V\nInternal AVCC/1.6V\nAREFA\nAREFBVINP\nVINNInternal\nsignals\nInternal AVCC/2ADC0\nADC11\x81\n\x81\n\x81\nADC0\nADC7\x81\n\x81\n\x81\nReference \nVoltage\n46 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201626. AC – Analog Comparator\n26.1 Features\n\uf06cTwo Analog Comparators (ACs)\n\uf06cSelectable hysteresis\n\uf06cNo\n\uf06cSmall\n\uf06cLarge\n\uf06cAnalog comparator output available on pin\n\uf06cFlexible input selection\n\uf06cAll pins on the port\n\uf06cBandgap reference voltage\n\uf06cA 64-level programmable voltage scaler of the internal AVCC voltage\n\uf06cInterrupt and event generation on:\n\uf06cRising edge\n\uf06cFalling edge\n\uf06cToggle\n\uf06cWindow function interrupt and event generation on:\n\uf06cSignal above window\n\uf06cSignal inside window\n\uf06cSignal below window\n\uf06cConstant current source with configurable output pin selection\n26.2 Overview\nThe analog comparator (AC) compares the voltage levels  on two inputs and gives a digital output based on this \ncomparison. The analog comparator may be configured to generate interrupt requests and/or events upon several different combinations of input change.\nThe important property of the analog com parator’s dynamic behavior is the hysteresis. It can be adjusted in order to \nachieve the optimal operation for each application.\nThe input selection includes analog port pins, several inter nal signals, and a 64-level programmable voltage scaler. The \nanalog comparator output state can also be output on a pin for use by external devices.\nA constant current source can be enabled and output on a selectable pin. This can be used to replace, for example, \nexternal resistors used to charge capacitors in capacitive touch sensing applications.\nThe analog comparators are always grouped in pairs on eac h port. These are called analog comparator 0 (AC0) and \nanalog comparator 1 (AC1). They have identical behavior, but separate control registers. Used as pair, they can be set in \nwindow mode to compare a signal to a voltage range instead of a voltage level.\nPORTA has one AC pair. Notation is ACA.\n47 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 26-1. Analog Comparator Overview\nThe window function is realized by connecting the external i nputs of the two analog comparators in a pair as shown in \nFigure 26-2 .\nFigure 26-2. Analog Comparator Window FunctionACnMUXCTRL ACnCTRLInterrupt \nModeEnable\nEnableHysteresis\nHysteresis\nAC1OUTWINCTRLInterrupt\nSensititivity\nControl\n&\nWindow\nFunctionEventsInterruptsAC0OUTPin Input\nPin Input\nPin Input\nPin InputVoltage\nScaler\nBandgap+\n-\n+\n-\nAC0+\n-\nAC1+\n-Input signalUpper limit of window\nLower limit of windowInterrupt \nsensitivity \ncontrolInterrupts\nEvents\n48 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201627. Programming and Debugging\n27.1 Features\n\uf06cProgramming\n\uf06cExternal programming through PDI interface\n\uf06cMinimal protocol overhead for fast operation\n\uf06cBuilt-in error detection and handling for reliable operation\n\uf06cBoot loader support for programming through any communication interface\n\uf06cDebugging\n\uf06cNonintrusive, real-time, on-chip debug system\n\uf06cNo software or hardware resources required from device except pin connection\n\uf06cProgram flow control\n\uf06cGo, Stop, Reset, Step Into, Step  Over, Step Out, Run-to-Cursor\n\uf06cUnlimited number of user program breakpoints\n\uf06cUnlimited number of user data breakpoints, break on:\n\uf06cData location read, write,  or both read and write\n\uf06cData location content equal or not equal to a value\n\uf06cData location content is great er or smaller than a value\n\uf06cData location content is within or outside a range\n\uf06cNo limitation on device clock frequency\n\uf06cProgram and Debug Interface (PDI)\n\uf06cTwo-pin interface for external programming and debugging\n\uf06cUses the Reset pin and a dedicated pin\n\uf06cNo I/O pins required during programming or debugging\n27.2 Overview\nThe Program and Debug Interface (PDI) is an Atmel proprie tary interface for external programming and on-chip \ndebugging of a device.\nThe PDI supports fast programming of nonvolatile memory (N VM) spaces; flash, EEPOM, fuses, lock bits, and the user \nsignature row.\nDebug is supported through an on-chip debug system that offers nonintrusive, real-time debug. It does not require any \nsoftware or hardware resources except for the device pin connection. Using the Atmel tool chain, it offers complete \nprogram flow control and support for an unlimited number of  program and complex data breakpoints. Application debug \ncan be done from a C or other high-level language source code level, as well as from an assembler and disassembler \nlevel.\nProgramming and debugging can be done through the PDI physical layer. This is a two-pin interface that uses the Reset \npin for the clock input (PDI_CLK) and one other dedicated pi n for data input and output (PDI_DATA). Any external \nprogrammer or on-chip debugger/emulator can be directly connected to this interface.\n49 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201628. Pinout and Pin Functions\nThe device pinout is shown in ”Pinout/Block Diagram” on page 3 . In addition to general purpose I/O functionality, each \npin can have several alternate functions. This will depend on which peripheral is enabled and connected to the actual pin. Only one of the pin functions can be used at time.\n28.1 Alternate Pin F unction Description\nThe tables below show the notation for all pin functions available and describe its function.\n28.1.1 Operation/Power Supply\n28.1.2 Port Interrupt functions\n28.1.3 Analog Functions\n28.1.4 Timer/Counter and AWEX Functions\n28.1.5 Communication FunctionsVCC Digital supply voltage\nAVCC Analog supply voltage\nGND Ground\nSYNC Port pin with full synchronous and limited asynchronous interrupt function\nASYNC Port pin with full synchronous and fu ll asynchronous interrupt function\nACn Analog Comparator input pin n\nACnOUT Analog Comparator n Output\nADCn Analog to Digital Converter input pin n\nAREF Analog reference input pin\nOCnxLS Output Compare Channel x Low Side for Timer/Counter n\nOCnxHS Output Compare Channel x High Side for Timer/Counter n\nSCL Serial Clock for TWI\nSDA Serial Data for TWI\nXCKn Transfer Clock for USART n\nRXDn Receiver Data for USART n \nTXDn Transmitter Data for USART n \nSS Slave Select for SPI\nMOSI Master Out Slave In for SPI\nMISO Master In Slave Out for SPI\nSCK Serial Clock for SPI\n50 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201628.1.6 Oscillators, Clock and Event\n28.1.7 Debug/System FunctionsTOSCn Timer Oscillator pin n\nXTALn Input/Output for Oscillator pin n\nCLKOUT Peripheral Clock Output\nEVOUT Event Channel Output\nRTCOUT RTC Clock Source Output\nRESET Reset pin\nPDI_CLK Program and Debug Interface Clock pin\nPDI_DATA Program and Debug Interface Data pin\n51 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201628.2 Alternate Pin Functions\nThe tables below show the primary/default function for each pin on a port in the first column, the pin number in the \nsecond column, and then all alternate pin functions in the remaining columns. The head row shows what peripheral that \nenable and use the alternate pin functions.\nFor better flexibility, some alternate functions also have selectable pin locations for their functions, this is noted under th e \nfirst table where this apply.\nTable 28-1. Port A - Alternate Functions\nTable 28-2. Port B - Alternate FunctionsPORT A PIN# INTERRUPTADCA\nPOS/GAINPOSADCA\nNEGADCA\nGAINNEG ACAPOS ACANEG ACAOUT REFA\nGND 38\nAVCC 39\nPA0 40 SYNC ADC0 ADC0 AC0 AC0 AREF\nPA1 41 SYNC ADC1 ADC1 AC1 AC1\nPA2 42 SYNC/ASYNC ADC2 ADC2 AC2\nPA3 43 SYNC ADC3 ADC3 AC3 AC3\nPA4 44 SYNC ADC4 ADC4 AC4\nPA5 1 SYNC ADC5 ADC5 AC5 AC5\nPA6 2 SYNC ADC6 ADC6 AC6\nPA7 3 SYNC ADC7 ADC7 AC7 AC0OUT\nPORT B PIN# INTERRUPT ADCAPOS/GAINPOS REFB\nPB0 4 SYNC ADC8 AREF\nPB1 5 SYNC ADC9\nPB2 6 SYNC/ASYNC ADC10\nPB3 7 SYNC ADC11\n52 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 28-3. Port C - Alternate Functions\nNotes: 1. Pin mapping of all TC0 can optionally be moved to high nibble of port\n2. If TC0 is configured as TC2 all eight pins can be used for PWM output.\n3. Pin mapping of all USART0 can optionally be moved to high nibble of port.4. Pins MOSI and SCK for all SPI can optionally be swapped.\n5. CLKOUT can optionally be moved between port C, D and E and between pin 4 and 7.\n6. EVOUT can optionally be moved between port C, D and E and between pin 4 and 7. \nTable 28-4. Port D - Alternate Functions \nTable 28-5. Port E - Alternate FunctionsPORT C PIN# INTERRUPT TCC0(1)(2)AWEXC TCC1 USARTC0(3)SPIC(4)TWIC CLOCKOUT(5)EVENTOUT(6)\nGND 8\nVCC 9\nPC0 10 SYNC OC0A OC0ALS SDA\nPC1 11 SYNC OC0B OC0AHS XCK0 SCL\nPC2 12 SYNC/ASYNC OC0C OC0BLS RXD0\nPC3 13 SYNC OC0D OC0BHS TXD0\nPC4 14 SYNC OC0CLS OC1A SS\nPC5 15 SYNC OC0CHS OC1B MOSI\nPC6 16 SYNC OC0DLS MISO clkRTC\nPC7 17 SYNC OC0DHS SCK clkPER EVOUT\nPORT D PIN # INTERRUPT TCD0 USARTD0 SPID CLOCKOUT EVENTOUT\nGND 18\nVCC 19\nPD0 20 SYNC OC0A\nPD1 21 SYNC OC0B XCK0\nPD2 22 SYNC/ASYNC OC0C RXD0\nPD3 23 SYNC OC0D TXD0\nPD4 24 SYNC SS\nPD5 25 SYNC MOSI\nPD6 26 SYNC MISO\nPD7 27 SYNC SCK clkPER EVOUT\nPORT E PIN # INTERRUPT TCE0 TWIE\nPE0 28 SYNC OC0A SDA\nPE1 29 SYNC OC0B SCL\nGND 30\n53 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 28-6. Port F - Alternate Functions\nNote: 1. TOSC pins can optionally be moved to PE2/PE3VCC 31\nPE2 32 SYNC/ASYNC OC0C\nPE3 33 SYNC OC0D\nPORT R PIN # INTERRUPT PDI XTAL TOSC(1)\nPDI 34 PDI_DATA\nRESET 35 PDI_CLOCK\nPRO 36 SYNC XTAL2 TOSC2\nPR1 37 SYNC XTAL1 TOSC1PORT E PIN # INTERRUPT TCE0 TWIE\n54 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201629. Peripheral Modu le Address Map\nThe address maps show the base address for each peripher al and module in Atmel AVR XMEGA D4. For complete \nregister description and summary for each peripheral module, refer to the XMEGA D manual. \nTable 29-1. Peripheral Module Address Map \nBase address Name Description\n0x0000 GPIO General purpose IO registers\n0x0010 VPORT0 Virtual Port 0\n0x0014 VPORT1 Virtual Port 1\n0x0018 VPORT2 Virtual Port 2\n0x001C VPORT3 Virtual Port 2\n0x0030 CPU CPU\n0x0040 CLK Clock control\n0x0048 SLEEP Sleep controller\n0x0050 OSC Oscillator control\n0x0060 DFLLRC32M DFLL for the 32 MHz internal RC oscillator\n0x0068 DFLLRC2M DFLL for the 2 MHz RC oscillator\n0x0070 PR Power reduction\n0x0078 RST Reset controller\n0x0080 WDT Watch-dog timer\n0x0090 MCU MCU control\n0x00A0 PMIC Programmable multilevel  interrupt controller\n0x00B0 PORTCFG Port configuration\n0x0180 EVSYS Event system\n0x00D0 CRC CRC module\n0x01C0 NVM Nonvolatile memory  (NVM) controller\n0x0200 ADCA Analog to digital converter on port A\n0x0380 ACA Analog comparator pair on port A\n0x0400 RTC Real time counter\n0x0480 TWIC Two wire interface on port C\n0x04A0 TWIE Two wire interface on port E\n0x0600 PORTA Port A\n0x0620 PORTB Port B\n0x0640 PORTC Port C\n0x0660 PORTD Port D\n55 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20160x0680 PORTE Port E\n0x07E0 PORTR Port R\n0x0800 TCC0 Timer/counter 0 on port C\n0x0840 TCC1 Timer/counter 1 on port C\n0x0880 AWEXC Advanced waveform extension on port C\n0x0890 HIRESC High resolution extension on port C\n0x08A0 USARTC0 USART 0 on port C\n0x08C0 SPIC Serial peripheral interface on port C\n0x08F8 IRCOM Infrared communication module\n0x0900 TCD0 Timer/counter 0 on port D\n0x09A0 USARTD0 USART 0 on port D\n0x09C0 SPID Serial peripheral interface on port D\n0x0A00 TCE0 Timer/counter 0 on port EBase address Name Description\n56 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201630. Instruction Set Summary\nMnemonics Operands Description Operation Flags #Clocks\nArithmetic and Logic Instructions\nADD Rd, Rr Add without Carry Rd\uf0ac Rd + Rr Z,C,N,V,S,H 1\nADC Rd, Rr Add with Carry Rd\uf0ac Rd + Rr + C Z,C,N,V,S,H 1\nADIW Rd, K Add Immediate to Word Rd\uf0ac Rd + 1:Rd + K Z,C,N,V,S 2\nSUB Rd, Rr Subtract without Carry Rd\uf0ac Rd - Rr Z,C,N,V,S,H 1\nSUBI Rd, K Subtract Immediate Rd\uf0ac Rd - K Z,C,N,V,S,H 1\nSBC Rd, Rr Subtract with Carry Rd\uf0ac Rd - Rr - C Z,C,N,V,S,H 1\nSBCI Rd, K Subtract Immedi ate with Carry Rd\uf0ac Rd - K - C Z,C,N,V,S,H 1\nSBIW Rd, K Subtract Immediate from Word Rd + 1:Rd \uf0ac Rd + 1:Rd - K Z,C,N,V,S 2\nAND Rd, Rr Logical AND Rd\uf0ac Rd \uf0b7 Rr Z,N,V,S 1\nANDI Rd, K Logical AND with Immediate Rd\uf0ac Rd \uf0b7 K Z,N,V,S 1\nOR Rd, Rr Logical OR Rd\uf0ac Rd v Rr Z,N,V,S 1\nORI Rd, K Logical OR with Immediate Rd\uf0ac Rd v K Z,N,V,S 1\nEOR Rd, Rr Exclusive OR Rd\uf0ac Rd \uf0c5 Rr Z,N,V,S 1\nCOM Rd One’s Complement Rd\uf0ac $FF - Rd Z,C,N,V,S 1\nNEG Rd Two’s Complement Rd\uf0ac $00 - Rd Z,C,N,V,S,H 1\nSBR Rd,K Set Bit(s) in Register Rd\uf0ac Rd v K Z,N,V,S 1\nCBR Rd,K Clear Bit(s) in Register Rd\uf0ac Rd \uf0b7 ($FFh - K) Z,N,V,S 1\nINC Rd Increment Rd\uf0ac Rd + 1 Z,N,V,S 1\nDEC Rd Decrement Rd\uf0ac Rd - 1 Z,N,V,S 1\nTST Rd Test for Zero or Minus Rd\uf0ac Rd \uf0b7 Rd Z,N,V,S 1\nCLR Rd Clear Register Rd\uf0ac Rd \uf0c5 Rd Z,N,V,S 1\nSER Rd Set Register Rd\uf0ac $FF None 1\nMUL Rd,Rr Multiply Unsigned R1:R0 \uf0ac Rd x Rr (UU) Z,C 2\nMULS Rd,Rr Multiply Signed R1:R0 \uf0ac Rd x Rr (SS) Z,C 2\nMULSU Rd,Rr Multiply Signed with Unsigned R1:R0 \uf0ac Rd x Rr (SU) Z,C 2\nFMUL Rd,Rr Fractional Multiply Unsigned R1:R0 \uf0ac Rd x Rr<<1 (UU) Z,C 2\nFMULS Rd,Rr Fractional Multiply Signed R1:R0 \uf0ac Rd x Rr<<1 (SS) Z,C 2\nFMULSU Rd,Rr Fractional Multiply Signed with Unsigned R1:R0 \uf0ac Rd x Rr<<1 (SU) Z,C 2\nBranch instructions\nRJMP k Relative Jump PC\uf0ac PC + k + 1 None 2\nIJMP Indirect Jump to (Z) PC(15:0)\nPC(21:16)\uf0ac\uf0ac Z,0 None 2\nEIJMP Extended Indirect Jump to (Z) PC(15:0)\nPC(21:16)\uf0ac\uf0ac Z,EIND None 2\nJMP k Jump PC\uf0ac k None 3\nRCALL k Relative Call Subroutine PC\uf0ac PC + k + 1 None 2 / 3(1)\n57 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016ICALL Indirect Call to (Z) PC(15:0)\nPC(21:16)\uf0ac\uf0ac Z,0 None 2 / 3(1)\nEICALL Extended Indirect Call to (Z) PC(15:0)\nPC(21:16)\uf0ac\uf0ac Z,EIND None 3(1)\nCALL k call Subroutine PC\uf0ac k None 3 / 4(1)\nRET Subroutine Return PC\uf0ac STACK None 4 / 5(1)\nRETI Interrupt Return PC\uf0ac STACK I 4 / 5(1)\nCPSE Rd,Rr Compare, Skip if Equal if (Rd = Rr) PC \uf0ac PC + 2 or 3 None 1 / 2 / 3\nCP Rd,Rr Compare Rd - Rr Z,C,N,V,S,H 1 \nCPC Rd,Rr Compare with Carry Rd - Rr - C Z,C,N,V,S,H 1\nCPI Rd,K Compare with Immediate Rd - K Z,C,N,V,S,H 1\nSBRC Rr, b Skip if Bit in Register Cleared if (Rr(b) = 0) PC \uf0ac PC + 2 or 3 None 1 / 2 / 3\nSBRS Rr, b Skip if Bit in Register Set if (Rr(b) = 1) PC \uf0ac PC + 2 or 3 None 1 / 2 / 3\nSBIC A, b Skip if Bit in I/O Register Cleared if (I/O(A,b) = 0) PC \uf0ac PC + 2 or 3 None 2 / 3 / 4\nSBIS A, b Skip if Bit in I/O Register Set If (I/O(A,b) =1) PC \uf0ac PC + 2 or 3 None 2 / 3 / 4\nBRBS s, k Branch if Status Flag Set if (SREG(s) = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRBC s, k Branch if Status Flag Cleared if (SREG(s) = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBREQ  k Branch if Equal if (Z = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRNE  k Branch if Not Equal if (Z = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBRCS  k Branch if Carry Set if (C = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRCC  k Branch if Carry Cleared if (C = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBRSH  k Branch if Same or Higher if (C = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBRLO  k Branch if Lower if (C = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRMI  k Branch if Minus if (N = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRPL  k Branch if Plus if (N = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBRGE  k Branch if Greater or Equal, Signed if (N \uf0c5 V= 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBRLT  k Branch if Less Than, Signed if (N \uf0c5 V= 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRHS  k Branch if Half Carry Flag Set if (H = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRHC  k Branch if Half Carry Flag Cleared if (H = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBRTS  k Branch if T Flag Set if (T = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRTC  k Branch if T Flag Cleared if (T = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBRVS  k Branch if Overflow Flag is Set if (V = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRVC  k Branch if Overflow Flag is Cleared if (V = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nBRIE  k Branch if Interrupt Enabled if (I = 1) then PC \uf0ac PC + k + 1 None 1 / 2\nBRID  k Branch if Interrupt Disabled if (I = 0) then PC \uf0ac PC + k + 1 None 1 / 2\nData transfer instructions\nMOV Rd, Rr Copy Register Rd\uf0ac Rr None 1\nMOVW Rd, Rr Copy Register Pair Rd+1:Rd \uf0ac Rr+1:Rr None 1\nLDI Rd, K Load Immediate Rd\uf0ac K None 1Mnemonics Operands Description Operation Flags #Clocks\n58 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016LDS Rd, k Load Direct from data space Rd\uf0ac (k) None 2(1)(2)\nLD Rd, X Load Indirect Rd\uf0ac (X) None 1(1)(2)\nLD Rd, X+ Load Indirect and Post-Increment Rd\nX\uf0ac\uf0ac (X)X + 1 None 1(1)(2)\nLD Rd, -X Load Indirect and Pre-Decrement X \uf0ac X - 1,\nRd \uf0ac (X)\uf0ac\n\uf0acX - 1(X) None 2(1)(2)\nLD Rd, Y Load Indirect Rd \uf0ac (Y)\uf0ac (Y) None 1(1)(2)\nLD Rd, Y+ Load Indirect and Post-Increment Rd\nY\uf0ac\uf0ac (Y)Y + 1 None 1(1)(2)\nLD Rd, -Y Load Indirect and Pre-Decrement Y\nRd\uf0ac\uf0ac Y - 1(Y) None 2(1)(2)\nLDD Rd, Y+q Load Indirect with Displacement Rd\uf0ac (Y + q) None 2(1)(2)\nLD Rd, Z Load Indirect Rd\uf0ac (Z) None 1(1)(2)\nLD Rd, Z+ Load Indirect and Post-Increment Rd\nZ\uf0ac\uf0ac (Z),Z+1 None 1(1)(2)\nLD Rd, -Z Load Indirect and Pre-Decrement Z\nRd\uf0ac\uf0ac Z - 1,(Z) None 2(1)(2)\nLDD Rd, Z+q Load Indirect with Displacement Rd\uf0ac (Z + q) None 2(1)(2)\nSTS k, Rr Store Direct to Data Space (k)\uf0ac Rd None 2(1)\nST X, Rr Store Indirect (X)\uf0ac Rr None 1(1)\nST X+, Rr Store Indirect an d Post-Increment (X)\nX\uf0ac\uf0ac Rr,X + 1 None 1(1)\nST -X, Rr Store Indirect and Pre-Decrement X\n(X)\uf0ac\uf0ac X - 1,Rr None 2(1)\nST Y,  R r Store Indirect (Y)\uf0ac Rr None 1(1)\nST Y+, Rr Store Indirect an d Post-Increment (Y)\nY\uf0ac\uf0ac Rr,Y + 1 None 1(1)\nST -Y, Rr Store Indirect and Pre-Decrement Y\n(Y)\uf0ac\uf0ac Y - 1,Rr None 2(1)\nSTD Y+q, Rr Store Indirect with Displacement (Y + q) \uf0ac Rr None 2(1)\nST Z, Rr Store Indirect (Z)\uf0ac Rr None 1(1)\nST Z+, Rr Store Indirect an d Post-Increment (Z)\nZ\uf0ac\uf0ac RrZ + 1 None 1(1)\nST -Z, Rr Store Indirect and Pre-Decrement Z\uf0ac Z - 1 None 2(1)\nSTD Z+q,Rr Store Indirect with Displacement (Z + q) \uf0ac Rr None 2(1)\nLPM Load Program Memory R0\uf0ac (Z) None 3\nLPM Rd, Z Load Program Memory Rd\uf0ac (Z) None 3\nLPM Rd, Z+ Load Program Memory and Post-Increment Rd\nZ\uf0ac\uf0ac (Z),Z + 1 None 3\nELPM Extended Load Program Memory R0\uf0ac (RAMPZ:Z) None 3\nELPM Rd, Z Extended Load Program Memory Rd\uf0ac (RAMPZ:Z) None 3\nELPM Rd, Z+ Extended Load Program Memory and Post-Increment Rd\nZ\uf0ac\uf0ac (RAMPZ:Z),Z + 1 None 3\nSPM Store Program Memory (RAMPZ:Z) \uf0ac R1:R0 None -Mnemonics Operands Description Operation Flags #Clocks\n59 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016SPM Z+ Store Program Memory and Post-Increment \nby 2(RAMPZ:Z)\nZ\uf0ac\uf0ac R1:R0,Z + 2 None -\nIN Rd, A In From I/O Location Rd\uf0ac I/O(A) None 1\nOUT A, Rr Out To I/O Location I/O(A) \uf0ac Rr None 1\nPUSH Rr Push Register on Stack STACK \uf0ac Rr None 1(1)\nPOP Rd Pop Register from Stack Rd\uf0ac STACK None 2(1)\nXCH Z, Rd Exchange RAM location Temp\nRd(Z)\uf0ac\uf0ac\uf0acRd,(Z),TempNone 2\nLAS Z, Rd Load and Set RAM location Temp\nRd(Z)\uf0ac\uf0ac\uf0acRd,(Z),Temp v (Z)None 2\nLAC Z, Rd Load and Clear RAM location Temp\nRd(Z)\uf0ac\uf0ac\uf0acRd,(Z),($FFh – Rd) \n\uf06c (Z)None 2\nLAT Z, Rd Load and Toggle RAM location Temp\nRd(Z)\uf0ac\uf0ac\uf0acRd,(Z),Temp \uf0c5 (Z)None 2\nBit and bit-test instructions\nLSL Rd Logical Shift Left Rd(n+1)\nRd(0)\nC\uf0ac\uf0ac\uf0acRd(n),0,Rd(7)Z,C,N,V,H 1\nLSR Rd Logical Shift Right Rd(n)Rd(7)\nC\uf0ac\uf0ac\uf0acRd(n+1),0,Rd(0)Z,C,N,V 1\nROL Rd Rotate Left Through Carry Rd(0)\nRd(n+1)\nC\uf0ac\uf0ac\uf0acC,Rd(n),Rd(7)Z,C,N,V,H 1\nROR Rd Rotate Right Through Carry Rd(7)Rd(n)\nC\uf0ac\uf0ac\uf0acC,Rd(n+1),Rd(0)Z,C,N,V 1\nASR Rd Arithmetic Shift Right Rd(n) \uf0ac Rd(n+1), n=0..6 Z,C,N,V 1\nSWAP Rd Swap Nibbles Rd(3..0) \uf0ab Rd(7..4) None 1\nBSET s Flag Set SREG(s) \uf0ac 1 SREG(s) 1\nBCLR s Flag Clear SREG(s) \uf0ac 0 SREG(s) 1\nSBI A, b Set Bit in I/O Register I/O(A, b) \uf0ac 1 None 1\nCBI A, b Clear Bit in I/O Register I/O(A, b) \uf0ac 0 None 1\nBST Rr, b Bit Store from Register to T T\uf0ac Rr(b) T 1\nBLD Rd, b Bit load from T to Register Rd(b) \uf0ac T None 1\nSEC Set Carry C\uf0ac 1 C 1\nCLC Clear Carry C\uf0ac 0 C 1\nSEN Set Negative Flag N\uf0ac 1 N 1\nCLN Clear Negative Flag N\uf0ac 0 N 1\nSEZ Set Zero Flag Z\uf0ac 1 Z 1\nCLZ Clear Zero Flag Z\uf0ac 0 Z 1\nSEI Global Interrupt Enable I\uf0ac 1 I 1\nCLI Global Interrupt Disable I\uf0ac 0 I 1Mnemonics Operands Description Operation Flags #Clocks\n60 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Notes: 1. Cycle times for data memo ry accesses assume  internal memory accesses, and are not valid for accesses via the external R AM interface.\n2. One extra cycle must be added when accessing internal SRAM.SES Set Signed Test Flag S\uf0ac 1 S 1\nCLS Clear Signed Test Flag S\uf0ac 0 S 1\nSEV Set Two’s Complement Overflow V\uf0ac 1 V 1\nCLV Clear Two’s Complement Overflow V\uf0ac 0 V 1\nSET Set T in SREG T\uf0ac 1 T 1\nCLT Clear T in SREG T\uf0ac 0 T 1\nSEH Set Half Carry Flag in SREG H\uf0ac 1 H 1\nCLH Clear Half Carry Flag in SREG H\uf0ac 0 H 1\nMCU control instructions\nBREAK Break (See specific descr. for BREAK) None 1\nNOP No Operation None 1\nSLEEP Sleep (see specific descr. for Sleep) None 1\nWDR Watchdog Reset (see specific descr. for WDR) None 1Mnemonics Operands Description Operation Flags #Clocks\n61 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201631. Packaging information\n31.1 44A\n44A, 44-lead, 10 x 10mm body size, 1.0mm body thickness,\n0.8 mm lead pitch, thin profile plastic quad flat package (TQFP) C 44A06/02/2014PIN 1 IDENTIFIER\n0°~7°PIN 1 \nLC\nA1 A2 AD1\nDe\nE1 EB\nCOMMON DIMENSIONS\n(Unit of Measure = mm)\nSYMBOL MIN NOM MAX NOTE\nNotes:\n 1. This package conforms to JEDEC reference MS-026, Variation ACB. \n 2. Dimensions D1 and E1 do not include mold protrusion.  Allowable \n  protrusion is 0.25mm per side. Dimensions D1 and E1 are maximum   plastic body size dimensions including mold mismatch. 3. Lead coplanarity is 0.10mm maximum.   A – – 1.20\n A1 0.05 – 0.15\n A2  0.95 1.00 1.05           \n D 11.75 12.00 12.25\n D1 9.90 10.00 10.10 Note 2\n E 11.75 12.00 12.25\n E1 9.90 10.00 10.10 Note 2 B            0.30 0.37 0.45 C 0.09 (0.17) 0.20 L 0.45 0.60  0.75 e  0.80 TYP\n62 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201631.2 44M1\nTITLE DRAWING NO. GPC REV.\n   Package Drawing Contact:\n packagedrawings@atmel.com 44M1 ZWS H44M1, 44-pad, 7 x 7 x 1.0mm body,  lead \npitch 0.50mm, 5.20mm exposed pad, thermally enhanced plastic very thin quad flat no lead package (VQFN)  02/13/2014COMMON DIMENSIONS\n(Unit of Measure = mm)\nSYMBOL MIN NOM MAX NOTE\n A 0.80  0.90  1.00\n A1 – 0.02  0.05\n A3  0.20 REF\n b 0.18 0.23 0.30\n D  \n D2 5.00 5.20 5.40\n6.90 7.00 7.106.90 7.00 7.10\n E\n E2  5.00 5.20 5.40\n e  0.50 BSC\n L 0.59  0.64  0.69\nK 0.20 0.26 0.41Note:  JEDEC Standard MO-220, Fig . 1 (S AW Singulation) VKKD-3 . TOP VIE W\nSIDE VIEW\nB OT TOM VIE WD\nEMarked Pin# 1 I D\nE2D2\nb ePin #1 Co rnerLA1\nA3\nASE ATING PLAN E\nPin #1 \nTriangle\nPin #1 \nCham fer\n(C 0.30)Option A\nOption B\nPin #1 \nNotch\n(0.20 R)Option CK\nK1\n2\n3\n63 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201631.3 49C2\nTITLE DRAWING NO. GPC REV.\n   Package Drawing Contact:\n packagedrawings@atmel.com 49C2 CBD A49C2, 49-ball (7 x 7 array), 0.65mm pitch, \n5.0 x 5.0 x 1.0mm, very thin, fine-pitch ball grid array package (VFBGA) 3/14/08COMMON DIMENSIONS\n(Unit of Measure = mm)\nSYMBOL MIN NOM MAX NOTE\n    A – – 1.00\nA1 0.20 – –A2 0.65 – –D 4.90 5.00 5.10 D1  3.90 BSCE 4.90 5.00 5.10  E1  3.90 BSCb  0.30 0.35 0.40e   0.65 BSCTOP VIEW\nSIDE VIEWA1 BALL ID\nG\nF\nE\nD\nC\nB\nA\n12 3 4 5 6  7AA1\nA2DE\n0.10\nE1\nD1\n49 - Ø0.35 ±0.05e\nA1 BALL CORNER\nBOTTOM VIEWb e\n64 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632. Electrical Characteristics\nAll typical values are measured at T = 25 \uf0b0C unless other temperature condition is given. All minimum and maximum \nvalues are valid across operating temperatur e and voltage unless other conditions are given.\n32.1 ATxmega16D4\n32.1.1 Absolute Maximum Ratings\nStresses beyond those listed in Table 32-1  under may cause permanent damage to the device. This is a stress rating \nonly and functional operation of the device at these or other conditions beyond those indicated in the operational sections of this specification is not implied. Exposure to absol ute maximum rating conditions for extended periods may affect \ndevice reliability.\nTable 32-1. Absolute Maximum Ratings\n32.1.2 General Operating Ratings\nThe device must operate within the ratings listed in Table 32-2  in order for all other electr ical characteristics and typical \ncharacteristics of the device to be valid.\nTable 32-2. General Operating Conditions\nTable 32-3. Operating Voltage and FrequencySymbol Parameter Condition Min. Typ. Max. Units\nVCC Power supply voltage -0.3 4 V\nIVCC Current into a VCC pin 200\nmA\nIGND Current out of a Gnd pin 200\nVPIN Pin voltage with respect to Gnd and VCC -0.5 VCC+0.5 V\nIPIN I/O pin sink/source current -25 25 mA\nTA Storage temperature -65 150\n°C\nTj Junction temperature 150\nSymbol Parameter Condition Min. Typ. Max. Units\nVCC Power supply voltage 1.60 3.6\nV\nAVCC Analog supply voltage 1.60 3.6\nTA Temperature range -40 85\n°C\nTj Junction temperature -40 105\nSymbol Parameter Condition Min. Typ. Max. Units\nClkCPU CPU clock frequencyVCC = 1.6V 0 12\nMHzVCC = 1.8V 0 12\nVCC = 2.7V 0 32\nVCC = 3.6V 0 32\n65 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016The maximum CPU clock frequency depends on VCC. As shown in Figure 32-15  the Frequency vs. VCC curve is linear \nbetween 1.8V < VCC<2 . 7 V .\nFigure 32-1. Maximum Frequency vs. VCC\n1.81232MHz\nV 2.7 3.6 1.6Safe Operating Area\n66 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.3 Current Consumption \nTable 32-4. Current Consumption for Active Mode and Sleep Modes\nNotes: 1. All Power Reduction Registers set.\n2. Maximum limits are based on characterization, and not tested in production.Symbol Parameter Condition Min. Typ. Max. Units\nICCActive power\nconsumption(1)32kHz, Ext. ClkVCC = 1.8V 40\nµAVCC = 3.0V 80\n1MHz, Ext. ClkVCC = 1.8V 200\nVCC = 3.0V 410\n2MHz, Ext. ClkVCC = 1.8V 350 600\nVCC = 3.0V0.75 1.4\nmA\n32MHz, Ext. Clk 7.5 12\nIdle power\nconsumption(1)32kHz, Ext. ClkVCC = 1.8V 2.0\nµAVCC = 3.0V 2.8\n1MHz, Ext. ClkVCC = 1.8V 42\nVCC = 3.0V 85\n2MHz, Ext. ClkVCC = 1.8V 85 225\nVCC = 3.0V170 350\n32MHz, Ext. Clk 2.7 5.5 mA\nPower-down power\nconsumptionT=2 5 ° C\nVCC = 3.0V0.1 1.0\nµAT=8 5 ° C 2.0 4.5\nT = 105°C 0.1 7.0\nWDT and sampled BOD enabled,T=2 5 ° C\nVCC = 3.0V1.4 3.0\nWDT and sampled BOD enabled,T = 85°C3.0 6.0\nWDT and sampled BOD enabled,T = 105°C1.4 10\nPower-save powerconsumption\n(2)RTC from ULP clock, WDT and\nsampled BOD enabled, T = 25°CVCC = 1.8V 1.5\nVCC = 3.0V 1.5\nRTC from 1.024kHz low power\n32.768kHz TOSC, T = 25°CVCC = 1.8V 0.6 2.0\nVCC = 3.0V 0.7 2.0\nRTC from low power 32.768kHzTOSC, T = 25°CVCC = 1.8V 0.8 3.0\nVCC = 3.0V 1.0 3.0\nReset power consumptionCurrent through RESET  pin\nsubstractedVCC = 3.0V 300\n67 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-5. Current Consumption for Modules and Peripherals\nNote: 1. All parameters measured as the difference in current consumption between module enabled and disabled. All data at VCC = 3.0V, ClkSYS = 1MHz external clock \nwithout prescaling, T = 25°C unless other conditions are given.Symbol Parameter Condition(1)Min. Typ. Max. Units\nICCULP oscillator 0.8\nµA32.768kHz int. oscillator 29\n2MHz int. oscillator85\nDFLL enabled with 32.768kHz int. osc. as reference 115\n32MHz int. oscillator245\nDFLL enabled with 32.768kHz int. osc. as reference 410\nPLL20x multiplication factor,\n32MHz int. osc. DIV4 as reference290\nWatchdog timer 1.0\nBODContinuous mode 138\nSampled mode, includes ULP oscillator 1.2\nInternal 1.0V reference 175\nTemperature sensor 170\nADC16kspsV\nREF = Ext ref1.2\nmACURRLIMIT = LOW 1.0\nCURRLIMIT = MEDIUM 0.9\nCURRLIMIT = HIGH 0.8\n75kspsV\nREF = Ext refCURRLIMIT = LOW 1.7\n200kspsV\nREF = Ext ref3.1\nUSART Rx and Tx enabled, 9600 BAUD 11 µA\nFlash memory and EEPROM programming 4 mA\n68 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.4 Wake-up Time from Sleep Modes\nTable 32-6. Device Wake-up Time from Sleep  Modes with Various System Clock Sources\nNote: 1. The wake-up time is the time from the wake-up request is given until the peripheral clock is available on pin, see Figure 32-2 . All peripherals and modules start \nexecution from the first clock cycle, ex pect the CPU that is halted for four cloc k cycles before program execution starts.\nFigure 32-2. Wake-up Time DefinitionSymbol Parameter Condition Min. Typ.(1)Max. Units\ntwakeupWake-up time from idle, \nstandby, and extended standby \nmodeExternal 2MHz clock 2.0\nµs32.768kHz internal oscillator 120\n2MHz internal oscillator 2.0\n32MHz internal oscillator 0.2\nWake-up time from power-save and power-down modeExternal 2MHz clock 5.0\n32.768kHz internal oscillator 320\n2MHz internal oscillator 9.0\n32MHz internal oscillator 5.0\nWakeup request\nClock outputWakeup time\n69 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.5 I/O Pin Characteristics\nThe I/O pins complies with the JEDE C LVTTL and LVCMOS specification and the high- and low level input and output \nvoltage limits reflect or exceed this specification. \nTable 32-7. I/O Pin Characteristics \nNotes: 1. The sum of all IOH for PORTA and PORTB must not exceed 100mA.\nThe sum of all IOH for PORTC, PORTD, PORTE must for each port not exceed 200mA.\nThe sum of all IOH for pins PF[0-5] on PORTF must not exceed 200mA.\nThe sum of all IOL for pins PF[6-7] on PORTF, PORTR and PDI must not exceed 100mA.\n2. The sum of all IOL for PORTA and PORTB must not exceed 100mA.\nThe sum of all IOL for PORTC, PORTD, PORTE must for each port not exceed 200mA.\nThe sum of all IOL for pins PF[0-5] on PORTF must not exceed 200mA.\nThe sum of all IOL for pins PF[6-7] on PORTF, PORTR and PDI must not exceed 100mA.Symbol Parameter Condition Min. Typ. Max. Units\nIOH (1)/\nIOL (2) I/O pin source/sink current -20 20 mA\nVIH High level input voltageVCC = 2.4 - 3.6V 0.7*Vcc VCC+0.5\nVVCC = 1.6 - 2.4V 0.8*VCC VCC+0.5\nVIL Low level input voltageVCC = 2.4- 3.6V -0.5 0.3*VCC\nVCC = 1.6 - 2.4V -0.5 0.2*VCC\nVOH High level output voltageVCC = 3.3V IOH = -4mA 2.6 2.9\nVCC = 3.0V IOH = -3mA 2.1 2.7\nVCC = 1.8V IOH = -1mA 1.4 1.6\nVOL Low level output voltageVCC = 3.3V IOL = 8mA 0.4 0.76\nVCC = 3.0V IOL = 5mA 0.3 0.64\nVCC = 1.8V IOL = 3mA 0.2 0.46\nIIN Input leakage current I/O pin T = 25°C <0.01 1 µA\nRP Pull/buss keeper resistor 25 k\uf057\n70 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.6 ADC Characteristics\nTable 32-8. Power Supply, Reference and Input Range\nTable 32-9. Clock and TimingSymbol Parameter Condition Min. Typ. Max. Units\nAVCC Analog supply voltage VCC- 0.3 VCC+ 0.3\nV\nVREF Reference voltage 1 AVCC- 0.6\nRin Input resistance Switched 4.5 k\uf057\nCin Input capacitance Switched 5 pF\nRAREF Reference input resistance (leakage only) >10 M\uf057\nCAREF Reference input capacitance Static load 7 pF\nVinInput range 0 VREF\nV Conversion range Differential mode, Vinp - Vinn -VREF VREF\nConversion range Single ended unsigned mode, Vinp -\uf044V VREF-\uf044V\n∆V Fixed offset voltage 200 LSB\nSymbol Parameter Condition Min. Typ. Max. Units\nClkADC ADC clock frequencyMaximum is 1/4 of peripheral clock \nfrequency100 1800\nkHz\nMeasuring internal signals 125\nfClkADC Sample rate\n16300\nksps\nfADC Sample rateCurrent limitation (CURRLIMIT) off 300\nCURRLIMIT = LOW 250\nCURRLIMIT = MEDIUM 150\nCURRLIMIT = HIGH 50\nSampling timeConfigurable in steps of 1/2 ClkADC cycles\nup to 32 ClkADC cycles0.28 320 µs\nConversion time (latency)(RES+1)/2 + GAINRES (Resolution) = 8 or 12, GAIN=0 to 34.5 10\nClkADC\ncycles Start-up time ADC clock cycles 12 24\nADC settling time After changing reference or input mode 7 7\n71 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-10. Accuracy Characteristics \nNotes: 1. Maximum numbers are based on characterisation and not te sted in production, and valid for 5% to 95% input voltage range .\n2. Unless otherwise noted all linearity, offset and gain error numbe rs are valid under the condition that external VREF is used.Symbol Parameter Condition(2)Min. Typ. Max. Units\nRES Resolution 12-bit resolutionDifferential 8 12 12\nBits Single ended signed 7 11 11\nSingle ended unsigned 8 12 12\nINL(1)Integral non-linearity Differential mode16ksps, VREF = 3V 0.5 1\nlsb16ksps, all VREF 0.8 2\n200ksps, VREF = 3V 0.6 1\n200ksps, all VREF 1 2\nSingle ended\nunsigned mode16ksps, VREF = 3.0V 0.5 1\n16ksps, all VREF 1.3 2\nDNL(1)Differential non-linearity Differential mode16ksps, VREF = 3V 0.3 1\n16ksps, all VREF 0.5 1\n200ksps, VREF = 3V 0.35 1\n200ksps, all VREF 0.5 1\nSingle endedunsigned mode16ksps, VREF = 3.0V 0.6 1\n16ksps, all VREF 0.6 1\nOffset Error Differential mode8 mV\nTemperature drift 0.01 mV/K\nOperating voltage drift 0.25 mV/V\nGain ErrorDifferential modeExternal reference -5\nmVAVCC/1.6 -5\nAVCC/2.0 -6\nBandgap ±10\nTemperature drift 0.02 mV/K\nOperating voltage drift 2 mV/V\nSingle ended\nunsigned modeExternal reference -8\nmVAVCC/1.6 -8\nAVCC/2.0 -8\nBandgap ±10\nTemperature drift 0.03 mV/K\nOperating voltage drift 2 mV/V\n72 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-11. Gain Stage Characteristics\n32.1.7 Analog Comparator Characteristics\nTable 32-12. Analog Comparator Characteristics Rin Input resistance Switched in  normal mode 4.0 k\uf057\nCsample Input capacitance Switched in  normal mode 4.4 pF\nSignal range Gain stage output 0 AVCC- 0.6 V\nPropagation delay ADC conversion rate 1/2 1 3ClkADC\ncycles\nClock frequency Same as ADC 100 1800 kHz\nGain Error0.5x gain, normal mode -1\n%1x gain, normal mode -1\n8x gain, normal mode -1\n64x gain, normal mode 10\nOffset Error,\noutput referred0.5x gain, normal mode 10\nmV1x gain, normal mode 5\n8x gain, normal mode -20\n64x gain, normal mode -150\nSymbol Parameter Condition Min. Typ. Max. Units\nVoff Input offset voltage VCC=1.6V - 3.6V <±10 mV\nIlk Input leakage current VCC=1.6V - 3.6V <1 nA\nInput voltage range -0.1 AVCC V\nAC startup time 100 µs\nVhys1 Hysteresis, none VCC=1.6V - 3.6V 0\nmV Vhys2 Hysteresis, small VCC=1.6V - 3.6V 11\nVhys3 Hysteresis, large VCC=1.6V - 3.6V 26\ntdelay Propagation delayVCC = 3.0V, T= 85°C 16 90\nns\nVCC=1.6V - 3.6V 16\n64-level voltage scaler Integral non-linearity (INL) 0.3 0.5 lsb\n73 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.8 Bandgap and Internal 1.0V Reference Characteristics\nTable 32-13.  Bandgap and Internal  1.0V Reference Characteristics\n32.1.9 Brownout Detection Characteristics\nTable 32-14. Brownout Detection Characteristics(1)\nNote: 1. BOD is calibrated at 85°C within BOD level 0 values, and BOD level 0 is the default level.\n32.1.10 External Reset Characteristics\nTable 32-15. External Reset CharacteristicsSymbol Parameter Condition Min. Typ. Max. Units\nStartup timeAs reference for ADC 1 ClkPER + 2.5µs\nµs\nAs input voltage to ADC and AC 1.5\nBandgap voltage 1.1\nV\nINT1V Internal 1.00V reference T= 85°C, after calibration 0.98 1 1.02\nVariation over voltage and temperature Calibrated at T= 85°C, VCC = 3.0V ±1.0 %\nSymbol Parameter Condition Min. Typ. Max. Units\nVBOTBOD level 0 falling VCC 1.50 1.62 1.75\nVBOD level 1 falling VCC 1.8\nBOD level 2 falling VCC 2.0\nBOD level 3 falling VCC 2.2\nBOD level 4 falling VCC 2.4\nBOD level 5 falling VCC 2.6\nBOD level 6 falling VCC 2.8\nBOD level 7 falling VCC 3.0\ntBOD Detection timeContinuous mode 0.4\nµs\nSampled mode 1000\nVHYST Hysteresis 1.2 %\nSymbol Parameter Condition Min. Typ. Max. Units\ntEXT Minimum reset pulse width 1000 90 ns\nVRSTReset threshold voltage (VIH)VCC = 2.7 - 3.6V 0.6*VCC\nVVCC = 1.6 - 2.7V 0.6*VCC\nReset threshold voltage (VIL)VCC = 2.7 - 3.6V 0.5*VCC\nVCC = 1.6 - 2.7V 0.4*VCC\nRRST Reset pin pull-up resistor 25 k\uf057\n74 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.11 Power-on Reset Characteristics\nTable 32-16. Power-on Reset Characteristics \nNote: 1. VPOT- values are only valid when BOD is disabled. When BOD is enabled VPOT- = VPOT+.\n32.1.12 Flash and EEPROM Memory Characteristics \nTable 32-17. Endurance and Data Retention\nTable 32-18. Programming Time\nNotes: 1. Programming is timed from the 2MHz internal oscillator.Symbol Parameter Condition Min. Typ. Max. Units\nVPOT- (1)POR threshold voltage falling VCCVCC falls faster than 1V/ms 0.4 1.0\nV VCC falls at 1V/ms or slower 0.8 1.0\nVPOT+ POR threshold voltage rising VCC 1.3 1.59\nSymbol Parameter Condition Min. Typ. Max. Units\nFlashWrite/Erase cycles25°C 10K\nCycle 85°C 10K\n105°C 2K\nData retention25°C 100\nYear 85°C 25\n105°C 10\nEEPROMWrite/Erase cycles25°C 100K\nCycle 85°C 100K\n105°C 30K\nData retention25°C 100\nYear 85°C 25\n105°C 10\nSymbol Parameter Condition Min. Typ.(1)Max. Units\nChip erase(2)16KB Flash, EEPROM 45\nmsFlashPage erase 4\nPage write 4\nAtomic page erase and write 8\nEEPROMPage erase 4\nPage write 4\nAtomic page erase and write 8\n75 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20162. EEPROM is not erased if the EESAVE fuse is programmed.\n32.1.13 Clock and Oscillator Characteristics\n32.1.13.1 Calibrated 32.768kHz Internal Oscillator Characteristics\nTable 32-19. 32.768kHz Internal  Oscillator Characteristics \n32.1.13.2 Calibrated 2MHz RC Internal Oscillator Characteristics\nTable 32-20. 2MHz Internal Oscillator Characteristics\n32.1.13.3 Calibrated and Tunable 32MHz Internal Oscillator Characteristics\nTable 32-21. 32MHz Internal Oscillator Characteristics\n32.1.13.4 32kHz Internal ULP Oscillator Characteristics\nTable 32-22. 32kHz Internal ULP Oscillator CharacteristicsSymbol Parameter Condition Min. Typ. Max. Units\nFrequency 32.768 kHz\nFactory calibration accuracy T = 85\uf0b0C, VCC = 3.0V -0.5 0.5\n%\nUser calibration accuracy -0.5 0.5\nSymbol Parameter Condition Min. Typ. Max. Units\nFrequency rangeDFLL can tune to this frequency over \nvoltage and temperature1.8 2.2\nMHz\nFactory calibrated frequency 2.0\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -1.5 1.5\n% User calibration accuracy -0.2 0.2\nDFLL calibration stepsize 0.18\nSymbol Parameter Condition Min. Typ. Max. Units\nFrequency rangeDFLL can tune to this frequency over \nvoltage and temperature30 32 55\nMHz\nFactory calibrated frequency 32\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -1.5 1.5\n% User calibration accuracy -0.2 0.2\nDFLL calibration step size 0.19\nSymbol Parameter Condition Min. Typ. Max. Units\nFactory calibrated frequency 32 kHz\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -12 12\n%\nAccuracy -30 30\n76 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.13.5 Internal Phase Locked Loop (PLL) Ch aracteristics\nTable 32-23. Internal PLL Characteristics.\nNote: 1. The maximum output frequency vs. supply voltage is linear be tween 1.8V and 2.7V, and can never be higher than four times  the maximum CPU frequency.\n32.1.13.6 External Clock Characteristics\nFigure 32-3. External Clock Drive Waveform\nTable 32-24. External Clock(1)\nNotes: 1. System Clock Prescale rs must be set so that maximum CPU clock frequency for device is not exceeded.\n2. The maximum frequency vs. supply voltage  is linear between 1.8V and 2.7V, and the same applies for all other parameters with supply voltage conditions.Symbol Parameter Condition Min. Typ. Max. Units\nfIN Input frequency Output frequency must be within fOUT 0.4 64\nMHz\nfOUT Output frequency (1)VCC= 1.6 - 1.8V 20 48\nVCC= 2.7 - 3.6V 20 128\nStart-up time 25\nµs\nRe-lock time 25\nSymbol Parameter Condition Min. Typ. Max. Units\n1/tCK Clock frequency(2)VCC = 1.6 - 1.8V 0 90\nMHz\nVCC = 2.7 - 3.6V 0 142\ntCK Clock periodVCC = 1.6 - 1.8V 11\nnsVCC = 2.7 - 3.6V 7.0\ntCH/CL Clock high/low timeVCC = 1.6 - 1.8V 4.5\nVCC = 2.7 - 3.6V 2.4\nVIL/IH Low/high level input voltage See Table 32-7 on page 69 V\n\uf044tCKReduction in period time from one\nclock cycle to the next10 %tCH\ntCL\ntCKtCH\nVIL1VIH1tCR tCF\n77 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.13.7  External 16MHz Crystal Os cillator and XOSC Characteristics \nTable 32-25. .External 16MHz Crystal Oscillator and XOSC Characteristics\nSymbol Parameter Condition Min. Typ. Max. Units\nCycle to cycle jitterXOSCPWR=0FRQRANGE=0 0\nnsFRQRANGE=1, 2, or 3 0\nXOSCPWR=1 0\nLong term jitterXOSCPWR=0FRQRANGE=0 0\nFRQRANGE=1, 2, or 3 0\nXOSCPWR=1 0\nFrequency errorXOSCPWR=0FRQRANGE=0 0.03\n%FRQRANGE=1 0.03\nFRQRANGE=2 or 3 0.03\nXOSCPWR=1 0.003\nDuty cycleXOSCPWR=0FRQRANGE=0 50\nFRQRANGE=1 50\nFRQRANGE=2 or 3 50\nXOSCPWR=1 50\nRQ Negative impedanceXOSCPWR=0,\nFRQRANGE=00.4MHz resonator, \nCL=100pF44k\n\uf0571MHz crystal, CL=20pF 67k\n2MHz crystal, CL=20pF 67k\nXOSCPWR=0,\nFRQRANGE=1,\nCL=20pF2MHz crystal 82k\n8MHz crystal 1500\n9MHz crystal 1500\nXOSCPWR=0,\nFRQRANGE=2,\nCL=20pF8MHz crystal 2700\n9MHz crystal 2700\n12MHz crystal 1000\nXOSCPWR=0,\nFRQRANGE=3,\nCL=20pF9MHz crystal 3600\n12MHz crystal 1300\n16MHz crystal 590\nXOSCPWR=1,\nFRQRANGE=0,\nCL=20pF9MHz crystal 390\n12MHz crystal 50\n16MHz crystal 10\n78 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.1.13.8 External 32.768kHz Crystal Oscillator and TOSC Characteristics\nTable 32-26. External 32.768kHz Crystal Oscillator and TOSC Characteristics\nNote: See Figure 32-4  for definition.RQ Negative impedanceXOSCPWR=1,\nFRQRANGE=1,CL=20pF9MHz crystal 1500\n\uf05712MHz crystal 650\n16MHz crystal 270\nXOSCPWR=1,\nFRQRANGE=2,\nCL=20pF12MHz crystal 1000\n16MHz crystal 440\nXOSCPWR=1,FRQRANGE=3,\nCL=20pF12MHz crystal 1300\n16MHz crystal 590\nESR SF = safety factor min(RQ)/SF k\uf057\nStart-up timeXOSCPWR=0,\nFRQRANGE=00.4MHz resonator, CL=100pF1.0\nmsXOSCPWR=0,FRQRANGE=12MHz crystal, CL=20pF 2.6\nXOSCPWR=0,FRQRANGE=28MHz crystal, CL=20pF 0.8\nXOSCPWR=0,FRQRANGE=312MHz crystal, CL=20pF 1.0\nXOSCPWR=1,FRQRANGE=316MHz crystal, CL=20pF 1.4\nCXTAL1Parasitic capacitanceXTAL1 pin5.9\npFCXTAL2Parasitic capacitanceXTAL2 pin8.3\nCLOAD Parasitic capacitance load 3.5Symbol Parameter Condition Min. Typ. Max. Units\nSymbol Parameter Condition Min. Typ. Max. Units\nESR/R1Recommended crystal equivalentseries resistance (ESR)Crystal load capacitance 6.5pF 60\nk\uf057\nCrystal load capacitance 9.0pF 35\nCrystal load capacitance 12pF 28\nCTOSC1 Parasitic capacitance TOSC1 pin 3.5\npF\nCTOSC2 Parasitic capacitance TOSC2 pin 3.5\nRecommended safety factorcapacitance load matched to \ncrystal specification3\n79 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 32-4. TOSC Input Capacitance\nThe parasitic capacitance between the TOSC pins is CL1 + CL2 in series as seen from the crystal when oscillating without \nexternal capacitors.\n32.1.14 SPI Characteristics\nFigure 32-5. SPI Timing Requirements in Master ModeCL1 CL2\n2CSOT 1CSOT Device internal\nExternal\n32.768KHz crystal\nMSB LSB\nBSL BSMtMOS\ntMIS tMIHtSCKW\ntSCK\ntMOH tMOHtSCKF tSCKR\ntSCKW\nMOSI\n(Data Output)MISO\n(Data Input)SCK\n(CPOL = 1)SCK\n(CPOL = 0)SS\n80 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 32-6. SPI Timing Requirements in Slave Mode\nMSB LSB\nBSL BSMtSIS tSIHtSSCKWtSSCKW\ntSSCKtSSH\ntSOSSHtSCKR tSCKF\ntSOStSSS\ntSOSSS\nMISO\n(Data Output)MOSI\n(Data Input)SCK\n(CPOL = 1)SCK\n(CPOL = 0)SS\n81 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-27. SPI Timing Char acteristics and Requirements\n32.1.15 Two-Wire Interf ace Characteristics\nTable 32-28  describes the requirements for devices connected to the Two-Wire Interface Bus. The Atmel AVR XMEGA \nTwo-Wire Interface meets or exceeds these require ments under the noted conditions. Timing symbols refer to Figure 32-\n21.\nFigure 32-7. Two-wire Interface Bus TimingSymbol Parameter Condition Min. Typ. Max. Units\ntSCK SCK period Master(See Table 20-3 in \nXMEGA C Manual)\nnstSCKW SCK high/low width Master 0.5*SCK\ntSCKR SCK rise time Master 2.7\ntSCKF SCK fall time Master 2.7\ntMIS MISO setup to SCK Master 10\ntMIH MISO hold after SCK Master 10\ntMOS MOSI setup SCK Master 0.5*SCK\ntMOH MOSI hold after SCK Master 1\ntSSCK Slave SCK Period Slave 4*t ClkPER\ntSSCKW SCK high/low width Slave 2*t ClkPER\ntSSCKR SCK rise time Slave 1600\ntSSCKF SCK fall time Slave 1600\ntSIS MOSI setup to SCK Slave 3\ntSIH MOSI hold after SCK Slave tC l kPER\ntSSS SS setup to SCK Slave 21\ntSSH SS hold after SCK Slave 20\ntSOS MISO setup SCK Slave 8\ntSOH MISO hold after SCK Slave 13\ntSOSS MISO setup after SS  low Slave 11\ntSOSH MISO hold after SS  high Slave 8\ntHD;STAtof\nSDASCLtLOWtHIGH\ntSU;STA\ntBUFtr\ntHD;DATtSU;DATtSU;STO\n82 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-28.  Two-wire Interface Characteristics\nNotes: 1. Required only for fSCL > 100kHz.\n2. Cb = Capacitance of one bus line in pF.\n3. fPER = Peripheral clock frequency.Symbol Parameter Condition Min. Typ. Max. Units\nVIH Input high voltage 0.7VCC VCC+0.5\nVVIL Input low voltage -0.5 0.3VCC\nVhys Hysteresis of Schmitt trigger inputs 0.05VCC (1)\nVOL Output low voltage 3mA, sink current 0 0.4\ntr Rise time for both SDA and SCL 20+0.1Cb (1)(2)300\nns tof Output fall time from VIHmin to VILmax 10pF < Cb < 400pF (2)20+0.1Cb (1)(2)250\ntSP Spikes suppressed by input filter 0 50\nII Input current for each I/O Pin 0.1VCC < VI < 0.9VCC -10 10 µA\nCI Capacitance for each I/O Pin 10 pF\nfSCL SCL clock frequency fPER (3)>max(10fSCL, 250kHz) 0 400 kHz\nRP Value of pull-up resistorfSCL \uf0a3 100kHz\n\uf057\nfSCL > 100kHz\ntHD;STA Hold time (repeated) START conditionfSCL \uf0a3 100kHz 4.0\nµsfSCL > 100kHz 0.6\ntLOW Low period of SCL clockfSCL \uf0a3 100kHz 4.7\nfSCL > 100kHz 1.3\ntHIGH High period of SCL clockfSCL \uf0a3 100kHz 4.0\nfSCL > 100kHz 0.6\ntSU;STASet-up time for a repeated START \nconditionfSCL \uf0a3 100kHz 4.7\nfSCL > 100kHz 0.6\ntHD;DAT Data hold timefSCL \uf0a3 100kHz 0 3.45\nµs\nfSCL > 100kHz 0 0.9\ntSU;DAT Data setup timefSCL \uf0a3 100kHz 250\nns\nfSCL > 100kHz 100\ntSU;STO Setup time for STOP conditionfSCL \uf0a3 100kHz 4.0\nµs\nfSCL > 100kHz 0.6\ntBUFBus free time between a STOP and \nSTART conditionfSCL \uf0a3 100kHz 4.7\nµs\nfSCL > 100kHz 1.3VCC0.4V –\n3mA--------------------------- -100ns\nCb-------------- -\n300ns\nCb-------------- -\n83 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2 ATxmega32D4\n32.2.1 Absolute Maximum Ratings\nStresses beyond those listed in Table 32-29  under may cause permanent damage to the device. This is a stress rating \nonly and functional operation of the device at these or other conditions beyond those indicated in the operational sections \nof this specification is not implied. Exposure to absol ute maximum rating conditions for extended periods may affect \ndevice reliability.\nTable 32-29. Absolute Maximum Ratings\n32.2.2 General Operating Ratings\nThe device must operate within the ratings listed in Table 32-30  in order for all other electrical characteristics and typical \ncharacteristics of the device to be valid.\nTable 32-30. General Operating Conditions\nTable 32-31. Operating Voltage and Frequency\nThe maximum CPU clock frequency depends on VCC. As shown in Figure 32-8  the Frequency vs. VCC curve is linear \nbetween 1.8V < VCC<2 . 7 V .Symbol Parameter Condition Min. Typ. Max. Units\nVCC Power supply voltage -0.3 4 V\nIVCC Current into a VCC pin 200\nmA\nIGND Current out of a Gnd pin 200\nVPINPin voltage with respect to Gnd \nand VCC-0.5 VCC+0.5 V\nIPIN I/O pin sink/source current -25 25 mA\nTA Storage temperature -65 150\n°C\nTj Junction temperature 150\nSymbol Parameter Condition Min. Typ. Max. Units\nVCC Power supply voltage 1.60 3.6\nV\nAVCC Analog supply voltage 1.60 3.6\nTA Temperature range -40 85\n°C\nTj Junction temperature -40 105\nSymbol Parameter Condition Min. Typ. Max. Units\nClkCPU CPU clock frequencyVCC = 1.6V 0 12\nMHzVCC = 1.8V 0 12\nVCC = 2.7V 0 32\nVCC = 3.6V 0 32\n84 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 32-8. Maximum Frequency vs. VCC\n1.81232MHz\nV 2.7 3.6 1.6Safe Operating Area\n85 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.3 Current Consumption \nTable 32-32. Current Consumption for Active Mode and Sleep Modes\nNotes: 1. All Power Reduction Registers set.\n2. Maximum limits are based on characterization, and not tested in production.Symbol Parameter Condition Min. Typ. Max. Units\nICCActive power\nconsumption(1)32kHz, Ext. ClkVCC = 1.8V 40\nµAVCC = 3.0V 80\n1MHz, Ext. ClkVCC = 1.8V 200\nVCC = 3.0V 410\n2MHz, Ext. ClkVCC = 1.8V 350 600\nVCC = 3.0V0.75 1.4\nmA\n32MHz, Ext. Clk 7.5 12\nIdle power\nconsumption(1)32kHz, Ext. ClkVCC = 1.8V 2.0\nµAVCC = 3.0V 2.8\n1MHz, Ext. ClkVCC = 1.8V 42\nVCC = 3.0V 85\n2MHz, Ext. ClkVCC = 1.8V 85 225\nVCC = 3.0V170 350\n32MHz, Ext. Clk 2.7 5.5 mA\nPower-down power\nconsumptionT=2 5 ° C\nVCC = 3.0V0.1 1.0\nµAT=8 5 ° C 2.0 4.5\nT = 105°C 0.1 7.0\nWDT and sampled BOD enabled,T=2 5 ° C\nVCC = 3.0V1.4 3.0\nWDT and sampled BOD enabled,T = 85°C3.0 6.0\nWDT and sampled BOD enabled,T = 105°C1.4 10\nPower-save powerconsumption\n(2)RTC from ULP clock, WDT and\nsampled BOD enabled, T = 25°CVCC = 1.8V 1.5\nVCC = 3.0V 1.5\nRTC from 1.024kHz low power\n32.768kHz TOSC, T = 25°CVCC = 1.8V 0.6 2.0\nVCC = 3.0V 0.7 2.0\nRTC from low power 32.768kHzTOSC, T = 25°CVCC = 1.8V 0.8 3.0\nVCC = 3.0V 1.0 3.0\nReset power consumptionCurrent through RESET  pin\nsubstractedVCC = 3.0V 300\n86 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-33. Current Consumptio n for Modules and Peripherals\nNote: 1. All parameters measured as the difference in current consumption between module enabled and disabled. All data at VCC = 3.0V, ClkSYS = 1MHz external clock \nwithout prescaling, T = 25°C unless other conditions are given.Symbol Parameter Condition(1)Min. Typ. Max. Units\nICCULP oscillator 0.8\nµA32.768kHz int. oscillator 29\n2MHz int. oscillator85\nDFLL enabled with 32.768kHz int. osc. as reference 115\n32MHz int. oscillator245\nDFLL enabled with 32.768kHz int. osc. as reference 410\nPLL20x multiplication factor,\n32MHz int. osc. DIV4 as reference290\nWatchdog timer 1.0\nBODContinuous mode 138\nSampled mode, includes ULP oscillator 1.2\nInternal 1.0V reference 175\nTemperature sensor 170\nADC16kspsV\nREF = Ext ref1.2\nmACURRLIMIT = LOW 1.0\nCURRLIMIT = MEDIUM 0.9\nCURRLIMIT = HIGH 0.8\n75kspsV\nREF = Ext refCURRLIMIT = LOW 1.7\n200kspsV\nREF = Ext ref3.1\nUSART Rx and Tx enabled, 9600 BAUD 11 µA\nFlash memory and EEPROM programming 4 mA\n87 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.4 Wake-up Time from Sleep Modes\nTable 32-34. Device Wake-up Time from Sleep  Modes with Various System Clock Sources\nNote: 1. The wake-up time is the time from the wake-up request is given until the peripheral clock is available on pin, see Figure 32-9 . All peripherals and modules start \nexecution from the first clock cycle, ex pect the CPU that is halted for four cloc k cycles before program execution starts.\nFigure 32-9. Wake-up Time DefinitionSymbol Parameter Condition Min. Typ. (1)Max. Units\ntwakeupWake-up time from idle,\nstandby, and extended standby\nmodeExternal 2MHz clock 2.0\nµs32.768kHz internal oscillator 120\n2MHz internal oscillator 2.0\n32MHz internal oscillator 0.2\nWake-up time from power-saveand power-down modeExternal 2MHz clock 5.0\n32.768kHz internal oscillator 320\n2MHz internal oscillator 9.0\n32MHz internal oscillator 5.0\nWakeup request\nClock outputWakeup time\n88 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.5 I/O Pin Characteristics\nThe I/O pins complies with the JEDE C LVTTL and LVCMOS specification and the high- and low level input and output \nvoltage limits reflect or exceed this specification. \nTable 32-35. I/O Pi n Characteristics \nNotes: 1. The sum of all IOH for PORTA and PORTB must not exceed 100mA.\nThe sum of all IOH for PORTC, PORTD, PORTE must for each port not exceed 200mA.\nThe sum of all IOH for pins PF[0-5] on PORTF must not exceed 200mA.\nThe sum of all IOL for pins PF[6-7] on PORTF, PORTR and PDI must not exceed 100mA.\n2. The sum of all IOL for PORTA and PORTB must not exceed 100mA.\nThe sum of all IOL for PORTC, PORTD, PORTE must for each port not exceed 200mA.\nThe sum of all IOL for pins PF[0-5] on PORTF must not exceed 200mA.\nThe sum of all IOL for pins PF[6-7] on PORTF, PORTR and PDI must not exceed 100mA.Symbol Parameter Condition Min. Typ. Max. Units\nIOH (1)/\nIOL (2) I/O pin source/sink current -20 20 mA\nVIH High level input voltageVCC = 2.4 - 3.6V 0.7*Vcc VCC+0.5\nVVCC = 1.6 - 2.4V 0.8*VCC VCC+0.5\nVIL Low level input voltageVCC = 2.4- 3.6V -0.5 0.3*VCC\nVCC = 1.6 - 2.4V -0.5 0.2*VCC\nVOH High level output voltageVCC = 3.3V IOH = -4mA 2.6 2.9\nVCC = 3.0V IOH = -3mA 2.1 2.7\nVCC = 1.8V IOH = -1mA 1.4 1.6\nVOL Low level output voltageVCC = 3.3V IOL = 8mA 0.4 0.76\nVCC = 3.0V IOL = 5mA 0.3 0.64\nVCC = 1.8V IOL = 3mA 0.2 0.46\nIIN Input leakage current I/O pin T = 25°C <0.01 1 µA\nRP Pull/buss keeper resistor 25 k\uf057\n89 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.6 ADC Characteristics\nTable 32-36. Power Supply, Reference and Input Range\nTable 32-37. Clock and TimingSymbol Parameter Condition Min. Typ. Max. Units\nAVCC Analog supply voltage VCC- 0.3 VCC+ 0.3\nV\nVREF Reference voltage 1 AVCC- 0.6\nRin Input resistance Switched 4.5 k\uf057\nCin Input capacitance Switched 5 pF\nRAREF Reference input resistance (leakage only) >10 M\uf057\nCAREF Reference input capacitance Static load 7 pF\nVin Input range 0 VREF\nV Conversion range Differential mode, Vinp - Vinn -VREF VREF\nConversion range Single ended unsigned mode, Vinp -\uf044V VREF-\uf044V\n∆V Fixed offset voltage 200 LSB\nSymbol Parameter Condition Min. Typ. Max. Units\nClkADC ADC clock frequencyMaximum is 1/4 of peripheral clock \nfrequency100 1800\nkHz\nMeasuring internal signals 125\nfClkADC Sample rate\n16300\nksps\nfADC Sample rateCurrent limitation (CURRLIMIT) off 300\nCURRLIMIT = LOW 250\nCURRLIMIT = MEDIUM 150\nCURRLIMIT = HIGH 50\nSampling timeConfigurable in steps of 1/2 ClkADC cycles \nup to 32 ClkADC cycles0.28 320 µs\nConversion time (latency)(RES+1)/2 + GAINRES (Resolution) = 8 or 12, GAIN=0 to 34.5 10\nClkADC\ncycles Start-up time ADC clock cycles 12 24\nADC settling time After changing reference or input mode 7 7\n90 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-38. Accuracy Characteristics\nNotes: 1. Maximum numbers are based on characterisation and not te sted in production, and valid for 5% to 95% input voltage range .\n2. Unless otherwise noted all linearity, offset and gain error numbe rs are valid under the condition that external VREF is used.Symbol Parameter Condition(2)Min. Typ. Max. Units\nRES Resolution 12-bit resolutionDifferential 8 12 12\nBits Single ended signed 7 11 11\nSingle ended unsigned 8 12 12\nINL(1)Integral non-linearity Differential mode16ksps, VREF = 3V 0.5 1\nlsb16ksps, all VREF 0.8 2\n200ksps, VREF = 3V 0.6 1\n200ksps, all VREF 1 2\nSingle ended\nunsigned mode16ksps, VREF = 3.0V 0.5 1\n16ksps, all VREF 1.3 2\nDNL(1)Differential non-linearity Differential mode16ksps, VREF = 3V 0.3 1\n16ksps, all VREF 0.5 1\n200ksps, VREF = 3V 0.35 1\n200ksps, all VREF 0.5 1\nSingle endedunsigned mode16ksps, VREF = 3.0V 0.6 1\n16ksps, all VREF 0.6 1\nOffset Error Differential mode8 mV\nTemperature drift 0.01 mV/K\nOperating voltage drift 0.25 mV/V\nGain Error Differential modeExternal reference -5\nmVAVCC/1.6 -5\nAVCC/2.0 -6\nBandgap ±10\nTemperature drift 0.02 mV/K\nOperating voltage drift 2 mV/V\nGain ErrorSingle ended\nunsigned modeExternal reference -8\nmVAVCC/1.6 -8\nAVCC/2.0 -8\nBandgap ±10\nTemperature drift 0.03 mV/K\nOperating voltage drift 2 mV/V\n91 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-39. Gain Stage Characteristics\n32.2.7 Analog Comparator Characteristics\nTable 32-40. Analog Comparator CharacteristicsRin Input resistance Switched in  normal mode 4.0 k\uf057\nCsample Input capacitance Switched in  normal mode 4.4 pF\nSignal range Gain stage output 0 AVCC- 0.6 V\nPropagation delay ADC conversion rate 1/2 1 3ClkADC\ncycles\nClock rate Same as ADC 100 1800 kHz\nGain error0.5x gain, normal mode -1\n%1x gain, normal mode -1\n8x gain, normal mode -1\n64x gain, normal mode 10\nOffset error,\noutput referred0.5x gain, normal mode 10\nmV1x gain, normal mode 5\n8x gain, normal mode -20\n64x gain, normal mode -150\nSymbol Parameter Condition Min. Typ. Max. Units\nVoff Input offset voltage VCC=1.6V - 3.6V <±10 mV\nIlk Input leakage current VCC=1.6V - 3.6V <1 nA\nInput voltage range -0.1 AVCC V\nAC startup time 100 µs\nVhys1 Hysteresis, none VCC=1.6V - 3.6V 0\nmV Vhys2 Hysteresis, small VCC=1.6V - 3.6V 11\nVhys3 Hysteresis, large VCC=1.6V - 3.6V 26\ntdelay Propagation delayVCC = 3.0V, T= 85°C 16 90\nns\nVCC=1.6V - 3.6V 16\n64-level voltage scaler Integral non-linearity (INL) 0.3 0.5 lsb\n92 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.8 Bandgap and Internal 1.0V Reference Characteristics\nTable 32-41.  Bandgap and Internal  1.0V Reference Characteristics\n32.2.9 Brownout Detection Characteristics\nTable 32-42. Brownout Detection Characteristics(1)\nNote: 1. BOD is calibrated at 85°C within BOD level 0 values, and BOD level 0 is the default level.\n32.2.10 External Reset Characteristics\nTable 32-43. External Reset CharacteristicsSymbol Parameter Condition Min. Typ. Max. Units\nStartup timeAs reference for ADC 1 ClkPER + 2.5µs\nµs\nAs input voltage to ADC and AC 1.5\nBandgap voltage 1.1\nV\nINT1V Internal 1.00V reference T= 85°C, after calibration 0.98 1 1.02\nVariation over voltage and temperature Calibrated at T= 85°C, VCC = 3.0V ±1.0 %\nSymbol Parameter Condition Min. Typ. Max. Units\nVBOTBOD level 0 falling VCC 1.50 1.62 1.75\nVBOD level 1 falling VCC 1.8\nBOD level 2 falling VCC 2.0\nBOD level 3 falling VCC 2.2\nBOD level 4 falling VCC 2.4\nBOD level 5 falling VCC 2.6\nBOD level 6 falling VCC 2.8\nBOD level 7 falling VCC 3.0\ntBOD Detection timeContinuous mode 0.4\nµs\nSampled mode 1000\nVHYST Hysteresis 1.2 %\nSymbol Parameter Condition Min. Typ. Max. Units\ntEXT Minimum reset pulse width 1000 90 ns\nVRSTReset threshold voltage (VIH)VCC = 2.7 - 3.6V 0.6*VCC\nVVCC = 1.6 - 2.7V 0.6*VCC\nReset threshold voltage (VIL)VCC = 2.7 - 3.6V 0.5*VCC\nVCC = 1.6 - 2.7V 0.4*VCC\nRRST Reset pin pull-up resistor 25 k\uf057\n93 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.11 Power-on Reset Characteristics\nTable 32-44. Power-on Reset Characteristics\nNote: 1. VPOT- values are only valid when BOD is disabled. When BOD is enabled VPOT- = VPOT+.\n32.2.12 Flash and EEPROM Memory Char acteristics \nTable 32-45. Endurance and Data Retention\nTable 32-46. Programming Time\nNotes: 1. Programming is timed from the 2MHz internal oscillator.\n2. EEPROM is not erased if the EESAVE fuse is programmed.Symbol Parameter Condition Min. Typ. Max. Units\nVPOT- (1)POR threshold voltage falling VCCVCC falls faster than 1V/ms 0.4 1.0\nV VCC falls at 1V/ms or slower 0.8 1.0\nVPOT+ POR threshold voltage rising VCC 1.3 1.59\nSymbol Parameter Condition Min. Typ. Max. Units\nFlashWrite/Erase cycles25°C 10K\nCycle 85°C 10K\n105°C 2K\nData retention25°C 100\nYear 85°C 25\n105°C 10\nEEPROMWrite/Erase cycles25°C 100K\nCycle 85°C 100K\n105°C 30K\nData retention25°C 100\nYear 85°C 25\n105°C 10\nSymbol Parameter Condition Min. Typ.(1)Max. Units\nChip erase(2)32KB Flash, EEPROM 50\nmsFlashPage erase 4\nPage write 4\nAtomic page erase and write 8\nEEPROMPage erase 4\nPage write 4\nAtomic page erase and write 8\n94 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.13 Clock and Osci llator Characteristics\n32.2.13.1 Calibrated 32.768kHz Internal Oscillator Characteristics\nTable 32-47. 32.768kHz Internal  Oscillator Characteristics \n32.2.13.2 Calibrated 2MHz RC Internal Oscillator Characteristics\nTable 32-48. 2MHz Internal Oscillator Characteristics\n32.2.13.3 Calibrated and Tunable 32MHz Internal Oscillator Characteristics\nTable 32-49. 32MHz Internal Oscillator Characteristics\n32.2.13.4 32kHz Internal ULP Oscillator Characteristics\nTable 32-50. 32kHz Internal ULP Oscillator CharacteristicsSymbol Parameter Condition Min. Typ. Max. Units\nFrequency 32.768 kHz\nFactory calibration accuracy T = 85\uf0b0C, VCC = 3.0V -0.5 0.5\n%\nUser calibration accuracy -0.5 0.5\nSymbol Parameter Condition Min. Typ. Max. Units\nFrequency rangeDFLL can tune to this frequency over \nvoltage and temperature1.8 2.2\nMHz\nFactory calibrated frequency 2.0\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -1.5 1.5\n% User calibration accuracy -0.2 0.2\nDFLL calibration stepsize 0.18\nSymbol Parameter Condition Min. Typ. Max. Units\nFrequency rangeDFLL can tune to this frequency over \nvoltage and temperature30 32 55\nMHz\nFactory calibrated frequency 32\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -1.5 1.5\n% User calibration accuracy -0.2 0.2\nDFLL calibration step size 0.19\nSymbol Parameter Condition Min. Typ. Max. Units\nFactory calibrated frequency 32 kHz\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -12 12\n%\nAccuracy -30 30\n95 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.13.5 Internal Phase Locked Loop (PLL) Ch aracteristics\nTable 32-51. Internal PLL Characteristics\nNote: 1. The maximum output frequency vs. supply voltage is linear be tween 1.8V and 2.7V, and can never be higher than four times  the maximum CPU frequency.\n32.2.13.6External Clock Characteristics\nFigure 32-10.External Clock Drive Waveform\nTable 32-52. External Clock(1)\nNotes: 1. System Clock Prescale rs must be set so that maximum CPU clock frequency for device is not exceeded.\n2. The maximum frequency vs. supply voltage  is linear between 1.8V and 2.7V, and the same applies for all other parameters with supply voltage conditions.Symbol Parameter Condition Min. Typ. Max. Units\nfIN Input frequency Output frequency must be within fOUT 0.4 64\nMHz\nfOUT Output frequency(1)VCC= 1.6 - 1.8V 20 48\nVCC= 2.7 - 3.6V 20 128\nStart-up time 25\nµs\nRe-lock time 25\nSymbol Parameter Condition Min. Typ. Max. Units\n1/tCK Clock frequency(2)VCC = 1.6 - 1.8V 0 90\nMHz\nVCC = 2.7 - 3.6V 0 142\ntCK Clock periodVCC = 1.6 - 1.8V 11\nnsVCC = 2.7 - 3.6V 7.0\ntCH/CL Clock high/low timeVCC = 1.6 - 1.8V 4.5\nVCC = 2.7 - 3.6V 2.4\nVIL/IH Low/high level input voltage See Table 32-7 on page 69 V\n\uf044tCKReduction in period time from one\nclock cycle to the next10 %tCH\ntCL\ntCKtCH\nVIL1VIH1tCR tCF\n96 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.13.7 External 16MHz Crystal Osci llator and XOSC Characteristics \nTable 32-53. .External 16MHz Crystal Oscillator and XOSC Characteristics\nSymbol Parameter Condition Min. Typ. Max. Units\nCycle to cycle jitterXOSCPWR=0FRQRANGE=0 0\nnsFRQRANGE=1, 2, or 3 0\nXOSCPWR=1 0\nLong term jitterXOSCPWR=0FRQRANGE=0 0\nFRQRANGE=1, 2, or 3 0\nXOSCPWR=1 0\nFrequency errorXOSCPWR=0FRQRANGE=0 0.03\n%FRQRANGE=1 0.03\nFRQRANGE=2 or 3 0.03\nXOSCPWR=1 0.003\nDuty cycleXOSCPWR=0FRQRANGE=0 50\nFRQRANGE=1 50\nFRQRANGE=2 or 3 50\nXOSCPWR=1 50\nRQ Negative impedanceXOSCPWR=0,\nFRQRANGE=00.4MHz resonator, \nCL=100pF44k\n\uf0571MHz crystal, CL=20pF 67k\n2MHz crystal, CL=20pF 67k\nXOSCPWR=0,\nFRQRANGE=1,\nCL=20pF2MHz crystal 82k\n8MHz crystal 1500\n9MHz crystal 1500\nXOSCPWR=0,\nFRQRANGE=2,\nCL=20pF8MHz crystal 2700\n9MHz crystal 2700\n12MHz crystal 1000\nXOSCPWR=0,\nFRQRANGE=3,\nCL=20pF9MHz crystal 3600\n12MHz crystal 1300\n16MHz crystal 590\n97 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016RQ Negative impedanceXOSCPWR=1,\nFRQRANGE=0,CL=20pF9MHz crystal 390\n\uf05712MHz crystal 50\n16MHz crystal 10\nXOSCPWR=1,FRQRANGE=1,\nCL=20pF9MHz crystal 1500\n12MHz crystal 650\n16MHz crystal 270\nXOSCPWR=1,\nFRQRANGE=2,CL=20pF12MHz crystal 1000\n16MHz crystal 440\nXOSCPWR=1,FRQRANGE=3,\nCL=20pF12MHz crystal 1300\n16MHz crystal 590\nESR SF = safety factor min(RQ)/SF k\uf057\nStart-up timeXOSCPWR=0,\nFRQRANGE=00.4MHz resonator, CL=100pF1.0\nmsXOSCPWR=0,FRQRANGE=12MHz crystal, CL=20pF 2.6\nXOSCPWR=0,FRQRANGE=28MHz crystal, CL=20pF 0.8\nXOSCPWR=0,FRQRANGE=312MHz crystal, CL=20pF 1.0\nXOSCPWR=1,FRQRANGE=316MHz crystal, CL=20pF 1.4\nCXTAL1Parasitic capacitanceXTAL1 pin5.9\npFCXTAL2Parasitic capacitanceXTAL2 pin8.3\nCLOAD Parasitic capacitance load 3.5Symbol Parameter Condition Min. Typ. Max. Units\n98 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.13.8 External 32.768kHz Crystal Oscillator and TOSC Characteristics\nTable 32-54. External 32.768kHz Crystal Oscillator and TOSC Characteristics\nNote: See Figure 32-11  for definition.\nFigure 32-11.TOSC Input Capacitance\nThe parasitic capacitance between the TOSC pins is CL1 + CL2 in series as seen from the crystal when oscillating without \nexternal capacitors.Symbol Parameter Condition Min. Typ. Max. Units\nESR/R1Recommended crystal equivalent\nseries resistance (ESR)Crystal load capacitance 6.5pF 60\nk\uf057\nCrystal load capacitance 9.0pF 35\nCrystal load capacitance 12pF 28\nCTOSC1 Parasitic capacitance TOSC1 pin 3.5\npF\nCTOSC2 Parasitic capacitance TOSC2 pin 3.5\nRecommended safety factorcapacitance load matched to\ncrystal specification3\nCL1 CL2\n2CSOT 1CSOT Device internal\nExternal\n32.768KHz crystal\n99 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.2.14 SPI Characteristics\nFigure 32-12.SPI Timing Requirements in Master Mode\nFigure 32-13.SPI Timing Requirements in Slave ModeMSB LSB\nBSL BSMtMOS\ntMIS tMIHtSCKW\ntSCK\ntMOH tMOHtSCKF tSCKR\ntSCKW\nMOSI\n(Data Output)MISO\n(Data Input)SCK\n(CPOL = 1)SCK\n(CPOL = 0)SS\nMSB LSB\nBSL BSMtSIS tSIHtSSCKWtSSCKW\ntSSCKtSSH\ntSOSSHtSCKR tSCKF\ntSOStSSS\ntSOSSS\nMISO\n(Data Output)MOSI\n(Data Input)SCK\n(CPOL = 1)SCK\n(CPOL = 0)SS\n100 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-55. SPI Timing Char acteristics and Requirements\n32.2.15 Two-Wire Interf ace Characteristics\nTable 32-56  describes the requirements for devices connected to the Two-Wire Interface Bus. The Atmel AVR XMEGA \nTwo-Wire Interface meets or exceeds these require ments under the noted conditions. Timing symbols refer to Figure 32-\n14.\nFigure 32-14.Two-wire Interface Bus TimingSymbol Parameter Condition Min. Typ. Max. Units\ntSCK SCK period Master(See Table 20-3 in \nXMEGA C Manual)\nnstSCKW SCK high/low width Master 0.5*SCK\ntSCKR SCK rise time Master 2.7\ntSCKF SCK fall time Master 2.7\ntMIS MISO setup to SCK Master 10\ntMIH MISO hold after SCK Master 10\ntMOS MOSI setup SCK Master 0.5*SCK\ntMOH MOSI hold after SCK Master 1\ntSSCK Slave SCK Period Slave 4*t ClkPER\ntSSCKW SCK high/low width Slave 2*t ClkPER\ntSSCKR SCK rise time Slave 1600\ntSSCKF SCK fall time Slave 1600\ntSIS MOSI setup to SCK Slave 3\ntSIH MOSI hold after SCK Slave tC l kPER\ntSSS SS setup to SCK Slave 21\ntSSH SS hold after SCK Slave 20\ntSOS MISO setup SCK Slave 8\ntSOH MISO hold after SCK Slave 13\ntSOSS MISO setup after SS  low Slave 11\ntSOSH MISO hold after SS  high Slave 8\ntHD;STAtof\nSDASCLtLOWtHIGH\ntSU;STA\ntBUFtr\ntHD;DATtSU;DATtSU;STO\n101 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-56. Two-wire Interface Characteristics\nNotes: 1. Required only for fSCL > 100kHz.\n2. Cb = Capacitance of one bus line in pF.\n3. fPER = Peripheral clock frequency.Symbol Parameter Condition Min. Typ. Max. Units\nVIH Input high voltage 0.7VCC VCC+0.5\nVVIL Input low voltage -0.5 0.3VCC\nVhys Hysteresis of Schmitt trigger inputs 0.05VCC (1)\nVOL Output low voltage 3mA, sink current 0 0.4\ntr Rise time for both SDA and SCL 20+0.1Cb (1)(2)300\nns tof Output fall time from VIHmin to VILmax 10pF < Cb < 400pF (2)20+0.1Cb (1)(2)250\ntSP Spikes suppressed by input filter 0 50\nII Input current for each I/O Pin 0.1VCC < VI < 0.9VCC -10 10 µA\nCI Capacitance for each I/O Pin 10 pF\nfSCL SCL clock frequency fPER (3)>max(10fSCL, 250kHz) 0 400 kHz\nRP Value of pull-up resistorfSCL \uf0a3 100kHz\n\uf057\nfSCL > 100kHz\ntHD;STA Hold time (repeated) START conditionfSCL \uf0a3 100kHz 4.0\nµsfSCL > 100kHz 0.6\ntLOW Low period of SCL clockfSCL \uf0a3 100kHz 4.7\nfSCL > 100kHz 1.3\ntHIGH High period of SCL clockfSCL \uf0a3 100kHz 4.0\nfSCL > 100kHz 0.6\ntSU;STASet-up time for a repeated START \nconditionfSCL \uf0a3 100kHz 4.7\nfSCL > 100kHz 0.6\ntHD;DAT Data hold timefSCL \uf0a3 100kHz 0 3.45\nµs\nfSCL > 100kHz 0 0.9\ntSU;DATData setup time fSCL \uf0a3 100kHz 250\nns\nfSCL > 100kHz 100\ntSU;STO Setup time for STOP conditionfSCL \uf0a3 100kHz 4.0\nµs\nfSCL > 100kHz 0.6\ntBUFBus free time between a STOP and \nSTART conditionfSCL \uf0a3 100kHz 4.7\nµs\nfSCL > 100kHz 1.3VCC0.4V –\n3mA--------------------------- -100ns\nCb-------------- -\n300ns\nCb-------------- -\n102 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3 ATxmega64D4\n32.3.1 Absolute Maximum Ratings\nStresses beyond those listed in Table 32-57  under may cause permanent damage to the device. This is a stress rating \nonly and functional operation of the device at these or other conditions beyond those indicated in the operational sections \nof this specification is not implied. Exposure to absol ute maximum rating conditions for extended periods may affect \ndevice reliability.\nTable 32-57. Absolute Maximum Ratings\n32.3.2 General Operating Ratings\nThe device must operate within the ratings listed in Table 32-58  in order for all other electrical characteristics and typical \ncharacteristics of the device to be valid.\nTable 32-58. General Operating Conditions\nTable 32-59. Operating Voltage and FrequencySymbol Parameter Condition Min. Typ. Max. Units\nVCC Power supply voltage -0.3 4 V\nIVCC Current into a VCC pin 200\nmA\nIGND Current out of a Gnd pin 200\nVPINPin voltage with respect to Gnd \nand VCC-0.5 VCC+0.5 V\nIPIN I/O pin sink/source current -25 25 mA\nTA Storage temperature -65 150\n°C\nTj Junction temperature 150\nSymbol Parameter Condition Min. Typ. Max. Units\nVCC Power supply voltage 1.60 3.6\nV\nAVCC Analog supply voltage 1.60 3.6\nTA Temperature range -40 85\n°C\nTj Junction temperature -40 105\nSymbol Parameter Condition Min. Typ. Max. Units\nClkCPU CPU clock frequencyVCC = 1.6V 0 12\nMHzVCC = 1.8V 0 12\nVCC = 2.7V 0 32\nVCC = 3.6V 0 32\n103 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016The maximum CPU clock frequency depends on VCC. As shown in Figure 32-15  the Frequency vs. VCC curve is linear \nbetween 1.8V < VCC<2 . 7 V .\nFigure 32-15.Maximu m Frequency vs. VCC\n1.81232MHz\nV 2.7 3.6 1.6Safe Operating Area\n104 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.3 Current Consumption\nTable 32-60. Current Consumption for Active Mode and Sleep Modes  \nNotes: 1. All Power Reduction Registers set.\n2. Maximum limits are based on characterization, and not tested in production.Symbol Parameter Condition Min. Typ. Max. Units\nICCActive power \nconsumption(1)32kHz, Ext. ClkVCC = 1.8V 68\nµAVCC = 3.0V 145\n1MHz, Ext. ClkVCC = 1.8V 260\nVCC = 3.0V 540\n2MHz, Ext. ClkVCC = 1.8V 460 600\nVCC = 3.0V0.96 1.4\nmA\n32MHz, Ext. Clk 9.8 12\nIdle power\nconsumption(1)32kHz, Ext. ClkVCC = 1.8V 2.4\nµAVCC = 3.0V 3.9\n1MHz, Ext. ClkVCC = 1.8V 62\nVCC = 3.0V 118\n2MHz, Ext. ClkVCC = 1.8V 125 225\nVCC = 3.0V240 350\n32MHz, Ext. Clk 3.8 5.5 mA\nPower-down power\nconsumptionT=2 5 ° C\nVCC = 3.0V0.1 1.0\nµAT=8 5 ° C 1.2 4.5\nT = 105°C 0.1 6.0\nWDT and sampled BOD enabled,T=2 5 ° C\nVCC = 3.0V1.3 3.0\nWDT and sampled BOD enabled,T = 85°C2.4 6.0\nWDT and sampled BOD enabled,T = 105°C1.3 8.0\nPower-save powerconsumption\n(2) RTC from ULP clock, WDT and\nsampled BOD enabled, T = 25°CVCC = 1.8V 1.2\nVCC = 3.0V 1.3\nRTC from 1.024kHz low power\n32.768kHz TOSC, T = 25°CVCC = 1.8V 0.6 2\nVCC = 3.0V 0.7 2\nRTC from low power 32.768kHzTOSC, T = 25°CVCC = 1.8V 0.8 3\nVCC = 3.0V 1.0 3\nReset power consumptionCurrent through RESET  pin\nsubstractedVCC = 3.0V 320\n105 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-61. Current Consumptio n for Modules and Peripherals\nNote: 1. All parameters measured as the difference in current consumption between module enabled and disabled. All data at VCC = 3.0V, ClkSYS = 1MHz external clock \nwithout prescaling, T = 25°C unless other conditions are given.Symbol Parameter Condition(1) Min. Typ. Max. Units\nICCULP oscillator 1.0\nµA32.768kHz int. oscillator 27\n2MHz int. oscillator85\nDFLL enabled with 32.768kHz int. osc. as reference 115\n32MHz int. oscillator270\nDFLL enabled with 32.768kHz int. osc. as reference 460\nPLL20x multiplication factor, \n32MHz int. osc. DIV4 as reference220\nWatchdog Timer 1.0\nBODContinuous mode 138\nSampled mode, includes ULP oscillator 1.2\nInternal 1.0V reference 100\nTemperature sensor 95\nADC150kspsV\nREF = Ext ref3.0\nmACURRLIMIT = LOW 2.6\nCURRLIMIT = MEDIUM 2.1\nCURRLIMIT = HIGH 1.6\nAC High Speed Mode 330\nµA Timer/Counter 16\nUSART Rx and Tx enabled, 9600 BAUD 2.5\nFlash memory and EEPROM programming 4 8 mA\n106 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.4 Wake-up Time from Sleep Modes\nTable 32-62. Device Wake-up Time from Sleep  Modes with Various System Clock Sources\nNote: 1. The wake-up time is the time from the wake-up request  is given until the peripheral clock is available on pin, see Figure 32-16 . All peripherals and modules start \nexecution from the first clock cycle, ex pect the CPU that is halted for four cloc k cycles before program execution starts.\nFigure 32-16.Wake-up  Time DefinitionSymbol Parameter Condition Min. Typ.(1) Max. Units\ntwakeupWake-up time from Idle,\nStandby, and Extended Standby\nmodeExternal 2MHz clock 2.0\nµs32.768kHz internal oscillator 120\n2MHz internal oscillator 2.0\n32MHz internal oscillator 0.2\nWake-up time from Power-saveand Power-down modeExternal 2MHz clock 4.5\n32.768kHz internal oscillator 320\n2MHz internal oscillator 9.0\n32MHz internal oscillator 5.0\nWakeup request\nClock outputWakeup time\n107 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.5 I/O Pin Characteristics \nThe I/O pins complies with the JEDE C LVTTL and LVCMOS specification and the high- and low level input and output \nvoltage limits reflect or exceed this specification.\nTable 32-63. I/O Pi n Characteristics \nNotes: 1. The sum of all IOH for PORTA and PORTB must not exceed 100mA.\nThe sum of all IOH for PORTC must not exceed 200mA.\nThe sum of all IOH for PORTD and pins PE[0-1] on PORTE must not exceed 200mA.\nThe sum of all IOH for PE[2-3] on PORTE, PORTR and PDI must not exceed 100mA.\n2. The sum of all IOL for PORTA and PORTB must not exceed 100mA.\nThe sum of all IOL for PORTC must not exceed 200mA.\nThe sum of all IOL for PORTD and pins PE[0-1] on PORTE must not exceed 200mA.\nThe sum of all IOL for PE[2-3] on PORTE, PORTR and PDI must not exceed 100mA.Symbol Parameter Condition Min. Typ. Max. Units\nIOH(1)/\nIOL(2) I/O pin source/sink current -15 15 mA\nVIH High level input voltageVCC = 2.7 - 3.6V 2 VCC+0.3 V\nVCC = 2.0 - 2.7V 0.7*VCC VCC+0.3\nVCC = 1.6 - 2.0V 0.7*VCC VCC+0.3\nVIL Low level input voltageVCC = 2.7- 3.6V -0.3 0.3*VCC\nVCC = 2.0 - 2.7V -0.3 0.3*VCC\nVCC = 1.6 - 2.0V -0.3 0.3*VCC\nVOH High level output voltageVCC = 3.0 - 3.6V IOH = -2mA 2.4 0.94*VCC\nVCC = 3.3V IOH = -4mA 2.6 2.9\nVCC = 3.0V IOH = -3mA 2.1 2.6\nVCC = 1.8V IOH = -1mA 1.4 1.6\nVOL Low level output voltageVCC = 3.0 - 3.6V IOL = 2mA 0.05*VCC 0.4\nVCC = 3.3V IOL = 8mA 0.4 0.76\nVCC = 3.0V IOL = 5mA 0.3 0.64\nVCC = 1.8V IOL = 3mA 0.2 0.46\nIIN Input leakage current T = 25°C <0.001 0.1 µA\nRP Pull/Buss keeper resistor 24 k\uf057\ntr Rise time No load 4 ns\n108 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.6 ADC Characteristics \nTable 32-64. Power Supply, Reference and Input Range \nTable 32-65. Clock and TimingSymbol Parameter Condition Min. Typ. Max. Units\nAVCC Analog supply voltage VCC- 0.3 VCC+ 0.3\nV\nVREF Reference voltage 1.0 AVCC- 0.6\nRin Input resistance Switched 4.0 k\uf057\nCsample Input capacitance Switched 4.4 pF\nRAREF Reference input resistance (leakage only) >10 M\uf057\nCAREF Reference input capacitance Static load 7.0 pF\nVIN Input range -0.1 AVCC+0.1\nV Conversion range Differential mode, Vinp - Vinn -VREF VREF\nVIN Conversion range Single ended unsigned mode, Vinp -\uf044V VREF-\uf044V\n∆V Fixed offset voltage 190 LSB\nSymbol Parameter Condition Min. Typ. Max. Units\nClkADC ADC clock frequencyMaximum is 1/4 of Peripheral clock \nfrequency100 1400\nkHz\nMeasuring internal signals 100 125\nfClkADC Sample rate\n14200\nksps\nfADC Sample rateCurrent limitation (CURRLIMIT) off 200\nCURRLIMIT = LOW 150\nCURRLIMIT = MEDIUM 100\nCURRLIMIT = HIGH 50\nSampling time 1/2 ClkADC cycle 0.25 5 µs\nConversion time (latency)(RES+2)/2+GAIN\nRES = 8 or 12, GAIN = 0, 1, 2 or 35 7 10ClkADC\ncycles\nStart-up time ADC clock cycles 12 24\nClkADC\ncyclesADC settling timeAfter changing reference or input mode 7 7\nAfter ADC flush 1 1\n109 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-66. Accuracy Characteristics\nNotes: 1. Maximum numbers are based on characterisation and not te sted in production, and valid for 5% to 95% input voltage range .\n2. Unless otherwise noted all linearity, offset and gain error numbers are valid under the condition that external VREF is used.Symbol Parameter Condition(2)Min. Typ. Max. Units\nRES Resolution Programmable to 8 or 12 bit 8 12 12 Bits\nINL(1)Integral non-linearity50kspsVCC-1.0V < VREF< VCC-0.6V ±1.2 ±3\nlsbAll VREF ±1.5 ±4\n200kspsVCC-1.0V < VREF< VCC-0.6V ±1.0 ±3\nAll VREF ±1.5 ±4\nDNL(1)Differential non-linearity guaranteed monotonic <±0.8 <±1\nOffset error-1 mV\nTemperature drift <0.01 mV/K\nOperating voltage drift <0.6 mV/V\nGain errorDifferential\nmodeExternal reference -1\nmVAVCC/1.6 10\nAVCC/2.0 8\nBandgap ±5\nTemperature drift <0.02 mV/K\nOperating voltage drift <0.5 mV/V\nNoiseDifferential mode, shorted input\n200ksps, VCC = 3.6V, ClkPER = 16MHz0.4mV \nrms\n110 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-67. Gain Stage Characteristics\nNote: 1. Maximum numbers are based on characterisation and not test ed in production, and valid for 5% to 95% input voltage range.\n32.3.7 Analog Comparator Characteristics\nTable 32-68. Analog Comparator CharacteristicsSymbol Parameter Condition Min. Typ. Max. Units\nRin Input resistance Switched in normal mode 4.0 k\uf057\nCsample Input capacitance Switched in normal mode 4.4 pF\nSignal range Gain stage output 0 VCC- 0.6 V\nPropagation delay ADC conversion rate 1ClkADC\ncycles\nSample rate Same as ADC 14 200 kHz\nINL(1)Integral non-linearity 50kspsAll gain \nsettings±1.5 ±4 lsb\nGain error1x gain, normal mode -0.8\n% 8x gain, normal mode -2.5\n64x gain, normal mode -3.5\nOffset error,output referred1x gain, normal mode -2\nmV 8x gain, normal mode -5\n64x gain, normal mode -4\nNoise1x gain, normal mode\nVCC = 3.6V\nExt. VREF0.5\nmV \nrms8x gain, normal mode 1.5\n64x gain, normal mode 11\nSymbol Parameter Condition Min. Typ. Max. Units\nVoff Input offset voltage <±10 mV\nIlk Input leakage current <1 nA\nInput voltage range -0.1 AVCC V\nAC startup time 100 µs\nVhys1 Hysteresis, none 0\nmV Vhys2 Hysteresis, small 13\nVhys3 Hysteresis, large 30\ntdelay Propagation delayVCC = 3.0V, T= 85°C mode = HS 30 90\nns\n30\n64-Level voltage scaler Integral non-linearity (INL) 0.3 0.5 lsb\n111 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.8 Bandgap and Internal 1.0V Reference Characteristics\nTable 32-69. Bandgap and Internal 1.0V Reference Characteristics \n32.3.9 Brownout Detection Characteristics\nTable 32-70. Brownout Detection CharacteristicsSymbol Parameter Condition Min. Typ. Max. Units\nStartup timeAs reference for ADC 1 ClkPER + 2.5µs\nµs\nAs input voltage to ADC and AC 1.5\nBandgap voltage 1.1\nV\nINT1V Internal 1.00V reference T= 85°C, after calibration 0.99 1.0 1.01\nVariation over voltage and temperature Relative to T= 85°C, VCC = 3.0V ±1.5 %\nSymbol Parameter Condition Min. Typ. Max. Units\nVBOTBOD level 0 falling VCC 1.60 1.62 1.72\nVBOD level 1 falling VCC 1.8\nBOD level 2 falling VCC 2.0\nBOD level 3 falling VCC 2.2\nBOD level 4 falling VCC 2.4\nBOD level 5 falling VCC 2.6\nBOD level 6 falling VCC 2.8\nBOD level 7 falling VCC 3.0\ntBOD Detection timeContinuous mode 0.4\nµs\nSampled mode 1000\nVHYST Hysteresis 1.2 %\n112 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.10 External Reset Characteristics\nTable 32-71. External Reset Characteristics\n32.3.11 Power-on Reset Characteristics\nTable 32-72. Power-on Reset Characteristics \nNote: 1. VPOT- values are only valid when BOD is disabled. When BOD is enabled VPOT- = VPOT+.\n32.3.12 Flash and EEPROM Memory Characteristics\nTable 32-73. Endurance and Data RetentionSymbol Parameter Condition Min. Typ. Max. Units\ntEXT Minimum reset pulse width 1000 95 ns\nVRSTReset threshold voltage (VIH)VCC = 2.7 - 3.6V 0.60*VCC\nVVCC = 1.6 - 2.7V 0.60*VCC 0.50*VCC\nReset threshold voltage (VIL)VCC = 2.7 - 3.6V 0.40*VCC\nVCC = 1.6 - 2.7V 0.50*VCC\nRRST Reset pin pull-up resistor 25 k\uf057\nSymbol Parameter Condition Min. Typ. Max. Units\nVPOT- (1)POR threshold voltage falling VCCVCC falls faster than 1V/ms 0.4 1.0\nV VCC falls at 1V/ms or slower 0.8 1.0\nVPOT+ POR threshold voltage rising VCC 1.3 1.59\nSymbol Parameter Condition Min. Typ. Max. Units\nFlashWrite/Erase cycles25°C 10K\nCycle 85°C 10K\n105°C 2K\nData retention25°C 100\nYear 85°C 25\n105°C 10\nEEPROMWrite/Erase cycles25°C 100K\nCycle 85°C 100K\n105°C 30K\nData retention25°C 100\nYear 85°C 25\n105°C 10\n113 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-74. Programming Time\nNotes: 1. Programming is timed from the 2MHz internal oscillator.\n2. EEPROM is not erased if the EESAVE fuse is programmed.\n32.3.13 Clock and Osci llator Characteristics\n32.3.13.1 Calibrated 32.768kHz Internal Oscillator Characteristics\nTable 32-75. 32.768kHz Internal Oscillator Characteristics\n32.3.13.2 Calibrated 2MHz RC Internal Oscillator Characteristics\nTable 32-76. 2MHz Internal Oscillator CharacteristicsSymbol Parameter Condition Min. Typ.(1)Max. Units\nChip erase 64KB Flash, EEPROM(2) and SRAM erase 55 ms\nFlashPage erase 4\nPage write 4\nAtomic Page Erase and write 8\nEEPROMPage erase 4\nPage write 4\nAtomic Page erase and write 8\nSymbol Parameter Condition Min. Typ. Max. Units\nFrequency 32.768 kHz\nFactory calibration accuracy T = 85\uf0b0C, VCC = 3.0V -0.5 0.5\n%\nUser calibration accuracy -0.5 0.5\nSymbol Parameter Condition Min. Typ. Max. Units\nFrequency rangeDFLL can tune to this frequency over \nvoltage and temperature1.8 2.2\nMHz\nFactory calibrated frequency 2.0\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -1.5 1.5\n% User calibration accuracy -0.2 0.2\nDFLL calibration stepsize 0.21\n114 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.13.3 Calibrated and Tunable 32MHz Internal Oscillator Characteristics\nTable 32-77. 32MHz Internal Oscillator Characteristics\n32.3.13.4 32kHz Internal ULP Oscillator Characteristics\nTable 32-78. 32kHz Internal ULP Oscillator Ch aracteristics\n32.3.13.5 Internal Phase Locked Loop (PLL) Ch aracteristics\nTable 32-79. Internal PLL Characteristics\nNote: 1. The maximum output frequency vs. supply voltage is linear be tween 1.8V and 2.7V, and can never be higher than four times  the maximum CPU frequency.Symbol Parameter Condition Min. Typ. Max. Units\nFrequency rangeDFLL can tune to this frequency over \nvoltage and temperature30 55\nMHz\nFactory calibrated frequency 32\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -1.5 1.5\n% User calibration accuracy -0.2 0.2\nDFLL calibration step size 0.22\nSymbol Parameter Condition Min. Typ. Max. Units\nFactory calibrated frequency 32 kHz\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -12 12\n%\nAccuracy -30 30\nSymbol Parameter Condition Min. Typ. Max. Units\nfIN Input frequency Output frequency must be within fOUT 0.4 64\nMHz\nfOUT Output frequency(1)VCC= 1.6 - 1.8V 20 48\nVCC= 2.7 - 3.6V 20 128\nStart-up time 25\nµs\nRe-lock time 25\n115 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.13.6 External Clock Characteristics\nFigure 32-17.External Clock Drive Waveform \nTable 32-80. External Clock Used as  System Clock without Prescaling\nNote: 1. System Clock Prescalers must be set so that maximum CPU clock frequency for device is not exceeded.tCH\ntCL\ntCKtCH\nVIL1VIH1tCR tCF\nSymbol Parameter Condition Min. Typ. Max. Units\n1/tCK Clock frequency(1)VCC = 1.6 - 1.8V 0 12\nMHz\nVCC = 2.7 - 3.6V 0 32\ntCK Clock periodVCC = 1.6 - 1.8V 83.3\nnsVCC = 2.7 - 3.6V 31.5\ntCH Clock high timeVCC = 1.6 - 1.8V 30.0\nVCC = 2.7 - 3.6V 12.5\ntCL Clock low timeVCC = 1.6 - 1.8V 30.0\nVCC = 2.7 - 3.6V 12.5\ntCR Rise time (for maximum frequency)VCC = 1.6 - 1.8V 10\nVCC = 2.7 - 3.6V 3\ntCF Fall time (for maximum frequency)VCC = 1.6 - 1.8V 10\nVCC = 2.7 - 3.6V 3\n\uf044tCK Change in period from one clock cycle to the next 10 %\n116 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-81. External Clock with Prescaler(1) for System Clock\nNotes: 1. System Clock Prescale rs must be set so that maximum CPU clock frequency for device is not exceeded.\n2. The maximum frequency vs. supply voltage  is linear between 1.8V and 2.7V, and the same applies for all other parameters with supply voltage conditions.\n32.3.13.7 External 16MHz Crystal Osci llator and XOSC Characteristics\nTable 32-82. External 16MHz Crystal Oscillator and XOSC Characteristics  Symbo\nl Parameter Condition Min. Typ. Max. Units\n1/tCK Clock frequency(2)VCC = 1.6 - 1.8V 0 90\nMHz\nVCC = 2.7 - 3.6V 0 142\ntCK Clock periodVCC = 1.6 - 1.8V 11\nnsVCC = 2.7 - 3.6V 7\ntCH Clock high timeVCC = 1.6 - 1.8V 4.5\nVCC = 2.7 - 3.6V 2.4\ntCL Clock low timeVCC = 1.6 - 1.8V 4.5\nVCC = 2.7 - 3.6V 2.4\ntCR Rise time (for maximum frequency) 1.5\ntCF Fall time (for maximum frequency) 1.5\n\uf044tCK Change in period from one clock cycle to the next 10 %\nSymbol Parameter Condition Min. Typ. Max. Units\nCycle to cycle jitterXOSCPWR=0FRQRANGE=0 <10\nnsFRQRANGE=1, 2, or 3 <1\nXOSCPWR=1 <1\nLong term jitterXOSCPWR=0FRQRANGE=0 <6\nFRQRANGE=1, 2, or 3 <0.5\nXOSCPWR=1 <0.5\nFrequency errorXOSCPWR=0FRQRANGE=0 <0.1\n%FRQRANGE=1 <0.05\nFRQRANGE=2 or 3 <0.005\nXOSCPWR=1 <0.005\nDuty cycleXOSCPWR=0FRQRANGE=0 40\nFRQRANGE=1 42\nFRQRANGE=2 or 3 45\nXOSCPWR=1 48\n117 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016RQ Negative impedance(1)XOSCPWR=0,\nFRQRANGE=00.4MHz resonator, \nCL=100pF2.4k\n\uf0571MHz crystal, CL=20pF 8.7k\n2MHz crystal, CL=20pF 2.1k\nXOSCPWR=0,FRQRANGE=1,\nCL=20pF2MHz crystal 4.2k\n8MHz crystal 250\n9MHz crystal 195\nXOSCPWR=0,\nFRQRANGE=2,\nCL=20pF8MHz crystal 360\n9MHz crystal 285\n12MHz crystal 155\nXOSCPWR=0,\nFRQRANGE=3,\nCL=20pF9MHz crystal 365\n12MHz crystal 200\n16MHz crystal 105\nXOSCPWR=1,\nFRQRANGE=0,\nCL=20pF9MHz crystal 435\n12MHz crystal 235\n16MHz crystal 125\nXOSCPWR=1,\nFRQRANGE=1,\nCL=20pF9MHz crystal 495\n12MHz crystal 270\n16MHz crystal 145\nXOSCPWR=1,FRQRANGE=2,\nCL=20pF12MHz crystal 305\n16MHz crystal 160\nXOSCPWR=1,FRQRANGE=3,\nCL=20pF12MHz crystal 380\n16MHz crystal 205\nESR SF = safety factor min(RQ)/SF k\uf057\nStart-up timeXOSCPWR=0,\nFRQRANGE=00.4MHz resonator, CL=100pF1.0\nmsXOSCPWR=0,FRQRANGE=12MHz crystal, CL=20pF 2.6\nXOSCPWR=0,FRQRANGE=28MHz crystal, CL=20pF 0.8\nXOSCPWR=0,FRQRANGE=312MHz crystal, CL=20pF 1.0\nXOSCPWR=1,\nFRQRANGE=316MHz crystal, CL=20pF 1.4Symbol Parameter Condition Min. Typ. Max. Units\n118 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Note: 1. Numbers for negative impedance are not tested in  production but guaranteed from design and characterization.\n32.3.13.8 External 32.768kHz Crystal Oscillator and TOSC Characteristics\nTable 32-83. External 32.768kHz Crystal Oscillator and TOSC Characteristics\nNote: 1. See Figure 32-18 on page 118  for definition.\nFigure 32-18.TOSC Input Capacitance\nThe parasitic capacitance between the TOSC pins is CL1 + CL2 in series as seen from the crystal when oscillating without \nexternal capacitors.CXTAL1Parasitic capacitance\nXTAL1 pin5.9\npFCXTAL2Parasitic capacitanceXTAL2 pin8.3\nCLOAD Parasitic capacitance load 3.5\nSymbol Parameter Condition Min. Typ. Max. Units\nESR/R1Recommended crystal equivalent\nseries resistance (ESR)Crystal load capacitance 6.5pF 60\nk\uf057\nCrystal load capacitance 9.0pF 35\nCTOSC Parasitic capacitanceNormal mode 4.7\npF\nLow power mode 5.2\nRecommended safety factorCapacitance load matched to\ncrystal specification3Symbol Parameter Condition Min. Typ. Max. Units\nCL1 CL2\n2CSOT 1CSOT Device internal\nExternal\n32.768KHz crystal\n119 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.14 SPI Characteristics\nFigure 32-19.SPI Timing Requirements in Master Mode\nFigure 32-20.SPI Timing Requirements in Slave ModeMSB LSB\nBSL BSMtMOS\ntMIS tMIHtSCKW\ntSCK\ntMOH tMOHtSCKF tSCKR\ntSCKW\nMOSI\n(Data Output)MISO\n(Data Input)SCK\n(CPOL = 1)SCK\n(CPOL = 0)SS\nMSB LSB\nBSL BSMtSIS tSIHtSSCKWtSSCKW\ntSSCKtSSH\ntSOSSHtSCKR tSCKF\ntSOStSSS\ntSOSSS\nMISO\n(Data Output)MOSI\n(Data Input)SCK\n(CPOL = 1)SCK\n(CPOL = 0)SS\n120 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-84. SPI Timing Char acteristics and Requirements\nSymbol Parameter Condition Min. Typ. Max. Units\ntSCK SCK period Master(See Table 17-4 in \nXMEGA D Manual)\nnstSCKW SCK high/low width Master 0.5*SCK\ntSCKR SCK rise time Master 2.7\ntSCKF SCK fall time Master 2.7\ntMIS MISO setup to SCK Master 10\ntMIH MISO hold after SCK Master 10\ntMOS MOSI setup SCK Master 0.5*SCK\ntMOH MOSI hold after SCK Master 1\ntSSCK Slave SCK period Slave 4*t ClkPER\ntSSCKW SCK high/low width Slave 2*t ClkPER\ntSSCKR SCK rise time Slave 1600\ntSSCKF SCK fall time Slave 1600\ntSIS MOSI setup to SCK Slave 3\ntSIH MOSI hold after SCK Slave tC l kPER\ntSSS SS setup to SCK Slave 21\ntSSH SS hold after SCK Slave 20\ntSOS MISO setup SCK Slave 8.0\ntSOH MISO hold after SCK Slave 13.0\ntSOSS MISO setup after SS  low Slave 11.0\ntSOSH MISO hold after SS  high Slave 8.0\n121 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.3.15 Two-Wire Interface Characteristics\nTable 32-85  describes the requirements for devices connected to the Two-Wire Interface Bus. The Atmel AVR XMEGA \nTwo-Wire Interface meets or exceeds these require ments under the noted conditions. Timing symbols refer to Figure 32-\n21.\nFigure 32-21.Two-wire Interface Bus Timing\nTable 32-85. Two-wire Interface CharacteristicstHD;STAtof\nSDASCLtLOWtHIGH\ntSU;STA\ntBUFtr\ntHD;DATtSU;DATtSU;STO\nSymbol Parameter Condition Min. Typ. Max. Units\nVIH Input high voltage 0.7*VCC VCC+0.5\nVVIL Input low voltage -0.5 0.3*VCC\nVhys Hysteresis of Schmitt Trigger Inputs 0.05*VCC(1)\nVOL Output low voltage 3mA, sink current 0 0.4\ntr Rise time for both SDA and SCL 20+0.1Cb(1)(2)300\nns tof Output fall time from VIHmin to VILmax 10pF < Cb < 400pF(2)20+0.1Cb(1)(2)250\ntSP Spikes suppressed by input filter 0 50\nII Input current for each I/O pin 0.1VCC < VI < 0.9VCC -10 10 µA\nCI Capacitance for each I/O pin 10 pF\nfSCL SCL clock frequency fPER(3)>max(10fSCL, 250kHz) 0 400 kHz\nRP Value of pull-up resistorfSCL \uf0a3 100kHz\n\uf057\nfSCL > 100kHzVCC0.4V –\n3mA--------------------------- -100ns\nCb-------------- -\n300ns\nCb-------------- -\n122 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Notes: 1. Required only for fSCL > 100kHz.\n2. Cb = Capacitance of one bus line in pF.\n3. fPER = Peripheral clock frequency.tHD;STA Hold time (repeated) START conditionfSCL \uf0a3 100kHz 4.0\nµsfSCL > 100kHz 0.6\ntLOW Low period of SCL clockfSCL \uf0a3 100kHz 4.7\nfSCL > 100kHz 1.3\ntHIGH High period of SCL clockfSCL \uf0a3 100kHz 4.0\nfSCL > 100kHz 0.6\ntSU;STASet-up time for a repeated START \nconditionfSCL \uf0a3 100kHz 4.7\nfSCL > 100kHz 0.6\ntHD;DAT Data hold timefSCL \uf0a3 100kHz 0 3.45\nµs\nfSCL > 100kHz 0 0.9\ntSU;DAT Data setup timefSCL \uf0a3 100kHz 250\nns\nfSCL > 100kHz 100\ntSU;STO Setup time for STOP conditionfSCL \uf0a3 100kHz 4.0\nµs\nfSCL > 100kHz 0.6\ntBUFBus free time between a STOP and \nSTART conditionfSCL \uf0a3 100kHz 4.7\nµs\nfSCL > 100kHz 1.3Symbol Parameter Condition Min. Typ. Max. Units\n123 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4 ATxmega128D4\n32.4.1 Absolute Maximum Ratings\nStresses beyond those listed in Table 32-86  under may cause permanent damage to the device. This is a stress rating \nonly and functional operation of the device at these or other conditions beyond those indicated in the operational sections \nof this specification is not implied. Exposure to absol ute maximum rating conditions for extended periods may affect \ndevice reliability.\nTable 32-86. Absolute Maximum Ratings\n32.4.2 General Operating Ratings\nThe device must operate within the ratings listed in Table 32-87  in order for all other electrical characteristics and typical \ncharacteristics of the device to be valid.\nTable 32-87. General Operating Conditions\nTable 32-88. Operating Voltage and FrequencySymbol Parameter Condition Min. Typ. Max. Units\nVCC Power supply voltage -0.3 4 V\nIVCC Current into a VCC pin 200\nmA\nIGND Current out of a Gnd pin 200\nVPINPin voltage with respect to Gnd \nand VCC-0.5 VCC+0.5 V\nIPIN I/O pin sink/source current -25 25 mA\nTA Storage temperature -65 150\n°C\nTj Junction temperature 150\nSymbol Parameter Condition Min. Typ. Max. Units\nVCC Power supply voltage 1.60 3.6\nV\nAVCC Analog supply voltage 1.60 3.6\nTA Temperature range -40 85\n°C\nTj Junction temperature -40 105\nSymbol Parameter Condition Min. Typ. Max. Units\nClkCPU CPU clock frequencyVCC = 1.6V 0 12\nMHzVCC = 1.8V 0 12\nVCC = 2.7V 0 32\nVCC = 3.6V 0 32\n124 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016The maximum CPU clock frequency depends on VCC. As shown in Figure 32-22  the Frequency vs. VCC curve is linear \nbetween 1.8V < VCC<2 . 7 V .\nFigure 32-22.Maximu m Frequency vs. VCC\n1.81232MHz\nV 2.7 3.6 1.6Safe Operating Area\n125 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.3 Current Consumption\nTable 32-89. Current Consumption for Active Mode and Sleep Modes  \nNotes: 1. All Power Reduction Registers set.\n2. Maximum limits are based on characterization, and not tested in production.Symbol Parameter Condition Min. Typ. Max. Units\nICCActive power \nconsumption(1)32kHz, Ext. ClkVCC = 1.8V 55\nµAVCC = 3.0V 135\n1MHz, Ext. ClkVCC = 1.8V 255\nVCC = 3.0V 535\n2MHz, Ext. ClkVCC = 1.8V 460 600\nVCC = 3.0V1.0 1.4\nmA\n32MHz, Ext. Clk 9.5 12\nIdle power\nconsumption(1)32kHz, Ext. ClkVCC = 1.8V 2.9\nµAVCC = 3.0V 3.9\n1MHz, Ext. ClkVCC = 1.8V 62\nVCC = 3.0V 118\n2MHz, Ext. ClkVCC = 1.8V 125 225\nVCC = 3.0V240 350\n32MHz, Ext. Clk 3.8 5.5 mA\nPower-down power\nconsumptionT=2 5 ° C\nVCC = 3.0V0.1 1.0\nµAT=8 5 ° C 1.5 4.5\nT = 105°C 0.1 8.6\nWDT and sampled BOD enabled,T=2 5 ° C\nVCC = 3.0V1.4 3.0\nWDT and sampled BOD enabled,T = 85°C2.8 6.0\nWDT and sampled BOD enabled,T = 105°C1.4 8.8\nPower-save powerconsumption\n(2) RTC from ULP clock, WDT and\nsampled BOD enabled, T = 25°CVCC = 1.8V 1.2\nVCC = 3.0V 1.5\nRTC from 1.024kHz low power\n32.768kHz TOSC, T = 25°CVCC = 1.8V 0.6 2.0\nVCC = 3.0V 0.7 2.0\nRTC from low power 32.768kHzTOSC, T = 25°CVCC = 1.8V 0.8 3.0\nVCC = 3.0V 1.0 3.0\nReset power consumptionCurrent through RESET  pin\nsubstractedVCC = 3.0V 300\n126 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-90. Current Consumptio n for Modules and Peripherals\nNote: 1. All parameters measured as the difference in current consumption between module enabled and disabled. All data at VCC = 3.0V, ClkSYS = 1MHz external clock \nwithout prescaling, T = 25°C unless other conditions are given.Symbol Parameter Condition(1) Min. Typ. Max. Units\nICCULP oscillator 1.0\nµA32.768kHz int. oscillator 29\n2MHz int. oscillator85\nDFLL enabled with 32.768kHz int. osc. as reference 115\n32MHz int. oscillator270\nDFLL enabled with 32.768kHz int. osc. as reference 440\nPLL20x multiplication factor, \n32MHz int. osc. DIV4 as reference320\nWatchdog Timer 1.0\nBODContinuous mode 138\nSampled mode, includes ULP oscillator 1.2\nInternal 1.0V reference 260\nTemperature sensor 250\nADC150kspsV\nREF = Ext ref3.0\nmACURRLIMIT = LOW 2.6\nCURRLIMIT = MEDIUM 2.1\nCURRLIMIT = HIGH 1.6\nACHigh Speed mode 330\nµALow power mode 130\nTimer/Counter 16\nUSART Rx and Tx enabled, 9600 BAUD 2.5\nFlash memory and EEPROM programming 4.0 8.0 mA\n127 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.4 Wake-up Time from Sleep Modes\nTable 32-91. Device Wake-up Time from Sleep  Modes with Various System Clock Sources\nNote: 1. The wake-up time is the time from the wake-up request  is given until the peripheral clock is available on pin, see Figure 32-23 . All peripherals and modules start \nexecution from the first clock cycle, ex pect the CPU that is halted for four cloc k cycles before program execution starts.\nFigure 32-23.Wake-up  Time DefinitionSymbol Parameter Condition Min. Typ.(1) Max. Units\ntwakeupWake-up time from Idle,\nStandby, and Extended Standby\nmodeExternal 2MHz clock 2.0\nµs32.768kHz internal oscillator 120\n2MHz internal oscillator 2.0\n32MHz internal oscillator 0.2\nWake-up time from Power-saveand Power-down modeExternal 2MHz clock 4.5\n32.768kHz internal oscillator 320\n2MHz internal oscillator 9.0\n32MHz internal oscillator 5.0\nWakeup request\nClock outputWakeup time\n128 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.5 I/O Pin Characteristics \nThe I/O pins complies with the JEDE C LVTTL and LVCMOS specification and the high- and low level input and output \nvoltage limits reflect or exceed this specification.\nTable 32-92. I/O Pi n Characteristics \nNotes: 1. The sum of all IOH for PORTA and PORTB must not exceed 100mA.\nThe sum of all IOH for PORTC must not exceed 200mA.\nThe sum of all IOH for PORTD and pins PE[0-1] on PORTE must not exceed 200mA.\nThe sum of all IOH for PE[2-3] on PORTE, PORTR and PDI must not exceed 100mA.\n2. The sum of all IOL for PORTA and PORTB must not exceed 100mA.\nThe sum of all IOL for PORTC must not exceed 200mA.\nThe sum of all IOL for PORTD and pins PE[0-1] on PORTE must not exceed 200mA.\nThe sum of all IOL for PE[2-3] on PORTE, PORTR and PDI must not exceed 100mA.Symbol Parameter Condition Min. Typ. Max. Units\nIOH(1)/\nIOL(2) I/O pin source/sink current -20 20 mA\nVIH High level input voltageVCC = 2.7 - 3.6V 2.0 VCC+0.3\nVVCC = 2.0 - 2.7V 0.7*VCC VCC+0.3\nVCC = 1.6 - 2.0V 0.8*VCC VCC+0.3\nVIL Low level input voltageVCC = 2.7- 3.6V -0.3 0.8\nVCC = 2.0 - 2.7V -0.3 0.3*VCC\nVCC = 1.6 - 2.0V -0.3 0.2*VCC\nVOH High level output voltageVCC = 3.0 - 3.6V IOH = -2mA 2.4 0.94*VCC\nVCC = 2.3 - 2.7VIOH = -1mA 2.0 0.96*VCC\nIOH = -2mA 1.7 0.92*VCC\nVCC = 3.3V IOH = -8mA 2.6 2.9\nVCC = 3.0V IOH = -6mA 2.1 2.6\nVCC = 1.8V IOH = -2mA 1.4 1.6\nVOL Low level output voltageVCC = 3.0 - 3.6V IOL = 2mA 0.05 0.4\nVCC = 2.3 - 2.7VIOL = 1mA 0.03 0.4\nIOL = 2mA 0.06 0.7\nVCC = 3.3V IOL = 15mA 0.4 0.76\nVCC = 3.0V IOL = 10mA 0.3 0.64\nVCC = 1.8V IOL = 5mA 0.2 0.46\nIIN Input leakage current T = 25°C <0.01 0.1 µA\nRP Pull/Buss keeper resistor 24 k\uf057\ntr Rise time No load4.0\nns\nslew rate limitation 7.0\n129 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.6 ADC Characteristics \nTable 32-93. Power Supply, Reference and Input Range \nTable 32-94. Clock and TimingSymbol Parameter Condition Min. Typ. Max. Units\nAVCC Analog supply voltage VCC- 0.3 VCC+ 0.3\nV\nVREF Reference voltage 1.0 AVCC- 0.6\nRin Input resistance Switched 4.0 k\uf057\nCsample Input capacitance Switched 4.4 pF\nRAREF Reference input resistance (leakage only) >10 M\uf057\nCAREF Reference input capacitance Static load 7.0 pF\nVIN Input range -0.1 AVCC+0.1\nV Conversion range Differential mode, Vinp - Vinn -VREF VREF\nConversion range Single ended unsigned mode, Vinp -\uf044V VREF-\uf044V\n∆V Fixed offset voltage 190 lsb\nSymbol Parameter Condition Min. Typ. Max. Units\nClkADC ADC clock frequencyMaximum is 1/4 of Peripheral clock \nfrequency100 1400\nkHz\nMeasuring internal signals 100 125\nfADC Sample rateCurrent limitation (CURRLIMIT) off 14 200\nkspsCURRLIMIT = LOW 14 150\nCURRLIMIT = MEDIUM 14 100\nCURRLIMIT = HIGH 50\nSampling time 1/2 ClkADC cycle 0.25 5 µs\nConversion time (latency)(RES+2)/2+GAIN\nRES = 8 or 12, GAIN = 0, 1, 2 or 35 7 10ClkADC\ncycles\nStart-up time ADC clock cycles 12 24\nClkADC\ncyclesADC settling timeAfter changing reference or input mode 7 7\nAfter ADC flush 1 1\n130 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-95. Accuracy Characteristics\nNotes: 1. Maximum numbers are based on characterisation and not te sted in production, and valid for 5% to 95% input voltage range .\n2. Unless otherwise noted all linearity, offset and gain error numbers are valid under the condition that external VREF is used.Symbol Parameter Condition(2)Min. Typ. Max. Units\nRES Resolution Programmable to 8 or 12 bit 8 12 12 Bits\nINL(1)Integral non-linearity50kspsVCC-1.0V < VREF< VCC-0.6V ±1.2 ±2\nlsbAll VREF ±1.5 ±3\n200kspsVCC-1.0V < VREF< VCC-0.6V ±1.0 ±2\nAll VREF ±1.5 ±3\nDNL(1)Differential non-linearity guaranteed monotonic <±0.8 <±1\nOffset error-1 mV\nTemperature drift <0.01 mV/K\nOperating voltage drift <0.6 mV/V\nGain errorDifferential\nmodeExternal reference -1\nmVAVCC/1.6 10\nAVCC/2.0 8\nBandgap ±5\nTemperature drift <0.02 mV/K\nOperating voltage drift <0.5 mV/V\nNoiseDifferential mode, shorted input\n200ksps, VCC = 3.6V, ClkPER = 16MHz0.4mV \nrms\n131 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-96. Gain Stage Characteristics\nNote: 1. Maximum numbers are based on characterisation and not test ed in production, and valid for 5% to 95% input voltage range.\n32.4.7 Analog Comparator Characteristics\nTable 32-97. Analog Comparator CharacteristicsSymbol Parameter Condition Min. Typ. Max. Units\nRin Input resistance Switched in normal mode 4.0 k\uf057\nCsample Input capacitance Switched in normal mode 4.4 pF\nSignal range Gain stage output 0 VCC- 0.6 V\nPropagation delay ADC conversion rate 1ClkADC\ncycles\nSample rate Same as ADC 14 200 kHz\nINL(1)Integral non-linearity 50kspsAll gain\nsettings±1.5 ±4 lsb\nGain error1x gain, normal mode -0.8\n% 8x gain, normal mode -2.5\n64x gain, normal mode -3.5\nOffset error,output referred1x gain, normal mode -2\nmV 8x gain, normal mode -5\n64x gain, normal mode -4\nNoise1x gain, normal mode\nVCC = 3.6V\nExt. VREF0.5\nmV \nrms8x gain, normal mode 1.5\n64x gain, normal mode 11\nSymbol Parameter Condition Min. Typ. Max. Units\nVoff Input offset voltage <±10 mV\nIlk Input leakage current <1 nA\nInput voltage range -0.1 AVCC V\nAC startup time 100 µs\nVhys1 Hysteresis, none 0 mV\nVhys2 Hysteresis, smallmode = High Speed (HS) 13\nmV\nmode = Low Power (LP) 30\nVhys3 Hysteresis, largemode = HS 30\nmV\nmode = LP 60\n132 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.8 Bandgap and Internal 1.0V Reference Characteristics\nTable 32-98. Bandgap and Internal 1.0V Reference Characteristics \n32.4.9 Brownout Detection Characteristics\nTable 32-99. Brownout Detection Characteristicstdelay Propagation delayVCC = 3.0V, T= 85°C mode = HS 30 90\nns\n30\n64-Level voltage scaler Integral non-linearity (INL) 0.3 0.5 lsbSymbol Parameter Condition Min. Typ. Max. Units\nSymbol Parameter Condition Min. Typ. Max. Units\nStartup timeAs reference for ADC 1 ClkPER + 2.5µs\nµs\nAs input voltage to ADC and AC 1.5\nBandgap voltage 1.1\nV\nINT1V Internal 1.00V reference T= 85°C, after calibration 0.99 1.0 1.01\nVariation over voltage and temperature Relative to T= 85°C, VCC = 3.0V ±1.5 %\nSymbol Parameter Condition Min. Typ. Max. Units\nVBOTBOD level 0 falling VCC 1.60 1.62 1.72\nVBOD level 1 falling VCC 1.8\nBOD level 2 falling VCC 2.0\nBOD level 3 falling VCC 2.2\nBOD level 4 falling VCC 2.4\nBOD level 5 falling VCC 2.6\nBOD level 6 falling VCC 2.8\nBOD level 7 falling VCC 3.0\ntBOD Detection timeContinuous mode 0.4\nµs\nSampled mode 1000\nVHYST Hysteresis 1.2 %\n133 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.10 External Reset Characteristics\nTable 32-100.External Reset Characteristics\n32.4.11 Power-on Reset Characteristics\nTable 32-101.Power-on Reset Characteristics \nNote: 1. VPOT- values are only valid when BOD is disabled. When BOD is enabled VPOT- = VPOT+.\n32.4.12 Flash and EEPROM Memory Characteristics\nTable 32-102.Endurance and Data RetentionSymbol Parameter Condition Min. Typ. Max. Units\ntEXT Minimum reset pulse width 1000 95 ns\nVRSTReset threshold voltage (VIH)VCC = 2.7 - 3.6V 0.60*VCC\nVVCC = 1.6 - 2.7V 0.60*VCC 0.50*VCC\nReset threshold voltage (VIL)VCC = 2.7 - 3.6V 0.40*VCC\nVCC = 1.6 - 2.7V 0.50*VCC\nRRST Reset pin pull-up resistor 25 k\uf057\nSymbol Parameter Condition Min. Typ. Max. Units\nVPOT- (1)POR threshold voltage falling VCCVCC falls faster than 1V/ms 0.4 1.0\nV VCC falls at 1V/ms or slower 0.8 1.0\nVPOT+ POR threshold voltage rising VCC 1.3 1.59\nSymbol Parameter Condition Min. Typ. Max. Units\nFlashWrite/Erase cycles25°C 10K\nCycle 85°C 10K\n105°C 2K\nData retention25°C 100\nYear 85°C 25\n105°C 10\nEEPROMWrite/Erase cycles25°C 100K\nCycle 85°C 100K\n105°C 30K\nData retention25°C 100\nYear 85°C 25\n105°C 10\n134 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-103.Programming Time\nNotes: 1. Programming is timed from the 2MHz internal oscillator.\n2. EEPROM is not erased if the EESAVE fuse is programmed.\n32.4.13 Clock and Osci llator Characteristics\n32.4.13.1 Calibrated 32.768kHz Internal Oscillator Characteristics\nTable 32-104. 32.768kHz Internal Oscillator Characteristics\n32.4.13.2 Calibrated 2MHz RC Internal Oscillator Characteristics\nTable 32-105. 2MHz Internal Oscillator Ch aracteristicsSymbol Parameter Condition Min. Typ.(1)Max. Units\nChip erase 128KB Flash, EEPROM(2) and SRAM erase 75 ms\nApplication erase Section erase 6\nFlashPage erase 4\nPage write 4\nAtomic Page Erase and write 8\nEEPROMPage erase 4\nPage write 4\nAtomic Page erase and write 8\nSymbol Parameter Condition Min. Typ. Max. Units\nFrequency 32.768 kHz\nFactory calibration accuracy T = 85\uf0b0C, VCC = 3.0V -0.5 0.5\n%\nUser calibration accuracy -0.5 0.5\nSymbol Parameter Condition Min. Typ. Max. Units\nFrequency rangeDFLL can tune to this frequency over \nvoltage and temperature1.8 2.2\nMHz\nFactory calibrated frequency 2.0\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -1.5 1.5\n% User calibration accuracy -0.2 0.2\nDFLL calibration stepsize 0.21\n135 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.13.3 Calibrated and Tunable 32MHz Internal Oscillator Characteristics\nTable 32-106. 32MHz Internal Oscillator Characteristics\n32.4.13.4 32kHz Internal ULP Oscillator Characteristics\nTable 32-107. 32kHz Internal UL P Oscillator Characteristics\n32.4.13.5 Internal Phase Locked Loop (PLL) Ch aracteristics\nTable 32-108. Internal PLL Characteristics\nNote: 1. The maximum output frequency vs. supply voltage is linear be tween 1.8V and 2.7V, and can never be higher than four times  the maximum CPU frequency.Symbol Parameter Condition Min. Typ. Max. Units\nFrequency rangeDFLL can tune to this frequency over \nvoltage and temperature30 55\nMHz\nFactory calibrated frequency 32\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -1.5 1.5\n% User calibration accuracy -0.2 0.2\nDFLL calibration step size 0.22\nSymbol Parameter Condition Min. Typ. Max. Units\nFactory calibrated frequency 32 kHz\nFactory calibration accuracy T = 85\uf0b0C, VCC= 3.0V -12 12\n%\nAccuracy -30 30\nSymbol Parameter Condition Min. Typ. Max. Units\nfIN Input frequency Output frequency must be within fOUT 0.4 64\nMHz\nfOUT Output frequency(1)VCC= 1.6 - 1.8V 20 48\nVCC= 2.7 - 3.6V 20 128\nStart-up time 25\nµs\nRe-lock time 25\n136 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.13.6 External Clock Characteristics\nFigure 32-24.External Clock Drive Waveform \nTable 32-109. External Clock Used as System Clock without Prescaling\nNote: 1. System Clock Prescalers must be set so that maximum CPU clock frequency for device is not exceeded.tCH\ntCL\ntCKtCH\nVIL1VIH1tCR tCF\nSymbol Parameter Condition Min. Typ. Max. Units\n1/tCK Clock frequency(1)VCC = 1.6 - 1.8V 0 12\nMHz\nVCC = 2.7 - 3.6V 0 32\ntCK Clock periodVCC = 1.6 - 1.8V 83.3\nnsVCC = 2.7 - 3.6V 31.5\ntCH Clock high timeVCC = 1.6 - 1.8V 30.0\nVCC = 2.7 - 3.6V 12.5\ntCL Clock low timeVCC = 1.6 - 1.8V 30.0\nVCC = 2.7 - 3.6V 12.5\ntCR Rise time (for maximum frequency)VCC = 1.6 - 1.8V 10\nVCC = 2.7 - 3.6V 3\ntCF Fall time (for maximum frequency)VCC = 1.6 - 1.8V 10\nVCC = 2.7 - 3.6V 3\n\uf044tCK Change in period from one clock cycle to the next 10 %\n137 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-110. External Clock with Prescaler(1) for System Clock\nNotes: 1. System Clock Prescale rs must be set so that maximum CPU clock frequency for device is not exceeded.\n2. The maximum frequency vs. supply voltage  is linear between 1.8V and 2.7V, and the same applies for all other parameters with supply voltage conditions.\n32.4.13.7 External 16MHz Crystal Osci llator and XOSC Characteristics\nTable 32-111. External 16MHz Crystal Os cillator and XOSC Characteristics  Symbol Parameter Condition Min. Typ. Max. Units\n1/tCK Clock frequency(2)VCC = 1.6 - 1.8V 0 90\nMHz\nVCC = 2.7 - 3.6V 0 142\ntCK Clock periodVCC = 1.6 - 1.8V 11\nnsVCC = 2.7 - 3.6V 7\ntCH Clock high timeVCC = 1.6 - 1.8V 4.5\nVCC = 2.7 - 3.6V 2.4\ntCL Clock low timeVCC = 1.6 - 1.8V 4.5\nVCC = 2.7 - 3.6V 2.4\ntCR Rise time (for maximum frequency) 1.5\ntCF Fall time (for maximum frequency) 1.5\n\uf044tCK Change in period from one clock cycle to the next 10 %\nSymbol Parameter Condition Min. Typ. Max. Units\nCycle to cycle jitterXOSCPWR=0FRQRANGE=0 <10\nnsFRQRANGE=1, 2, or 3 <1\nXOSCPWR=1 <1\nLong term jitterXOSCPWR=0FRQRANGE=0 <6\nFRQRANGE=1, 2, or 3 <0.5\nXOSCPWR=1 <0.5\nFrequency errorXOSCPWR=0FRQRANGE=0 <0.1\n%FRQRANGE=1 <0.05\nFRQRANGE=2 or 3 <0.005\nXOSCPWR=1 <0.005\nDuty cycleXOSCPWR=0FRQRANGE=0 40\nFRQRANGE=1 42\nFRQRANGE=2 or 3 45\nXOSCPWR=1 48\n138 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016RQ Negative impedance(1)XOSCPWR=0,\nFRQRANGE=00.4MHz resonator, \nCL=100pF2.4k\n\uf0571MHz crystal, CL=20pF 8.7k\n2MHz crystal, CL=20pF 2.1k\nXOSCPWR=0,FRQRANGE=1,\nCL=20pF2MHz crystal 4.2k\n8MHz crystal 250\n9MHz crystal 195\nXOSCPWR=0,\nFRQRANGE=2,\nCL=20pF8MHz crystal 360\n9MHz crystal 285\n12MHz crystal 155\nXOSCPWR=0,\nFRQRANGE=3,\nCL=20pF9MHz crystal 365\n12MHz crystal 200\n16MHz crystal 105\nXOSCPWR=1,\nFRQRANGE=0,\nCL=20pF9MHz crystal 435\n12MHz crystal 235\n16MHz crystal 125\nXOSCPWR=1,\nFRQRANGE=1,\nCL=20pF9MHz crystal 495\n12MHz crystal 270\n16MHz crystal 145\nXOSCPWR=1,FRQRANGE=2,\nCL=20pF12MHz crystal 305\n16MHz crystal 160\nXOSCPWR=1,FRQRANGE=3,\nCL=20pF12MHz crystal 380\n16MHz crystal 205\nESR SF = safety factor min(RQ)/SF k\uf057\nStart-up timeXOSCPWR=0,\nFRQRANGE=00.4MHz resonator, CL=100pF1.0\nmsXOSCPWR=0,FRQRANGE=12MHz crystal, CL=20pF 2.6\nXOSCPWR=0,FRQRANGE=28MHz crystal, CL=20pF 0.8\nXOSCPWR=0,FRQRANGE=312MHz crystal, CL=20pF 1.0\nXOSCPWR=1,\nFRQRANGE=316MHz crystal, CL=20pF 1.4Symbol Parameter Condition Min. Typ. Max. Units\n139 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Note: 1. Numbers for negative impedance are not tested in  production but guaranteed from design and characterization.\n32.4.13.8 External 32.768kHz Crystal Oscillator and TOSC Characteristics\nTable 32-112. External 32.768kHz Crysta l Oscillator and TO SC Characteristics\nNote: 1. See Figure 32-25  for definition.\nFigure 32-25.TOSC Input Capacitance\nThe parasitic capacitance between the TOSC pins is CL1 + CL2 in series as seen from the crystal when oscillating without \nexternal capacitors.CXTAL1Parasitic capacitance\nXTAL1 pin5.9\npFCXTAL2Parasitic capacitanceXTAL2 pin8.3\nCLOAD Parasitic capacitance load 3.5\nSymbol Parameter Condition Min. Typ. Max. Units\nESR/R1Recommended crystal equivalent\nseries resistance (ESR)Crystal load capacitance 6.5pF 60\nk\uf057\nCrystal load capacitance 9.0pF 35\nCTOSC Parasitic capacitanceNormal mode 4.7\npF\nLow power mode 5.2\nRecommended safety factorCapacitance load matched to\ncrystal specification3Symbol Parameter Condition Min. Typ. Max. Units\nCL1 CL2\n2CSOT 1CSOT Device internal\nExternal\n32.768KHz crystal\n140 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.14 SPI Characteristics\nFigure 32-26.SPI Timing Requirements in Master Mode\nFigure 32-27.SPI Timing Requirements in Slave ModeMSB LSB\nBSL BSMtMOS\ntMIS tMIHtSCKW\ntSCK\ntMOH tMOHtSCKF tSCKR\ntSCKW\nMOSI\n(Data Output)MISO\n(Data Input)SCK\n(CPOL = 1)SCK\n(CPOL = 0)SS\nMSB LSB\nBSL BSMtSIS tSIHtSSCKWtSSCKW\ntSSCKtSSH\ntSOSSHtSCKR tSCKF\ntSOStSSS\ntSOSSS\nMISO\n(Data Output)MOSI\n(Data Input)SCK\n(CPOL = 1)SCK\n(CPOL = 0)SS\n141 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table 32-113. SPI Timing Char acteristics and Requirements\nSymbol Parameter Condition Min. Typ. Max. Units\ntSCK SCK period Master(See Table 17-4 in \nXMEGA D Manual)\nnstSCKW SCK high/low width Master 0.5*SCK\ntSCKR SCK rise time Master 2.7\ntSCKF SCK fall time Master 2.7\ntMIS MISO setup to SCK Master 10\ntMIH MISO hold after SCK Master 10\ntMOS MOSI setup SCK Master 0.5*SCK\ntMOH MOSI hold after SCK Master 1\ntSSCK Slave SCK period Slave 4*t ClkPER\ntSSCKW SCK high/low width Slave 2*t ClkPER\ntSSCKR SCK rise time Slave 1600\ntSSCKF SCK fall time Slave 1600\ntSIS MOSI setup to SCK Slave 3\ntSIH MOSI hold after SCK Slave tC l kPER\ntSSS SS setup to SCK Slave 21\ntSSH SS hold after SCK Slave 20\ntSOS MISO setup SCK Slave 8.0\ntSOH MISO hold after SCK Slave 13.0\ntSOSS MISO setup after SS  low Slave 11.0\ntSOSH MISO hold after SS  high Slave 8.0\n142 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201632.4.15 Two-Wire Interface Characteristics\nTable 32-114  describes the requirements for devices connected to the Two-Wire Interface Bus. The Atmel AVR XMEGA \nTwo-Wire Interface meets or exceeds these require ments under the noted conditions. Timing symbols refer to Figure 32-\n28.\nFigure 32-28.Two-wire Interface Bus Timing\nTable 32-114. Two-wire Interface CharacteristicstHD;STAtof\nSDASCLtLOWtHIGH\ntSU;STA\ntBUFtr\ntHD;DATtSU;DATtSU;STO\nSymbol Parameter Condition Min. Typ. Max. Units\nVIH Input high voltage 0.7*VCC VCC+0.5\nVVIL Input low voltage -0.5 0.3*VCC\nVhys Hysteresis of Schmitt Trigger Inputs 0.05*VCC(1)\nVOL Output low voltage 3mA, sink current 0 0.4\ntr Rise time for both SDA and SCL 20+0.1Cb(1)(2)300\nns tof Output fall time from VIHmin to VILmax 10pF < Cb < 400pF(2)20+0.1Cb(1)(2)250\ntSP Spikes suppressed by input filter 0 50\nII Input current for each I/O pin 0.1VCC < VI < 0.9VCC -10 10 µA\nCI Capacitance for each I/O pin 10 pF\nfSCL SCL clock frequency fPER(3)>max(10fSCL, 250kHz) 0 400 kHz\nRP Value of pull-up resistorfSCL \uf0a3 100kHz\n\uf057\nfSCL > 100kHzVCC0.4V –\n3mA--------------------------- -100ns\nCb-------------- -\n300ns\nCb-------------- -\n143 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Notes: 1. Required only for fSCL > 100kHz.\n2. Cb = Capacitance of one bus line in pF.\n3. fPER = Peripheral clock frequency.tHD;STA Hold time (repeated) START conditionfSCL \uf0a3 100kHz 4.0\nµsfSCL > 100kHz 0.6\ntLOW Low period of SCL clockfSCL \uf0a3 100kHz 4.7\nfSCL > 100kHz 1.3\ntHIGH High period of SCL clockfSCL \uf0a3 100kHz 4.0\nfSCL > 100kHz 0.6\ntSU;STASet-up time for a repeated START \nconditionfSCL \uf0a3 100kHz 4.7\nfSCL > 100kHz 0.6\ntHD;DAT Data hold timefSCL \uf0a3 100kHz 0 3.45\nµs\nfSCL > 100kHz 0 0.9\ntSU;DAT Data setup timefSCL \uf0a3 100kHz 250\nns\nfSCL > 100kHz 100\ntSU;STO Setup time for STOP conditionfSCL \uf0a3 100kHz 4.0\nµs\nfSCL > 100kHz 0.6\ntBUFBus free time between a STOP and \nSTART conditionfSCL \uf0a3 100kHz 4.7\nµs\nfSCL > 100kHz 1.3Symbol Parameter Condition Min. Typ. Max. Units\n144 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633. Typical Characteristics\n33.1 ATxmega16D4\n33.1.1 Current Consumption\n33.1.1.1 Active Mode Supply Current\nFigure 33-1. Active Supply Current vs. Frequency\nfSYS= 0 - 1MHz external clock, T = 25°C .\nFigure 33-2. Active Supply Current vs. Frequency\nfSYS= 1 - 32MHz external clock, T = 25°C .3.3V\n3.0V2.7V\n2.2V\n1.8V\n0100200300400500600700\n0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0\nFrequency [MHz]ICC [µA]\n3.3V\n3.0V\n2.7V\n024681012\n048 1 2 1 6 2 0 2 4 2 8 3 2\nFrequency [MHz]ICC [mA]\n2.2V\n1.8V\n145 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-3. Active Mode Supply Current vs. VCC\nfSYS= 32.768kHz internal oscillator\nFigure 33-4. Active Mode Supply Current vs. VCC\nfSYS= 1MHz external clock .105°C85°C25 °C-40 °C\n406080100120140160180\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C85 °C25 °C-40 °C\n100150200250300350400450500550600\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n146 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-5. Active Mode Supply Current vs. VCC\nfSYS= 2MHz internal oscillator\nFigure 33-6. Active Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator prescaled to 8MHz105 °C85 °C25 °C-40 °C\n150300450600750900105012001350\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C85 °C25 °C-40 °C\n1.01.52.02.53.03.54.04.55.0\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [mA]\nVCC [V]\n147 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-7. Active Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator\n33.1.1.2 Idle Mode Supply Current\nFigure 33-8. Idle Mode Supply Current vs. Frequency\nfSYS= 0 - 1MHz external clock, T = 25°C105 °C85 °C25 °C-40 °C\n6.06.57.07.58.08.59.09.510.010.511.011.512.0\n2.7 2.8 2.9 3 3.1 3.2 3.3 3.4 3.5 3.6Icc [mA]\nVCC [V]\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n020406080100120140\n0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0\nFrequency [MHz]ICC [µA]\n148 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-9. Idle Mode Supply Current vs. Frequency\nfSYS= 1 - 32MHz external clock, T = 25°C\nFigure 33-10. Idle Mode Supply Current vs. VCC\nfSYS= 32.768kHz internal oscillator3.3V\n3.0V2.7V\n00.51.01.52.02.53.03.54.04.5\n0 4 8 1 21 62 02 42 83 2\nFrequency [MHz]ICC [mA]\n2.2V\n1.8V\n105 °C\n85 °C\n25 °C-40 °C\n25.0025.7526.5027.2528.0028.7529.5030.2531.0031.7532.5033.2534.0034.7535.50\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n149 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-11. Idle Mode Supply Current vs. VCC\nfSYS= 1MHz external clock\nFigure 33-12. Idle Mode Supply Current vs. VCC\nfSYS= 2MHz internal oscillator105 °C\n85 °C\n25 °C\n-40 °C\n30405060708090100110120130\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C85 °C25 °C-40 °C\n110130150170190210230250270290310330\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n150 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-13. Idle Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator prescaled to 8MHz\nFigure 33-14. Idle Mode Current vs. VCC\nfSYS= 32MHz internal oscillator105°C85 °C25 °C-40 °C\n5006007008009001000110012001300140015001600\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C85 °C25 °C-40°C\n2.252.502.753.003.253.503.754.004.25\n2.7 2.8 2.9 3 3.1 3.2 3.3 3.4 3.5 3.6Icc [mA]\nVCC [V]\n151 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.1.3 Power-down Mode Supply Current\nFigure 33-15. Power-down Mode Supply Current vs. VCC\nAll functions disabled\nFigure 33-16. Power-down Mode Supply Current vs. VCC\nWatchdog and sampled BOD enabled105 °C\n85 °C\n25°C\n-40°C1.01.52.02.53.03.54.04.55.05.56.06.5\n1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C\n85 °C\n25 °C\n-40 °C 0.00.51.01.52.02.53.03.54.04.55.05.5\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n152 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-17. Power-down Mode Supply Current vs. Temperature\nWatchdog and sampled BOD enabled and running from internal ULP oscillator\n33.1.1.4 Power-save Mode Supply Current\nFigure 33-18. Power-save Mode Supply Current vs.VCC\nReal Time Counter enabled and running from 1.024kHz output of 32.768kHz TOSC3.6V\n3.0V\n2.7V\n2.2V\n1.8V\n1.01.52.02.53.03.54.04.55.05.56.06.57.07.5\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Icc [µA]\nTemperature [°C]\nNormal mode\nLow-power mode\n00.10.20.30.40.50.60.70.80.9\nVCC [V]ICC [µA]\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\n153 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.1.5 Standby Mode Supply Current\nFigure 33-19. Standby Supply Current vs. VCC\nStandby, fSYS=1 M H z\nFigure 33-20. Standby Supply Current vs. VCC\n25°C, running from different crystal oscillators105°C\n85°C\n25°C\n-40°C\n2.53.74.96.17.38.59.710.912.1\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6ICC[µA]\nVCC[V]\n16MHz\n12MHz\n8MHz\n2MHz\n0.454MHz\n160200240280320360400440480\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]ICC[µA]\n154 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.2 I/O Pin Characteristics\n33.1.2.1 Pull-up\nFigure 33-21. I/O Pin Pull-up Resi stor Current vs. Input Voltage\nVCC = 1.8V\nFigure 33-22. I/O Pin Pull-up Resi stor Current vs. Input Voltage\nVCC = 3.0V105°C85°C25°C-40°C\n081624324048566472\n0.1 0.3 0.5 0.7 0.9 1.1 1.3 1.5 1.7VPIN [V]IPIN [µA]\n105°C85°C25°C-40°C\n01224364860728496108120\n0.1 0.3 0.5 0.7 0.9 1.1 1.3 1.5 1.7 1.9 2.1 2.3 2.5 2.7 2.9VPIN [V]IPIN [µA]\n155 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-23. I/O pin pull-up Resi stor Current vs. Input Voltage\nVCC = 3.3V\n33.1.2.2 Output Voltage vs. Sink/Source Current\nFigure 33-24. I/O Pin Output Voltage vs. Source Current\nVCC = 1.8V105°C85°C25°C-40°C\n0153045607590105120135\n0.1 0.3 0.5 0.7 0.9 1.1 1.3 1.5 1.7 1.9 2.1 2.3 2.5 2.7 2.9 3.1 3.3VPIN [V]IPIN [µA]\n105°C 85°C 25°C -40°C\n00.20.40.60.81.01.21.41.61.82.0\n-5 -4.5 -4 -3.5 -3 -2.5 -2 -1.5 -1 -0.5 0IPIN [mA]VPIN [V]\n156 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-25. I/O Pin Output Voltage vs. Source Current\nVCC = 3.0V\nFigure 33-26. I/O Pin Output Voltage vs. Source Current\nVCC = 3.3V105 °C 85 °C 25 °C -40 °C\n00.350.701.051.401.752.102.452.803.15\n- 1 6- 1 4- 1 2- 1 0 - 8 - 6 - 4 - 2 0\nIPIN [mA]VPIN [V]\n105°C 85°C 25°C -40°C\n00.350.71.051.41.752.12.452.83.153.5\n-20 -18 -16 -14 -12 -10 -8 -6 -4 -2 0\nIPIN [mA]VPIN [V]\n157 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-27. I/O Pin Output Voltage vs. Source Current\nFigure 33-28. I/O Pin Output Voltage vs. Sink Current\nVCC = 1.8V3.6 V\n3.3 V\n2.7 V\n2.2 V\n1.8 V\n00.30.60.91.21.51.82.12.42.733.33.6\n-20 -18 -16 -14 -12 -10 -8 -6 -4 -2 0\nIPIN [mA]VPIN [V]\n00.10.20.30.40.50.60.70.80.91\n0123456789 1 0105°C 85°C 25°C -40°C\nIPIN [mA]VPIN [V]\n158 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-29. I/O Pin Output  Voltage vs. Sink Current\nVCC = 3.0V\nFigure 33-30. I/O Pin Output  Voltage vs. Sink Current\nVCC = 3.3V00.10.20.30.40.50.60.70.80.91.01.1\n02468 1 0 1 2 1 4 1 6\nIPIN [mA]VPIN [V]85°C\n25°C\n-40°C105°C\n00.10.20.30.40.50.60.70.80.91\n02468 1 0 1 2 1 4 1 6IPIN [mA]VPIN [V]85°C\n25°C\n-40°C105°C\n159 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-31. I/O Pin Output  Voltage vs. Sink Current\n33.1.2.3 Thresholds and Hysteresis\nFigure 33-32. I/O Pin Input Threshold Voltage vs. VCC\nT = 25\uf0b0C00.150.30.450.60.750.91.051.21.351.5\n0 2 4 6 8 1 01 21 41 61 82 0\nIPIN [mA]VPIN [V]3.6V3.3V3.0V2.7V 1.8V 1.6V\nVILVIH\n00.20.40.60.81.01.21.41.61.8\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\nVCC [V]Vthreshold   [V]\n160 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-33. I/O Pin Input Threshold Voltage vs. VCC\nVIH I/O pin read as “1”\nFigure 33-34. I/O Pin Input Threshold Voltage vs. VCC\nVIL I/O pin read as “0”0.70.80.91.01.11.21.31.41.51.61.71.8\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6105 °C85 °C25 °C-40 °C\nVCC [V]Vthreshold [V]\n0.400.550.700.851.001.151.301.451.601.75\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6105 °C85 °C25 °C-40 °C\nVCC [V]Vthreshold [V]\n161 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-35. I/O Pin Input Hysteresis vs. VCC\n33.1.3 ADC Characteristics\nFigure 33-36. INL Error vs. External VREF\nT = 25\uf0b0C, VCC = 3.6V, external reference0.150.180.210.240.270.30.330.360.390.42\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6VCC [V]Vthreshold [V]\n85°C25°C-40°C\n105°C\nDifferential mode\nSingle-ended signed modeSingle-ended unsigned mode\n0.00.20.40.60.81.01.21.41.6\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0VREF [V]INL[LSB]\n162 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-37. INL Error vs. Sample Rate\nT = 25\uf0b0C, VCC = 3.6V, VREF = 3.0V external\nFigure 33-38. INL E rror vs. In put CodeDifferential mode\nSingle-ended signed modeSingle-ended unsigned mode\n0.250.300.350.400.450.500.550.600.650.70\nADC sample rate [ksps]INL[LSB]\n50 100 150 200 250 300\n-1.25-1.00-0.75-0.50-0.250.000.250.500.751.001.25\n0 512 1024 1536 2048 2560 3072 3584 4096\nADC input codeINL[LSB]\n163 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-39. DNL Error vs. External VREF\nT = 25\uf0b0C, VCC = 3.6V, external reference\nFigure 33-40. DNL Error vs. Sample Rate\nT = 25\uf0b0C, VCC = 3.6V, VREF = 3.0V external .Differential mode\nSingle-ended signed modeSingle-ended unsigned mode\n0.200.250.300.350.400.450.500.550.600.650.70\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0\nVREF [V]DNL [LSB]\nDifferential mode\nSingle-ended signed modeSingle-ended unsigned mode\n0.200.250.300.350.400.450.500.550.60\n50 100 150 200 250 300\nADC sample rate [ksps]DNL [LSB]\n164 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-41. DNL Error vs. Input Code\nFigure 33-42. Gain Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sample rate = 200ksps-0.6-0.4-0.200.20.40.60.81\n0 512 1024 1536 2048 2560 3072 3584 4096\nADC input codeDNL [LSB]\nDifferential mode\nSingle-ended signed mode\nSingle-ended unsigned mode\n-15-14-13-12-11-10-9-8-7-6-5\n1 . 01 . 21 . 41 . 61 . 82 . 02 . 22 . 42 . 62 . 83 . 0\nVREF [V]Gain error  [mV]\n165 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-43. Gain Error vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sample rate = 200ksps\nFigure 33-44. Offset Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sample rate = 200kspsDifferential mode\nSingle-ended signed \nmode\nSingle-ended unsigned mode\n-9-8-7-6-5-4-3-2\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6 VCC [V]Gain error  [mV]\nDifferential mode\n7.07.27.47.67.88.08.28.48.68.89.09.29.4\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0\nVREF [V]Offset error  [mV]\n166 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-45. Gain Error vs. Temperature\nVCC = 3.0V, VREF = external 2.0V\nFigure 33-46. Offset Error vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sample rate = 200kspsDifferential modeSingle-ended signed mode\nSingle-ended unsigned mode\n-14-12-10-8-6-4-20\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Gain error  [mV]\nTemperature [°C]\nDifferential mode\n0.001.002.003.004.005.006.007.008.00\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Offset error  [mV]\n167 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.4 Analog Comparator Characteristics\nFigure 33-47. Analog Comparator Hysteresis vs. VCC\nHigh speed, small hysteresis\nFigure 33-48. Analog Comparator Hysteresis vs. VCC\nHigh speed, large hysteresis4567891011121314\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6-40°C25°C85°C\nVCC [V]VHYST  [mV]105°C\n14161820222426283032\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6-40°C25°C85°C\nVCC [V]VHYST  [mV]105°C\n168 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-49. Analog Comparator Hysteresis vs. VCC\nLow power, small hysteresis\nFigure 33-50. Analog Comparator Hysteresis vs. VCC\nLow power, large hysteresis1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\nVCC [V]VHYST [mV]\n12141618202224262830\n105 °C\n85 °C\n25°C\n-40°C\n32364044485256606468\n-40°C25°C85°C\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\nVCC [V]VHYST [mV]105°C\n169 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-51. Analog Comparator Current Source vs. Calibration Value\nT = 25\uf0b0C\nFigure 33-52. Analog Comparator Current Source vs. Calibration Value\nVCC = 3.0V3.6V\n3.0V\n2.2V\n1.8V\n22.753.54.2555.756.57.258\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\nCALIBA [3..0]ICURRENTSOURCE  [µA]\n105°C85 °C25 °C-40 °C\n3.03.43.84.24.65.05.45.86.26.67.0\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\nCALIBA [3..0]ICURRENTSOURCE  [µA]\n170 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-53. Voltage Scaler INL vs. SCALEFAC\nT = 25\uf0b0C, VCC = 3.0V\n33.1.5 Internal 1.0V Reference Characteristics\nFigure 33-54. ADC Internal 1.0V  Reference vs. Temperature25°C\n-0.150-0.125-0.100-0.075-0.050-0.02500.0250.050\n0 1 02 03 04 05 06 07 0\nSCALEFACINL [LSB]\n3.6V3.0V2.7V2.2V1.8V\n0.99680.99760.99840.999211.00081.00161.00241.00321.0041.00481.00561.00641.00721.0081.0088\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Bandgap Voltage [V]\n171 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.6 BOD Characteristics\nFigure 33-55. BOD Thresholds vs. Temperature\nBOD level = 1.6V\nFigure 33-56. BOD Thresholds vs. Temperature\nBOD level = 3.0V1.5381.5421.5461.551.5541.5581.5621.5661.571.574\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105Rising Vcc\nFalling Vcc\nTemperature [°C]VBOT [V]\n2.922.9282.9362.9442.9522.962.9682.9762.9842.992\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105Rising Vcc\nFalling Vcc\nTemperature [°C]VBOT [V]\n172 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.7 External Reset Characteristics\nFigure 33-57. Minimum Reset Pin Pulse Width vs. VCC\nFigure 33-58. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 1.8V105°C\n85°C\n25°C\n-40°C\n80859095100105110115120125130135140145\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6VCC [V]TRST [ns]\n105°C85°C25°C-40°C\n08162432404856647280\n0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8VRESET [V]IRESET  [µA]\n173 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-59. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 3.0V\nFigure 33-60. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 3.3V0153045607590105120135\n0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3105°C85°C25°C-40°C\nVRESET [V]IRESET  [µA]\n0153045607590105120135150\n0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3 3.3105°C85°C25°C-40°C\nVRESET [V]IRESET  [µA]\n174 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-61. Reset Pin Input Threshold Voltage vs. VCC\nVIH - Reset pin read as “1”\nFigure 33-62. Reset Pin Input Threshold Voltage vs. VCC\nVIL - Reset pin read as “0”105°C85°C25°C-40°C\n1.001.101.201.301.401.501.601.701.801.902.002.10\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Vthreshold [V]\nVCC[V]\n0.40.50.60.70.80.911.11.21.31.41.51.61.7\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6105 °C85 °C25 °C-40 °C\nVCC [V]Vthreshold [V]\n175 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.8 Power-on Reset Characteristics\nFigure 33-63. Power-on Reset Current Consumption vs. VCC\nBOD level = 3.0V, enabled in continuous mode\nFigure 33-64. Power-on Reset Current Consumption vs. VCC\nBOD level = 3.0V, enabled in sampled mode105°C85°C25°C-40°C\n0100200300400500600700\n0 . 40 . 71 . 01 . 31 . 61 . 92 . 22 . 52 . 8ICC[µA]\nVCC[V]\n105°C85°C25°C-40°C\n065130195260325390455520585650\n0.4 0.7 1 1.3 1.6 1.9 2.2 2.5 2.8ICC[µA]\nVCC[V]\n176 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.9 Oscillator Characteristics\n33.1.9.1 Ultra Low-Power Internal Oscillator\nFigure 33-65. Ultra Low-Power Internal Oscillator Frequency vs. Temperature\n33.1.9.2 32.768kHz Internal Oscillator\nFigure 33-66. 32.768kHz Internal O scillator Frequency vs. Temperature3.6V\n3.3V\n3.0V\n2.7V\n2.0V\n1.8V30.931.231.531.832.132.432.733.033.333.633.934.234.534.835.135.4\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [kHz]\n3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n32.332.3532.432.4532.532.5532.632.6532.732.7532.832.8532.9\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [kHz]\n177 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-67. 32.768kHz In ternal Oscillator Frequency vs. Calibration Value\nVCC= 3.0V, T = 25°C\n33.1.9.3 2MHz Internal Oscillator\nFigure 33-68. 2MHz Internal Osci llator Frequency vs. Temperature\nDFLL disabled3.0V\n1519232731353943475155\n0 16 32 48 64 80 96 112 128 144 160 176 192 208 224 240 256RC32KCAL [7..0]Frequency [kHz]\n3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n1.941.961.982.002.022.042.062.082.102.122.142.16\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5\nTemperature [°C]Frequency [MHz]\n178 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-69. 2MHz Internal Osc illator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator \nFigure 33-70. 2MHz Internal Oscillator CALA Calibration Step Size\nVCC= 3V3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n1.9681.9721.9761.981.9841.9881.9921.9962.002.0042.0082.012\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [MHz]\n105°C85°C25°C-40°C\n0.120.130.140.150.160.170.180.190.200.210.220.230.240.250.260.270.280.29\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0CALAStep Size [%]\n179 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.9.4 32MHz Internal Oscillator\nFigure 33-71. 32MHz Internal Osci llator Frequency vs. Temperature\nDFLL disabled\nFigure 33-72. 32MHz Internal Osci llator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V31.531.9532.432.8533.333.7534.234.6535.135.553636.45\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [MHz]\n3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n31.531.5531.631.6531.731.7531.831.8531.931.953232.0532.132.15\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [MHz]\n180 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-73. 32MHz Internal Osci llator CALA Calibration Step Size\nVCC= 3.0V\n33.1.9.5 32MHz Internal Osci llator Calibrated to 48MHz\nFigure 33-74. 48MHz Internal Osci llator Frequency vs. Temperature\nDFLL disabled105°C\n85°C\n25°C-40°C\n0.120.140.160.180.200.220.240.260.280.300.320.34\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0\nCALAStep Size [%]\n3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n46.246.947.648.349.049.750.451.151.852.553.253.954.655.3\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5 Temperature [°C]Frequency [MHz]\n181 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-75. 48MHz Internal Osci llator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator\nFigure 33-76. 48MHz Internal Osci llator CALA Calibration Step Size\nVCC= 3.0V3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n31.531.5531.631.6531.731.7531.831.8531.931.953232.0532.132.15\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [MHz]\n105°C\n85°C25°C-40°C\n0.090.110.130.150.170.190.210.230.250.270.29\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0CALAStep Size [%]\n182 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.10 Two-Wire Interface Characteristics\nFigure 33-77. SDA Hold Time vs. Temperature\nFigure 33-78. SDA Hold Time vs. Supply Voltage3\n2\n1\n050100150200250300350400450500Hold time [ns]\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85\nTemperature [°C]\n3\n2\n1\n050100150200250300350400450500\nVCC [V]Hold time [ns]\n2.6 2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6\n183 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.1.11 PDI Characteristics\nFigure 33-79. Maximum PDI Frequency vs. VCC\n105 °C85 °C25 °C-40 °C\n10111213141516171819202122\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]Frequency max [MHz]\n184 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2 ATxmega32D4\n33.2.1 Current Consumption\n33.2.1.1 Active Mode Supply Current\nFigure 33-80. Active Supply Current vs. Frequency\nfSYS= 0 - 1MHz external clock, T = 25°C\nFigure 33-81. Active Supply Current vs. Frequency\nfSYS= 1 - 32MHz external clock, T = 25°C3.6V\n3.0V\n2.7V\n2.2V\n1.8V\n050100150200250300350400450500550600\n0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1\nFrequency [MHz]ICC [µA]\n3.6V\n3.0V\n2.7V\n01234567891011\n0 2 4 6 8 1 01 21 41 61 82 02 22 42 62 83 03 2\nFrequency [MHz]ICC [mA]\n1.8V2.2V\n185 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-82. Active Mode Supply Current vs. VCC\nfSYS= 32.768kHz internal oscillator\nFigure 33-83. Active Mode Supply Current vs. VCC\nfSYS= 1MHz external clock105°C85°C25 °C-40 °C\n406080100120140160180\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C85 °C25 °C-40 °C\n100150200250300350400450500550600\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n186 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-84. Active Mode Supply Current vs. VCC\nfSYS= 2MHz internal oscillator\nFigure 33-85. Active Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator prescaled to 8MHz105 °C85 °C25 °C-40 °C\n150300450600750900105012001350\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C85 °C25 °C-40 °C\n1.01.52.02.53.03.54.04.55.0\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [mA]\nVCC [V]\n187 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-86. Active Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator\n33.2.1.2 Idle Mode Supply Current\nFigure 33-87. Idle Mode Supply Current vs. Frequency\nfSYS= 0 - 1MHz external clock, T = 25°C  105 °C85 °C25 °C-40 °C\n6.06.57.07.58.08.59.09.510.010.511.011.512.0\n2.7 2.8 2.9 3 3.1 3.2 3.3 3.4 3.5 3.6Icc [mA]\nVCC [V]\n3.6V\n3.0V\n2.7V\n2.2V\n1.8V\n0153045607590105120\n0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 Frequency [MHz]ICC[uA]\n188 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-88. Idle Mode Supply Current vs. Frequency\nfSYS= 1 - 32MHz external clock, T = 25°C\nFigure 33-89. Idle Mode Supply Current vs. VCC\nfSYS= 32.768kHz internal oscillator3.6V\n3.0V\n2.7V\n00.40.81.21.62.02.42.83.23.64.0\n02468 1 0 1 2 1 4 1 6 1 8 2 0 2 2 2 4 2 6 2 8 3 0 3 2Frenquecy [MHz]Icc [mA]\n2.2V\n1.8V\n105 °C\n85 °C\n25 °C-40 °C\n25.0025.7526.5027.2528.0028.7529.5030.2531.0031.7532.5033.2534.0034.7535.50\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n189 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-90. Idle Mode Supply Current vs. VCC\nfSYS= 1MHz external clock\nFigure 33-91. Idle Mode Supply Current vs. VCC\nfSYS= 2MHz internal oscillator105 °C\n85 °C\n25 °C\n-40 °C\n30405060708090100110120130\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C85 °C25 °C-40 °C\n110130150170190210230250270290310330\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n190 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-92. Idle Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator prescaled to 8MHz\nFigure 33-93. Idle Mode Current vs. VCC\nfSYS= 32MHz internal oscillator105°C85 °C25 °C-40 °C\n5006007008009001000110012001300140015001600\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C85 °C25 °C-40°C\n2.252.502.753.003.253.503.754.004.25\n2.7 2.8 2.9 3 3.1 3.2 3.3 3.4 3.5 3.6Icc [mA]\nVCC [V]\n191 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.1.3 Power-down Mode Supply Current\nFigure 33-94. Power-down Mode Supply Current vs. VCC\nAll functions disabled\nFigure 33-95. Power-down Mode Supply Current vs. VCC\nWatchdog and sampled BOD enabled105 °C\n85 °C\n25°C\n-40°C1.01.52.02.53.03.54.04.55.05.56.06.5\n1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n105 °C\n85 °C\n25 °C\n-40 °C 0.00.51.01.52.02.53.03.54.04.55.05.5\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [µA]\nVCC [V]\n192 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-96. Power-down Mode Supply Current vs. Temperature\nWatchdog and sampled BOD enabled and running from internal ULP oscillator\n33.2.1.4 Power-save Mode Supply Current\nFigure 33-97. Power-save Mode Supply Current vs.VCC\nReal Time Counter enabled and running from 1.024kHz output of 32.768kHz TOSC3.6V\n3.0V\n2.7V\n2.2V\n1.8V\n1.01.52.02.53.03.54.04.55.05.56.06.57.07.5\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Icc [µA]\nTemperature [°C]\nNormal mode\nLow-power mode\n00.10.20.30.40.50.60.70.80.9\nVCC [V]ICC [µA]\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\n193 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.1.5 Standby Mode Supply Current\nFigure 33-98. Standby Supply Current vs. VCC\nStandby, fSYS=1 M H z\nFigure 33-99. Standby Supply Current vs. VCC\n25°C, running from different crystal oscillators105°C\n85°C\n25°C\n-40°C\n2.53.74.96.17.38.59.710.912.1\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6ICC[µA]\nVCC[V]\n16MHz\n12MHz\n8MHz\n2MHz\n0.454MHz\n160200240280320360400440480\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\nVCC [V]ICC[µA]\n194 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.2 I/O Pin Characteristics\n33.2.2.1 Pull-up\nFigure 33-100. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 1.8V\nFigure 33-101. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 3.0V105°C85°C25°C-40°C\n081624324048566472\n0.1 0.3 0.5 0.7 0.9 1.1 1.3 1.5 1.7VPIN [V]IPIN [µA]\n105°C85°C25°C-40°C\n01224364860728496108120\n0.1 0.3 0.5 0.7 0.9 1.1 1.3 1.5 1.7 1.9 2.1 2.3 2.5 2.7 2.9VPIN [V]IPIN [µA]\n195 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-102. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 3.3V\n33.2.2.2 Output Voltage vs. Sink/Source Current\nFigure 33-103. I/O Pin Output Voltage vs. Source Current\nVCC = 1.8V105°C85°C25°C-40°C\n0153045607590105120135\n0.1 0.3 0.5 0.7 0.9 1.1 1.3 1.5 1.7 1.9 2.1 2.3 2.5 2.7 2.9 3.1 3.3VPIN [V]IPIN [µA]\n105°C 85°C 25°C -40°C\n00.20.40.60.81.01.21.41.61.82.0\n-5 -4.5 -4 -3.5 -3 -2.5 -2 -1.5 -1 -0.5 0IPIN [mA]VPIN [V]\n196 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-104. I/O Pin Output Voltage vs. Source Current\nVCC = 3.0V\nFigure 33-105. I/O Pin Output Voltage vs. Source Current\nVCC = 3.3V105 °C 85 °C 25 °C -40 °C\n00.350.701.051.401.752.102.452.803.15\n- 1 6- 1 4- 1 2- 1 0 - 8 - 6 - 4 - 2 0\nIPIN [mA]VPIN [V]\n105°C 85°C 25°C -40°C\n00.350.71.051.41.752.12.452.83.153.5\n-20 -18 -16 -14 -12 -10 -8 -6 -4 -2 0\nIPIN [mA]VPIN [V]\n197 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-106. I/O Pin Output Voltage vs. Source Current\nFigure 33-107. I/O Pin Output Voltage vs. Sink Current\nVCC = 1.8V3.6 V\n3.3 V\n2.7 V\n2.2 V\n1.8 V\n00.30.60.91.21.51.82.12.42.733.33.6\n-20 -18 -16 -14 -12 -10 -8 -6 -4 -2 0IPIN [mA]VPIN [V]\n00.10.20.30.40.50.60.70.80.91\n0123456789 1 0105°C 85°C 25°C -40°C\nIPIN [mA]VPIN [V]\n198 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-108. I/O Pin Output Voltage vs. Sink Current\nVCC = 3.0V\nFigure 33-109. I/O Pin Output Voltage vs. Sink Current\nVCC = 3.3V00.10.20.30.40.50.60.70.80.91.01.1\n02468 1 0 1 2 1 4 1 6\nIPIN [mA]VPIN [V]85°C\n25°C\n-40°C105°C\n00.10.20.30.40.50.60.70.80.91\n02468 1 0 1 2 1 4 1 6IPIN [mA]VPIN [V]85°C\n25°C\n-40°C105°C\n199 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-110. I/O Pin Output Voltage vs. Sink Current\n33.2.2.3 Thresholds and Hysteresis\nFigure 33-111. I/O Pin Input Threshold Voltage vs. VCC\nT = 25\uf0b0C00.150.30.450.60.750.91.051.21.351.5\n0 2 4 6 8 1 01 21 41 61 82 0\nIPIN [mA]VPIN [V]3.6V3.3V3.0V2.7V 1.8V 1.6V\n0.50.60.70.80.911.11.21.31.41.51.61.71.8\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]Vthreshold [V]VILVIH\n200 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-112. I/O Pin Input Threshold Voltage vs. VCC\nVIH I/O pin read as “1”\nFigure 33-113. I/O Pin Input Threshold Voltage vs. VCC\nVIL I/O pin read as “0”0.70.80.91.01.11.21.31.41.51.61.71.8\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6105 °C85 °C25 °C-40 °C\nVCC [V]Vthreshold [V]\n0.400.550.700.851.001.151.301.451.601.75\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6105 °C85 °C25 °C-40 °C\nVCC [V]Vthreshold [V]\n201 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-114. I/O Pin Input Hysteresis vs. VCC\n33.2.3 ADC Characteristics\nFigure 33-115. INL E rror vs. External VREF\nT = 25\uf0b0C, VCC = 3.6V, external reference0.150.180.210.240.270.30.330.360.390.42\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6VCC [V]Vthreshold [V]\n85°C25°C-40°C\n105°C\nDifferential mode\nSingle-ended signed modeSingle-ended unsigned mode\n0.00.20.40.60.81.01.21.41.6\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0VREF [V]INL[LSB]\n202 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-116. INL Error vs. Sample Rate\nT = 25\uf0b0C, VCC = 3.6V, VREF = 3.0V external\nFigure 33-117. INL Error vs. Input CodeDifferential mode\nSingle-ended signed modeSingle-ended unsigned mode\n0.250.300.350.400.450.500.550.600.650.70\nADC sample rate [ksps]INL[LSB]\n50 100 150 200 250 300\n-1.25-1.00-0.75-0.50-0.250.000.250.500.751.001.25\n0 512 1024 1536 2048 2560 3072 3584 4096\nADC input codeINL[LSB]\n203 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-118. DNL Error vs. External VREF\nT = 25\uf0b0C, VCC = 3.6V, external reference\nFigure 33-119. DNL Error vs. Sample Rate\nT = 25\uf0b0C, VCC = 3.6V, VREF = 3.0V externalDifferential mode\nSingle-ended signed modeSingle-ended unsigned mode\n0.200.250.300.350.400.450.500.550.600.650.70\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0\nVREF [V]DNL [LSB]\nDifferential mode\nSingle-ended signed modeSingle-ended unsigned mode\n0.200.250.300.350.400.450.500.550.60\n50 100 150 200 250 300\nADC sample rate [ksps]DNL [LSB]\n204 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-120. DNL Error vs. Input code\nFigure 33-121. Gain Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sample rate = 200ksps-0.6-0.4-0.200.20.40.60.81\n0 512 1024 1536 2048 2560 3072 3584 4096\nADC input codeDNL [LSB]\nDifferential mode\nSingle-ended signed mode\nSingle-ended unsigned mode\n-15-14-13-12-11-10-9-8-7-6-5\n1 . 01 . 21 . 41 . 61 . 82 . 02 . 22 . 42 . 62 . 83 . 0\nVREF [V]Gain error  [mV]\n205 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-122. Gain Error vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sample rate = 200ksps\nFigure 33-123. Gain Error vs. Temperature\nVCC = 3.0V, VREF = external 2.0VDifferential mode\nSingle-ended signed \nmode\nSingle-ended unsigned mode\n-9-8-7-6-5-4-3-2\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6 VCC [V]Gain error  [mV]\nDifferential modeSingle-ended signed mode\nSingle-ended unsigned mode\n-14-12-10-8-6-4-20\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Gain error  [mV]\nTemperature [°C]\n206 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-124. Offset Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sample rate = 200ksps\nFigure 33-125. Offset Error vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sample rate = 200kspsDifferential mode\n7.07.27.47.67.88.08.28.48.68.89.09.29.4\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0\nVREF [V]Offset error  [mV]\nDifferential mode\n0.001.002.003.004.005.006.007.008.00\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VCC [V]Offset error  [mV]\n207 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.4 Analog Comparator Characteristics\nFigure 33-126. Analog Comparator Hysteresis vs. VCC\nHigh speed, small hysteresis\nFigure 33-127. Analog Comparator Hysteresis vs. VCC\nHigh speed, large hysteresis4567891011121314\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6-40°C25°C85°C\nVCC [V]VHYST  [mV]105°C\n14161820222426283032\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6-40°C25°C85°C\nVCC [V]VHYST  [mV]105°C\n208 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-128. Analog Comparator Hysteresis vs. VCC\nLow power, small hysteresis\nFigure 33-129. Analog Comparator Hysteresis vs. VCC\nLow power, large hysteresis1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\nVCC [V]VHYST [mV]\n12141618202224262830\n105 °C\n85 °C\n25°C\n-40°C\n32364044485256606468\n-40°C25°C85°C\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\nVCC [V]VHYST [mV]105°C\n209 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-130. Analog Comparator Current Source vs. Calibration Value\nT = 25\uf0b0C\nFigure 33-131. Analog Comparator Current Source vs. Calibration Value\nVCC = 3.0V3.6V\n3.0V\n2.2V\n1.8V\n22.753.54.2555.756.57.258\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\nCALIBA [3..0]ICURRENTSOURCE  [µA]\n105°C85 °C25 °C-40 °C\n3.03.43.84.24.65.05.45.86.26.67.0\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\nCALIBA [3..0]ICURRENTSOURCE  [µA]\n210 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-132. Voltage Scaler INL vs. SCALEFAC\nT = 25\uf0b0C, VCC = 3.0V\n33.2.5 Internal 1.0V reference Characteristics\nFigure 33-133. ADC Internal 1.0V Reference vs. Temperature25°C\n-0.150-0.125-0.100-0.075-0.050-0.02500.0250.050\n0 1 02 03 04 05 06 07 0\nSCALEFACINL [LSB]\n3.6V3.0V2.7V2.2V1.8V\n0.99680.99760.99840.999211.00081.00161.00241.00321.0041.00481.00561.00641.00721.0081.0088\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Bandgap Voltage [V]\n211 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.6 BOD Characteristics\nFigure 33-134. BOD Thresholds vs. Temperature\nBOD level = 1.6V\nFigure 33-135. BOD thresholds vs. Temperature\nBOD level = 3.0V1.5381.5421.5461.551.5541.5581.5621.5661.571.574\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105Rising Vcc\nFalling Vcc\nTemperature [°C]VBOT [V]\n2.922.9282.9362.9442.9522.962.9682.9762.9842.992\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105Rising Vcc\nFalling Vcc\nTemperature [°C]VBOT [V]\n212 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.7 External Reset Characteristics\nFigure 33-136. Minimum Reset Pin Pulse Width vs. VCC\nFigure 33-137. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 1.8V105°C\n85°C\n25°C\n-40°C\n80859095100105110115120125130135140145\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6VCC [V]TRST [ns]\n105°C85°C25°C-40°C\n08162432404856647280\n0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8VRESET [V]IRESET  [µA]\n213 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-138. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 3.0V\nFigure 33-139. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 3.3V0153045607590105120135\n0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3105°C85°C25°C-40°C\nVRESET [V]IRESET  [µA]\n0153045607590105120135150\n0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3 3.3105°C85°C25°C-40°C\nVRESET [V]IRESET  [µA]\n214 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-140. Reset Pin Input Threshold Voltage vs. VCC\nVIH - Reset pin read as “1”\nFigure 33-141. Reset Pin Input Threshold Voltage vs. VCC\nVIL - Reset pin read as “0”105°C85°C25°C-40°C\n1.001.101.201.301.401.501.601.701.801.902.002.10\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Vthreshold [V]\nVCC[V]\n0.40.50.60.70.80.911.11.21.31.41.51.61.7\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6105 °C85 °C25 °C-40 °C\nVCC [V]Vthreshold [V]\n215 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.8 Power-on Reset Characteristics\nFigure 33-142. Power-on Reset Current Consumption vs. VCC\nBOD level = 3.0V, enabled in continuous mode\nFigure 33-143. Power-on Reset Current Consumption vs. VCC\nBOD level = 3.0V, enabled in sampled mode105°C85°C25°C-40°C\n0100200300400500600700\n0 . 40 . 71 . 01 . 31 . 61 . 92 . 22 . 52 . 8ICC[µA]\nVCC[V]\n105°C85°C25°C-40°C\n065130195260325390455520585650\n0.4 0.7 1 1.3 1.6 1.9 2.2 2.5 2.8ICC[µA]\nVCC[V]\n216 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.9 Oscillator Characteristics\n33.2.9.1 Ultra Low-Power Internal Oscillator\nFigure 33-144. Ultra Low-Po wer Internal Oscillator Frequency vs. Temperature\n33.2.9.2 32.768kHz Internal Oscillator\nFigure 33-145. 32.768kHz Internal O scillator Frequency vs. Temperature3.6V\n3.3V\n3.0V\n2.7V\n2.0V\n1.8V30.931.231.531.832.132.432.733.033.333.633.934.234.534.835.135.4\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [kHz]\n3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n32.332.3532.432.4532.532.5532.632.6532.732.7532.832.8532.9\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [kHz]\n217 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-146. 32.768kHz Internal Oscillator Frequency vs. Calibration Value\nVCC= 3.0V, T = 25°C\n33.2.9.3 2MHz Internal Oscillator\nFigure 33-147. 2MHz Internal Osci llator Frequency vs. Temperature\nDFLL disabled3.0V\n1519232731353943475155\n0 16 32 48 64 80 96 112 128 144 160 176 192 208 224 240 256RC32KCAL [7..0]Frequency [kHz]\n3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n1.941.961.982.002.022.042.062.082.102.122.142.16\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5\nTemperature [°C]Frequency [MHz]\n218 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-148. 2MHz Internal Oscillator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator \nFigure 33-149. 2MHz Internal Oscillator CALA Calibration Step Size\nVCC= 3V3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n1.9681.9721.9761.981.9841.9881.9921.9962.002.0042.0082.012\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [MHz]\n105°C85°C25°C-40°C\n0.120.130.140.150.160.170.180.190.200.210.220.230.240.250.260.270.280.29\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0CALAStep Size [%]\n219 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.9.4 32MHz Internal Oscillator\nFigure 33-150. 32MHz Internal Osc illator Frequency vs. Temperature\nDFLL disabled\nFigure 33-151. 32MHz Internal Osc illator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V31.531.9532.432.8533.333.7534.234.6535.135.553636.45\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [MHz]\n3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n31.531.5531.631.6531.731.7531.831.8531.931.953232.0532.132.15\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [MHz]\n220 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-152. 32MHz Internal Oscillator CALA Calibration Step Size\nVCC= 3.0V\n33.2.9.5 32MHz Internal Osci llator Calibrated to 48MHz\nFigure 33-153. 48MHz Internal Osc illator Frequency vs. Temperature\nDFLL disabled105°C\n85°C\n25°C-40°C\n0.120.140.160.180.200.220.240.260.280.300.320.34\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0\nCALAStep Size [%]\n3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n46.246.947.648.349.049.750.451.151.852.553.253.954.655.3\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5 Temperature [°C]Frequency [MHz]\n221 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-154. 48MHz Internal Osc illator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator\nFigure 33-155. 48MHz Internal Oscillator CALA Calibration Step Size\nVCC= 3.0V3.6V\n3.3V\n3.0V\n2.7V\n2.2V\n1.8V\n31.531.5531.631.6531.731.7531.831.8531.931.953232.0532.132.15\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105\nTemperature [°C]Frequency [MHz]\n105°C\n85°C25°C-40°C\n0.090.110.130.150.170.190.210.230.250.270.29\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0CALAStep Size [%]\n222 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.10 Two-Wire Interface Characteristics\nFigure 33-156. SDA Hold Time vs. Temperature\nFigure 33-157. SDA Hold Time vs. Supply Voltage3\n2\n1\n050100150200250300350400450500Hold time [ns]\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85\nTemperature [°C]\n3\n2\n1\n050100150200250300350400450500\nVCC [V]Hold time [ns]\n2.6 2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6\n223 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.2.11 PDI Characteristics\nFigure 33-158. Maximum PDI Frequency vs. VCC\n105 °C85 °C25 °C-40 °C\n10111213141516171819202122\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]Frequency max [MHz]\n224 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3 ATxmega64D4\n33.3.1 Current Consumption\n33.3.1.1 Active Mode Supply Current\nFigure 33-159. Active Supply Current vs. Frequency\nfSYS= 0 - 1MHz external clock, T = 25°C\nFigure 33-160. Active Supply Current vs. Frequency\nfSYS= 1 - 32MHz external clock, T = 25°C3.6V\n3.0V\n2.7V\n2.2V\n1.8V\n1.6V\n0100200300400500600700\n0 0 . 10 . 20 . 30 . 40 . 50 . 60 . 70 . 80 . 9 1ICC[µA]\nFrequency [MHz]\n3.6V\n3.0V\n2.7V\n1.8V\n1.6V\n024681012\n0 4 8 1 21 62 02 42 83 2ICC[mA]\nFrequency [MHz]2.2V\n225 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-161. Active Mode Supply Current vs. VCC\nfSYS= 32.768kHz internal oscillator\nFigure 33-162. Active Mode Supply Current vs. VCC\nfSYS= 1MHz external clock105°C85°C25°C- 40°C\n507090110130150170190210230250\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\n105°C85°C25°C- 40°C\n180230280330380430480530580630680\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\n226 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-163. Active Mode Supply Current vs. VCC\nfSYS= 2MHz internal oscillator\nFigure 33-164. Active Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator prescaled to 8MHz105°C85°C25°C- 40°C\n4005006007008009001000110012001300\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\n105°C85°C25°C- 40°C\n1.21.62.02.42.83.23.64.04.44.8\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[mA]\nVCC[V]\n227 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-165. Active Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator\n33.3.1.2 Idle Mode Supply Current\nFigure 33-166. Idle Mode Supply Current vs. Frequency\nfSYS= 0 - 1MHz external clock, T = 25°C105°C85°C25°C- 40°C\n7.07.58.08.59.09.510.010.511.011.512.0\n2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6ICC[mA]\nVCC[V]\n3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V\n0153045607590105120135150\n0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1ICC[µA]\nFrequency [MHz]\n228 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-167. Idle Mode Supply Current vs. Frequency\nfSYS= 1 - 32MHz external clock, T = 25°C\nFigure 33-168. Idle Mode Supply Current vs. VCC\nfSYS= 32.768kHz internal oscillator3.6 V\n3.0 V\n2.7 V\n1.8 V\n1.6 V\n0.00.51.01.52.02.53.03.54.04.5\n0 4 8 1 21 62 02 42 83 2ICC[mA]\nF[ M H ]2.2 V\n105°C\n85°C\n25°C- 40°C\n28.0028.7529.5030.2531.0031.7532.5033.2534.0034.75\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\n229 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-169. Idle Mode Supply Current vs. VCC\nfSYS= 1MHz external clock\nFigure 33-170. Idle Mode Supply Current vs. VCC\nfSYS= 2MHz internal oscillator105°C\n85°C\n25°C\n- 40°C\n4557698193105117129141153\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\n105°C85°C25°C- 40°C\n150175200225250275300325350375400\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\n230 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-171. Idle Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator prescaled to 8MHz\nFigure 33-172. Idle Mode Current vs. VCC\nfSYS= 32MHz internal oscillator105°C85°C25°C- 40°C\n650800950110012501400155017001850\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\n105°C85°C25°C- 40°C\n3.13.33.53.73.94.14.34.54.74.95.1\n2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6ICC[mA]\nVCC[V]\n231 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3.1.3 Power-down Mode Supply Current\nFigure 33-173. Power-down Mode Supply Current vs. Temperature\nAll functions disabled\nFigure 33-174. Power-down Mode Supply Current vs. VCC\nAll functions disabled3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V\n0.00.30.60.91.21.51.82.12.42.7\n-45 -30 -15 0 15 30 45 60 75 90 105ICC[µA]\nTemperature [°C]\n105°C\n85°C\n25°C\n- 40°C 0.00.30.60.91.21.51.82.12.42.7\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\n232 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-175. Power-down Mode Supply Current vs. VCC\nWatchdog and sampled BOD enabled\n33.3.1.4 Power-save Mode Supply Current\nFigure 33-176. Power-save Mode Supply Current vs.VCC\nReal Time Counter enabled and running from 1.024kHz output of 32.768kHz TOSC105°C\n85°C\n25°C\n- 40°C\n1.101.401.702.002.302.602.903.203.503.804.10\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6ICC[µA]\nVCC[V]\nNormal mode\nLow-power mode\n00.10.20.30.40.50.60.70.80.9\nVCC [V]ICC [µA]\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\n233 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3.1.5 Standby Mode Supply Current\nFigure 33-177. Standby Supply Current vs. VCC\nStandby, fSYS=1 M H z\nFigure 33-178. Standby Supply Current vs. VCC\n25°C, running from different crystal oscillators105 °C\n85 °C\n25 °C-40 °C\n2.53.54.55.56.57.58.59.510.511.512.5\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6ICC[uA]\nVCC[V]\n16MHz\n12MHz\n8MHz\n2MHz\n0.454MHz\n160200240280320360400440480\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]ICC [µA]\n234 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3.2 I/O Pin Characteristics\n33.3.2.1 Pull-up\nFigure 33-179. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 1.8V\nFigure 33-180. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 3.0V105°C85°C25°C- 40°C\n010203040506070\n0.0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8IPIN[uA]\nVPIN[V]\n105°C85°C25°C- 40°C\n0153045607590105120\n0.0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3.0IPIN[µA]\nVPIN[V]\n235 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-181. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 3.3V\n33.3.2.2 Output Voltage vs. Sink/Source Current\nFigure 33-182. I/O Pin Output Voltage vs. Source Current\nVCC = 1.8V105°C85°C25°C- 40°C\n0153045607590105120135\n0.0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3.0 3.3IPIN[µA]\nVPIN[V]\n105°C 85°C25°C- 40°C\n0.50.70.91.11.31.51.71.9\n-9 -8 -7 -6 -5 -4 -3 -2 -1 0VPIN[V]\nIPIN[mA]\n236 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-183. I/O Pin Output Voltage vs. Source Current\nVCC = 3.0V\nFigure 33-184. I/O Pin Output Voltage vs. Source Current\nVCC = 3.3V105°C85°C 25°C- 40°C\n0.00.40.81.21.62.02.42.83.2\n-30 -27 -24 -21 -18 -15 -12 -9 -6 -3 0VPIN[V]\nIPIN[mA]\n105°C\n85°C25°C- 40°C\n0.00.40.81.21.62.02.42.83.23.6\n-30 -27 -24 -21 -18 -15 -12 -9 -6 -3 0VPIN[V]\nIPIN[mA]\n237 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-185. I/O Pin Output Voltage vs. Source Current\nFigure 33-186. I/O Pin Output Voltage vs. Sink Current\nVCC = 1.8V3.6 V\n3.3 V\n3.0 V\n2.7 V\n1.8 V\n1.6 V\n0.50.91.31.72.12.52.93.33.7\n-24 -21 -18 -15 -12 -9 -6 -3 0VPIN[V]\nIPIN[mA]\n- 40°C\n0.00.10.20.30.40.50.60.70.80.91.0\n02468 1 0 1 2 1 4 1 6 1 8 2 0VPIN[V]\nIPIN[mA]25°C85°C\n105°C\n238 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-187. I/O Pin Output Voltage vs. Sink Current\nVCC = 3.0V\nFigure 33-188. I/O Pin Output Voltage vs. Sink Current\nVCC = 3.3V105°C\n85°C\n25°C\n- 40°C\n0.00.10.20.30.40.50.60.70.80.91.0\n0 3 6 9 12 15 18 21 24 27 30VPIN[V]\nIPIN[mA]\n105°C85°C\n25°C\n- 40°C\n0.00.10.20.30.40.50.60.70.80.91.0\n0 3 6 9 12 15 18 21 24 27 30VPIN[V]\nIPIN[mA]\n239 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-189. I/O Pin Output Voltage vs. Sink Current\n33.3.2.3 Thresholds and Hysteresis\nFigure 33-190. I/O Pin Input Threshold Voltage vs. VCC\nT = 25°C3.6 V3.3 V3.0 V2.7 V\n0.000.150.300.450.600.750.901.051.201.351.50\n0 3 6 9 12 15 18 21 24 27 30VPIN[V]\nIPIN[mA]1.6 V 1.8 V\nVILVIH\n0.00.20.40.60.81.01.21.41.61.8\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Vcc [V]Vthreshold [V]\n240 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-191. I/O Pin Input Threshold Voltage vs. VCC\nVIH I/O pin read as “1”\nFigure 33-192. I/O Pin Input Threshold Voltage vs. VCC\nVIL I/O pin read as “0”105 °C85 °C25 °C-40 °C\n0.80.91.01.11.21.31.41.51.61.71.8\n1 . 61 . 82 . 02 . 22 . 42 . 62 . 83 . 03 . 23 . 43 . 6Vthreshold [V]\nVCC[V]\n105 °C85 °C25 °C-40 °C\n0.550.700.851.001.151.301.451.601.75\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Vthreshold [V]\nVCC[V]\n241 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-193. I/O Pin Input Hysteresis vs. VCC\n33.3.3 ADC Characteristics\nFigure 33-194. INL E rror vs. External VREF\nT = 25\uf0b0C, VCC = 3.6V, external reference105 °C85 °C25 °C-40 °C\n0.080.110.140.170.200.230.260.290.32\n1 . 61 . 82 . 02 . 22 . 42 . 62 . 83 . 03 . 23 . 43 . 6Vthreshold [V]\nVCC[V]\nSingle-ended unsigned mode\nSingle-ended signed modeDifferential mode\n0.00.30.60.91.21.51.82.12.42.7\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0INL [LSB]\nVref [V]\n242 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-195. INL E rror vs. Sample Rate\nT = 25\uf0b0C, VCC = 2.7V, VREF = 1.0V external\nFigure 33-196. INL E rror vs. Input Code Single-ended signed mode \nSingle-ended signed modeDifferential mode\n0.00.20.40.60.81.01.21.41.6\n500 650 800 950 1100 1250 1400 1550 1700 1850 2000INL [LSB]\nADC sample rate [kSps]\n0              512            1024          1536           2048          2560          3072           3584          40962.0\n1.51.00.50.0\n-0.5-1.0-1.5-2.0INL [LSB]\nADC input code\n243 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-197. DNL Error vs. External VREF\nT = 25\uf0b0C, VCC = 3.6V, external reference\nFigure 33-198. DNL Error vs. Sample rate\nT = 25\uf0b0C, VCC = 2.7V, VREF = 1.0V externalSingle-ended unsigned mode \nSingle-ended signed modeDifferential mode\n0.20.30.40.50.60.70.80.91.01.1\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0DNL [LSB]\nVref [V]\nSingle-ended unsigned mode \nSingle-ended signed modeDifferential mode\n0.230.260.280.310.330.360.380.410.43\n500 650 800 950 1100 1250 1400 1550 1700 1850 2000DNL [LSB]\nADC sample rate [kSps]\n244 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-199. DNL Error vs. Input Code \nFigure 33-200. Gain Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sampling speed = 500ksps\n0              512            1024          1536           2048          2560           3072           3584           40961.0\n0.80.60.40.20.0\n-0.2-0.4-0.6-0.8-1.0DNL [LSB]\nADC input code\nSingle-ended unsigned mode Single-ended signed mode\nDifferential mode\n024681012\n1 . 01 . 21 . 41 . 61 . 82 . 02 . 22 . 42 . 62 . 83 . 0Gain Error [mV]\nVref [V]\n245 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-201. Gain Error vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sampling speed = 500ksps\nFigure 33-202. Offset Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sampling speed = 500kspsSingle-ended unsigned mode Single-ended signed mode\nDifferential mode\n01234567\n1 . 61 . 82 . 02 . 22 . 42 . 62 . 83 . 03 . 23 . 43 . 6Gain Error [mV]\nVcc [V]\nDifferential mode\n-1.5-1.5-1.4-1.4-1.3-1.3-1.2-1.2-1.1-1.1-1.0\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0Offset Error [mV]\nVref [V]\n246 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-203. Gain Error vs. Temperature\nVCC = 2.7V, VREF = external 1.0V\nFigure 33-204. Offset Error vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sampling speed = 500kspsSingle-ended unsigned mode Single-ended signed mode\nDifferential mode\n012345678\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85 95 105Gain Error [mV]\nTemperature [oC]\nDifferential mode\n-1.1-1.0-0.9-0.8-0.7-0.6-0.5-0.4-0.3\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Offset Error [mV]\nVcc [V]\n247 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-205. Noise vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sampling speed = 500ksps\nFigure 33-206. Noise vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sampling speed = 500kspsSingle-ended unsigend mode Single-ended signed mode\nDifferential mode\n0.00.10.20.30.40.50.60.70.80.9\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0Noise [mV RMS]\nVref [V]\nSingle-ended unsigned mode Single-ended signed mode\nDifferential mode\n0.00.10.20.30.40.50.60.70.8\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Noise [mV RMS]\nVcc [V]\n248 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3.4 DAC Characteristics\nFigure 33-207. DAC INL Error vs. VREF\nVCC = 3.6V\nFigure 33-208. DNL Error vs. VREF\nVCC = 3.6V105°C85°C25°C- 40°C\n0.00.30.60.91.21.51.82.12.4\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0DACINL [LSB]\nVref [V]\n105°C85°C25°C- 40°C\n0.00.20.40.60.81.01.21.41.61.8\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0DAC DNL [LSB]\nVref [V]\n249 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-209. DAC No ise vs. Temperature\nVCC = 2.7V, VREF = 1.0V \n33.3.5 Analog Comparator Characteristics\nFigure 33-210. Analog Comparator Hysteresis vs. VCC\nHigh-speed, small hysteresis0.1600.1620.1640.1660.1680.1700.1720.1740.1760.178\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Noise[mV RMS]\nTemperature [oC]\n105°C\n85°C\n25°C\n- 40°C\n1516171819202122232425\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VHYST[mV]\nVCC[V]\n250 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-211. Analog Comparator Hysteresis vs. VCC\nLow power, small hysteresis\nFigure 33-212. Analog Comparator Hysteresis vs. VCC\nHigh-speed mode, large hysteresis105°C\n85°C\n25°C\n- 40°C\n202224262830323436\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VHYST[mV]\nVCC[V]\n105°C\n85°C\n25°C\n- 40°C\n2729313335373941434547\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6VHYST[mV]\nVCC[V]\n251 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-213. Analog Comparator Hysteresis vs. VCC\nLow power, large hysteresis\nFigure 33-214. Analog Comparator Current Source vs. Calibration Value\nTemperature = 25°C105°C\n85°C\n25°C\n- 40°C\n4649525558616467707376\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VHYST[mV]\nVCC[V]\n2345678\n0123456789 1 0 1 1 1 2 1 3 1 4 1 5ICURRENTSOURCE [µA]\nCURRCALIBA[3..0]3.6V\n3.0V2.7V2.2V1.8V1.6V\n252 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-215. Analog Comparator Current Source vs. Calibration Value\nVCC = 3.0V\nFigure 33-216. Voltage Scaler INL vs. SCALEFAC\nT = 25\uf0b0C, VCC = 3.0V105°C85°C25°C- 40°C\n3.64.04.44.85.25.66.06.46.87.2\n0 1 2 3 4 5 6 7 8 9 1 01 11 21 31 41 5ICURRENTSOURCE [uA]\nCURRCALIBA[3..0]\n-0.15-0.12-0.09-0.06-0.030.000.030.060.090.120.15\n0 8 16 24 32 40 48 56 64INL [LSB]\nSCALEFAC\n253 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3.6 Internal 1.0V Reference Characteristics\nFigure 33-217. ADC/DAC Internal 1.0V Reference vs. Temperature\n33.3.7 BOD Characteristics\nFigure 33-218. BOD Thresholds vs. Temperature\nBOD level = 1.6V3.6 V3.0 V2.7 V2.2 V1.8 V1.6 V\n0.9920.9940.9960.9981.0001.0021.004\n-45 -30 -15 0 15 30 45 60 75 90 105Bandgap Voltage [V]\nTemperature [°C]\nRising Vcc\nFalling Vcc\n1.6171.6201.6231.6261.6291.6321.6351.6381.6411.644\n-45 -30 -15 0 15 30 45 60 75 90 105VBOT[V]\nTemperature [°C]\n254 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-219. BOD Thresholds vs. Temperature\nBOD level = 3.0V\n33.3.8 External Reset Characteristics\nFigure 33-220. Minimum Reset Pin Pulse Width vs. VCCRising Vcc\nFalling Vcc\n3.003.013.023.033.043.053.063.073.08\n-45 -30 -15 0 15 30 45 60 75 90 105VBOT[V]\nTemperature [°C]\n105°C\n85°C\n25°C\n- 40°C859095100105110115120125130135\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6tRST[ns]\nVCC[V]\n255 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-221. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 1.8V\nFigure 33-222. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 3.0V105°C85°C25°C- 40°C\n01020304050607080\n0.0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8IRESET [µA]\nVRESET [V]\n105°C85°C25°C- 40°C\n0153045607590105120\n0.0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3.0IRESET [µA]\nVRESET [V]\n256 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-223. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 3.3V\nFigure 33-224. Reset Pin Input Threshold Voltage vs. VCC\nVIH - Reset pin read as “1”105°C85°C25°C- 40°C\n0153045607590105120135150\n0.0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3.0 3.3IRESET [µA]\nVRESET [V]\n105°C85°C25°C\n-- 40°C\n1.01.21.31.51.61.81.92.12.2\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VTHRESHOLD [V]\nVCC[V]\n257 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-225. Reset Pin Input Threshold Voltage vs. VCC\nVIL - Reset pin read as “0”\n33.3.9 Power-on Reset Characteristics\nFigure 33-226. Power-on Reset Current Consumption vs. VCC\nBOD level = 3.0V, enabled in continuous mode105°C85°C25°C- 40°C\n0.400.550.700.851.001.151.301.451.601.75\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VTHRESHOLD [V]\nVCC [V]\n105°C\n85°C\n25°C\n- 40°C\n050100150200250300\n0.4 0.7 1.0 1.3 1.6 1.9 2.2 2.5 2.8ICC [µA]\nVCC [V]\n258 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-227. Power-on Reset Current Consumption vs. VCC\nBOD level = 3.0V, enabled in sampled mode\n33.3.10 Oscillator Characteristics\n33.3.10.1 Ultra Low-Power Internal Oscillator\nFigure 33-228. Ultra Low-Po wer Internal Oscillator Frequency vs. Temperature105°C\n85°C\n25°C\n- 40°C\n050100150200250300\n0.4 0.7 1.0 1.3 1.6 1.9 2.2 2.5 2.8ICC [µA]\nVCC [V]\n3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V31.031.331.631.932.232.532.833.133.433.734.0\n-45 -30 -15 0 15 30 45 60 75 90 105Frequency [kHz]\nTemperature [°C]\n259 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3.10.2 32.768kHz Internal Oscillator\nFigure 33-229. 32.768kHz Internal Oscillator Frequency vs. Temperature\nFigure 33-230. 32.768kHz Internal Osci llator Frequency vs. Calibration Value\nVCC= 3.0V, T = 25°C3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V\n32.5532.5832.6132.6432.6732.7032.7332.7632.7932.8232.85\n-45 -30 -15 0 15 30 45 60 75 90 105Frequency [kHz]\nTemperature [°C]\n2326293235384144475053\n0 30 60 90 120 150 180 210 240 270Frequency [kHz]\nRC32KCAL[7..0]\n260 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3.10.3 2MHz Internal Oscillator \nFigure 33-231. 2MHz Internal Oscillator Frequency vs. Temperature\nDFLL disabled\nFigure 33-232. 2MHz Internal Oscillator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator 3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V\n1.941.961.982.002.022.042.062.082.102.12\n-45 -30 -15 0 15 30 45 60 75 90 105Frequency [MHz]\nTemperature [°C]\n3.6 V\n3.0 V\n2.7 V2.2 V1.8 V\n1.6 V\n1.9881.9901.9921.9941.9961.9982.0002.0022.0042.0062.0082.010\n-45 -30 -15 0 15 30 45 60 75 90 105Frequency [MHz]\nTemperature [°C]\n261 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-233. 2MHz Internal Oscillator CALA Calibration Step Size\nVCC= 3V\n33.3.10.4 32MHz Internal Oscillator\nFigure 33-234. 32MHz Internal Oscillator Frequency vs. Temperature\nDFLL disabled105°C\n85°C25°C- 40°C\n0.12 %0.14 %0.16 %0.18 %0.20 %0.22 %0.24 %0.26 %0.28 %\n0 1 63 24 86 48 09 6 1 1 2 1 2 8Frequency Step size [%]\nCALA\n3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V31.031.532.032.533.033.534.034.535.035.5\n-45 -30 -15 0 15 30 45 60 75 90 105Frequency [MHz]\nTemperature [°C]\n262 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-235. 32MHz Internal Oscillator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator\nFigure 33-236. 32MHz Internal Osci llator CALA Calibration Step Size\nVCC= 3.0V3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V1.6 V\n31.8031.8431.8831.9231.9632.0032.0432.0832.12\n-45 -30 -15 0 15 30 45 60 75 90 105Frequency [MHz]\nTemperature [°C]\n105°C85°C\n25°C- 40°C\n0.10 %0.13 %0.16 %0.19 %0.22 %0.25 %0.28 %0.31 %0.34 %\n0 15 30 45 60 75 90 105 120 135Frequency Step size[%] \nCALA\n263 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-237. 32MHz Internal Osci llator CALB Calibration Step Size\nVCC = 3.0V\n33.3.10.5 32MHz Internal Oscillator Calibrated to 48MHz\nFigure 33-238. 48MHz Internal Oscillator Frequency vs. Temperature\nDFLL disabled105°C85°C25°C- 40°C\n0.80 %1.00 %1.20 %1.40 %1.60 %1.80 %2.00 %2.20 %2.40 %2.60 %2.80 %\n0 8 16 24 32 40 48 56 64Frequency Step size [%]\nCALB\n3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V46.247.047.848.649.450.251.051.852.653.4\n-45 -30 -15 0 15 30 45 60 75 90 105Frequency[MHz]\nTemperature [°C]\n264 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-239. 48MHz Internal Oscillator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator\nFigure 33-240. 48MHz Internal Osci llator CALA Calibration Step Size\nVCC = 3.0V3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V\n47.7047.7547.8047.8547.9047.9548.0048.0548.1048.15\n-45 -30 -15 0 15 30 45 60 75 90 105Frequency[MHz]\nTemperature [°C]\n105°C\n85°C25°C- 40°C\n0.10 %0.12 %0.14 %0.16 %0.18 %0.20 %0.22 %0.24 %0.26 %0.28 %0.30 %\n0 16 32 48 64 80 96 112 128Frequency Step size [%]\nCALA\n265 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.3.11 Two-Wire Interface Characteristics\nFigure 33-241. SDA Hold Time vs. Supply Voltage\n33.3.12 PDI Characteristics\nFigure 33-242. Maximum PDI Frequency vs. VCC105°C\n85°C\n25°C\n-4 0 ° C\n260265270275280285290295300\n2.6 2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6Holdtime [ns]\nVcc [V]\n105°C85°C\n25°C-\n- 40°C\n1012141618202224262830\n1 . 61 . 82 . 02 . 22 . 42 . 62 . 83 . 03 . 23 . 43 . 6Maximum Frequency [MHz]\nVCC [V]\n266 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4 ATxmega128D4\n33.4.1 Current Consumption\n33.4.1.1 Active Mode Supply Current\nFigure 33-243. Active Supply Current vs. Frequency\nfSYS= 0 - 1MHz external clock, T = 25°C\nFigure 33-244. Active Supply Current vs. Frequency\nfSYS= 1 - 32MHz external clock, T = 25°C3.6V\n3.0V\n2.7V\n2.2V\n1.8V\n1.6V\n0100200300400500600700800\n0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1\nFrequency [MHz]Icc [µA]\n3.6V\n3.0V\n2.7V\n01.53.04.56.07.59.010.512.013.5\n0 4 8 1 21 62 02 42 83 2Frequency [MHz]Icc [mA]\n2.2V\n1.8V\n267 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-245. Active Mode Supply Current vs. VCC\nfSYS= 32.768kHz internal oscillator\nFigure 33-246. Active Mode Supply Current vs. VCC\nfSYS= 1MHz external clock105 °C85 °C25 °C- 40 °C\n0306090120150180210240270\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6IccVcc [uA]\nVCC [V]\n105 °C85 °C25 °C-40 °C\n0100200300400500600700800\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Icc [uA]\nVcc [V]\n268 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-247. Active Mode Supply Current vs. VCC\nfSYS= 2MHz internal oscillator\nFigure 33-248. Active Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator prescaled to 8MHz105 °C85 °C25 °C-40 °C\n0175350525700875105012251400\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Icc [uA]\nVcc [V]\n105 °C85 °C25 °C-40 °C\n100016002200280034004000460052005800\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Icc [uA]\nVCC [V]\n269 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-249. Active Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator\n33.4.1.2 Idle Mode Supply Current\nFigure 33-250. Idle Mode Supply Current vs. Frequency\nfSYS= 0 - 1MHz external clock, T = 25°C105 °C85 °C25 °C-40 °C\n7.07.88.69.410.211.011.812.613.4\n2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6Icc [mA]\nVCC [V]\n3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V\n020406080100120140160\n0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1Frequency [MHz]Icc [µA]\n270 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-251. Idle Mode Supply Current vs. Frequency\nfSYS= 1 - 32MHz external clock, T = 25°C\nFigure 33-252. Idle Mode Supply Current vs. VCC\nfSYS= 32.768kHz internal oscillator3.6V\n3.0V\n2.7V\n00.61.21.82.43.03.64.24.85.4\n0 4 8 1 21 62 02 42 83 2Frenquecy [MHz]Icc [mA]\n2.2V\n1.8V\n105 °C\n85 °C\n25 °C-40 °C\n272829303132333435363738\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Icc [uA]\nVcc [V]\n271 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-253. Idle Mode Supply Current vs. VCC\nfSYS= 1MHz external clock\nFigure 33-254. Idle Mode Supply Current vs. VCC\nfSYS= 2MHz internal oscillator105 °C\n85 °C\n25 °C\n-40 °C\n5060708090100110120130140150160\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Icc[uA]\nVCC [V]\n105 °C\n85 °C\n25 °C\n-40 °C\n90110130150170190210230250270290310330\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Icc [uA]\nVcc [V]\n272 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-255. Idle Mode Supply Current vs. VCC\nfSYS= 32MHz internal oscillator prescaled to 8MHz\nFigure 33-256. Idle Mode Current vs. VCC\nfSYS= 32MHz internal oscillator105 °C85 °C25 °C-40 °C\n600800100012001400160018002000\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Icc [uA]\nVcc [V]\n105 °C85 °C25 °C-40 °C\n300032503500375040004250450047505000\n2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6Icc [uA]\nVcc [V]\n273 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.1.3 Power-down Mode Supply Current\nFigure 33-257. Power-down Mode Supply Current vs. Temperature\nAll functions disabled\nFigure 33-258. Power-down Mode Supply Current vs. VCC\nAll functions disabled3.6 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.6 V\n0.00.51.01.52.02.53.03.54.04.55.0\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Icc [uA]\nTemperature [°C]\n105 °C\n85 °C\n25 °C\n-40 °C 0.00.51.01.52.02.53.03.54.04.55.0\n1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Icc [uA]\nVcc [V]\n274 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-259. Power-down Mode Supply Current vs. VCC\nWatchdog and sampled BOD enabled\n33.4.1.4 Power-save Mode Supply Current\nFigure 33-260. Power-save Mode Supply Current vs.VCC\nReal Time Counter enabled and running from 1.024kHz output of 32.768kHz TOSC105 °C\n85 °C\n25 °C\n-40 °C0.81.31.82.32.83.33.84.34.85.35.86.36.87.3\n1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Icc [uA]\nVcc [V]\nNormal mode\nLow-power mode\n00.10.20.30.40.50.60.70.80.9\nVCC [V]ICC [µA]\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6\n275 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.1.5 Standby Mode Supply Current\nFigure 33-261. Standby Supply Current vs. VCC\nStandby, fSYS=1 M H z\nFigure 33-262. Standby Supply Current vs. VCC\nT = 25°C, running from different crystal oscillators105 °C\n85 °C\n25 °C-40 °C\n2.53.54.55.56.57.58.59.510.511.512.5\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6ICC[uA]\nVCC[V]\n16MHz\n12MHz\n8MHz\n2MHz\n0.454MHz\n160200240280320360400440480\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]ICC [µA]\n276 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.2 I/O Pin Characteristics\n33.4.2.1 Pull-up\nFigure 33-263. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 1.8V\nFigure 33-264. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 3.0V105 °C85 °C25 °C-40 °C\n081624324048566472\n0.1 0.3 0.5 0.7 0.9 1.1 1.3 1.5 1.7I [uA]\nVpin [V]\n105 °C85 °C25 °C-40 °C\n0153045607590105120\n0.1 0.4 0.7 1.0 1.3 1.6 1.9 2.2 2.5 2.8 3.1I [uA]\nVpin [V]\n277 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-265. I/O Pin Pull-up R esistor Current vs. Input Voltage\nVCC = 3.3V\n33.4.2.2 Output Voltage vs. Sink/Source Current\nFigure 33-266. I/O Pin Output Voltage vs. Source Current\nVCC = 1.8V105 °C85 °C25 °C-40 °C\n0153045607590105120135\n0.1 0.4 0.7 1.0 1.3 1.6 1.9 2.2 2.5 2.8 3.1 3.4I [uA]\nVpin [V]\n105 °C 85 °C 25 °C -40 °C\n0.50.60.70.80.91.01.11.21.31.41.51.61.71.81.9\n- 1 0 - 9- 8- 7- 6- 5- 4- 3- 2- 1 0Vpin [V]\nIpin [mA]\n278 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-267. I/O Pin Output Voltage vs. Source Current\nVCC = 3.0V\nFigure 33-268. I/O Pin Output Voltage vs. Source Current\nVCC = 3.3V105 °C 85 °C 25 °C -40 °C\n0.500.851.201.551.902.252.602.953.30\n-30 -27 -24 -21 -18 -15 -12 -9 -6 -3 0Vpin [V]\nIpin [mA]\n105 °C 85 °C25 °C-40 °C\n0.50.81.11.41.72.02.32.62.93.23.5\n-30 -27 -24 -21 -18 -15 -12 -9 -6 -3 0Vpin [V]\nIpin [mA]\n279 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-269. I/O Pin Output Voltage vs. Source Current\nFigure 33-270. I/O Pin Output Voltage vs. Sink Current\nVCC = 1.8V3.6 V\n3.3 V\n3.0 V\n2.7 V\n1.8 V\n1.6 V\n0.500.851.201.551.902.252.602.953.303.65\n-24 -21 -18 -15 -12 -9 -6 -3 0Vpin [V]\nIpin [mA]\n0.00.10.20.30.40.50.60.70.80.91.0\n0 2 4 6 8 1 01 21 41 61 82 0Vpin [V]\nIpin [mA]-40 °C25 °C105 °C 85 °C\n280 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-271. I/O Pin Output Voltage vs. Sink Current\nVCC = 3.0V\nFigure 33-272. I/O Pin Output Voltage vs. Sink Current\nVCC = 3.3V0.00.10.20.30.40.50.60.70.80.91.01.1\n0369 1 2 1 5 1 8 2 1 2 4 2 7 3 0Vpin [V]\nIpin [mA]-40 °C25 °C85 °C 105 °C\n0.00.10.20.30.40.50.60.70.80.91.0\n0369 1 2 1 5 1 8 2 1 2 4 2 7 3 0Vpin [V]\nIpin [mA]-40 °C25 °C85 °C105 °C\n281 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-273. I/O Pin Output Voltage vs. Sink Current\n33.4.2.3 Thresholds and Hysteresis\nFigure 33-274. I/O Pin Input Threshold Voltage vs. VCC\nT = 25°C3.6 V3.3 V3.0 V2.7 V\n0.000.150.300.450.600.750.901.051.201.351.50\n0369 1 2 1 5 1 8 2 1 2 4 2 7 3 0Vpin [V]\nIpin [mA]1.6 V1.8 V\nVILVIH\n0.00.20.40.60.81.01.21.41.61.8\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6Vcc [V]Vthreshold [V]\n282 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-275. I/O Pin Input Threshold Voltage vs. VCC\nVIH I/O pin read as “1”\nFigure 33-276. I/O Pin Input Threshold Voltage vs. VCC\nVIL I/O pin read as “0”0.80.91.01.11.21.31.41.51.61.71.8\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Vthreshold [V]\nVcc [V]105 °C\n85 °C\n25 °C\n-40 °C\n0.400.550.700.851.001.151.301.451.601.75\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Vthreshold [V]\nVcc [V]105 °C85 °C\n-40 °C25 °C\n283 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-277. I/O Pin Input Hysteresis vs. VCC\n33.4.3 ADC Characteristics\nFigure 33-278. INL E rror vs. External VREF\nT = 25\uf0b0C, VCC = 3.6V, external reference0.170.190.210.230.250.270.290.310.330.350.370.390.41\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Vthreshold [V]\nVcc [V]25 °C\n85 °C\n105 °C-40 °C\nSingle-ended Unsigned\nSingle-ended SignedDifferential Signed\n0.70.80.911.11.21.31.41.51.61.71.8\n1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3\nV      [V]INL [LSB]\nREF\n284 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-279. INL Error vs. Sample rate\nT = 25\uf0b0C, VCC = 3.6V, VREF = 3.0V external\nFigure 33-280. INL E rror vs. Input code Single-ended Unsigned\nSingle-ended SignedDifferential Mode\n0.90.9511.051.11.151.21.251.31.351.4\n500 650 800 950 1100 1250 1400 1550 1700 1850 2000\nADC Sample Rate [kSPS]INL [LSB]\n-2.0-1.5-1.0-0.500.51.01.52.0\n0 512 1024 1536 2048 2560 3072 3584 4096\nADC input codeINL [LSB]\n285 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-281. DNL Error vs. External VREF\nT = 25\uf0b0C, VCC = 3.6V, external reference\nFigure 33-282. DNL Error vs. Sample Rate\nT = 25\uf0b0C, VCC = 3.6V, VREF = 3.0V externalSingle-ended UnsignedSingle-ended SignedDifferential Mode\n0.720.740.760.780.80.820.840.860.880.9\n1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3DNL [LSB]\nV      [V]REF\nSingle-ended UnsignedSingle-ended SignedDifferential Signed\n0.790.80.810.820.830.840.850.860.870.880.890.9\n500 650 800 950 1100 1250 1400 1550 1700 1850 2000\nADC Sample Rate  [kSPS]DNL [LSB]\n286 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-283. DNL Error vs. Input Code \nFigure 33-284. Gain Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sampling speed = 500ksps-0.6-0.4-0.200.20.40.60.8\n0 512 1024 1536 2048 2560 3072 3584 4096\nADC Input CodeDNL [LSB]\nSingle-ended UnsignedSingle-ended Signed\nDifferential Mode\n-4-3-2-10123\n1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3\nVGain Error [mV]\nREF [V]\n287 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-285. Gain Error vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sampling speed = 500ksps\nFigure 33-286. Offset Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sampling speed = 500kspsSingle-ended UnsignedSingle-ended Signed\nDifferential Mode\n-0.5-0.20.10.40.711.31.61.92.2\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]Gain Error [mV]\nDifferential Mode\n-2-1.9-1.8-1.7-1.6-1.5-1.4-1.3-1.2-1.1-1\n1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3Offset Error [mV]\nVREF [V]\n288 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-287. Gain Error vs. Temperature\nVCC = 3.0V, VREF = external 2.0V\nFigure 33-288. Offset Error vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sampling speed = 500kspsSingle-ended UnsignedSingle-ended Signed\nDifferential Signed\n-4-3-2-10123\n-45 -35 -25 -15 -5 5 15 25 35 45 55 65 75 85\nTemperature [ºC]Gain Error [mV]\nDifferential Signed\n-1.2-1.1-1-0.9-0.8-0.7-0.6-0.5-0.4-0.3\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]Offset Error [mV]\n289 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-289. Noise vs. VREF\nT = 25\uf0b0C, VCC = 3.6V, ADC sampling speed = 500ksps\nFigure 33-290. Noise vs. VCC\nT = 25\uf0b0C, VREF = external 1.0V, ADC sampling speed = 500kspsSingle-ended UnsignedSingle-ended Signed\nDifferential Signed\n0.40.550.70.8511.151.3\n1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3\nVREF [V]Noise [mV RMS]\nSingle-ended UnsignedSingle-ended Signed\nDifferential Signed\n0.30.40.50.60.70.80.911.11.21.3\n1.6 1.8 2 2.2 2.4 2.6 2.8 3 3.2 3.4 3.6\nVCC [V]Noise [mV RMS]\n290 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.4 DAC Characteristics\nFigure 33-291. DAC INL Error vs. VREF\nVCC = 3.6V\nFigure 33-292. DNL Error vs. VREF\nT = 25\uf0b0C, VCC = 3.6V25°C\n1.11.21.31.41.51.61.71.81.9\nVREF [V]INL [LSB]\n1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0\n25ºC\n0.60.650.70.750.80.850.9\n1.6 1.8 2 2.2 2.4 2.6 2.8 3DNL [LSB]\nV      [V]REF\n291 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-293. DAC No ise vs. Temperature\nVCC = 3.0V, VREF = 2.4V \n33.4.5 Analog Comparator Characteristics\nFigure 33-294. Analog Comparator Hysteresis vs. VCC\nHigh-speed, small hysteresis0.1500.1550.1600.1650.1700.1750.1800.185\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Noise [mV RMS]\nTemperature [ºC]\n-40°25°C85°C105°\n4567891011121314\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VHYST[mV]\nVCC[V]C\n292 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-295. Analog Comparator Hysteresis vs. VCC\nLow power, small hysteresis\nFigure 33-296. Analog Comparator Hysteresis vs. VCC\nHigh-speed mode, large hysteresis-40°C25°C85°C105°C\n12141618202224262830\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VHYST[mV]\nVCC[V]\n-40°C25°C85°C105°C\n14161820222426283032\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VHYST[mV]\nVCC[V]\n293 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-297. Analog Comparator Hysteresis vs. VCC\nLow power, large hysteresis\nFigure 33-298. Analog Comparator Current Source vs. Calibration Value\nTemperature = 25°C-40°C25°C85°C105°C\n32364044485256606468\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VHYST[mV]\nVCC[V]\n3.6V\n3.0V\n2.2V\n1.8V\n22.533.544.555.566.577.58\n0123456789 1 0 1 1 1 2 1 3 1 4 1 5\nCURRCALIBA[3..0]ICURRENTSOURCE  [µA]\n294 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-299. Analog Comparator Current Source vs. Calibration Value\nVCC = 3.0V\nFigure 33-300. Voltage Scaler INL vs. SCALEFAC\nT = 25\uf0b0C, VCC = 3.0V85°C25°C-40°C\n33.544.555.566.57\n0123456789 1 0 1 1 1 2 1 3 1 4 1 5\nCURRCALIBA[3..0]ICURRENTSOURCE  [µA]\n25°C\n-0.150-0.125-0.100-0.075-0.050-0.02500.0250.050\n0 1 02 03 04 05 06 07 0\nSCALEFACINL [LSB]\n295 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.6 Internal 1.0V Reference Characteristics\nFigure 33-301. ADC/DAC Internal 1.0V Reference vs. Temperature\n33.4.7 BOD Characteristics\nFigure 33-302. BOD Thresholds vs. Temperature\nBOD level = 1.6V3.6V3.0V2.7V1.8V1.6V\n0.99880.99920.99961.00001.00041.00081.00121.00161.00201.0024\n- 4 0 - 3 0 - 2 0 - 1 00 1 02 03 04 05 06 07 08 09 0 1 0 0Bandgap Voltage [V]\nTemperature [°C]\nRising Vcc\nFalling Vcc\n1.5721.5751.5781.5811.5841.5871.5901.5931.596\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Vbot [V]\nTemperature [°C]\n296 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-303. BOD Thresholds vs. Temperature\nBOD level = 3.0V\n33.4.8 External Reset Characteristics\nFigure 33-304. Minimum Reset Pin Pulse Width vs. VCCRising Vcc\nFalling Vcc\n2.942.952.962.972.982.993.003.013.023.03\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Vbot [V]\nTemperature [°C]\n105 °C\n85 °C\n25 °C\n-40 °C\n80859095100105110115120125130135\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Trst [ns]\nVcc [V]\n297 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-305. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 1.8V\nFigure 33-306. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 3.0V105 °C85 °C25 °C-40 °C\n08162432404856647280\n0.0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8Ireset [uA]\nVreset [V]\n105 °C85 °C25 °C-40 °C\n0153045607590105120135\n0.0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3.0Ireset [uA]\nVreset [V]\n298 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-307. Reset Pin Pull-up Resi stor Current vs. Reset Pin Voltage\nVCC = 3.3V\nFigure 33-308. Reset Pin Input Threshold Voltage vs. VCC\nVIH - Reset pin read as “1”105 °C85 °C25 °C-40 °C\n0153045607590105120135150\n0.0 0.3 0.6 0.9 1.2 1.5 1.8 2.1 2.4 2.7 3.0 3.3Ireset [uA]\nVreset [V]\n105 °C85 °C25 °C-40 °C\n1.001.151.301.451.601.751.902.052.20\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6Vthreshold [V]\nVCC[V]\n299 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-309. Reset Pin Input Threshold Voltage vs. VCC\nVIL - Reset pin read as “0”\n33.4.9 Power-on Reset Characteristics\nFigure 33-310. Power-on Reset Current Consumption vs. VCC\nBOD level = 3.0V, enabled in continuous mode105 °C\n85 °C\n25 °C\n-40 °C\n0.00.20.40.60.81.01.21.41.61.8\n1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6VTHRESHOLD [V]\nVCC [V]\n105 °C85 °C25 °C-40 °C\n0100200300400500600700\n0.4 0.7 1.0 1.3 1.6 1.9 2.2 2.5 2.8ICC[µA]\nVCC[V]\n300 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-311. Power-on Reset Current Consumption vs. VCC\nBOD level = 3.0V, enabled in sampled mode\n33.4.10 Oscillator Characteristics\n33.4.10.1 Ultra Low-Power Internal Oscillator\nFigure 33-312. Ultra Low-Po wer Internal Oscillator Frequency vs. Temperature105 °°C85 °°C25 °C-40 °C\n065130195260325390455520585650\n0.4 0.7 1 1.3 1.6 1.9 2.2 2.5 2.8ICC[µA]\nVCC[V]\n3.6 V\n3.3 V\n3.0 V\n2.7 V\n1.8 V\n1.6 V30.7531.0031.2531.5031.7532.0032.2532.5032.7533.0033.2533.5033.75\n- 4 0- 3 0- 2 0- 1 0 0 1 0 2 0 3 0 4 0 5 0 6 0 7 0 8 0 9 01 0 0Frequency [kHz]\nTemperature [°C]\n301 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.10.2 32.768kHz Internal Oscillator\nFigure 33-313. 32.768kHz Internal Oscillator Frequency vs. Temperature\nFigure 33-314. 32.768kHz Internal Osci llator Frequency vs. Calibration Value\nVCC= 3.0V, T = 25°C3.6 V\n3.3 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n32.4632.4932.5232.5532.5832.6132.6432.6732.7032.7332.7632.7932.82\n- 4 0 - 3 0 - 2 0 - 1 00 1 02 03 04 05 06 07 08 09 0 1 0 0Frequency [kHz]\nTemperature [°C]\n3.0 V\n2225283134374043464952\n0 24 48 72 96 120 144 168 192 216 240 264Frequency [kHz]\nRC32KCA L[7..0]\n302 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.10.3 2MHz Internal Oscillator \nFigure 33-315. 2MHz Internal Oscillator Frequency vs. Temperature\nDFLL disabled\nFigure 33-316. 2MHz Internal Oscillator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator3.6 V\n3.3 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V1.961.982.002.022.042.062.082.102.122.142.16\n- 4 0 - 3 0 - 2 0 - 1 00 1 02 03 04 05 06 07 08 09 0 1 0 0Frequency [MHz]\nTemperature [°C]\n3.6 V\n3.3 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V\n1.9801.9821.9841.9861.9881.9901.9921.9941.9961.9982.0002.0022.0042.006\n- 4 0 - 3 0 - 2 0 - 1 00 1 02 03 04 05 06 07 08 09 0 1 0 0Frequency [MHz]\nTemperature [°C]\n303 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-317. 2MHz Internal Oscillator CALA Calibration Step Size\nVCC= 3V\n33.4.10.4 32MHz Internal Oscillator\nFigure 33-318. 32MHz Internal Oscillator Frequency vs. Temperature\nDFLL disabled105 °C85 °C25 °C-40 °C\n0.140.160.180.200.220.240.260.280.30\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0Step Size [%]\nCALA\n3.6 V\n3.3 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V31.0531.5031.9532.4032.8533.3033.7534.2034.6535.1035.5536.00\n- 4 0 - 3 0 - 2 0 - 1 00 1 02 03 04 05 06 07 08 09 0 1 0 0Frequency [MHz]\nTemperature [°C]\n304 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-319. 32MHz Internal Oscillator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator\nFigure 33-320. 32MHz Internal Osci llator CALA Calibration Step Size\nVCC= 3.0V3.6 V3.3 V3.0 V2.7 V2.2 V1.8 V\n31.6631.6931.7231.7531.7831.8131.8431.8731.9031.9331.9631.9932.0232.05\n- 4 0 - 3 0 - 2 0 - 1 00 1 02 03 04 05 06 07 08 09 0 1 0 0Frequency [MHz]\nTemperature [°C]\n105 °C\n85 °C\n25 °C-40 °C\n0.140.170.200.230.260.290.32\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0Step Size [%]\nCALA\n305 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.10.5 32MHz Internal Oscillator Calibrated to 48MHz\nFigure 33-321. 48MHz Internal Oscillator Frequency vs. Temperature\nDFLL disabled\nFigure 33-322. 48MHz Internal Oscillator Frequency vs. Temperature\nDFLL enabled, from the 32.768kHz internal oscillator3.6 V\n3.3 V\n3.0 V\n2.7 V\n2.2 V\n1.8 V 46.246.947.648.349.049.750.451.151.852.553.253.9\n- 4 0 - 3 0 - 2 0 - 1 00 1 02 03 04 05 06 07 08 09 0 1 0 0Frequency [MHz]\nTemperature [°C]\n3.6 V3.3 V3.0 V2.7 V2.2 V1.8 V\n47.547.647.747.847.948.048.148.248.3\n- 4 0 - 3 0 - 2 0 - 1 00 1 02 03 04 05 06 07 08 09 0 1 0 0Frequency [MHz]\nTemperature [°C]\n306 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Figure 33-323. 48MHz Internal Osci llator CALA Calibration Step Size\nVCC=3 V\n33.4.11 Two-Wire Interface Characteristics\nFigure 33-324. SDA Hold Time vs. Supply Voltage105 °C\n85 °C\n25 °C-40 °C\n0.140.160.180.20.220.240.260.28\n0 1 02 03 04 05 06 07 08 09 0 1 0 0 1 1 0 1 2 0 1 3 0Step Size [%]\nCALA\n105°C\n85°C\n25°C\n-4 0 ° C\n260265270275280285290295300\n2.6 2.7 2.8 2.9 3.0 3.1 3.2 3.3 3.4 3.5 3.6Holdtime [ns]\nVcc [V]\n307 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201633.4.12 PDI Characteristics\nFigure 33-325. Maximum PDI Frequency vs. VCC\n105 °C85 °C25 °C-40 °C\n1013161922252831\n1 . 61 . 82 . 02 . 22 . 42 . 62 . 83 . 03 . 23 . 43 . 6Frequency max [MHz]\nVcc [V]\n308 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201634. Errata\n34.1 ATxmega16D4 / ATxmega32D4\n34.1.1 Rev. I\n\uf06cTemperature sensor not calibrated\n1. Temperature sensor not calibrated\nTemperature sensor factory calibration not implemented.\nProblem fix/Workaround\nNone.\n34.1.2 Rev. F/G/H\nNot sampled.\n34.1.3 Rev. E\n\uf06cADC propagation delay is not correct when gain is used\n\uf06cCRC fails for Range CRC when end address is the last word address of a flash section\n\uf06cAWeX fault protection restore is not done correct in Pattern Generation Mode\n\uf06cErroneous interrupt when using Timer/Counter with QDEC\n\uf06cAC system status flags are only valid if AC-system is enabled\n\uf06cTemperature sensor not calibrated\n1. ADC propagation delay is not correct when gain is used\nThe propagation delay will increase by only one ADC clock cycle for all gain setting.\nProblem fix/Workaround\nNone.\n2.CRC fails for Range CRC when end address is  the last word address of a flash section\nIf boot read lock is enabled, the range CRC cannot end on the last address of the application section. If application \ntable read lock is enabled, the range CRC cannot end on the last address before the application table.\nProblem fix/Workaround\nEnsure that the end address used in Range CRC does not end at the last address before a section with read lock enabled. Instead, use the dedicated CRC commands for complete applications sections.\n3. AWeX fault protection restore is not done correct in Pattern Generation Mode\nWhen a fault is detected the OUTOVEN register is cl eared, and when fault condition is cleared, OUTOVEN is \nrestored according to the corresponding enabled DTI channels. For Common Waveform Channel Mode (CWCM), \nthis has no effect as the OUTOVEN is correct after restoring from fault. For Pattern Generation Mode (PGM), OUTOVEN should instead have been restored a ccording to the DTILSBUF register.\n309 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Problem fix/Workaround\nFor CWCM no workaround is required.\nFor PGM in latched mode, disable the DTI channels before re turning from the fault condition. Then, set correct \nOUTOVEN value and enable the DTI channels, before the direction (DIR) register is written to enable the correct \noutputs again.\nFor PGM in cycle-by-cycle mode there is no workaround.\n4. Erroneous interrupt when using Timer/Counter with QDEC\nWhen the Timer/Counter is set in Dual Slope mode wi th QDEC enabled, an additional underflow interrupt (and \nevent) will be given when the counter counts from BOTTOM to one.\nProblem fix/Workaround\nWhen receiving underflow interrupt check direction and val ue of counter. If direction is UP and counter value is \nzero, change the counter value to one. This will also remove the additional event. If the counter value is above \nzero, clear the interrupt flag.\n5. AC system status flags are only valid if AC-system is enabled\nThe status flags for the ac-output are updated even though the AC is not enabled which is invalid. Also, it is not possible to clear the AC interrupt flags wit hout enabling either of the Analog comparators.\nProblem fix/Workaround\nSoftware should clear the AC system flags once, after enabl ing the AC system before using the AC system status \nflags.\n6. Temperature sensor not calibrated\nTemperature sensor factory calibration not implemented.\nProblem fix/Workaround\nNone.\n34.1.4 Rev. C/D\nNot sampled.\n310 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201634.1.5 Rev. A/B\n\uf06cBandgap voltage input for the ACs can not be changed when used for both ACs simultaneously\n\uf06cVCC voltage scaler for AC is non-linear\n\uf06cADC gain stage cannot be used for single conversion\n\uf06cADC has increased INL error for some operating conditions\n\uf06cADC gain stage output range is limited to 2.4 V\n\uf06cADC Event on compare match non-functional\n\uf06cADC propagation delay is not correct when 8x -64x gain is used\n\uf06cBandgap measurement with the ADC is non-functional when VCC is below 2.7V\n\uf06cAccuracy lost on first three samples after switching input to ADC gain stage\n\uf06cConfiguration of PGM and CWCM not as described in XMEGA A Manual\n\uf06cPWM is not restarted properly after a fault in cycle-by-cycle mode\n\uf06cBOD: BOD will be enabled at any reset\n\uf06cSampled BOD in Active mode will cause noise when bandgap is used as reference\n\uf06cEEPROM page buffer always written when NVM DATA0 is written\n\uf06cPending full asynchronous pin change interrupts will not wake the device\n\uf06cPin configuration does not affect Analog Comparator Output\n\uf06cNMI Flag for Crystal Oscillator Failure automatically cleared\n\uf06cFlash Power Reduction Mode can not be enabled when entering sleep\n\uf06cCrystal start-up time required after power-s ave even if crystal is source for RTC\n\uf06cRTC Counter value not correctly read after sleep\n\uf06cPending asynchronous RTC-interrupts will not wake up device\n\uf06cTWI Transmit collision flag not cleared on repeated start\n\uf06cClearing TWI Stop Interrupt Flag may lock the bus\n\uf06cTWI START condition at bus timeout will cause transaction to be dropped\n\uf06cTWI Data Interrupt Flag (DIF) erroneously read as set\n\uf06cWDR instruction inside closed window will not issue reset\n\uf06cInverted I/O enable does not affect Analog Comparator Output\n\uf06cTWIE is not available\n\uf06cCRC generator module is not available\n\uf06cADC 1/x gain setting and VCC/2 reference setting is not available\n\uf06cTOSC alternate pin locations is not available\n\uf06cTWI SDAHOLD time configuration is not available\n\uf06cTimer/Counter 2 is not available\n\uf06cHIRES+ option is not available\n\uf06cAlternate pin locations for digital peripherals are not available\n\uf06cXOSCPWR high drive option for external crystal is not available\n\uf06cPLL divide by two option is not available\n\uf06cReal Time Counter non-prescaled 32kHZ  clock options are not available\n\uf06cPLL lock detection failure function is not available\n\uf06cNon available functions and options\n\uf06cTemperature sensor not calibrated\n\uf06cDisabling the USART transmitter does not automatically set the TxD pin direction to output. \n311 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20161. Bandgap voltage input for the ACs can not be changed when used for both ACs simultaneously\nIf the Bandgap voltage is selected as input for one Analog Comparator (AC) and then selected/deselected as input \nfor another AC, the first comparator will be affected fo r up to 1 ìs and could potentially give a wrong comparison \nresult.\nProblem fix/Workaround\nIf the Bandgap is required for both ACs simultaneously, configure the input selection for both ACs before enabling any of them.\n2. VCC voltage scaler for AC is non-linear\nThe 6-bit VCC voltage scaler in the Analog Comparators is non-linear.\nFigure 34-1. Analog Comparator  Voltage Scaler vs. Scalefac\nT = 25°C  \nProblem fix/Workaround\nUse external voltage input for the analog comparator if accurate voltage levels are needed.\n3.ADC has increased INL error for some operating conditions\nSome ADC configurations or operating condition will result in increased INL error.\nIn signed mode INL is increased to:\n\uf06c6LSB for sample rates above 130ksps, and up to 8LSB for 200ksps sample rate. \n\uf06c6LSB for reference voltage below 1.1V when VCC is above 3.0V. \n\uf06c20LSB for ambient temperature below 0 degree C and reference voltage below 1.3V. \nIn unsigned mode, the INL error cannot be guaranteed, and this mode should not be used.\nProblem fix/Workaround\nNone. Avoid using the ADC in the above configurations in  order to prevent increased INL error. Use the ADC in \nsigned mode also for single ended measurements.\n4. ADC gain stage output range is limited to 2.4V\nThe amplified output of the ADC gain stage will never go abov e 2.4V, hence the differential input will only give cor-\nrect output when below 2.4V/gain. For the available gain settings, this gives a differential input range of:3.3V\n2.7V\n1.8V\n00.511.522.533.5\n0 5 10 15 20 25 30 35 40 45 50 55 60 65\nSCALEFACVSCALE  [V]\n312 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Problem fix/Workaround\nKeep the amplified voltage output from the ADC gain stage below 2.4V in order to get a correct result, or keep \nADC voltage reference below 2.4V.\n5. ADC Event on compare match non-functional\nADC signalling event will be given at every conversion comp lete even if Interrupt mode (INTMODE) is set to \nBELOW or ABOVE.\nProblem fix/Workaround\nEnable and use interrupt on compare match when using the compare function.\n6.ADC propagation delay is not correct when 8x -64x gain is used\nThe propagation delay will increase by only one ADC clock cycle for 8x and 16x gain setting, and 32x and 64x gain \nsettings.\nProblem fix/Workaround\nNone.\n7. Bandgap measurement with the ADC is non-functional when VCC is below 2.7V\nThe ADC can not be used to do bandgap measurements when VCC is below 2.7V.\nProblem fix/Workaround\nNone.\n8. Accuracy lost on first three samples after switching input to ADC gain stage\nDue to memory effect in the ADC gain stage, the first three samples after changing input channel must be disre-garded to achieve 12-bit accuracy.\nProblem fix/Workaround\nRun three ADC conversions and discard these results after changing input channels to ADC gain stage.\n9. Configuration of PGM and CWCM not as described in XMEGA A Manual\nEnabling Common Waveform Channel Mode will enable Patt ern generation mode (PGM), but not Common Wave-\nform Channel Mode. \nEnabling Pattern Generation Mode (PGM) and not Common Waveform Channel Mode (CWCM) will enable both \nPattern Generation Mode and Common Waveform Channel Mode.1x gain: 2.4V\n2x gain: 1.2V\n4x gain: 0.6v\n8x gain: 300mV\n16x gain: 150mV\n32x gain: 75mV\n64x gain: 38mV\n313 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Problem fix/Workaround\nTable 34-1. Configure PWM and CWCM According to this Table\n10 PWM is not restarted properly after a fault in cycle-by-cycle mode\nWhen the AWeX fault restore mode is set to cycle-by-cycle, the waveform output will not return to normal operation \nat first update after fault condition is no longer present.\nProblem fix/Workaround\nDo a write to any AWeX I/O register to re-enable the output.\n11. BOD will be enabled after any reset\nIf any reset source goes active, the BOD will be enabled and keep the device in reset if the VCC voltage is below the programmed BOD level. During Power-On Reset, re set will not be released until VCC is above the pro-\ngrammed BOD level even if the BOD is disabled.\nProblem fix/Workaround\nDo not set the BOD level higher than VCC even if the BOD is not used.\n12.  Sampled BOD in Active mode will cause noise when bandgap is used as reference\nUsing the BOD in sampled mode when the device is running in Active or Idle mode will add noise on the bandgap reference for ADC and Analog Comparator.\nProblem fix/Workaround\nIf the bandgap is used as reference for either the ADC or the Analog Comparator, the BOD must not be set in sam-\npled mode.\n13. EEPROM page buffer always writ ten when NVM DATA0 is written\nIf the EEPROM is memory mapped, writing to NV M DATA0 will corrupt data in the EEPROM page buffer.\nProblem fix/Workaround\nBefore writing to NVM DATA0, for example when doing soft ware CRC or flash page buffer write, check if EEPROM \npage buffer active loading flag (EELOAD) is set. Do not write NVM DATA0 when EELOAD is set.\n14.  Pending full asynchronous pin change interrupts will not wake the device\nAny full asynchronous pin-change Interrupt from pin 2, on any  port, that is pending when the sleep instruction is \nexecuted, will be ignored until the device is woken from another source or the source triggers again. This applies \nwhen entering all sleep modes where the System Clock is stopped.\nProblem fix/Workaround\nNone.\n15.  Pin configuration does not affect Analog Comparator output\nThe Output/Pull and inverted pin configuration does not affect the Analog Comparator output.PGM CWCM Description\n0 0 PGM and CWCM disabled\n0 1 PGM enabled\n1 0 PGM and CWCM enabled\n1 1 PGM enabled\n314 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Problem fix/Workaround\nNone for Output/Pull configuration.\nFor inverted I/O, configure the Analog Comparator to give an inverted result (i.e. connect positive input to the neg-\native AC input and vice versa), or use and external inverter to change polarity of Analog Comparator output. \n16. NMI Flag for Crystal Oscillator Failure automatically cleared\nNMI flag for Crystal Oscillator Failure (XOSCFDIF) will be automatically cleared when executing the NMI interrupt \nhandler \nProblem fix/Workaround\nThis device revision has only one NMI interrupt source, so checking the interrupt source in software is not required\n17. Flash Power Reduction Mode can not be enabled when entering sleep\nIf Flash Power Reduction Mode is enabled when enteri ng Power-save or Extended Standby sleep mode, the \ndevice will only wake up on every fourth wake-up reques t. If Flash Power Reduction Mode is enabled when enter-\ning Idle sleep mode, the wake-up time will vary with up to 16 CPU clock cycles.\nProblem fix/Workaround\nDisable Flash Power Reduction mode before entering sleep mode.\n18. Crystal start-up time required after power-save even if crystal is source for RTC \nEven if 32.768 kHz crystal is used for RTC during sleep, the clock from the crystal will not be ready for the system \nbefore the specified start-up time. See "XOSCSEL[3:0]: Cr ystal Oscillator Selection " in XMEGA A Manual. If BOD \nis used in active mode, the BOD will be on during this period (0.5s).\nProblem fix/Workaround\nIf faster start-up is required, go to sleep with internal oscillator as system clock\n19. RTC Counter value not correctly read after sleep \nIf the RTC is set to wake up the device on RTC Overflow and bit 0 of RTC CNT is identical to bit 0 of RTC PER as \nthe device is entering sleep, the value in the RTC count r egister can not be read correctly within the first prescaled \nRTC clock cycle after wakeup. The value read will be the same as the value in the register when entering sleep.\nThe same applies if RTC Compare Match is used as wake-up source.\nProblem fix/Workaround\nWait at least one prescaled RTC clock cycle before reading the RTC CNT value.\n20. Pending asynchronous RTC-interrupts will not wake up device \nAsynchronous Interrupts from the Real-Time-Counter that  is pending when the sleep instruction is executed, will \nbe ignored until the device is woken from anot her source or the source triggers again.\nProblem fix/Workaround\nNone.\n21. TWI Transmit collision flag not cleared on repeated start\nThe TWI transmit collision flag should be automatically cleared on start and repeated start, but is only cleared on \nstart.\nProblem fix/Workaround\nClear the flag in software after address interrupt.\n315 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201622. Clearing TWI Stop Interrupt Flag may lock the bus\nIf software clears the STOP Interrupt Flag (APIF) on the same Peripheral Clock cycle as the hardware sets this \nflag due to a new address received, CLKHOLD is not cleared and the SCL line is not released. This will lock the \nbus. \nProblem fix/Workaround\nCheck if the bus state is IDLE. If this is the case, it is safe to clear APIF. If the bus state is not IDLE, wait for the SCL pin to be low before clearing APIF.\nCode:\n/* Only clear the interrupt flag if within a "safe zone". */\nwhile ( /* Bus not IDLE: */       ((COMMS_TWI.MASTER.STATUS & TWI_MASTER_BUSSTATE_gm) !=         TWI_MASTER_BUSSTATE_IDLE_gc)) &&         /* SCL not held by slave: */         !(COMMS_TWI.SLAVE.STATUS & TWI_SLAVE_CLKHOLD_bm)      ){    /* Ensure that the SCL line is low */    if ( !(COMMS_PORT.IN & PIN1_bm) )        if ( !(COMMS_PORT.IN & PIN1_bm) )            break;}/* Check for an pending address match interrupt */if ( !(COMMS_TWI.SLAVE.STATUS & TWI_SLAVE_CLKHOLD_bm) ){    /* Safely clear interrupt flag */    COMMS_TWI.SLAVE.STATUS |= (uint8_t)TWI_SLAVE_APIF_bm;}\n23. TWI START condition at bus timeout will cause transaction to be dropped\nIf Bus Timeout is enabled and a timeout occurs on the same  Peripheral Clock cycle as a START is detected, the \ntransaction will be dropped.\nProblem fix/Workaround\nNone.\n24. TWI Data Interrupt Flag erroneously read as set\nWhen issuing the TWI slave response command CMD=0b11, it takes 1 Peripheral Clock cycle to clear the data interrupt flag (DIF). A read of DIF directly after issuing the command will show the DIF still set.\nProblem fix/Workaround\nAdd one NOP instruction before checking DIF.\n25. WDR instruction inside closed  window will not issue reset\nWhen a WDR instruction is execute within one ULP clock cycle after updating the window control register, the \ncounter can be cleared without giving a system reset.\nProblem fix/Workaround\nWait at least one ULP clock cycle before executing a WDR instruction.\n26. Inverted I/O enable does not affect Analog Comparator Output\nThe inverted I/O pin function does not affect the Analog Comparator output function.\n316 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Problem fix/Workaround\nConfigure the analog comparator setup to give an inverted result, or use an external inverter to change polarity of \nAnalog Comparator Output.\n27. Non available functions and options\nThe below function and options are not available. Writing to any registers or fuse to try and enable or configure \nthese functions or options will have no effect, and will be as writing to a reserved address location.\n●TWIE, the TWI module on PORTE.\n●TWI SDAHOLD option in the TWI CTRL register is one bit.\n●CRC generator module.\n●ADC 1/2x gain option, and this conf iguration option in the GAIN bits in the ADC Channel CTRL register.\n●ADC VCC/2 reference option and this configuration option in the REFSEL bits on the ADC REFCTRL register.\n●ADC option to use internal Gnd as negative input in differ ential measurements and this configuration option in the \nMUXNEG bits in the ADC Channel MUXCTRL register.\n●ADC channel scan and the ADC SCAN register\n●ADC current limitation opti on, and the CURRLIMIT bits in the ADC CTRLB register\n●ADC impedance mode selection for the gain stage, and the IMPMODE bit in the ADC CTRLB register.\n●Timer/Counter 2 and the SPLITMODE configuration opti on in the BYTEM bits in the Timer/Counter 0 CTRLE \nregister.\n●Analog Comparator (AC) current output option, and the AC CURRCTRL and CURRCALIB registers. \n●PORT remap functions with alternate pin locations for Ti mer/Counter output compare channels, USART0 and SPI, \nand the PORT REMAP register.\n●PORT RTC clock output option and the RTCOUT bit in th e PORT CLKEVOUT register.\n●PORT remap functions with alternate pin locations fo r the clock and event output, and the CLKEVPIN bit in the \nPORT CLKEVOUT register. \n●TOSC alternate pin locations, and TOSCSEL bit in FUSEBYTE2\n●Real Time Counter clock source options of external  clock from TOSC1, and 32.768kHz from TOSC, and \n32.768kHz from the 32.768kHz internal oscillator, and t hese configuration options in the RTCSRC bits in the Clock \nRTCTRL register.\n●PLL divide by two option, and the PLLDIV bit in the Clock PLLCTRL register.\n●PLL lock detection failure function and the PLLDIF and PLLFDEN bits in the Clock XOSCFAIL register.\n●The high drive option for external crystal and the XOSCPWR bit on the Oscillator XOSCCTRL register.\n●The option to enable sequential startup of the analog modu les and the ANAINIT register in MCU Control memory.\nProblem fix/Workaround\nNone.\n28. Temperature sensor not calibrated\nTemperature sensor factory calibration not implemented.\nProblem fix/Workaround\nNone.\n29. Disabling of USART transmitter does not automatically set the TxD pin direction to input\nIf the USART transmitter is idle with no frames to transmit,  setting TXEN to zero will not automatically set the TxD \npin direction to input.\nProblem fix/Workaround\nThe TxD pin direction can be set to input using the Port DIR register. Be advised that setting the Port DIR register \nto input will be immediate. Ongoing transmissions will be truncated.\n317 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201634.2 ATxmega64D4\n34.2.1 Rev. D\n\uf06cTemperature sensor not calibrated\n1. Temperature sensor not calibrated\nTemperature sensor factory calibration not implemented.\nProblem fix/Workaround\nNone.\n34.2.2 Rev. B/C\nNot sampled.\n34.2.3 Rev. A\n\uf06cADC may have missing codes in SE unsigned mode at low temp and low VCC\n\uf06cTemperature sensor not calibrated\n1. ADC may have missing codes in SE unsigned mode at low temp and low VCC\nThe ADC may have missing codes i single ended (SE) unsigned mode below 0C when Vcc is below 1.8V.\nProblem fix/Workaround\nUse the ADC in SE signed mode.\n2. Temperature sensor not calibrated\nTemperature sensor factory calibration not implemented.\nProblem fix/Workaround\nNone.\n34.3 ATxmega128D4\n34.3.1 Rev. A\n\uf06cTemperature sensor not calibrated\n1. Temperature sensor not calibrated\nTemperature sensor factory calibration not implemented.\nProblem fix/Workaround\nNone.\n318 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201635. Datasheet Revision History\nPlease note that the referring page numbers in this section ar e referred to this document. The referring revision in this \nsection are referring to the document revision.\n35.1 8135S – 09/2016\n35.2 8135R – 02/2015\n35.3 8135Q – 09/2014\n35.4 8135P – 01/20141. Updated “Instruction Set Summary” on page 56 . Removed “DES” instruction.\n2. Updated “Gain Stage Characteristics” : Table 32-11 on page 72 , Table 32-39 on page 91Table 32-67 on page 110  and \nTable 32-96 on page 131 . “Offset Error, input referred” is chan ged to “Offset Erro r, output referred.\n1. Updated Figure 25-1 on page 45\n2. Updated the “Packaging information” on page 61 . Replaced “44M1” on page 62  by a correct package.\n3. Updated tables Table 32-8 on page 70 and Table 32-36 on page 89  with information on fixed voltage offset. \n4. Updated use of capitals in heading, table headings and figure titles. \n1. Updated the “Ordering Information” on page 2 . Added ordering information for ATxmega16D4/32D4/64D4/128D4 @ \n105\uf0b0C.\n2. Updated the Application table section fr om 4K/4K/4K/4K to 8K/4K/4K/4K in the Figure 7-1 on page 13\n3.Updated Table 32-4 on page 66 , Table 32-33 on page 86 , Table 32-60 on page 104  and Table 32-89 on page 125 . \nAdded Icc Power-down power consumption for T=105 \uf0b0C for all functions disabled and for WDT and sampled BOD \nenabled\n4.Updated Table 32-17 on page 74 , Table 32-45 on page 93 , Table 32-73 on page 112  and Table 32-102 on page 133 . \nUpdated all tables to include values for T=85 \uf0b0C and T=105 \uf0b0C. Removed T=55 \uf0b0C\n5.Changed Vcc to AVcc in Figure 25-1 on page 45  and in the text in Section 25. “ADC – 12-bit Analog to Digital \nConverter” on page 44  and in Section 26. “AC – Analog Comparator” on page 46\n6.Changed unit parameter for tSU;DAT to ns in Table 32-28 on page 82 , Table 32-56 on page 101 , Table 32-85 on page \n121 and Table 32-114 on page 142 . \n7.Added ERRATA information on disabling of USART transmitter to Section 34.1 “ATxmega16D4 / ATxmega32D4” on \npage 308 .\n8. Updated the typical characteristics of “ATxmega64D4” and “ATxmega128D4” with characterizations @105 \uf0b0C\n1. Updated the typical characteristics of “ATxmega16D4” and “ATxmega32D4” with characterizations @ 105 \uf0b0C\n319 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201635.5 8135O – 08/2013\n35.6 8135N – 04/2013\n35.7 8135M – 02/2013\n35.8 8135L – 08/20121. Updated “Errata” :\n● ATxmega16D4/32D4: Added Temperature sensor not calibrated  to “Rev. I” , “Rev. E”  and “Rev. A/B” \n● ATxmega64D4: Added Temperature sensor not calibrated  to “Rev. D”  and “Rev. A” \n● ATxmega128D4: Added Temperature sensor not calibrated  to “Rev. A” \n1. Updated description in “ADC – 12-bit Analog to Digital Converter” on page 44 .\n2. Updated “Errata” :\n● ATxmega16D4/32D4: Added revision F, G, H, I\n● ATxmega64D4: Added revision A, B, C\n● ATxmega128D4: Added revision A\n1. Updated the datasheet with the Atmel new datasheet template.\n2. Updated Figure 2-1 on page 4 . PE2/PE3 are now half gray.\n3. Updated Figure 2-1 on page 4 . Pin 19 is VCC and not VDD.\n4. Updated Table 7-2 on page 16 . FWORD column updated: Z[X,0] replaced by  Z[X,1]. FPAGE column updated to Z[Y,8]\n5. Updated “I/O Ports” on page 29 . Removed “Optional slew rate control”. The feature doesn\'t exist in XMEGA C and \nXMEGA D devices.\n6. Updated “Analog Comparator Overview” on page 47 , Figure 26-1 .\n7. Updated Table 32-25 on page 77 , Table 32-53 on page 96  and Table 32-82 on page 116 . Added ESR parameter.\n8. Updated TWI specification. VIL Min is -0.5V and not 0.5V.\n9. Added new “Electrical Characteristics” for “ATxmega16D4” on page 64  and “ATxmega32D4” on page 83 .\n10. Added new “Typical Characteristics” for “ATxmega16D4” on page 144  and “ATxmega32D4” on page 184 .\n11. Updated “Errata” on page 308 . AC system status flags are onl y valid if AC-system is enabled.\n1. Editing updates.\n2. Updated all tables in the “Electrical Characteristics” on page 64 .\n3. Added new “Typical Characteristics” on page 144 .\n4. Added new Errata “Rev. E” on page 308.\n5. Added new ERRATA on “Rev. A/B” on page 310: Non available functions and options\n320 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201635.9 8135K – 06/2012\n35.10 8135J – 12/10\n35.11 8135I – 10/10\n35.12 8135H – 09/1035.13 8135G – 08/10\n35.14 8135F – 02/101. ATxmega64D4-CU is added in “Ordering Information” on page 2\n1. Datasheet status changed to complete: Preliminary removed from the front page.\n2. Updated all tables in the “Electrical Characteristics” on page 64 .\n3. Replaced Table 31-11 on page 64.\n4. Replaced Table 31-17 on page 65 and added the figure ”TOSC input capacitance” on page 66.\n5. Updated ERRATA ADC (ADC has increased INL for some operating conditions).\n6. Updated ERRATA ”rev. A/B” on page 90  with TWIE (TWIE is not available).\n7. Updated the last page with Atmel new Brand Style Guide.\n1. Updated Table 31-1 on page 58 .\n1. Updated ”Errata” on page 90 .\n1. Updated the Footnote 3 of ”Ordering Information” on page 2 . \n2. All references to CRC removed. Updated Figure 3-1 on page 7 .\n3. Updated ”Features” on page 26 . Event Channel 0 output on port pin 7.\n4. Updated ”DC Characteristics” on page 58  by adding Icc for Flash/EEPROM Programming.\n5. Added AVCC in ”ADC Characteristics” on page 62 . \n6. Updated Start up time in ”ADC Characteristics” on page 62 . \n7. Updated and fixed typo in “Errata” section.\n1. Added ”PDI Speed” on page 89 .\n321 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201635.15 8135E – 02/10\n35.16 8135D – 12/09\n35.17 8135C – 10/09\n35.18 8135B – 09/091. Updated the device pin-out Figure 2-1 on page 3 . PDI_CLK and PDI_DATA renamed only PDI.\n2. Updated Table 7-3 on page 18 . No of Pages for ATxmega32D4: 32\n3. Updated ”Alternate Port Functions” on page 29 .\n4. Updated ”ADC - 12-bit Analog to Digital Converter” on page 39 .\n5. Updated Figure 25-1 on page 50 .\n6. Updated ”Alternate Pin Functions” on page 48 .\n7. Updated ”Timer/Counter and AWEX functions” on page 46 .\n8. Added Table 31-17 on page 65 .\n9. Added Table 31-18 on page 66 .\n10. Changed Internal Oscillator Speed to ”Oscillators and Wake-up Time” on page 85 .\n11. Updated ”Errata” on page 90 .\n1. Added ATxmega128D4 device and updated the datasheet accordingly.\n2. Updated ”Electrical Characteristics” on page 58  with Max/Min numbers.\n3. Added ”Flash and EEPROM Memory Characteristics” on page 61 .\n4. Updated Table 31-10 on page 64 , Input hysteresis is in V and not in mV.\n5. Added ”Errata” on page 90 .\n1. Updated ”Features” on page 1  with Two Two-Wire Interfaces.\n2. Updated ”Block Diagram and QFN/TQFP pinout” on page 3 .\n3. Updated ”Overview” on page 5 .\n4. Updated ”XMEGA D4 Block Diagram” on page 7 .\n5. Updated Table 13-1 on page 24 .\n6. Updated ”Overview” on page 35 .\n7. Updated Table 27-5 on page 49 .\n8. Updated ”Peripheral Module Address Map” on page 50 .\n1. Added ”Electrical Characteristics” on page 58 .\n2. Added ”Typical Characteristics” on page 67 .\n322 XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201635.19 8135A – 03/09\n1. Initial revision.\ni XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/2016Table of Contents\nFeatures1\n1 Ordering Information ........... .............. .............. .............. .............. ............2\n2 Pinout/Block diagram .......... .............. .............. .............. .............. ............4\n3 Overview ................. .............. .............. .............. .............. .............. ............6\n3.1Block Diagram ........................................................................................................... 7\n4 Resources ................. ................. ................ ................ ................. ..............8\n4.1Recommended Reading............................................................................................ 8\n5 Capacitive Touch Sensi ng ...................... .............. .............. ............ .........8\n6 AVR CPU ................. .............. .............. .............. .............. .............. ............9\n6.1Features ....................................................................................................................  9\n6.2Overview....................................................................................................................  9\n6.3Architectural Overview............................................................................................... 96.4ALU - Arithmetic Logic Unit ..................................................................................... 106.5Program Flow .......................................................................................................... 116.6Status Register ........................................................................................................ 116.7Stack and Stack Pointer .......................................................................................... 116.8Register File ............................................................................................................ 11\n7 Memories ............... .............. .............. .............. .............. .............. ............12\n7.1Features .................................................................................................................. 1 2\n7.2Overview.................................................................................................................. 1 2\n7.3Flash Program Memory ........ ................................................................................... 13\n7.4Fuses and Lock Bits ................................................................................................ 147.5Data Memory ........................................................................................................... 147.6EEPROM .............. ................ ................ ................ ................. ................ ............. ..... 15\n7.7I/O Memory.............................................................................................................. 157.8Data Memory and Bus Arbitration ........................................................................... 167.9Memory Timing........................................................................................................ 167.10Device ID and Revision ......................................................................................... 167.11I/O Memory Protection........................................................................................... 167.12Flash and EEPROM Page Si ze............. ................. ................ ............. ............. ..... 16\n8 Event System ................. ................ ................. .............. .............. ............18\n8.1Features .................................................................................................................. 1 8\n8.2Overview.................................................................................................................. 1 8\nii XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/20169 System Clock and Clock Opti ons ................. .............. .............. ............19\n9.1Features .................................................................................................................. 1 9\n9.2Overview.................................................................................................................. 1 9\n9.3Clock Sources ......................................................................................................... 20\n10 Power Management and Sleep Modes .... ................ ................. ............22\n10.1Features ................................................................................................................ 22\n10.2Overview................................................................................................................ 2210.3Sleep Modes.......................................................................................................... 22\n11 System Control and Reset .. ................. .............. .............. ............ ..........24\n11.1Features ................................................................................................................ 24\n11.2Overview................................................................................................................ 2411.3Reset Sequence .................................................................................................... 2411.4Reset Sources ....................................................................................................... 25\n12 WDT – Watchdog Timer ......... ................. ................ ................. ..............26\n12.1Features ................................................................................................................ 26\n12.2Overview................................................................................................................ 26\n13 Interrupts and Programmable Multilevel  Interrupt Controller ............27\n13.1Features ................................................................................................................ 27\n13.2Overview................................................................................................................ 2713.3Interrupt Vectors .................................................................................................... 27\n14 I/O Ports ......... ................ ................ ................. .............. .............. ............29\n14.1Features ................................................................................................................ 29\n14.2Overview................................................................................................................ 29\n14.3Output Driver ......................................................................................................... 3014.4Input Sensing......................................................................................................... 3114.5Alternate Port Functions ........................................................................................ 32\n15 TC0/1 – 16-bit Timer/Counter  Type 0 and 1 ............. ................. ............33\n15.1Features ................................................................................................................ 33\n15.2Overview................................................................................................................ 33\n16 TC2 Timer/Counter Type 2 .. ................. .............. .............. ............ ..........35\n16.1Features ................................................................................................................ 35\n16.2Overview................................................................................................................ 35\n17 AWeX – Advanced Waveform Extension .. ................. .............. ............36\n17.1Features ................................................................................................................ 36\niii XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201617.2Overview................................................................................................................ 36\n18 Hi-Res – High Resolution Exte nsion .............. .............. .............. ..........37\n18.1Features ................................................................................................................ 37\n18.2Overview................................................................................................................ 37\n19 RTC – 16-bit Real-Time Counter ............ ................ ................. ..............38\n19.1Features ................................................................................................................ 38\n19.2Overview................................................................................................................ 38\n20 TWI – Two-Wire Interface ..... .............. .............. .............. .............. ..........39\n20.1Features ................................................................................................................ 39\n20.2Overview................................................................................................................ 39\n21 SPI – Serial Peripheral Interface ......... .............. .............. ............ ..........40\n21.1Features ................................................................................................................ 40\n21.2Overview................................................................................................................ 40\n22 USART .............. ................ ................. .............. .............. .............. ............41\n22.1Features ................................................................................................................ 41\n22.2Overview................................................................................................................ 41\n23 IRCOM – IR Communication Module .............. .............. .............. ..........42\n23.1Features ................................................................................................................ 42\n23.2Overview................................................................................................................ 42\n24 CRC – Cyclic Redundancy Check Genera tor ............ .............. ............43\n24.1Features ................................................................................................................ 43\n24.2Overview................................................................................................................ 43\n25 ADC – 12-bit Analog to Di gital Converter .... .............. .............. ............44\n25.1Features ................................................................................................................ 44\n25.2Overview................................................................................................................ 44\n26 AC – Analog Comparator ..... .............. .............. .............. .............. ..........46\n26.1Features ................................................................................................................ 46\n26.2Overview................................................................................................................ 46\n27 Programming and Debugging .... ................ ................. .............. ............48\n27.1Features ................................................................................................................ 48\n27.2Overview................................................................................................................ 48\n28 Pinout and Pin Functions ...... ................. ................ ................. ..............49\n28.1Alternate Pin Function Description ........................................................................ 49\niv XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201628.2Alternate Pin Functions ......................................................................................... 51\n29 Peripheral Module Address Map ................ ................. .............. ............54\n30 Instruction Set Summary ..... .............. .............. .............. .............. ..........56\n31 Packaging information ....... .............. .............. .............. .............. ............61\n31.144A ........................................................................................................................  61\n31.244M1...................................................................................................................... 62\n31.349C2 ...................................................................................................................... 63\n32 Electrical Characteristics .. .............. .............. .............. .............. ............64\n32.1ATxmega16D4....................................................................................................... 64\n32.2ATxmega32D4....................................................................................................... 8332.3ATxmega64D4..................................................................................................... 10232.4ATxmega128D4................................................................................................... 123\n33 Typical Characteristics ...... .............. .............. .............. .............. ..........144\n33.1ATxmega16D4..................................................................................................... 144\n33.2ATxmega32D4..................................................................................................... 18433.3ATxmega64D4..................................................................................................... 22433.4ATxmega128D4................................................................................................... 266\n34 Errata ........... ................. ................ ................ ................. .............. ..........308\n34.1ATxmega16D4 / ATxmega32D4................ .......................................................... 308\n34.2ATxmega64D4..................................................................................................... 31734.3ATxmega128D4................................................................................................... 317\n35 Datasheet Revision History .. ............. .............. .............. .............. ........318\n35.18135S – 09/2016 ................................................................................................. 318\n35.28135R – 02/2015 ................................................................................................. 31835.38135Q – 09/2014................................................................................................. 31835.48135P – 01/2014 ................................................................................................. 31835.58135O – 08/2013................................................................................................. 31935.68135N – 04/2013 ................................................................................................. 31935.78135M – 02/2013................................................................................................. 31935.88135L – 08/2012.................................................................................................. 31935.98135K – 06/2012 ................................................................................................. 32035.108135J – 12/10.................................................................................................... 32035.118135I – 10/10..................................................................................................... 32035.128135H – 09/10 ................................................................................................... 320\nv XMEGA D4 [DATASHEET]\nAtmel-8135S-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet–09/201635.138135G – 08/10................................................................................................... 320\n35.148135F – 02/10 ................................................................................................... 32035.158135E – 02/10 ................................................................................................... 32135.168135D – 12/09 ................................................................................................... 32135.178135C – 10/09 ................................................................................................... 32135.188135B – 09/09 ................................................................................................... 32135.198135A – 03/09 ................................................................................................... 322\nTable of Contentsi\nXXXXX X\nAtmel Corporation 1600 Technology Drive, San Jose, CA 95110 USA T: (+1)(408) 441.0311 F: (+1)(408) 436.4200 | www.atmel.com\n© 2015 Atmel Corporation. /  Rev.: Atmel-8135R-AVR-ATxmega16D4-32D4-64D4-128D4-Datasheet_09/2016.\nAtmel®, Atmel logo and combinations thereof, Enabling Unlimited Possibilities®, and others are registered trademarks or trademarks of Atmel Corporation in U.S. and \nother countries . Other terms and product names may be trademarks of others.\nDISCLAIMER: The information in this document is provided in c onnection with Atmel products. No license, express or implied, by estoppel or otherwise, to any  intellectual property right\nis granted by this document or in connection with the sale of Atmel products. EXCEPT AS SET FORTH IN THE ATMEL TERMS AND CONDIT IONS OF SALES LOCATED ON THE\nATMEL WEBSITE, ATMEL ASSUMES NO LIABILITY WH ATSOEVER AND DISCLAIMS ANY EXPRESS, IMPLIED OR  STATUTORY WARRANTY RELATING TO ITS P RODUCTS\nINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT. IN NO EVENT\nSHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT, CONSEQUENTIAL, PU NITIVE, SPECIAL OR INCIDENTAL DAMAGES (INCLUDING, WITHOUT LIMI TATION, DAMAGES\nFOR LOSS AND PROFITS, BUSINESS INTERRUPTION, OR LOSS OF INFORMATIO N) ARISING OUT OF THE USE OR INABILITY TO USE THIS DOCUMENT, EVEN IF ATMEL HAS\nBEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Atmel makes no representations or warranties with respect to the accuracy or c ompleteness of the contents of this\ndocument and reserves the right to make changes to specificatio ns and products descriptions at any  time without notice. Atmel d oes not make any commitment to update the information\ncontained herein. Unless specifically provided otherwise, Atme l products are not suitable for, and shall not be used in, automo tive applications. Atmel products are not intended,\nauthorized, or warranted for use as components in applications intended to support or sustain life. \nSAFETY-CRITICAL, MILITARY, AND AUTOMOTIVE APPLICATIONS DISCLA IMER: Atmel products are not designed for and will not be used in connection with any applications where\nthe failure of such products would reasonably be expected to re sult in significant personal inju ry or death (“Safety-Critical A pplications”) without an Atmel officer\'s specific written\nconsent. Safety-Critical Applications incl ude, without limitation, life support devices  and systems, equipment or systems for t he operation of nuclear facilities and weapons systems.\nAtmel products are not designed nor intended for use in military or aerospace applications or environments unless specifically designated by Atmel as military-grade. Atmel products are\nnot designed nor intended for use in automot ive applications unless s pecifically desi gnated by Atmel as automotive-grade.\nMouser Electronics\n  \nAuthorized Distributor\n \n  \nClick to View Pricing, Inventory, Delivery & Lifecycle Information:\n \n \n \n Microchip:   \n\xa0 ATXMEGA128D4-AU\xa0 ATXMEGA128D4-MH\xa0 ATXMEGA16D4-AU\xa0 ATXMEGA16D4-CU\xa0 ATXMEGA16D4-MH\xa0\nATXMEGA32D4-AU\xa0 ATXMEGA32D4-CU\xa0 ATXMEGA32D4-MH\xa0 ATXMEGA16D4-AUR\xa0 ATXMEGA16D4-CUR\xa0\nATXMEGA16D4-MHR\xa0 ATXMEGA32D4-AUR\xa0 ATXMEGA32D4-CUR\xa0 ATXMEGA32D4-MHR\xa0 ATXMEGA64D4-MH\xa0\nATXMEGA64D4-AU\xa0 ATXMEGA128D4-AUR\xa0 ATXMEGA64D4-MHR\xa0 ATXMEGA128D4-CU\xa0 ATXMEGA64D4-AUR\xa0\nATXMEGA128D4-MHR\xa0 ATXMEGA64D4-CUR\xa0 ATXMEGA64D4-CU\xa0 ATXMEGA16D4-MNR\xa0 ATXMEGA32D4-MNR\xa0\nATXMEGA128D4-AN\xa0 ATXMEGA32D4-ANR\xa0 ATXMEGA64D4-MNR\xa0 ATXMEGA16D4-AN\xa0 ATXMEGA64D4-ANR\xa0\nATXMEGA16D4-ANR\xa0 ATXMEGA128D4-MN\xa0 ATXMEGA32D4-MN\xa0 ATXMEGA32D4-AN\xa0 ATXMEGA128D4-ANR\xa0\nATXMEGA64D4-MN\xa0 ATXMEGA64D4-AN\xa0 ATXMEGA16D4-MN\xa0 ATXMEGA128D4-MNR\xa0 ATXMEGA128D4-CUR\n'}]
!==============================================================================!
### Component Summary: ATXMEGA32D4-MHR

#### Key Characteristics and Specifications:
- **Voltage Ratings**: 
  - Operating Voltage: 1.6V to 3.6V
  - Analog Supply Voltage (AVCC): 1.6V to 3.6V
- **Current Ratings**: 
  - Active Power Consumption: 
    - 32MHz: 0.75 to 1.4 mA (at 3.0V)
    - 2MHz: 350 to 600 µA (at 1.8V)
  - Idle Power Consumption: 
    - 32MHz: 170 to 350 µA (at 3.0V)
- **Power Consumption**: 
  - Power-down mode: 0.1 to 1.0 µA (at 3.0V)
  - Power-save mode: 1.5 µA (at 3.0V)
- **Operating Temperature Range**: 
  - -40°C to 85°C
- **Package Type**: 
  - 44-lead TQFP (Thin Quad Flat Package)
- **Special Features**: 
  - 32-bit RISC architecture
  - In-system programmable flash memory (32KB)
  - 1KB EEPROM and 4KB SRAM
  - Multiple peripherals including ADC, DAC, USART, SPI, TWI, and timers
  - Advanced waveform extension (AWeX) for motor control applications
  - Programmable brown-out detection
  - Five sleep modes for power management
- **Moisture Sensitive Level (MSL)**: 
  - MSL 3 per JEDEC J-STD-020E

#### Description:
The **ATXMEGA32D4-MHR** is a high-performance, low-power 8/16-bit microcontroller from Microchip Technology's XMEGA family. It is based on the AVR RISC architecture, which allows for efficient execution of instructions in a single clock cycle. This microcontroller features a rich set of peripherals, including multiple timers, communication interfaces (USART, SPI, TWI), and an integrated 12-bit ADC, making it suitable for a wide range of applications.

#### Typical Applications:
- **Industrial Control**: Used in automation systems for monitoring and controlling processes.
- **Consumer Electronics**: Ideal for devices requiring low power consumption and high performance.
- **Medical Devices**: Suitable for portable medical applications due to its low power features.
- **Sensor Control**: Can be used in applications that require data acquisition from various sensors.
- **Power Management**: Effective in applications that require efficient power usage and management strategies.

This microcontroller is particularly well-suited for applications that demand a combination of processing power, peripheral integration, and low power consumption, making it a versatile choice for embedded systems.