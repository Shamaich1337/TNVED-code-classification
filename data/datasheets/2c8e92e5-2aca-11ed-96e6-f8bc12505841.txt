[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of STM32F407ZGT6 production of ST MICROELECTRONICS from the text:This is information on a product in full production. August 2020 DS8626 Rev 9 1/203STM32F405xx STM32F407xx\nArm® Cortex®-M4 32b MCU+FPU, 210DMIPS, up  to 1MB Flash/192+4KB RAM,  \nUSB OTG HS/FS, Ethernet, 17 TIMs, 3 ADCs, 15 comm. interfaces & camera\nDatasheet - production data\nFeatures\n•Core: Arm® 32-bit Cortex®-M4 CPU with FPU, \nAdaptive real-time accelerator (ART Accelerator) allowing 0-wait state execution from Flash memory, frequency up to 168 MHz, memory protection unit, 210 DMIPS/  \n1.25 DMIPS/MHz  (Dhrystone 2.1), and DSP \ninstructions\n•Memories\n– Up to 1 Mbyte of Flash memory\n– Up to 192+4 Kbytes of SRAM including 64-\nKbyte of CCM (core coupled memory) data RAM\n– 512 bytes of OTP memory\n– Flexible static memory controller \nsupporting Compact Flash, SRAM, PSRAM, NOR and NAND memories\n•LCD parallel interface, 8080/6800 modes\n•Clock, reset and supply management\n– 1.8 V to 3.6 V applic ation supply and I/Os\n– POR, PDR, PVD and BOR– 4-to-26 MHz crystal oscillator\n– Internal 16 MHz factory-trimmed RC (1% \naccuracy)\n– 32 kHz oscillator for RTC with calibration– Internal 32 kHz RC with calibration\n•Low-power operation\n– Sleep, Stop and Standby modes\n–V\nBAT supply for RTC, 20×32 bit backup \nregisters + optional 4 KB backup SRAM\n•3×12-bit, 2.4 MSPS A/D converters: up to 24 \nchannels and 7.2 MSPS in  triple interleaved \nmode\n•2×12-bit D/A converters\n•General-purpose DMA: 16-stream DMA \ncontroller with FIFOs and burst support•Up to 17 timers: up to twelve 16-bit and two 32-\nbit timers up to 168 MHz, each with up to 4 IC/OC/PWM or pulse counter and quadrature (incremental) encoder input\n•Debug mode\n– Serial wire debug (SWD) & JTAG \ninterfaces\n– Cortex-M4 Embedded Trace Macrocell™\n•Up to 140 I/O ports with interrupt capability\n– Up to 136 fast I/Os up to 84 MHz\n– Up to 138 5 V-tolerant I/Os\n•Up to 15 communica tion interfaces\n– Up to 3 × I\n2C interfaces (SMBus/PMBus)\n– Up to 4 USARTs/2 UARTs (10.5 Mbit/s, ISO \n7816 interface, LIN, IrDA, modem control)\n– Up to 3 SPIs (42 Mbits/s), 2 with muxed \nfull-duplex I2S to achieve  audio class \naccuracy via internal audio PLL or external clock\n– 2 × CAN interfaces (2.0B Active)\n– SDIO interface\n•Advanced connectivity\n– USB 2.0 full-speed device/host/OTG \ncontroller with on-chip PHY\n– USB 2.0 high-speed/full-speed \ndevice/host/OTG controller with dedicated DMA, on-chip full-speed PHY and ULPI\n– 10/100 Ethernet MAC with dedicated DMA: \nsupports IEEE 1588v2 hardware, MII/RMIILQFP64 (10 × 10 mm)\nLQFP100 (14 × 14 mm)LQFP144 (20 × 20 mm)UFBGA176 \n(10 × 10 mm)\nLQFP176 (24 × 24 mm)WLCSP90\n(4.223x3.969 mm)FBGA\nwww.st.com\nSTM32F405xx, STM32F407xx\n2/203 DS8626 Rev 9•8- to 14-bit parallel camera interface up to \n54 Mbytes/s\n•True random number generator\n•CRC calculation unit•96-bit unique ID\n•RTC: subsecond accuracy, hardware calendar\n          \nTable 1. Device summary\nReference Part number\nSTM32F405xx STM32F405RG, STM32F405VG, STM32F405ZG, STM32F405OG, STM32F405OE\nSTM32F407xxSTM32F407VG, STM32F407IG, STM32F407ZG,  \nSTM32F407VE, STM32F407ZE, STM32F407IE\nDS8626 Rev 9 3/203STM32F405xx, STM32F407xx Contents\nContents\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12\n2 Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13\n2.1 Full compatibility throughout the family  . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n2.2 Functional overview  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19\n2.2.1 Arm® Cortex®-M4 core with FPU and embedded Flash and SRAM . . . 20\n2.2.2 Adaptive real-time memory accelerator (ART Accelerator)  . . . . . . . . . . 20\n2.2.3 Memory protection unit  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202.2.4 Embedded Flash memory  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20\n2.2.5 CRC (cyclic redundancy check) calculation unit  . . . . . . . . . . . . . . . . . . 21\n2.2.6 Embedded SRAM  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212.2.7 Multi-AHB bus matrix . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n2.2.8 DMA controller (DMA)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22\n2.2.9 Flexible static memory controller (FSMC)  . . . . . . . . . . . . . . . . . . . . . . . 23\n2.2.10 Nested vectored interrupt controller (NVIC) . . . . . . . . . . . . . . . . . . . . . . 23\n2.2.11 External interrupt/event controller (EXTI)  . . . . . . . . . . . . . . . . . . . . . . . 23\n2.2.12 Clocks and startup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 232.2.13 Boot modes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n2.2.14 Power supply schemes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24\n2.2.15 Power supply supervisor  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 242.2.16 Voltage regulator  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26\n2.2.17 Regulator ON/OFF and in ternal reset ON/OFF availability  . . . . . . . . . . 29\n2.2.18 Real-time clock (RTC), backup SRAM and backup registers  . . . . . . . . 292.2.19 Low-power modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30\n2.2.20 V\nBAT operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\n2.2.21 Timers and watchdogs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312.2.22 Inter-integrated circuit interface (I²C)   . . . . . . . . . . . . . . . . . . . . . . . . . . 34\n2.2.23 Universal synchronous/asynchronous receiver transmitters (USART)  . 34\n2.2.24 Serial peripheral interface (SPI) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 352.2.25 Inter-integrated sound (I2S) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\n2.2.26 Audio PLL (PLLI2S) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36\n2.2.27 Secure digital input/output interface (SDI O)  . . . . . . . . . . . . . . . . . . . . . 36\n2.2.28 Ethernet MAC interface with dedicated DMA and IEEE 1588 support  . 36\n2.2.29 Controller area network (bxCAN) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37\nContents STM32F405xx, STM32F407xx\n4/203 DS8626 Rev 92.2.30 Universal serial bus on-the-go full-spee d (OTG_FS) . . . . . . . . . . . . . . . 37\n2.2.31 Universal serial bus on-the-go high-speed (OTG_HS)  . . . . . . . . . . . . . 382.2.32 Digital camera interface (DCMI)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38\n2.2.33 True random number generator (RNG) . . . . . . . . . . . . . . . . . . . . . . . . . 38\n2.2.34 General-purpose input/outputs (GPIOs)  . . . . . . . . . . . . . . . . . . . . . . . . 38\n2.2.35 Analog-to-digital converters (ADCs)  . . . . . . . . . . . . . . . . . . . . . . . . . . . 39\n2.2.36 Temperature sensor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 392.2.37 Digital-to-analog converter (DAC)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39\n2.2.38 Serial wire JTAG debug port (SWJ-DP) . . . . . . . . . . . . . . . . . . . . . . . . . 40\n2.2.39 Embedded Trace Macrocell™ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40\n3 Pinouts and pin description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41\n4 Memory mapping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71\n5 Electrical characteristi cs  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\n5.1 Parameter conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\n5.1.1 Minimum and maximum values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\n5.1.2 Typical values  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\n5.1.3 Typical curves  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\n5.1.4 Loading capacitor  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 765.1.5 Pin input voltage  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\n5.1.6 Power supply scheme  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77\n5.1.7 Current consumption measurement  . . . . . . . . . . . . . . . . . . . . . . . . . . . 78\n5.2 Absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78\n5.3 Operating conditions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79\n5.3.1 General operating conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79\n5.3.2 VCAP_1/VCAP_2 external capacitor . . . . . . . . . . . . . . . . . . . . . . . . . . . 825.3.3 Operating conditions at power-up / power-down (regulator ON) . . . . . . 82\n5.3.4 Operating conditions at power-up / power-down (regulator OFF) . . . . . 82\n5.3.5 Embedded reset and power control bloc k characteristics . . . . . . . . . . . 83\n5.3.6 Supply current characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84\n5.3.7 Wakeup time from low-power mode  . . . . . . . . . . . . . . . . . . . . . . . . . . . 98\n5.3.8 External clock source characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . 99\n5.3.9 Internal clock source charac teristics  . . . . . . . . . . . . . . . . . . . . . . . . . . 103\n5.3.10 PLL characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1045.3.11 PLL spread spectrum clock generatio n (SSCG) characteristics  . . . . . 106\nDS8626 Rev 9 5/203STM32F405xx, STM32F407xx Contents\n5.3.12 Memory characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108\n5.3.13 EMC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1105.3.14 Absolute maximum ratings (electrical sensitivity)  . . . . . . . . . . . . . . . . 112\n5.3.15 I/O current injection characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . 113\n5.3.16 I/O port characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\n5.3.17 NRST pin characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119\n5.3.18 TIM timer characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1205.3.19 Communications interfaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121\n5.3.20 CAN (controller area network) interface  . . . . . . . . . . . . . . . . . . . . . . . 133\n5.3.21 12-bit ADC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1335.3.22 Temperature sensor characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . 138\n5.3.23 V\nBAT monitoring characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139\n5.3.24 Embedded reference voltage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1395.3.25 DAC electrical characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139\n5.3.26 FSMC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142\n5.3.27 Camera interface (DCMI) timing specifications . . . . . . . . . . . . . . . . . . 1615.3.28 SD/SDIO MMC card host interface (SDIO) characteristics  . . . . . . . . . 162\n5.3.29 RTC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163\n6 Package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164\n6.1 WLCSP90 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164\n6.2 LQFP64 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167\n6.3 LQFP100 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 170\n6.4 LQFP144 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1736.5 UFBGA176+25 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . 1776.6 LQFP176 package information . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180\n6.7 Thermal characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184\n7 Ordering information  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 185\nAppendix A Application block diagrams  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186\nA.1 USB OTG full speed (FS) interface solutions . . . . . . . . . . . . . . . . . . . . . 186\nA.2 USB OTG high speed (HS) interface solutions . . . . . . . . . . . . . . . . . . . . 188\nA.3 Ethernet interface solutions. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189\n8 Revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191\nList of tables STM32F405xx, STM32F407xx\n6/203 DS8626 Rev 9List of tables\nTable 1. Device summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 2\nTable 2. STM32F405xx and STM32F407xx: features and peripheral counts. . . . . . . . . . . . . . . . . . 14Table 3. Regulator ON/OFF and internal reset ON/OFF availability. . . . . . . . . . . . . . . . . . . . . . . . . 29\nTable 4. Timer feature comparison. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 31\nTable 5. USART feature comparison . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\nTable 6. Legend/abbreviations used in the pinout table . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46Table 7. STM32F40xxx pin and ball definitions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47Table 8. FSMC pin definition  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 59\nTable 9. Alternate function mapping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 62\nTable 10.  register boundary addresses . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\nTable 11. Voltage characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78\nTable 12. Current characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79\nTable 13. Thermal characteristics.  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 79\nTable 14. General operating conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 79\nTable 15. Limitations depending on the operating power supply range . . . . . . . . . . . . . . . . . . . . . . . 81\nTable 16. VCAP_1/VCAP_2 operating conditions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82Table 17. Operating conditions at power-up / power-down (r egulator ON)  . . . . . . . . . . . . . . . . . . . . 82\nTable 18. Operating conditions at power-up / power-down (r egulator OFF). . . . . . . . . . . . . . . . . . . . 82\nTable 19. Embedded reset and power control block characterist ics. . . . . . . . . . . . . . . . . . . . . . . . . . 83\nTable 20. Typical and maximum current consumption in Run mode, code with data processing  \n running from Flash memory (ART accelerator enabl ed) or RAM  . . . . . . . . . . . . . . . . . . . 85\nTable 21. Typical and maximum current consumption in Run mode, code with data processing  \n running from Flash memory (ART accelerator disabled) . . . . . . . . . . . . . . . . . . . . . . . . . . 86\nTable 22. Typical and maximum current consumption in Sleep  mode . . . . . . . . . . . . . . . . . . . . . . . . 89\nTable 23. Typical and maximum current consumptions in St op mode . . . . . . . . . . . . . . . . . . . . . . . . 90\nTable 24. Typical and maximum current consumptions in Standby mode . . . . . . . . . . . . . . . . . . . . . 90\nTable 25. Typical and maximum current consumptions in V\nBAT mode. . . . . . . . . . . . . . . . . . . . . . . . 91\nTable 26. Typical current consumption in  Run mode, code with data processing  \n running from Flash memory, regulator ON (ART accelerator enabled  \nexcept prefetch), VDD = 1.8 V . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93\nTable 27. Switching output I/O current cons umption  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95\nTable 28. Peripheral current consumption . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 96\nTable 29. Low-power mode wakeup timings  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99Table 30. High-speed external user clock characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99\nTable 31. Low-speed external user clock characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 100\nTable 32. HSE 4-26 MHz oscillator characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101Table 33. LSE oscillator characteristics (f\nLSE = 32.768 kHz) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102\nTable 34. HSI oscillator characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103\nTable 35. LSI oscillator characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103\nTable 36. Main PLL characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104\nTable 37. PLLI2S (audio PLL) characteristic s  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 05\nTable 38. SSCG parameters constraint . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  106\nTable 39. Flash memory characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108\nTable 40. Flash memory programming. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108\nTable 41. Flash memory programming with VPP . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110Table 42. Flash memory endurance and data retention . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110\nTable 43. EMS characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111\nTable 44. EMI characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 112\nDS8626 Rev 9 7/203STM32F405xx, STM32F407xx List of tables\nTable 45. ESD absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11 2\nTable 46. Electrical sensitivities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 113\nTable 47. I/O current injection susceptibility . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114\nTable 48. I/O static characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 114\nTable 49. Output voltage characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 116\nTable 50. I/O AC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117\nTable 51. NRST pin characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 119\nTable 52. Characteristics of TIMx connected to the APB1 domain  . . . . . . . . . . . . . . . . . . . . . . . . . 120Table 53. Characteristics of TIMx connected to the APB2 domain  . . . . . . . . . . . . . . . . . . . . . . . . . 121Table 54. I2C analog filter characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 121\nTable 55. SPI dynamic characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122\nTable 56. I2S dynamic characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126\nTable 57. USB OTG FS startup time  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128\nTable 58. USB OTG FS DC electrical characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128Table 59. USB OTG FS electrical characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129Table 60. USB HS DC electrical characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12 9\nTable 61. USB HS clock timing parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12 9\nTable 62. ULPI timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . 130\nTable 63. Ethernet DC electrical characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131\nTable 64. Dynamic characteristics: Ethernet MAC signals for SMI. . . . . . . . . . . . . . . . . . . . . . . . . . 131\nTable 65. Dynamic characteristics: Ethernet MAC signals fo r RMII . . . . . . . . . . . . . . . . . . . . . . . . . 132\nTable 66. Dynamic characteristics: Ethernet MAC signals for MII . . . . . . . . . . . . . . . . . . . . . . . . . . 133Table 67. ADC characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133\nTable 68. ADC accuracy at f\nADC = 30 MHz  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 135\nTable 69. Temperature sensor characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13 8\nTable 70. Temperature sensor calibration values. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138\nTable 71. VBAT monitoring characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139\nTable 72. Embedded internal reference voltage. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139Table 73. Internal reference voltage calibration values  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139\nTable 74. DAC characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139\nTable 75. Asynchronous non-multiplexed SRAM/PSRAM/NOR  read timings . . . . . . . . . . . . . . . . . 143\nTable 76. Asynchronous non-multiplexed SRAM/PSRAM/NOR  write timings . . . . . . . . . . . . . . . . . 144\nTable 77. Asynchronous multiplexed PSRAM/NOR read timings.  . . . . . . . . . . . . . . . . . . . . . . . . . . 145\nTable 78. Asynchronous multiplexed PSRAM/NOR write timings  . . . . . . . . . . . . . . . . . . . . . . . . . . 146\nTable 79. Synchronous multiplexed NOR/ PSRAM read timings  . . . . . . . . . . . . . . . . . . . . . . . . . . . 148\nTable 80. Synchronous multiplexed PSRAM write timings. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149\nTable 81. Synchronous non-multiplexed NOR/PSRAM read ti mings . . . . . . . . . . . . . . . . . . . . . . . . 151\nTable 82. Synchronous non-multiplexed PSRAM write timings . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152\nTable 83. Switching characteristics for PC Card/CF read and write cycles  \n in attribute/common space. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157\nTable 84. Switching characteristics for PC Card/CF read and write cycles  \n in I/O space . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 158\nTable 85. Switching characteristics for NAND Flash read cycles .  . . . . . . . . . . . . . . . . . . . . . . . . . . 160\nTable 86. Switching characteristics for NA ND Flash write cycles. . . . . . . . . . . . . . . . . . . . . . . . . . . 161\nTable 87. DCMI characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161\nTable 88. Dynamic characteristics: SD / MMC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163Table 89. RTC characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163\nTable 90. WLCSP90 - 4.223 x 3.969 mm, 0.400 mm pitch wafer level chip scale  \npackage mechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165\nTable 91. WLCSP90 recommended PCB design rules  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166\nTable 92. LQFP64 – 64-pin 10 x 10 mm low-profile quad flat package  \nmechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  167\nList of tables STM32F405xx, STM32F407xx\n8/203 DS8626 Rev 9Table 93. LQFP100 – 100-pin, 14 x 14 mm low-profile quad flat package  \nmechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  170\nTable 94. LQFP144 - 144-pin, 20 x 20 mm low-profile quad flat package  \nmechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  174\nTable 95. UFBGA176+25 ball, 10 × 10 × 0. 65 mm pitch, ultra thin fine pitch  \nball grid array mechanical data. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177\nTable 96. UFBGA176+2 recommended PCB design rules (0 .65 mm pitch BGA)  . . . . . . . . . . . . . . 178\nTable 97. LQFP176 - 176-pin, 24 x 24 mm low profile quad flat package  \nmechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  180\nTable 98. Package thermal characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  184\nTable 99. Document revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191\nDS8626 Rev 9 9/203STM32F405xx, STM32F407xx List of figures\nList of figures\nFigure 1. Compatible board desi gn between STM32F10xx/STM32F40xxx for LQFP64 . . . . . . . . . . 16\nFigure 2. Compatible board design STM32F10xx/STM32F2/STM32F40xxx  \nfor LQFP100 package. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\nFigure 3. Compatible board design between STM32F10xx/STM32F2/STM32F40xxx  \nfor LQFP144 package. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\nFigure 4. Compatible board design between STM32F2 and STM32F40xxx  \n for LQFP176 and BGA176 packages  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18\nFigure 5. STM32F40xxx block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  19\nFigure 6. Multi-AHB matrix. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22\nFigure 7. Power supply supervisor interconnection with in ternal reset OFF . . . . . . . . . . . . . . . . . . . 25\nFigure 8. PDR_ON and NRST control with internal reset OFF . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26\nFigure 9. Regulator OFF  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27\nFigure 10. Startup in re gulator OFF mode: slow VDD slope  \n- power-down reset risen after VCAP_1 /VCAP_2 stabilization . . . . . . . . . . . . . . . . . . . . . . . . 28\nFigure 11. Startup in re gulator OFF mode: fast VDD slope  \n- power-down reset risen before VCAP_1 /VCAP_2 stabilization  . . . . . . . . . . . . . . . . . . . . . . 29\nFigure 12. STM32F40xxx LQFP64 pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41\nFigure 13. STM32F40xxx LQFP100 pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4 2\nFigure 14. STM32F40xxx LQFP144 pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4 3\nFigure 15. STM32F40xxx LQFP176 pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4 4\nFigure 16. STM32F40xxx UFBGA176 ballout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45Figure 17. STM32F40xxx WLCSP90 ballout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46\nFigure 18. STM32F40xxx memory map. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  71\nFigure 19. Pin loading conditions. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 76\nFigure 20. Pin input voltage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\nFigure 21. Power supply scheme  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77\nFigure 22. Current consumption measurement scheme . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78\nFigure 23. External capacitor C\nEXT . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82\nFigure 24. Typical current consumption versus temperature, Run mode, code with data  \nprocessing running from Flash (ART accelerato r ON) or RAM, and peripherals OFF . . . . 87\nFigure 25. Typical current consumption versus temperature, Run mode, code with data  \nprocessing running from Flash (ART accelerato r ON) or RAM, and peripherals ON . . . . . 87\nFigure 26. Typical current consumption versus temperature, Run mode, code with data  \nprocessing running from Flash (ART accelerator OFF) or RAM, and peripherals OFF . . . 88\nFigure 27. Typical current consumption versus temperature, Run mode, code with data  \nprocessing running from Flash (ART accelerator OFF) or RAM, and peripherals ON . . . . 88\nFigure 28. Typical VBAT current consumption (LSE and RTC ON/backup RAM OFF)  . . . . . . . . . . . . 91\nFigure 29. Typical VBAT current consumption (LSE and RTC ON/backup RAM ON) . . . . . . . . . . . . . 92\nFigure 30. High-speed external clock source AC timing diag ram  . . . . . . . . . . . . . . . . . . . . . . . . . . . 100\nFigure 31. Low-speed external clock source AC timing diagra m. . . . . . . . . . . . . . . . . . . . . . . . . . . . 101\nFigure 32. Typical application with an 8 MHz crystal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10 2\nFigure 33. Typical application with a 32.768 kHz crystal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103\nFigure 34. ACCLSI versus temperature . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104\nFigure 35. PLL output clock waveforms in center spread mode  . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107\nFigure 36. PLL output clock waveforms in down spread mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108\nFigure 37. I/O AC characteristics definition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 118\nFigure 38. Recommended NRST pin protection  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119\nFigure 39. SPI timing diagram - slave mode and CPHA = 0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124\nList of figures STM32F405xx, STM32F407xx\n10/203 DS8626 Rev 9Figure 40. SPI timing diagram - slave mode and CPHA = 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124\nFigure 41. SPI timing diagram - master mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 25\nFigure 42. I2S slave timing diagram (Philip s protocol)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12 7\nFigure 43. I2S master timing  diagram (Philips protocol)(1). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127\nFigure 44. USB OTG FS timings: definition of data signal rise and fall time . . . . . . . . . . . . . . . . . . . 129Figure 45. ULPI timing diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130\nFigure 46. Ethernet SMI timing diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 131\nFigure 47. Ethernet RMII timing diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 132\nFigure 48. Ethernet MII timing di agram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 132\nFigure 49. ADC accuracy characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 136\nFigure 50. Typical connection diagram using the ADC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136Figure 51. Power supply and reference decoupling (V\nREF+ not connected to VDDA). . . . . . . . . . . . . 137\nFigure 52. Power supply and reference decoupling (VREF+ connected to VDDA). . . . . . . . . . . . . . . . 138\nFigure 53. 12-bit buffered /non-buffered DAC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  142\nFigure 54. Asynchronous non-multip lexed SRAM/PSRAM/NOR read waveforms . . . . . . . . . . . . . . 143\nFigure 55. Asynchronous non-multip lexed SRAM/PSRAM/NOR write wavefo rms . . . . . . . . . . . . . . 144\nFigure 56. Asynchronous multiplexed PSRAM/NOR read wavefo rms. . . . . . . . . . . . . . . . . . . . . . . . 145\nFigure 57. Asynchronous multiplexed PSRAM/NOR write wave forms  . . . . . . . . . . . . . . . . . . . . . . . 146\nFigure 58. Synchronous multiplexed NOR/ PSRAM read timings  . . . . . . . . . . . . . . . . . . . . . . . . . . . 147\nFigure 59. Synchronous multiplexed PSRAM write timings. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149\nFigure 60. Synchronous non-multiplexed NOR/PSRAM read ti mings . . . . . . . . . . . . . . . . . . . . . . . . 150\nFigure 61. Synchronous non-multiplexed PSRAM write timings . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152\nFigure 62. PC Card/CompactFlash controller waveforms for common me mory read access . . . . . . 153\nFigure 63. PC Card/CompactFlash controller waveforms for common me mory write access. . . . . . 154\nFigure 64. PC Card/CompactFlash controlle r waveforms for attribute memory read  \naccess. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 155\nFigure 65. PC Card/CompactFlash controlle r waveforms for attribute memory write  \naccess. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 156\nFigure 66. PC Card/CompactFlash cont roller waveforms for I/O space read access . . . . . . . . . . . . 156\nFigure 67. PC Card/CompactFlash cont roller waveforms for I/O space write access . . . . . . . . . . . . 157\nFigure 68. NAND controller waveforms for read access . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159\nFigure 69. NAND controller waveforms for wr ite access . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159\nFigure 70. NAND controller waveforms for common memory read access . . . . . . . . . . . . . . . . . . . . 160\nFigure 71. NAND controller waveforms for common memory write access. . . . . . . . . . . . . . . . . . . . 160\nFigure 72. DCMI timing diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 161\nFigure 73. SDIO high-speed mode  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162\nFigure 74. SD default mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163\nFigure 75. WLCSP90 - 4.223 x 3.969 mm, 0.400 mm pitch wafer level chip scale  \npackage outline. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164\nFigure 76. WLCSP90 - 4.223 x 3.969 mm, 0.400 mm pitch wafer level chip scale  \nrecommended footprint. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165\nFigure 77. WLCSP90 marking example (package top view) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166\nFigure 78. LQFP64 – 64-pin, 10 x 10 mm low-profile quad  flat package outline . . . . . . . . . . . . . . . . 167\nFigure 79. LQFP64 – 64-pin, 10 x 10 mm low-profile quad flat package  \nrecommended footprint. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 168\nFigure 80. LPQF64 marking example (package top view)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169\nFigure 81. LQFP100 - 100-pin, 14 x 14 mm low-profile quad flat package outline  . . . . . . . . . . . . . . 170Figure 82. LQFP100 - 100-pin, 14 x 14 mm low-profile quad flat  \nrecommended footprint. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171\nFigure 83. LQFP100 marking example (package top view)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172Figure 84. LQFP144 - 144-pin, 20 x 20 mm low-profile quad flat package outline  . . . . . . . . . . . . . . 173Figure 85. LQFP144 - 144-pin,20 x 20 mm low-profile quad flat package  \nDS8626 Rev 9 11/203STM32F405xx, STM32F407xx List of figures\nrecommended footprint. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175\nFigure 86. LQFP144 marking example (package top view)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176Figure 87. UFBGA176+25 ball, 10 x 10 mm, 0.65 mm pitch, ultra fine pitch  \nball grid array package outline . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177\nFigure 88. UFBGA176+25 - 201-ball, 10 x 10 mm, 0.65 mm pitch, ultra fine pitch  \n ball grid array recommended footprint .  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178\nFigure 89. UFBGA176+25 marking example (package top view ) . . . . . . . . . . . . . . . . . . . . . . . . . . . 179\nFigure 90. LQFP176 - 176-pin, 24 x 24 mm low profile qu ad flat package outline  . . . . . . . . . . . . . . 180\nFigure 91. LQFP176 - 176-pin, 24 x 24 mm low profile quad flat recommended footprint. . . . . . . . . 182Figure 92. LQFP176 marking example (package top view)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 183Figure 93. USB controller configured as peripheral-only and used  \nin Full speed mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 86\nFigure 94. USB controller configured as host-only and used in full speed mode. . . . . . . . . . . . . . . . 186Figure 95. USB controller configured in dual mode and used in full speed mode . . . . . . . . . . . . . . . 187Figure 96. USB controller configured as peripheral, host, or dual-mode  \nand used in high speed mode. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 188\nFigure 97. MII mode using a 25 MHz crystal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189\nFigure 98. RMII with a 50 MHz oscillator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189\nFigure 99. RMII with a 25 MHz crystal and PHY with PLL. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190\nIntroduction STM32F405xx, STM32F407xx\n12/203 DS8626 Rev 91 Introduction\nThis datasheet provides the description of the STM32F405xx and STM32F407xx lines of \nmicrocontrollers. For more deta ils on the whole STMicroelectro nics STM32™ family, please \nrefer to Section  2.1: Full compatibility throughout the family .\nThe STM32F405xx and STM32F407xx datasheet should be read in conjunction with the \nSTM\n32F4xx reference manual which is available from the STMicroelectronics website \nwww.st.com .\nFor information on the Arm®(a) Cortex®-M4 core, please refer to the Cortex®-M4 \nprogramming manual (PM0214) available from w ww.st.com.\na. Arm is a registered trademark of Arm Limited (o r its subsidiaries) in the US and/or elsewhere.\nDS8626 Rev 9 13/203STM32F405xx, STM32F407xx Description\n2 Description\nThe STM32F405xx and STM32F407xx family is based on the high-performance Arm® \nCortex®-M4 32-bit RISC core operating at a freq uency of up to 168 MHz. The Cortex-M4 \ncore features a Floating point unit (FPU) sing le precision which supports all Arm single-\nprecision data-processing instructions and data types. It also implements a full set of DSP instructions and a memory protection unit (MPU) which enhances application security. \nThe STM32F405xx and STM32F407xx family incorporates high-speed embedded \nmemories (Flash memory up to 1 Mbyte, up to 192  Kbytes of SRAM), up to 4  Kbytes of \nbackup SRAM, and an extensive range of enhanced I/Os and peripherals connected to two APB buses, three AHB bu ses and a 32-bit multi-AHB bus matrix.\nAll devices offer three 12-bit  ADCs, two DACs, a low-power RTC, twelve general-purpose \n16-bit timers including two PWM timers for mo tor control, two general-purpose 32-bit timers. \na true random number generator (RNG). They also feature standard and advanced communication interfaces. \n• Up to three I2Cs\n• Three SPIs, two I2Ss full duplex. To achieve audio class accuracy, the I2S peripherals \ncan be clocked via a dedicated internal audi o PLL or via an external clock to allow \nsynchronization.\n• Four USARTs plus two UARTs\n• An USB OTG full-speed and a USB OTG high-s peed with full-speed capability (with the \nULPI), \n• Two CANs\n• An SDIO/MMC interface\n• Ethernet and the camera interface available on STM32F407xx devices only.\nNew advanced peripherals include an SDIO, an  enhanced flexible static memory control \n(FSMC) interface (for devices offered in pa ckages of 100 pins and more), a camera \ninterface for CMOS sensors. Refer to Table  2: STM32F405xx and STM32F407xx: features \nand peripheral counts  for the list of peripherals available on each part number. \nThe STM32F405xx and STM32F407xx family operates in the –40 to +105  °C temperature \nrange from a 1.8 to 3.6  V power supply. The supply voltage can drop to 1.7  V when the \ndevice operates in the 0 to 70  °C temperature range using an external power supply \nsupervisor: refer to Section  : Internal reset OFF . A comprehensive set of power-saving \nmode allows the design of  low-power applications. \nThe STM32F405xx and STM32F407xx family offers devices in various packages ranging \nfrom 64 pins to 176 pins. The set of incl uded peripherals changes with the device chosen.\nThese features make the STM32F405xx and STM32F407xx microcontroller family suitable \nfor a wide range of applications:\n• Motor drive and application control\n• Medical equipment\n• Industrial applications: PLC,  inverters, circuit breakers\n• Printers, and scanners\n• Alarm systems, video intercom, and HVAC\n• Home audio appliances\nDescription STM32F405xx, STM32F407xx\n14/203 DS8626 Rev 9Figure  5 shows the general block diagram of the device family.\n  \nTable 2. STM32F405xx and STM32F407xx: features and peripheral counts \nPeripherals STM32F405RG STM32F405OG STM32F405VG STM32F 405ZG STM32F405OE STM32F407Vx STM32F407Zx STM32F407Ix\nFlash memory in \nKbytes1024 512 512 1024 512 1024 512 1024\nSRAM in \nKbytesSystem 192(112+16+64)\nBackup 4\nFSMC memory \ncontrollerNo Yes(1)\nEthernet No Yes\nTimersGeneral-\npurpose10\nAdvanced\n-control2\nBasic 2\nIWDG Yes\nWWDG YesRTC Yes\nTrue random number \ngeneratorYes\nSTM32F405xx, STM32F407xx Description\nDS8626 Rev 9 15/203Communi\ncation interfacesSPI / I2S 3/2 (full duplex)\n(2)\nI2C 3\nUSART/ \nUART4/2\nUSB \nOTG FSYes\nUSB \nOTG HSYes\nCAN 2\nSDIO Yes\nCamera interface No Yes\nGPIOs 51 72 82 114 72 82 114 140\n12-bit ADC\nNumber of channels3\n16 13 16 24 13 16 24 24\n12-bit DAC  \nNumber of channelsYes\n2\nMaximum CPU \nfrequency 168 MHz\nOperating voltage 1.8 to 3.6 V(3)\nOperating \ntemperaturesAmbient temperatures: –40 to +85 °C /–40 to +105 °C\nJunction temperature: –40 to + 125 °C\nPackage LQFP64 WLCSP90 LQFP100 LQ FP144 WLCSP90 LQFP100 LQFP144UFBGA176\nLQFP176\n1. For the LQFP100 and WLCSP90 packages, only FS MC Bank1 or Bank2 are available. Bank 1 can only support a multiplexed NOR/PSRAM memory using the NE1 Chip \nSelect. Bank2 can only support a 16-  or 8-bit NAND Flash memory using the NCE2 Chip Select. The interrupt line cannot be used s ince Port G is not available in this \npackage.\n2. The SPI2 and SPI3 interfaces give the flexibility to work  in an exclusive way in either the SPI mode or the I2S audio mode.\n3. VDD/VDDA minimum value of 1.7 V is obtained when t he device operates in reduced temperature r ange, and with the use of an external powe r supply supervisor (refer to \nSection : Internal reset OFF ).Table 2. STM32F405xx and STM32F407xx: features and peripheral counts (continued)\nPeripherals STM32F405RG STM32F405OG STM32F405VG STM32F 405ZG STM32F405OE STM32F407Vx STM32F407Zx STM32F407Ix\nDescription STM32F405xx, STM32F407xx\n16/203 DS8626 Rev 92.1 Full compatibility throughout the family\nThe STM32F405xx and STM32F407xx are part of the STM32F4 family. They are fully pin-\nto-pin, software and feature compatible with the STM32F2xx devices, allowing the user to \ntry different memory densities, peripherals, and performances (FPU, higher frequency) for a greater degree of freedom during the development cycle.\nThe STM32F405xx and STM32F 407xx devices maintain a close compatibility with the \nwhole STM32F10xxx family. All functional pins are pin-to-pin compatible. The STM32F405xx and STM32F407xx, however, are not drop-in replacements for the STM32F10xxx devices: the two families do not have the same power scheme, and so their \npower pins are different. Nonetheless, transition from the STM32F10xxx to the STM32F40xxx family remains simple as only a few pins are impacted.\nFigure  4, Figure  3, Figure  2, and Figure  1 give compatible board designs between the \nSTM32F40xxx, STM32F2, an d STM32F10xxx families.\nFigure 1. Compatible board design betw een STM32F10xx/STM32F40xxx for LQFP64 \n31\n11 6173233 48\n6449 47VSS\nVSSVSSVSS\n0 Ω resistor or soldering bridge\npresent for the STM32F10xx\nconfiguration, not present in the\nSTM32F4xx configuration \nai18489\nDS8626 Rev 9 17/203STM32F405xx, STM32F407xx Description\nFigure 2. Compatible board design STM32F10xx/STM32F2/STM32F40xxx\nfor LQFP100 package\nFigure 3. Compatible board design between STM32F10xx/STM32F2/STM32F40xxx\nfor LQFP144 packageai18488d2049\n12 5265051 75\n10076 73\n19\nVSSVSS\nVDDVSSVSS\nVSS0 Ω resistor or soldering bridge\npresent for the STM32F10xxx configuration, not present in theSTM32F4xx configuration  99 (VSS)\nVSS\nTwo 0 Ω resistors connected to:  \n- VSS for the STM32F10xx- VSS for the STM32F4xx- VSS or NC for the STM32F2xxVSS for STM32F10xx\nVDD for STM32F4xx\nai18487d3171\n13 6377273 108\n144109\nVSS0 Ω resistor or soldering bridge\npresent for the STM32F10xxconfiguration, not present in the STM32F4xx configuration  \n106VSS\n30\nTwo 0 Ω  resistors connected to: - V\nSS for the STM32F10xx\n- VSS, VDD or NC for the STM32F2xx\n- VDD or signal from external power supply supervisor for the STM32F4xxVSS VDDVSSVSS\n143 (PDR_ON)\nVSS VDD\nVSS  for STM32F10xx\nVDD for STM32F4xxSignal from \nexternal power \nsupply \nsupervisorNot populated when 0 Ω \nresistor or soldering bridge present  \nNot populated for STM32F10xx \nDescription STM32F405xx, STM32F407xx\n18/203 DS8626 Rev 9Figure 4. Compatible board design between STM32F2 and STM32F40xxx\n for LQFP176 and BGA176 packages\nMS19919V314 4458889 132\n176133\nTwo 0 Ω  resistors connected to:    \n- VSS, VDD or NC for the STM32F2xx\n- VDD or signal from external power supply supervisor for the STM32F4xx171 (PDR_ON)\nVSS VDDSignal from external \npower supply \nsupervisor\nDS8626 Rev 9 19/203STM32F405xx, STM32F407xx Description\n2.2 Functional overview\nFigure 5. STM32F40xxx block diagram\n1. The camera interface and ethernet ar e available only on STM32F407xx devices.MS19920V4GPIO PORT A\nAHB/APB2140 AFPA[15:0]\nTIM1 / PWM4 compl. channels (TIM1_CH1[1:4]N,\n4 channels (TIM1_CH1[1:4]ETR,\nBKIN as AF\nRX, TX, CK,\nCTS, RTS as AF\nMOSI, MISO,\nSCK, NSS as AF\nAPB1 30MH z\n8 analog inputs common\nto the 3 ADCsVDDREF_ADCMOSI/SD, MISO/SD_ext, SCK/CK\nNSS/WS, MCK as AF\nTX, RX\nDAC1_OUT\nas AFITFWWDG4 KB BKPSRAMRTC_AF1OSC32_IN\nOSC32_OUTVDDA, VSSA\nNRST\n16bSDIO / MMCD[7:0]\nCMD, CK as AFVBAT = 1.65 to 3.6 V\nDMA2\nSCL, SDA, SMBA as AFJTAG & SW\nArm Cortex-M4  \n168 MHzNVIC ETMMPU\nTRACECLK\nTRACED[3:0]\nEthernet MAC\n10/100DMA/\nFIFOMII or RMII as AF\nMDIO as AF\nUSB\nOTG HSDP, DM\nULPI:CK, D[7:0], DIR, STP, NXT\nID, VBUS, SOF\nDMA2\n8 Streams\nFIFO\nART ACCEL/\nCACHE\nSRAM 112 KBCLK, NE [3:0], A[23:0],\nD[31:0], OEN, WEN,\nNBL[3:0], NL, NREG,\nNWAIT/IORDY, CD\nINTN, NIIS16 as AF\nRNG\nCamera\ninterfaceHSYNC, VSYNC\nPUIXCLK, D[13:0]PHYUSB\nOTG FSDP\nDM\nID, VBUS, SOFFIFO\nAHB1 168 MHzPHY\nFIFO\n@V DDA\n@V DDAPOR/PDR\nBORSupply\nsupervision\n@V DDAPVDIntPOR  \nreset\nXTAL 32 kHzMA N AGT\nRTCRC HSFCLKRC L S\nPWR\ninterfaceIWDG\n@V BAT\nAWUReset &\nclock\ncontrolP L L1&2PCLKxVDD = 1.8 to 3.6 V\nVSSVCAP1, VCPA2Voltage\nregulator\n3.3 to 1.2 VVDDPower managmt\nRTC_AF1 Backup registerAHB bus-matrix 8S7M\nLS\n2 channels as AF\nDAC1\nDAC2Flash\nup to  \n1 MBSRAM, PSRAM, NOR Flash,\nPC Card (ATA), NAND FlashExternal memory\ncontroller (FSMC)\nTIM6\nTIM7TIM2\nTIM3\nTIM4\nTIM5\nTIM12\nTIM13\nTIM14\nUSART2\nUSART3\nUART4\nUART5\nSP3/I2S3\nI2C1/SMBUS\nI2C2/SMBUS\nI2C3/SMBUS\nbxCAN1\nbxCAN2SPI1EXT IT. WKUPD-BUS\nFIFOFPU\nAPB142  MHz (max)SRAM 16 KBCCM data RAM 64 KB\nAHB3\nAHB2 168 MHzNJTRST, JTDI,\nJTCK/SWCLK\nJTDO/SWD, JTDO\nI-BUS\nS-BUS\nDMA/\nFIFO\nDMA18 Streams\nFIFO\nPB[15:0]\nPC[15:0]\nPD[15:0]\nPE[15:0]\nPF[15:0]\nPG[15:0]\nPH[15:0]\nPI[11:0]GPIO PORT B\nGPIO PORT C\nGPIO PORT D\nGPIO PORT E\nGPIO PORT F\nGPIO PORT G\nGPIO PORT H\nGPIO PORT I\nTIM8 / PWM 16b4 compl. channels (TIM1_CH1[1:4]N,\n4 channels (TIM1_CH1[1:4]ETR,\nBKIN as AF\n1 channel as AF\n1 channel as AF\nRX, TX, CK,\nCTS, RTS as AF\n8 analog inputs common\nto the ADC1 & 2\n8 analog inputs for ADC3\nDAC2_OUT\nas AF16b16b\nSCL, SDA, SMBA as AFSCL, SDA, SMBA as AFMOSI/SD, MISO/SD_ext, SCK/CK\nNSS/WS, MCK as AF\nTX, RXRX, TX as AFRX, TX as AFRX, TX as AF\nCTS, RTS as AFRX, TX as AF\nCTS, RTS as AF1 channel as AF\nsmcard\nirDAsmcard\nirDA16b16b16b\n1 channel as AF2 channels as AF32b16b16b32b\n4 channels4 channels, ETR as AF4 channels, ETR as AF4 channels, ETR as AF\nDMA1\nAHB/APB1\nLSOSC_IN\nOSC_OUTHCLKxXTAL OSC\n4- 16MHzFIFO\nSP2/I2S2NIORD, IOWR, INT[2:3]\nADC3ADC2ADC1Temperature sensor\nIFTIM9 16b\nTIM10 16b\nTIM11 16b\nsmcard\nirDA USART1\nirDAUSART6smcard\nAPB2 84 MHz@V DD@V DD\n@V DDA\nDescription STM32F405xx, STM32F407xx\n20/203 DS8626 Rev 92.2.1 Arm® Cortex®-M4 core with FPU and embedded Flash and SRAM\nThe Arm Cortex-M4 processor with FPU is the latest generation of Arm processors for \nembedded systems. It was developed to provide a low-cost platform that meets the needs of MCU implementation, with a reduced pin count and low-power consumption, while delivering outstanding computational performance and an advanced response to interrupts.\nThe Arm Cortex-M4 32-bit RISC processor with FPU features exceptio nal code-efficiency, \ndelivering the high-performance expected from an Arm core in the memory size usually \nassociated with 8- and 16-bit devices.\nThe processor supports a set of DSP instructions which allow efficient signal processing and complex algorithm execution. \nIts single precision FPU (floating point unit) speeds up software development by using metalanguage development tools, while avoiding saturation.\nThe STM32F405xx and STM32F407xx family is compatible with all Ar m tools and software.\nFigure  5 shows the general block diagram of the STM32F40xxx family.\nNote: Cortex-M4 with FPU is bina ry compatible with Cortex-M3.\n2.2.2 Adaptive real-time memory accelerator (ART Accelerator)\nThe ART Accelerator is a memory accelerator which is optimized for STM32 industry-\nstandard Arm® Cortex®-M4 with FPU processors. It balances the inherent performance \nadvantage of the Arm Cortex-M4 with FPU over Flash memory technologies, wh ich normally \nrequires the processor to wait for the Flash memory at higher frequencies.\nTo release the processor full 210  DMIPS performance at this frequency, the accelerator \nimplements an instruction prefetch queue and branch cache, which increases program \nexecution speed from the 128-bit Flash memory. Based on CoreMark benchmark, the performance achieved thanks to the ART accele rator is equivalent to 0 wait state program \nexecution from Flash memory at a CPU frequency up to 168 MHz.\n2.2.3 Memory protection unit\nThe memory protection unit (MPU) is used to manage the CPU accesses to memory to prevent one task to accidentally corrupt the me mory or resources used by any other active \ntask. This memory area is organized into up to  8 protected areas that can in turn be divided \nup into 8 subareas. The protection area sizes are between 32 bytes and the whole 4 \ngigabytes of addressable memory.\nThe MPU is especially helpful for applications where some critical or certified code has to be \nprotected against the misbehavior of other task s. It is usually managed by an RTOS (real-\ntime operating system). If a prog ram accesses a memory location  that is prohibited by the \nMPU, the RTOS can detect it and take action . In an RTOS environment, the kernel can \ndynamically update the MPU area setting, based on the process to be executed.\nThe MPU is optional and can be bypasse d for applications that do not need it.\n2.2.4 Embedded Flash memory\nThe STM32F40xxx devices embed a Flash memory of 512 Kbytes or 1 Mbytes available for \nstoring programs and data, plus 512 bytes of OTP memory.\nDS8626 Rev 9 21/203STM32F405xx, STM32F407xx Description\n2.2.5 CRC (cyclic redundan cy check) calculation unit\nThe CRC (cyclic redundancy check) calculation unit  is used to get a CRC code from a 32-bit \ndata word and a fixed generator polynomial.\nAmong other applications, CRC-based techniques  are used to verify data transmission or \nstorage integrity. In the scope of the EN/IEC  60335-1 standard, they offer a means of  \nverifying the Flash memory integrity. The C RC calculation unit help s compute a software \nsignature during runtime, to be compared wit h a reference signature generated at link-time \nand stored at a given memory location.\n2.2.6 Embedded SRAM\nAll STM32F40xxx products embed:\n• Up to 192 Kbytes of system SRAM including  64 Kbytes of CCM (core coupled memory) \ndata RAM\nRAM memory is accessed (read/write) at  CPU clock speed with 0 wait states.\n• 4 Kbytes of backup SRAM \nThis area is accessible only from the CP U. Its content is protected against possible \nunwanted write accesses, and is retained in Standby or V BAT mode.\n2.2.7 Multi-AHB bus matrix\nThe 32-bit multi-AHB bu s matrix interconnect s all the masters (CPU, DMAs, Ethernet, USB \nHS) and the slaves (Flash memory, RAM, FS MC, AHB and APB peripher als) and ensures a \nseamless and efficient operation even when several high-speed peripherals work simultaneously.\nDescription STM32F405xx, STM32F407xx\n22/203 DS8626 Rev 9Figure 6. Multi-AHB matrix\n2.2.8 DMA controller (DMA)\nThe devices feature two general-purpose dual-port DMAs (DMA1 and DMA2) with 8 \nstreams each. They are able to manage memory-to-memory, peripheral-to-memory and memory-to-peripheral transfers. They featur e dedicated FIFOs for APB/AHB peripherals, \nsupport burst transfer and are designed to provide the maximum peripheral bandwidth (AHB/APB).\nThe two DMA controllers support circular buffe r management, so that no specific code is \nneeded when the controller reaches the end of  the buffer. The two DMA controllers also \nhave a double buffering feature, which autom ates the use and switching of two memory \nbuffers without requiring any special code.\nEach stream is connected to dedicated har dware DMA requests, with support for software \ntrigger on each stream. Configuration is made by software and transfer sizes between source and destination are independent.\nThe DMA can be used with the main peripherals: \n• SPI and I2S\n• I2C\n• USART\n• General-purpose, basic and advanced-control timers TIMx\n• DAC\n• SDIO\n• Camera interface (DCMI)\n• ADC.ARM\nCortex-M4GP\nDMA1GP\nDMA2MAC\nEthernetUSB OTG\nHS\nBus matrix-SICODE\nDCODE\nACCELFlash\nmemory\nSRAM1 \n112 Kbyte\nSRAM2\n16 Kbyte\nAHB1\nperipherals\nAHB2\nFSMC\nStatic MemCtlI-bus\nD-bus\nS-bus\nDMA_PI\nDMA_MEM1\nDMA_MEM2\nDMA_P2\nETHERNET_M\nUSB_HS_M\nai18490dCCM data RAM 64-Kbyte\nAPB1\nAPB2peripherals\nDS8626 Rev 9 23/203STM32F405xx, STM32F407xx Description\n2.2.9 Flexible static memory controller (FSMC)\nThe FSMC is embedded in the STM32F405xx and STM32F407xx family. It has four Chip \nSelect outputs supporting the following mo des: PCCard/Compact Flash, SRAM, PSRAM, \nNOR Flash and NAND Flash.\nFunctionality overview:\n• Write FIFO\n• Maximum FSMC_CLK frequency for synchronous accesses is 60 MHz.\nLCD parallel interface\nThe FSMC can be configured to interface seam lessly with most graphic LCD controllers. It \nsupports the Intel 8080 and Motorola 6800 modes, and is flexible enough to adapt to specific LCD interfaces. This LCD parallel in terface capability makes it  easy to build cost-\neffective graphic applications using LCD modules with embedded controllers or high performance solutions using external controllers with dedicated acceleration.\n2.2.10 Nested vectored in terrupt controller (NVIC)\nThe STM32F405xx and STM32F407xx embed a nested vectored interrupt controller able to \nmanage 16 priority levels, and handle up to 82 maskable interrupt channels plus the 16 \ninterrupt lines of the Cortex®-M4 with FPU core. \n• Closely coupled NVIC gives low-latency interrupt processing\n• Interrupt entry vector table address passed directly to the core\n• Allows early processing of interrupts\n• Processing of late arriving, higher-priority interrupts\n• Support tail chaining\n• Processor state automatically saved\n• Interrupt entry restored on interrupt exit with no instruction overhead\nThis hardware block provides flexible interrupt management features with minimum interrupt \nlatency.\n2.2.11 External interrupt /event controller (EXTI)\nThe external interrupt/event controller consists of 23 edge-detector lines used to generate \ninterrupt/event requests. Each line can be ind ependently configured to select the trigger \nevent (rising edge, falling edge, both) and can be masked inde pendently. A pending register \nmaintains the status of the interrupt requests. The EXTI can detect an external line with a pulse width shorter than the In ternal APB2 clock period. Up to 140 GPIOs can be connected \nto the 16 external interrupt lines.\n2.2.12 Clocks and startup\nOn reset the 16 MHz internal RC oscillator is selected as the default CPU clock. The \n16 MHz internal RC oscillator is factory-tr immed to offer 1% accuracy over the full \ntemperature range. The ap plication can then select as syst em clock either the RC oscillator \nor an external 4-26 MHz clock source. This clock can be monitored for failure. If a failure is detected, the system automatically switches  back to the internal  RC oscillator and a \nsoftware interrupt is generated (if enabled). This clock source is input to a PLL thus allowing \nto increase the frequency up to 168\n MHz. Similarly, full interr upt management of the PLL \nDescription STM32F405xx, STM32F407xx\n24/203 DS8626 Rev 9clock entry is available when necessary (for ex ample if an indirectly us ed external oscillator \nfails).\nSeveral prescalers allow the configuration of th e three AHB buses, the high-speed APB \n(APB2) and the low-speed APB (APB1) domains. The maximum fr equency of the three AHB \nbuses is 168  MHz while the maximum frequency of  the high-speed APB domains is \n84 MHz. The maximum allowed frequen cy of the low-speed APB domain is 42  MHz.\nThe devices embed a dedicated PLL (PLLI2S) which allows to achieve audio class \nperformance. In this case, the I2S master clock can generate all standard sampling \nfrequencies from 8  kHz to 192  kHz.\n2.2.13 Boot modes\nAt startup, boot pins are used to se lect one out of three boot options:\n• Boot from user Flash\n• Boot from system memory\n• Boot from embedded SRAM\nThe boot loader is located in system memory. It is used to reprogram the Flash memory by \nusing USART1 (PA9/PA10), USART3 (PC10/PC 11 or PB10/PB11), CAN2 (PB5/PB13), USB \nOTG FS in Device mode (PA11/PA12) through DFU (device firmware upgrade).\n2.2.14 Power supply schemes\n• VDD = 1.8 to 3.6 V: external power supply for I/Os and the internal regulator (when \nenabled), provided externally through VDD pins. \n• VSSA, VDDA = 1.8 to 3.6 V: external analog power supplies for ADC, DAC, Reset \nblocks, RCs and PLL. VDDA and VSSA must be connected to VDD and VSS, respectively.\n• VBAT = 1.65 to 3.6 V: power supply for RTC,  external clock 32  kHz oscillator and \nbackup registers (through power switch) when VDD is not present.\nRefer to Figure  21: Power supply scheme  for more details.\nNote: VDD/VDDA minimum value of 1.7  V is obtained when the device operates in reduced \ntemperature range, and with the use of an ex ternal power supply supervisor (refer to \nSection  : Internal reset OFF ).\nRefer to Table  2 in order to identify the packages supporting this option.\n2.2.15 Power supply supervisor\nInternal reset ON\nOn packages embedding the PDR_ON pin, the power supply supervisor is enabled by \nholding PDR_ON high. On all other packages, the power supply supervisor is always enabled.\nThe device has an integrated power-on reset (POR) / power-down reset (PDR) circuitry coupled with a Brownout reset (BOR) circuitry. At power-on, POR/PDR is always active and \nensures proper operation starting from 1.8\n V. After the 1.8  V POR threshold level is \nreached, the option byte loading process starts, either to confirm or modify default BOR threshold levels, or to disable BOR permanently. Three BOR thresholds are available \nthrough option bytes. The device remains in reset mode when V\nDD is below a specified \nthreshold, VPOR/PDR  or VBOR, without the need for an external reset circuit.\nDS8626 Rev 9 25/203STM32F405xx, STM32F407xx Description\nThe device also features an embedded progra mmable voltage detector (PVD) that monitors \nthe VDD/VDDA power supply and compares it to the VPVD threshold. An interrupt can be \ngenerated when VDD/VDDA drops below the VPVD threshold and/or when VDD/VDDA is \nhigher than the VPVD threshold. The interrupt service routine can then generate a warning \nmessage and/or put the MCU into a safe state. The PVD is enabled by software.\nInternal reset OFF\nThis feature is available only on packages feat uring the PDR_ON pin. The internal power-on \nreset (POR) / power-down reset (PDR) circ uitry is disabled with the PDR_ON pin.\nAn external power supply supervisor should monitor VDD and should maintain the device in \nreset mode as long as VDD is below a specified threshold.  PDR_ON should be connected to \nthis external power supply supervisor. Refer to Figure  7: Power supply supervisor \ninterconnection with internal reset OFF .\nFigure 7. Power supply supervisor interconnection with internal reset OFF\n1. PDR = 1.7 V for reduce temperature range; PDR = 1.8 V for all temperature range.\nThe VDD specified threshold, below which the device must be maintained under reset, is \n1.8 V (see Figure  7). This supply voltage can drop to 1.7  V when the device operates in the \n0 to 70  °C temperature range. \nA comprehensive set of power-saving mode allows to design low-power applications. \nWhen the internal reset is OFF, the following integrated features are no more supported:\n• The integrated power-on reset (POR) / power-down reset (PDR) circuitry is disabled\n• The brownout reset (BOR) circuitry is disabled\n• The embedded programmable voltage detector (PVD) is disabled\n• VBAT functionality is no more available and VBAT pin should be connected to VDD\nAll packages, except for the LQFP64 and LQFP100, allow to disable the internal reset \nthrough the PDR_ON signal.MS31383V3NRSTVDD\nPDR_ONExternal V DD power supply supervisor\nExt. reset controller active when\nVDD < 1.7 V  \nVDDApplication reset\nsignal (optional)\nDescription STM32F405xx, STM32F407xx\n26/203 DS8626 Rev 9Figure 8. PDR_ON and NRST control with internal reset OFF \n1. PDR = 1.7 V for reduce temperature range; PDR = 1.8 V for all temperature range.\n2.2.16 Voltage regulator\nThe regulator has four operating modes: \n• Regulator ON\n– Main regulator mode (MR)– Low-power regulator (LPR)– Power-down\n• Regulator OFF\nRegulator ON\nOn packages embedding the BYPASS_REG pin, the regulator is en abled by holding \nBYPASS_REG low. On all ot her packages, the regula tor is always enabled.\nThere are three power modes configured by software when regulator is ON: \n• MR is used in the nominal regulation mode (With different voltage scaling in Run)\nIn Main regulator mode (MR mode), different voltage scaling are provided to reach the \nbest compromise between maximum frequ ency and dynamic power consumption. \nRefer to Table 14: General operating conditions .\n• LPR is used in the Stop modes\nThe LP regulator mode is configured by software when entering Stop mode.\n• Power-down is used in Standby mode.\nThe Power-down mode is activated only when entering in Standby mode. The regulator \noutput is in high impedance and the kernel  circuitry is powered down, inducing zero \nconsumption. The contents of th e registers and SRAM are lost)MS19009V6VDD\ntimePDR = 1.7 V  \ntimeNRST\nPDR_ON PDR_ONReset by other source than \npower supply supervisor  \nDS8626 Rev 9 27/203STM32F405xx, STM32F407xx Description\nTwo external ceramic capacitors should be connected on VCAP_1  & VCAP_2  pin. Refer to \nFigure  21: Power supply scheme  and Figure  16: VCAP_1/VCAP_2 operating conditions .\nAll packages have regulator ON feature.\nRegulator OFF\nThis feature is available on ly on packages featuring the BYP ASS_REG pin. The regulator is \ndisabled by holding BYPASS_REG high. The regulator OFF mode allows to supply \nexternally a V12 voltage source through VCAP_1  and VCAP_2  pins.\nSince the internal voltage scaling is not manage  internally, the external voltage value must \nbe aligned with the targeted maximum frequency. Refer to Table  14: General operating \nconditions .\nThe two 2.2  µF ceramic capacitors should be replaced by two 100  nF decoupling \ncapacitors.\nRefer to Figure  21: Power supply scheme\nWhen the regulator is OFF, there is no more internal monitoring on V12. An external power \nsupply supervisor should be used to monitor the V12 of the logic power domain. PA0 pin \nshould be used for this purpose, and act as power-on reset on V12 power domain.\nIn regulator OFF mode the following  features are no more supported:\n• PA0 cannot be used as a GPIO pin since it allows to reset a part of the V12 logic power \ndomain which is not reset by the NRST pin.\n• As long as PA0 is kept low, the debug mode cannot be used under power-on reset. As \na consequence, PA0 and NRST pins must  be managed separately if the debug \nconnection under reset or pre-reset is required.\n• The standby mode is not available\nFigure 9. Regulator OFF\nai18498V4External V CAP_1/2  power \nsupply supervisor\nExt. reset controller active \nwhen V CAP_1/2  < Min V 12V12\nVCAP_1\nVCAP_2BYPASS_REGVDDPA0 NRSTApplication reset \nsignal (optional)\nVDD\nV12\nDescription STM32F405xx, STM32F407xx\n28/203 DS8626 Rev 9The following conditions must be respected:\n• VDD should always be higher than VCAP_1  and VCAP_2 to avoid current injection \nbetween power domains. \n• If the time for VCAP_1  and VCAP_2 to reach V12 minimum value is faster than the time for \nVDD to reach 1.8 V, then PA0 should be k ept low to cover both conditions: until VCAP_1  \nand VCAP_2 reach V12 minimum value and until VDD reaches 1.8 V (see Figure 10 ).\n• Otherwise, if the time for VCAP_1  and VCAP_2 to reach V12 minimum value is slower \nthan the time for VDD to reach 1.8 V, then PA0 could be asserted low externally (see \nFigure 11 ).\n• If VCAP_1  and VCAP_2  go below V12 minimum value and VDD is higher than 1.8 V, then \na reset must be asserted on PA0 pin.\nNote: The minimum value of V12 depends on the maximum frequency targeted in the application \n(see Table  14: General operating conditions ).\nFigure 10. Startup in regulator OFF mode: slow VDD slope \n- power-down reset risen after VCAP_1 /VCAP_2 stabilization\n1. This figure is valid both whatever  the internal reset mode (ON or OFF).\n2. PDR = 1.7 V for reduced temperature range; PDR = 1.8 V for all temperature ranges.ai18491eVDD\ntimeMin V 12PDR = 1.7 V or 1.8 V (2)\nVCAP_1/VCAP_2V12\nNRST\ntime\nDS8626 Rev 9 29/203STM32F405xx, STM32F407xx Description\nFigure 11. Startup in regulator OFF mode: fast VDD slope \n- power-down rese t risen before VCAP_1 /VCAP_2 stabilization\n1. This figure is valid both whatever the internal reset mode (ON or OFF). \n2. PDR = 1.7 V for a reduced temperature range; PDR = 1.8 V for all temperature ranges.\n2.2.17 Regulator ON/OFF and in ternal reset ON/OFF availability\n          \n2.2.18 Real-time clock (RTC), backup SRAM and backup registers\nThe backup domain of the STM32F405xx and STM32F407xx includes:\n• The real-time clock (RTC) \n• 4 Kbytes of backup SRAM\n• 20 backup registers\nThe real-time clock (RTC) is an independent B CD timer/counter. Dedicated registers contain \nthe second, minute, hour (in 12/24 hour), we ek day, date, month, year, in BCD (binary-\ncoded decimal) format. Correction for 28, 29 (leap year), 30, and 31 day of the month are performed automatically. The RTC provides a programmable alarm and programmable periodic interrupts with wakeup from Stop and Standby modes. The sub-seconds value is also available in binary format.\nIt is clocked by a 32.768 kHz external crystal, resonator or osc illator, the internal low-power \nRC oscillator or the high -speed external clock divided by 128. The internal low-speed RC VDD\ntimeMin V 12VCAP_1/VCAP_2\nV12\nPA0 asserted externally  NRST\ntime ai18492dPDR = 1.7 V or 1.8 V (2)\nTable 3. Regulator ON/OFF and in ternal reset ON/OFF availability\nRegulator ON Regulator OFF Internal reset ONInternal reset \nOFF\nLQFP64\nLQFP100 Yes NoYes No\nLQFP144\nYes\nPDR_ON set to \nVDDYes\nPDR_ON \nconnected to an \nexternal power \nsupply supervisorWLCSP90\nUFBGA176\nLQFP176Yes \nBYPASS_REG set \nto VSSYes\nBYPASS_REG set \nto VDD\nDescription STM32F405xx, STM32F407xx\n30/203 DS8626 Rev 9has a typical frequency of 32 kHz. The RTC can be calibrated using an external 512 Hz \noutput to compensa te for any natural quartz deviation. \nTwo alarm registers are used to generate an alar m at a specific time and calendar fields can \nbe independently masked for alarm comparison.  To generate a periodic interrupt, a 16-bit \nprogrammable binary auto-reload downcounter with programmable resolution is available and allows automatic wakeup and periodic alarms from every 120 µs to every 36 hours.\nA 20-bit prescaler is used for the time base cloc k. It is by default configured to generate a \ntime base of 1 second from a clock at 32.768 kHz.\nThe 4-Kbyte backup SRAM is an  EEPROM-like memory area. It can be used to  store data \nwhich need to be retained in VBAT and standby mode. This memory area is disabled by \ndefault to minimize power consumption (see Section  2.2.19: Low-power modes ). It can be \nenabled by software. \nThe backup registers are 32-bit registers used to store 80 bytes of user application data when V\nDD power is not present. Backup registers are not reset by a system, a power reset, \nor when the device wakes up from the Standby mode (see Section  2.2.19: Low-power \nmodes ).\nAdditional 32-bit registers contain the progra mmable alarm subseconds, seconds, minutes, \nhours, day, and date.\nLike backup SRAM, the RTC and backup registers are supplied through a switch that is powered either from the V\nDD supply when present or from the VBAT pin.\n2.2.19 Low-power modes\nThe STM32F405xx and STM32F407xx support three low-power modes to achieve the best compromise between low-power consumption, short startup time and available wakeup \nsources:\n• Sleep mode\nIn Sleep mode, only the CPU is stopped. All peripherals continue to operate and can \nwake up the CPU when an interrupt/event occurs.\n• Stop mode\nThe Stop mode achieves the lowest power co nsumption while retaining the contents of \nSRAM and registers. All clocks in the V12 domain are stopped, the PLL, the HSI RC \nand the HSE crystal oscillato rs are disabled. The volta ge regulator can also be put \neither in normal or in low-power mode.\nThe device can be woken up from the Stop mode by any of the EXTI line (the EXTI line \nsource can be one of the 16 external lines , the PVD output, the RTC alarm / wakeup / \ntamper / time stamp events, the USB OTG FS/HS wakeup or the Ethernet wakeup).\n• Standby mode\nThe Standby mode is used to achieve the lo west power consumpt ion. The internal \nvoltage regulator is switched off so that the entire V12 domain is powered off. The PLL, \nthe HSI RC and the HSE crystal oscillators are also switched of f. After entering \nDS8626 Rev 9 31/203STM32F405xx, STM32F407xx Description\nStandby mode, the SRAM and register contents are lost except for registers in the \nbackup domain and the backup SRAM when selected.\nThe device exits the Standby mode when an ex ternal reset (NRST pin), an IWDG reset, \na rising edge on the WKUP pin, or an RTC alarm / wakeup / tamper /time stamp event occurs. \nThe standby mode is not supported when th e embedded voltage regulator is bypassed \nand the V\n12 domain is controlled by an external power. \n2.2.20 VBAT operation\nThe VBAT pin allows to power the device VBAT domain from an external battery, an external \nsupercapacitor, or from VDD when no external battery and an  external supercapacitor are \npresent.\nVBAT operation is activated when VDD is not present.\nThe VBAT pin supplies the RTC, the backup registers and the backup SRAM. \nNote: When the microcontroller is supplied from VBAT, external interrupts and RTC alarm/events \ndo not exit it from VBAT operation.\nWhen PDR_ON pin is not connected to VDD (internal reset OFF), the VBAT functionality is no \nmore available and VBAT pin should be connected to VDD.\n2.2.21 Timers and watchdogs\nThe STM32F405xx and STM32F407xx devices include two advanced-control timers, eight general-purpose timers, two basic timers and two watchdog timers.\nAll timer counters can be frozen in debug mode.\nTable  4 compares the features of the advanced-c ontrol, general-purpose and basic timers.\n          Table 4. Timer feature comparison \nTimer \ntypeTimerCounter \nresolutionCounter \ntypePrescaler \nfactorDMA \nrequest \ngenerationCapture/\ncompare \nchannelsComplemen-\ntary outputMax \ninterface \nclock \n(MHz)Max \ntimer \nclock \n(MHz)\nAdvanced\n-controlTIM1, \nTIM816-bitUp, \nDown, \nUp/downAny integer \nbetween 1 \nand 65536Yes 4 Yes 84 168\nDescription STM32F405xx, STM32F407xx\n32/203 DS8626 Rev 9Advanced-control timers (TIM1, TIM8)\nThe advanced-control timers (TIM1, TIM8) can be seen as three-phase PWM generators \nmultiplexed on 6 channels. They have complementary PWM outputs with programmable inserted dead times. They can also be considered as complete general-purpose timers. Their 4 independent channels can be used for:\n• Input capture\n• Output compare\n• PWM generation (edge- or center-aligned modes)\n• One-pulse mode output\nIf configured as standard 16-bit timers, they ha ve the same features as the general-purpose \nTIMx timers. If configured as 16 -bit PWM generators, they have  full modulation capability (0-\n100%).\nThe advanced-control timer can work togethe r with the TIMx timers via the Timer Link \nfeature for synchronizat ion or event chaining.\nTIM1 and TIM8 support independent DMA request generation.General \npurposeTIM2, \nTIM532-bitUp, \nDown, \nUp/downAny integer \nbetween 1 \nand 65536Yes 4 No 42 84\nTIM3, \nTIM416-bitUp, \nDown, \nUp/downAny integer \nbetween 1 \nand 65536Yes 4 No 42 84\nTIM9 16-bit UpAny integer \nbetween 1 \nand 65536No 2 No 84 168\nTIM10\n, \nTIM1116-bit UpAny integer \nbetween 1 \nand 65536No 1 No 84 168\nTIM12 16-bit UpAny integer \nbetween 1 \nand 65536No 2 No 42 84\nTIM13\n, \nTIM1416-bit UpAny integer \nbetween 1 \nand 65536No 1 No 42 84\nBasicTIM6, \nTIM716-bit UpAny integer \nbetween 1 \nand 65536Yes 0 No 42 84Table 4. Timer feature comparison (continued)\nTimer \ntypeTimerCounter \nresolutionCounter \ntypePrescaler \nfactorDMA \nrequest \ngenerationCapture/\ncompare \nchannelsComplemen-\ntary outputMax \ninterface \nclock \n(MHz)Max \ntimer \nclock \n(MHz)\nDS8626 Rev 9 33/203STM32F405xx, STM32F407xx Description\nGeneral-purpose timers (TIMx)\nThere are ten synchronizable general-purpose timers embedded in the STM32F40xxx \ndevices (see Table  4 for differences).\n• TIM2, TIM3, TIM4, TIM5\nThe STM32F40xxx include 4 full-featured general-purpose timers: TIM2, TIM5, TIM3, \nand TIM4.The TIM2 and TIM5 timers  are based on a 32-bit auto-reload \nup/downcounter and a 16-bit prescaler. The TIM3 and TIM4 timers are based on a 16-bit auto-reload up/downcounter and a 16-bit prescaler. They all feature 4 independent \nchannels for input capture/ou tput compare, PWM or one-pulse mode output. This gives \nup to 16 input capture/output compare/PWMs on the largest packages.\nThe TIM2, TIM3, TIM4, TIM5 general-purpose timers can work together, or with the \nother general-purpose timers and the advanc ed-control timers TIM1 and TIM8 via the \nTimer Link feature for synchronization or event chaining.\nAny of these general-purpose timers can be used to generate PWM outputs.\nTIM2, TIM3, TIM4, TIM5 all have indepen dent DMA request generation. They are \ncapable of handling quadrature (incremental ) encoder signals and the digital outputs \nfrom 1 to 4 hall-effect sensors.\n• TIM9, TIM10, TIM11, TI M12, TIM13, and TIM14\nThese timers are based on a 16-bit auto-reload upcounter and a 16-bit prescaler. \nTIM10, TIM11, TIM13, and TIM14 feature one independent channel, whereas TIM9 \nand TIM12 have two independent channels for input capture/output compare, PWM or one-pulse mode output. They can be synchronized with the TIM2, TIM3, TIM4, TIM5 full-featured general-purpose timers. They can also be used as simple time bases.\nBasic timers TIM6 and TIM7\nThese timers are mainly used for DAC trigger and waveform generation. They can also be used as a generic 16-bit time base.\nTIM6 and TIM7 support independent DMA request generation.\nIndependent watchdog\nThe independent watchdog is based on a 12-bit downcounter and 8-bit prescaler. It is clocked from an independent 32 kHz internal RC  and as it operates independently from the \nmain clock, it can operate in Stop and Standby  modes. It can be used either as a watchdog \nto reset the device when a problem occurs, or as a free-running timer for application timeout management. It is hardware- or software-configurable through the option bytes.\nWindow watchdog\nThe window watchdog is based on a 7-bit downcounter that can be set as free-running. It can be used as a watchdog to reset the device when a problem occurs. It is clocked from the main clock. It  has an early warning interrupt capabilit y and the counter c an be frozen in \ndebug mode.\nDescription STM32F405xx, STM32F407xx\n34/203 DS8626 Rev 9SysTick timer\nThis timer is dedicated to real-time operating systems, but could also be used as a standard \ndowncounter. It features:\n• A 24-bit downcounter\n• Autoreload capability\n• Maskable system interrupt generation when the counter reaches 0\n• Programmable clock source.\n2.2.22 Inter-integrated  circuit interface (I²C) \nUp to three I²C bus interfaces can operate in multimaster and slave modes. They can \nsupport the Standard-mode (up to 100  kHz) and Fast-mode (up to 400  kHz). They support \nthe 7/10-bit addressing mode and the 7-bit dual addressing mode (as slave). A hardware CRC generation/verification is embedded.\nThey can be served by DMA and they support SMBus 2.0/PMBus.\n2.2.23 Universal synchr onous/asynchronous receiver transmitters (USART)\nThe STM32F405xx and STM32F407xx embed four universal synchronous/asynchronous \nreceiver transmitters (USART1, USART2, USART3 and USART6) and two universal asynchronous receiver transmitters (UART4 and UART5).\nThese six interfaces provide asynchronous  communication, IrDA SIR ENDEC support, \nmultiprocessor communication  mode, single-wire half-duplex communication mode and \nhave LIN Master/Slave capab ility. The USART1 and USART6  interfaces are able to \ncommunicate at speeds of up to 10.5 Mbit/s. The other available interfaces communicate at \nup to 5.25  Mbit/s.\nUSART1, USART2, USART3 and USART6 also provide hardware management of the CTS and RTS signals, Smart Card mode (ISO 7816 compliant) and SPI-like communication capability. All interfaces can be served by the DMA controller.\nDS8626 Rev 9 35/203STM32F405xx, STM32F407xx Description\n          \n2.2.24 Serial peripheral interface (SPI)\nThe STM32F40xxx feature up to three SPIs in slave and master modes in full-duplex and \nsimplex communication modes. SPI1 can communicate at up to 42  Mbits/s, SPI2 and SPI3 \ncan communicate at up to 21  Mbit/s. The 3-bit prescaler gives 8 master mode frequencies \nand the frame is configurable to 8 bits or 16 bits. The hardware CRC generation/verification \nsupports basic SD Card/MMC modes. All SPIs can be served by the DMA controller.\nThe SPI interface can be configured to operat e in TI mode for comm unications in master \nmode and slave mode.\n2.2.25 Inter-integrated sound (I2S)\nTwo standard I2S interfaces (multiplexed with SPI2 and SPI3) are available. They can be \noperated in master or slave mode, in full duplex and half-duplex communication modes, and can be configured to operate with a 16-/32-bit  resolution as an input or output channel. \nAudio sampling frequencies from 8\n kHz up to 192  kHz are supported. When either or both of \nthe I2S interfaces is/are configured in master mo de, the master clock can be output to the \nexternal DAC/CODEC at 256 ti mes the sampling frequency. \nAll I2Sx can be served by the DMA controller.Table 5. USART feature comparison \nUSART \nnameStandard \nfeaturesModem \n(RTS/ \nCTS)LINSPI \nmasterirDASmartcard \n(ISO 7816)Max. baud rate \nin Mbit/s \n(oversampling \nby 16)Max. baud rate \nin Mbit/s \n(oversampling \nby 8)APB \nmapping\nUSART1 X X X X X X 5.25 10.5APB2 \n(max. \n84 MHz)\nUSART2 X X X X X X 2.62 5.25APB1 \n(max. \n42 MHz)\nUSART3 X X X X X X 2.62 5.25APB1 \n(max. \n42 MHz)\nUART4 X - X - X - 2.62 5.25APB1 \n(max. \n42 MHz)\nUART5 X - X - X - 2.62 5.25APB1 \n(max. \n42 MHz)\nUSART6 X X X X X X 5.25 10.5APB2 \n(max. \n84 MHz)\nDescription STM32F405xx, STM32F407xx\n36/203 DS8626 Rev 92.2.26 Audio PLL (PLLI2S)\nThe devices feature an additional dedicated PLL for audio I2S application. It allows to \nachieve error-free I2S sampling clock accuracy withou t compromising on the CPU \nperformance, while using USB peripherals. \nThe PLLI2S configuration can be modified to manage an I2S sample rate change without \ndisabling the main PLL (PLL) used for CPU, USB and Ethernet interfaces.\nThe audio PLL can be programmed with very low error to obtain sampling rates ranging from 8\n KHz to 192  KHz. \nIn addition to the audio PLL, a master clock input pin can be used to synchronize the I2S \nflow with an external PLL (or Codec output). \n2.2.27 Secure digital i nput/output interface (SDIO)\nAn SD/SDIO/MMC host interface is availabl e, that supports MultiMediaCard System \nSpecification Version 4.2 in three different da tabus modes: 1-bit (default), 4-bit and 8-bit.\nThe interface allows data transfer at up to 48 MHz, and is compliant with the SD Memory \nCard Specificat ion Version 2.0.\nThe SDIO Card Specification Version 2.0 is  also supported with two different databus \nmodes: 1-bit (default) and 4-bit.\nThe current version supports only one SD/SDI O/MMC4.2 card at any one time and a stack \nof MMC4.1 or previous.\nIn addition to SD/SDIO/MMC, this interface is fully compliant with the CE-ATA digital \nprotocol Rev1.1.\n2.2.28 Ethernet MAC in terface with dedicated DM A and IEEE 1588 support\nPeripheral available only on the STM32F407xx devices.\nThe STM32F407xx devices prov ide an IEEE-802.3-20 02-compliant media access controller \n(MAC) for ethernet LAN communications through an industry-standard medium-independent interface (MII) or a reduced medium-independent interface (RMII). The \nSTM32F407xx requires an external physical interface device (PHY) to connect to the physical LAN bus (twisted-pair, fiber, etc.). the PHY is connected to the STM32F407xx MII \nport using 17 signals for MII or 9 signals for RMII, and can be clocked using the 25\n MHz \n(MII) from the STM32F407xx.\nDS8626 Rev 9 37/203STM32F405xx, STM32F407xx Description\nThe STM32F407xx includes the following features:\n• Supports 10 and 100 Mbit/s rates\n• Dedicated DMA controller allowing high-sp eed transfers between the dedicated SRAM \nand the descriptors (see the STM32F40 xxx/41xxx reference manual for details)\n• Tagged MAC frame support (VLAN support)\n• Half-duplex (CSMA/CD) and full-duplex operation\n• MAC control sublayer (control frames) support\n• 32-bit CRC generation and removal\n• Several address filtering modes for physic al and multicast address (multicast and \ngroup addresses)\n• 32-bit status code for each transmitted or received frame\n• Internal FIFOs to buffer transmit and receive frames. The transmit FIFO and the \nreceive FIFO are both 2 Kbytes.\n• Supports hardware  PTP (precision time protocol ) in accordance with IEEE 1588 2008 \n(PTP V2) with the time stamp comparator connected to the TIM2 input\n• Triggers interrupt when system time becomes greater than target time\n2.2.29 Controller area network (bxCAN)\nThe two CANs are compliant with the 2.0A and B (a ctive) specifications with a bitrate up to 1 \nMbit/s. They can receive and transmit standard  frames with 11-bit id entifiers as well as \nextended frames with 29-bit identifiers. Each  CAN has three transmit mailboxes, two receive \nFIFOS with 3 stages and 28 shared scalable filter banks (all of them can be used even if one \nCAN is used). 256 bytes of SRAM are allocated for each CAN.\n2.2.30 Universal se rial bus on-the-go full-speed (OTG_FS)\nThe STM32F405xx and STM32F407xx embed an USB OTG full-speed device/host/OTG \nperipheral with integrated transceivers. The USB OTG FS peripheral is compliant with the \nUSB 2.0 specification and with the OTG 1.0 specification. It has software-configurable \nendpoint setting and supports suspend/resume. The USB OTG full-speed controller requires a dedicated 48 MHz clock that is generated by a PLL connected to the HSE \noscillator. The major features are:\n• Combined Rx and Tx FIFO size of 320  × 35 bits with dynamic FIFO sizing\n• Supports the session request protocol (SRP ) and host negotiation protocol (HNP)\n• 4 bidirectional endpoints\n• 8 host channels with periodic OUT support\n• HNP/SNP/IP inside (no need for any external resistor)\n• For OTG/Host modes, a power switch is needed in case bus-powered devices are \nconnected\nDescription STM32F405xx, STM32F407xx\n38/203 DS8626 Rev 92.2.31 Universal se rial bus on-the-go high-speed (OTG_HS)\nThe STM32F405xx and STM32F407xx devices embed a USB OTG high-speed (up to \n480 Mb/s) device/host/OTG peripheral. The U SB OTG HS supports both full-speed and \nhigh-speed operations. It integrates the tr ansceivers for full-speed operation (12  MB/s) and \nfeatures a UTMI low-pin interface (ULPI) for high-speed operation (480  MB/s). When using \nthe USB OTG HS in HS mode, an external PH Y device connected to the ULPI is required.\nThe USB OTG HS peripheral is compliant wit h the USB 2.0 specification and with the OTG \n1.0 specification. It has software-configurable endpoint setting and supports suspend/resume. The USB OTG full-speed controller requires a dedicated 48\n MHz clock \nthat is generated by a PLL co nnected to the HSE oscillator. \nThe major features are:\n• Combined Rx and Tx FIFO size of 1 Kbit × 35 with dynamic FIFO sizing\n• Supports the session request protocol (SRP ) and host negotiation protocol (HNP)\n• 6 bidirectional endpoints\n• 12 host channels with periodic OUT support\n• Internal FS OTG PHY support \n• External HS or HS OTG operation suppor ting ULPI in SDR mode. The OTG PHY is \nconnected to the microcontroller ULPI port through 12 signals. It can be clocked using the 60 MHz output.\n• Internal USB DMA\n• HNP/SNP/IP inside (no need for any external resistor)\n• for OTG/Host modes, a power switch is needed in case bus-powered devices are \nconnected\n2.2.32 Digital camera interface (DCMI)\nThe camera interface is not available in STM32F405xx devices.\nSTM32F407xx products embed a camera interface that can connect with camera modules \nand CMOS sensors through an 8-bit to 14-bit parallel interface, to receive video data. The \ncamera interface can sustain a data transfer rate up to 54  Mbyte/s at 54  MHz. It features:\n• Programmable polarity for the input pixel clock and synchronization signals\n• Parallel data communication can be 8-, 10-, 12- or 14-bit\n• Supports 8-bit progressive video monochr ome or raw bayer format, YCbCr 4:2:2 \nprogressive video, RGB 565 progressive video or compressed data (like JPEG)\n• Supports continuous mode or snapshot (a single frame) mode\n• Capability to automati cally crop the image\n2.2.33 True random number generator (RNG)\nAll STM32F405xx and STM32F407xx products embed a true random number generator \n(RNG) that provides full entropy outputs to th e application as 32-bit samples. It is composed \nof a live entropy source (analog) and an internal conditioning component.\n2.2.34 General-purpose input/outputs (GPIOs)\nEach of the GPIO pins can be configured by software as output (push-pull or open-drain, \nwith or without pull-up or pull-down), as input (f loating, with or  without pull-up or pull-down) \nDS8626 Rev 9 39/203STM32F405xx, STM32F407xx Description\nor as peripheral alternate function. Most of the GPIO pins are shared with digital or analog \nalternate functions. All GPIOs are high-current -capable and have speed selection to better \nmanage internal noise, power consumption and electromagnetic emission.\nThe I/O configuration can be locked if needed by  following a specific sequence in order to \navoid spurious writing to the I/Os registers.\nFast I/O handling a llowing maximum I/O toggling up to 84  MHz.\n2.2.35 Analog-to-digit al converters (ADCs)\nThree 12-bit analog-to-digital converters are embedded and each ADC shares up to 16 \nexternal channels, performing conversions in the single-shot or scan mode. In scan mode, \nautomatic conversion is performed on a selected group of analog inputs.\nAdditional logic functions embedded in the ADC interface allow:\n• Simultaneous sample and hold\n• Interleaved sample and hold\nThe ADC can be served by the DMA controller. An analog watchdog feature allows very \nprecise monitoring of the converted voltage of  one, some or all selected channels. An \ninterrupt is generated when the converted vo ltage is outside the programmed thresholds.\nTo synchronize A/D conversion and timers, the ADCs could be triggered by any of TIM1, \nTIM2, TIM3, TIM4, TIM5, or TIM8 timer. \n2.2.36 Temperature sensor\nThe temperature sensor has to generate a volta ge that varies linearly with temperature. The \nconversion range is between 1.8 V and 3.6 V. The temperature sensor is internally connected to the ADC1_IN16 input channel wh ich is used to convert the sensor output \nvoltage into a digital value.\nAs the offset of the temperature sensor varies fr om chip to chip due to process variation, the \ninternal temperature sensor is mainly suitable for applications that detect temperature changes instead of absolute temperatures. If an accurate temperature reading is needed, \nthen an external temperature sensor part should be used.\n2.2.37 Digital-to-a nalog con verter (DAC)\nThe two 12-bit buffered DAC channels can be used to convert two digital signals into two \nanalog voltage signal outputs. \nDescription STM32F405xx, STM32F407xx\n40/203 DS8626 Rev 9This dual digital Interface su pports the following features:\n• two DAC converters: one for each output channel\n• 8-bit or 12-bit monotonic output\n• left or right data alignment in 12-bit mode\n• synchronized update capability\n• noise-wave generation\n• triangular-wave generation\n• dual DAC channel independen t or simultaneous conversions\n• DMA capability for each channel\n• external triggers for conversion\n• input voltage reference VREF+\nEight DAC trigger inputs are used in the device. The DAC channels are triggered through \nthe timer update outputs that are also connected to different DMA streams.\n2.2.38 Serial wire JTAG debug port (SWJ-DP)\nThe Arm SWJ-DP interface is embedded, and is a combined JTAG and serial wire debug \nport that enables either a serial wire debug or  a JTAG probe to be connected to the target.\nDebug is performed using 2 pins only instead of 5 required by the JTAG (JTAG pins could \nbe re-use as GPIO with alternate function):  the JTAG TMS and TCK pins are shared with \nSWDIO and SWCLK, respectively, and a specific sequence on the TMS pin is used to switch between JTAG-DP and SW-DP.\n2.2.39 Embedded Trace Macrocell™\nThe Arm Embedded Trace Macrocell provides a grea ter visibility of the instruction and data \nflow inside the CPU core by streaming compressed data at a very high rate from the STM32F40xxx through a small number of ETM pins to an external hardware trace port \nanalyser (TPA) device. The TPA is connected to a host co mputer using USB, Ethernet, or \nany other high-speed channel. Real-time instru ction and data flow activity can be recorded \nand then formatted for display on the host co mputer that runs the debugger software. TPA \nhardware is commercially available from common development tool vendors.\nThe Embedded Trace Macrocell operates with third party debugger software tools.\nDS8626 Rev 9 41/203STM32F405xx, STM32F407xx Pinouts and pin description\n3 Pinouts and pin description\nFigure 12. STM32F40xxx LQFP64 pinout\n1. The above figure shows the package top view.64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49\n48\n47\n 46\n 45\n 44\n 43\n42\n41\n40\n39\n38\n37\n36\n35\n34\n33\n17 18 19 20 21 22 23 24 29 30 31 32 25 26 27 281\n2\n3\n45\n6 \n7 \n8 \n9 \n10\n11 \n12 \n1314\n15\n16VBAT\nPC14\nPC15\nNRST\nPC0\nPC1PC2\nPC3\nVSSA\nVDDA\nPA0_WKUP\nPA1\nPA2\nVDD\n  \nPB9  \nPB8  \nBOOT0  \nPB7  \nPB6  \nPB5  \nPB4  \nPB3  \nPD2  \nPC12  \nPC11  \nPC10  \nPA15  \nPA14 \nVDD   \nVCAP_2\nPA13  \nPA12  \nPA11  \nPA10  PA9  \nPA8  \nPC9  \nPC8  \nPC7  \nPC6  \nPB15  \nPB14  \nPB13  \nPB12 PA3\nVSS\nVDD\nPA4\nPA5\nPA6PA7\nPC4\nPC5\nPB0\nPB1\nPB2\nPB10\nPB11\nVCAP_1\nVDDLQFP64\nai18493bPC13\nPH0\nPH1\nVSS\nPinouts and pin description STM32F405xx, STM32F407xx\n42/203 DS8626 Rev 9Figure 13. STM32F40xxx LQFP100 pinout\n1. The above figure shows the package top view.\n100\n99\n98\n97\n96\n95\n94\n93\n92\n91\n90\n89\n88\n87\n86\n85\n84\n83\n82\n81\n80\n79\n78\n77\n76\n1\n2\n3\n4\n5\n67\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n2575\n74\n73\n72\n71\n7069\n68\n67\n66\n65\n64\n63\n62\n61\n60\n59\n58\n57\n56\n55\n54\n53\n52\n51PE2\nPE3\nPE4\nPE5PE6\nVBAT\nPC14\nPC15\nVSS\nVDD\nPH0\nNRST\nPC0\nPC1PC2\nPC3\nVDD\nVSSA\nVREF+\nVDDA\nPA0\nPA1\nPA2VDD\nVSSVCAP_2  \nPA13   \nPA12   \nPA 11   \nPA10   \nPA9  \nPA8   \nPC9  \nPC8  \nPC7  \nPC6  \nPD15  \nPD14  \nPD13  \nPD12  \nPD11  \nPD10  \nPD9  PD8  \nPB15  \nPB14  \nPB13  \nPB12  PA3\nVSS\nVDD\nPA4\nPA5\nPA6\nPA7\nPC4\nPC5\nPB0\nPB1\nPB2\nPE7PE8\nPE9\nPE10\nPE11\nPE12\nPE13\nPE14\nPE15\nPB10\nPB11\nVCAP_1\nVDDVDD\nVSS\nPE1  PE0  \nPB9  \nPB8  \nBOOT0  \nPB7  \nPB6  \nPB5  PB4  \nPB3  \nPD7  \nPD6  \nPD5  \nPD4  \nPD3  \nPD2  \nPD1  \nPD0  \nPC12  \nPC11  \nPC10  \nPA15  \nPA14 26\n2728\n29\n30\n31\n32\n33\n34\n35\n3637\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\nai18495cLQFP100PC13\nPH1\nDS8626 Rev 9 43/203STM32F405xx, STM32F407xx Pinouts and pin description\nFigure 14. STM32F40xxx LQFP144 pinout\n1. The above figure shows the package top view.\nVDD\nPDR_ON\nPE1PE0PB9\nPB8\nBOOT0\nPB7\nPB6PB5\nPB4\nPB3\nPG15V\nDD\nVSS\nPG14\nPG13PG12\nPG11\nPG10PG9\nPD7\nPD6\nV\nDD\nVSS\nPD5\nPD4\nPD3\nPD2\nPD1\nPD0\nPC12\nPC11\nPC10\nPA 15\nPA 14\nPE2 VDDPE3 VSSPE4\nPE5 PA 13\nPE6 PA 12\nVBAT PA 11\nPC13 PA 10\nPC14 PA 9\nPC15 PA 8\nPF0 PC9\nPF1 PC8\nPF2 PC7\nPF3 PC6\nPF4 VDDPF5 VSSVSS PG8\nVDD PG7\nPF6 PG6\nPF7 PG5\nPF8 PG4\nPF9 PG3\nPF10 PG2\nPH0 PD15\nPH1 PD14\nNRST VDDPC0 VSSPC1 PD13\nPC2 PD12\nPC3 PD11\nVSSAPD10 VDD\nPD9\nVREF+ PD8\nVDDA PB15\nPA 0 PB14\nPA 1 PB13\nPA 2 PB12PA 3\nVSS\nVDD\nPA 4\nPA 5PA 6\nPA 7\nPC4PC5\nPB0\nPB1\nPB2\nPF11\nPF12\nV\nDD\nPF13\nPF14\nPF15\nPG0\nPG1\nPE7\nPE8\nPE9\nVSS\nVDD\nPE10\nPE11\nPE12PE13\nPE14\nPE15PB10\nPB11\nV\nCAP_1\nVDD144\n143\n142\n141\n140\n139\n138\n137\n136\n135\n134\n133\n132\n131\n130\n129\n128\n127\n126\n125\n124\n123\n122\n121\n109\n1\n2\n34\n5\n6\n7\n8\n9\n10\n11\n1213\n14\n15\n16\n17\n1819\n20\n21\n22\n23\n24\n25108\n107\n106105\n104\n103\n102\n101\n100\n99\n98\n9796\n95\n94\n93\n92\n9190\n89\n88\n87\n86\n85\n843738\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n5051\n52\n53\n5455\n56\n57\n58\n59\n60\n72LQFP144\n120\n119\n118\n117\n116\n115\n114\n113\n112\n111\n11061\n62\n63\n64\n65\n66\n67\n68\n69\n70\n7126\n27\n28\n29\n30\n31\n32\n33\n34\n35\n3683\n82\n81\n80\n79\n78\n77\n76\n75\n74\n73\nai18496bVCAP_2VSS\nPinouts and pin description STM32F405xx, STM32F407xx\n44/203 DS8626 Rev 9Figure 15. STM32F40xxx LQFP176 pinout\n1. The above figure shows the package top view.MS19916V4PDR_ON\nPE1PE0PB9PB8BOOT0PB7\nPB6\nPB5PB4PB3PG15\nPG14\nPG13\nPG12\nPG11PG10PG9PD7PD6\nPD5\nPD4PD3PD2PD1PD0PC12PC11PC10PI7\nPI6 PE2PE3PE4PE5\nPA13PE6\nPA12V\nBAT\nPA11PI8\nPA10PC14\nPA9PC15\nPA8\nPF0PC9\nPF1PC8\nPF2PC7\nPF3PC6\nPF4\nPF5 PG8\nPG7\nPF6PG6\nPF7PG5\nPF8PG4\nPF9PG3\nPF10PG2\nPH0PD15\nPH1PD14\nNRSTV\nPC0V\nPC1PD13\nPC2PD12\nPC3PD11\nPD10\nPD9\nVREF+PD8\nPB15\nPA0PB14\nPA1PB13\nPA2PB12PA3\nPA4\nPA5\nPA6\nPA7\nPC4\nPC5\nPB0\nPB1\nPB2\nPF11\nPF12\nVSS\nPF13\nPF14\nPF15\nPG0\nPG1\nPE7\nPE8\nPE9\nPE10\nPE11\nPE12\nPE13\nPE14PE15\nPB10\nPB11176\n175174\n173\n172171170169168167166165\n164\n163162161160159158157156\n155\n154153\n1411\n234\n5\n6789101112\n13\n1415161718192021\n22\n232425132\n131\n130\n129\n128\n127\n126\n125\n124\n123\n122\n121120\n119\n118\n117\n116\n115114\n113\n112\n111\n110\n109\n10845\n46474849\n5051\n52535455565758\n59\n6061626364656667\n68\n80LQFP176\n152\n151150149148\n147\n14614514414314269\n707172737475\n76\n7778792627282930\n31\n3233343536107\n106\n105\n104\n103\n102\n101\n100\n99\n98\n89PI4\nPA15\nPA14\nPI3\nPI2PI5\n140\n139\n138\n137\n136\n135\n134\n133PH4\nPH5\nPH6\nPH7\nPH8PH9\nPH10PH11 8881\n828384858687PI1PI0PH15PH14PH13\nPH1296\n95\n94\n93\n92\n91\n9097\n37\n383940\n41\n424344PC13\nPI9\nPI10\nPI11\nV\nSS\nPH2PH3V\nDD\nVSS\nVDD\nVDD\nVSSA\nVDDA\nBYPASS_REG\nVDD\nVDD\nVSS\nVDD\nVCAP_1\nVDDVSSVDDVCAP_2VSSVDDVSSVDDVSSVDDVSSVDDVDD\nVSSVDD\nVSSVDD\nDS8626 Rev 9 45/203STM32F405xx, STM32F407xx Pinouts and pin description\nFigure 16. STM32F40xxx UFBGA176 ballout\n1. This figure shows the package top view.ai18497b1 2 3 9 10 11 12 13 14 15\nA PE3 PE2 PE1 PE0 PB8 PB5 PG14 PG13 PB4 PB3 PD7 PC12 PA15 PA14 PA13\nB P E 4 P E 5 P E 6 P B 9 P B 7 P B 6 P G 1 5P G 1 2P G 1 1P G 1 0 P D 6 P D 0 P C 1 1P C 1 0P A 1 2\nCV B A T P I 7 P I 6 P I 5 PDR_ON VDD VDD VDD VDD PG9 PD5 PD1 PI3 PI2 PA11\nD PC13 PI8 PI9 PI4 BOOT0 VSS VSS VSS PD4 PD3 PD2 PH15 PI1 PA10\nE PC14 PF0 PI10 PI11 PH13 PH14 PI0 PA9\nF PC15 VSS VDD PH2 VSS VSS VSS VSS VSS VSS VCAP_2 PC9 PA8\nG PH0 VSS VDD PH3 VSS VSS VSS VSS VSS VSS VDD PC8 PC7\nH PH1 PF2 PF1 PH4 VSS VSS VSS VSS VSS VSS VDD PG8 PC6\nJ NRST PF3 PF4 PH5 VSS VSS VSS VSS VSS VDD VDD PG7 PG6\nKP F 7 P F 6 P F 5  VDD VSS VSS VSS VSS VSS PH12 PG5 PG4 PG3\nLP F 1 0 P F 9 P F 8 BYPASS_\nREGPH11 PH10 PD15 PG2\nM VSSA PC0 PC1 PC2 PC3 PB2 PG1 VSS VSS VCAP_1 PH6 PH8 PH9 PD14 PD13\nNV R E F - P A 1 PA0 PA4 PC4 PF13 PG0 VDD VDD VDD PE13 PH7 PD12 PD11 PD10\nP VREF+ PA2 PA6 PA5 PC5 PF12 PF15 PE8 PE9 PE11 PE14 PB12 PB13 PD9 PD8\nR VDDA PA3 PA7 PB1 PB0 PF11 PF14 PE7 PE10 PE12 PE15 PB10 PB11 PB14 PB15VSS4 35 6 7 8\nPinouts and pin description STM32F405xx, STM32F407xx\n46/203 DS8626 Rev 9Figure 17. STM32F40xxx WLCSP90 ballout\n1. This figure shows the package bump view. \n          A VBAT PC13 PDR_ON PB4 PD7 PD4 PC12\nB PC15 VDD PB7 PB3 PD6 PD2 PA15\nC PA0 VSS PC11 PI0 PB6 PD5 PD1\nD PC2 PB8 PA13\nE PC3 VSS\nF PH1 PA1\nG NRST\nH VSSA\nJ PA2 PA4  PA7 PB2 PE11 PB11 PB12\nMS30402V11\nPA14\nPI1\nPA12\nPA10 PA9\nPC0 PC9 PC8\nPH0\nPB13PC6 PD14 \nPD12\nPE8 PE12BYPASS_\nREG\nPD9 PD8\nPE9 PB142 3 4 5 6 7 8 9 10\nVDD\nPC14VCAP_2\nPA11\nPB5 PD0 PC10 PA8\nVSS VDD VSS VDD PC7\nVDD PE10 PE14 VCAP_1 PD15\nPE13 PE15 PD10 PD11\nPA3 PA6 PB1 PB10 PB15PB9BOOT0\nVDDA PB0 PE7 PA5\nTable 6. Legend/abbreviations used in the pinout table \nName Abbreviation Definition\nPin nameUnless otherwise specified in brackets below th e pin name, the pin function during and after \nreset is the same as the actual pin name\nPin typeS Supply pin\nI Input only pin\nI/O Input / output pin\nI/O structureFT 5 V tolerant I/O\nTTa 3.3 V tolerant I/O directly connected to ADC\nB Dedicated BOOT0 pin\nRST Bidirectional reset pin with embedded weak pull-up resistor\nNotes Unless otherwise specified by a note, all I/Os are set as floating inputs during and after reset\nAlternate \nfunctionsFunctions selected through GPIOx_AFR registers\nAdditional \nfunctionsFunctions directly selected/enabl ed through peripheral registers\nDS8626 Rev 9 47/203STM32F405xx, STM32F407xx Pinouts and pin description\n          Table 7. STM32F40xxx pin and ball definitions(1) \nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\n- - 1 1 A2 1 PE2 I/O FT -TRACECLK/ FSMC_A23 / \nETH_MII_TXD3 / \nEVENTOUT-\n- - 2 2 A1 2 PE3 I/O FT -TRACED0/FSMC_A19 / \nEVENTOUT-\n- - 3 3 B1 3 PE4 I/O FT -TRACED1/FSMC_A20 / \nDCMI_D4/ EVENTOUT-\n- - 4 4 B2 4 PE5 I/O FT -TRACED2 / FSMC_A21 / \nTIM9_CH1 / DCMI_D6 / \nEVENTOUT-\n- - 5 5 B3 5 PE6 I/O FT -TRACED3 / FSMC_A22 / \nTIM9_CH2 / DCMI_D7 / \nEVENTOUT-\n1A 1 06 6 C 1 6 VBAT S- - - -\n- - - - D2 7 PI8 I/O FT(3)(\n4) EVENTOUTRTC_TAMP1, \nRTC_TAMP2, \nRTC_TS\n2 A9 7 7 D1 8 PC13 I/O FT(3)\n(4) EVENTOUTRTC_OUT, \nRTC_TAMP1, \nRTC_TS\n3B 1 08 8 E 1 9PC14/OSC32_IN\n(PC14)I/O FT(3)(\n4) EVENTOUT OSC32_IN(5)\n4B 99 9 F 11 0PC15/ \nOSC32_OUT\n(PC15)I/O FT(3)(\n4) EVENTOUT OSC32_OUT(5)\n- - - - D3 11 PI9 I/O FT - CAN1_RX  / EVENTOUT -\n- - - - E3 12 PI10 I/O FT -ETH_MII_RX_ER / \nEVENTOUT-\n- - - - E4 13 PI11 I/O FT -OTG_HS_ULPI_DIR / \nEVENTOUT-\n----F 2 1 4 VSS S- - - -\n----F 3 1 5 VDD S- - - -\n- - - 10 E2 16 PF0 I/O FT -FSMC_A0 / I2C2_SDA / \nEVENTOUT-\nPinouts and pin description STM32F405xx, STM32F407xx\n48/203 DS8626 Rev 9- - - 11 H3 17 PF1 I/O FT -FSMC_A1 / I2C2_SCL / \nEVENTOUT-\n- - - 12 H2 18 PF2 I/O FT -FSMC_A2 / I2C2_SMBA / \nEVENTOUT-\n- - - 13 J2 19 PF3 I/O FT(5)FSMC_A3/EVENTOUT ADC3_IN9\n- - - 14 J3 20 PF4 I/O FT(5)FSMC_A4/EVENTOUT ADC3_IN14\n- - - 15 K3 21 PF5 I/O FT(5)FSMC_A5/EVENTOUT ADC3_IN15\n-C 9 1 0 1 6 G 22 2 VSS S- - - -\n-B 8 1 1 1 7 G 32 3 VDD S- - - -\n- - - 18 K2 24 PF6 I/O FT(5)TIM10_CH1 / \nFSMC_NIORD/ \nEVENTOUTADC3_IN4\n- - - 19 K1 25 PF7 I/O FT(5)TIM11_CH1/FSMC_NREG/ \nEVENTOUTADC3_IN5\n- - - 20 L3 26 PF8 I/O FT(5)TIM13_CH1 / \nFSMC_NIOWR/ \nEVENTOUTADC3_IN6\n- - - 21 L2 27 PF9 I/O FT(5) TIM14_CH1 / FSMC_CD/ \nEVENTOUTADC3_IN7\n- - - 22 L1 28 PF10 I/O FT(5)FSMC_INTR/ EVENTOUT ADC3_IN8\n5 F10 12 23 G1 29PH0/OSC_IN\n(PH0)I/O FT -  EVENTOUT OSC_IN(5)\n6F 9 1 3 2 4H 13 0PH1/OSC_OUT\n(PH1)I/O FT - EVENTOUT OSC_OUT(5)\n7 G10 14 25 J1 31 NRST I/O RST - - -\n8 E10 15 26 M2 32 PC0 I/O FT(5) OTG_HS_ULPI_STP/ \nEVENTOUTADC123_IN10\n9 - 16 27 M3 33 PC1 I/O FT(5)ETH_MDC/ EVENTOUT ADC123_IN11\n10 D10 17 28 M4 34 PC2 I/O FT(5)SPI2_MISO / \nOTG_HS_ULPI_DIR / \nETH_MII_TXD2 \n/I2S2ext_SD/ EVENTOUTADC123_IN12Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nDS8626 Rev 9 49/203STM32F405xx, STM32F407xx Pinouts and pin description\n11 E9 18 29 M5 35 PC3 I/O FT(5)SPI2_MOSI / I2S2_SD / \nOTG_HS_ULPI_NXT / \nETH_MII_TX_CLK / \nEVENTOUTADC123_IN13\n-- 1 9 3 0-3 6 VDD S- - - -\n12 H10 20 31 M1 37 VSSA S- - - -\n---- N 1 - VREF – S- - - -\n- - 21 32 P1 38 VREF+ S- - - -\n13 G9 22 33 R1 39 VDDA S- - - -\n14 C10 23 34 N3 40PA0/WKUP\n(PA0)I/O FT(6)USART2_CTS/ \nUART4_TX/\nETH_MII_CRS / \nTIM2_CH1_ETR/\nTIM5_CH1 / TIM8_ETR/ \nEVENTOUTADC123_IN0/WKU\nP(5)\n15 F8 24 35 N2 41 PA1 I/O FT(5)USART2_RTS / \nUART4_RX/\nETH_RMII_REF_CLK / \nETH_MII_RX_CLK / \nTIM5_CH2 / TIM2_CH2/ \nEVENTOUTADC123_IN1\n16 J10 25 36 P2 42 PA2 I/O FT(5)USART2_TX/TIM5_CH3 / \nTIM9_CH1 / TIM2_CH3 / \nETH_MDIO/ EVENTOUTADC123_IN2\n- - - - F4 43 PH2 I/O FT - ETH_MII_CRS/EVENTOUT -\n- - - - G4 44 PH3 I/O FT - ETH_MII_COL/EVENTOUT -\n- - - - H4 45 PH4 I/O FT -I2C2_SCL / \nOTG_HS_ULPI_NXT/ \nEVENTOUT-\n- - - - J4 46 PH5 I/O FT - I2C2_SDA/ EVENTOUT -\n17 H9 26 37 R2 47 PA3 I/O FT(5)USART2_RX/TIM5_CH4 / \nTIM9_CH2 / TIM2_CH4 / \nOTG_HS_ULPI_D0 / \nETH_MII_COL/ \nEVENTOUTADC123_IN3\n18 E5 27 38 - - VSS S- - - -Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nPinouts and pin description STM32F405xx, STM32F407xx\n50/203 DS8626 Rev 9D9 L4 48 BYPASS_REG I FT - - -\n19 E4 28 39 K4 49 VDD S- - - -\n20 J9 29 40 N4 50 PA4 I/O TTa(5)SPI1_NSS / SPI3_NSS / \nUSART2_CK / \nDCMI_HSYNC / \nOTG_HS_SOF/ I2S3_WS/ \nEVENTOUTADC12_IN4 \n/DAC_OUT1\n21 G8 30 41 P4 51 PA5 I/O TTa(5)SPI1_SCK/ \nOTG_HS_ULPI_CK / \nTIM2_CH1_ETR/ \nTIM8_CH1N/ EVENTOUTADC12_IN5/DAC_\nOUT2\n22 H8 31 42 P3 52 PA6 I/O FT(5)SPI1_MISO / \nTIM8_BKIN/TIM13_CH1 / \nDCMI_PIXCLK / TIM3_CH1 \n/ TIM1_BKIN / EVENTOUTADC12_IN6\n23 J8 32 43 R3 53 PA7 I/O FT(5)SPI1_MOSI/ TIM8_CH1N / \nTIM14_CH1/TIM3_CH2/ \nETH_MII_RX_DV / \nTIM1_CH1N / \nETH_RMII_CRS_DV/ \nEVENTOUTADC12_IN7\n24 - 33 44 N5 54 PC4 I/O FT(5)ETH_RMII_RX_D0 / \nETH_MII_RX_D0/\nEVENTOUTADC12_IN14\n25 - 34 45 P5 55 PC5 I/O FT(5)ETH_RMII_RX_D1 / \nETH_MII_RX_D1/ \nEVENTOUTADC12_IN15\n26 G7 35 46 R5 56 PB0 I/O FT(5)TIM3_CH3 / TIM8_CH2N/ \nOTG_HS_ULPI_D1/ \nETH_MII_RXD2 / \nTIM1_CH2N/ EVENTOUTADC12_IN8\n27 H7 36 47 R4 57 PB1 I/O FT(5)TIM3_CH4 / TIM8_CH3N/ \nOTG_HS_ULPI_D2/ \nETH_MII_RXD3 / \nTIM1_CH3N/ EVENTOUTADC12_IN9\n28 J7 37 48 M6 58PB2/BOOT1\n(PB2)I/O FT - EVENTOUT -Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nDS8626 Rev 9 51/203STM32F405xx, STM32F407xx Pinouts and pin description\n- - - 49 R6 59 PF11 I/O FT - DCMI_D12/ EVENTOUT -\n- - - 50 P6 60 PF12 I/O FT - FSMC_A6/ EVENTOUT ---- 5 1 M 8 6 1 V\nSS S- - - -\n--- 5 2 N 8 6 2 VDD S- - - -\n- - - 53 N6 63 PF13 I/O FT - FSMC_A7/ EVENTOUT -\n- - - 54 R7 64 PF14 I/O FT - FSMC_A8/ EVENTOUT -\n- - - 55 P7 65 PF15 I/O FT - FSMC_A9/ EVENTOUT -- - - 56 N7 66 PG0 I/O FT - FSMC_A10/ EVENTOUT -\n- - - 57 M7 67 PG1 I/O FT - FSMC_A11/ EVENTOUT -\n- G 63 85 8 R 8 6 8 P E 7 I / O F T -FSMC_D4/TIM1_ETR/ \nEVENTOUT-\n- H6 39 59 P8 69 PE8 I/O FT -FSMC_D5/ TIM1_CH1N/ \nEVENTOUT-\n- J6 40 60 P9 70 PE9 I/O FT -FSMC_D6/TIM1_CH1/ \nEVENTOUT-\n--- 6 1 M 9 7 1 V\nSS S- - - -\n--- 6 2 N 9 7 2 VDD S- - - -\n- F6 41 63 R9 73 PE10 I/O FT -FSMC_D7/TIM1_CH2N/ \nEVENTOUT-\n- J5 42 64 P10 74 PE11 I/O FT -FSMC_D8/TIM1_CH2/ \nEVENTOUT-\n- H 54 36 5R 1 07 5 P E 1 2 I / O F T -FSMC_D9/TIM1_CH3N/ \nEVENTOUT-\n- G 54 46 6N 1 17 6 P E 1 3 I / O F T -FSMC_D10/TIM1_CH3/ \nEVENTOUT-\n- F5 45 67 P11 77 PE14 I/O FT -FSMC_D11/TIM1_CH4/ \nEVENTOUT-\n- G 44 66 8R 1 17 8 P E 1 5 I / O F T -FSMC_D12/TIM1_BKIN/ \nEVENTOUT-Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nPinouts and pin description STM32F405xx, STM32F407xx\n52/203 DS8626 Rev 929 H4 47 69 R12 79 PB10 I/O FT -SPI2_SCK / I2S2_CK / \nI2C2_SCL/ USART3_TX / \nOTG_HS_ULPI_D3 / \nETH_MII_RX_ER / \nTIM2_CH3/ EVENTOUT-\n30 J4 48 70 R13 80 PB11 I/O FT -I2C2_SDA/USART3_RX/ \nOTG_HS_ULPI_D4 / \nETH_RMII_TX_EN/ \nETH_MII_TX_EN / \nTIM2_CH4/ EVENTOUT-\n31 F4 49 71 M10 81 VCAP_1 S- - -\n32 - 50 72 N10 82 VDD S- - -\n- - - - M11 83 PH6 I/O FT -I2C2_SMBA / TIM12_CH1 / \nETH_MII_RXD2/ \nEVENTOUT-\n- - - - N12 84 PH7 I/O FT -I2C3_SCL / \nETH_MII_RXD3/ \nEVENTOUT-\n- - - - M12 85 PH8 I/O FT -I2C3_SDA / \nDCMI_HSYNC/ \nEVENTOUT-\n- - - - M13 86 PH9 I/O FT -I2C3_SMBA / TIM12_CH2/ \nDCMI_D0/ EVENTOUT-\n- - - - L13 87 PH10 I/O FT -TIM5_CH1 / DCMI_D1/ \nEVENTOUT-\n- - - - L12 88 PH11 I/O FT -TIM5_CH2 / DCMI_D2/ \nEVENTOUT-\n- - - - K12 89 PH12 I/O FT -TIM5_CH3 / DCMI_D3/ \nEVENTOUT-\n---- H 1 2 9 0 VSS S- - - -\n---- J 1 2 9 1 VDD S- - - -Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nDS8626 Rev 9 53/203STM32F405xx, STM32F407xx Pinouts and pin description\n33 J3 51 73 P12 92 PB12 I/O FT -SPI2_NSS / I2S2_WS / \nI2C2_SMBA/\nUSART3_CK/ TIM1_BKIN / \nCAN2_RX / \nOTG_HS_ULPI_D5/ \nETH_RMII_TXD0 / \nETH_MII_TXD0/ \nOTG_HS_ID/ EVENTOUT-\n34 J1 52 74 P13 93 PB13 I/O FT -SPI2_SCK / I2S2_CK / \nUSART3_CTS/\nTIM1_CH1N /CAN2_TX / \nOTG_HS_ULPI_D6 / \nETH_RMII_TXD1 / \nETH_MII_TXD1/ \nEVENTOUTOTG_HS_VBUS\n35 J2 53 75 R14 94 PB14 I/O FT -SPI2_MISO/ TIM1_CH2N / \nTIM12_CH1 / \nOTG_HS_DM/\nUSART3_RTS / \nTIM8_CH2N/I2S2ext_SD/ \nEVENTOUT-\n36 H1 54 76 R15 95 PB15 I/O FT -SPI2_MOSI / I2S2_SD/ \nTIM1_CH3N / TIM8_CH3N \n/ TIM12_CH2 / \nOTG_HS_DP/ EVENTOUTRTC_REFIN\n- H2 55 77 P15 96 PD8 I/O FT -FSMC_D13 / USART3_TX/ \nEVENTOUT-\n- H3 56 78 P14 97 PD9 I/O FT -FSMC_D14 / USART3_RX/ \nEVENTOUT-\n- G3 57 79 N15 98 PD10 I/O FT -FSMC_D15 / USART3_CK/ \nEVENTOUT-\n- G 15 88 0N 1 49 9 P D 1 1 I / O F T -FSMC_CLE / \nFSMC_A16/USART3_CTS/ \nEVENTOUT-\n- G2 59 81 N13 100 PD12 I/O FT -FSMC_ALE/ \nFSMC_A17/TIM4_CH1 / \nUSART3_RTS/ \nEVENTOUT-Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nPinouts and pin description STM32F405xx, STM32F407xx\n54/203 DS8626 Rev 9- - 60 82 M15 101 PD13 I/O FT -FSMC_A18/TIM4_CH2/ \nEVENTOUT-\n- - - 83 - 102 VSS S- - -\n- - - 84 J13 103 VDD S- - -\n- F2 61 85 M14 104 PD14 I/O FT -FSMC_D0/TIM4_CH3/ \nEVENTOUT/ EVENTOUT-\n- F1 62 86 L14 105 PD15 I/O FT -FSMC_D1/TIM4_CH4/ \nEVENTOUT-\n- - - 87 L15 106 PG2 I/O FT - FSMC_A12/ EVENTOUT -\n- - - 88 K15 107 PG3 I/O FT - FSMC_A13/ EVENTOUT -- - - 89 K14 108 PG4 I/O FT - FSMC_A14/ EVENTOUT -\n- - - 90 K13 109 PG5 I/O FT - FSMC_A15/ EVENTOUT -\n- - - 91 J15 110 PG6 I/O FT - FSMC_INT2/ EVENTOUT -\n- - - 92 J14 111 PG7 I/O FT -FSMC_INT3 /USART6_CK/ \nEVENTOUT-\n- - - 93 H14 112 PG8 I/O FT -USART6_RTS / \nETH_PPS_OUT/ \nEVENTOUT-\n--- 9 4 G 1 2 1 1 3 V\nSS S- - -\n--- 9 5 H 1 3 1 1 4 VDD S- - -\n37 F3 63 96 H15 115 PC6 I/O FT -I2S2_MCK / \nTIM8_CH1/SDIO_D6 / \nUSART6_TX / \nDCMI_D0/TIM3_CH1/ \nEVENTOUT-\n38 E1 64 97 G15 116 PC7 I/O FT -I2S3_MCK / \nTIM8_CH2/SDIO_D7 / \nUSART6_RX / \nDCMI_D1/TIM3_CH2/ \nEVENTOUT-\n39 E2 65 98 G14 117 PC8 I/O FT -TIM8_CH3/SDIO_D0 \n/TIM3_CH3/ USART6_CK / \nDCMI_D2/ EVENTOUT-Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nDS8626 Rev 9 55/203STM32F405xx, STM32F407xx Pinouts and pin description\n40 E3 66 99 F14 118 PC9 I/O FT -I2S_CKIN/ MCO2 / \nTIM8_CH4/SDIO_D1 / \n/I2C3_SDA / DCMI_D3 / \nTIM3_CH4/ EVENTOUT-\n41 D1 67 100 F15 119 PA8 I/O FT -MCO1 / USART1_CK/ \nTIM1_CH1/ I2C3_SCL/ \nOTG_FS_SOF/ \nEVENTOUT-\n42 D2 68 101 E15 120 PA9 I/O FT -USART1_TX/ TIM1_CH2 / \nI2C3_SMBA / DCMI_D0/ \nEVENTOUTOTG_FS_VBUS\n43 D3 69 102 D15 121 PA10 I/O FT -USART1_RX/ TIM1_CH3/ \nOTG_FS_ID/DCMI_D1/ \nEVENTOUT-\n44 C1 70 103 C15 122 PA11 I/O FT -USART1_CTS / CAN1_RX \n/ TIM1_CH4 / \nOTG_FS_DM/ EVENTOUT-\n45 C2 71 104 B15 123 PA12 I/O FT -USART1_RTS / CAN1_TX/ \nTIM1_ETR/ OTG_FS_DP/ \nEVENTOUT-\n46 D4 72 105 A15 124PA13\n(JTMS-SWDIO)I/O FT - JTMS-SWDIO/ EVENTOUT -\n47 B1 73 106 F13 125 VCAP_2 S- - - -\n- E7 74 107 F12 126 VSS S- - - -\n48 E6 75 108 G13 127 VDD S- - - -\n- - - - E12 128 PH13 I/O FT -TIM8_CH1N / CAN1_TX/ \nEVENTOUT-\n- - - - E13 129 PH14 I/O FT -TIM8_CH2N / DCMI_D4/ \nEVENTOUT-\n- - - - D13 130 PH15 I/O FT -TIM8_CH3N / DCMI_D11/ \nEVENTOUT-\n- C3 - - E14 131 PI0 I/O FT -TIM5_CH4 / SPI2_NSS / \nI2S2_WS / DCMI_D13/ \nEVENTOUT-\n- B2 - - D14 132 PI1 I/O FT -SPI2_SCK / I2S2_CK / \nDCMI_D8/ EVENTOUT-Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nPinouts and pin description STM32F405xx, STM32F407xx\n56/203 DS8626 Rev 9- - - - C14 133 PI2 I/O FT -TIM8_CH4 /SPI2_MISO / \nDCMI_D9 / I2S2ext_SD/ \nEVENTOUT-\n- - - - C13 134 PI3 I/O FTTIM8_ETR / SPI2_MOSI / \nI2S2_SD / DCMI_D10/ \nEVENTOUT-\n- - - - D9 135 VSS S- - - -\n- - - - C9 136 VDD S- - - -\n49 A2 76 109 A14 137PA14\n(JTCK/SWCLK)I/O FT - JTCK-SWCLK/ EVENTOUT -\n50 B3 77 110 A13 138PA15\n(JTDI)I/O FT -JTDI/ SPI3_NSS/ \nI2S3_WS/TIM2_CH1_ETR \n/ SPI1_NSS / EVENTOUT-\n51 D5 78 111 B14 139 PC10 I/O FT -SPI3_SCK / I2S3_CK/ \nUART4_TX/SDIO_D2 / \nDCMI_D8 / USART3_TX/ \nEVENTOUT-\n52 C4 79 112 B13 140 PC11 I/O FT -UART4_RX/ SPI3_MISO / \nSDIO_D3 / \nDCMI_D4/USART3_RX / \nI2S3ext_SD/ EVENTOUT-\n53 A3 80 113 A12 141 PC12 I/O FT -UART5_TX/SDIO_CK / \nDCMI_D9 / SPI3_MOSI \n/I2S3_SD / USART3_CK/ \nEVENTOUT-\n- D6 81 114 B12 142 PD0 I/O FT -FSMC_D2/CAN1_RX/ \nEVENTOUT-\n- C5 82 115 C12 143 PD1 I/O FT -FSMC_D3 / CAN1_TX/ \nEVENTOUT-\n54 B4 83 116 D12 144 PD2 I/O FT -TIM3_ETR/UART5_RX/ \nSDIO_CMD / DCMI_D11/ \nEVENTOUT-\n- - 84 117 D11 145 PD3 I/O FT -FSMC_CLK/ \nUSART2_CTS/ \nEVENTOUT-Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nDS8626 Rev 9 57/203STM32F405xx, STM32F407xx Pinouts and pin description\n- A4 85 118 D10 146 PD4 I/O FT -FSMC_NOE/ \nUSART2_RTS/ \nEVENTOUT-\n- C6 86 119 C11 147 PD5 I/O FT -FSMC_NWE/USART2_TX/ \nEVENTOUT-\n- - - 120 D8 148 VSS S- - - -\n- - - 121 C8 149 VDD S- - - -\n- B5 87 122 B11 150 PD6 I/O FT -FSMC_NWAIT/\nUSART2_RX/ EVENTOUT-\n- A5 88 123 A11 151 PD7 I/O FT -USART2_CK/FSMC_NE1/\nFSMC_NCE2/ EVENTOUT-\n- - - 124 C10 152 PG9 I/O FT -USART6_RX / \nFSMC_NE2/FSMC_NCE3/ \nEVENTOUT-\n- - - 125 B10 153 PG10 I/O FT -FSMC_NCE4_1/ \nFSMC_NE3/ EVENTOUT-\n- - - 126 B9 154 PG11 I/O FT -FSMC_NCE4_2 / \nETH_MII_TX_EN/\nETH _RMII_TX_EN/ \nEVENTOUT-\n- - - 127 B8 155 PG12 I/O FT -FSMC_NE4 / \nUSART6_RTS/ \nEVENTOUT-\n- - - 128 A8 156 PG13 I/O FT -FSMC_A24 / \nUSART6_CTS\n/ETH_MII_TXD0/\nETH_RMII_TXD0/ \nEVENTOUT-\n- - - 129 A7 157 PG14 I/O FT -FSMC_A25 / USART6_TX\n/ETH_MII_TXD1/\nETH_RMII_TXD1/ \nEVENTOUT-\n- E8 - 130 D7 158 VSS S- - - -\n- F7 - 131 C7 159 VDD S- - - -\n- - - 132 B7 160 PG15 I/O FT -USART6_CTS / \nDCMI_D13/ EVENTOUT-Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nPinouts and pin description STM32F405xx, STM32F407xx\n58/203 DS8626 Rev 955 B6 89 133 A10 161PB3\n(JTDO/\nTRACESWO)I/O FT -JTDO/ TRACESWO/ \nSPI3_SCK / I2S3_CK / \nTIM2_CH2 / SPI1_SCK/ \nEVENTOUT-\n56 A6 90 134 A9 162PB4\n(NJTRST)I/O FT -NJTRST/ SPI3_MISO / \nTIM3_CH1 / SPI1_MISO / \nI2S3ext_SD/ EVENTOUT-\n57 D7 91 135 A6 163 PB5 I/O FT -I2C1_SMBA/ CAN2_RX / \nOTG_HS_ULPI_D7 / \nETH_PPS_OUT/TIM3_CH2 \n/ SPI1_MOSI/ SPI3_MOSI / \nDCMI_D10 / I2S3_SD/ \nEVENTOUT-\n58 C7 92 136 B6 164 PB6 I/O FT -I2C1_SCL/ TIM4_CH1 / \nCAN2_TX / \nDCMI_D5/USART1_TX/ \nEVENTOUT-\n59 B7 93 137 B5 165 PB7 I/O FT -I2C1_SDA / FSMC_NL / \nDCMI_VSYNC / \nUSART1_RX/ TIM4_CH2/ \nEVENTOUT-\n60 A7 94 138 D6 166 BOOT0 I B - - VPP\n61 D8 95 139 A5 167 PB8 I/O FT -TIM4_CH3/SDIO_D4/ \nTIM10_CH1 / DCMI_D6 / \nETH_MII_TXD3 / \nI2C1_SCL/ CAN1_RX/ \nEVENTOUT-\n62 C8 96 140 B4 168 PB9 I/O FT -SPI2_NSS/ I2S2_WS  / \nTIM4_CH4/ TIM11_CH1/ \nSDIO_D5 / DCMI_D7 / \nI2C1_SDA / CAN1_TX/ \nEVENTOUT-\n- - 97 141 A4 169 PE0 I/O FT -TIM4_ETR / FSMC_NBL0 / \nDCMI_D2/ EVENTOUT-\n- - 98 142 A3 170 PE1 I/O FT -FSMC_NBL1 / DCMI_D3/ \nEVENTOUT-\n63 - 99 - D5 - VSS S- - - -Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nDS8626 Rev 9 59/203STM32F405xx, STM32F407xx Pinouts and pin description\n          - A8 - 143 C6 171 PDR_ON I FT - - -\n64 A110\n0144 C5 172 VDD S- - - -\n- - - - D4 173 PI4 I/O FT -TIM8_BKIN / DCMI_D5/ \nEVENTOUT-\n- - - - C4 174 PI5 I/O FT -TIM8_CH1 / \nDCMI_VSYNC/ \nEVENTOUT-\n- - - - C3 175 PI6 I/O FT -TIM8_CH2 / DCMI_D6/ \nEVENTOUT-\n- - - - C2 176 PI7 I/O FT -TIM8_CH3 / DCMI_D7/ \nEVENTOUT-\n1. UFBGA176 F6, F7, F8, F9, F10, G6, G7, G8, G9, G10, H6, H7, H8, H9, H10, J6, J7, J8, J9, J10, K6, K7, K8, K9 and K10 balls \nare connected to VSS for heat dissipation and pa ckage mechanical stability.\n2. Function availability depends on the chosen device.\n3. PC13, PC14, PC15 and PI8 are supplied through the power switch . Since the switch only sinks a limited amount of current \n(3 mA), the use of GPIOs PC13 to PC15 and PI8 in output mode is limited:  \n- The speed should not exceed 2 MHz with a maximum load of 30 pF.  \n- These I/Os must not be used as a current source (e.g. to drive an LED).\n4. Main function after the first backup domain power-up. Later on, it depends on the contents of the RTC registers even after \nreset (because these registers are not reset by the main rese t). For details on how to manage these I/Os, refer to the RTC \nregister description sections in the STM32F4xx reference manual, available fr om the STMicroelectronics website: \nwww.st.com .\n5. FT = 5 V tolerant except when in analog mode or oscillator mode (for PC14, PC15, PH0 and PH1).\n6. If the device is delivered in an UFBGA176 or WLCSP90 and the BYPASS_REG pin is set to VDD (Regulator off/internal reset \nON mode), then PA0 is used as an internal Reset (active low). Table 7. STM32F40xxx pin and ball definitions(1) (continued)\nPin number\nPin name\n(function after \nreset)(2)\nPin type\nI / O structure\nNotesAlternate functionsAdditional \nfunctionsLQFP64\nWLCSP90\nLQFP100\nLQFP144\nUFBGA176\nLQFP176\nTable 8. FSMC pin definition \nPins(1)FSMC\nLQFP100(2)WLCSP90\n(2)\nCFNOR/PSRAM/\nSRAMNOR/PSRAM Mux NAND 16 bit\nPE2 - A23 A23 - Yes -\nPE3 - A19 A19 - Yes -\nPE4 - A20 A20 - Yes -\nPE5 - A21 A21 - Yes -PE6 - A22 A22 - Yes -\nPinouts and pin description STM32F405xx, STM32F407xx\n60/203 DS8626 Rev 9PF0 A0 A0 - - - -\nPF1 A1 A1 - - - -PF2 A2 A2 - - - -\nPF3 A3 A3 - - - -\nPF4 A4 A4 - - - -PF5 A5 A5 - - - -\nPF6 NIORD - - - - -\nPF7 NREG - - - - -PF8 NIOWR - - - - -\nPF9 CD - - - - -\nPF10 INTR - - - - -\nPF12 A6 A6 - - - -\nPF13 A7 A7 - - - -PF14 A8 A8 - - - -\nPF15 A9 A9 - - - -\nPG0 A10 A10 - - - -PG1 A11 - - - -\nPE7 D4 D4 DA4 D4 Yes Yes\nPE8 D5 D5 DA5 D5 Yes YesPE9 D6 D6 DA6 D6 Yes Yes\nPE10 D7 D7 DA7 D7 Yes Yes\nPE11 D8 D8 DA8 D8 Yes Yes\nPE12 D9 D9 DA9 D9 Yes Yes\nPE13 D10 D10 DA10 D10 Yes Yes\nPE14 D11 D11 DA11 D11 Yes YesPE15 D12 D12 DA12 D12 Yes Yes\nPD8 D13 D13 DA13 D13 Yes Yes\nPD9 D14 D14 DA14 D14 Yes Yes\nPD10 D15 D15 DA15 D15 Yes Yes\nPD11 - A16 A16 CLE Yes Yes\nPD12 - A17 A17 ALE Yes YesPD13 - A18 A18 - Yes -\nPD14 D0 D0 DA0 D0 Yes YesTable 8. FSMC pin definition (continued)\nPins(1)FSMC\nLQFP100(2)WLCSP90\n(2)\nCFNOR/PSRAM/\nSRAMNOR/PSRAM Mux NAND 16 bit\nDS8626 Rev 9 61/203STM32F405xx, STM32F407xx Pinouts and pin description\nPD15 D1 D1 DA1 D1 Yes Yes\nPG2 - A12 - - - -PG3 - A13 - - - -\nPG4 - A14 - - - -\nPG5 - A15 - - - -PG6 - - - INT2 - -\nPG7 - - - INT3 - -\nPD0 D2 D2 DA2 D2 Yes YesPD1 D3 D3 DA3 D3 Yes Yes\nPD3 - CLK CLK - Yes -\nPD4 NOE NOE NOE NOE Yes Yes\nPD5 NWE NWE NWE NWE Yes Yes\nPD6 NWAIT NWAIT NWAIT NWAIT Yes YesPD7 - NE1 NE1 NCE2 Yes Yes\nPG9 - NE2 NE2 NCE3 - -\nPG10 NCE4_1 NE3 NE3 - - -\nPG11 NCE4_2 - - - - -\nPG12 - NE4 NE4 - - -\nPG13 - A24 A24 - - -PG14 - A25 A25 - - -\nPB7 - NADV NADV - Yes Yes\nPE0 - NBL0 NBL0 - Yes -PE1 - NBL1 NBL1 - Yes -\n1. Full FSMC features are available on LQFP144, LQFP176, and UFBGA176. The features available on \nsmaller packages are given in  the dedicated package column. \n2. Ports F and G are not available in devices delivered in 100-pin packages.Table 8. FSMC pin definition (continued)\nPins(1)FSMC\nLQFP100(2)WLCSP90\n(2)\nCFNOR/PSRAM/\nSRAMNOR/PSRAM Mux NAND 16 bit\nPinouts and pin description STM32F405xx, STM32F407xx\n62/203 DS8626 Rev 9\nTable 9. Alternate function mapping \nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nPort APA0 -TIM2_CH1_\nETR TIM 5_CH1 TIM8_ETR - - - USART2_CTS UART4_TX - - ETH_MII_CRS - - - EVENTOUT\nPA1 - TIM2_CH2 TIM5_CH2 - - - - USART2_RTS UART4_RX - -ETH_MII \n_RX_CLK\nETH_RMII__REF\n_CLK-- - E V E N T O U T\nPA2 - TIM2_CH3 TIM5_CH3 TIM9_CH1 - - - USART2_TX - - - ETH_MDIO - - - EVENTOUT\nPA3 - TIM2_CH4 TIM5_CH4 TIM9_CH2 - - - USART2_RX - -OTG_HS_ULPI_\nD0 ETH _MII_COL - - - EVENTOUT\nPA4 - - - - - SPI1_NSS SPI3_NSS \nI2S3_WS USART2_CK - - - - OTG_HS_SOFDCMI_\nHSYNC -E V E N T O U T\nPA5 -TIM2_CH1_\nETR - TIM8_CH1N - SPI1_SCK - - - -OTG_HS_ULPI_\nCK - - - - EVENTOUT\nPA6 - TIM1_BKIN TIM3_CH1 TIM8_BKIN - SPI1_MISO - - - TIM13_CH1 - - -DCMI_\nPIXCLK -E V E N T O U T\nPA7 - TIM1_CH1N TIM3_CH2 TIM8_CH1N - SPI1_MOSI - - - TIM14_CH1 -ETH_MII _RX_DV \nETH_RMII \n_CRS_DV-- - E V E N T O U T\nPA8 MCO1 TIM1_CH1 - - I2C3_SCL - - USART1_CK - - OTG_FS_SOF - - - - EVENTOUT\nPA9 - TIM1_CH2 - -I2C3_\nSMBA- - USART1_TX - - - - - DCMI_D0 - EVENTOUT\nPA10 - TIM1_CH3 - - - - - USART1_RX - - OTG_FS_ID - - DCMI_D1 - EVENTOUT\nPA11 - TIM1_CH4 - - - - - USART1_CTS - CAN1_RX OTG_FS_DM - - - - EVENTOUT\nPA12 - TIM1_ETR - - - - - USART1_RTS - CAN1_TX OTG_FS_DP - - - - EVENTOUT\nPA13JTMS-\nSWDIO - - - - - - - - - - - - - - EVENTOUT\nPA14JTCK-\nSWCLK - - - - - - - - - - - - - - EVENTOUT\nPA15 JTDI TIM 2_CH1 \nTIM 2_ETR - - - SPI1_NSS SPI3_NSS/\nI2S3_WS- - - - - - - - EVENTOUT\nSTM32F405xx, STM32F407xx Pinouts and pin description\nDS8626 Rev 9 63/203\nPort BPB0 - TIM1_CH2N TIM3_CH3 TIM8_CH2N - - - - - -OTG_HS_ULPI_\nD1 ETH _MII_RXD2 - - - EVENTOUT\nPB1 - TIM1_CH3N TIM3_CH4 TIM8_CH3N - - - - -OTG_HS_ULPI_\nD2 ETH _MII_RXD3 - - - EVENTOUT\nPB2 - - - - - - - - - - - - - - - EVENTOUT\nPB3JTDO/\nTRACES\nWO TIM2_CH2 - - - SPI1_SCK SPI3_SCK \nI2S3_CK - - - - - - - - EVENTOUT\nPB4 NJTRST - TIM3_CH1 - SPI1_MISO SPI3_MISO I2S3ext_SD - - - - - - - EVENTOUT\nPB5 - - TIM3_CH2 I2C1_SMB\nASPI1_MOSI SPI3_MOSI \nI2S3_SD - CAN2_RX OTG_HS_ULPI_\nD7 ETH _PPS_OUT - DCMI_D10 - EVENTOUT\nPB6 - - TIM4_CH1 I2C1_SCL - - USART1_TX - CAN2_TX - - - DCMI_D5 - EVENTOUTPB7 - - TIM4_CH2 I2C1_SDA - - USART1_RX - - - - FSMC_NL DCMI_VSYN\nC -E V E N T O U T\nPB8 - - TIM4_CH3 TIM10_CH1 I2C1_SCL - - - - CAN1_RX - ETH _MII_TXD3 SDIO_D4 DCMI_D6 - EVENTOUT\nPB9 - - TIM4_CH4 TIM11_CH1 I2C1_SDA SPI2_NSS\nI2S2_WS - - - CAN1_TX - - SDIO_D5 DCMI_D7 - EVENTOUT\nPB10 - TIM2_CH3 - - I2C2_SCL SPI2_SCK \nI2S2_CK -U S A R T 3 _ T X  - -OTG_HS_ULPI_\nD3 ETH_ MII_RX_ER - - - EVENTOUT\nPB11 - TIM2_CH4 - - I2C2_SDA - - USART3_RX - -OTG_HS_ULPI_\nD4 ETH _MII_TX_EN\nETH \n_RMII_TX_EN-- - E V E N T O U T\nPB12 - TIM1_BKIN - -I2C2_\nSMBASPI2_NSS \nI2S2_WS - USART3_CK - CAN2_RX OTG_HS_ULPI_\nD5 ETH _MII_TXD0\nETH _RMII_TXD0OTG_HS_ID - - EVENTOUT\nPB13 - TIM1_CH1N - - -SPI2_SCK \nI2S2_CK- USART3_CTS - CAN2_TX OTG_HS_ULPI_\nD6 ETH _MII_TXD1 \nETH _RMII_TXD1 -- - E V E N T O U T\nPB14 - TIM1_CH2N - TIM8_CH2N - SPI2_MISO I2S2ext_SD USART3_RTS - TIM12_CH1 - - OTG_HS_DM - - EVENTOUT\nPB15RTC_\nREFINTIM1_CH3N - TIM8_CH3N -SPI2_MOSI \nI2S2_SD- - - TIM12_CH2 - - OTG_HS_DP - - EVENTOUTTable 9. Alternate function mapping (continued)\nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nPinouts and pin description STM32F405xx, STM32F407xx\n64/203 DS8626 Rev 9\nPort CPC0 - - - - - - - - - -OTG_HS_ULPI_\nSTP - - - - EVENTOUT\nPC1 - - - - - - - - - - - ETH_MDC - - - EVENTOUT\nPC2 - - - - - SPI2_MISO I2S2ext_SD - - -OTG_HS_ULPI_\nDIR ETH _MII_TXD2 - - - EVENTOUT\nPC3 - - - - -SPI2_MOSI\nI2S2_SD-- - -OTG_HS_ULPI_\nNXT ETH \n_MII_TX_CLK-- - E V E N T O U T\nPC4 - - - - - - - - - - -ETH_MII_RXD0\nETH_RMII_RXD0-- - E V E N T O U T\nPC5 - - - - - - - - - - -ETH _MII_RXD1\nETH _RMII_RXD1-- - E V E N T O U T\nPC6 - - TIM3_CH1 TIM8_CH1 I2S2_MCK - USART6_TX - - - SDIO_D6 DCMI_D0 - EVENTOUT\nPC7 - - TIM3_CH2 TIM8_CH2 - - I2S3_MCK - USART6_RX - - - SDIO_D7 DCMI_D1 - EVENTOUT\nPC8 - - TIM3_CH3 TIM8_CH3 - - - - USART6_CK - - - SDIO_D0 DCMI_D2 - EVENTOUT\nPC9 MCO2 - TIM3_CH4 TIM8_CH4 I2C3_SDA I2 S_CKIN - - - - - - SDIO_D1 DCMI_D3 - EVENTOUT\nPC10 - - - - - -SPI3_SCK/\nI2S3_CKUSART3_TX/ UART4_TX - - - SDIO_D2 DCMI_D8 - EVENTOUT\nPC11 - - - - - I2S3ext_SD SPI3_MISO/ USART3_RX UART4_RX - - - SDIO_D3 DCMI_D4 - EVENTOUT\nPC12 - - - - - -SPI3_MOSI \nI2S3_SD USART3_CK UART5_TX - - - SDIO_CK DCMI_D9 - EVENTOUT\nPC13 - - - - - - - - - - - - - - - EVENTOUT\nPC14 - - - - - - - - - - - - - - - EVENTOUTPC15 - - - - - - - - - - - - - - - EVENTOUTTable 9. Alternate function mapping (continued)\nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nSTM32F405xx, STM32F407xx Pinouts and pin description\nDS8626 Rev 9 65/203Port DPD0 - - - - - - - - - CAN1_RX - - FSMC_D2 - - EVENTOUT\nPD1 - - - - - - - - - CAN1_TX - - FSMC_D3 - - EVENTOUT\nPD2 - - TIM3_ETR - - - - - UART5_RX - - - SDIO_CMD DCMI_D11 - EVENTOUTPD3 - - - - - - - USART2_CTS - - - - FSMC_CLK - - EVENTOUTPD4 - - - - - - - USART2_RTS - - - - FSMC_NOE - - EVENTOUTPD5 - - - - - - - USART2_TX - - - - FSMC_NWE - - EVENTOUT\nPD6 - - - - - - - USART2_RX - - - - FSMC_NWAIT - - EVENTOUT\nPD7 - - - - - - - USART2_CK - - - -FSMC_NE1/\nFSMC_NCE2 - - EVENTOUT\nPD8 - - - - - - - USART3_TX - - - - FSMC_D13 - - EVENTOUT\nPD9 - - - - - - - USART3_RX - - - - FSMC_D14 - - EVENTOUT\nPD10 - - - - - - - USART3_CK - - - - FSMC_D15 - - EVENTOUT\nPD11 - - - - - - - USART3_CTS - - - - FSMC_A16 - - EVENTOUT\nPD12 - - TIM4_CH1 - - - - USART3_RTS - - - - FSMC_A17 - - EVENTOUT\nPD13 - - TIM4_CH2 - - - - - - - - - FSMC_A18 - - EVENTOUT\nPD14 - - TIM4_CH3 - - - - - - - - - FSMC_D0 - - EVENTOUTPD15 - - TIM4_CH4 - - - - - - - - - FSMC_D1 - - EVENTOUTTable 9. Alternate function mapping (continued)\nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nPinouts and pin description STM32F405xx, STM32F407xx\n66/203 DS8626 Rev 9\nPort EPE0 - - TIM4_ETR - - - - - - - - - FSMC_NBL0 DCMI_D2 - EVENTOUT\nPE1 - - - - - - - - - - - - FSMC_NBL1 DCMI_D3 - EVENTOUT\nPE2TRACECL\nK - - - - - - - - - - ETH _MII_TXD3 FSMC_A23 - - EVENTOUT\nPE3 TRACED0 - - - - - - - - - - - FSMC_A19 - - EVENTOUT\nPE4 TRACED1 - - - - - - - - - - - FSMC_A20 DCMI_D4 - EVENTOUTPE5 TRACED2 - - TIM9_CH1 - - - - - - - - FSMC_A21 DCMI_D6 - EVENTOUTPE6 TRACED3 - - TIM9_CH2 - - - - - - - - FSMC_A22 DCMI_D7 - EVENTOUT\nPE7 - TIM1_ETR - - - - - - - - - - FSMC_D4 - - EVENTOUT\nPE8 - TIM1_CH1N - - - - - - - - - - FSMC_D5 - - EVENTOUT\nPE9 - TIM1_CH1 - - - - - - - - - - FSMC_D6 - - EVENTOUT\nPE10 - TIM1_CH2N - - - - - - - - - - FSMC_D7 - - EVENTOUT\nPE11 - TIM1_CH2 - - - - - - - - - - FSMC_D8 - - EVENTOUT\nPE12 - TIM1_CH3N - - - - - - - - - - FSMC_D9 - - EVENTOUT\nPE13 - TIM1_CH3 - - - - - - - - - - FSMC_D10 - - EVENTOUT\nPE14 - TIM1_CH4 - - - - - - - - - - FSMC_D11 - - EVENTOUT\nPE15 - TIM1_BKIN - - - - - - - - - - FSMC_D12 - - EVENTOUTTable 9. Alternate function mapping (continued)\nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nSTM32F405xx, STM32F407xx Pinouts and pin description\nDS8626 Rev 9 67/203Port FPF0 - - - - I2C2_SDA - - - - - - - FSMC_A0 - - EVENTOUT\nPF1 - - - - I2C2_SCL - - - - - - - FSMC_A1 - - EVENTOUT\nPF2 - - - -I2C2_\nSMBA- - - - - - - FSMC_A2 - - EVENTOUT\nPF3 - - - - - - - - - - - - FSMC_A3 - - EVENTOUT\nPF4 - - - - - - - - - - - - FSMC_A4 - - EVENTOUT\nPF5 - - - - - - - - - - - - FSMC_A5 - - EVENTOUTPF6 - - - TIM10_CH1 - - - - - - - - FSMC_NIORD - - EVENTOUT\nPF7 - - - TIM11_CH1 - - - - - - - - FSMC_NREG - - EVENTOUT\nPF8 - - - - - - - - - TIM13_CH1 - -FSMC_\nNIOWR - - EVENTOUT\nPF9 - - - - - - - - - TIM14_CH1 - - FSMC_CD - - EVENTOUT\nPF10 - - - - - - - - - - - - FSMC_INTR - - EVENTOUT\nPF11 - - - - - - - - - - - - DCMI_D12 - EVENTOUT\nPF12 - - - - - - - - - - - - FSMC_A6 - - EVENTOUTPF13 - - - - - - - - - - - - FSMC_A7 - - EVENTOUT\nPF14 - - - - - - - - - - - - FSMC_A8 - - EVENTOUT\nPF15 - - - - - - - - - - - - FSMC_A9 - - EVENTOUTTable 9. Alternate function mapping (continued)\nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nPinouts and pin description STM32F405xx, STM32F407xx\n68/203 DS8626 Rev 9\nPort GPG0 - - - - - - - - - - - - FSMC_A10 - - EVENTOUT\nPG1 - - - - - - - - - - - - FSMC_A11 - - EVENTOUT\nPG2 - - - - - - - - - - - - FSMC_A12 - - EVENTOUTPG3 - - - - - - - - - - - - FSMC_A13 - - EVENTOUT\nPG4 - - - - - - - - - - - - FSMC_A14 - - EVENTOUT\nPG5 - - - - - - - - - - - - FSMC_A15 - - EVENTOUTPG6 - - - - - - - - - - - - FSMC_INT2 - - EVENTOUT\nPG7 - - - - - - - - USART6_CK - - - FSMC_INT3 - - EVENTOUT\nPG8 - - - - - - - -USART6_\nRTS - - ETH _PPS_OUT - - - EVENTOUT\nPG9 - - - - - - - - USART6_RX - - -FSMC_NE2/\nFSMC_NCE3 - - EVENTOUT\nPG10 - - - - - - - - - - - -FSMC_\nNCE4_1/\nFSMC_NE3 - - EVENTOUT\nPG11 - - - - - - - - - - -ETH _MII_TX_EN\nETH _RMII_\nTX_ENFSMC_NCE4_\n2 - - EVENTOUT\nPG12 - - - - - - - -USART6_\nRTS - - - FSMC_NE4 - - EVENTOUT\nPG13 - - - - - - - - UART6_CTS - -ETH _MII_TXD0\nETH _RMII_TXD0FSMC_A24 - - EVENTOUT\nPG14 - - - - - - - - USART6_TX - -ETH _MII_TXD1\nETH _RMII_TXD1 FSMC_A25 - - EVENTOUT\nPG15 - - - - - - - -USART6_\nCTS - - - - DCMI_D13 - EVENTOUTTable 9. Alternate function mapping (continued)\nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nSTM32F405xx, STM32F407xx Pinouts and pin description\nDS8626 Rev 9 69/203Port H PH0 - - - - - - - - - - - - - - - EVENTOUT\nPH1 - - - - - - - - - - - - - - - EVENTOUT\nPH2 - - - - - - - - - - - ETH _MII_CRS - - - EVENTOUT\nPH3 - - - - - - - - - - - ETH _MII_COL - - - EVENTOUT\nPH4 - - - - I2C2_SCL - - - - -OTG_HS_ULPI_\nNXT - - - - EVENTOUT\nPH5 - - - - I2C2_SDA - - - - - - - - - - EVENTOUT\nPH6 - - - -I2C2_\nSMBA- - - - TIM12_CH1 - ETH _MII_RXD2 - - - EVENTOUT\nPH7 - - - - I2C3_SCL - - - - - - ETH _MII_RXD3 - - - EVENTOUT\nPH8 - - - - I2C3_SDA - - - - - - - -DCMI_\nHSYNC -E V E N T O U T\nPH9 - - - -I2C3_\nSMBA- - - - TIM12_CH2 - - - DCMI_D0 - EVENTOUT\nPH10 - - TIM5_CH1 - - - - - - - - - - DCMI_D1 - EVENTOUT\nPH11 - - TIM5_CH2 - - - - - - - - - - DCMI_D2 - EVENTOUT\nPH12 - - TIM5_CH3 - - - - - - - - - - DCMI_D3 - EVENTOUTPH13 - - - TIM8_CH1N - - - - - CAN1_TX - - - - - EVENTOUT\nPH14 - - - TIM8_CH2N - - - - - - - - - DCMI_D4 - EVENTOUT\nPH15 - - - TIM8_CH3N - - - - - - - - - DCMI_D11 - EVENTOUTTable 9. Alternate function mapping (continued)\nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nPinouts and pin description STM32F405xx, STM32F407xx\n70/203 DS8626 Rev 9\nPort IPI0 - - TIM5_CH4 - -SPI2_NSS \nI2S2_WS - - - - - - - DCMI_D13 - EVENTOUT\nPI1 - - - - -SPI2_SCK \nI2S2_CK- - - - - - - DCMI_D8 - EVENTOUT\nPI2 - - - TIM8_CH4 - SPI2_MISO I2S2ext_SD - - - - - - DCMI_D9 - EVENTOUTPI3 - - - TIM8_ETR -SPI2_MOSI \nI2S2_SD - - - - - - - DCMI_D10 - EVENTOUT\nPI4 - - - TIM8_BKIN - - - - - - - - - DCMI_D5 - EVENTOUT\nPI5 - - - TIM8_CH1 - - - - - - - - -DCMI_\nVSYNC -E V E N T O U T\nPI6 - - - TIM8_CH2 - - - - - - - - - DCMI_D6 - EVENTOUT\nPI7 - - - TIM8_CH3 - - - - - - - - - DCMI_D7 - EVENTOUT\nPI8 - - - - - - - - - - - - - - - EVENTOUTPI9 - - - - - - - - - CAN1_RX - - - - - EVENTOUT\nPI10 - - - - - - - - - - - ETH _MII_RX_ER - - - EVENTOUT\nPI11 - - - - - - - - - -OTG_HS_ULPI_\nDIR - - - - EVENTOUTTable 9. Alternate function mapping (continued)\nPortAF0 AF1 AF2 AF3 AF4 AF5 AF6 AF7 AF8 AF9 AF10 AF11 AF12 AF13\nAF14 AF15\nSYS TIM1/2 TIM3/4/5TIM8/9/10\n/11I2C1/2/3SPI1/SPI2/\nI2S2/I2S2e\nxtSPI3/I2Sext\n/I2S3USART1/2/3/\nI2S3extUART4/5/\nUSART6CAN1/2\nTIM12/13/\n14OTG_FS/ \nOTG_HSETHFSMC/SDIO\n/OTG_FSDCMI\nDS8626 Rev 9 71/203STM32F405xx, STM32F407xx Memory mapping\n4 Memory mapping\nThe memory map is shown in Figure 18 . \nFigure 18. STM32F40xxx memory map\n512-Mbyte\n block 7\nCortex-M4\'s\ninternal\nperipherals\n512-Mbyte\n block 6\nNot used\n512-Mbyte\n block 5\nFSMC registers\n512-Mbyte\n block 4\nFSMC bank 3\n& bank4\n512-Mbyte\n block 3\nFSMC bank1\n& bank2\n512-Mbyte\n block 2\nPeripherals\n512-Mbyte\n block 1\nSRAM\n0x0000 00000x1FFF FFFF0x2000 00000x3FFF FFFF0x4000 00000x5FFF FFFF0x6000 00000x7FFF FFFF0x8000 00000x9FFF FFFF0xA000 00000xBFFF FFFF0xC000 00000xDFFF FFFF0xE000 00000xFFFF FFFF\n512-Mbyte\n block 0\nCode\nFlash0x0810 0000 - 0x0FFF FFFF0x1FFF 0000 - 0x1FFF 7A0F0x1FFF C000 - 0x1FFF C007\n0x0800 0000 - 0x080F FFFF\n0x0010 0000 - 0x07FF FFFF\n0x0000 0000 - 0x000F FFFFSystem memory + OTP\nReserved\nReserved\nAliased to Flash, system\nmemory or SRAM depending\non the BOOT pinsSRAM (16 KB aliased\nby bit-banding)Reserved\n0x2000 0000 - 0x2001 BFFF0x2001 C000 - 0x2001 FFFF0x2002 0000 - 0x3FFF FFFF\n0x4000 0000Reserved\n0x4000 7FFF0x4000 7800 - 0x4000 FFFF0x4001 00000x4001 57FF0x4002 000Reserved 0x5006 0C00 - 0x5FFF FFFF0x6000 0000AHB30xA000 0FFF0xA000 1000 - 0xDFFF FFFF\nai18513fOption BytesReserved 0x4001 5800 - 0x4001 FFFF0x5006 0BFF\nAHB2\n0x5000 0000\n0x4008 0000 - 0x4FFF FFFF Reserved\nAHB1\nSRAM (112 KB aliased\nby bit-banding)\nReserved 0x1FFF C008 - 0x1FFF FFFF\n0x1FFF 7A10 - 0x1FFF 7FFF Reserved\nCCM data RAM \n(64 KB data SRAM)0x1000 0000 - 0x1000 FFFFReserved 0x1001 0000 - 0x1FFE FFFFReserved\nAPB20x4007 FFFF\nAPB1CORTEX-M4 internal peripherals 0xE000 0000 - 0xE00F FFFFReserved 0xE010 0000 - 0xFFFF FFFF\nMemory mapping STM32F405xx, STM32F407xx\n72/203 DS8626 Rev 9Table 10.  register boundary addresses \nBus Boundary address Peripheral\n0xE00F FFFF - 0xFFFF FFFF Reserved\nCortex-M4 0xE000 0000 - 0xE00F FFFF Cortex-M4 internal peripherals\n0xA000 1000 - 0xDFFF FFFF Reserved\nAHB30xA000 0000 - 0xA000 0FFF FSMC control register\n0x9000 0000 - 0x9FFF FFFF FSMC bank 4\n0x8000 0000 - 0x8FFF FFFF FSMC bank 3\n0x7000 0000 - 0x7FFF FFFF FSMC bank 20x6000 0000 - 0x6FFF FFFF FSMC bank 1\n0x5006 0C00- 0x5FFF FFFF Reserved\nAHB20x5006 0800 - 0x5006 0BFF RNG\n0x5005 0400 - 0x5006 07FF Reserved\n0x5005 0000 - 0x5005 03FF DCMI\n0x5004 0000- 0x5004 FFFF Reserved\n0x5000 0000 - 0x5003 FFFF USB OTG FS\n0x4008 0000- 0x4FFF FFFF Reserved\nDS8626 Rev 9 73/203STM32F405xx, STM32F407xx Memory mapping\nAHB10x4004 0000 - 0x4007 FFFF USB OTG HS\n0x4002 9400 - 0x4003 FFFF Reserved\n0x4002 9000 - 0x4002 93FF\nETHERNET MAC0x4002 8C00 - 0x4002 8FFF\n0x4002 8800 - 0x4002 8BFF\n0x4002 8400 - 0x4002 87FF0x4002 8000 - 0x4002 83FF\n0x4002 6800 - 0x4002 7FFF Reserved\n0x4002 6400 - 0x4002 67FF DMA20x4002 6000 - 0x4002 63FF DMA1\n0x4002 5000 - 0x4002 5FFF Reserved\n0x4002 4000 - 0x4002 4FFF BKPSRAM\n0x4002 3C00 - 0x4002 3FFF Flash interface register\n0x4002 3800 - 0x4002 3BFF RCC\n0x4002 3400 - 0x4002 37FF Reserved\n0x4002 3000 - 0x4002 33FF CRC\n0x4002 2400 - 0x4002 2FFF Reserved\n0x4002 2000 - 0x4002 23FF GPIOI\n0x4002 1C00 - 0x4002 1FFF GPIOH\n0x4002 1800 - 0x4002 1BFF GPIOG\n0x4002 1400 - 0x4002 17FF GPIOF\n0x4002 1000 - 0x4002 13FF GPIOE\n0x4002 0C00 - 0x4002 0FFF GPIOD\n0x4002 0800 - 0x4002 0BFF GPIOC\n0x4002 0400 - 0x4002 07FF GPIOB\n0x4002 0000 - 0x4002 03FF GPIOA\n0x4001 5800- 0x4001 FFFF ReservedTable 10.  register boundary addresses (continued)\nBus Boundary address Peripheral\nMemory mapping STM32F405xx, STM32F407xx\n74/203 DS8626 Rev 9APB20x4001 4C00 - 0x4001 57FF Reserved\n0x4001 4800 - 0x4001 4BFF TIM11\n0x4001 4400 - 0x4001 47FF TIM100x4001 4000 - 0x4001 43FF TIM9\n0x4001 3C00 - 0x4001 3FFF EXTI\n0x4001 3800 - 0x4001 3BFF SYSCFG\n0x4001 3400 - 0x4001 37FF Reserved\n0x4001 3000 - 0x4001 33FF SPI1\n0x4001 2C00 - 0x4001 2FFF SDIO\n0x4001 2400 - 0x4001 2BFF Reserved\n0x4001 2000 - 0x4001 23FF ADC1 - ADC2 - ADC3\n0x4001 1800 - 0x4001 1FFF Reserved\n0x4001 1400 - 0x4001 17FF USART6\n0x4001 1000 - 0x4001 13FF USART1\n0x4001 0800 - 0x4001 0FFF Reserved\n0x4001 0400 - 0x4001 07FF TIM8\n0x4001 0000 - 0x4001 03FF TIM1\n0x4000 7800- 0x4000 FFFF ReservedTable 10.  register boundary addresses (continued)\nBus Boundary address Peripheral\nDS8626 Rev 9 75/203STM32F405xx, STM32F407xx Memory mapping\nAPB10x4000 7800 - 0x4000 7FFF Reserved\n0x4000 7400 - 0x4000 77FF DAC\n0x4000 7000 - 0x4000 73FF PWR\n0x4000 6C00 - 0x4000 6FFF Reserved\n0x4000 6800 - 0x4000 6BFF CAN2\n0x4000 6400 - 0x4000 67FF CAN1\n0x4000 6000 - 0x4000 63FF Reserved\n0x4000 5C00 - 0x4000 5FFF I2C3\n0x4000 5800 - 0x4000 5BFF I2C2\n0x4000 5400 - 0x4000 57FF I2C1\n0x4000 5000 - 0x4000 53FF UART5\n0x4000 4C00 - 0x4000 4FFF UART4\n0x4000 4800 - 0x4000 4BFF USART3 \n0x4000 4400 - 0x4000 47FF USART20x4000 4000 - 0x4000 43FF I2S3ext\n0x4000 3C00 - 0x4000 3FFF SPI3 / I2S3\n0x4000 3800 - 0x4000 3BFF SPI2 / I2S2\n0x4000 3400 - 0x4000 37FF I2S2ext\n0x4000 3000 - 0x4000 33FF IWDG\n0x4000 2C00 - 0x4000 2FFF WWDG\n0x4000 2800 - 0x4000 2BFF RTC & BKP Registers\n0x4000 2400 - 0x4000 27FF Reserved\n0x4000 2000 - 0x4000 23FF TIM14\n0x4000 1C00 - 0x4000 1FFF TIM13\n0x4000 1800 - 0x4000 1BFF TIM12\n0x4000 1400 - 0x4000 17FF TIM70x4000 1000 - 0x4000 13FF TIM6\n0x4000 0C00 - 0x4000 0FFF TIM5\n0x4000 0800 - 0x4000 0BFF TIM4\n0x4000 0400 - 0x4000 07FF TIM3\n0x4000 0000 - 0x4000 03FF TIM2Table 10.  register boundary addresses (continued)\nBus Boundary address Peripheral\nElectrical characteristics STM32F405xx, STM32F407xx\n76/203 DS8626 Rev 95 Electrical characteristics\n5.1 Parameter conditions\nUnless otherwise specified, a ll voltages are referenced to VSS.\n5.1.1 Minimum and maximum values\nUnless otherwise specified the minimum and ma ximum values are guaranteed in the worst \nconditions of ambient temperature, supply vo ltage and frequencies by tests in production on \n100% of the devices with an ambient temperature at TA = 25 °C and TA = TAmax (given by \nthe selected temperature range).\nData based on characterization results, desig n simulation and/or technology characteristics \nare indicated in the table footnotes and are not tested in production. Based on characterization, the minimum and maximum valu es refer to sample tests and represent the \nmean value plus or minus three times the standard deviation (mean±3 Σ).\n5.1.2 Typical values\nUnless otherwise specified, typical data are based on TA = 25 °C, VDD = 3.3 V (for the \n1.8 V ≤ VDD ≤ 3.6 V voltage range). They are given only as design guidelines and are not \ntested.\nTypical ADC accuracy values are determined by ch aracterization of a batch of samples from \na standard diffusion lot over the full temperat ure range, where 95% of the devices have an \nerror less than or equal to the value indicated  (mean±2 Σ).\n5.1.3 Typical curves\nUnless otherwise specified, all typical curves  are given only as design guidelines and are \nnot tested.\n5.1.4 Loading capacitor\nThe loading conditions used for pin parameter measurement are shown in Figure  19.\n5.1.5 Pin input voltage\nThe input voltage measurement on a pin of the device is described in Figure  20.\n          \nFigure 19. Pin loading conditions Figure 20. Pin input voltage\nMS19011V1C = 50 pFSTM32F pin\nOSC_OUT (Hi-Z when \n      using HSE or LSE)\nMS19010V1STM32F pin\nVIN OSC_OUT (Hi-Z when \n                    using HSE or LSE)\nDS8626 Rev 9 77/203STM32F405xx, STM32F407xx Electrical characteristics\n5.1.6 Power supply scheme\nFigure 21. Power supply scheme \n1. Each power supply pair must be decoupled with filtering ceramic c apacitors as shown above. These capacitors must be \nplaced as close as possible to , or below, the appropriate pins on the undersi de of the PCB to ensure the good functionality \nof the device.\n2. To connect BYPASS_REG and PDR_ON pins, refer to Section 2.2.16: Voltage regulator  and Table 2.2.15: Power supply \nsupervisor .\n3. The two 2.2 µF ceramic capacitors should be replaced by tw o 100 nF decoupling capacitors when the voltage regulator is \nOFF.\n4. The 4.7 µF ceramic capacitor must be connected to one of the VDD pin.\n5. VDDA=VDD and VSSA=VSS.MS19911V2Backup circuitry\n(OSC32K,RTC,\nWakeup logic\nBackup registers,\nbackup RAM)\nKernel logic \n(CPU, digital \n& RAM)  \nAnalog:\nRCs, \nPLL,..Power switchVBAT\nGPIOsOUT\nIN\n15 × 100 nF\n+ 1 × 4.7 μFVBAT =\n1.65 to 3.6V\nVoltage \nregulator\nVDDA\nADC\nLevel shifterIO\nLogic\nVDD\n100 nF\n+ 1 μFFlash memoryVCAP_1VCAP_2\n2 × 2.2 μF\nBYPASS_REG\nPDR_ONReset \ncontrollerVDD\n1/2/...14/15\nVSS\n1/2/...14/15\nVDD\nVREF+\nVREF-\nVSSAVREF\n100 nF\n+ 1 μF\nElectrical characteristics STM32F405xx, STM32F407xx\n78/203 DS8626 Rev 95.1.7 Current consumption measurement\nFigure 22. Current consum ption measurement scheme\n5.2 Absolute maximum ratings\nStresses above the absolute maximum ratings listed in Table  11: Voltage characteristics , \nTable  12: Current characteristics , and Table  13: Thermal characteristics  may cause \npermanent damage to the device. These are stress ratings only and functional operation of \nthe device at these conditions is not implied.  Exposure to maximum rating conditions for \nextended periods may affect device reliability. Device mission profile (application conditions) \nis compliant with JEDEC JESD47 Qualificat ion Standard, extended mission profiles are \navailable on demand. \n           ai14126VBAT\nVDD\nVDDAIDD_VBAT\nIDD\nTable 11. Voltage characteristics\nSymbol Ratings Min Max Unit\nVDD–VSS External main supply voltage (including VDDA, VDD)(1)\n1. All main power (VDD, VDDA) and ground (VSS, VSSA) pins must always be connected to the external power \nsupply, in the permitted range.–0.3 4.0\nV\nVINInput voltage on five-volt tolerant pin(2)\n2. VIN maximum value must always be respected. Refer to Table 12  for the values of the maximum allowed \ninjected current.VSS–0.3 VDD+4\nInput voltage on any other pin VSS–0.3 4.0\n|ΔVDDx| Variations between different VDD power pins - 50\nmV\n|VSSX − VSS|Variations between all the different ground pins \nincluding VREF −-5 0\nVESD(HBM) Electrostatic discharge voltage (human body model)see Section 5.3.14: \nAbsolute maximum \nratings (electrical \nsensitivity)\nDS8626 Rev 9 79/203STM32F405xx, STM32F407xx Electrical characteristics\n           \n          \n5.3 Operating conditions\n5.3.1 General operating conditions\n          Table 12. Current characteristics\nSymbol Ratings  Max. Unit\nIVDD Total current into VDD power lines (source)(1)\n1. All main power (VDD, VDDA) and ground (VSS, VSSA) pins must always be connected to the external power \nsupply, in the permitted range.240\nmAIVSS Total current out of VSS ground lines (sink)(1)240\nIIOOutput current sunk by any I/O and control pin 25\nOutput current source by any I/Os and control pin 25\nIINJ(PIN) (2)\n2. Negative injection disturbs the analog performance of the device. See note in Section 5.3.21: 12-bit ADC \ncharacteristics .Injected current on five-volt tolerant I/O(3)\n3. Positive injection is not possible on thes e I/Os. A negative injection is induced by VIN<VSS. IINJ(PIN)  must \nnever be exceeded. Refer to Table 11  for the values of the maximum allowed input voltage.–5/+0\nInjected current on any other pin(4)\n4. A positive injection is induced by VIN>VDD while a negative injection is induced by VIN<VSS. IINJ(PIN)  must \nnever be exceeded. Refer to Table 11  for the values of the maximum allowed input voltage.±5\nΣIINJ(PIN)(4)Total injected current (sum of all I/O and control pins)(5)\n5. When several inputs are submitted to a current injection, the maximum ΣIINJ(PIN)  is the absolute sum of the \npositive and negative injected currents (instantaneous values).±25\nTable 13. Thermal characteristics\nSymbol Ratings  Value Unit\nTSTG Storage temperature range –65 to +150 °C\nTJ Maximum junction temperature 125 °C\nTable 14. General operating conditions \nSymbol Parameter  Conditions Min Typ Max Unit\nfHCLK Internal AHB clock frequencyVOS bit in PWR_CR  register = 0(1)0 - 144\nMHzVOS bit in PWR_CR register= 1 0 - 168\nfPCLK1 Internal APB1 clock frequency - 0 - 42\nfPCLK2 Internal APB2 clock frequency - 0 - 84\nVDD Standard operating voltage - 1.8(2)-3 . 6 V\nVDDA(3)(4)Analog operating voltage  \n(ADC limited to 1.2 M samples)Must be the same potential as \nVDD(5)1.8(2)-2 . 4\nV\nAnalog operating voltage  \n(ADC limited to 1.4 M samples)2.4 - 3.6\nVBAT Backup operating voltage - 1.65 - 3.6 V\nElectrical characteristics STM32F405xx, STM32F407xx\n80/203 DS8626 Rev 9V12Regulator ON: \n1.2 V internal voltage on \nVCAP_1 /VCAP_2 pinsVOS bit in PWR_CR  register = 0(1)\nMax frequency 144MHz1.08 1.14 1.20 V\nVOS bit in PWR_CR register= 1\nMax frequency 168MHz1.20 1.26 1.32 V\nRegulator OFF: \n1.2 V external voltage must be \nsupplied from external regulator \non VCAP_1 /VCAP_2 pinsMax frequency 144MHz 1.10 1.14 1.20 V\nMax frequency 168MHz 1.20 1.26 1.30 V\nVINInput voltage on RST and FT \npins(6)2 V ≤ VDD ≤ 3.6 V –0.3 - 5.5\nVVDD ≤ 2 V –0.3 - 5.2\nInput voltage on TTa pins - –0.3 -VDDA+\n0.3\nInput voltage on B pin - - - 5.5\nPDPower dissipation at TA = 85 °C \nfor suffix 6 or TA = 105 °C for \nsuffix 7(7)LQFP64 - - 435\nmWLQFP100 - - 465\nLQFP144 - - 500\nLQFP176 - - 526UFBGA176 - - 513\nWLCSP90 - - 543\nT\nA Ambient temperature for 6 suffix \nversionMaximum power dissipation –40 - 85\n°C\nLow-power dissipation(8)–40 - 105\nAmbient temperature for 7 suffix \nversionMaximum power dissipation –40 - 105\n°C\nLow-power dissipation(8)–40 - 125\nTJ Junction temperature range6 suffix version –40 - 105\n°C\n7 suffix version –40 - 125\n1. The average expected gain in power consumption when VO S = 0 compared to VOS = 1 is around 10% for the whole \ntemperature range, when the system cl ock frequency is between 30 and 144 MHz. \n2. VDD/VDDA minimum value of 1.7 V is obtained when the device oper ates in reduced temperature range, and with the use of \nan external power supply supervisor (refer to Section : Internal reset OFF ).\n3. When the ADC is used, refer to Table 67: ADC characteristics .\n4. If VREF+ pin is present, it must res pect the following condition: VDDA-VREF+ < 1.2 V.\n5. It is recommended to power VDD and VDDA from the same source. A maximum difference of 300 mV between VDD and \nVDDA can be tolerated during power-up and power-down operation.\n6. To sustain a voltage higher than VDD+0.3, the internal pull-up and pull-down resistors must be disabled.\n7. If TA is lower, higher PD values are allowed as long as TJ does not exceed TJmax.\n8. In low-power dissipation state, TA can be extended to this range as long as TJ does not exceed TJmax.Table 14. General operating conditions (continued)\nSymbol Parameter  Conditions Min Typ Max Unit\nDS8626 Rev 9 81/203STM32F405xx, STM32F407xx Electrical characteristics\n          Table 15. Limitations depending on the operating power supply range\nOperating \npower \nsupply \nrangeADC \noperationMaximum \nFlash \nmemory \naccess \nfrequency \nwith no wait \nstate \n(fFlashmax ) Maximum Flash \nmemory access \nfrequency \nwith wait \nstates(1) (2)I/O operationClock output \nFrequency on \nI/O pinsPossible \nFlash \nmemory \noperations\nVDD =1.8 to \n2.1 V(3)Conversion \ntime up to \n1.2 Msps20 MHz(4) 160 MHz with 7 \nwait states– Degraded \nspeed \nperformance\n– No I/O \ncompensationup to 30 MHz8-bit erase \nand program \noperations only\nV\nDD = 2.1 to \n2.4 VConversion \ntime up to \n1.2 Msps22 MHz168 MHz with 7 \nwait states– Degraded \nspeed \nperformance\n– No I/O \ncompensationup to 30 MHz16-bit erase \nand program \noperations\nVDD = 2.4 to \n2.7 VConversion \ntime up to \n2.4 Msps 24 MHz168 MHz with 6 \nwait states– Degraded \nspeed \nperformance\n–I / O  \ncompensation worksup to 48 MHz16-bit erase \nand program \noperations\nV\nDD = 2.7 to \n3.6 V(5)Conversion \ntime up to \n2.4 Msps 30 MHz168 MHz with 5 \nwait states– Full-speed \noperation\n–I / O  \ncompensation works–u p  t o  \n60 MHz when V\nDD = \n3.0 to 3.6 V\n–u p  t o  \n48 MHz \nwhen VDD = \n2.7 to 3.0 V32-bit erase \nand program operations\n1. It applies only when code executed from  Flash memory access, when code executed from RAM, no wait state is required. \n2. Thanks to the ART accelerator and the 128-bit Flash memory, the number of wait states given here does not impact the \nexecution speed from Flash memory since the ART accelerator al lows to achieve a performance equivalent to 0 wait state \nprogram execution.\n3. VDD/VDDA minimum value of 1.7 V is obtained when the device operates in reduced temperature range, and with the use \nof an external power supply supervisor (refer to Section : Internal reset OFF ).\n4. Prefetch is not available. Refer to AN3430 applicati on note for details on how to adjust performance and power.\n5. The voltage range for OTG USB FS can drop down to 2.7 V. However it is degraded between 2.7 and 3 V.\nElectrical characteristics STM32F405xx, STM32F407xx\n82/203 DS8626 Rev 95.3.2 VCAP_1 /VCAP_2  external capacitor\nStabilization for the main regulato r is achieved by connecting an  external capacitor CEXT to \nthe VCAP_1 /VCAP_2  pins. CEXT is specified in Table  16. \nFigure 23. External capacitor CEXT\n1. Legend: ESR is the equivalent series resistance.\n          \n5.3.3 Operating conditi ons at power-up / powe r-down (regulator ON)\nSubject to general operating conditions for TA.\n          \n5.3.4 Operating conditi ons at power-up / powe r-down (regulator OFF)\nSubject to general operating conditions for TA.\n          Table 16. VCAP_1 /VCAP_2  operating conditions(1)\n1. When bypassing the voltage regulator, the two 2.2 µF VCAP capacitors are not required and should be \nreplaced by two 100 nF decoupling capacitors.Symbol Parameter Conditions\nCEXT Capacitance of external capacitor 2.2 µF\nESR ESR of external capacitor < 2 ΩMS19044V2ESR\nR LeakC\nTable 17. Operating conditions at power-up / power-down (regulator ON)\nSymbol Parameter Min Max Unit\ntVDDVDD rise time rate 20 ∞\nµs/V\nVDD fall time rate 20 ∞\nTable 18. Operating conditions at pow er-up / power-down (regulator OFF)(1)\n1. To reset the internal logic at power-down, a reset must be applied on pin PA0 when VDD reach below \nminimum value of V12.Symbol Parameter Co nditions Min Max Unit\ntVDDVDD rise time rate Power-up 20 ∞\nµs/VVDD fall time rate Power-down 20 ∞\ntVCAPVCAP_1  and VCAP_2 rise time \nratePower-up 20 ∞\nVCAP_1  and VCAP_2  fall time \nratePower-down 20 ∞\nDS8626 Rev 9 83/203STM32F405xx, STM32F407xx Electrical characteristics\n5.3.5 Embedded reset and power control block characteristics\nThe parameters given in Table  19 are derived from tests performed under ambient \ntemperature and VDD supply voltage conditions summarized in Table  14.\n           Table 19. Embedded reset and power control block characteristics \nSymbol Parameter Conditions Min Typ Max Unit\nVPVDProgrammable voltage \ndetector level selectionPLS[2:0]=000 (rising \nedge)2.09 2.14 2.19 V\nPLS[2:0]=000 (falling \nedge)1.98 2.04 2.08 V\nPLS[2:0]=001 (rising \nedge)2.23 2.30 2.37 V\nPLS[2:0]=001 (falling \nedge)2.13 2.19 2.25 V\nPLS[2:0]=010 (rising \nedge)2.39 2.45 2.51 V\nPLS[2:0]=010 (falling \nedge)2.29 2.35 2.39 V\nPLS[2:0]=011 (rising edge) 2.54 2.60 2.65 V\nPLS[2:0]=011 (falling \nedge)2.44 2.51 2.56 V\nPLS[2:0]=100 (rising \nedge)2.70 2.76 2.82 V\nPLS[2:0]=100 (falling \nedge)2.59 2.66 2.71 V\nPLS[2:0]=101 (rising \nedge)2.86 2.93 2.99 V\nPLS[2:0]=101 (falling \nedge)2.75 2.84 2.92 V\nPLS[2:0]=110 (rising edge) 2.96 3.03 3.10 V\nPLS[2:0]=110 (falling \nedge)2.85 2.93 2.99 V\nPLS[2:0]=111 (rising edge) 3.07 3.14 3.21 V\nPLS[2:0]=111 (falling \nedge)2.95 3.03 3.09 V\nVPVDhyst(1)PVD hysteresis - - 100 - mV\nVPOR/PDRPower-on/power-down \nreset thresholdFalling edge 1.60 1.68 1.76 V\nRising edge 1.64 1.72 1.80 V\nVPDRhyst(1)PDR hysteresis - - 40 - mV\nVBOR1Brownout level 1 \nthresholdFalling edge 2.13 2.19 2.24 V\nRising edge 2.23 2.29 2.33 V\nElectrical characteristics STM32F405xx, STM32F407xx\n84/203 DS8626 Rev 95.3.6 Supply current characteristics\nThe current consumption is a function of se veral parameters and factors such as the \noperating voltage, ambient temperature, I/O pin loading, device software configuration, \noperating frequencies, I/O pin switching rate, program location in memory and executed binary code.\n \nThe current consumption is measured as described in Figure  22: Current consumption \nmeasurement scheme .\nAll Run mode current consumption measurements given in this section are performed using \na CoreMark-compliant code. \nTypical and maximum current consumption\nThe MCU is placed under the following conditions:\n• At startup, all I/O pins are configured as analog inputs by firmware.\n• All peripherals are disabled except  if it is explicitly mentioned.\n• The Flash memory access time is adjusted to fHCLK  frequency (0 wait state from 0 to \n30 MHz, 1 wait state from 30 to 60 MHz, 2 wa it states from 60 to 90 MHz, 3 wait states \nfrom 90 to 120 MHz, 4 wait states from 120 to 150 MHz, and 5 wait states from 150 to 168 MHz).\n• When the peripherals are enabled HCLK is the system clock, f\nPCLK1 = fHCLK /4, and \nfPCLK2  = fHCLK /2, except is explicitly mentioned.\n• The maximum values are obtained for VDD = 3.6 V and maximum ambient temperature \n(TA), and the typical values for TA= 25 °C and VDD = 3.3 V unless otherwise specified.VBOR2Brownout level 2 \nthresholdFalling edge 2.44 2.50 2.56 V\nRising edge 2.53 2.59 2.63 V\nVBOR3Brownout level 3 \nthresholdFalling edge 2.75 2.83 2.88 V\nRising edge 2.85 2.92 2.97 V\nVBORhyst(1)BOR hysteresis - - 100 - mV\nTRSTTEMPO(1)(2)Reset temporization - 0.5 1.5 3.0 ms\nIRUSH(1)InRush current on \nvoltage regulator \npower-on (POR or wakeup from Standby)- - 160 200 mA\nE\nRUSH(1)InRush energy on \nvoltage regulator \npower-on (POR or \nwakeup from Standby)VDD = 1.8 V, TA = 105 °C, \nIRUSH = 171 mA for 31 µs-- 5 . 4 µ C\n1. Guaranteed by design.\n2. The reset temporization is measured from the power-on (POR reset or wakeup from VBAT) to the instant \nwhen first instruction is read by the user application code.Table 19. Embedded reset and power control block characteristics (continued)\nSymbol Parameter Conditions Min Typ Max Unit\nDS8626 Rev 9 85/203STM32F405xx, STM32F407xx Electrical characteristics\n          Table 20. Typical and maximum current consumpt ion in Run mode, code with data processing\n running from Flash memory (ART accelerator enabled) or RAM (1)\nSymbol Parameter Conditions fHCLKTyp Max(2)\nUnitTA = \n25 °CTA = \n85 °CTA = \n105 °C\nIDDSupply current in \nRun modeExternal clock(3), all \nperipherals enabled(4)(5)168 MHz 87 102 109\nmA144 MHz 67 80 86\n120 MHz 56 69 75\n90 MHz 44  56 6260 MHz 30 42 49\n30 MHz 16 28 35\n25 MHz 12 24 31\n16 MHz\n(6)92 0 2 8\n8 MHz 5 17 24\n4 MHz 3 15 22\n2 MHz 2  14 21\nExternal clock(3), all \nperipherals disabled(4)(5)168 MHz 40 54 61\n144 MHz 31 43 50\n120 MHz 26 38 45\n90 MHz 20 32 3960 MHz 14 26 33\n30 MHz 8 20 27\n25 MHz 6 18 25\n16 MHz\n(6)51 6 2 4\n8 MHz 3 15 22\n4 MHz 2 14 212 MHz 2 14 21\n1. Code and data processing running from SRAM1 using boot pins.\n2. Guaranteed by characterization, tested in production at VDD max and fHCLK  max with peripherals enabled.\n3. External clock is 4 MHz and PLL is on when fHCLK  > 25 MHz.\n4. When the ADC is ON (ADON bit set in the ADC_CR2 registe r), add an additional power consumption of 1.6 mA per ADC for \nthe analog part. \n5. When analog peripheral blocks such as ADCs, DACs, HSE, LSE, HSI, or LSI are ON, an additional power consumption \nshould be considered.\n6. In this case HCLK = system clock/2.\nElectrical characteristics STM32F405xx, STM32F407xx\n86/203 DS8626 Rev 9          Table 21. Typical and maximum current consumpt ion in Run mode, code with data processing\n running from Flash memory (ART accelerator disabled)\nSymbol Parameter Conditions fHCLKTyp Max(1)\nUnit\nTA = 25 °C TA = 85 °C TA = 105 °C\nIDDSupply current \nin Run modeExternal clock(2),  \nall peripherals enabled\n(3)(4)168 MHz 93 109 117\nmA144 MHz 76 89 96\n120 MHz 67 79 86\n90 MHz 53 65 73\n60 MHz 37 49 56\n30 MHz 20 32 3925 MHz 16 27 35\n16 MHz 11 23 30\n8 MHz 6 18 25\n4 MHz 4 16 23\n2 MHz 3 15 22\nExternal clock\n(2),  \nall peripherals disabled\n(3)(4)168 MHz 46  61 69\n144 MHz 40  52 60\n120 MHz 37 48 56\n90 MHz 30 42 50\n60 MHz 22 33 41\n30 MHz 12 24 3125 MHz 10 21 29\n16 MHz 7 19 26\n8 MHz 4 16 234 MHz 3 15 22\n2 MHz 2 14 21\n1. Guaranteed by characterization, tested in production at VDD max and fHCLK  max with peripherals enabled.\n2. External clock is 4 MHz and PLL is on when fHCLK  > 25 MHz.\n3. When analog peripheral blocks such as (ADCs, DACs, HSE,  LSE, HSI,LSI) are on, an additional power consumption \nshould be considered.\n4.  When the ADC is ON (ADON bit set in the ADC_CR2 regist er), add an additional power consumption of 1.6 mA per ADC \nfor the analog part. \nDS8626 Rev 9 87/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 24. Typical current consumption versus temperature, Run mode, code with data\nprocessing running from Flash (ART accelerator ON) or RAM, and peripherals OFF\nFigure 25. Typical current consumption versus temperature, Run mode, code with data\nprocessing running from Flash (ART accelerator ON) or RAM, and peripherals ONMS19974V105101520253035404550\n0 20 40 60 80 100 120 140 160 180IDD RUN (mA)\nCPU Frequency (MH z-45 °C\n0 °C\n25 °C\n55 °C\n85 °C\n105 °C\nMS19975V10102030405060708090100\n0 20 40 60 80 100 120 140 160 180IDD RUN (mA)\nCPU Frequency (MH z-45°C\n0°C\n25°C\n55°C\n85°C\n105°C\nElectrical characteristics STM32F405xx, STM32F407xx\n88/203 DS8626 Rev 9Figure 26. Typical current consumption versus temperature, Run mode, code with data\nprocessing running from Flash (ART accelerator OFF) or RAM, and peripherals OFF\nFigure 27. Typical current consumption versus temperature, Run mode, code with data\nprocessing running from Flash (ART acceler ator OFF) or RAM, and peripherals ONMS19976V10102030405060\n0 20 40 60 80 100 120 140 160 180IDD RUN (mA)\nCPU Frequency (MH z-45°C\n0°C\n25°C\n55°C\n85°C\n105°C\nMS19977V1020406080100120\n0 20 40 60 80 100 120 140 160 180IDD RUN (mA)\nCPU Frequency (MH z-45°C\n0°C\n25°C\n55°C\n85°C\n105°C\nDS8626 Rev 9 89/203STM32F405xx, STM32F407xx Electrical characteristics\n          Table 22. Typical and maximum current consumption in Sleep mode\nSymbol Parameter Conditions fHCLKTyp Max(1)\nUnitTA = \n25 °CTA = \n85 °CTA = \n105 °C\nIDDSupply current in \nSleep modeExternal clock(2),  \nall peripherals enabled(3)168 MHz 59 77 84\nmA144 MHz 46 61 67\n120 MHz 38 53 60\n90 MHz 30 44 5160 MHz 20 34 41\n30 MHz 11 24 31\n25 MHz  8 21 2816 MHz 6 18 25\n8 MHz 3 16 23\n4 MHz 2 15 22\n2 MHz 2 14 21\nExternal clock\n(2), all \nperipherals disabled168 MHz 12 27 35\n144 MHz 9 22 29\n120 MHz 8 20 28\n90 MHz 7 19 2660 MHz 5 17 24\n30 MHz 3 16 23\n25 MHz 2 15 2216 MHz 2 14 21\n8 MHz 1 14 21\n4 MHz 1 13 212 MHz 1 13 21\n1. Guaranteed by characterization, tested in production at VDD max and fHCLK  max with peripherals enabled.\n2. External clock is 4 MHz and PLL is on when fHCLK  > 25 MHz.\n3. Add an additional power consumption of 1.6 mA per ADC for t he analog part. In applications, this consumption occurs only \nwhile the ADC is ON (ADON bit is set in the ADC_CR2 register).\nElectrical characteristics STM32F405xx, STM32F407xx\n90/203 DS8626 Rev 9Table 23. Typical and maximum current consumptions in Stop mode\nSymbol Parameter ConditionsTyp Max\nUnitTA = \n25 °CTA = \n25 °CTA = \n85 °CTA = \n105 °C\nIDD_STOPSupply \ncurrent in \nStop mode with main \nregulator in \nRun modeFlash in Stop mode, low-speed and high-\nspeed internal RC oscillators and high-speed oscillator OFF (no independent watchdog)0.45 1.5 11.00 20.00\nmAFlash in Deep power-down mode, low-speed \nand high-speed internal RC oscillators and high-speed oscillator OFF (no independent \nwatchdog)0.40 1.5 11.00 20.00\nSupply \ncurrent in \nStop mode \nwith main regulator in \nLow-power \nmodeFlash in Stop mode, low-speed and high-\nspeed internal RC oscillators and high-speed \noscillator OFF (no independent watchdog)0.31 1.1 8.00 15.00\nFlash in Deep power-down mode, low-speed \nand high-speed internal RC oscillators and \nhigh-speed oscillator OFF (no independent \nwatchdog)0.28 1.1 8.00 15.00\nTable 24. Typical and maximum current consumptions in Standby mode\nSymbol Parameter ConditionsTyp Max(1)\nUnitTA = 25 °CTA = \n85 °CTA = \n105 °C\nVDD = \n1.8 VVDD= \n2.4 VVDD = \n3.3 VVDD = 3.6 V\nIDD_STBYSupply current \nin Standby \nmodeBackup SRAM ON, low-\nspeed oscillator and RTC ON3.0 3.4 4.0 20 36\nµABackup SRAM OFF, low-\nspeed oscillator and RTC ON2.4 2.7 3.3 16 32\nBackup SRAM ON, RTC \nOFF2.4 2.6 3.0 12.5 24.8\nBackup SRAM OFF, RTC \nOFF1.7 1.9 2.2 9.8 19.2\n1. Guaranteed by characterization.\nDS8626 Rev 9 91/203STM32F405xx, STM32F407xx Electrical characteristics\n          \nFigure 28. Typical VBAT current consumption (LSE and RTC ON/backup RAM OFF)Table 25. Typical and maximum current consumptions in VBAT mode\nSymbol Parameter ConditionsTyp Max(1)\nUnitTA = 25 °CTA = \n85 °CTA = \n105 °C\nVBAT \n= \n1.8 VVBAT= \n2.4 VVBAT \n= \n3.3 VVBAT = 3.6 V\nIDD_VBA\nTBackup \ndomain \nsupply \ncurrent Backup SRAM ON, low-speed \noscillator and RTC ON1.29 1.42 1.68 6 11\nµABackup SRAM OFF, low-speed \noscillator and RTC ON0.62 0.73 0.96 3 5\nBackup SRAM ON, RTC OFF 0.79 0.81 0.86 5 10\nBackup SRAM OFF, RTC OFF 0.10 0.10 0.10 2 4\n1. Guaranteed by characterization.\nMS19990V1\n00.511.522.533.5\n0 1 02 03 04 05 06 07 08 09 0 1 0 0IVBAT in (μA)\nTe mp e r at u r e  i n  ( ° C )1.65V\n1.8V\n2V\n2.4V\n2.7V\n3V\n3.3V\n3.6V\nElectrical characteristics STM32F405xx, STM32F407xx\n92/203 DS8626 Rev 9Figure 29. Typical VBAT current consumption (LSE and RTC ON/backup RAM ON)\nMS19991V1\n0123456\n0 1 02 03 04 05 06 07 08 09 0 1 0 0IVBAT in (μA)\nTe mp e r at u r e  i n  ( ° C )1.65V\n1.8V\n2V\n2.4V\n2.7V\n3V\n3.3V\n3.6V\nDS8626 Rev 9 93/203STM32F405xx, STM32F407xx Electrical characteristics\nAdditional current consumption\nThe MCU is placed under the following conditions:\n• All I/O pins are configured in analog mode.\n• The Flash memory access time is adjusted to fHCLK  frequency.\n• The voltage scaling is adjusted to fHCLK  frequency as follows:\n– Scale 2 for fHCLK  ≤ 144 MHz \n– Scale 1 for 144 MHz < fHCLK  ≤ 168 MHz. \n• The system clock is HCLK, fPCLK1 = fHCLK /4, and fPCLK2  = fHCLK /2.\n• The HSE crystal clock frequency is 25 MHz.\n• TA= 25 °C.\n          \nI/O system current consumption\nThe current consumption of the I/O system  has two components: static and dynamic.\nI/O static current consumption \nAll the I/Os used as inputs with pull-up generate current consumption when the pin is \nexternally held low. The value of this curren t consumption can be simply computed by using \nthe pull-up/pull-down resi stors values given in Table  48: I/O static characteristics .\nFor the output pins, any external pull-down or external load must also be considered to \nestimate the current consumption.\nAdditional I/O current consumption is due to I/Os  configured as inputs if an intermediate \nvoltage level is externally app lied. This current consumption is  caused by the input Schmitt \ntrigger circuits used to discriminate the inpu t value. Unless this specific configuration is \nrequired by the application, this supply curr ent consumption can be avoided by configuring \nthese I/Os in analog mode. This is notably th e case of ADC input pins which should be \nconfigured as analog inputs.\nCaution: Any floating input pin can also settle to an intermediate voltage level or switch inadvertently, \nas a result of external electromagnetic nois e. To avoid current consumption related to Table 26. Typical current consumption in Run mode, code with data processing\n running from Flash memory, regulator ON (ART accelerator enabled \nexcept prefetch), VDD = 1.8 V(1) \n1. When peripherals are enabled, the pow er consumption corresponding to the analog part of the peripherals \n(such as ADC or DAC) is not included. Symbol Parameter Conditions fHCLK  (MHz)Typ. at TA = \n25 °CUnit\nIDDSupply current in \nRun modeAll peripheral \ndisabled160 36.2\nmA144 29.3\n120 24.7\n90 19.3\n60 13.4\n30 7.725 6.0\nElectrical characteristics STM32F405xx, STM32F407xx\n94/203 DS8626 Rev 9floating pins, they must either be configured in analog mode, or forced internally to a definite \ndigital value. This can be done either by usin g pull-up/down resistors or by configuring the \npins in output mode.\nI/O dynamic current consumption\nIn addition to the internal peripheral current consumption measured previously (see \nTable  28: Peripheral current consumption ), the I/Os used by an application also contribute \nto the current consumption. When an I/O pin switch es, it uses the current from the MCU \nsupply voltage to supply the I/O pin circuitry and to charge/discharge the capacitive load \n(internal or external) connected to the pin:\nISW VDD fSW C× × =\nwhere\nISW is the current sunk by a switching I/ O to charge/discharge the capacitive load\nVDD is the MCU supply voltage\nfSW is the I/O switching frequency\nC is the total capacitance seen by the I/O pin: C = CINT+ CEXT\nThe test pin is configured in push-pull output mode and is toggled by software at a fixed \nfrequency.\nDS8626 Rev 9 95/203STM32F405xx, STM32F407xx Electrical characteristics\n          Table 27. Switching output I/O current consumption\nSymbol Parameter Conditions(1) I/O toggling \nfrequency (fSW)Typ Unit\nIDDIOI/O switching \ncurrentVDD = 3.3 V(2)\nC = CINT2 MHz 0.02\nmA8 MHz 0.14\n25 MHz 0.51\n50 MHz 0.86\n60 MHz 1.30\nVDD = 3.3 V\nCEXT = 0 pF\nC = CINT + CEXT+ CS2 MHz 0.10\n8 MHz 0.38\n25 MHz 1.1850 MHz 2.47\n60 MHz 2.86\nV\nDD = 3.3 V\nCEXT = 10 pF\nC = CINT + CEXT+ CS2 MHz 0.17\n8 MHz 0.66\n25 MHz 1.7050 MHz 2.65\n60 MHz 3.48\nV\nDD = 3.3 V\nCEXT = 22 pF\nC = CINT + CEXT+ CS2 MHz 0.23\n8 MHz 0.95\n25 MHz 3.20\n50 MHz 4.6960 MHz 8.06\nV\nDD = 3.3 V\nCEXT = 33 pF\nC = CINT + CEXT+ CS2 MHz 0.30\n8 MHz 1.22\n25 MHz 3.90\n50 MHz 8.82\n60 MHz -(3)\n1. CS is the PCB board capacitance including the pad pin. CS = 7 pF (estimated value).\n2. This test is performed by cutting the LQFP package pin (pad removal).3. At 60 MHz, C maximum load is specified 30 pF.\nElectrical characteristics STM32F405xx, STM32F407xx\n96/203 DS8626 Rev 9On-chip peripheral current consumption\nThe current consumption of the on-chip peripherals is given in Table  28. The MCU is placed \nunder the following conditions:\n• At startup, all I/O pins are configured as analog pins by firmware.\n• All peripherals are disabled unless otherwise mentioned\n• The code is running from Flash memory and t he Flash memory access time is equal to \n5 wait states at 168 MHz.\n• The code is running from Flash memory and t he Flash memory access time is equal to \n4 wait states at 144 MHz, and the power scale mode is set to 2.\n• The ART accelerator is ON.\n• The given value is calculated by measur ing the difference of current consumption\n– with all peripherals clocked off– with one peripheral clocked on (with only the clock applied)\n• When the peripherals are enabled: HCLK is the system clock, f\nPCLK1  = fHCLK /4, and \nfPCLK2  = fHCLK /2.\n• The typical values are obtained for VDD = 3.3 V and TA= 25 °C, unless otherwise \nspecified.\n          Table 28. Peripheral current consumption \nPeripheralIDD(Typ)(1)\nUnitScale1\n(up t 168 MHz)Scale2\n(up to 144 MHz)\nAHB1\n(up to 168 MHz)GPIOA 2.70 2.40\nµA/MHzGPIOB 2.50 2.22\nGPIOC 2.54 2.28GPIOD 2.55 2.28\nGPIOE 2.68 2.40\nGPIOF 2.53 2.28\nGPIOG 2.51 2.22\nGPIOH 2.51 2.22\nGPIOI 2.50 2.22\nOTG_HS+ULPI 28.33 25.38\nCRC 0.41 0.40\nBKPSRAM 0.63 0.58\nDMA1 37.44 33.58\nDMA2 37.69 33.93\nETH_MAC\nETH_MAC_TX\nETH_MAC_RX\nETH_MAC_PTP20.43 18.39\nDS8626 Rev 9 97/203STM32F405xx, STM32F407xx Electrical characteristics\nAHB2\n(up to 168 MHz)OTG_FS 26.45 26.67\nµA/MHz DCMI 5.87 5.35\nRNG 1.50 1.67\nAHB3\n(up to 168 MHz)FSMC 12.46 11.31 µA/MHz\nBus matrix(2)13.10 11.81 µA/MHz\nAPB1\n(up to 42 MHz)TIM2 16.71 16.50\nµA/MHzTIM3 12.33 11.94\nTIM4 13.45 12.92\nTIM5 17.14 16.58TIM6 2.43 3.06\nTIM7 2.43 2.22\nTIM12 6.62 6.83TIM13 5.05 5.47\nTIM14 5.26 5.61\nPWR 1.00 0.56\nUSART2 2.69 2.78\nUSART3 2.74 2.78\nUART4 3.24 3.33UART5 2.69 2.78\nI2C1 2.67 2.50\nI2C2 2.83 2.78I2C3 2.81 2.78\nSPI2 2.43 2.22\nSPI3 2.43 2.22\nI2S2\n(3)2.43 2.22\nI2S3(3)2.26 2.22\nCAN1 5.12 5.56\nCAN2 4.81 5.28\nDAC(4)1.67 1.67\nWWDG 1.00 0.83Table 28. Peripheral current consumption (continued)\nPeripheralIDD(Typ)(1)\nUnitScale1\n(up t 168 MHz)Scale2\n(up to 144 MHz)\nElectrical characteristics STM32F405xx, STM32F407xx\n98/203 DS8626 Rev 95.3.7 Wakeup time from low-power mode\nThe wakeup times given in Table  29 is measured on a wakeup phase with a 16  MHz HSI \nRC oscillator. The clock source used to wake  up the device depends from the current \noperating mode:\n• Stop or Standby mode:  the clock source is the RC oscillator\n• Sleep mode: the clock source is the clock that was set before entering Sleep mode.\nAll timings are derived from tests performed under ambient temperature and VDD supply \nvoltage conditions summarized in Table  14.APB2\n(up to 84 MHz)SDIO 7.08 7.92\nµA/MHzTIM1 16.79 15.51\nTIM8 17.88 16.53\nTIM9 7.64 7.28\nTIM10 4.89 4.82\nTIM11 5.19 4.82\nADC1(5)4.67 4.58\nADC2(5)4.67 4.58\nADC3(5)4.43 4.44\nSPI1 1.32 1.39\nUSART1 3.51 3.72\nUSART6 3.55 3.75\nSYSCFG 0.74 0.56\n1. When the I/O compensation cell is ON, IDD typical value increases by 0.22 mA.\n2. The BusMatrix is automatically acti ve when at least one master is ON.\n3. To enable an I2S peripheral, first set the I2SMOD bi t and then the I2SE bit in the SPI_I2SCFGR register.\n4. When the DAC is ON and EN1/2 bits are set in DA C_CR register, add an additional power consumption of \n0.8 mA per DAC channel for the analog part.\n5. When the ADC is ON (ADON bit set in the ADC_CR 2 register), add an additional power consumption of \n1.6 mA per ADC for the analog part.Table 28. Peripheral current consumption (continued)\nPeripheralIDD(Typ)(1)\nUnitScale1\n(up t 168 MHz)Scale2\n(up to 144 MHz)\nDS8626 Rev 9 99/203STM32F405xx, STM32F407xx Electrical characteristics\n          \n5.3.8 External clock source characteristics\nHigh-speed external user clock generated from an external source\nThe characteristics given in Table  30 result from tests performed using an high-speed \nexternal clock source, and under ambient temperature and supply voltage conditions \nsummarized in Table  14.\n          Table 29. Low-power mode wakeup timings\nSymbol Parameter Min(1)Typ(1)Max(1)Unit\ntWUSLEEP(2)Wakeup from Sleep mode - 5 -CPU \nclock cycle\nt\nWUSTOP(2)Wakeup from Stop mode (regulator in Run mode and \nFlash memory in Stop mode)-1 3 -\nµsWakeup from Stop mode (regulator in low-power mode \nand Flash memory in Stop mode)-1 7 4 0\nWakeup from Stop mode (regulator in Run mode and \nFlash memory in Deep power-down mode)-1 0 5 -\nWakeup from Stop mode (regulator in low-power mode \nand Flash memory in Deep power-down mode)-1 1 0 -\ntWUSTDBY(2)(3)Wakeup from Standby mode 260 375 480 µs\n1. Guaranteed by characterization.\n2. The wakeup times are measured from the wakeup event to the point in which the application c ode reads the first instruction.\n3. tWUSTDBY minimum and maximum values are given at 105 °C and –45 °C, respectively.\nTable 30. High-speed external user clock characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nfHSE_extExternal user clock source \nfrequency(1)\n-1- 5 0 M H z\nVHSEH OSC_IN input pin high level voltage 0.7VDD -VDDV\nVHSEL OSC_IN input pin low level voltage VSS -0 . 3 VDD\ntw(HSE)\ntw(HSE)OSC_IN high or low time(1)\n1. Guaranteed by design.5--\nns\ntr(HSE)\ntf(HSE)OSC_IN rise or fall time(1)-- 1 0\nCin(HSE) OSC_IN input capacitance(1)-- 5 - p F\nDuCy(HSE) Duty cycle - 45 - 55 %\nIL OSC_IN Input leakage current VSS ≤ VIN ≤ VDD -- ± 1 µ A\nElectrical characteristics STM32F405xx, STM32F407xx\n100/203 DS8626 Rev 9Low-speed external user clock generated from an external source\nThe characteristics given in Table  31 result from tests performed using an low-speed \nexternal clock source, and under ambient temperature and supply voltage conditions \nsummarized in Table  14.\n          \nFigure 30. High-speed external clock source AC timing diagramTable 31. Low-speed external user clock characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nfLSE_extUser External clock source \nfrequency(1)\n-- 32.768 1000 kHz\nVLSEHOSC32_IN input pin high level \nvoltage0.7VDD -VDDV\nVLSEL OSC32_IN input pin low level voltage VSS -0 . 3 VDD\ntw(LSE)\ntf(LSE)OSC32_IN high or low time(1)450 - -\nns\ntr(LSE)\ntf(LSE)OSC32_IN rise or fall time(1)-- 5 0\nCin(LSE) OSC32_IN input capacitance(1)-- 5 - p F\nDuCy(LSE) Duty cycle - 30 - 70 %\nIL OSC32_IN Input leakage current VSS ≤ VIN ≤ VDD -- ± 1 µ A\n1. Guaranteed by design.\nai17528OSC _I NExternal\nSTM32Fclock sourceVHSEH\ntf(HSE) tW(HSE)\nIL90 %\n10%\nTHSEttr(HSE)tW(HSE)\nfHSE_extVHSEL\nDS8626 Rev 9 101/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 31. Low-speed external cl ock source AC timing diagram\nHigh-speed external clock generated from a crystal/ceramic resonator\nThe high-speed external (HSE) clock can be  supplied with a 4 to 26 MHz crystal/ceramic \nresonator oscillator. All th e information given in this  paragraph are based on \ncharacterization re sults obtained with typical external components specified in Table  32. In \nthe application, the resonator and the load capacitors have to be placed as close as \npossible to the oscillator pins in order to minimize output distortion an d startup stabilization \ntime. Refer to the crystal re sonator manufacturer for more  details on the resonator \ncharacteristics (frequenc y, package, accuracy).\n          \nFor CL1 and CL2, it is recommended to use high-qualit y external ceramic capacitors in the \n5 pF to 25  pF range (typ.), designed for high-freque ncy applications, and selected to match \nthe requirements of the crystal or resonator (see Figure  32). CL1 and CL2 are usually the \nsame size. The crystal manufac turer typically specifies a lo ad capacitance which is the \nseries combination of CL1 and CL2. PCB and MCU pin capacitance must be included (10  pF \ncan be used as a rough estimate of the comb ined pin and board capacitance) when sizing \nCL1 and CL2.Table 32. HSE 4-26 MHz oscillator characteristics (1)\n \n1. Guaranteed by design.Symbol Parameter Conditions Min Typ Max Unit\nfOSC_IN Oscillator frequency - 4 - 26 MHz\nRF Feedback resistor - - 200 - k Ω \nGm Oscillator transconductance\nStartup5--\nmA/V\nGmcritmax Maximum critical crystal Gm --1\ntSU(HSE)(2)\n2. Guaranteed by characterization. tSU(HSE)  is the startup time measured from the moment it is enabled (by \nsoftware) to a stabilized 8 MHz os cillation is reached. This valu e is measured for a standard crystal \nresonator and can vary significantly  with the crystal manufacturerStartup time  VDD is stabilized - 2 - msai17529OSC32_INExternal\nSTM32Fclock sourceVLSEH\ntf(LSE) tW(LSE)\nIL90%\n10%\nTLSEttr(LSE)tW(LSE)\nfLSE_extVLSEL\nElectrical characteristics STM32F405xx, STM32F407xx\n102/203 DS8626 Rev 9Note: For information on electi ng the crystal, refer to the application not e AN2867 “Oscillator \ndesign guide for ST microcontrollers” available from the ST website www.st.com .\nFigure 32. Typical application with an 8 MHz crystal\n1. REXT value depends on the cr ystal characteristics.\nLow-speed external clock generated from a crystal/ceramic resonator\nThe low-speed external (LSE) clock can be supplied with a 32.768 kHz crystal/ceramic \nresonator oscillator. All th e information given in this  paragraph are based on \ncharacterization re sults obtained with typical external components specified in Table  33. In \nthe application, the resonator and the load capacitors have to be placed as close as \npossible to the oscillator pins in order to minimize output distortion an d startup stabilization \ntime. Refer to the crystal re sonator manufacturer for more  details on the resonator \ncharacteristics (frequenc y, package, accuracy).\n          \nNote: For information on electi ng the crystal, refer to the application not e AN2867 “Oscillator \ndesign guide for ST microcontrollers” available from the ST website www.st.com .Table 33. LSE oscillator characteristics (fLSE = 32.768 kHz) (1)\n1. Guaranteed by design.Symbol Parameter Conditions Min Typ Max Unit\nfOSC_IN Oscillator frequency - - 32.768 - MHz\nRF Feedback resistor - - 18.4 - M Ω \nIDD LSE current consumption - - - 1 µA\nGm Oscillator transconductance\nStartup2.8 - -\nµA/V\nGmcritmax Maximum critical crystal Gm - - 0.56\ntSU(LSE)(2)\n2. Guaranteed by characterization. tSU(LSE)  is the startup time measured from the moment it is enabled (by \nsoftware) to a stabilized 32.768 kHz oscillation is r eached. This value is measured for a standard crystal \nresonator and it can vary significant ly with the crystal manufacturerstartup time  VDD is stabilized - 2 - sai17530OSC_OUTOSC_IN fHSECL1\nRF\nSTM32F8 MHz\nresonatorResonator with\nintegrated capacitors\nBias \ncontrolled\ngain\nREXT(1) CL2\nDS8626 Rev 9 103/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 33. Typical application with a 32.768 kHz crystal\n5.3.9 Internal clock source characteristics\nThe parameters given in Table  34 and Table  35 are derived from tests performed under \nambient temperature and VDD supply voltage conditions summarized in Table  14.\nHigh-speed internal (HSI) RC oscillator\n          \nLow-speed internal (LSI) RC oscillator\n          ai17531OSC32_OUTOSC32_IN fLSECL1\nRF\nSTM32F32.768 kHz\nresonatorResonator with\nintegrated capacitors\nBias \ncontrolled\ngain\nCL2\nTable 34. HSI oscillator characteristics (1)\n1. VDD = 3.3 V, PLL OFF, TA = –40 to 125 °C unless otherwise specified.Symbol Parameter Conditions Min Typ Max Unit\nfHSI Frequency - - 16 - MHz \nACCHSIHSI user trimming step(2)\n2. Guaranteed by design.-- - 1 %\nAccuracy of the HSI oscillatorTA = –40 to 105 °C(3)\n3. Guaranteed by characterization.–8 - 4.5 %\nTA = –10 to 85 °C(3)–4 - 4 %\nTA = 25 °C(4)\n4. Factory calibrated, parts not soldered.–1 - 1 %\ntsu(HSI)(2)HSI oscillator startup time - - 2.2 4 µs\nIDD(HSI)(2)HSI oscillator power \nconsumption- - 60 80 µA\nTable 35. LSI oscillator characteristics (1)\n1. VDD = 3 V, TA = –40 to 105 °C unless otherwise specified.Symbol Parameter Min Typ Max Unit\nfLSI(2)\n2. Guaranteed by characterization.Frequency 17 32 47 kHz \ntsu(LSI)(3)\n3. Guaranteed by design.LSI oscillator startup time - 15 40 µs\nIDD(LSI)(3)LSI oscillator power consumption - 0.4 0.6 µA\nElectrical characteristics STM32F405xx, STM32F407xx\n104/203 DS8626 Rev 9Figure 34. ACCLSI versus temperature\n5.3.10 PLL characteristics\nThe parameters given in Table  36 and Table  37 are derived from tests performed under \ntemperature and VDD supply voltage conditions summarized in Table  14.\n          MS19013V1-40-30-20-1001020304050\n- 4 5 - 3 5 - 2 5 - 1 5- 5 5 1 52 53 54 55 56 57 58 59 5 1 0 5Nor malized deviati on (%) \nTemperature (°C )max\navg\nmin\nTable 36. Main PLL characteristics \nSymbol Parameter Conditions Min Typ Max Unit\nfPLL_IN PLL input clock(1)-0 . 9 5(2)12 . 1 0 M H z\nfPLL_OUT PLL multiplier output clock - 24 - 168 MHz\nfPLL48_OUT48 MHz PLL multiplier output \nclock- - 48 75 MHz\nfVCO_OUT PLL VCO output - 100 - 432 MHz\ntLOCK PLL lock timeVCO freq = 100 MHz 75 - 200\nµs\nVCO freq = 432 MHz 100 - 300\nDS8626 Rev 9 105/203STM32F405xx, STM32F407xx Electrical characteristics\n          Jitter(3)Cycle-to-cycle jitter\nSystem clock \n120 MHzRMS - 25 -\npspeak \nto peak- ±150 -\nPeriod JitterRMS - 15 -\npeak \nto \npeak- ±200 -\nMain clock output (MCO) for \nRMII EthernetCycle to cycle at 50 MHz \non 1000 samples-3 2 -\nMain clock output (MCO) for MII \nEthernetCycle to cycle at 25 MHz \non 1000 samples-4 0 -\nBit Time CAN jitterCycle to cycle at 1 MHz \non 1000 samples- 330 -\nI\nDD(PLL)(4)PLL power consumption on VDDVCO freq = 100 MHz\nVCO freq = 432 MHz0.15\n0.45-0.40\n0.75mA\nIDDA(PLL)(4) PLL power consumption on \nVDDAVCO freq = 100 MHz\nVCO freq = 432 MHz0.30\n0.55-0.40\n0.85mA\n1. Take care of using the appropriate division factor M to obtai n the specified PLL input clock values. The M factor is shared \nbetween PLL and PLLI2S.\n2. Guaranteed by design.\n3. The use of 2 PLLs in parallel could degraded the Jitter up to +30%.4. Guaranteed by characterization.Table 36. Main PLL characteristics (continued)\nSymbol Parameter Conditions Min Typ Max Unit\nTable 37. PLLI2S (audio PLL) characteristics \nSymbol Parameter Conditions Min Typ Max Unit\nfPLLI2S_IN PLLI2S input clock(1)-0 . 9 5(2)12 . 1 0 M H z\nfPLLI2S_OUT PLLI2S multiplier output clock - - - 216 MHz\nfVCO_OUT PLLI2S VCO output - 100 - 432 MHz\ntLOCK PLLI2S lock timeVCO freq = 100 MHz 75 - 200\nµs\nVCO freq = 432 MHz 100 - 300\nJitter(3)Master I2S clock jitterCycle to cycle at \n12.288 MHz on 48KHz period, \nN=432, R=5RMS - 90 -\n peak \nto \npeak- ±280 - ps\nAverage frequency of \n12.288 MHz \nN = 432, R = 5on 1000 samples-9 0 -p s\nWS I\n2S clock jitterCycle to cycle at 48 KHz\non 1000 samples-4 0 0 - p s\nElectrical characteristics STM32F405xx, STM32F407xx\n106/203 DS8626 Rev 95.3.11 PLL spread spectrum clock generation (SSCG) characteristics\nThe spread spectrum clock generation (SSCG) feature allows to reduce electromagnetic \ninterferences (see Table  44: EMI characteristics ). It is available only on the main PLL. \n          \nEquation 1\nThe frequency modulation period (MODEPER) is given by the equation below:\nMODEPER round fPLL_IN4fMod×()⁄ [] =\nfPLL_IN and fMod must be expressed in Hz. \nAs an example: If f\nPLL_IN  = 1 MHz, and fMOD  = 1 kHz, the modulation depth  (MODEPER) is given by \ne\nquation 1: \nMODEPER round 10641 03×()⁄ [] 250 ==\nEquation 2Equation 2 allows to calculate the increment step (INCS\n TEP):\nINCSTEP round 2151– () md PLLN× × () 100 5 × MODEPER× ()⁄ [] =\nfVCO_OUT must be expressed in MHz.IDD(PLLI2S)(4)PLLI2S power consumption on \nVDDVCO freq = 100 MHz\nVCO freq = 432 MHz0.150.45-0.400.75mA\nI\nDDA(PLLI2S)(4)PLLI2S power consumption on \nVDDAVCO freq = 100 MHz\nVCO freq = 432 MHz0.300.55-0.400.85mA\n1. Take care of using the appropriate division fact or M to have the specified PLL input clock values.\n2. Guaranteed by design.\n3. Value given with main PLL running.4. Guaranteed by characterization.Table 37. PLLI2S (audio PLL) characteristics (continued)\nSymbol Parameter Conditions Min Typ Max Unit\nTable 38. SSCG parameters constraint \nSymbol Parameter Min Typ Max(1)Unit\nfMod Modulation frequency - - 10 KHz\nmd Peak modulation depth 0.25 - 2 %\nMODEPER * INCSTEP - - 215−1-\n1. Guaranteed by design.\nDS8626 Rev 9 107/203STM32F405xx, STM32F407xx Electrical characteristics\nWith a modulation depth (md)  = ±2 % (4 % peak to peak), and PLLN  = 240 (in MHz):\nINCSTEP round 2151– () 2 240× × () 100 5 × 250× ()⁄ [] 126md(quantitazed)% == \nAn amplitude quantization error may be generat e d because the linear modulation profile is \nobtained by taking the quantized values (rou nded to the nearest integer) of MODPER and \nINCSTEP. As a result, the achieved modulat ion depth is quantized. The percentage \nquantized modulation depth is given by the following formula:\nmdquantized% MODEPER INCSTEP × 100× 5× () 2151– () PLLN× ()⁄ =\nAs a result: \nmdquantized% 250 126 × 100× 5× () 2151– () 240× ()⁄ 2.002%(peak) ==\nFigure  35 and Figure  36 show the main PLL output clock wavefor ms in center spread and \ndown spread modes, where:\nF0 is fPLL_OUT  nominal.\nTmode is the modulation period.\nmd is the modulation depth.\nFigure 35. PLL output clock waveforms in center spread mode\nFrequency (PLL_OUT)\nTimeF0\ntmode 2xtmodemd\nai17291md\nElectrical characteristics STM32F405xx, STM32F407xx\n108/203 DS8626 Rev 9Figure 36. PLL output clock waveforms in down spread mode\n5.3.12 Memory characteristics\nFlash memory\nThe characteristics are given at TA = –40 to 105 °C  unless otherwise specified.\nThe devices are shipped to customers with the Flash memory erased.\n          \n          Frequency (PLL_OUT)\nTimeF0\ntmode 2xtmode2xmd\nai17292b\nTable 39. Flash memory characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nIDD Supply currentWrite / Erase 8-bit mode, VDD = 1.8 V - 5 -\nmA Write / Erase 16-bit mode, VDD = 2.1 V - 8 -\nWrite / Erase 32-bit mode, VDD = 3.3 V - 12 -\nTable 40. Flash memory programming \nSymbol Parameter  Conditions Min(1)Typ Max(1)Unit\ntprog Word programming timeProgram/erase parallelism \n(PSIZE) = x 8/16/32-1 6 1 0 0(2)µs\ntERASE16KB Sector (16 KB) erase timeProgram/erase parallelism \n(PSIZE) = x 8- 400 800\nmsProgram/erase parallelism \n(PSIZE) = x 16- 300 600\nProgram/erase parallelism \n(PSIZE) = x 32- 250 500\ntERASE64KB Sector (64 KB) erase timeProgram/erase parallelism \n(PSIZE) = x 8- 1200 2400\nmsProgram/erase parallelism \n(PSIZE) = x 16- 700 1400\nProgram/erase parallelism \n(PSIZE) = x 32- 550 1100\nDS8626 Rev 9 109/203STM32F405xx, STM32F407xx Electrical characteristics\ntERASE128KB Sector (128 KB) erase timeProgram/erase parallelism \n(PSIZE) = x 8-24\nsProgram/erase parallelism \n(PSIZE) = x 16-1 . 3 2 . 6\nProgram/erase parallelism \n(PSIZE) = x 32-12\ntME Mass erase timeProgram/erase parallelism \n(PSIZE) = x 8-1 6 3 2\nsProgram/erase parallelism \n(PSIZE) = x 16-1 1 2 2\nProgram/erase parallelism \n(PSIZE) = x 32-8 1 6\nVprog Programming voltage32-bit program operation 2.7 - 3.6 V\n16-bit program operation 2.1 - 3.6 V\n8-bit program operation 1.8 - 3.6 V\n1. Guaranteed by characterization.\n2. The maximum programming time is m easured after 100K erase operations.Table 40. Flash memory programming (continued)\nSymbol Parameter  Conditions Min(1)Typ Max(1)Unit\nElectrical characteristics STM32F405xx, STM32F407xx\n110/203 DS8626 Rev 9          \n          \n5.3.13 EMC characteristics\nSusceptibility tests ar e performed on a sample basis during device characterization.\nFunctional EMS (electromagnetic susceptibility)\nWhile a simple application is executed on t he device (toggling 2 LEDs through I/O ports). \nthe device is stressed by two electromagnetic events until a failure occurs. The failure is indicated by the LEDs:\n• Electrostatic discharge (ESD) (positive and negative) is applied to all device pins until \na functional disturbance occurs. This test is compliant with the IEC 61000-4-2 standard.\n• FTB: A burst of fast transient voltage (p ositive and negative) is applied to VDD and VSS \nthrough a 100 pF capacitor, until a functional  disturbance occurs. This test is compliant \nwith the IEC 61000-4-4 standard.Table 41. Flash memory programming with VPP \nSymbol Parameter  Conditions Min(1)Typ Max(1)\n1. Guaranteed by design.Unit\ntprog Double word programming\nTA = 0 to +40 °C\nVDD = 3.3 V\nVPP = 8.5 V-1 6 1 0 0(2)\n2. The maximum programming time is measured after 100K erase operations.µs\ntERASE16KB Sector (16 KB) erase time - 230 -\nms tERASE64KB Sector (64 KB) erase time - 490 -\ntERASE128KB Sector (128 KB) erase time - 875 -\ntME Mass erase time - 6.9 - s\nVprog Programming voltage - 2.7 - 3.6 V\nVPP VPP voltage range - 7 - 9 V\nIPPMinimum current sunk on \nthe VPP pin-1 0 - - m A\ntVPP(3)\n3. VPP should only be connected during programming/erasing.Cumulative time during \nwhich VPP is applied- - - 1 hour\nTable 42. Flash memory endurance and data retention\nSymbol Parameter  ConditionsValue\nUnit\nMin(1)\n1. Guaranteed by characterization.NEND EnduranceTA = –40 to +85 °C (6 suffix versions)\nTA = –40 to +105 °C (7 suffix versions)10 kcycles\ntRET Data retention1 kcycle(2) at TA = 85 °C\n2. Cycling performed over the whole temperature range.30\nYears 1 kcycle(2) at TA = 105 °C 10\n10 kcycles(2) at TA = 55 °C 20\nDS8626 Rev 9 111/203STM32F405xx, STM32F407xx Electrical characteristics\nA device reset allows normal operations to be resumed. \nThe test results are given in Table  43. They are based on the EMS levels and classes \ndefined in application note AN1709.\n          \nDesigning hardened software to avoid noise problems\nEMC characterization and optimization are per formed at component level with a typical \napplication environment and simplified MCU so ftware. It should be noted that good EMC \nperformance is highly dependent on the user application and the software in particular.\nTherefore it is recommended that the us er applies EMC software optimization and \nprequalification tests in re lation with the EMC level requ ested for his application.\nSoftware recommendations\nThe software flowchart must include the management of runaway conditions such as:\n• Corrupted program counter\n• Unexpected reset\n• Critical Data corruption (control registers...)\nPrequalification trials\nMost of the common failures (unexpected reset and program counter corruption) can be \nreproduced by manually forc ing a low state on the NRST pin or the Oscillator pins for 1 \nsecond.\nTo complete these trials, ESD stress can be applie d directly on the device, over the range of \nspecification values. When une xpected behavior is detected, the software can be hardened \nto prevent unrecoverable errors occurring (see application note AN1015).Table 43. EMS characteristics\nSymbol Parameter ConditionsLevel/\nClass\nVFESDVoltage limits to be applied on any I/O pin to \ninduce a functional disturbanceVDD = 3.3 V, LQFP176, TA = +25 °C, \nfHCLK  = 168 MHz, conforms to \nIEC 61000-4-22B\nVEFTBFast transient voltage  burst limits to be \napplied through 100 pF on VDD and VSS \npins to induce a functional disturbanceVDD = 3.3 V, LQFP176, TA = \n+25 °C, fHCLK  = 168 MHz, conforms \nto IEC 61000-4-24A\nElectrical characteristics STM32F405xx, STM32F407xx\n112/203 DS8626 Rev 9Electromagnetic Interference (EMI)\nThe electromagnetic field emitted by the device are monitored while a simple application, \nexecuting EEMBC? code, is running. This emission test is compliant with SAE IEC61967-2 \nstandard which specifies the test board and the pin loading.\n          \n5.3.14 Absolute maximum ratings (electrical sensitivity)\nStresses above the absolute maximum ratings listed in Table  11: Voltage characteristics , \nTable  12: Current characteristics , and Table  13: Thermal characteristics  may cause \npermanent damage to the device. These are stress  ratings only and the functional operation \nof the device at these conditions is not implied. Exposure to maximum rating conditions for extended periods may affect device reliability. Device mission profile (application conditions) \nis compliant with JEDEC JESD47 Qualificat ion Standard, extended mission profiles are \navailable on demand.\nElectrostatic discharge (ESD)\nElectrostatic discharges (a positive then a n egative pulse separated by 1 second) are \napplied to the pins of each sample according to each pin combinati on. The sample size \ndepends on the number of supply pins in the devi ce (3 parts × (n+1) supply pins). This test \nconforms to the JESD22-A114/C101 standard.\n           Table 44. EMI characteristics\nSymbol Parameter ConditionsMonitored\nfrequency bandMax vs. \n[fHSE/fCPU]Unit\n25/168 MHz\nSEMI Peak levelVDD = 3.3 V, TA = 25 °C, LQFP176 \npackage, conforming to SAE J1752/3 \nEEMBC, code running from Flash with \nART accelerator enabled 0.1 to 30 MHz 32\ndBµV 30 to 130 MHz 25\n130 MHz to 1GHz 29\nSAE EMI Level 4 -\nVDD = 3.3 V, TA = 25 °C, LQFP176 \npackage, conforming to SAE J1752/3 \nEEMBC, code running from Flash with \nART accelerator and PLL spread spectrum enabled0.1 to 30 MHz 19\ndBµV 30 to 130 MHz 16\n130 MHz to 1GHz 18\nSAE EMI level 3.5 -\nTable 45. ESD absolute maximum ratings\nSymbol Ratings Conditions ClassMaximum \nvalue(1) Unit\nVESD(HBM)Electrostatic discharge \nvoltage (human body \nmodel)TA = +25 °C conforming to JESD22-A114 2 2000(2)\nV\nVESD(CDM)Electrostatic discharge \nvoltage (charge device \nmodel)TA = +25 °C conforming to \nANSI/ESD STM5.3.1II 500\n1. Guaranteed by characterization.\nDS8626 Rev 9 113/203STM32F405xx, STM32F407xx Electrical characteristics\nStatic latchup\nTwo complementary static tests are requir ed on six parts to assess the latchup \nperformance: \n• A supply overvoltage is applied to each power supply pin\n• A current injection is applied to each input, output and configurable I/O pin\nThese tests are compliant with EI A/JESD 78A IC latchup standard.\n          \n5.3.15 I/O current in jection characteristics\nAs a general rule, current injection to the I/O pins, due to external voltage below VSS or \nabove VDD (for standard, 3 V-capable I/O pins) should be avoided during normal product \noperation. However, in order to give an indica tion of the robustness of the microcontroller in \ncases when abnormal injection a ccidentally happens, susceptibilit y tests are performed on a \nsample basis during device characterization.\nFunctional susceptibilty to I/O current injection \nWhile a simple application is executed on the device, the device is stressed by injecting \ncurrent into the I/O pins  programmed in floating input mode . While current is  injected into \nthe I/O pin, one at a time, the device is checked for functional failures. \nThe failure is indicated by an out of range parameter: ADC error above a certain limit (>5 \nLSB TUE), out of conventional limits of induc ed leakage current on adjacent pins (out of \n5 μA/+0  μA range), or other functional failure (for exam ple reset, oscillator frequency \ndeviation).\nNegative induced leakage current is caused by negative injection and positive induced \nleakage current by positive injection. \nThe test results are given in Table  47.2. On VBAT pin, VESD(HBM) is limited to 1000 V.\nTable 46. Electric al sensitivities\nSymbol Parameter C onditions Class\nLU Static latch-up class TA = +105 °C conforming to JESD78A II level A\nElectrical characteristics STM32F405xx, STM32F407xx\n114/203 DS8626 Rev 9          \n5.3.16 I/O port characteristics\nGeneral input/output characteristics\nUnless otherwise specified,  the parameters given in Table  48 are derived from tests \nperformed under the conditions summarized in Table  14. All I/Os are CMOS and TTL \ncompliant.\nNote: For information on GPIO configuration, refer to application note AN4899 “STM32 GPIO \nconfiguration for hardware settings and low-power consumption” available from the ST website www.st.com .\n          Table 47. I/O current injection susceptibility \nSymbol DescriptionFunctional susceptibility \nUnitNegative \ninjectionPositive \ninjection\nIINJ(1)Injected current on BOOT0 pin −0 NA\nmAInjected current on NRST pin −0 NA\nInjected current on PE2, PE3, PE4, PE5, PE6, \nPI8, PC13, PC14, PC15, PI9, PI10, PI11, PF0, \nPF1, PF2, PF3,  PF4, PF5, PF10, PH0/OSC_IN, \nPH1/OSC_OUT, PC0, PC 1, PC2, PC3, PB6, \nPB7, PB8, PB9, PE0, PE1, PI 4, PI5, PI6, PI7, \nPDR_ON, BYPASS_REG−0 NA\nInjected current on all FT pins −5N A\nInjected current on any other pin −5+ 5\n1. It is recommended to add a Schottky diode (pin to ground) to  analog pins which may potentially inject negative currents.\nTable 48. I/O static characteristics \nSymbol Parameter Conditions Min Typ Max Unit\nVILFT, TTa and NRST I/O input low \nlevel voltage1.7 V ≤ VDD ≤ 3.6 V - - 0.3VDD-0.04(1)\nV- - 0.3VDD(2)\nBOOT0 I/O input low level \nvoltage1.75 V ≤ VDD ≤ 3.6 V\n-40 °C ≤ TA ≤ 105 °C --\n0.1VDD-+0.1(1)\n1.7 V ≤ VDD ≤ 3.6 V\n0 °C ≤ TA ≤ 105 °C--\nVIHFT, TTa and NRST I/O input low \nlevel voltage1.7 V ≤ VDD ≤ 3.6 V0.45VDD+0.3(1)--\n0.7VDD(2)--\nBOOT0 I/O input low level \nvoltage1.75 V ≤ VDD ≤ 3.6 V\n-40 °C ≤ TA ≤ 105 °C 0.17VDD+0.7(1)--\n1.7 V ≤ VDD ≤ 3.6 V\n0 °C ≤ TA ≤ 105 °C--\nDS8626 Rev 9 115/203STM32F405xx, STM32F407xx Electrical characteristics\nAll I/Os are CMOS and TTL compliant (no software configuration required). Their \ncharacteristics cover more than the strict CMOS-technology or TTL parameters.VHYSFT, TTa and NRST I/O input \nhysteresis1.7 V ≤ VDD ≤ 3.6 V 10%VDD(3)--\nV\nBOOT0 I/O input hysteresis1.75 V ≤ VDD ≤ 3.6 V\n-40 °C ≤ TA ≤ 105 °C 0.1 - -\n1.7 V ≤ VDD ≤ 3.6 V\n0 °C ≤ TA ≤ 105 °C\nIlkgI/O input leakage current (4)VSS ≤ VIN ≤ VDD -- ±1\nµA\nI/O FT input leakage current (5)VIN = 5 V - - 3\nRPUWeak pull-up \nequivalent \nresistor(6)All pins except for PA10 and \nPB12 \n(OTG_FS_ID, \nOTG_HS_ID)V\nIN = VSS 30 40 50\nkΩPA10 and \nPB12 \n(OTG_FS_ID, \nOTG_HS_ID)-7 1 0 1 4\nRPDWeak pull-down \nequivalent \nresistor(7)All pins \nexcept for \nPA10 and PB12V\nIN = VDD 30 40 50\nPA10 and \nPB12-7 1 0 1 4\nCIO(8) I/O pin \ncapacitance-5- p F\n1. Guaranteed by design. \n2. Tested in production.3. With a minimum of 200 mV. \n4. Leakage could be higher than the maximum value, if neg ative current is injected on adjacent pins.Refer to Table 47: I/O \ncurrent injection susceptibility\n5. To sustain a voltage higher than V\nDD + 0.3 V, the internal pull-up/pull-down re sistors must be disabled. Leakage could be \nhigher than the maximum value, if negative cu rrent is injected on adjacent pins. Refer to Table 47: I/O current injection \nsusceptibility .\n6. Pull-up and pull-down resistors are designed with a true resi stance in series with a switchable PMOS. This PMOS \ncontribution to the series resistance is minimum (~10% order) .\n7. Pull-up and pull-down resistors are designed with a true resi stance in series with a switchable NMOS. This NMOS \ncontribution to the series resistance is minimum (~10% order) .\n8. Hysteresis voltage between Schmitt trigger sw itching levels. Guaranteed by characterization.Table 48. I/O static characteristics (continued)\nSymbol Parameter Conditions Min Typ Max Unit\nElectrical characteristics STM32F405xx, STM32F407xx\n116/203 DS8626 Rev 9Output driving current\nThe GPIOs (general purpose input/outputs) can sink or source up to ±8 mA, and sink or \nsource up to ±20 mA (with a relaxed VOL/VOH) except PC13, PC14 and PC15 which can \nsink or source up to ±3mA. When using the PC13 to PC15 GPIOs in output mode, the \nspeed should not exceed 2 MHz with a maximum load of 30 pF.\nIn the user application, the number of I/O pi ns which can drive curr ent must be limited to \nrespect the absolute maximum rating specified in Section  5.2. In particular:\n• The sum of the currents sourced by all the I/Os on VDD, plus the maximum Run \nconsumption of the MCU sourced on VDD, cannot exceed the absolute maximum rating \nIVDD (see Table 12 ). \n• The sum of the currents sunk by all the I/Os on VSS plus the maximum Run \nconsumption of the MCU sunk on VSS cannot exceed the absolute maximum rating \nIVSS (see Table 12 ). \nOutput voltage levels\nUnless otherwise specified,  the parameters given in Table  49 are derived from tests \nperformed under ambient temperature and VDD supply voltage conditions summarized in \nTable  14. All I/Os are CMOS and TTL compliant.\n          Table 49. Output voltage characteristics(1)  \n1. PC13, PC14, PC15 and PI8 are supplied through the power  switch. Since the switch  only sinks a limited \namount of current (3 mA), the use of GPIOs PC13 to PC15 and PI8 in output mode is limited: the speed should not exceed 2 MHz with a maximum load of 30 pF and these I/Os must not be used as a current \nsource (e.g. to drive an LED).Symbol Parameter Conditions Min Max Unit\nVOL(2)\n2. The IIO current sunk by the device must always re spect the absolute maximu m rating specified in Table 12  \nand the sum of IIO (I/O ports and control pins) must not exceed IVSS.Output low level voltage CMOS port\nIIO = +8 mA\n2.7 V < VDD < 3.6 V-0 . 4\nV\nVOH(3)\n3. The IIO current sourced by the device must always re spect the absolute maximu m rating specified in \nTable 12  and the sum of IIO (I/O ports and control pins) must not exceed IVDD.Output high level voltage VDD–0.4 -\nVOL (2)Output low level voltage TTL port\nIIO =+ 8mA\n2.7 V < VDD < 3.6 V-0 . 4\nV\nVOH (3)Output high level voltage 2.4 -\nVOL(2)(4)\n4. Guaranteed by characterization.Output low level voltage IIO = +20 mA\n2.7 V < VDD < 3.6 V-1 . 3\nV\nVOH(3)(4)Output high level voltage VDD–1.3 -\nVOL(2)(4)Output low level voltage IIO = +6 mA\n2 V < VDD < 2.7 V-0 . 4\nV\nVOH(3)(4)Output high level voltage VDD–0.4 -\nDS8626 Rev 9 117/203STM32F405xx, STM32F407xx Electrical characteristics\nInput/output AC characteristics\nThe definition and values of input/output AC characteristics are given in Figure  37 and \nTable  50, respectively.\nUnless otherwise specified,  the parameters given in Table  50 are derived from tests \nperformed under the ambient temperature and VDD supply voltage conditions summarized \nin Table  14.\n          Table 50. I/O AC characteristics(1)(2) \nOSPEEDRy\n[1:0] bit \nvalue(1)Symbol Parameter Conditions Min Typ Max Unit\n00fmax(IO)out Maximum frequency(3)CL = 50 pF, VDD > 2.70 V - - 4\nMHzCL = 50 pF, VDD > 1.8 V - - 2\nCL = 10 pF, VDD > 2.70 V - - 8\nCL = 10 pF, VDD > 1.8 V - - 4\ntf(IO)out /\ntr(IO)outOutput high to low level fall time and output low to high \nlevel rise timeC\nL = 50 pF, VDD = 1.8 V to \n3.6 V-- 1 0 0 n s\n01fmax(IO)out Maximum frequency(3)CL = 50 pF, VDD > 2.70 V - - 25\nMHzCL = 50 pF, VDD > 1.8 V - - 12.5\nCL = 10 pF, VDD > 2.70 V - - 50(4)\nCL = 10 pF, VDD > 1.8 V - - 20\ntf(IO)out /\ntr(IO)outOutput high to low level fall time and output low to high \nlevel rise timeC\nL = 50 pF, VDD >2.7 V - - 10\nnsCL = 50 pF, VDD > 1.8 V - - 20\nCL = 10 pF, VDD > 2.70 V - - 6\nCL = 10 pF, VDD > 1.8 V - - 10\n10fmax(IO)out Maximum frequency(3)CL = 40 pF, VDD > 2.70 V - - 50(4)\nMHzCL = 40 pF, VDD > 1.8 V - - 25\nCL = 10 pF, VDD > 2.70 V - - 100(4)\nCL = 10 pF, VDD > 1.8 V - - 50(4)\ntf(IO)out /\ntr(IO)outOutput high to low level fall \ntime and output low to high level rise timeC\nL = 40 pF, VDD > 2.70 V - - 6\nnsCL = 40 pF, VDD > 1.8 V - - 10\nCL = 10 pF, VDD > 2.70 V - - 4\nCL = 10 pF, VDD > 1.8 V - - 6\nElectrical characteristics STM32F405xx, STM32F407xx\n118/203 DS8626 Rev 9Figure 37. I/O AC characteristics definition 11Fmax(IO)out Maximum frequency(3)CL = 30 pF, VDD > 2.70 V - - 100(4)\nMHzCL = 30 pF, VDD > 1.8 V - - 50(4)\nCL = 10 pF, VDD > 2.70 V - - 180(4)\nCL = 10 pF, VDD > 1.8 V - - 100(4)\ntf(IO)out /\ntr(IO)outOutput high to low level fall time and output low to high \nlevel rise timeC\nL = 30 pF, VDD > 2.70 V - - 4\nnsCL = 30 pF, VDD > 1.8 V - - 6\nCL = 10 pF, VDD > 2.70 V - - 2.5\nCL = 10 pF, VDD > 1.8 V - - 4\n-tEXTIpwPulse width of external signals \ndetected by the EXTI \ncontroller10 - - ns\n1. Guaranteed by characterization.\n2. The I/O speed is configured using the OSPEEDRy[1:0] bits. Refer to the STM32F4xx reference manual for a description of \nthe GPIOx_SPEEDR GPIO port output speed register.\n3. The maximum frequency is defined in Figure 37 .\n4. For maximum frequencies above 50 MHz, the compensation cell should be used.Table 50. I/O AC characteristics(1)(2) (continued)\nOSPEEDRy\n[1:0] bit \nvalue(1)Symbol Parameter Conditions Min Typ Max Unit\nai14131d10%90%\n50%\ntr(IO)out\nOUTPUTEXTERNAL\nON CL\nMaximum frequency is achieved if (tr + tf) ≤ (2/3)T and if the duty cycle is (45-55%) \nwhen loaded by C L specified in the table “ I/O AC characteristics ”. \n 10%\n50%\n90%\nTtf(IO)out\nDS8626 Rev 9 119/203STM32F405xx, STM32F407xx Electrical characteristics\n5.3.17 NRST pin characteristics\nThe NRST pin input driver uses CMOS technology. It is connected to a permanent pull-up \nresistor, RPU (see Table  48).\nUnless otherwise specified,  the parameters given in Table  51 are derived from tests \nperformed under the ambient temperature and VDD supply voltage conditions summarized \nin Table  14.\n          \nFigure 38. Recommended NRST pin protection  \n1. The reset network protects t he device against par asitic resets.\n2. The user must ensure that the level on the NRST pin can go below the VIL(NRST)  max level specified in \nTable 51 . Otherwise the reset is not taken into account by the device.Table 51. NRST pin characteristics  \nSymbol Parameter Conditions Min Typ Max Unit\nVIL(NRST)(1)\n1. Guaranteed by design.NRST Input low level voltage TTL ports \n2.7 V ≤ VDD \n≤ 3.6 V-- 0 . 8\nVVIH(NRST)(1)NRST Input high level voltage 2 - -\nVIL(NRST)(1)NRST Input low level voltage CMOS ports \n1.8 V ≤ VDD \n≤ 3.6 V-- 0 . 3 VDD\nVIH(NRST)(1)NRST Input high level voltage 0.7VDD --\nVhys(NRST)NRST Schmitt trigger voltage \nhysteresis -- 2 0 0 - m V\nRPU Weak pull-up equivalent resistor(2)\n2. The pull-up is designed with a true resistance in seri es with a switchable PMOS. This PMOS contribution to \nthe series resistance must be minimum (~10% order) .VIN = VSS 30 40 50 k Ω\nVF(NRST)(1)NRST Input filtered pulse - - 100 ns\nVNF(NRST)(1)NRST Input not filtered pulse VDD > 2.7 V 300 - - ns\nTNRST_OUT Generated reset pulse durationInternal \nReset source20 - - µs\nai14132cSTM32FRPUNRST(2)VDD\nFilterInternal Reset\n0.1 μFExternal\nreset circuit(1)\nElectrical characteristics STM32F405xx, STM32F407xx\n120/203 DS8626 Rev 95.3.18 TIM time r characteristics\nThe parameters given in Table  52 and Table  53 are guaranteed by design.\nRefer to Section  5.3.16: I/O port characteristics  for details on the input/output alternate \nfunction characteristics (output compare, in put capture, external  clock, PWM output).\n           Table 52. Characteristics of TIMx connected to the APB1 domain(1) \n1. TIMx is used as a general term to refer to the TI M2, TIM3, TIM4, TIM5, TIM6, TIM7, and TIM12 timers.Symbol Parameter Conditions Min Max Unit\ntres(TIM) Timer resolution timeAHB/APB1 \nprescaler distinct \nfrom 1, fTIMxCLK  = \n84 MHz1- tTIMxCLK\n11.9 - ns\nAHB/APB1 \nprescaler = 1, f\nTIMxCLK  = 42 MHz1- tTIMxCLK\n23.8 - ns\nfEXTTimer external clock \nfrequency on CH1 to CH4\n fTIMxCLK  = 84 MHz\nAPB1= 42 MHz0fTIMxCLK /2 MHz\n04 2 M H z\nResTIM Timer resolution - 16/32 bit\ntCOUNTER16-bit counter clock \nperiod when internal clock \nis selected1 65536 tTIMxCLK\n0.0119 780 µs\n32-bit counter clock \nperiod when internal clock \nis selected1- tTIMxCLK\n0.0119 51130563 µs\ntMAX_COUNT Maximum possible count- 65536 × 65536 tTIMxCLK\n- 51.1 s\nDS8626 Rev 9 121/203STM32F405xx, STM32F407xx Electrical characteristics\n           \n5.3.19 Communications interfaces\nI2C interface  characteristics\nThe I2C interface meets the timings requirements of the I2C-bus specification and user \nmanual rev. 03 for:\n• Standard-mode (Sm): with a bit rate up to 100 kbit/s \n• Fast-mode (Fm): with a bit rate up to 400 kbit/s.\nThe I2C timings requirements are guaranteed by desi gn when the I2C perip heral is properly \nconfigured (refer to RM0090 reference manual). \nThe SDA and SCL I/O requirements are met with the following restrictions: the SDA and SCL I/O pins are not “true” open-drain. When configured as open-drain, the PMOS \nconnected between the I/O pin and V\nDD is disabled, but is still present. Refer to  \nSection  5.3.16: I/O port characteristics  for more details on the I2C I/O characteristics .\nAll I2C SDA and SCL I/Os embed an analog filter. Refer to the table below for the analog \nfilter characteristics:\n          Table 53. Characteristics of TIMx connected to the APB2 domain(1) \n1. TIMx is used as a general term to refer to the TIM1, TIM8, TIM9, TIM10, and TIM11 timers.Symbol Parameter Conditions Min Max Unit\ntres(TIM) Timer resolution timeAHB/APB2 \nprescaler distinct from 1, f\nTIMxCLK  = \n168 MHz1- tTIMxCLK\n5.95 - ns\nAHB/APB2 \nprescaler = 1, \nfTIMxCLK  = 84 MHz1- tTIMxCLK\n11.9 - ns\nfEXTTimer external clock \nfrequency on CH1 to \nCH4\n fTIMxCLK  = \n168 MHz\nAPB2 = 84 MHz0fTIMxCLK /2 MHz\n08 4 M H z\nResTIM Timer resolution - 16 bit\ntCOUNTER16-bit counter clock \nperiod when internal \nclock is selected1 65536 tTIMxCLK\ntMAX_COUNT Maximum possible count - 32768 tTIMxCLK\nTable 54. I2C analog filter characteristics(1)\n1. Guaranteed by design.Symbol Parameter Min Max Unit\ntAFMaximum pulse width of spikes \nthat are suppressed by the analog \nfilter50(2)\n2. Spikes with widths below tAF(min) are filtered.260(3)\n3. Spikes with widths above tAF(max)  are not filteredns\nElectrical characteristics STM32F405xx, STM32F407xx\n122/203 DS8626 Rev 9SPI interface characteristics\nUnless otherwise specified, the parameters given in Table  55 for SPI are derived from tests \nperformed under the ambient temperature, fPCLKx frequency and VDD supply voltage \nconditions su mmarized in Table  14 with the following configuration:\n• Output speed is set to OSPEEDRy[1:0] = 10\n• Capacitive load C = 30 pF\n• Measurement points are done at CMOS levels: 0.5 VDD\nRefer to Section  5.3.16: I/O port characteristics  for more details on the input/output alternate \nfunction characteristics (NSS, SCK, MOSI, MISO).\n          Table 55. SPI dynamic characteristics(1) \nSymbol Parameter  Conditions Min Typ Max Unit\nfSCK\nSPI clock frequencyMaster mode, SPI1,  \n2.7V < VDD < 3.6V\n--42\nMHzSlave mode, SPI1,  \n2.7V < VDD < 3.6V42\n1/tc(SCK)Master mode, SPI1/2/3,  \n1.7V < VDD < 3.6V\n--21\nSlave mode, SPI1/2/3,  \n1.7V < VDD < 3.6V21\nDuty(SCK)Duty cycle of SPI clock \nfrequencySlave mode 30 50 70 %\nDS8626 Rev 9 123/203STM32F405xx, STM32F407xx Electrical characteristics\ntw(SCKH)\nSCK high and low timeMaster mode, SPI presc = 2,  \n2.7V < VDD < 3.6VTPCLK -0.5 TPCLK TPCLK +0.5\nnstw(SCKL)Master mode, SPI presc = 2,  \n1.7V < VDD < 3.6VTPCLK -2 TPCLK TPCLK +2\ntsu(NSS) NSS setup time Slave mode, SPI presc = 2 4 x TPCLK--\nth(NSS) NSS hold time Slave mode, SPI presc = 2 2 x TPCLK\ntsu(MI)Data input setup timeMaster mode 6.5 - -\ntsu(SI) Slave mode 2.5 - -\nth(MI)Data input hold timeMaster mode 2.5 - -\nth(SI) Slave mode 4 - -\nta(SO)(2)Data output access time Slave mode, SPI presc = 2 0 - 4 x TPCLK\ntdis(SO)(3)Data output disable timeSlave mode, SPI1,  \n2.7V < VDD < 3.6V0- 7 . 5\nSlave mode, SPI1/2/3  \n1.7V < VDD < 3.6V0- 1 6 . 5\ntv(SO)\nth(SO)Data output valid/hold timeSlave mode (after enable edge),  \nSPI1, 2.7V < VDD < 3.6V-1 1 1 3\nSlave mode (after enable edge),  \nSPI2/3, 2.7V < VDD < 3.6V-1 2 1 6 . 5\nSlave mode (after enable edge),  \nSPI1, 1.7V < VDD < 3.6V- 15.5 19\nSlave mode (after enable edge),  \nSPI2/3, 1.7V < VDD < 3.6V-1 8 2 0 . 5\ntv(MO) Data output valid timeMaster mode (after enable edge),  \nSPI1, 2.7V < VDD < 3.6V-- 2 . 5\nMaster mode (after enable edge),  \nSPI1/2/3, 1.7V < VDD < 3.6V-- 4 . 5\nth(MO) Data output hold time Master mode (after enable edge) 0 - -\n1. Guaranteed by characterization.\n2. Min time is for the minimum time to drive the output and t he max time is for the maximum time to validate the data.\n3. Min time is for the minimum time to invalidate the output and the max time is for the maximum time to put the data in Hi-Z.Table 55. SPI dynamic characteristics(1) (continued)\nSymbol Parameter  Conditions Min Typ Max Unit\nElectrical characteristics STM32F405xx, STM32F407xx\n124/203 DS8626 Rev 9Figure 39. SPI timing diagram - slave mode and CPHA = 0\nFigure 40. SPI timing diagram - slave mode and CPHA = 1MSv41658V1NSS input\nCPHA=0\nCPOL=0SCK inputCPHA=0\nCPOL=1\nMISO output\nMOSI inputtsu(SI)th(SI)tw(SCKL)tw(SCKH)tc(SCK)\ntr(SCK)th(NSS)\ntdis(SO)tsu(NSS)\nta(SO) tv(SO)\nNext bits INLast bit OUT\nFirst bit INFirst bit OUT Next bits OUTth(SO) tf(SCK)\nLast bit IN\nMSv41659V1NSS input\nCPHA=1\nCPOL=0SCK inputCPHA=1\nCPOL=1\nMISO output\nMOSI inputtsu(SI) th(SI)tw(SCKL)tw(SCKH) tsu(NSS)tc(SCK)\nta(SO) tv(SO)\nFirst bit OUT Next bits OUT\nNext bits INLast bit OUTth(SO) tr(SCK)tf(SCK) th(NSS)\ntdis(SO)\nFirst bit IN Last bit IN\nDS8626 Rev 9 125/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 41. SPI timing diagram - master mode\nai14136cSCK OutputCPHA=0\nMOSI\nOUTPUTMISO\nINPUTCPHA=0\nLSB OUTLSB INCPOL=0\nCPOL=1\nBIT1 OUTNSS input\ntc(SCK)\ntw(SCKH)\ntw(SCKL)tr(SCK)\ntf(SCK)\nth(MI)HighSCK OutputCPHA=1\nCPHA=1CPOL=0\nCPOL=1\ntsu(MI)\ntv(MO) th(MO)MSB IN BIT6 IN\nMSB OUT\nElectrical characteristics STM32F405xx, STM32F407xx\n126/203 DS8626 Rev 9I2S interface characteristics\nUnless otherwise specified,  the parameters given in Table  56 for the i2S interface are \nderived from tests performed under the ambient temperature, fPCLKx  frequency and VDD \nsupply voltage condit ions summarized in Table  14, with the followin g configuration:\n• Output speed is set to OSPEEDRy[1:0] = 10\n• Capacitive load C = 30 pF\n• Measurement points are done at CMOS levels: 0.5 VDD\nRefer to Section  5.3.16: I/O port characteristics  for more details on the input/output alternate \nfunction characteristics (CK, SD, WS).\n          \nNote: Refer to the I2S section of RM0090 reference manual for more details on the sampling \nfrequency (FS). fMCK, fCK, and DCK values reflect only the digital peripheral behavior. The \nvalue of these parameters might be slightly impacted by the source clock accuracy. DCK \ndepends mainly on the value of ODD bit. The digital contribution leads to a minimum value \nof I2SDIV / (2 x I2SDIV + ODD) and a maximu m value of (I2SDIV + ODD) / (2 x I2SDIV + \nODD). FS maximum value is supported for each mode/condition.Table 56. I2S dynamic characteristics(1) \nSymbol Parameter Conditions Min Max Unit \nfMCK I2S main clock output -256 x \n8K256 x FS(2)MHz\nfCK I2S clock frequencyMaster data: 32 bits - 64 x FSMHz\nSlave data: 32 bits - 64 x FS\nDCK I2S clock frequency duty cycle Slave receiver 30 70 %\ntv(WS) WS valid time Master mode 0 6\nnsth(WS) WS hold time Master mode 0 -\ntsu(WS) WS setup time Slave mode 1 -\nth(WS) WS hold time Slave mode 0 -\ntsu(SD_MR)Data input setup timeMaster receiver 7.5 -\ntsu(SD_SR) Slave receiver 2 -\nth(SD_MR)Data input hold timeMaster receiver 0 -\nth(SD_SR) Slave receiver 0 -\ntv(SD_ST)  \nth(SD_ST) Data output valid timeSlave transmitter (after enable edge) - 27\ntv(SD_MT) Master transmitter (after enable edge) - 20\nth(SD_MT) Data output hold time Master transmitter (after enable edge) 2.5 -\n1. Guaranteed by characterization.\n2. The maximum value of 256 x FS is 42 MHz (APB1 maximum frequency).\nDS8626 Rev 9 127/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 42. I2S slave timing diagram (Philips protocol) \n1. LSB transmit/receive of the previ ously transmitted byte. No LSB transmi t/receive is sent before the first \nbyte.\nFigure 43. I2S master timing diagram (Philips protocol)(1)\n1. Guaranteed by characterization.\n2. LSB transmit/receive of the previ ously transmitted byte. No LSB transmi t/receive is sent before the first \nbyte.\nElectrical characteristics STM32F405xx, STM32F407xx\n128/203 DS8626 Rev 9USB OTG FS characteristics\nThis interface is present in both the USB OTG HS and USB OTG FS controllers.\n          \n          Table 57. USB OTG FS startup time\nSymbol Parameter  Max  Unit\ntSTARTUP(1)\n1. Guaranteed by design.USB OTG FS transceiver startup time 1 µs\nTable 58. USB OTG FS DC electrical characteristics \nSymbol Parameter Conditions Min.(1)\n1. All the voltages are measured from the local ground potential.Typ. Max.(1)Unit\nInput \nlevelsVDDUSB OTG FS operating \nvoltage-3 . 0(2)\n2. The STM32F405xx and STM32F407xx USB OTG FS functionality is ensured down to 2.7 V but not the full \nUSB OTG FS electrical c haracteristics which are degraded in the 2.7-to-3.0 V VDD voltage range.-3 . 6 V\nVDI(3)\n3. Guaranteed by design.Differential input sensitivityI(USB_FS_DP/DM, \nUSB_HS_DP/DM) 0.2 - -\nV VCM(3)Differential common mode \nrangeIncludes VDI range 0.8 - 2.5\nVSE(3)Single ended receiver \nthreshold- 1.3 - 2.0\nOutput \nlevelsVOL Static output level low RL of 1.5  kΩ to 3.6 V(4)\n4.RL is the load connected on the USB OTG FS drivers-- 0 . 3\nV\nVOH Static output level high RL of 15  kΩ to VSS(4)2.8 - 3.6\nRPDPA11, PA12, PB14, PB15 \n(USB_FS_DP/DM, \nUSB_HS_DP/DM) \nVIN = VDD17 21 24\nkΩPA9, PB13 \n(OTG_FS_VBUS, \nOTG_HS_VBUS) 0.65 1.1 2.0\nRPUPA12, PB15 (USB_FS_DP, \nUSB_HS_DP)VIN = VSS 1.5 1.8 2.1\nPA9, PB13 \n(OTG_FS_VBUS, OTG_HS_VBUS) V\nIN = VSS 0.25 0.37 0.55\nDS8626 Rev 9 129/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 44. USB OTG FS timings: definiti on of data signal rise and fall time\n          \nUSB HS characteristics\nUnless otherwise specified,  the parameters given in Table  62 for ULPI are derived from \ntests performed under the ambient temperature, fHCLK  frequency summarized in Table  61 \nand VDD supply voltage conditions summarized in Table  60, with the following configuration:\n• Output speed is set to OSPEEDRy[1:0] = 10\n• Capacitive load C = 30 pF\n• Measurement points are done at CMOS levels: 0.5VDD.\nRefer to Section Section  5.3.16: I/O port characteristics  for more details on the input/output \ncharacteristics.\n          \n          Table 59. USB OTG FS electrical characteristics(1) \n1. Guaranteed by design.Driver characteristics\nSymbol Parameter Conditions Min Max Unit\ntr Rise time(2)\n2.Measured from 10% to 90% of the data signal. For mo re detailed informations, please refer to USB \nSpecification - Chapter 7 (version 2.0).CL = 50 pF 42 0 n s\ntf Fall time(2)CL = 50 pF 4 20 ns\ntrfm Rise/ fall time matching tr/tf 90 110 %\nVCRS Output signal crosso ver voltage - 1.3 2.0 V\nTable 60. USB HS DC elect rical characteristics \nSymbol Parameter Min.(1)\n1. All the voltages are measured from the local ground potential.Max.(1)Unit\nInput level VDD USB OTG HS operating voltage 2.7 3.6 V\nTable 61. USB HS clock timing parameters(1)\nParameter Symbol Min Nominal Max Unit\nfHCLK  value to guarantee proper operation of \nUSB HS interface -3 0 - - M H z\nFrequency (first transition) 8-bit ±10% FSTART_8BIT 54 60 66 MHzai14137bCross over\npoints\nDifferential\ndata lines\nVCRS\nVSS\ntf tr\nElectrical characteristics STM32F405xx, STM32F407xx\n130/203 DS8626 Rev 9          \nFigure 45. ULPI timing diagramFrequency (steady state) ±500 ppm FSTEADY 59.97 60 60.03 MHz\nDuty cycle (first transition) 8-bit ±10% DSTART_8BIT 40 50 60 %\nDuty cycle (steady state) ±500 ppm DSTEADY 49.975 50 50.025 %\nTime to reach the st eady state frequency and \nduty cycle after t he first transitionTSTEADY -- 1 . 4 m s\nClock startup time after the \nde-assertion of SuspendMPeripheral TSTART_DEV -- 5 . 6\nms\nHost TSTART_HOST -- -\nPHY preparation time after the first transition \nof the input clockTPREP -- - µ s\n1. Guaranteed by design.\nTable 62. ULPI timing\nParameter SymbolValue(1)\n1. VDD = 2.7 V to 3.6 V and TA = –40 to 85 °C.Unit\nMin. Max.\nControl in (ULPI_DIR) setup time\ntSC-2 . 0\nnsControl in (ULPI_NXT) setup time - 1.5\nControl in (ULPI_DIR, ULPI_NXT) hold time  tHC 0-\nData in setup time tSD -2 . 0\nData in hold time tHD 0-\nControl out (ULPI_STP) setup time and hold time tDC -9 . 2\nData out available from clock rising edge tDD -1 0 . 7Table 61. USB HS clock timing parameters(1)\nParameter Symbol Min Nominal Max Unit\nClock\nControl In\n(ULPI_DIR,\nULPI_NXT)\ndata In\n(8-bit)\nControl out\n(ULPI_STP)\ndata out\n(8-bit)tDDtDCtHD tSDtHC tSC\nai17361ctDC\nDS8626 Rev 9 131/203STM32F405xx, STM32F407xx Electrical characteristics\nEthernet characteristics\nUnless otherwise specified,  the parameters given in Table  64, Table  65 and Table  66 for \nSMI, RMII and MII are derived from tests performed under the ambient temperature, fHCLK \nfrequency summarized in Table  14 and VDD supply voltage conditions summarized in \nTable  63, with the following configuration:\n• Output speed is set to OSPEEDRy[1:0] = 10\n• Capacitive load C = 30 pF\n• Measurement points are done at CMOS levels: 0.5VDD.\nRefer to Section  5.3.16: I/O port characteristics  for more details on the input/output \ncharacteristics.\n          \nTable  64 gives the list of Ethernet MAC signals fo r the SMI (station management interface) \nand Figure  46 shows the corresponding timing diagram.\nFigure 46. Ethernet SMI timing diagram\n          \nTable  65 gives the list of Ethernet MAC signals for the RMII and Figure  47 shows the \ncorresponding timing diagram.Table 63. Ethernet DC electrical characteristics \nSymbol Parameter Min.(1)\n1. All the voltages are measured from the local ground potential.Max.(1)Unit\nInput level VDD Ethernet operatin g voltage 2.7 3.6 V\nTable 64. Dynamic characteristics: Ethernet MAC signals for SMI(1) \n1. Guaranteed by characterization.Symbol Parameter Min Typ Max Unit\ntMDC MDC cycle time(2.38 MHz) 411 420 425\nnsTd(MDIO) Write data valid time 6 10 13\ntsu(MDIO) Read data setup time 12 - -\nth(MDIO) Read data hold time 0 - -MS31384V1ETH_MDC\nETH_MDIO(O)\nETH_MDIO(I)tMDC\ntd(MDIO)\ntsu(MDIO) th(MDIO)\nElectrical characteristics STM32F405xx, STM32F407xx\n132/203 DS8626 Rev 9Figure 47. Ethernet RMII timing diagram\n          \nTable  66 gives the list of Ethernet MAC signals for MII and Figure  47 shows the \ncorresponding timing diagram.\nFigure 48. Ethernet MII timing diagramTable 65. Dynamic characteristics: Ethernet MAC signals for RMII\nSymbol Rating Min Typ Max Unit\ntsu(RXD) Receive data setup time 2 - - ns\ntih(RXD) Receive data hold time 1 - - ns\ntsu(CRS) Carrier sense set-up time 0.5 - - ns\ntih(CRS) Carrier sense hold time 2 - - ns\ntd(TXEN) Transmit enable valid delay time 8 9.5 11 ns\ntd(TXD) Transmit data valid delay time 8.5 10 11.5 nsRMII_REF_CLK\nRMII_TX_EN\nRMII_TXD[1:0]\nRMII_RXD[1:0]\nRMII_CRS_DVtd(TXEN)\ntd(TXD)\ntsu(RXD)\ntsu(CRS)tih(RXD)\ntih(CRS)\nai15667\nDS8626 Rev 9 133/203STM32F405xx, STM32F407xx Electrical characteristics\n          \n5.3.20 CAN (controller ar ea network) interface\nRefer to Section  5.3.16: I/O port characteristics  for more details on the input/output alternate \nfunction characteristics (CANTX and CANRX).\n5.3.21 12-bit ADC characteristics\nUnless otherwise specified,  the parameters given in Table  67 are derived from tests \nperformed under the ambient temperature, fPCLK2 frequency and VDDA supply voltage \nconditions su mmarized in Table  14.\n          Table 66. Dynamic characteristics: Ethernet MAC signals for MII(1) \n1. Guaranteed by characterization.Symbol Parameter Min Typ Max Unit\ntsu(RXD) Receive data setup time 9 -\nnstih(RXD) Receive data hold time 10 -\ntsu(DV) Data valid setup time 9 -\ntih(DV) Data valid hold time 8 -\ntsu(ER) Error setup time 6 -\ntih(ER) Error hold time 8 -\ntd(TXEN) Transmit enable valid delay time 0 10 14\ntd(TXD) Transmit data valid delay time 0 10 15\nTable 67. ADC characteristics \nSymbol Parameter  Conditions Min Typ Max Unit\nVDDA Power supply - 1.8(1)-3 . 6\nV VREF+ Positive refer ence voltage - 1.8(1)(2)(3)-VDDA\nVREF −Negative reference voltage - - 0 -\nfADC ADC clock frequencyVDDA = 1.8(1)(3) to \n2.4 V0.6 15 18 MHz\nVDDA = 2.4 to 3.6 V(3)0.6 30 36 MHz\nfTRIG(4)External trigger frequencyfADC = 30 MHz, \n12-bit resolution- - 1764 kHz\n-- - 1 7 1 / fADC\nVAIN Conversion voltage range(5)-0 (VSSA or VREF- \ntied to ground)-VREF+ V\nRAIN(4)External input impedanceSee Equation 1  for \ndetails-- 5 0 κΩ\nRADC(4)(6)Sampling switch resistance - - - 6 κΩ\nCADC(4) Internal sample and hold \ncapacitor -- 4 - p F\nElectrical characteristics STM32F405xx, STM32F407xx\n134/203 DS8626 Rev 9tlat(4) Injection trigger conversion \nlatencyfADC = 30 MHz - - 0.100 µs\n-- 3(7)1/fADC\ntlatr(4) Regular trigger conversion \nlatencyfADC = 30 MHz - - 0.067 µs\n-- 2(7)1/fADC\ntS(4)Sampling time fADC = 30 MHz 0.100 - 16 µs\n- 3 - 480 1/fADC\ntSTAB(4)Power-up time - - 2 3 µs\ntCONV(4)Total conversion time (including \nsampling time)fADC = 30 MHz\n12-bit resolution0.50 - 16.40 µs\nfADC = 30 MHz\n10-bit resolution0.43 - 16.34 µs\nfADC = 30 MHz\n8-bit resolution0.37 - 16.27 µs\nfADC = 30 MHz\n6-bit resolution0.30 - 16.20 µs\n9 to 492 (tS for sampling +n-bit re solution for successive \napproximation)1/fADC\nfS(4)Sampling rate \n(fADC = 30 MHz, and  \ntS = 3 ADC cycles)12-bit resolution\nSingle ADC- - 2 Msps\n12-bit resolution\nInterleave Dual ADC \nmode- - 3.75 Msps\n12-bit resolution\nInterleave Triple ADC \nmode- - 6 Msps\nIVREF+(4)ADC VREF DC current \nconsumption in conversion \nmode - - 300 500 µA\nIVDDA(4)ADC VDDA DC current \nconsumption in conversion \nmode -- 1 . 6 1 . 8 m A\n1. VDD/VDDA minimum value of 1.7 V is obtained when the device operates in reduced tem perature range, and with the use of \nan external power supply supervisor (refer to Section : Internal reset OFF ).\n2. It is recommended to maintain the voltage difference between VREF+ and VDDA below 1.8 V.\n3. VDDA -VREF+ < 1.2 V.\n4. Guaranteed by characterization.5. V\nREF+ is internally connected to VDDA and VREF- is internally connected to VSSA.\n6. RADC maximum value is given for VDD=1.8 V, and minimum value for VDD=3.3 V.\n7. For external triggers, a delay of 1/fPCLK2  must be added to the latency specified in Table 67 .Table 67. ADC characteristics (continued)\nSymbol Parameter  Conditions Min Typ Max Unit\nDS8626 Rev 9 135/203STM32F405xx, STM32F407xx Electrical characteristics\nEquation 1: RAIN max formula\nThe formula above ( Equation 1 ) is used to dete rmine the maximum external impedance \nallowed for an error below 1/4 of LSB. N = 12 (from 12-bit resolution) and k is the number of \nsampling periods defined in the ADC_SMPR1 register.\n          a\nNote: ADC accuracy vs. negative injection current: injecting a negative current on any analog \ninput pins should be avoided as this signifi cantly reduces the accuracy of the conversion \nbeing performed on another analog input. It is  recommended to add a Schottky diode (pin to \nground) to analog pins which may potentially inject negative currents.  \nAny positive injection current within the limits specified for IINJ(PIN)  and SIINJ(PIN)  in \nSection  5.3.16  does not affect the ADC accuracy.Table 68. ADC accuracy at fADC = 30 MHz\nSymbol Parameter Test conditions Typ Max(1)\n1. Guaranteed by characterization.Unit\nET Total unadjusted error\nfPCLK2  = 60 MHz,  \nfADC = 30 MHz, RAIN < 10 k Ω, \nVDDA = 1.8(2) to 3.6 V\n2. VDD/VDDA minimum value of 1.7 V is obtained when t he device operates in reduced temperature range, \nand with the use of an external po wer supply supervisor (refer to Section : Internal reset OFF ).±2 ±5\nLSBEO Offset error ±1.5 ±2.5\nEG Gain error ±1.5 ±3\nED Differential linearity error ±1 ±2\nEL Integral linearity error ±1.5 ±3RAINk0 . 5–()\nfADC CADC 2N2+()ln× ×-------------------------------------------------------------- RADC– =\nElectrical characteristics STM32F405xx, STM32F407xx\n136/203 DS8626 Rev 9Figure 49. ADC accuracy characteristics\n1. See also Table 68 .\n2. Example of an actual transfer curve.3. Ideal transfer curve.\n4. End point correlation line.\n5. E\nT = Total Unadjusted Error: maximum deviation be tween the actual and the ideal transfer curves.  \nEO = Offset Error: deviation between the fi rst actual transition and the first ideal one.  \nEG = Gain Error: deviation between the last  ideal transition and the last actual one.  \nED = Differential Linearity Error: maximum deviation between actual steps and the ideal one.  \nEL = Integral Linearity Error: maximum deviati on between any actual transition and the end point \ncorrelation line.\nFigure 50. Typical connection diagram using the ADC\n1. Refer to Table 67  for the values of RAIN, RADC and CADC.\n2. Cparasitic  represents the capacitance of the PCB (dependent on soldering and PCB layout quality) plus the \npad capacitance (roughly 5  pF). A high Cparasitic  value downgrades conversion accuracy. To remedy this, \nfADC should be reduced.ai14395cEOEG\n1L SB ID EAL4095\n4094\n4093\n5\n4\n3\n2\n1\n07\n6\n1 2 3 456 7 4093 4094 4095 4096(1)(2)\nET\nEDEL(3)\nVDD A VSS AVREF+\n4096(or              depending on package)]VDDA\n4096[1LSBIDEAL = \nai17534STM32F VDD\nAINx\nIL±1 μA0.6 VVTRAIN(1)\nCparasiticVAIN0.6 VVT\nRADC(1)\nCADC (1)12-bit\nconverterSample and hold ADC \nconverter\nDS8626 Rev 9 137/203STM32F405xx, STM32F407xx Electrical characteristics\nGeneral PCB design guidelines\nPower supply decoupling should be performed as shown in Figure  51 or Figure  52, \ndepending on whether VREF+ is connected to VDDA or not. The 10 nF capacitors should be \nceramic (good quality). They should be placed  them as close as possible to the chip.\nFigure 51. Power supply and reference decoupling (VREF+ not connected to VDDA)\n1. VREF+ and VREF– inputs are both available on UFBGA176. VREF+ is also available on LQFP100, LQFP144, \nand LQFP176. When VREF+ and VREF– are not available, they ar e internally connected to VDDA and VSSA.STM32F\n1 μF // 10 nF\n1 μF // 10 nFVREF+ (1)\nVDDA\nVSSA/VREF- (1)\nai17535b\nElectrical characteristics STM32F405xx, STM32F407xx\n138/203 DS8626 Rev 9Figure 52. Power supply and reference decoupling  (VREF+ connected to VDDA)\n1. VREF+ and VREF– inputs are both available on UFBGA176. VREF+ is also available on LQFP100, LQFP144, \nand LQFP176. When VREF+ and VREF– are not available, they ar e internally connected to VDDA and VSSA.\n5.3.22 Temperature sensor characteristics\n          \n          STM32F\n1 μF // 10 nF\nai17536cVREF+/VDDA\nVREF-/VSSA(1)(1)\nTable 69. Temperature sensor characteristics \nSymbol Parameter Min Typ Max Unit\nTL(1)VSENSE  linearity with temperature - ±1 ±2° C\nAvg_Slope(1)Average slope - 2.5 mV/°C\nV25(1)Voltage at 25 °C - 0.76 V\ntSTART(2)Startup time - 6 10 µs\nTS_temp(2)ADC sampling time when reading the temperature (1 °C accuracy) 10 - - µs\n1. Guaranteed by characterization.\n2. Guaranteed by design.\nTable 70. Temperature sensor calibration values \nSymbol Parameter Memory address\nTS_CAL1 TS ADC raw data acquired at temperature of 30 °C, VDDA=3.3 V 0x1FFF 7A2C - 0x1FFF 7A2D\nTS_CAL2 TS ADC raw data acquired at temperature of 110 °C, VDDA=3.3 V 0x1FFF 7A2E - 0x1FFF 7A2F\nDS8626 Rev 9 139/203STM32F405xx, STM32F407xx Electrical characteristics\n5.3.23 VBAT monitoring characteristics\n          \n5.3.24 Embedded reference voltage\nThe parameters given in Table  72 are derived from tests performed under ambient \ntemperature and VDD supply voltage conditions summarized in Table  14.\n           \n          \n5.3.25 DAC electri cal characteristics\n          Table 71. VBAT monitoring characteristics \nSymbol Parameter Min Typ Max Unit\nR Resistor bridge for VBAT -5 0-K Ω \nQ Ratio on VBAT measurement - 2 -\nEr(1)Error on Q –1 - +1 %\nTS_vbat(2)(2) ADC sampling time when reading the VBAT  \n1 mV accuracy 5-- µ s\n1. Guaranteed by design.\n2. Shortest sampling time can be determined in the application by multiple iterations.\nTable 72. Embedded internal reference voltage\nSymbol Parameter Conditions Min Typ Max Unit\nVREFINT Internal reference voltage –40 °C < TA < +105 °C 1.18 1.21 1.24 V\nTS_vrefint(1) ADC sampling time when reading the \ninternal reference voltage-1 0 - - µ s\nVRERINT_s(2)Internal reference voltage spread over the \ntemperature rangeVDD = 3 V - 3 5 mV\nTCoeff(2)Temperature coefficient - - 30 50 ppm/°C\ntSTART(2)Startup time - - 6 10 µs\n1. Shortest sampling time can be determined in  the application by multiple iterations.\n2. Guaranteed by design.\nTable 73. Internal reference voltage calibration values \nSymbol Parameter Memory address\nVREFIN_CAL Raw data acquired at temperature of 30 °C, VDDA=3.3 V 0x1FFF 7A2A - 0x1FFF 7A2B\nTable 74. DAC characteristics \nSymbol Parameter Min Typ Max Unit Comments\nVDDA Analog supply voltage 1.8(1)-3 . 6  V\nVREF+ Reference supply voltage 1.8(1)-3 . 6V VREF+  ≤ VDDA\nVSSA Ground 0 - 0 V\nElectrical characteristics STM32F405xx, STM32F407xx\n140/203 DS8626 Rev 9RLOAD(2) Resistive load with buffer \nON5- - k Ω\nRO(2) Impedance output with \nbuffer OFF-- 1 5 k ΩWhen the buffer is OFF, the \nMinimum resistive load between \nDAC_OUT and VSS to have a 1% \naccuracy is 1.5 M Ω\nCLOAD(2)Capacitive load - - 50 pFMaximum capacitive load at \nDAC_OUT pin (when the buffer is \nON).\nDAC_OUT \nmin(2)Lower DAC_OUT voltage with buffer ON0.2 - - VIt gives the maximum output \nexcursion of the DAC.\nIt corresponds to 12-bit input code \n(0x0E0) to (0xF1C) at V\nREF+ = \n3.6 V and (0x1C7) to (0xE38) at \nVREF+ = 1.8 VDAC_OUT \nmax(2)Higher DAC_OUT voltage with buffer ON-- V\nDDA – 0.2 V\nDAC_OUT \nmin(2)Lower DAC_OUT voltage with buffer OFF-0 . 5 - m V\nIt gives the maximum output \nexcursion of the DAC.DAC_OUT \nmax\n(2)Higher DAC_OUT voltage with buffer OFF-- V\nREF+ – 1LSB V\nIVREF+(4)DAC DC VREF current \nconsumption in quiescent \nmode (Standby mode)- 170 240\nµAWith no load, worst code (0x800) \nat VREF+ = 3.6 V in terms of DC \nconsumption on the inputs\n-5 0 7 5With no load, worst code (0xF1C) \nat VREF+ = 3.6 V in terms of DC \nconsumption on the inputs\nIDDA(4)DAC DC VDDA current \nconsumption in quiescent mode\n(3)- 280 380 µAWith no load, middle code (0x800) \non the inputs\n- 475 625 µAWith no load, worst code (0xF1C) \nat VREF+ = 3.6 V in terms of DC \nconsumption on the inputs\nDNL(4)Differential non linearity \nDifference between two \nconsecutive code-1LSB)-- ± 0 . 5  L S BGiven for the DAC in 10-bit \nconfiguration.\n-- ± 2  L S BGiven for the DAC in 12-bit \nconfiguration.\nINL(4)Integral non linearity \n(difference between measured value at Code i \nand the value at Code i on a \nline drawn between Code 0 and last Code 1023)-- ± 1 L S BGiven for the DAC in 10-bit \nconfiguration.\n-- ± 4 L S BGiven for the DAC in 12-bit \nconfiguration.Table 74. DAC characteristics (continued)\nSymbol Parameter Min Typ Max Unit Comments\nDS8626 Rev 9 141/203STM32F405xx, STM32F407xx Electrical characteristics\nOffset(4)Offset error\n(difference between \nmeasured value at Code \n(0x800) and the ideal value \n= VREF+/2)-- ± 1 0 m VGiven for the DAC in 12-bit \nconfiguration \n-- ± 3 L S BGiven for the DAC in 10-bit at \nVREF+ = 3.6 V\n-- ± 1 2 L S BGiven for the DAC in 12-bit at \nVREF+ = 3.6 V\nGain \nerror(4) Gain error - - ±0.5 %Given for the DAC in 12-bit \nconfiguration\ntSETTLING(4)Settling time (full scale: for a \n10-bit input code transition \nbetween the lowest and the \nhighest input codes when DAC_OUT reaches final \nvalue ±4LSB-3 6 µ sC\nLOAD  ≤  50 pF,  \nRLOAD  ≥ 5 kΩ\nTHD(4)Total Harmonic Distortion\nBuffer ON-- - d BCLOAD  ≤  50 pF,  \nRLOAD  ≥ 5 kΩ\nUpdate \nrate(2)Max frequency for a correct \nDAC_OUT change when \nsmall variation in the input code (from code i to i+1LSB)-- 1 M S / sC\nLOAD  ≤  50 pF,  \nRLOAD  ≥ 5 kΩ\ntWAKEUP(4)Wakeup time from off state \n(Setting the ENx bit in the \nDAC Control register)- 6.5 10 µsCLOAD  ≤  50 pF, RLOAD  ≥ 5 kΩ\ninput code between lowest and \nhighest possible ones.\nPSRR+ (2)Power supply rejection ratio \n(to VDDA) (static DC \nmeasurement)- –67 –40 dB No RLOAD , CLOAD  = 50 pF\n1. VDD/VDDA minimum value of 1.7 V is obtained when the device operates in reduced temperature range, and with the use of \nan external power supply supervisor (refer to Section : Internal reset OFF ).\n2. Guaranteed by design.3. The quiescent mode corresponds to a state where the DAC maintains a stable output level to ensure that no dynamic \nconsumption occurs.\n4. Guaranteed by characterization.Table 74. DAC characteristics (continued)\nSymbol Parameter Min Typ Max Unit Comments\nElectrical characteristics STM32F405xx, STM32F407xx\n142/203 DS8626 Rev 9Figure 53. 12-bit buffered /non-buffered DAC\n1. The DAC integrates an output buffer that can be used to reduce the output impedance and to drive external \nloads directly without the use of an external oper ational amplifier. The buffer can be bypassed by \nconfiguring the BOFFx bit in the DAC_CR register.\n5.3.26 FSMC characteristics\nUnless otherwise specified,  the parameters given in Table  75 to Table  86 for the FSMC \ninterface are derived from tests performed under the ambient temperature, fHCLK  frequency \nand VDD supply voltage conditions summarized in Table  14, with the following configuration:\n• Output speed is set to OSPEEDRy[1:0] = 10\n• Capacitive load C = 30 pF\n• Measurement points are done at CMOS levels: 0.5VDD\nRefer to Section Section  5.3.16: I/O port characteristics  for more details on the input/output \ncharacteristics.\nAsynchronous waveforms and timings\nFigure  54 through Figure  57 represent asynchronous waveforms and Table  75 through \nTable  78 provide the corresponding timings. The re sults shown in these tables are obtained \nwith the following FSMC configuration:\n• AddressSetupTime = 1\n• AddressHoldTime = 0x1\n• DataSetupTime = 0x1\n• BusTurnAroundDuration = 0x0\nIn all timing tables, the THCLK is the HCLK clock period. RL\nCLBuffered/Non-buffered DAC\nDAC_OUTxBuffer(1)\n12-bit \ndigital to \nanalog \nconverter \nai17157V3\nDS8626 Rev 9 143/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 54. Asynchronous non-multiplexed SRAM/PSRAM/NOR read waveforms\n1. Mode 2/B, C and D only. In Mode 1, FSMC_NADV is not used.\n          Table 75. Asynchronous non-multiple xed SRAM/PSRAM/NOR read timings(1)(2)\n1. CL = 30 pF.\n2. Guaranteed by characterization.Symbol Parameter Min Max Unit\ntw(NE) FSMC_NE low time 2THCLK –0.5 2 THCLK +1 ns\ntv(NOE_NE) FSMC_NEx low to FSMC_NOE low  0.5 3 ns\ntw(NOE) FSMC_NOE low time 2THCLK –2 2THCLK + 2 ns\nth(NE_NOE) FSMC_NOE high to FSMC_NE high hold time  0 - ns\ntv(A_NE) FSMC_NEx low to FSMC_A valid - 4.5 ns\nth(A_NOE) Address hold time after FSMC_NOE high 4 - ns\ntv(BL_NE) FSMC_NEx low to FSMC_BL valid - 1.5 ns\nth(BL_NOE) FSMC_BL hold time after FSMC_NOE high  0 - ns\ntsu(Data_NE) Data to FSMC_NEx high setup time THCLK +4 - ns\ntsu(Data_NOE) Data to FSMC_NOEx high setup time THCLK +4 - ns\nth(Data_NOE) Data hold time after FSMC_NOE high  0 - ns\nth(Data_NE) Data hold time after FSMC_NEx high  0 - ns\ntv(NADV_NE) FSMC_NEx low to FSMC_NADV low - 2 ns\ntw(NADV) FSMC_NADV low time - THCLK nsDataFSMC_NE\nFSMC_NBL[1:0]\nFSMC_D[15:0]tv(BL_NE)\nth(Data_NE)FSMC_NOE\nAddressFSMC_A[25:0]tv(A_NE)FSMC_NWE\ntsu(Data_NE)tw(NE)\nai14991cw(NOE)t tv(NOE_NE) th(NE_NOE)\nth(Data_NOE)th(A_NOE)\nth(BL_NOE)\ntsu(Data_NOE)\nFSMC_NADV(1)tv(NADV_NE)\ntw(NADV)\nElectrical characteristics STM32F405xx, STM32F407xx\n144/203 DS8626 Rev 9Figure 55. Asynchronous non-multiplexed SRAM/PSRAM/NOR write waveforms\n1. Mode 2/B, C and D only. In Mode 1, FSMC_NADV is not used.\n          Table 76. Asynchronous non-multiple xed SRAM/PSRAM/NOR write timings(1)(2)\n1. CL = 30 pF.\n2. Guaranteed by characterization.Symbol Parameter Min Max Unit\ntw(NE) FSMC_NE low time 3THCLK 3THCLK + 4 ns\ntv(NWE_NE) FSMC_NEx low to FSMC_NWE low THCLK –0.5 THCLK +0.5 ns\ntw(NWE) FSMC_NWE low time THCLK –1 THCLK +2 ns\nth(NE_NWE) FSMC_NWE high to FSMC_NE high hold time THCLK –1  - ns\ntv(A_NE) FSMC_NEx low to FSMC_A valid  - 0 ns\nth(A_NWE) Address hold time after FSMC_NWE high THCLK – 2  - ns\ntv(BL_NE) FSMC_NEx low to FSMC_BL valid  - 1.5 ns\nth(BL_NWE) FSMC_BL hold time after FSMC_NWE high THCLK – 1  - ns\ntv(Data_NE) Data to FSMC_NEx lo w to Data valid  - THCLK +3 ns\nth(Data_NWE) Data hold time after FSMC_NWE high THCLK –1  - ns\ntv(NADV_NE) FSMC_NEx low to FSMC_NADV low  - 2 ns\ntw(NADV) FSMC_NADV low time  - THCLK +0.5 nsNBL\nDataFSMC_NEx\nFSMC_NBL[1:0]\nFSMC_D[15:0]tv(BL_NE)\nth(Data_NWE)FSMC_NOE\nAddress FSMC_A[25:0]tv(A_NE)tw(NWE)\nFSMC_NWEtv(NWE_NE) th(NE_NWE)\nth(A_NWE)\nth(BL_NWE)\ntv(Data_NE)tw(NE)\nai14990FSMC_NADV (1)tv(NADV_NE)\ntw(NADV)\nDS8626 Rev 9 145/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 56. Asynchronous multiplexed PSRAM/NOR read waveforms\n          NBL\nDataFSMC_NBL[1:0]\nFSMC_ AD[15:0]tv(BL_NE)\nth(Data_NE)AddressFSMC_A[25:16]tv(A_NE)FSMC_NWE\ntv(A_NE)\nai14892bAddress\nFSMC_NADVtv(NADV_NE)\ntw(NADV)tsu(Data_NE)\nth(AD_NADV)FSMC_NE\nFSMC_NOEtw(NE)\ntw(NOE)tv(NOE_NE) th(NE_NOE)\nth(A_NOE)\nth(BL_NOE)\ntsu(Data_NOE) th(Data_NOE)\nTable 77. Asynchronous multip lexed PSRAM/NOR read timings(1)(2) \nSymbol Parameter Min Max Unit\ntw(NE) FSMC_NE low time 3THCLK –1 3THCLK +1 ns\ntv(NOE_NE) FSMC_NEx low to FSMC_NOE low 2THCLK –0.5 2THCLK +0.5 ns\ntw(NOE) FSMC_NOE low time  THCLK –1 THCLK +1 ns\nth(NE_NOE) FSMC_NOE high to FSMC_NE high hold time  0  - ns\ntv(A_NE) FSMC_NEx low to FSMC_A valid  - 3 ns\ntv(NADV_NE) FSMC_NEx low to FSMC_NADV low  1 2 ns\ntw(NADV) FSMC_NADV low time  THCLK – 2 THCLK +1 ns\nth(AD_NADV) FSMC_AD(adress) valid hold time after FSMC_NADV high) THCLK  -n s\nth(A_NOE) Address hold time after FSMC_NOE high THCLK –1  - ns\nth(BL_NOE) FSMC_BL time after FSMC_NOE high 0  - ns\ntv(BL_NE) FSMC_NEx low to FSMC_BL valid - 2 ns\ntsu(Data_NE) Data to FSMC_NEx high setup time THCLK +4  - ns\ntsu(Data_NOE) Data to FSMC_NOE high setup time THCLK +4  - ns\nth(Data_NE) Data hold time after FSMC_NEx high 0 - ns\nth(Data_NOE) Data hold time after FSMC_NOE high 0 - ns\n1. CL = 30 pF.\n2. Guaranteed by characterization.\nElectrical characteristics STM32F405xx, STM32F407xx\n146/203 DS8626 Rev 9Figure 57. Asynchronous multip lexed PSRAM/NOR write waveforms\n          Table 78. Asynchrono us multiplexed PSRAM /NOR write timings(1)(2)\n1. CL = 30 pF.Symbol Parameter Min Max Unit\ntw(NE) FSMC_NE low time   4THCLK –0.5  4THCLK +3 ns\ntv(NWE_NE) FSMC_NEx low to FSMC_NWE low THCLK –0.5 THCLK  -0.5 ns\ntw(NWE) FSMC_NWE low tim e  2THCLK –0.5 2THCLK +3 ns\nth(NE_NWE) FSMC_NWE high to FSMC_NE high hold time THCLK -n s\ntv(A_NE) FSMC_NEx low to FSMC_A valid - 0 ns\ntv(NADV_NE) FSMC_NEx low to FSMC_NADV low 1 2 ns\ntw(NADV) FSMC_NADV low time THCLK – 2 THCLK + 1 ns\nth(AD_NADV)FSMC_AD(address) valid hold time after \nFSMC_NADV high)THCLK –2 - ns\nth(A_NWE) Address hold time after FSMC_NWE high  THCLK -n s\nth(BL_NWE) FSMC_BL hold time after FSMC_NWE high THCLK –2 - ns\ntv(BL_NE) FSMC_NEx low to FSMC_BL valid - 1.5 ns\ntv(Data_NADV) FSMC_NADV high to Data valid -  THCLK –0.5 ns\nth(Data_NWE) Data hold time after FSMC_NWE high  THCLK -n sNBL\nDataFSMC_NEx\nFSMC_NBL[1:0]\nFSMC_AD[15:0]tv(BL_NE)\nth(Data_NWE)FSMC_NOE\nAddressFSMC_A[25:16]tv(A_NE)tw(NWE)\nFSMC_NWEtv(NWE_NE) th(NE_NWE)\nth(A_NWE)\nth(BL_NWE)\ntv(A_NE)tw(NE)\nai14891BAddress\nFSMC_NADVtv(NADV_NE)\ntw(NADV)tv(Data_NADV)\nth(AD_NADV)\nDS8626 Rev 9 147/203STM32F405xx, STM32F407xx Electrical characteristics\nSynchronous waveforms and timings\nFigure  58 through Figure  61 represent synchronous waveforms and Table  80 through \nTable  82 provide the corresponding timings. The re sults shown in these tables are obtained \nwith the following FSMC configuration:\n• BurstAccessMode = FSMC_BurstAccessMode_Enable;\n• MemoryType = FSMC_MemoryType_CRAM;\n• WriteBurst = FSMC_WriteBurst_Enable;\n• CLKDivision = 1; (0 is not supported, see the STM32F40xxx/41xxx reference manual)\n• DataLatency = 1 for NOR Flash; DataLatency = 0 for PSRAM\nIn all timing tables, the THCLK is the HCLK clock period (with maximum \nFSMC_CLK  = 60 MHz). \nFigure 58. Synchronous multiplexed NOR/PSRAM read timings2. Guaranteed by characterization.\nFSMC_CLK\nFSMC_NEx\nFSMC_NADV\nFSMC_A[25:16]\nFSMC_NOE\nFSMC_AD[15:0] AD[15:0] D1 D2\nFSMC_NWAIT\n(WAITCFG = 1b, WAITPOL + 0b)\nFSMC_NWAIT\n(WAITCFG = 0b, WAITPOL + 0b)tw(CLK)tw(CLK)\nData latency = 0BUSTURN = 0\ntd(CLKL-NExL)td(CLKL-NExH)\ntd(CLKL-NADVL)\ntd(CLKL-AV)td(CLKL-NADVH)\ntd(CLKL-AIV)\ntd(CLKL-NOEL)td(CLKL-NOEH)\ntd(CLKL-ADV)td(CLKL-ADIV)\ntsu(ADV-CLKH)th(CLKH-ADV)\ntsu(ADV-CLKH) th(CLKH-ADV)\ntsu(NWAITV-CLKH) th(CLKH-NWAITV)\ntsu(NWAITV-CLKH) th(CLKH-NWAITV)\ntsu(NWAITV-CLKH)th(CLKH-NWAITV)\nai14893g\nElectrical characteristics STM32F405xx, STM32F407xx\n148/203 DS8626 Rev 9          Table 79. Synchronous multiplexed NOR/PSRAM read timings(1)(2) \n1. CL = 30 pF.\n2. Guaranteed by characterization.Symbol Parameter Min Max Unit\ntw(CLK) FSMC_CLK period 2THCLK  -n s\ntd(CLKL-NExL) FSMC_CLK low to FSMC_NEx low (x=0..2)  - 0 ns\ntd(CLKL-NExH) FSMC_CLK low to FSMC_NEx high (x= 0…2) 2  - ns\ntd(CLKL-NADVL) FSMC_CLK low to FSMC_NADV low  - 2 ns\ntd(CLKL-NADVH) FSMC_CLK low to FSMC_NADV high 2  - ns\ntd(CLKL-AV) FSMC_CLK low to FSMC_Ax valid (x=16…25)  - 0 ns\ntd(CLKL-AIV) FSMC_CLK low to FSMC_Ax invalid (x=16…25) 0  - ns\ntd(CLKL-NOEL) FSMC_CLK low to FSMC_NOE low  - 0 ns\ntd(CLKL-NOEH) FSMC_CLK low to FSMC_NOE high 2  - ns\ntd(CLKL-ADV) FSMC_CLK low to FSMC_AD[15:0] valid  - 4.5 ns\ntd(CLKL-ADIV) FSMC_CLK low to FSMC_AD[15:0] invalid 0 - ns\ntsu(ADV-CLKH) FSMC_A/D[15:0] valid data before FSMC_CLK high 6  - ns\nth(CLKH-ADV) FSMC_A/D[15:0] valid data after FSMC_CLK high 0  - ns\ntsu(NWAIT-CLKH) FSMC_NWAIT valid before FSMC_CLK high 4 - ns\nth(CLKH-NWAIT) FSMC_NWAIT valid after FSMC_CLK high 0 - ns\nDS8626 Rev 9 149/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 59. Synchronous multiplexed PSRAM write timings\n          Table 80. Synchronous multiplexed PSRAM write timings(1)(2) \nSymbol Parameter Min Max Unit\ntw(CLK) FSMC_CLK period 2THCLK  -n s\ntd(CLKL-NExL) FSMC_CLK low to FSMC_NEx low (x=0..2)  - 1 ns\ntd(CLKL-NExH) FSMC_CLK low to FSMC_NEx high (x= 0…2) 1  - ns\ntd(CLKL-NADVL) FSMC_CLK low to FSMC_NADV low  - 0 ns\ntd(CLKL-\nNADVH)FSMC_CLK low to FSMC_NADV high 0  - ns\ntd(CLKL-AV) FSMC_CLK low to FSMC_Ax valid (x=16…25)  - 0 ns\ntd(CLKL-AIV) FSMC_CLK low to FSMC_Ax invalid (x=16…25) 8  - ns\ntd(CLKL-NWEL) FSMC_CLK low to FSMC_NWE low  - 0.5 ns\ntd(CLKL-NWEH) FSMC_CLK low to FSMC_NWE high 0  - ns\ntd(CLKL-ADIV) FSMC_CLK low to FSMC_AD[15:0] invalid 0  - ns\ntd(CLKL-DATA)FSMC_A/D[15:0] valid data after FSMC_CLK \nlow -3 n sFSMC_CLK\nFSMC_NEx\nFSMC_NADV\nFSMC_A[25:16]\nFSMC_NWE\nFSMC_AD[15:0] AD[15:0] D1 D2\nFSMC_NWAIT\n(WAITCFG = 0b, WAITPOL + 0b)tw(CLK)tw(CLK)\nData latency = 0BUSTURN = 0\ntd(CLKL-NExL) td(CLKL-NExH)\ntd(CLKL-NADVL)\ntd(CLKL-AV)td(CLKL-NADVH)\ntd(CLKL-AIV)\ntd(CLKL-NWEH)td(CLKL-NWEL)\ntd(CLKL-NBLH)td(CLKL-ADV)td(CLKL-ADIV)td(CLKL-Data)\ntsu(NWAITV-CLKH)th(CLKH-NWAITV)\nai14992gtd(CLKL-Data)\nFSMC_NBL\nElectrical characteristics STM32F405xx, STM32F407xx\n150/203 DS8626 Rev 9Figure 60. Synchronous non-multiplexed NOR/PSRAM read timingstd(CLKL-NBLH) FSMC_CLK low to FSMC_NBL high 0  - ns\ntsu(NWAIT-\nCLKH)FSMC_NWAIT valid before FSMC_CLK high 4 - ns\nth(CLKH-NWAIT) FSMC_NWAIT valid after FSMC_CLK high 0 - ns\n1. CL = 30 pF.\n2. Guaranteed by characterization.Table 80. Synchronous multiplexed PSRAM write timings(1)(2) (continued)\nSymbol Parameter Min Max Unit\nFSMC_CLK\nFSMC_NEx\nFSMC_A[25:0]\nFSMC_NOE\nFSMC_D[15:0] D1 D2\nFSMC_NWAIT\n(WAITCFG = 1b, WAITPOL + 0b)\nFSMC_NWAIT\n(WAITCFG = 0b, WAITPOL + 0b)tw(CLK)tw(CLK)\nData latency = 0BUSTURN = 0\ntd(CLKL-NExL)td(CLKL-NExH)\ntd(CLKL-AV)td(CLKL-AIV)\ntd(CLKL-NOEL) td(CLKL-NOEH)\ntsu(DV-CLKH) th(CLKH-DV)\ntsu(DV-CLKH)th(CLKH-DV)\ntsu(NWAITV-CLKH)th(CLKH-NWAITV)\ntsu(NWAITV-CLKH)th(CLKH-NWAITV)\ntsu(NWAITV-CLKH)th(CLKH-NWAITV)\nai14894fFSMC_NADVtd(CLKL-NADVL) td(CLKL-NADVH)\nDS8626 Rev 9 151/203STM32F405xx, STM32F407xx Electrical characteristics\n          Table 81. Synchronous non-multipl exed NOR/PSRAM read timings(1)(2) \n1. CL = 30 pF.\n2. Guaranteed by characterization.Symbol Parameter Min Max Unit\ntw(CLK) FSMC_CLK period 2THCLK  –0.5  - ns\ntd(CLKL-NExL) FSMC_CLK low to FSMC_NEx low (x=0..2)  - 0.5 ns\ntd(CLKL-NExH) FSMC_CLK low to FSMC_NEx high (x= 0…2)  0  - ns\ntd(CLKL-NADVL) FSMC_CLK low to FSMC_NADV low  - 2 ns\ntd(CLKL-NADVH) FSMC_CLK low to FSMC_NADV high 3  - ns\ntd(CLKL-AV) FSMC_CLK low to FSMC_Ax valid (x=16…25)  -  0 ns\ntd(CLKL-AIV) FSMC_CLK low to FSMC_Ax invalid (x=16…25) 2  - ns\ntd(CLKL-NOEL) FSMC_CLK low to FSMC_NOE low  - 0.5 ns\ntd(CLKL-NOEH) FSMC_CLK low to FSMC_NOE high 1.5  - ns\ntsu(DV-CLKH) FSMC_D[15:0] valid data before FSMC_CLK high 6  - ns\nth(CLKH-DV) FSMC_D[15:0] valid data after FSMC_CLK high 3  - ns\ntsu(NWAIT-CLKH) FSMC_NWAIT valid before FSMC_CLK high 4 - ns\nth(CLKH-NWAIT) FSMC_NWAIT valid after FSMC_CLK high 0 - ns\nElectrical characteristics STM32F405xx, STM32F407xx\n152/203 DS8626 Rev 9Figure 61. Synchronous non-multi plexed PSRAM write timings\n          Table 82. Synchronous non-multiplexed PSRAM write timings(1)(2) \n1. CL = 30 pF.\n2. Guaranteed by characterization.Symbol Parameter Min Max Unit\ntw(CLK) FSMC_CLK period 2THCLK  -n s\ntd(CLKL-NExL)FSMC_CLK low to FSMC_N Ex low (x=0..2)  - 1 ns\ntd(CLKL-NExH) FSMC_CLK low to FSMC_NEx high (x= 0…2) 1  - ns\ntd(CLKL-NADVL) FSMC_CLK low to FSMC_NADV low  - 7 ns\ntd(CLKL-NADVH) FSMC_CLK low to FSMC_NADV high 6  - ns\ntd(CLKL-AV) FSMC_CLK low to FSMC_Ax valid (x=16…25)  - 0 ns\ntd(CLKL-AIV) FSMC_CLK low to FSMC_Ax invalid (x=16…25) 6  - ns\ntd(CLKL-NWEL) FSMC_CLK low to FSMC_NWE low  - 1 ns\ntd(CLKL-NWEH) FSMC_CLK low to FSMC_NWE high 2  - ns\ntd(CLKL-Data) FSMC_D[15:0] valid data after FSMC_CLK low  - 3 ns\ntd(CLKL-NBLH) FSMC_CLK low to FSMC_NBL high 3  - ns\ntsu(NWAIT-CLKH) FSMC_NWAIT valid before FSMC_CLK high 4 - ns\nth(CLKH-NWAIT) FSMC_NWAIT valid after FSMC_CLK high 0 - nsFSMC_CLK\nFSMC_NEx\nFSMC_A[25:0]\nFSMC_NWE\nFSMC_D[15:0] D1 D2\nFSMC_NWAIT\n(WAITCFG = 0b, WAITPOL + 0b)tw(CLK)tw(CLK)\nData latency = 0BUSTURN = 0\ntd(CLKL-NExL) td(CLKL-NExH)\ntd(CLKL-AV)td(CLKL-AIV)\ntd(CLKL-NWEH)td(CLKL-NWEL)\ntd(CLKL-Data)\ntsu(NWAITV-CLKH)\nth(CLKH-NWAITV)\nai14993gFSMC_NADVtd(CLKL-NADVL) td(CLKL-NADVH)\ntd(CLKL-Data)\nFSMC_NBLtd(CLKL-NBLH)\nDS8626 Rev 9 153/203STM32F405xx, STM32F407xx Electrical characteristics\nPC Card/CompactFlash controller waveforms and timings\nFigure  62 through Figure  67 represent synchronous waveforms, and Table  83 and Table  84 \nprovide the corresponding timings. The results shown in this table are obtained with the \nfollowing FSMC configuration:\n• COM.FSMC_SetupTime = 0x04;\n• COM.FSMC_WaitSetupTime = 0x07;\n• COM.FSMC_HoldSetupTime = 0x04;\n• COM.FSMC_HiZSetupTime = 0x00;\n• ATT.FSMC_SetupTime = 0x04;\n• ATT.FSMC_WaitSetupTime = 0x07;\n• ATT.FSMC_HoldSetupTime = 0x04;\n• ATT.FSMC_HiZSetupTime = 0x00;\n• IO.FSMC_SetupTime = 0x04;\n• IO.FSMC_WaitSetupTime = 0x07;\n• IO.FSMC_HoldSetupTime = 0x04;\n• IO.FSMC_HiZSetu pTime = 0x00;\n• TCLRSetupTime = 0;\n• TARSetupTime = 0.\nIn all timing tables, the THCLK is the HCLK clock period. \nFigure 62. PC Card/CompactFlash contro ller waveforms for common memory read \naccess\n1. FSMC_NCE4_2 remains high (inac tive during 8-bit access.FSMC_NWE\ntw(NOE)\nFSMC_N OE\nFSMC_D[15:0]FSMC_A[10:0]FSMC_NCE4_2 (1)\nFSMC_NCE4_1\nFSMC_NREG\nFSMC_NIOWR\nFSMC_NIORD\ntd(NCE4_1-NOE)\ntsu(D-NOE) th(NOE-D)tv(NCEx-A)\ntd(NREG-NCEx)\ntd(NIORD-NCEx)th(NCEx-AI)\nth(NCEx-NREG)  \nth(NCEx-NIORD)\nth(NCEx- NIOWR )\nai14895b\nElectrical characteristics STM32F405xx, STM32F407xx\n154/203 DS8626 Rev 9Figure 63. PC Card/CompactFlash controller waveforms for common memory write \naccess\ntd(NCE4_1-NWE) tw(NWE)\nth(NWE-D)tv(NCE4_1-A)\ntd(NREG-NCE4_1)\ntd(NIORD-NCE4_1)th(NCE4_1-AI)\nMEMxHIZ =1\ntv(NWE-D)th(NCE4_1-NREG)\nth(NCE4_1-NIORD)\nth(NCE4_1-NIOWR)\nai14896FSMC_NWE\nFSMC_N OE\nFSMC_D[15:0]FSMC_A[10:0]FSMC_NCE4_1\nFSMC_NREG\nFSMC_NIOWR\nFSMC_NIORD\ntd(NWE-NCE4_1)\ntd(D-NWE)FSMC_NCE4_2 High\nDS8626 Rev 9 155/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 64. PC Card/CompactFlash controller waveforms for attribute memory read\naccess\n1. Only data bits 0...7 are read (bits 8...15 are disregarded).td(NCE4_1-NOE) tw(NOE)\ntsu(D-NOE) th(NOE-D)tv(NCE4_1-A) th(NCE4_1-AI)\ntd(NREG-NCE4_1) th(NCE4_1-NREG)\nai14897bFSMC_NWE\nFSMC_NOE\nFSMC_D[15:0] (1)FSMC_A[10:0]FSMC_NCE4_2FSMC_NCE4_1\nFSMC_NREGFSMC_NIOWR\nFSMC_NIORD\ntd(NOE-NCE4_1)High\nElectrical characteristics STM32F405xx, STM32F407xx\n156/203 DS8626 Rev 9Figure 65. PC Card/CompactFlash controller waveforms for attribute memory write\naccess\n1. Only data bits 0...7 are driven (bits 8...15 remains Hi-Z).\nFigure 66. PC Card/CompactFlash controller waveforms for I/O space read accesstw(NWE)tv(NCE4_1-A)\ntd(NREG-NCE4_1)th(NCE4_1-AI)\nth(NCE4_1-NREG)\ntv(NWE-D)\nai14898bFSMC_NWE\nFSMC_NOE\nFSMC_D[7:0](1)FSMC_A[10:0]FSMC_NCE4_2FSMC_NCE4_1\nFSMC_NREGFSMC_NIOWR\nFSMC_NIORD\ntd(NWE-NCE4_1)High\ntd(NCE4_1-NWE)\ntd(NIORD-NCE4_1)tw(NIORD)\ntsu(D-NIORD) td(NIORD-D)tv(NCEx-A)th(NCE4_1-AI)\nai14899BFSMC_NWE\nFSMC_NOE\nFSMC_D[15:0]FSMC_A[10:0]FSMC_NCE4_2FSMC_NCE4_1\nFSMC_NREG\nFSMC_NIOWR\nFSMC_NIORD\nDS8626 Rev 9 157/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 67. PC Card/CompactFlash controller waveforms for I/O space write access\n          td(NCE4_1-NIOWR)tw(NIOWR)tv(NCEx-A)th(NCE4_1-AI)\nth(NIOWR-D)ATTxHIZ =1\ntv(NIOWR-D)\nai14900cFSMC_NWE\nFSMC_NOE\nFSMC_D[15:0]FSMC_A[10:0]FSMC_NCE4_2FSMC_NCE4_1\nFSMC_NREG\nFSMC_NIOWRFSMC_NIORD\nTable 83. Switching characteristics fo r PC Card/CF read and write cycles\n in attribute/common space(1)(2) \nSymbol Parameter Min Max Unit\ntv(NCEx-A)  FSMC_Ncex low to FSMC_Ay valid - 0 ns\nth(NCEx_AI)  FSMC_NCEx high to FSMC_Ax invalid 4 - ns\ntd(NREG-NCEx) FSMC_NCEx low to FSMC_NREG valid - 3.5 ns\nth(NCEx-NREG) FSMC_NCEx high to FSMC_NREG invalid THCLK +4 - ns\ntd(NCEx-NWE)  FSMC_NCEx low to FSMC_NWE low - 5THCLK +0.5 ns\ntd(NCEx-NOE) FSMC_NCEx low to FSMC_NOE low - 5THCLK  +0.5 ns\ntw(NOE) FSMC_NOE low width 8THCLK –1 8THCLK +1 ns\ntd(NOE_NCEx)  FSMC_NOE high to FSMC_NCEx high 5THCLK +2.5 - ns\ntsu (D-NOE) FSMC_D[15:0] valid data before FSMC_NOE high 4.5 - ns\nth(N0E-D)  FSMC_N0E high to FSMC_D[15:0] invalid 3 - ns\ntw(NWE)  FSMC_NWE low width 8THCLK –0.5 8THCLK + 3 ns\ntd(NWE_NCEx) FSMC_NWE high to FSMC_NCEx high 5THCLK –1 -n s\ntd(NCEx-NWE) FSMC_NCEx low to FSMC_NWE low - 5THCLK + 1 ns\ntv(NWE-D)  FSMC_NWE low to FSMC_D[15:0] valid - 0 ns\nth (NWE-D) FSMC_NWE high to FSMC_D[15:0] invalid 8THCLK  –1 - ns\ntd (D-NWE) FSMC_D[15:0] valid before FSMC_NWE high 13THCLK  –1 - ns\n1. CL = 30 pF.\n2. Guaranteed by characterization.\nElectrical characteristics STM32F405xx, STM32F407xx\n158/203 DS8626 Rev 9          \nNAND controller waveforms and timings\nFigure  68 through Figure  71 represent synchronous waveforms, and Table  85 and Table  86 \nprovide the corresponding timings. The results shown in this table are obtained with the \nfollowing FSMC configuration:\n• COM.FSMC_SetupTime = 0x01;\n• COM.FSMC_WaitSetupTime = 0x03;\n• COM.FSMC_HoldSetupTime = 0x02;\n• COM.FSMC_HiZSetupTime = 0x01;\n• ATT.FSMC_SetupTime = 0x01;\n• ATT.FSMC_WaitSetupTime = 0x03;\n• ATT.FSMC_HoldSetupTime = 0x02;\n• ATT.FSMC_HiZSetupTime = 0x01;\n• Bank = FSMC_Bank_NAND;\n• MemoryDataWidth = FSMC_MemoryDataWidth_16b;\n• ECC = FSMC_ECC_Enable;\n• ECCPageSize = FSMC_ECCPageSize_512Bytes;\n• TCLRSetupTime = 0;\n• TARSetupTime = 0.\nIn all timing tables, the THCLK is the HCLK clock period. Table 84. Switching characteristics fo r PC Card/CF read and write cycles\n in I/O space(1)(2) \nSymbol Parameter Min Max Unit\ntw(NIOWR) FSMC_NIOWR low width 8THCLK  –1  - ns\ntv(NIOWR-D) FSMC_NIOWR low to FSMC_D[15:0] valid  - 5THCLK – 1 ns\nth(NIOWR-D) FSMC_NIOWR high to FSMC_D[15:0] invalid 8THCLK – 2 - ns\ntd(NCE4_1-NIOWR) FSMC_NCE4_1 low to FSMC_NIOWR valid  - 5THCLK + 2.5 ns\nth(NCEx-NIOWR) FSMC_NCEx high to FSMC_NIOWR invalid 5THCLK –1.5  - ns\ntd(NIORD-NCEx) FSMC_NCEx low to FSMC_NIORD valid  - 5THCLK + 2 ns\nth(NCEx-NIORD) FSMC_NCEx high to FSMC_NIORD) valid 5THCLK – 1.5  - ns\ntw(NIORD) FSMC_NIORD low width 8THCLK –0.5  - ns\ntsu(D-NIORD) FSMC_D[15:0] valid before FSMC_NIORD high 9 - ns\ntd(NIORD-D) FSMC_D[15:0] valid after FSMC_NIORD high 0 - ns\n1. CL = 30 pF.\n2. Guaranteed by characterization.\nDS8626 Rev 9 159/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 68. NAND controller waveforms for read access\nFigure 69. NAND controller waveforms for write accessFSMC_NWE\nFSMC_NOE (NRE)\nFSMC_D[15:0]tsu(D-NOE)th(NOE-D)\nai14901cALE (FSMC_A17)\nCLE (FSMC_A16)FSMC_NCEx\ntd(ALE-NOE)th(NOE-ALE)\nai14902cth(NWE-D) tv(NWE-D)FSMC_NWE\nFSMC_NOE (NRE)\nFSMC_D[15:0]ALE (FSMC_A17)\nCLE (FSMC_A16)FSMC_NCEx\ntd(ALE-NWE) th(NWE-ALE)\nElectrical characteristics STM32F405xx, STM32F407xx\n160/203 DS8626 Rev 9Figure 70. NAND controller waveforms for common memory read access\nFigure 71. NAND controller wavefo rms for common memory write access\nTable 85. Switching characteristics for NAND Flash read cycles(1)\n1. CL = 30 pF.Symbol Parameter Min Max Unit\ntw(N0E) FSMC_NOE low width4THCLK – \n0.54THCLK + 3 ns\ntsu(D-NOE) FSMC_D[15-0] valid data before FSMC_NOE high 10 - ns\nth(NOE-D) FSMC_D[15-0] valid data after FSMC_NOE high 0 - ns\ntd(ALE-NOE) FSMC_ALE valid before FSMC_NOE low - 3THCLK ns\nth(NOE-ALE) FSMC_NWE high to FSMC_ALE invalid 3THCLK – 2 - nsFSMC_NWE\nFSMC_N OE\nFSMC_D[15:0]tw(NOE)\ntsu(D-NOE)th(NOE-D)\nai14912cALE (FSMC_A17)\nCLE (FSMC_A16)FSMC_NCEx\ntd(ALE-NOE)th(NOE-ALE)\nai14913ctw(NWE)\nth(NWE-D)tv(NWE-D)FSMC_NWE\nFSMC_N OE\nFSMC_D[15:0]td(D-NWE)ALE (FSMC_A17)\nCLE (FSMC_A16)FSMC_NCEx\ntd(ALE-NOE) th(NOE-ALE)\nDS8626 Rev 9 161/203STM32F405xx, STM32F407xx Electrical characteristics\n          \n5.3.27 Camera interface (D CMI) timing specifications\nUnless otherwise specified,  the parameters given in Table  87 for DCMI are derived from \ntests performed under the ambient temperature, fHCLK  frequency and VDD supply voltage \nsummarized in Table  13, with the following configuration:\n• PCK polarity: falling\n• VSYNC and HSYNC polarity: high\n• Data format: 14 bits\nFigure 72. DCMI timing diagram\n          Table 86. Switching characteris tics for NAND Flash write cycles(1)\n1. CL = 30 pF.Symbol Parameter Min Max Unit\ntw(NWE) FSMC_NWE low width 4THCLK –1 4THCLK + 3 ns\ntv(NWE-D) FSMC_NWE low to FSMC_D[15-0] valid - 0 ns\nth(NWE-D) FSMC_NWE high to FSMC_D[15-0] invalid 3THCLK  –2 - ns\ntd(D-NWE) FSMC_D[15-0] valid before FSMC_NWE high 5THCLK –3 - ns\ntd(ALE-NWE) FSMC_ALE valid before FSMC_NWE low - 3THCLK ns\nth(NWE-ALE) FSMC_NWE high to FSMC_ALE invalid 3THCLK –2 - ns\nTable 87. DCMI characteristics(1) \nSymbol Paramete rM i n M a x U n i t\nFrequency ratio DCMI_PIXCLK/fHCLK -0 . 4\nDCMI_PIXCLK Pixel clock input - 54 MHz\nDpixel Pixel clock input duty cycle 30 70 %MS32414V2DCMI_PIXCLK\ntsu(VSYNC)tsu(HSYNC)\nDCMI_HSYNC\nDCMI_VSYNC\nDATA[0:13]1/DCMI_PIXCLK\nth(HSYNC)\nth(HSYNC)\ntsu(DATA) th(DATA)\nElectrical characteristics STM32F405xx, STM32F407xx\n162/203 DS8626 Rev 95.3.28 SD/SDIO MMC card host in terface (SDIO) characteristics\nUnless otherwise specified,  the parameters given in Table  88 are derived from tests \nperformed under ambient temperature, fPCLKx frequency and VDD supply voltage conditions \nsummarized in Table  14 with the following configuration:\n• Output speed is set to OSPEEDRy[1:0] = 10\n• Capacitive load C = 30 pF\n• Measurement points are done at CMOS levels: 0.5VDD\nRefer to Section  5.3.16: I/O port characteristics  for more details on the input/output \ncharacteristics.\nFigure 73. SDIO high-speed modetsu(DATA) Data input setup time 2.5 -\nnsth(DATA) Data hold time 1 -\ntsu(HSYNC) , \ntsu(VSYNC)HSYNC/VSYNC input setup time 2 -\nth(HSYNC) , \nth(VSYNC)HSYNC/VSYNC input hold time 0.5 -\n1. Guaranteed by characterization.Table 87. DCMI characteristics(1) (continued)\nSymbol Paramete rM i n M a x U n i t\ntW(CKH)\nCK\nD, CMD\n(output)\nD, CMD\n(input)tC\ntW(CKL)\ntOV tOH\ntISU tIHtf tr\nai14887\nDS8626 Rev 9 163/203STM32F405xx, STM32F407xx Electrical characteristics\nFigure 74. SD default mode\n          \n5.3.29 RTC characteristics\n          CK\nD, CMD\n(output)tOVD tOHD\nai14888\nTable 88. Dynamic characteristi cs: SD / MMC characteristics(1) \nSymbol Paramete r Conditions Min Typ Max Unit\nfPP Clock frequency in data transfer mode 0 48 MHz\nSDIO_CK/fPCLK2  frequency ratio - - 8/3 -\ntW(CKL) Clock low time fPP = 48 MHz 8.5 9 -\nns\ntW(CKH) Clock high time fPP = 48 MHz 8.3 10 -\nCMD, D inputs (referenced to CK) in MMC and SD HS modet\nISU Input setup time HS fPP = 48 MHz 3 - -\nns\ntIH Input hold time HS fPP = 48 MHz 0 - -\nCMD, D outputs (referenced to CK) in MMC and SD HS modet\nOV Output valid time HS fPP = 48 MHz - 4.5 6\nns\ntOH Output hold time HS fPP = 48 MHz 1 - -\nCMD, D inputs (referenced to CK) in SD default modet\nISUD Input setup time SD fPP = 24 MHz 1.5 - -\nns\ntIHD Input hold time SD fPP = 24 MHz 0.5 - -\nCMD, D outputs (referenced to CK) in SD default modet\nOVD Output valid default time SD fPP = 24 MHz - 4.5 7\nns\ntOHD Output hold default time SD fPP = 24 MHz 0.5 - -\n1. Guaranteed by characterization.\nTable 89. RTC characteristics \nSymbol Parameter Conditions Min Max\n-fPCLK1 /RTCCLK frequency ratioAny read/write operation \nfrom/to an RTC register4-\nPackage information STM32F405xx, STM32F407xx\n164/203 DS8626 Rev 96 Package information\nIn order to meet environmental requirements, ST offers these devices in different grades of \nECOPACK packages, depending on their level of  environmental compliance. ECOPACK \nspecifications, grade definitions a nd product status are available at: www.st.com . \nECOPACK is an ST trademark.\n6.1 WLCSP90 package information \nFigure 75. WLCSP90 - 4.223 x 3.969 mm, 0. 400 mm pitch wafer level chip scale \npackage outline\n1. Drawing is not to scale.A0JW_ME_V4SIDE VIEWDetail A\nA1\nDetail A\n(Rotated 90°)eeeD\nSeating planeA2\nA\nbEee1\ne\nGe2\nA3A1 ball location \nBOTTOM VIEW\nBUMP SIDE\nA2\nAA3\nFRONT VIEW\nTOP VIEW\nWAFER BACK SIDE bbb Z\n10 1\nJA\nF\nccc\nddd ZZX YZBump\nA1 orientation \nreference\n aaa\n (4X)\nDS8626 Rev 9 165/203STM32F405xx, STM32F407xx Package information\n          \nFigure 76. WLCSP90 - 4.223 x 3.969 mm, 0. 400 mm pitch wafer level chip scale\nrecommended footprintTable 90. WLCSP90 - 4.223 x 3.969 mm, 0.400 mm pitch wafer level chip scale \npackage mechanical data \n Symbolmillimeters inches(1)\n1. Values in inches are converted from mm and rounded to 4 decimal digits. Min Typ Max Min Typ Max\nA 0.540 0.570 0.600 0.0213 0.0224 0.0236\nA1 - 0.190 - - 0.0075 -A2 - 0.380 - - 0.0150 -\nA3\n(2)\n2. Back side coating.- 0.025 - - 0.0010 -\nb(3)\n3. Dimension is measured at the maximum bum p diameter parallel to primary datum Z.0.240 0.270 0.300 0.0094 0.0106 0.0118\nD 4.188 4.223 4.258 0.1649 0.1663 0.1676\nE 3.934 3.969 4.004 0.1549 0.1563 0.1576\ne - 0.400 - - 0.0157 -\ne1 - 3.600 - - 0.1417 -\ne2 - 3.200 - - 0.1260 -\nF - 0.3115 - - 0.0123 -\nG - 0.3845 - - 0.0151 -\naaa - 0.100 - - 0.0039 -bbb - 0.100 - - 0.0039 -\nccc - 0.100 - - 0.0039 -\nddd - 0.050 - - 0.0020 -eee - 0.050 - - 0.0020 -\nMS18965V2DsmDpad\nPackage information STM32F405xx, STM32F407xx\n166/203 DS8626 Rev 9          \nDevice marking for WLCSP90\nThe following figure gives an example of topside marking and ball A1 position identifier \nlocation. \nThe printed markings may differ depending on the supply chain.\nOther optional marking or inset/upset marks,  which depend on supply chain operations, are \nnot indicated below.\nFigure 77. WLCSP90 marking example (package top view) \n1. Parts marked as “ES”, “E” or accompanied by an Engineering Sample notification letter, are not yet \nqualified and therefore not yet ready to be used in  production and any consequences  deriving from such \nusage will not be at ST charge. In no event, ST will  be liable for any customer usage of these engineering \nsamples in production. ST Quality has to be cont acted prior to any decision to use these Engineering \nSamples to run qualification activity.  Table 91. WLCSP90 recommended PCB design rules\n Dimension Recommended values\nPitch 0.4 mm\nDpad260 µm max. (circular)\n220 µm recommended\nDsm 300 µm min. (for 260 µm diameter pad)PCB pad design Non-solder mask defined via underbump allowed\nMSv36120V1Ball A1 \nindentiferProduct identification(1)\nF405OEB\nRRevision code\nDate code\nYW W\n\nDS8626 Rev 9 167/203STM32F405xx, STM32F407xx Package information\n6.2 LQFP64 package information\nFigure 78. LQFP64 – 64-pin, 10 x 10 mm low-profile quad flat package outline\n1. Drawing is not to scale.\n          Table 92. LQFP64 – 64-pin 10 x 10 mm low-profile quad flat package \nmechanical  data \nSymbolmillimeters inches(1)\nMin Typ Max Min Typ Max\nA  - - 1.600 - - 0.0630\nA1 0.050 - 0.150 0.0020 - 0.0059\nA2 1.350 1.400 1.450 0.0531 0.0551 0.0571\nb 0.170 0.220 0.270 0.0067 0.0087 0.0106\nc 0.090 - 0.200 0.0035 - 0.0079\nD - 12.000  - - 0.4724 -\nD1  - 10.000  - - 0.3937 -\nD3 - 7.500 - - 0.2953 -\nE  - 12.000 - - 0.4724 -\nE1  - 10.000  - - 0.3937 -5W_ME_V3A1A2ASEATING PLANE\nccc C\nbC\nc\nA1\nL\nL1K\nIDENTIFICATIONPIN 1D\nD1\nD3\ne1 16173233 48\n49\n64\nE3\nE1\nEGAUGE PLANE0.25 mm\nPackage information STM32F405xx, STM32F407xx\n168/203 DS8626 Rev 9Figure 79. LQFP64 – 64-pin, 10 x 10 mm low-profile quad flat package \nrecommended footprint\n1. Dimensions are in millimeters.E3 - 7.500 - - 0.2953 -\ne - 0.500 - - 0.0197 -\nK 0 °3 . 5 °7 ° 0 °3 . 5 °7 °\nL 0.450 0.600 0.750 0.0177 0.0236 0.0295\nL1  - 1.000  - - 0.0394 -\nccc - - 0.080 - - 0.0031\n1. Values in inches are converted from mm and rounded to 4 decimal digits.Table 92. LQFP64 – 64-pin 10 x 10 mm low-profile quad flat package \nmechanical  data (continued)\nSymbolmillimeters inches(1)\nMin Typ Max Min Typ Max\n48\n32 49\n64 17\n1 161.20.333\n10.312.7\n10.30.5\n7.8\n12.7\nai14909c\nDS8626 Rev 9 169/203STM32F405xx, STM32F407xx Package information\nDevice marking for LQFP64\nThe following figure gives an example of tops ide marking and pin 1 position identifier \nlocation. \nThe printed markings may differ depending on the supply chain.\nOther optional marking or inset/upset marks,  which depend on supply chain operations, are \nnot indicated below.\nFigure 80. LPQF64 marking example (package top view) \n1. Parts marked as “ES”, “E” or accompanied by an Engineering Sample notification letter, are not yet \nqualified and therefore not yet ready to be used in  production and any consequences  deriving from such \nusage will not be at ST charge. In no event, ST will  be liable for any customer usage of these engineering \nsamples in production. ST Quality has to be cont acted prior to any decision to use these Engineering \nSamples to run qualification activity.  MSv36121V1Pin 1identifierRRevision code\nSTM32F405\nProduct identification(1)\nDate codeYWWRGT6\nPackage information STM32F405xx, STM32F407xx\n170/203 DS8626 Rev 96.3 LQFP100 pac kage information \nFigure 81. LQFP100 - 100-pin, 14 x 14 mm low-profile quad flat package outline\n1. Drawing is not to scale.\n          eIDENTIFICATIONPIN 1GAUGE PLANE0.25 mmSEATING PLANE\nD\nD1\nD3\nE3\nE1\nEKccc CC\n1 25261007675 51\n50\n1L_ME_V5A2A\nA1\nL1Lcb\nA1\nTable 93. LQFP100 – 100-pin, 14 x 14 mm low-profile quad flat package \nmechanical data(1) \nSymbolmillimeters inches\nMin Typ Max Min Typ Max\nA  - - 1 . 6 0 0  - - 0 . 0 6 3 0\nA1 0.050  - 0.150 0.0020  - 0.0059\nA2 1.350 1.400 1.450 0.0531 0.0551 0.0571\nb 0.170 0.220 0.270 0.0067 0.0087 0.0106\nc 0.090  - 0.200 0.0035  - 0.0079\nD 15.800 16.000 16.200 0.6220 0.6299 0.6378\nD1 13.800 14.000 14.200 0.5433 0.5512 0.5591D3  - 12.000  -  - 0.4724  -\nE 15.80 16.000 16.200 0.6220 0.6299 0.6378\nDS8626 Rev 9 171/203STM32F405xx, STM32F407xx Package information\nFigure 82. LQFP100 - 100-pin, 14 x 14 mm low-profile quad flat \nrecommended footprint\n1. Dimensions are expr essed in millimeters.E1 13.800 14.000 14.200 0.5433 0.5512 0.5591\nE3  - 12.000  -  - 0.4724  -\ne  - 0.500  -  - 0.0197  -L 0.450 0.600 0.750 0.0177 0.0236 0.0295\nL1  - 1.000  -  - 0.0394  -\nk 0 °3 . 5 °7 ° 0 °3 . 5 °7 °\nc c c  - - 0 . 0 8 0  - - 0 . 0 0 3 1\n1. Values in inches are converted from mm and rounded to 4 decimal digits.Table 93. LQFP100 – 100-pin, 14 x 14 mm low-profile quad flat package \nmechanical data(1) (continued)\nSymbolmillimeters inches\nMin Typ Max Min Typ Max\n75 51\n50 76\n0.5\n0.3\n16.7 14.3\n100 26\n12.3251.2\n16.71\nai14906c\nPackage information STM32F405xx, STM32F407xx\n172/203 DS8626 Rev 9Device marking for LFP100\nThe following figure gives an example of tops ide marking and pin 1 position identifier \nlocation. \nThe printed markings may differ depending on the supply chain.\nOther optional marking or inset/upset marks,  which depend on supply chain operations, are \nnot indicated below.\nFigure 83. LQFP100 marking example (package top view) \n1. Parts marked as “ES”, “E” or accompanied by an Engineering Sample notification letter, are not yet \nqualified and therefore not yet ready to be used in  production and any consequences  deriving from such \nusage will not be at ST charge. In no event, ST will  be liable for any customer usage of these engineering \nsamples in production. ST Quality has to be cont acted prior to any decision to use these Engineering \nSamples to run qualification activity.  MSv36122V1Date code\nPin 1 identifierSTM32F405\nVGT6    RProduct \nidentification(1)\nST logoRevision code\nYWW\n\nDS8626 Rev 9 173/203STM32F405xx, STM32F407xx Package information\n6.4 LQFP144 pac kage information\nFigure 84. LQFP144 - 144-pin, 20 x 20 mm low-profile quad flat package outline\n1. Drawing is not to scale.eIDENTIFICATIONPIN 1GAUGE PLANE0.25 mmSEATING\nPLANE\nD\nD1\nD3\nE3\nE1\nEKccc CC\n1 3637\n144109108 73\n72\n1A_ME_V4A2A\nA1\nL1Lcb\nA1\nPackage information STM32F405xx, STM32F407xx\n174/203 DS8626 Rev 9          Table 94. LQFP144 - 144-pin, 20 x 20 mm low-profile quad flat package \nmechanical data \nSymbolmillimeters inches(1)\nMin Typ Max Min Typ Max\nA  -  - 1.600  -  - 0.0630\nA1 0.050  - 0.150 0.0020  - 0.0059A2 1.350 1.400 1.450 0.0531 0.0551 0.0571\nb 0.170 0.220 0.270 0.0067 0.0087 0.0106\nc 0.090  - 0.200 0.0035  - 0.0079\nD 21.800 22.000 22.2 00 0.8583 0.8661 0.874\nD1 19.800 20.000 20.200 0.7795 0.7874 0.7953\nD3  - 17.500  -  - 0.689  -\nE 21.800 22.000 22.200 0.8583 0.8661 0.8740\nE1 19.800 20.000 20.200 0.7795 0.7874 0.7953\nE3  - 17.500  -  - 0.6890  -\ne  - 0.500  -  - 0.0197  -\nL 0.450 0.600 0.750 0.0177 0.0236 0.0295\nL1  - 1.000  -  - 0.0394  -\nk 0 °3 . 5 °7 ° 0 °3 . 5 °7 °\nccc  -  - 0.080  -  - 0.0031\n1. Values in inches are converted from mm and rounded to 4 decimal digits.\nDS8626 Rev 9 175/203STM32F405xx, STM32F407xx Package information\nFigure 85. LQFP144 - 144-pin,20 x 20 mm low-profile quad flat package \nrecommended footprint\n1. Dimensions are in millimeters.0.50.35\n19.9 17.85\n22.61.35\n22.619.9\nai14905e1 36377273 108\n109\n144\nPackage information STM32F405xx, STM32F407xx\n176/203 DS8626 Rev 9Device marking for LQFP144\nThe following figure gives an example of tops ide marking and pin 1 position identifier \nlocation. \nThe printed markings may differ depending on the supply chain.\nOther optional marking or inset/upset marks,  which depend on supply chain operations, are \nnot indicated below.\nFigure 86. LQFP144 marking example (package top view) \n1. Parts marked as “ES”, “E” or accompanied by an Engineering Sample notification letter, are not yet \nqualified and therefore not yet ready to be used in  production and any consequences  deriving from such \nusage will not be at ST charge. In no event, ST will  be liable for any customer usage of these engineering \nsamples in production. ST Quality has to be cont acted prior to any decision to use these Engineering \nSamples to run qualification activity.   MSv36123V1Date code\nPin 1 identifierSTM32F407ZGT6RProduct identification(1)Revision code\nYWW\n Optional \nejector holeOptional ejector hole\nDS8626 Rev 9 177/203STM32F405xx, STM32F407xx Package information\n6.5 UFBGA176+25 package information\nFigure 87. UFBGA176+25 ball, 10 x 10 mm, 0.65 mm pitch, ultra fine pitch \nball grid array package outline\n1. Drawing is not to scale.\n          Table 95. UFBGA176+25 ball, 10 × 10 × 0.65 mm pitch, ultra thin fine pitch \nball grid array mechanical data \nSymbolmillimeters inches(1)\nMin Typ Max Min Typ Max\nA - - 0.600 - - 0.0236 \nA1 - - 0.110 - - 0.0043 \nA2 - 0.130 - - 0.0051 -A3 - 0.450 - - 0.0177 -\nA4 - 0.320 - - 0.0126 -\nb 0.240 0.290 0.340 0.0094 0.0114 0.0134\nD 9.850 10.000 10.150 0.3878 0.3937 0.3996\nD1 - 9.100 - - 0.3583 -\nE 9.850 10.000 10.150 0.3878 0.3937 0.3996\nE1 - 9.100 - - 0.3583 -\ne  - 0.650 - - 0.0256 -\nZ - 0.450 - - 0.0177 -\nddd - - 0.080 - - 0.0031A0E7_ME_V9\nSeating plane\nA3C ddd\nA1A\ne Z\nZ\ne\nRA\n15 1\nBOTTOM VIEWE\nD\nTOP VIEWØb (176 + 25  balls)BA\nB eeeØ M\nfffØ MC\nCAC\nA1 ball \nidentifierA1 ball \nindex \nareabA4\nE1A2\nD1\nPackage information STM32F405xx, STM32F407xx\n178/203 DS8626 Rev 9Figure 88. UFBGA176+25 - 201-ball, 10 x 10 mm, 0.65 mm pitch, ultra fine pitch \n ball grid array recommended footprint\n          \nNote: Non solder mask defined (NSMD) pads are recommended.\n4 to 6 mils solder paste screen printing process.\nStencil opening is 0.300  mm.\nStencil thickness is between 0.100  mm and 0.125  mm.\nPad trace width is 0.100  mm.eee - - 0.150 - - 0.0059 \nfff - - 0.050 - - 0.0020 \n1. Values in inches are converted fr om mm and rounded to 4 decimal digits.\nTable 96. UFBGA176+2 recommended PCB design rules (0.65 mm pitch BGA) \nDimension Recommended values\nPitch 0.65\nDpad 0.300 mm\nDsm0.400 mm typ. (depends on the soldermask \nregistration tolerance)Table 95. UFBGA176+25 ball, 10 × 10 × 0.65 mm pitch, ultra thin fine pitch \nball grid array mechanical data (continued)\nSymbolmillimeters inches(1)\nMin Typ Max Min Typ Max\nA0E7_FP_V1Dpad\nDsm\nDS8626 Rev 9 179/203STM32F405xx, STM32F407xx Package information\nDevice marking for UFBGA176+25\nThe following figure gives an example of topside marking and ball A 1 position identifier \nlocation. \nThe printed markings may differ depending on the supply chain.\nOther optional marking or inset/upset marks,  which depend on supply chain operations, are \nnot indicated below.\nFigure 89. UFBGA176+25 marking example (package top view) \n1. Parts marked as “ES”, “E” or accompanied by an Engineering Sample notification letter, are not yet \nqualified and therefore not yet ready to be used in  production and any consequences  deriving from such \nusage will not be at ST charge. In no event, ST will  be liable for any customer usage of these engineering \nsamples in production. ST Quality has to be cont acted prior to any decision to use these Engineering \nSamples to run qualification activity.   MSv36124V1Revision code\nBall \nA1identifierR\nSTM32Product identification(1)\nF407IGH6\nDate code\nPackage information STM32F405xx, STM32F407xx\n180/203 DS8626 Rev 96.6 LQFP176 pac kage information \nFigure 90. LQFP176 - 176-pin, 24 x 24 mm low profile quad flat package outline\n1. Drawing is not to scale.\n          1T_ME_V2A2A\neEHEDHD\nZDZE\nb0.25 mm\ngauge plane\nA1\nL\nL1kc\nIDENTIFICATIONPIN 1Seating planeC\nA1\nTable 97. LQFP176 - 176-pin, 24 x 24 mm low profile quad flat package \nmechanical data \nSymbolmillimeters inches(1)\nMin Typ Max Min Typ Max\nA - - 1.600 - - 0.0630\nA1 0.050 - 0.150 0.0020 - 0.0059A2 1.350 - 1.450 0.0531 - 0.0571\nb 0.170 - 0.270 0.0067 - 0.0106\nc 0.090 - 0.200 0.0035 - 0.0079\nD 23.900 - 24.100 0.9409 - 0.9488\nHD 25.900 - 26.100 1.0197 - 1.0276\nDS8626 Rev 9 181/203STM32F405xx, STM32F407xx Package information\nZD - 1.250 - - 0.0492 -\nE 23.900 - 24.100 0.9409 - 0.9488\nHE 25.900 - 26.100 1.0197 - 1.0276\nZE - 1.250 - - 0.0492 -\ne - 0.500 - - 0.0197 -\nL(2)0.450 - 0.750 0.0177 - 0.0295\nL1 - 1.000 - - 0.0394 -\nk0 ° - 7 °0 ° - 7 °\nccc - - 0.080 - - 0.0031\n1. Values in inches are converted from mm and rounded to 4 decimal digits.\n2. L dimension is measured at gauge plan e at 0.25 mm above the seating plane.Table 97. LQFP176 - 176-pin, 24 x 24 mm low profile quad flat package \nmechanical data (continued)\nSymbolmillimeters inches(1)\nMin Typ Max Min Typ Max\nPackage information STM32F405xx, STM32F407xx\n182/203 DS8626 Rev 9Figure 91. LQFP176 - 176-pin, 24 x 24 mm low profile quad flat recommended \nfootprint\n1. Dimensions are expr essed in millimeters.1T_FP_V1133\n1321.2\n0.30.5\n89\n881.244\n45\n21.8\n26.7117626.7\n21.8\nDS8626 Rev 9 183/203STM32F405xx, STM32F407xx Package information\nDevice marking for LQFP176\nThe following figure gives an example of tops ide marking and pin 1 position identifier \nlocation. \nThe printed markings may differ depending on the supply chain.\nOther optional marking or inset/upset marks,  which depend on supply chain operations, are \nnot indicated below.\nFigure 92. LQFP176 marking example (package top view) \n1. Parts marked as “ES”, “E” or accompanied by an Engineering Sample notification letter, are not yet \nqualified and therefore not yet ready to be used in  production and any consequences  deriving from such \nusage will not be at ST charge. In no event, ST will  be liable for any customer usage of these engineering \nsamples in production. ST Quality has to be cont acted prior to any decision to use these Engineering \nSamples to run qualification activity.   MSv36125V1WWY\nPin 1identifierRSTM32F407IGT6\nDate codeProduct identification(1)\nRevision code\nPackage information STM32F405xx, STM32F407xx\n184/203 DS8626 Rev 96.7 Thermal characteristics\nThe maximum chip-junction temperature, TJ max, in degrees Celsius, may be calculated \nusing the following equation:\nTJ max = TA max + (PD max x ΘJA)\nWhere:\n• TA max is the maximum ambient temperature in °C,\n•ΘJA is the package junction-to-ambient thermal resistance, in °C/W,\n• PD max is the sum of PINT max and PI/O max (PD max = PINT max + PI/Omax),\n• PINT max is the product of IDD and VDD, expressed in Watts. This is the maximum chip \ninternal power.\nPI/O max represents the maximum power dissipation on output pins where:\nPI/O max  = Σ (VOL × IOL) + Σ((VDD – VOH) × IOH),\ntaking into account the actual VOL / IOL and VOH / IOH of the I/Os at low and high level in the \napplication.\n          \nReference document\nJESD51-2 Integrated Circuits Thermal Test  Method Environment Conditions - Natural \nConvection (Still Air). Available from www.jedec.org.Table 98. Package thermal characteristics\nSymbol Parameter Value Unit\nΘJAThermal resistance junction-ambient  \nLQFP64 - 10 × 10 mm / 0.5 mm pitch46\n°C/WThermal resistance junction-ambient  \nLQFP100 - 14 × 14 mm / 0.5 mm pitch43\nThermal resistance junction-ambient  \nLQFP144 - 20 × 20 mm / 0.5 mm pitch40\nThermal resistance junction-ambient  \nLQFP176 - 24 × 24 mm / 0.5 mm pitch38\nThermal resistance junction-ambient  \nUFBGA176 - 10× 10 mm / 0.65 mm pitch39\nThermal resistance junction-ambient  \nWLCSP90 - 0.400 mm pitch38.1\nDS8626 Rev 9 185/203STM32F405xx, STM32F407xx Ordering information\n7 Ordering information\n          \nFor a list of available options (speed, package, etc.) or for further information on any aspect \nof this device, please contact your nearest ST sales office.          \n \nExample: STM32 F 405 R E T 6 xxx\nDevice family\nSTM32 = Arm-based 32-bit microcontroller\nProduct type\nF = general-purpose\nDevice subfamily\n405 = STM32F40xxx, connectivity\n407= STM32F40xxx, connectivity, camera interface, Ethernet  \nPin count\nR = 64 pins\nO = 90 pins\nV = 100 pinsZ = 144 pins\nI = 176 pins\nFlash memory size\nE = 512 Kbytes of Flash memory\nG = 1024 Kbytes of Flash memory\nPackage\nT = LQFPH = UFBGA\nY = WLCSP\nTemperature range\n6 = Industrial temperature range, –40 to 85 °C.\n7 = Industrial temperature range, –40 to 105 °C.\nOptions\nxxx = programmed partsTR = tape and reel\nApplication block diagrams STM32F405xx, STM32F407xx\n186/203 DS8626 Rev 9Appendix A Application block diagrams\nA.1 USB OTG full speed (FS) interface solutions\nFigure 93. USB controller configured as peripheral-only and used \nin Full speed mode\n1. External voltage regulator only needed when building a VBUS powered device.\n2. The same application can be developed using the OTG HS in FS mode to achieve enhanced performance \nthanks to the large Rx/Tx FIFO and to a dedicated DMA controller.\nFigure 94. USB controller configured as  host-only and used in full speed mode\n1. The current limiter is required only if the application has to support a VBUS powered device. A basic power \nswitch can be used if 5 V are available on the application board.\n2. The same application can be developed using the OTG HS in FS mode to achieve enhanced performance \nthanks to the large Rx/Tx FIFO and to a dedicated DMA controller.STM32F4xx5V to VDD\nVolatge regulator(1)VDD\nVBUS\nDP\nVSSPA12/PB15PA11//PB14\nUSB Std-B connectorDM\nOSC_IN\nOSC_OUT\nMS19000V5\nSTM32F4xx  VDD\nVBUS\nDP\nVSS\nUSB Std-A connectorDMGPIO+IRQGPIOEN\nOvercurrent5 V Pwr\nOSC_IN\nOSC_OUT\nMS19001V4Current limiter \npower switch(1)\nPA12/PB15PA11//PB14\nDS8626 Rev 9 187/203STM32F405xx, STM32F407xx Application block diagrams\nFigure 95. USB controller configured in dual mode and used in full speed mode\n1. External voltage regulator only needed when building a VBUS powered device.\n2. The current limiter is required only if the application has to support a VBUS powered device. A basic power \nswitch can be used if 5 V are available on the application board.\n3. The ID pin is required in dual role only.\n4. The same application can be developed using the OTG HS in FS mode to achieve enhanced performance \nthanks to the large Rx/Tx FIFO and to a dedicated DMA controller.STM32F4xx VDD\nVBUS\nDP\nVSSPA9/PB13\nPA12/PB15PA11/PB14\nUSB micro-AB connectorDMGPIO+IRQGPIOEN\nOvercurrent5 V Pwr5 V to VDD\nvoltage regulator(1)VDD\nID(3)\nPA10/PB12OSC_IN\nOSC_OUT\nMS19002V3Current limiter \npower switch(2)\nApplication block diagrams STM32F405xx, STM32F407xx\n188/203 DS8626 Rev 9A.2 USB OTG high speed (H S) interface solutions\nFigure 96. USB controller configured as peripheral, host, or dual-mode\nand used in high speed mode\n1. It is possible to use MCO1 or MCO2 to save a crystal. It is however not mandatory to clock the \nSTM32F40xxx with a 24 or 26 MHz crystal when us ing USB HS. The above figure only shows an example \nof a possible connection.\n2. The ID pin is required in dual role only.DPSTM32F4xx\nDM\nVBUS\nVSSDMDP\nID(2)USBUSB HS\nOTG CtrlFS PHY\nULPI\nHigh speed \nOTG PHYULPI_CLK\nULPI_D[7:0]\nULPI_DIR\nULPI_STP\nULPI_NXTnot connected\nconnector\nMCO1 or MCO224 or 26 MHz XT(1) PLLXT1\nXI\nMS19005V2\nDS8626 Rev 9 189/203STM32F405xx, STM32F407xx Application block diagrams\nA.3 Ethernet interface solutions\nFigure 97. MII mode using a 25 MHz crystal\n1. fHCLK  must be greater than 25 MHz. \n2. Pulse per second when using IEEE1588 PTP optional signal.\nFigure 98. RMII with a 50 MHz oscillator\n1. fHCLK  must be greater than 25 MHz. MCU\nEthernet\nMAC 10/100Ethernet\nPHY 10/100\nPLL HCLK\nXT1PHY_CLK 25 MHzMII_RX_CLK\nMII_RXD[3:0]\nMII_RX_DVMII_RX_ERMII_TX_CLK\nMII_TX_EN\nMII_TXD[3:0]\nMII_CRS\nMII_COL\nMDIO\nMDCHCLK (1)\nPPS_OUT (2)\nXTAL\n25 MHzSTM32\nOSCTIM2Timestamp\ncomparatorTimer \ninput triggerIEEE1588 PTPMII \n= 15 pins\nMII + MDC \n= 17 pins\nMS19968V1MCO1/MCO2\nMCU\nEthernet\nMAC 10/100Ethernet\nPHY 10/100\nPLL HCLK\nXT1 PHY_CLK    50 MHzRMII_RXD[1:0]\nRMII_CRX_DV\nRMII_REF_CLKRMII_TX_EN\nRMII_TXD[1:0]\nMDIO\nMDCHCLK (1)STM32\nOSC\n50 MHzTIM2Timestamp\ncomparatorTimer \ninput \ntriggerIEEE1588 PTPRMII\n= 7 pins\nRMII + MDC \n= 9 pins\nMS19969V1/2 or /20\nsynchronous 2.5 or 25 MHz 50 MHz\n50 MHz\nApplication block diagrams STM32F405xx, STM32F407xx\n190/203 DS8626 Rev 9Figure 99. RMII with a 25 MHz crystal and PHY with PLL\n1. fHCLK  must be greater than 25 MHz.\n2. The 25 MHz (PHY_CLK) must be derived directly from the HSE oscillator, before the PLL block.MCU\nEthernet\nMAC 10/100Ethernet\nPHY 10/100\nPLL HCLK\nXT1 PHY_CLK   25 MHzRMII_RXD[1:0]\nRMII_CRX_DV\nRMII_REF_CLKRMII_TX_EN\nRMII_TXD[1:0]\nMDIO\nMDCHCLK (1)STM32F\nTIM2Timestamp\ncomparatorTimer \ninput triggerIEEE1588 PTPRMII\n= 7 pins\nRMII + MDC \n= 9 pins\nMS19970V1/2 or /20\nsynchronous 2.5 or 25 MHz 50 MHz\nXTAL\n25 MHzOSCPLLREF_CLK\nMCO1/MCO2\nDS8626 Rev 9 191/203STM32F405xx, STM32F407xx Revision history\n8 Revision history\n          Table 99. Document revision history \nDate Revision Changes\n15-Sep-2011 1 Initial release.\n24-Jan-2012 2Added WLCSP90 package on cover page. \nRenamed USART4 and USART5 into UART4 and UART5, \nrespectively.\nUpdated number of USB OTG HS and FS in Table 2: STM32F405xx \nand STM32F407xx: features and peripheral counts .\nUpdated Figure 3: Compatible board design between \nSTM32F10xx/STM32F2/STM32F 40xxx for LQFP144 package  and \nFigure 4: Compatible board design between STM32F2 and STM32F40xxx  for LQFP17 6 and BGA176 packages , and removed \nnote 1 and 2.\nUpdated Section 2.2.9: Flexible stat ic memory controller (FSMC) .\nModified I/Os used to \nreprogram the Flash memory for CAN2 and \nUSB OTG FS in Section 2.2.13: Boot modes . \nUpdated note in Section 2.2.14: Power supply schemes .\nPDR_ON no more available on LQFP100 package. Updated \nSection 2.2.16: Voltage regulator . Updated condition to obtain a \nminimum supply voltage of 1.7 V in the whole document.\nRenamed USART4/5 to UART4/5 and added LIN and IrDA feature for \nUART4 and UART5 in Table 5: USART feature comparison .\nRemoved support of I2C for OTG PHY in Section 2.2.30: Universal \nserial bus on-the-go full-speed (OTG_FS) .\nAdded Table 6: Legend/abbreviations used in the pinout table .\nTable 7: STM32F40xxx pin and ball definitions : replaced VSS_3, \nVSS_4, and VSS_8 by VSS; reformatted Table 7: STM32F40xxx pin and \nball definitions  to better highlight I/O struct ure, and alternate functions \nversus additional functions; signal corresponding to LQFP100 pin 99 changed from PDR_ON to V\nSS; EVENTOUT added in the list of \nalternate functions for all I/Os; A DC3_IN8 added as alternate function \nfor PF10; FSMC_CLE and FSMC_ALE added as alternate functions for PD11 and PD12, respectively; PH10 alternate function \nTIM15_CH1_ETR renamed TIM5_CH1; updated PA4 and PA5 I/O \nstructure to TTa.\nRemoved OTG_HS_SCL, OTG_HS_SDA, OTG_FS_INTN in Table 7: \nSTM32F40xxx pin and ball definitions  and Table 9: Alternate function \nmapping .\nChanged TCM data RAM to CCM data RAM in Figure 18: \nSTM32F40xxx memory map .\nAdded I\nVDD and IVSS maximum values in Table 12: Current \ncharacteristics . \nAdded Note 1  related to fHCLK , updated Note 2  in Table 14: General \noperating conditions , and added maximum power dissipation values.\nUpdated Table 15: Limitations depending on the operating power \nsupply range . \nRevision history STM32F405xx, STM32F407xx\n192/203 DS8626 Rev 924-Jan-20122\n(continued)Added V12 in Table 19: Embedded reset and power control block \ncharacteristics .\nUpdated Table 21: Typical and maximum current consumption in Run \nmode, code with data processing   running from Flash memory (ART \naccelerator disabled)  and Table 20: Typical and maximum current \nconsumption in Run mode, code with data processing   running from \nFlash memory (ART acce lerator enabled) or RAM . Added Figure  , \nFigure 25 , Figure 26 , and Figure 27 .\nUpdated Table 22: Typical and maximum current consumption in Sleep \nmode  and removed Note 1.\nUpdated Table 23: Typical and maximum current consumptions in Stop \nmode  and Table 24: Typical and maximum current consumptions in \nStandby mode , Table 25: Typical and maximum current consumptions \nin VBAT mode , and Table 27: Switching output I/O current consumption .\nSection : On-chip peripheral current consumption : modified conditions, \nand updated Table 28: Peripheral current consumption  and Note 2 .\nChanged fHSE_ext to 50 MHz and tr(HSE) /tf(HSE) maximum value in \nTable 30: High-speed external user clock characteristics .\nAdded Cin(LSE) in Table 31: Low-speed external user clock \ncharacteristics .\nUpdated maximum PLL input clock frequency, removed related note, \nand deleted jitter for MCO for RMII Ethernet typical value in Table 36: \nMain PLL characteristics . Updated maximum PLLI2S input clock \nfrequency and removed related note in Table 37: PLLI2S (audio PLL) \ncharacteristics .\nUpdated Section : Flash memory  to specify that the devices are \nshipped to customers with the Flash memory erased. Updated Table 39: Flash memory characteristics , and added t\nME in Table 40: \nFlash memory programming .\nUpdated Table 43: EMS characteristics , and Table 44: EMI \ncharacteristics .\nUpdated Table 56: I2S dynamic characteristics\nUpdated Figure 45: ULPI timing diagram  and Table 62: ULPI timing .\nAdded tCOUNTER  and tMAX_COUNT in Table 52: Characteristics of TIMx \nconnected to the APB1 domain  and Table 53: Characteristics of TIMx \nconnected to the APB2 domain . Updated Table 65: Dynamic \ncharacteristics: Ether net MAC signals for RMII . \nRemoved USB-IF certification in Section : USB OTG FS \ncharacteristics .Table 99. Document revision history (continued)\nDate Revision Changes\nDS8626 Rev 9 193/203STM32F405xx, STM32F407xx Revision history\n24-Jan-20122\n(continued)Updated Table 61: USB HS clock timing parameters\nUpdated Table 67: ADC characteristics .\nUpdated Table 68: ADC accuracy at fADC = 30 MHz .\nUpdated Note 1  in Table 74: DAC characteristics .\nSection 5.3.26: FSMC characteristics : updated Table 75  toTable 86 , \nchanged CL value to 30 pF, and modified FSMC configuration for \nasynchronous timings and waveforms. Updated Figure 59: \nSynchronous multiplexed PSRAM write timings .\nUpdated Table 98: Package thermal characteristics .\nAppendix A.1: USB OTG full speed (FS) interface solutions : modified \nFigure 93: USB controller configured as peripheral-only and used in \nFull speed mode  added Note 2 , updated Figure 94: USB controller \nconfigured as host-only and used in full speed mode  and added \nNote 2 , changed Figure 95: USB controller configured in dual mode \nand used in full speed mode  and added Note 3 . \nAppendix A.2: USB OTG high speed (HS) interface solutions : removed \nfigures USB OTG HS device-only connection in FS mode  and USB \nOTG HS host-only connection in FS mode, and updated Figure 96: \nUSB controller configured as peri pheral, host, or dual-mode and used \nin high speed mode  and added Note 2 .\nAdded Appendix A.3: Ethernet interface solutions .Table 99. Document revision history (continued)\nDate Revision Changes\nRevision history STM32F405xx, STM32F407xx\n194/203 DS8626 Rev 931-May-2012 3Updated Figure 5: STM32F 40xxx block diagram  and Figure 7: Power \nsupply supervisor interconnection with internal reset OFF\nAdded SDIO, added notes related to FSMC and SPI/I2S in Table 2: \nSTM32F405xx and STM32F407xx: features and peripheral counts .\nStarting from Silicon revision Z, USB OTG full-speed interface is now \navailable for all STM32F405xx devices.\nAdded full information on WLCSP90 package together with \ncorresponding part numbers.\nChanged number of AHB buses to 3. \nModified available Flash memory sizes in Section 2.2.4: Embedded \nFlash memory . \nModified number of maskable interrupt channels in Section 2.2.10: \nNested vectored interrupt controller (NVIC) . \nUpdated case of Regulator ON/internal reset ON, Regulator \nON/internal reset OFF, and Regulator OFF/internal reset ON in \nSection 2.2.16: Voltage regulator .\nUpdated standby mode description in Section 2.2.19: Low-power \nmodes .\nAdded Note 1  below Figure 16: STM32F40 xxx UFBGA176 ballout .\nAdded Note 1  below Figure 17: STM32F40xxx WLCSP90 ballout .\nUpdated Table 7: STM32F40xxx pin and ball definitions .\nAdded Table 8: FSMC pin definition .\nRemoved OTG_HS_INTN alternate function in Table 7: STM32F40xxx \npin and ball definitions  and Table 9: Alternate function mapping . \nRemoved I2S2_WS on PB6/AF5 in Table 9: Alternate function \nmapping .\nReplaced JTRST by NJTRST, removed ETH_RMII _TX_CLK, and \nmodified I2S3ext_SD on PC11 in Table 9: Alternate function mapping .\nAdded Table 10: register boundary addresses .\nUpdated Figure 18: STM32F40xxx memory map .\nUpdated VDDA and VREF+ decoupling capacitor in Figure 21: Power \nsupply scheme .\nAdded power dissipation maximum value for WLCSP90 in Table 14: \nGeneral operating conditions .\nUpdated VPOR/PDR in Table 19: Embedded reset and power control \nblock characteristics .\nUpdated notes in Table 21: Typical and maximum current consumption \nin Run mode, code with data processing   running from Flash memory \n(ART accelerator disabled) , Table 20: Typical and maximum current \nconsumption in Run mode, code with data processing   running from \nFlash memory (ART acce lerator enabled) or RAM , and Table 22: \nTypical and maximum current consumption in Sleep mode .\nUpdated maximum current consumption at TA = 25 °n Table 23: \nTypical and maximum current consumptions in Stop mode .Table 99. Document revision history (continued)\nDate Revision Changes\nDS8626 Rev 9 195/203STM32F405xx, STM32F407xx Revision history\n31-May-20123 \n(continued)Removed fHSE_ext  typical value in Table 30: High-speed external user \nclock characteristics . Updated Table 32: HSE 4-26 MHz oscillator \ncharacteristics  and Table 33: LSE oscillator characteristics (fLSE = \n32.768 kHz) .\nAdded fPLL48_OUT maximum value in Table 36: Main PLL \ncharacteristics .\nModified equation 1 and 2 in Section 5.3.11: PLL spread spectrum \nclock generation (SSCG) characteristics .\nUpdated Table 39: Flash memory characteristics , Table 40: Flash \nmemory programming , and Table 41: Flash memory programming with \nVPP.\nUpdated Section : Output driving current .\nTable 56: I2C characteristics : Note 4  updated and applied to th(SDA)  in \nFast mode, and removed note 4 related to th(SDA) minimum value.\nUpdated Table 67: ADC characteristics . Updated note concerning ADC \naccuracy vs. negative in jection current below Table 68: ADC accuracy \nat fADC = 30 MHz .\nAdded WLCSP90 thermal resistance in Table 98: Package thermal \ncharacteristics .\nUpdated Table 90: WLCSP90 - 4.223 x 3.969 mm, 0.400 mm pitch \nwafer level chip scale package mechanical data . \nUpdated Figure 87: UFBGA176+25 ball, 10 x 10 mm, 0.65 mm pitch, \nultra fine pitch ball grid array package outline  and Table 95: \nUFBGA176+25 ball, 10 × 10 × 0.65 mm pitch, ultra thin fine pitch ball \ngrid array mechanical data .\nAdded Figure 91: LQFP176 - 176-pin, 24 x 24 mm low profile quad flat \nrecommended footprint .\nRemoved 256 and 768 Kbyte Flash memory density from Table  : .Table 99. Document revision history (continued)\nDate Revision Changes\nRevision history STM32F405xx, STM32F407xx\n196/203 DS8626 Rev 904-Jun-2013 4Modified Note 1  below Table 2: STM32F405xx and STM32F407xx: \nfeatures and peripheral counts . \nUpdated Figure 4  title. \nUpdated Note 3  below Figure 21: Power supply scheme .\nChanged simplex mode into half-duplex mode in Section 2.2.25: Inter-\nintegrated sound (I2S) .\nReplaced DAC1_OUT and DAC2_OUT by DAC_OUT1 and \nDAC_OUT2, respectively.\nUpdated pin 36 signal in Figure 15: STM32F40xxx LQFP176 pinout .\nChanged pin number from F8 to D4 for PA13 pin in Table 7: \nSTM32F40xxx pin and ball definitions .\nReplaced TIM2_CH1/TIM2_ETR by TIM2_CH1_ETR for PA0 and PA5 \npins in Table 9: Alternate function mapping .\nChanged system memory into System memory + OTP in Figure 18: \nSTM32F40xxx memory map .\nAdded Note 1  below Table 16: VCAP_1/VCAP_2 operating conditions .\nUpdated IDDA description in Table 74: DAC characteristics .\nRemoved PA9/PB13 connection to VBUS in Figure 93: USB controller \nconfigured as peripheral-only and used in Full speed mode  and \nFigure 94: USB controller configured as host-only and used in full \nspeed mode .\nUpdated SPI throughput on front page and Section 2.2.24: Serial \nperipheral interface (SPI)\nUpdated operating voltages in Table 2: STM32F405xx and \nSTM32F407xx: features and peripheral counts .\nUpdated note in Section 2.2.14: Power supply schemes\nUpdated Section 2.2.15: Power supply supervisor\nUpdated “Regulator ON” paragraph in Section 2.2.16: Voltage \nregulator\nRemoved note in Section 2.2.19: Low-power modes\nCorrected wrong reference manual in Section 2.2.28: Ethernet MAC \ninterface with dedicated DMA and IEEE 1588 support\nUpdated Table 15: Limitations depending on the operating power \nsupply range\nUpdated Table 24: Typical and maximum current consumptions in \nStandby mode\nUpdated Table 25: Typical and maximum current consumptions in VBAT \nmode\nUpdated Table 37: PLLI2S (audio PLL) characteristics\nUpdated Table 44: EMI characteristics\nUpdated Table 49: Output voltage characteristics\nUpdated Table 51: NRST pin characteristics\nUpdated Table 55: SPI dynamic characteristics\nUpdated Table 56: I2S dynamic characteristics\nDeleted Table 59\nUpdated Table 62: ULPI timing\nUpdated Figure 46: Ethernet SMI timing diagramTable 99. Document revision history (continued)\nDate Revision Changes\nDS8626 Rev 9 197/203STM32F405xx, STM32F407xx Revision history\n04-Jun-20134\n(continued)Updated Figure 87: UFBGA176+25 ball, 10 x 10 mm, 0.65 mm pitch, \nultra fine pitch ball grid array package outline\nUpdated Table 95: UFBGA176+25 ball, 10 × 10 × 0.65 mm pitch, ultra \nthin fine pitch ball grid array mechanical data\nUpdated Figure 5: STM32F 40xxx block diagram\nUpdated Section 2: Description\nUpdated footnote (3) in Table 2: STM32F405xx and STM32F407xx: \nfeatures and peripheral counts .\nUpdated Figure 3: Compatible board design between \nSTM32F10xx/STM32F2/STM32F 40xxx for LQFP144 package\nUpdated Figure 4: Compatible board design between STM32F2 and \nSTM32F40xxx  for LQFP17 6 and BGA176 packages\nUpdated Section 2.2.14: Power supply schemes\nUpdated Section 2.2.15: Power supply supervisor\nUpdated Section 2.2.16: Voltage regulator , including figures.\nUpdated Table 14: General operating conditions , including footnote (2).\nUpdated Table 15: Limitations depending on the operating power \nsupply range , including footnote (3).\nUpdated footnote (1) in Table 67: ADC characteristics .\nUpdated footnote (2) in Table 68: ADC accuracy at fADC = 30 MHz .\nUpdated footnote (1) in Table 74: DAC characteristics .\nUpdated Figure 9: Regulator OFF .\nUpdated Figure 7: Power supply supervisor interconnection with \ninternal reset OFF .\nAdded Section 2.2.17: Regulator ON/OFF and internal reset ON/OFF \navailability .\nUpdated footnote (2) of Figure 21: Power supply scheme .\nReplaced respectively “I2S3S_WS" by "I2S3_WS”, “I2S3S_CK” by \n“I2S3_CK” and “FSMC_BLN1 ” by “FSMC_NBL1” in Table 9: Alternate \nfunction mapping .\nAdded “EVENTOUT” as alternate func tion “AF15” for pin PC13, PC14, \nPC15, PH0, PH1, PI8 in Table 9: Alternate function mapping\nReplaced “DCMI_12” by “DCMI_D12” in Table 7: STM32F40xxx pin \nand ball definitions .\nRemoved the following sentence from Section : I2C interface \ncharacteristics : ”Unless otherwise specified, the parameters \ngiven in Table 56  are derived from tests performed under the \nambient temperature, fPCLK1 frequency and VDD supply voltage \nconditions summarized in Table 14 .”.\nIn Table 7: STM32F40xxx pin and ball definitions  on page 47 :\n– For pin PC13, replaced “RTC_A F1” by “RTC_OUT, RTC_TAMP1, \nRTC_TS”\n– for pin PI8, replaced “RTC_AF2” by “RTC_TAMP1, RTC_TAMP2, \nRTC_TS”.\n– for pin PB15, added RTC_REFIN in Alternate functions column.\nIn Table 9: Alternate function mapping on page 62 , for port \nPB15, replaced “RTC_50Hz” by “RTC_REFIN”.Table 99. Document revision history (continued)\nDate Revision Changes\nRevision history STM32F405xx, STM32F407xx\n198/203 DS8626 Rev 904-Jun-20134\n(continued)Updated Figure 6: Multi-AHB matrix .\nUpdated Figure 7: Power supply supervisor interconnection with \ninternal reset OFF\nChanged 1.2 V to V12 in Section : Regulator OFF\nUpdated LQFP176 pin 48.\nUpdated Section 1: Introduction .\nUpdated Section 2: Description .\nUpdated operating voltage in Table 2: STM32F405xx and \nSTM32F407xx: features and peripheral counts .\nUpdated Note 1 .\nUpdated Section 2.2.15: Power supply supervisor .\nUpdated Section 2.2.16: Voltage regulator .\nUpdated Figure 9: Regulator OFF .\nUpdated Table 3: Regulator ON/OFF and internal reset ON/OFF \navailability .\nUpdated Section 2.2.19: Low-power modes .\nUpdated Section 2.2.20: VBAT operation .\nUpdated Section 2.2.22: Inter-integrated circuit interface (I²C) .\nUpdated pin 48 in Figure 15: STM32F40xxx LQFP176 pinout .\nUpdated Table 6: Legend/abbreviations used in the pinout table .\nUpdated Table 7: STM32F40xxx pin and ball definitions .\nUpdated Table 14: General operating conditions .\nUpdated Table 15: Limitations depending on the operating power \nsupply range .\nUpdated Section 5.3.7: Wakeup time from low-power mode .\nUpdated Table 34: HSI oscillator characteristics .\nUpdated Section 5.3.15: I/O current injection characteristics .\nUpdated Table 48: I/O static characteristics .\nUpdated Table 51: NRST pin characteristics .\nUpdated Table 56: I2C characteristics .\nUpdated Figure 39: I2C bus AC waveforms and measurement circuit .\nUpdated Section 5.3.19: Communications interfaces .\nUpdated Table 67: ADC characteristics .\nAdded Table 70: Temperature s ensor calibration values .\nAdded Table 73: Internal reference voltage calibration values .\nUpdated Section 5.3.26: FSMC characteristics .\nUpdated Section 5.3.28: SD/SDIO MMC card host interface (SDIO) \ncharacteristics .\nUpdated Table 23: Typical and maximum current consumptions in Stop \nmode .\nUpdated Section : SPI interface characteristics  included Table 55 .\nUpdated Section : I2S interface characteristics  included Table 56 .\nUpdated Table 64: Dynamic characterist ics: Ethernet MAC signals for \nSMI.\nUpdated Table 66: Dynamic characterist ics: Ethernet MAC signals for \nMII.Table 99. Document revision history (continued)\nDate Revision Changes\nDS8626 Rev 9 199/203STM32F405xx, STM32F407xx Revision history\n04-Jun-20134\n(continued)Updated Table 64: Dynamic characterist ics: Ethernet MAC signals for \nSMI.\nUpdated Table 66: Dynamic characterist ics: Ethernet MAC signals for \nMII.\nUpdated Table 79: Synchronous multiplexed NOR/PSRAM read \ntimings .\nUpdated Table 80: Synchronous multiplexed PSRAM write timings .\nUpdated Table 81: Synchronous non-mu ltiplexed NOR/PSRAM read \ntimings .\nUpdated Table 82: Synchronous non-multiplexed PSRAM write \ntimings .\nUpdated Section 5.3.27: Camera interfac e (DCMI) timing specifications  \nincluding Table 87: DCMI characteristics  and addition of Figure 72: \nDCMI timing diagram .\nUpdated Section 5.3.28: SD/SDIO MMC card host interface (SDIO) \ncharacteristics  including Table 88 .\nUpdated Chapter Figure 9.Table 99. Document revision history (continued)\nDate Revision Changes\nRevision history STM32F405xx, STM32F407xx\n200/203 DS8626 Rev 906-Mar-2015 5Replace Cortex-M4F by Cortex-M4 with FPU throughout the \ndocument. \nUpdated Section : Regulator OFF  and Table 3: Regulator ON/OFF and \ninternal reset ON/OFF availability  for LQFP176. \nUpdated Figure 15: STM32F40xxx LQFP176 pinout  and Table 7: \nSTM32F40xxx pin and ball definitions .\nUpdated Figure 6: Multi-AHB matrix .\nAdded note 1 below Figure 12: STM32F40xxx LQFP64 pinout , \nFigure 13: STM32F 40xxx LQFP100 pinout , Figure 14: STM32F40xxx \nLQFP144 pinout  and Figure 15: STM32F40xxx LQFP176 pinout .\nUpdated IVDD and IVSS in Table 12: Current characteristics .\nUpdated PLS[2:0]=101 (fallin g edge) configuration in Table 19: \nEmbedded reset and power control block characteristics .\nAdded Section : Additional current consumption . Updated Section : \nOn-chip peripheral current consumption .\nUpdated Table 29: Low-power mode wakeup timings .\nUpdated Table 32: HSE 4-26 MHz oscillator characteristics  and \nTable 33: LSE oscillator characteristics (fLSE = 32.768 kHz) . \nChanged condition related to VESD(CDM) in Table 45: ESD absolute \nmaximum ratings .\nUpdated Table 47: I/O current injection susceptibility , Table 48: I/O \nstatic characteristics , Table 49: Output voltage characteristics  \nconditions, Table 50: I/O AC characteristics  and Figure 37: I/O AC \ncharacteristics definition .\nUpdated Section : I2C interface characteristics .\nRemove note 3 in Table 69: Temperature sensor characteristics .\nUpdated Figure 72: DCMI timing diagram .\nModified Figure 75: WLCSP90 - 4.223 x 3.969 mm, 0.400 mm pitch \nwafer level chip scale package outline  and Table 90: WLCSP90 - 4.223 \nx 3.969 mm, 0.400 mm pitch wafer level chip scale package \nmechanical data . Added Figure 76: WLCSP90 - 4.223 x 3.969 mm, \n0.400 mm pitch wafer level chip scale recommended footprint  and \nTable 91: WLCSP90 recommended PCB design rules . /\nModified Figure 78: LQFP64 – 64-pin, 10 x 10 mm low-profile quad flat \npackage outline  and Table 92: LQFP64 – 64-pin 10 x 10 mm low-profile \nquad flat package  mechanical data . \nUpdated Figure 87: UFBGA176+25 ball, 10 x 10 mm, 0.65 mm pitch, \nultra fine pitch ball grid array package outline  and Table 95: \nUFBGA176+25 ball, 10 × 10 × 0.65 mm pitch, ultra thin fine pitch ball grid array mechanical data . Added Figure 88: UFBGA176+25 - 201-\nball, 10 x 10 mm, 0.65 mm pitch, ultra fine pitch ball grid array \nrecommended footprint  and Table 96: UFBGA176+2 recommended \nPCB design rules (0.65 mm pitch BGA) .\nUpdated Figure 90: LQFP176 - 176-pin, 24 x 24 mm low profile quad \nflat package outline .\nAdded Section : Device ma rking for WLCSP90 , Section : Device \nmarking for LQFP64 , Section : Device marking for LFP100 , Section : \nDevice marking for LQFP144 , Section : Device  marking for \nUFBGA176+25  and Section : Device marking for LQFP176 .Table 99. Document revision history (continued)\nDate Revision Changes\nDS8626 Rev 9 201/203STM32F405xx, STM32F407xx Revision history\n22-Oct-2015 6In the whole document, updated notes related to values guaranteed by \ndesign or by characterization. \nUpdated Table 34: HSI oscillator characteristics .\nChanged fVCO_OUT  minimum value and VCO freq to 100 MHz in \nTable 36: Main PLL characteristics  and Table 37: PLLI2S (audio PLL) \ncharacteristics .\nUpdated Figure 39: SPI timing diagram - slave mode and CPHA = 0 .\nUpdated Figure 53: 12-bit buffered /non-buffered DAC .\nRemoved note 1 related to better performance using a restricted VDD \nrange in Table 68: ADC accuracy at fADC = 30 MHz .\nUpated Figure 84: LQFP144 - 144-pin, 20  x 20 mm low-profile quad flat \npackage outline .\nUpdated Figure 87: UFBGA176+25 ball, 10 x 10 mm, 0.65 mm pitch, \nultra fine pitch ball grid array package outline  and Table 95: \nUFBGA176+25 ball, 10 × 10 × 0.65 mm pitch, ultra thin fine pitch ball \ngrid array mechanical data .\n16-Mar-2016 7Updated Figure 2: Compatible board design \nSTM32F10xx/STM32F2/STM32F 40xxx for LQFP100 package .\nUpdated |V SSX− VSS| in Table 11: Voltage characteristics  to add VREF−.\nAdded VREF− in Table 67: ADC characteristics .\nUpdated Table 90: WLCSP90 - 4.223 x 3.969 mm, 0.400 mm pitch \nwafer level chip scale package mechanical data .Table 99. Document revision history (continued)\nDate Revision Changes\nRevision history STM32F405xx, STM32F407xx\n202/203 DS8626 Rev 9          09-Sep-2016 8Removed note 1 below Figure 5: STM32F40xxx block diagram .\nUpdated definition of stresses above maximum ratings in Section 5.2: \nAbsolute maximum ratings .\nUpdated th(NSS ) in Figure 39: SPI timing diagram - slave mode and \nCPHA = 0 and Figure 40: SPI timing diagram - slave mode and CPHA \n= 1.\nAdded note related to optional marking and inset/upset marks in all \npackage marking sections. \nUpdated Figure 87: UFBGA176+25 ball, 10 x 10 mm, 0.65 mm pitch, \nultra fine pitch ball grid array package outline  and Table 95: \nUFBGA176+25 ball, 10 × 10 × 0.65 mm pitch, ultra thin fine pitch ball grid array mechanical data .\n14-Aug-2020 9Renamed Section 2.2  and Section 7  into Functional overview  and \nOrdering information , respectively.\nAdded Arm logo and legal notice in Section 1: Introduction  and \nupdated Arm wordmark in the whole document. Removed USB \ncertified logos.\nUpdated camera interfac es for STM32F405OE in Table 2: \nSTM32F405xx and STM32F407xx: features and peripheral counts .\nAdded OTP memory in Features  and Section 2.2.4: Embedded Flash \nmemory .\nChanged random number generator to  true random number generator \nin the whole document and updated Section 2.2.33: True random \nnumber generator (RNG) .\nAdded Note 1  related to UFBGA176 in Table 7: STM32F40xxx pin and \nball definitions .\nUpdated Section 5.2: Absolute maximum ratings  introduction.\nUpdated V\nPVD minimum value for PLS[2:0]=101 (falling edge) in \nTable 19: Embedded reset and power control block characteristics .\nUpdated Note 1  in Table 34: HSI oscillator characteristics .\nAdded reference to application note AN4899 in Section 5.3.16: I/O port \ncharacteristics .\nReplaced DCMI_PIXCK by  DCMI_PIXCLK in Table 9: Alternate \nfunction mapping .\nRenamed Section 7  into Ordering information .\nUpdated D1 in Figure 87: UFBGA176+25 ball, 10 x 10 mm, 0.65 mm \npitch, ultra fine pitch ball grid array package outline .Table 99. Document revision history (continued)\nDate Revision Changes\nDS8626 Rev 9 203/203STM32F405xx, STM32F407xx\n203          \nIMPORTANT NOTICE – PLEASE READ CAREFULLY\nSTMicroelectronics NV and its subsidiaries (“ST”) reserve the right to make changes, corrections, enhancements, modifications, and \nimprovements to ST products and/or to this document at any time without notice. Purchasers should obtain the latest relevant in formation on \nST products before placing orders. ST products are sold pursuant to ST’s terms and conditions of sale in place at the time of o rder \nacknowledgement.\nPurchasers are solely responsible for the choice, selection, and use of ST products and ST assumes no liability for application  assistance or \nthe design of Purchasers’ products.\nNo license, express or implied, to any intellectual property right is granted by ST herein.Resale of ST products with provisions different from the information set forth herein shall void any warranty granted by ST for  such product.\nST and the ST logo are trademarks of ST. For additional information about ST trademarks, please refer to \nwww.st.com/trademarks . All other \nproduct or service names are the property of their respective owners.\nInformation in this document supersedes and replaces information previously supplied in any prior versions of this document.\n© 2020 STMicroelectronics – All rights reserved\n'}]
!==============================================================================!
### Component Summary: STM32F407ZGT6

#### Key Characteristics and Specifications:
- **Voltage Ratings**: 
  - Operating Voltage: 1.8V to 3.6V
  - VDD minimum value of 1.7V (with external power supply supervisor)
  
- **Current Ratings**: 
  - Supply current in Run mode: 
    - Up to 168 MHz: 87 mA (typical)
    - Up to 144 MHz: 67 mA (typical)
  - Maximum current into VDD: 240 mA
  - Maximum current out of VSS: 240 mA

- **Power Consumption**: 
  - Typical current in Sleep mode: 12 mA (with all peripherals disabled)
  - Typical current in Stop mode: 0.45 mA (with main regulator in Run mode)

- **Operating Temperature Range**: 
  - -40°C to +105°C

- **Package Type**: 
  - Available in multiple packages: LQFP64, LQFP100, LQFP144, UFBGA176, LQFP176, WLCSP90

- **Special Features**: 
  - Arm Cortex-M4 core with FPU
  - Up to 1MB Flash memory and 192+4KB SRAM
  - USB OTG HS/FS, Ethernet, multiple timers, ADCs, DACs, and communication interfaces
  - Low-power modes: Sleep, Stop, and Standby
  - True random number generator
  - CRC calculation unit
  - Debug mode with SWD and JTAG interfaces

- **Moisture Sensitive Level (MSL)**: 
  - MSL is typically classified according to JEDEC J-STD-020E, but specific levels for STM32F407ZGT6 are not detailed in the provided information.

#### Description:
The **STM32F407ZGT6** is a high-performance microcontroller from the STM32F4 family, based on the Arm Cortex-M4 architecture. It features a floating-point unit (FPU) and operates at a maximum frequency of 168 MHz, delivering up to 210 DMIPS performance. The device integrates a rich set of peripherals, including USB OTG, Ethernet, multiple timers, ADCs, and DACs, making it suitable for a wide range of applications.

#### Typical Applications:
- **Motor Control**: The microcontroller's advanced timers and PWM capabilities make it ideal for motor drive applications.
- **Industrial Automation**: Suitable for PLCs, inverters, and circuit breakers due to its robust performance and connectivity options.
- **Medical Devices**: Its low-power modes and high precision make it suitable for medical equipment.
- **Consumer Electronics**: Applications in printers, scanners, and home audio appliances.
- **IoT Devices**: The Ethernet and USB connectivity options enable integration into IoT solutions.

This microcontroller is designed for applications requiring high performance, low power consumption, and extensive peripheral connectivity, making it a versatile choice for embedded systems.