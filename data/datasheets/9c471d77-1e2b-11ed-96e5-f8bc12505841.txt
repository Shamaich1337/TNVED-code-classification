[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of STM32F103T8U6 production of ST MICROELECTRONICS from the text:April 2009 Doc ID 13587 Rev 10 1/91\n1STM32F103x8\nSTM32F103xB\nMedium-density performance line AR M-based 32-bit MCU with 64 or\n128 KB Flash, USB, CAN, 7 timers , 2 ADCs, 9 communication interfaces\nFeatures\n■Core: ARM 32-bit Cortex™-M3 CPU\n– 72 MHz maximum frequency,\n1.25 DMIPS/MHz (Dhrystone 2.1) performance at 0 wait state memory access\n– Single-cycle multiplication and hardware \ndivision\n■Memories\n– 64 or 128 Kbytes of Flash memory\n– 20 Kbytes of SRAM\n■Clock, reset and supply management\n– 2.0 to 3.6 V application supply and I/Os – POR, PDR, and programmable voltage \ndetector (PVD)\n– 4-to-16 MHz crystal oscillator \n– Internal 8 MHz factory-trimmed RC– Internal 40 kHz RC\n– PLL for CPU clock\n– 32 kHz oscillator for RTC with calibration\n■Low power– Sleep, Stop and Standby modes–V\nBAT supply for RTC and backup registers\n■2 x 12-bit, 1 µs A/D converters (up to 16 \nchannels)\n– Conversion range: 0 to 3.6 V\n– Dual-sample and hold capability\n– Temperature sensor\n■DMA– 7-channel DMA controller – Peripherals supported: timers, ADC, SPIs, \nI\n2Cs and USARTs\n■Up to 80 fast I/O ports\n– 26/37/51/80 I/Os, all mappable on 16 \nexternal interrupt vectors and almost all 5 V-tolerant■Debug mode\n– Serial wire debug (SWD) & JTAG interfaces\n■7 timers– Three 16-bit timers, each with up to 4 \nIC/OC/PWM or pulse counter and quadrature (incremental) encoder input\n– 16-bit, motor control PWM timer with dead-\ntime generation and emergency stop\n– 2 watchdog timers (Independent and \nWindow)\n– SysTick timer: a 24-bit downcounter\n■Up to 9 communication interfaces– Up to 2 x I\n2C interfaces (SMBus/PMBus)\n– Up to 3 USARTs (ISO 7816 interface, LIN, \nIrDA capability, modem control)\n– Up to 2 SPIs (18 Mbit/s)\n– CAN interface (2.0B Active)– USB 2.0 full-speed interface\n■CRC calculation unit, 96-bit unique ID\n■Packages are ECOPACK®\n         Table 1. Device summary\nReference Part number\nSTM32F103x8STM32F103C8, STM32F103R8 \nSTM32F103V8, STM32F103T8\nSTM32F103xBSTM32F103RB STM32F103VB, \nSTM32F103CBBGA100 10 × 10 mm\nBGA64 5 × 5 mmVFQFPN36\n6 × 6 mmLQFP48 7 × 7 m\nLQFP100 14 × 14 m\nLQFP64 10 × 10 m\nwww.st.com\nContents STM32F103x8, STM32F103xB\n2/91  Doc ID 13587 Rev 10Contents\n1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9\n2 Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9\n2.1 Device overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\n2.2 Full compatibility throughout the family  . . . . . . . . . . . . . . . . . . . . . . . . . . 11\n2.3 Overview  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12\n2.3.1 ARM® CortexTM-M3 core with embedded Flash and SRAM  . . . . . . . . 12\n2.3.2 Embedded Flash memory  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12\n2.3.3 CRC (cyclic redundancy check) calculation unit  . . . . . . . . . . . . . . . . . . 12\n2.3.4 Embedded SRAM  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122.3.5 Nested vectored interrupt controller (NVIC) . . . . . . . . . . . . . . . . . . . . . . 12\n2.3.6 External interrupt/event controller (EXTI)  . . . . . . . . . . . . . . . . . . . . . . . 13\n2.3.7 Clocks and startup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132.3.8 Boot modes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13\n2.3.9 Power supply schemes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13\n2.3.10 Power supply supervisor  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132.3.11 Voltage regulator  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n2.3.12 Low-power modes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n2.3.13 DMA . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152.3.14 RTC (real-time clock) and backup registers . . . . . . . . . . . . . . . . . . . . . . 15\n2.3.15 Timers and watchdogs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n2.3.16 I²C bus . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172.3.17 Universal synchronous/asynchronous receiver transmitter (USART)  . . 17\n2.3.18 Serial peripheral interface (SPI) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n2.3.19 Controller area network (CAN)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172.3.20 Universal serial bus (USB) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n2.3.21 GPIOs (general-purpose inputs/outputs) . . . . . . . . . . . . . . . . . . . . . . . . 18\n2.3.22 ADC (analog-to-digital converter)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182.3.23 Temperature sensor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18\n2.3.24 Serial wire JTAG debug port (SWJ-DP) . . . . . . . . . . . . . . . . . . . . . . . . . 18\n3 Pinouts and pin description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21\n4 Memory mapping  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\nSTM32F103x8, STM32F103xB Contents\nDoc ID 13587 Rev 10 3/915 Electrical characteristi cs  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n5.1 Parameter conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n5.1.1 Minimum and maximum values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n5.1.2 Typical values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n5.1.3 Typical curves  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 325.1.4 Loading capacitor  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n5.1.5 Pin input voltage  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\n5.1.6 Power supply scheme  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 335.1.7 Current consumption measurement  . . . . . . . . . . . . . . . . . . . . . . . . . . . 34\n5.2 Absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34\n5.3 Operating conditions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\n5.3.1 General operating conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\n5.3.2 Operating conditions at power-up / power-down  . . . . . . . . . . . . . . . . . . 36\n5.3.3 Embedded reset and power control block characteristics  . . . . . . . . . . . 36\n5.3.4 Embedded reference voltage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 385.3.5 Supply current characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38\n5.3.6 External clock source characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . 47\n5.3.7 Internal clock source characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . 505.3.8 PLL characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n5.3.9 Memory characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n5.3.10 EMC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 535.3.11 Absolute maximum ratings (electrical sensitivity)  . . . . . . . . . . . . . . . . . 55\n5.3.12 I/O port characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56\n5.3.13 NRST pin characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 595.3.14 TIM timer characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60\n5.3.15 Communications interfaces  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61\n5.3.16 CAN (controller area network) interface . . . . . . . . . . . . . . . . . . . . . . . . . 665.3.17 12-bit ADC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67\n5.3.18 Temperature sensor characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71\n6 Package characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\n6.1 Package mechanical data  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72\n6.2 Thermal characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81\n6.2.1 Reference document  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81\n6.2.2 Selecting the product temperature range . . . . . . . . . . . . . . . . . . . . . . . . 82\n7 Ordering information scheme  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84\nContents STM32F103x8, STM32F103xB\n4/91  Doc ID 13587 Rev 108 Revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85\nSTM32F103x8, STM32F103xB List of tables\nDoc ID 13587 Rev 10 5/91List of tables\nTable 1. Device summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 1\nTable 2. STM32F103xx medium-density device features and peripheral counts . . . . . . . . . . . . . . . 10Table 3. STM32F103xx family  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11\nTable 4. Timer feature comparison. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 15\nTable 5. Medium-density STM32F103xx pin definitions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26Table 6. Voltage characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 34\nTable 7. Current characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 35\nTable 8. Thermal characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\nTable 9. General operating conditions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35\nTable 10. Operating conditions at power-up / power-down  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36Table 11. Embedded reset and power control block characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . 37Table 12. Embedded internal reference voltage. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3 8\nTable 13. Maximum current consumption in Run mode, code with data processing\nrunning from Flash . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39\nTable 14. Maximum current consumption in Run mode, code with data processing\nrunning from RAM. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  39\nTable 15. Maximum current consumption in Sleep mode, code running from Flash or RAM. . . . . . . 41Table 16. Typical and maximum current consumptions in Stop and Standby modes  . . . . . . . . . . . . 42Table 17. Typical current consumption in  Run mode, code with data processing\nrunning from Flash . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44\nTable 18. Typical current consumption in Sleep mode, code running from Flash or\nRAM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 45\nTable 19. Peripheral current consumption . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 46\nTable 20. High-speed external user clock characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47Table 21. Low-speed external user clock characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47Table 22. HSE 4-16 MHz oscillator characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4 9\nTable 23. LSE oscillator characteristics (f\nLSE = 32.768 kHz) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\nTable 24. HSI oscillator characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51\nTable 25. LSI oscillator characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51\nTable 26. Low-power mode wakeup timings  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52Table 27. PLL characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 52\nTable 28. Flash memory characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\nTable 29. Flash memory endurance and data retention . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53Table 30. EMS characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\nTable 31. EMI characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 54\nTable 32. ESD absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55\nTable 33. Electrical sensitivities . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . 55\nTable 34. I/O static characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 56\nTable 35. Output voltage characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 57\nTable 36. I/O AC characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58\nTable 37. NRST pin characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 59\nTable 38. TIMx characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 60\nTable 39. I\n2C characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61\nTable 40. SCL frequency (fPCLK1 = 36 MHz.,VDD = 3.3 V)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62\nTable 41. SPI characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63\nTable 42. USB startup time. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65\nTable 43. USB DC electrical characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 66\nTable 44. USB: Full-speed electrical characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66\nList of tables STM32F103x8, STM32F103xB\n6/91  Doc ID 13587 Rev 10Table 45. ADC characteristics  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67\nTable 46. RAIN max for fADC = 14 MHz. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68\nTable 47. ADC accuracy - limited test conditions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68\nTable 48. ADC accuracy  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69\nTable 49. TS characteristics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71\nTable 50. VFQFPN36 6 x 6 mm, 0.5 mm pitch, package mechanical data  . . . . . . . . . . . . . . . . . . . . 73Table 51. LFBGA100 - low profile fine pitch ball grid array package mechanical data. . . . . . . . . . . . 74Table 52. LQPF100, 100-pin low-profile quad flat package mechanical data  . . . . . . . . . . . . . . . . . . 76Table 53. LQFP64, 64-pin low-profile quad flat package mechanical data  . . . . . . . . . . . . . . . . . . . . 77Table 54. TFBGA64 - 8 x 8 active ball array, 5 x 5 mm, 0.5 mm pitch, package mechanical data. . . 78Table 55. LQFP48, 48-pin low-profile quad flat package mechanical data  . . . . . . . . . . . . . . . . . . . . 80Table 56. Package thermal characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 81\nTable 57. Ordering information scheme . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 84\nSTM32F103x8, STM32F103xB List of figures\nDoc ID 13587 Rev 10 7/91List of figures\nFigure 1. STM32F103xx performance line block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19\nFigure 2. Clock tree . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . . . 20\nFigure 3. STM32F103xx performance line LFBGA100 ballout  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21Figure 4. STM32F103xx performance line LQFP100 pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22Figure 5. STM32F103xx performance line LQFP64 pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23Figure 6. STM32F103xx performance line TFBGA64 ballout  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24Figure 7. STM32F103xx performance line LQFP48 pinout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25Figure 8. STM32F103xx Performance Line VFQFPN36 pinout. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25Figure 9. Memory map. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31\nFigure 10. Pin loading conditions. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 33\nFigure 11. Pin input voltage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\nFigure 12. Power supply scheme. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\nFigure 13. Current consumption measurement scheme . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34Figure 14. Typical current consumption in Run mode versus frequency (at 3.6 V) -\ncode with data processing running from RAM, peripherals enabled. . . . . . . . . . . . . . . . . . 40\nFigure 15. Typical current consumption in Run mode versus frequency (at 3.6 V) -\ncode with data processing running from RAM, peripherals disabled . . . . . . . . . . . . . . . . . 40\nFigure 16. Typical current consumption in Stop mode with regulator in Run mode versus\ntemperature at V\nDD = 3.3 V and 3.6 V  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42\nFigure 17. Typical current consumption in Stop mode with regulator in Low-power mode versus\ntemperature at VDD = 3.3 V and 3.6 V  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43\nFigure 18. Typical current consumption in Standby mode versus temperature at\nVDD = 3.3 V and 3.6 V  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43\nFigure 19. High-speed external clock source AC timing diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48Figure 20. Low-speed external clock source AC timing diagram. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48Figure 21. Typical application with an 8 MHz crystal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49\nFigure 22. Typical application with a 32.768 kHz crystal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50Figure 23. I/O AC characteristics definition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 59\nFigure 24. Recommended NRST pin protection  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60Figure 25. I\n2C bus AC waveforms and measurement circuit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62\nFigure 26. SPI timing diagram - slave mode and CPHA = 0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64Figure 27. SPI timing diagram - slave mode and CPHA = 1\n(1) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64\nFigure 28. SPI timing diagram - master mode(1) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65\nFigure 29. USB timings: definition of data signal rise and fall time  . . . . . . . . . . . . . . . . . . . . . . . . . . . 66Figure 30. ADC accuracy characteristics. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 69\nFigure 31. Typical connection diagram using the ADC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70Figure 32. Power supply and reference decoupling (V\nREF+ not connected to VDDA). . . . . . . . . . . . . . 70\nFigure 33. Power supply and reference decoupling (VREF+ connected to VDDA). . . . . . . . . . . . . . . . . 71\nFigure 34. VFQFPN36 6 x 6 mm, 0.5 mm pitch, package outline(1) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\nFigure 35. Recommended footprint (dimensions in mm)(1)(2)(3) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73\nFigure 36. LFBGA100 - low profile fine pitch ball grid array package outline  . . . . . . . . . . . . . . . . . . . 74Figure 37. Recommended PCB design rules (0.80/0.75 mm pitch BGA)  . . . . . . . . . . . . . . . . . . . . . . 75Figure 38. LQFP100, 100-pin low-profile quad flat package outline  . . . . . . . . . . . . . . . . . . . . . . . . . . 76Figure 39. Recommended footprint\n(1) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76\nFigure 40. LQFP64, 64-pin low-profile quad flat package outline  . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77Figure 41. Recommended footprint\n(1) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77\nFigure 42. TFBGA64 - 8 x 8 active ball array, 5 x 5 mm, 0.5 mm pitch, package outline  . . . . . . . . . . 78Figure 43. Recommended PCB design rules for pads (0.5 mm pitch BGA)  . . . . . . . . . . . . . . . . . . . . 79\nList of figures STM32F103x8, STM32F103xB\n8/91  Doc ID 13587 Rev 10Figure 44. LQFP48, 48-pin low-profile quad flat package outline  . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80\nFigure 45. Recommended footprint(1) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80\nFigure 46. LQFP100 PD max vs. TA . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83\nSTM32F103x8, STM32F103xB Introduction\nDoc ID 13587 Rev 10 9/911 Introduction\nThis datasheet provides the ordering information and mechanical device characteristics of \nthe STM32F103x8 and STM32F103xB medium-density performance line microcontrollers. \nFor more details on the whole STMicroelectronics STM32F103xx family, please refer to Section 2.2: Full compatib ility throughout the family .\nThe medium-density STM32F103xx datasheet should be read in conjunction with the low-, \nmedium- and high-density STM32F10xxx reference manual .\nThe reference and Flash programming manuals are both available from the STMicroelectronics website www.st.com.\nFor information on the Cortex™-M3 core please refer to the Cortex™-M3 Technical \nReference Manual, available from the www.arm.com website at the following address: http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0337e/.\n2 Description\nThe STM32F103x8 and STM32F103xB performance line family incorporates the high-performance ARM Cortex™-M3 32-bit RISC core operating at a 72 MHz frequency, high-speed embedded memories (Flash memory up to 128 Kbytes and SRAM up to 20 Kbytes), and an extensive range of en hanced I/Os and peri pherals connected to two APB buses. All \ndevices offer two 12-bit ADCs, three general purpose 16-bit timers plus one PWM timer, as well as standard and advanced communication interfaces: up to two I\n2Cs and SPIs, three \nUSARTs, an USB and a CAN. \nThe STM32F103xx medium-density performance line family operates from a 2.0 to 3.6 V \npower supply. It is available in both the –40 to +85 °C temperature range and the –40 to +105 °C extended temperature range. A comprehensive set of power-saving mode allows the design of low-power applications.\nThe STM32F103xx medium-density performance line family includes devices in six different \npackage types: from 36 pins to 100 pins. Depe nding on the device chosen, different sets of \nperipherals are included, the description below gives an overview of the complete range of peripherals proposed in this family.\nThese features make the STM32F103xx medium-density performance line microcontroller \nfamily suitable for a wide range of applications:\n● Motor drive and application control\n● Medical and handheld equipment\n● PC peripherals gaming and GPS platforms\n● Industrial applications: PLC, inverters, printers, and scanners\n● Alarm systems, Video intercom, and HVAC\nFigure 1  shows the general block diagram of the device family.\nDescription STM32F103x8, STM32F103xB\n10/91  Doc ID 13587 Rev 102.1 Device overview\n         \n Table 2. STM32F103xx medium-density device features and peripheral counts\nPeripheral STM32F103Tx STM32 F103Cx STM32F103Rx STM32F103Vx\nFlash - Kbytes 64 64 128 64 128 64 128\nSRAM - Kbytes 20 20 20 20 20TimersGeneral-purpose 33 3 3 3\nAdvanced-control 11 1 1CommunicationSPI 12 2 2 2\nI2C 12 2 2 2\nUSART 23 3 3 3\nUSB 11 1 1 1\nCAN 11 1 1 1\nGPIOs 26 37 51 80\n12-bit synchronized ADC\nNumber of channels2\n10 channels2\n10 channels2\n16 channels2\n16 channels\nCPU frequency 72 MHz\nOperating voltage 2.0 to 3.6 V\nOperating temperaturesAmbient temperatures: –40 to +85 °C /–40 to +105 °C (see Table 9 )\nJunction temperature: –40 to + 125 °C (see Table 9 )\nPackages VFQFPN36 LQFP48LQFP64,\nTFBGA64LQFP100, \nLFBGA100\n \nSTM32F103x8, STM32F103xB Description\nDoc ID 13587 Rev 10 11/912.2 Full compatibility throughout the family\nThe STM32F103xx is a complete family whose members are fully pin-to-pin, software and \nfeature compatible. In the reference manual, the STM32F103x4 and STM32F103x6 are identified as low-density devices, the STM32F103x8 and STM32F103xB are referred to as medium-density devices, and the STM32F103xC, STM32F103xD and STM32F103xE are referred to as high-density devices.\nLow- and high-density devices are an extension of the STM32F103x8/B devices, they are \nspecified in the STM32F103x4/6 and STM32F103xC/D/E datasheets, respectively. Low-density devices feature lower Flash memory and RAM capacities, less timers and peripherals. High-density devices have higher Flash memory and RAM capacities, and additional peripherals like SDIO, FSMC, I\n2S and DAC, while remaini ng fully compatible with \nthe other members of the STM32F103xx family.\nThe STM32F103x4, STM32F103x6, STM32F103xC, STM32F103xD and STM32F103xE \nare a drop-in replacement for STM32F103x8/B medium-density devices, allowing the user to try different memory densities and providing a greater degree of freedom during the development cycle.\nMoreover, the STM32F103xx performance line fam ily is fully compatible with all existing \nSTM32F101xx access line and STM32F102xx USB access line devices.\n         Table 3. STM32F103xx family\nPinoutLow-density devices Medium-density devices High-density devices\n16 KB \nFlash32 KB \nFlash(1)\n1. For orderable part numbers that do not show the A inte rnal code after the temperature range code (6 or 7), \nthe reference datasheet for electric al characteristics is that of  the STM32F103x8/B medium-density \ndevices.64 KB \nFlash128 KB \nFlash256 KB \nFlash384 KB \nFlash512 KB \nFlash\n6 KB RAM 10 KB RAM 20 KB RAM 20 KB RAM 48 KB RAM 64 KB RAM 64 KB RAM\n144 5 × USARTs\n4 × 16-bit timers, 2 × basic timers\n3 × SPIs, 2 × I2Ss, 2 × I2Cs\nUSB, CAN, 2 × PWM timers\n3 × ADCs, 1 × DAC, 1 × SDIO\nFSMC (100 and 144 pins)1003 × USARTs\n3 × 16-bit timers\n2 × SPIs, 2 × I2Cs, USB, \nCAN, 1 × PWM timer\n2 × ADC642 × USARTs\n2 × 16-bit timers1 × SPI, 1 × I\n2C, USB, \nCAN, 1 × PWM timer\n2 × ADCs48\n36\nDescription STM32F103x8, STM32F103xB\n12/91  Doc ID 13587 Rev 102.3 Overview\n2.3.1 ARM® CortexTM-M3 core with embe dded Flash and SRAM\nThe ARM Cortex™-M3 processor is the latest generation of ARM processors for embedded \nsystems. It has been developed to provide a low-cost platform that meets the needs of MCU implementation, with a reduced pin count and low-power consumption, while delivering outstanding computational performance and an advanced system response to interrupts.\nThe ARM Cortex™-M3 32-bit RISC processor features exceptional code-efficiency, \ndelivering the high-performance expected from an ARM core in the memory size usually associated with 8- and 16-bit devices.\nThe STM32F103xx performance line family having an embedded ARM core, is therefore \ncompatible with all ARM tools and software.\nFigure 1  shows the general block diagram of the device family.\n2.3.2 Embedded Flash memory\n64 or 128 Kbytes of embedded Flash is available for storing programs and data. \n2.3.3 CRC (cyclic redundanc y check) calculation unit\nThe CRC (cyclic redundancy check) calculation unit is used to get a CRC code from a 32-bit \ndata word and a fixed generator polynomial.\nAmong other applications, CRC-based techniques are used to verify data transmission or \nstorage integrity. In the scope of the EN/IEC 60335-1 standard, they offer a means of verifying the Flash memory integrity. The CRC ca lculation unit helps co mpute a signature of \nthe software during runtime, to be compared with a reference signature generated at link-time and stored at a given memory location.\n2.3.4 Embedded SRAM\nTwenty Kbytes of embedded SRAM accessed (read/write) at CPU clock speed with 0 wait states.\n2.3.5 Nested vectored interrupt controller (NVIC)\nThe STM32F103xx performance line embeds a nested vectored interrupt controller able to handle up to 43 maskable interrupt channels (not including the 16 interrupt lines of Cortex™-M3) and 16 priority levels.\n● Closely coupled NVIC gives low-latency interrupt processing\n● Interrupt entry vector table address passed directly to the core\n● Closely coupled NVIC core interface\n● Allows early processing of interrupts\n● Processing of late arriving  higher priority interrupts\n● Support for tail-chaining\n● Processor state automatically saved\n● Interrupt entry restored on interrupt exit with no instruction overhead\nSTM32F103x8, STM32F103xB Description\nDoc ID 13587 Rev 10 13/91This hardware block provides flexible interrupt management features with minimal interrupt \nlatency.\n2.3.6 External interrupt /event controller (EXTI)\nThe external interrupt/event controller consists of 19 edge detector lines used to generate \ninterrupt/event requests. Each line can be independently configured to select the trigger event (rising edge, falling edge, both) and can be masked independently. A pending register maintains the status of the interrupt requests. The EXTI can detect an external line with a pulse width shorter than the Internal APB2 cl ock period. Up to 80 GP IOs can be connected \nto the 16 external interrupt lines.\n2.3.7 Clocks and startup\nSystem clock selection is performed on startup,  however the internal RC 8 MHz oscillator is \nselected as default CPU clock on reset. An ex ternal 4-16 MHz clock can be selected, in \nwhich case it is monitored for failure. If failure  is detected, the system automatically switches \nback to the internal RC oscillato r. A software interrupt is genera ted if enabled. Similarly, full \ninterrupt management of the PLL clock entry is available when necessary (for example on failure of an indirectly used extern al crystal, resonator or oscillator).\nSeveral prescalers allow the configurati on of the AHB frequenc y, the high-speed APB \n(APB2) and the low-speed APB (APB1) domains. The maximum frequency of the AHB and \nthe high-speed APB domains is 72 MHz. The maximum allowed frequency of the low-speed APB domain is 36 MHz. See Figure 2  for details on the clock tree.\n2.3.8 Boot modes\nAt startup, boot pins are used to select one of three boot options:\n● Boot from User Flash\n● Boot from System Memory\n● Boot from embedded SRAM\nThe boot loader is located in System Memory. It is used to reprogram the Flash memory by \nusing USART1. For further details please refer to AN2606.\n2.3.9 Power supply schemes\n● VDD = 2.0 to 3.6 V: external power supply for I/Os and the internal regulator. \nProvided externally through VDD pins.\n● VSSA, VDDA = 2.0 to 3.6 V: external analog power supplies for ADC, reset blocks, RCs \nand PLL (minimum voltage to be applied to VDDA is 2.4 V when the ADC is used).\nVDDA and VSSA must be connected to VDD and VSS, respectively.\n● VBAT = 1.8 to 3.6 V: power supply for RTC, external clock 32 kHz oscillator and backup \nregisters (through power switch) when VDD is not present.\nFor more details on how to connect power pins, refer to Figure 12: Power supply scheme .\n2.3.10 Power supply supervisor\nThe device has an integrated power-on reset (POR)/power-down reset (PDR) circuitry. It is \nalways active, and ensures proper operation starting from/down to 2 V. The device remains \nDescription STM32F103x8, STM32F103xB\n14/91  Doc ID 13587 Rev 10in reset mode when VDD is below a specified threshold, VPOR/PDR , without the need for an \nexternal reset circuit.\nThe device features an embedded programmable voltage detector (PVD) that monitors the \nVDD/VDDA power supply and compares it to the VPVD threshold. An interrupt can be \ngenerated when VDD/VDDA drops below the VPVD threshold and/or when VDD/VDDA is higher \nthan the VPVD threshold. The interrupt service routine can then generate a warning \nmessage and/or put the MCU into a safe state. The PVD is enabled by software. \nRefer to Table 11: Embedded reset and power control block characteristics  for the values of \nVPOR/PDR  and VPVD. \n2.3.11 Voltage regulator\nThe regulator has three operation modes: main (MR), low power (LPR) and power down.\n● MR is used in the nominal regulation mode (Run) \n● LPR is used in the Stop mode\n● Power down is used in Standby mode: the regulator output is in high impedance: the kernel circuitry is powered down, inducing ze ro consumption (but the contents of the \nregisters and SRAM are lost)\nThis regulator is always enabled after reset. It is disabled in Standby mode, providing high \nimpedance output.\n2.3.12 Low-power modes\nThe STM32F103xx performance line supports three low-power modes to achieve the best compromise between low power consumption, short startup time and available wakeup sources:\n● Sleep  mode\nIn Sleep mode, only the CPU is stopped. All peripherals continue to operate and can \nwake up the CPU when an interrupt/event occurs.\n● Stop  mode\nThe Stop mode achieves the lowest power consumption while retaining the content of \nSRAM and registers. All clocks in the 1.8 V domain are stopped, the PLL, the HSI RC and the HSE crystal oscillators  are disabled. The voltage regulator can also be put \neither in normal or in low power mode. The device can be woken up from Stop mode by any of the EXTI line. The EXTI line source can be one of the 16 external lines, the PVD output, the RTC alarm or the USB wakeup. \n● Standby  mode\nThe Standby mode is used to achieve the lowest power consumption. The internal \nvoltage regulator is switched off so that the entire 1.8 V domain is powered off. The PLL, the HSI RC and the HSE crystal oscillators  are also switched off. After entering \nStandby mode, SRAM and register contents are lost except for registers in the Backup domain and Standby circuitry. \nThe device exits Standby mode when an external reset (NRST pin), an IWDG reset, a \nrising edge on the WKUP pin, or an RTC alarm occurs.\nNote: The RTC, the IWDG, and the corresponding clock sources are not stopped by entering Stop \nor Standby mode.\nSTM32F103x8, STM32F103xB Description\nDoc ID 13587 Rev 10 15/912.3.13 DMA\nThe flexible 7-channel general-purpose DMA is able to manage memory-to-memory, \nperipheral-to-memory and memory-to-peripheral transfers. The DMA controller supports circular buffer management avoiding the generation of interrupts when the controller reaches the end of the buffer.\nEach channel is connected to dedicated hardware DMA requests, with support for software \ntrigger on each channel. Configuration is made by software and transfer sizes between source and destination are independent.\nThe DMA can be used with the main peripherals: SPI, I\n2C, USART, general-purpose and \nadvanced-control timers TIMx and ADC.\n2.3.14 RTC (real-time cl ock) and backup registers\nThe RTC and the backup registers are supplied through a switch that takes power either on \nVDD supply when present or through the VBAT pin. The backup registers are ten 16-bit \nregisters used to store 20 bytes of user application data when VDD power is not present.\nThe real-time clock provides a set of continuo usly running counters which can be used with \nsuitable software to provide a clock calendar function, and provides an alarm interrupt and a periodic interrupt. It is clocke d by a 32.768 kHz external crysta l, resonator or oscillator, the \ninternal low-power RC oscillator or the hi gh-speed external cloc k divided by 128. The \ninternal low-power RC has a typical frequency of 40 kHz. The RTC can be calibrated using an external 512 Hz output to compensate for any natural crystal deviation. The RTC features a 32-bit programmable counter for long-term measurement using the Compare register to generate an alarm. A 20-bit prescaler is used for the time base clock and is by default configured to generate a time base of 1 second from a clock at 32.768 kHz. \n2.3.15 Timers and watchdogs\nThe medium-density STM32F103xx performance line devices include an advanced-control timer, three general-purpose timers, two watchdog timers and a SysTick timer.\nTable 4  compares the features of the advanced-control and general-purpose timers.\n         \nAdvanced-control timer (TIM1)\nThe advanced-control timer (TIM1) can be seen as a three-phase PWM multiplexed on 6 \nchannels. It has complementary PWM outputs with programmable inserted dead-times. It Table 4. Timer feature comparison\nTimerCounter \nresolutionCounter \ntypePrescaler \nfactorDMA request \ngenerationCapture/compare \nchannelsComplementary\noutputs\nTIM1 16-bitUp, \ndown, \nup/downAny integer \nbetween 1 \nand 65536Yes 4 Ye s\nTIM2, \nTIM3, \nTIM416-bitUp, \ndown, \nup/downAny integer \nbetween 1 \nand 65536Yes 4 N o\nDescription STM32F103x8, STM32F103xB\n16/91  Doc ID 13587 Rev 10can also be seen as a complete general-purpose timer. The 4 independent channels can be \nused for\n● Input capture\n● Output compare\n● PWM generation (edge- or center-aligned modes)\n● One-pulse mode output\nIf configured as a general-purpose 16-bit timer, it has the same features as the TIMx timer. If \nconfigured as the 16-bit PW M generator, it has full modu lation capability (0-100%). \nIn debug mode, the advanced-control timer counter can be frozen and the PWM outputs \ndisabled to turn off any power switch driven by these outputs.\nMany features are shared with those of the general-purpose TIM timers which have the \nsame architecture. The advanced-control timer can therefore work together with the TIM timers via the Timer Link feature for synchronization or event chaining. \nGeneral-purpose timers (TIMx)\nThere are up to three synchronizable general-purpose timers embedded in the STM32F103xx performance line devices. These timers are based on a 16-bit auto-reload up/down counter, a 16-bit prescaler and feature 4 independent channels each for input capture/output compare, PWM or one-pulse mode output. This gives up to 12 input captures/output compares/PWMs on the largest packages.The general-purpose timers can work together with the advanced-control timer via the Timer \nLink feature for synchronization or event chaining. Their counter can be frozen in debug mode. Any of the general-purpose timers can be used to generate PWM outputs. They all have independent DMA request generation.\nThese timers are capable of handling quadrature (incremental) encoder signals and the \ndigital outputs from 1 to 3 hall-effect sensors.\nIndependent watchdog\nThe independent watchdog is based on a 12-bit downcounter and 8-bit prescaler. It is clocked from an independent 40 kHz internal RC and as it operates independently of the main clock, it can operate in Stop and Standby modes. It can be used either as a watchdog to reset the device when a problem occurs, or as a free-running timer for application timeout management. It is hardware- or software-configurable through the option bytes. The counter can be frozen in debug mode.\nWindow watchdog\nThe window watchdog is based on a 7-bit downc ounter that can be set as free-running. It \ncan be used as a watchdog to reset the device when a problem occurs. It is clocked from the main clock. It has an early warning interrup t capability and the counter can be frozen in \ndebug mode.\nSTM32F103x8, STM32F103xB Description\nDoc ID 13587 Rev 10 17/91SysTick timer\nThis timer is dedicated for OS, but could al so be used as a standard downcounter. It \nfeatures:\n● A 24-bit downcounter\n● Autoreload capability\n● Maskable system interrupt generation when the counter reaches 0\n● Programmable clock source \n2.3.16 I²C bus\nUp to two I²C bus interfaces can operate in multimaster and slave modes. They can support standard and fast modes. \nThey support dual slave addressing (7-bit only) and both 7/10-bit addressing in master \nmode. A hardware CRC generation/verification is embedded.\nThey can be served by DMA and they support SM Bus 2.0/PM Bus.\n2.3.17 Universal sy nchronous/asynchronous receiver  transmitter (USART)\nOne of the USART interfaces is able to communicate at speeds of up to 4.5 Mbit/s. The \nother available interfaces communicate at up to 2.25 Mbit/s. They provide hardware management of the CTS and RTS signals, IrDA SIR ENDEC support, are ISO 7816 compliant and have LIN Master/Slave capability.\nAll USART interfaces can be served by the DMA controller.\n2.3.18 Serial perip heral interface (SPI)\nUp to two SPIs are able to communicate up to 18 Mbits/s in slave and master modes in full-\nduplex and simplex communication modes. The 3-bit prescaler gives 8 master mode frequencies and the frame is configurable to 8 bits or 16 bits. The hardware CRC generation/verification supports basic SD Card/MMC modes. \nBoth SPIs can be served  by the DMA controller.\n2.3.19 Controller area network (CAN)\nThe CAN is compliant with specifications 2.0A and B (active) with a bit rate up to 1 Mbit/s. It \ncan receive and transmit standard frames with 11-bit identifiers as well as extended frames with 29-bit identifiers. It has three transmit mailboxes, two receive FIFOs with 3 stages and 14 scalable filter banks.\n2.3.20 Universal serial bus (USB)\nThe STM32F103xx performance line embeds a USB device peripheral compatible with the \nUSB full-speed 12 Mbs. The USB interface implements a full-speed (12 Mbit/s) function interface. It has software-configurable endpoint setting and suspend/resume support. The dedicated 48 MHz clock is generated from the internal main PLL (the clock source must use a HSE crystal oscillator).\nDescription STM32F103x8, STM32F103xB\n18/91  Doc ID 13587 Rev 102.3.21 GPIOs (genera l-purpose inputs/outputs)\nEach of the GPIO pins can be configured by software as output (push-pull or open-drain), as \ninput (with or without pull-up or pull-down) or as peripheral alternate function. Most of the GPIO pins are shared with digital or analog alternate functions. All GPIOs are high-current-capable except for analog inputs.\nThe I/Os alternate function configuration can be locked if needed following a specific \nsequence in order to avoid spurious writing to the I/Os registers.\nI/Os on APB2 with up to  18 MHz toggling speed\n2.3.22 ADC (analog-to -digital converter)\nTwo 12-bit analog-to-digital converters are embedded into STM32F103xx performance line \ndevices and each ADC shares up to 16 external channels, performing conversions in single-shot or scan modes. In scan mode, automatic conversion is performed on a selected group of analog inputs.\nAdditional logic functions embedded in the ADC interface allow:\n● Simultaneous sample and hold\n● Interleaved sample and hold\n● Single shunt\nThe ADC can be served by the DMA controller.An analog watchdog feature allows very precise monitoring of the converted voltage of one, \nsome or all selected channels. An interrupt is generated when the converted voltage is outside the programmed thresholds.\nThe events generated by the general-purpose timers (TIMx) and the advanced-control timer \n(TIM1) can be internally connected to the ADC start trigger, injection trigger, and DMA trigger respectively, to allow the application to synchronize A/D conversion and timers.\n2.3.23 Temperature sensor\nThe temperature sensor has to generate a voltage that varies linearly with temperature. The \nconversion range is between 2 V < VDDA < 3.6 V. The temperature sensor is internally \nconnected to the ADC12_IN16 input channel which is used to convert the sensor output voltage into a digital value.\n2.3.24 Serial wire JTAG debug port (SWJ-DP)\nThe ARM SWJ-DP Interface is embedded. and is a combined JTAG and serial wire debug port that enables either a serial wire debug or a JTAG probe to be connected to the target. The JTAG TMS and TCK pins are shared with SWDIO and SWCLK, respectively, and a specific sequence on the TMS pin is used to switch between JTAG-DP and SW-DP .\nSTM32F103x8, STM32F103xB Description\nDoc ID 13587 Rev 10 19/91Figure 1. STM32F103xx performance line block diagram\n1. TA = –40 °C to +105 °C (junction temperature up to 125 °C).\n2. AF = alternate function on I/O port pin.USBDP/CAN_TXPA[15:0]EXTI\nWWDG12bit ADC116AFJTDI\nJTCK/ SWCLK\nJTMS/SWDIONJTR STTRST\nJTDO\nNRSTVDD = 2 to 3.6V\n80AF\nPB[15:0]\nPC[15:0]AHB2\nMOSI,MISO,SCK,N SSSRAM \n2x(8x16bit)WAKEUP\nGPIOA\nGPIOB\nGPIOCFmax: 72  MHzVSS\nSCL,SDA I2C2\nVREF+GP DMA\nTIM2\nTIM3XTAL O SC \n4-16 MHz\nXTAL 32 kHzOSC_IN\nOSC_OUT\nOSC32_OUTOSC32_INPLL & APB1 : Fmax=24 / 36 MHzPCLK1\nHCLKCLOCK \nMANAGTPCLK2\nas AF\nas AFFlash 1 2 8 KB VOLT. REG.\n3.3V TO 1. 8VPOWER\nBackup interf aceas AF\nTIM 4BusMatrix64 bitInterf ace\n20 KB\nRTCRC 8 MHzCortex-M 3 CPUIbus\nDbuspbu s\nobl flash\nSRAM 512BTrace \nControlle r\nUSART1USART2\nSPI2\nbxCAN7 channels\nBackup\nreg\n4 Ch annels\nTIM13 compl. Ch annels\nSCL,SDA,SMBA I2C1\nas AFRX,TX, CT S, RTS,USART3\nTemp sensorVREF-PD[15:0] GPIOD\nPE[15:0] GPIOE\nAHB:Fmax=48/72 MHz\nETR and BKIN4 Ch annels\n4 Ch annels\n4 Ch annelsFCLK\nRC 40 kHz\nStandbyIWDG \n@VBAT\nPOR / PDRSUPPLY @VDDA\nVDDA\nVSSA\n@VDDAVBAT\nRX,TX, CT S, RTS,\nSmart Card as AFRX,TX, CT S, RTS,\nCK, SmartCard as AFAPB2 : Fmax=48 / 72 MHzNVIC\nSPI1MOSI,MISO,\nSCK,N SS as AF\n12bit ADC2IF\nIFIF interf ace@VDDA\nSUPERVI SION\nPVDRst\nInt@VDD\nAHB2\nAPB2 APB1\nAWUTAMPER-RTC@VDD\nUSB 2.0 F S USBDM/CAN_RXSyste m\nai14390dTRACECLK\nTRACED[0: 3]\nas AS\nSW/JTAGTPIU\nTrace/trig\nCK, SmartCard as AF\nDescription STM32F103x8, STM32F103xB\n20/91  Doc ID 13587 Rev 10Figure 2. Clock tree\n1. When the HSI is used as a PLL clock input, the maxi mum system clock frequency t hat can be achieved is \n64 MHz.\n2. For the USB function to be available, both HSE and PLL must be enabled, with the CPU running at either \n48 MHz or 72 MHz.\n3. To have an ADC conversion time of 1 µs, APB2 must be at 14 MHz, 28 MHz or 56 MHz.HSE OSC4-16 MHz\nOSC_IN OSC_OUT\nOSC32_IN\nOSC32_OUTLSE OSC\n32.768 kHzHSI RC8 MHz\nLSI RC\n40 kHzto Independent Watchdog (IWDG)PLLx2, x3, x4 PLLMUL\nLegend:\nMCO Clock OutputMainPLLXTPRE\n/2..., x16 AHB\nPrescaler\n/1, 2..512\n/2 PLLCLK\nHSI\nHSEAPB1\nPrescaler\n/1, 2, 4, 8, 16\nADC\nPrescaler\n/2, 4, 6, 8ADCCLKPCLK1HCLK\nPLLCLKto AHB bus, core, \nmemory and DMAUSBCLK\nto USB interface\nto TIM2, 3and 4USB\nPrescaler\n/1, 1.5\nto ADC\nLSE\nLSIHSI\n/128/2\nHSI\nHSEperipheralsto APB1\nPeripheral Clock \nEnable (13 bits)\nEnable (3 bits)Peripheral Clock \nAPB2\nPrescaler\n/1, 2, 4, 8, 16PCLK2\nto TIM1 peripheralsto APB2\nPeripheral Clock \nEnable (11 bits)\nEnable (1 bit)Peripheral Clock 48 MHz\n72 MHz max\n72 MHz\n72 MHz max36 MHz max\nto RTCPLLSRC SW\nMCO CSSto Cortex System timer /8Clock \nEnable (3 bits)\nSYSCLK\n max\nRTCCLK\nRTCSEL[1:0] TIM1CLKTIMXCLK\nIWDGCLK\nSYSCLKFCLK Cortex\nfree running clock\nTIM2,3, 4\nIf (APB1 prescaler =1) x1else                              x2\nTIM1 timer\nIf (APB2 prescaler =1) x1else                              x2\nHSE = high-speed external clock signal\nHSI = high-speed internal clock signalLSI = low-speed internal clock signalLSE = low-speed external clock signal\nai14903\nSTM32F103x8, STM32F103xB Pinouts and pin description\nDoc ID 13587 Rev 10 21/913 Pinouts and pin description\nFigure 3. STM32F103xx performance line LFBGA100 ballout\nAI16001cPE10PC14-\nOSC32_IN\nPC5 PA5PC3PB4\nPE15PB2 PC4 PA4\nHPE14\nPE11 PE7D PD4PD3PB8 PE3\nC\nPD0PC12\nPE5PB5\nPC0PE2\nB PC11 PD2PC15-\nOSC32_OUTPB7\nPB6A8 7 6 5 4 3 2 1\nVSS_5OSC_IN\nOSC_OUT VDD_5\nGFE\nPC1\nVREF–PC13-\nTAMPER-RTCPB9 PA15 PB3\nPE4 PE1\nPE0\nVSS_1PD1 PE6 NRST PC2 VSS_3VSS_4\nNC VDD_3VDD_4\nPB15VBATPD5\nPD6\nBOOT0 PD7\n VSS_2\nVSSA\nPA1VDD_2VDD_1\nPB14PA0-WKUP10 9\nKJPD10PD11PA8PA9\nPA10PA11PA12 PC10PA13 PA14\nPC9 PC7\nPC6\nPD15PC8\nPD14\nPE12\nPB1 PA7 PB11PE8 PB0 PA6 PB10\nPE13 PE9 VDDAPB13 VREF+\nPA3 PB12PA2\nPD8PD9 PD13\nPD12\nPinouts and pin description STM32F103x8, STM32F103xB\n22/91  Doc ID 13587 Rev 10Figure 4. STM32F103xx performance line LQFP100 pinout\n100\n99\n98\n9796\n95\n9493\n92\n91\n90\n89\n88\n87\n86\n85\n84\n83\n8281\n80\n79\n78\n77\n761\n2\n34\n5\n67\n8\n910\n11\n1213\n14\n1516\n17\n1819\n20\n2122\n23\n242575\n74\n7372\n71\n7069\n68\n6766\n65\n6463\n62\n6160\n59\n5857\n56\n5554\n53\n5251VDD_2 \nVSS_2  NC  \nPA 13  \nPA 12  PA 11  \nPA 10  \nPA 9  PA 8  \nPC9  \nPC8  PC7  \nPC6  \nPD15  PD14  \nPD13  \nPD12  PD11  \nPD10  \nPD9  PD8  \nPB15  \nPB14  PB13  \nPB12  PA3\nVSS_4\nVDD_4\nPA4PA5\nPA6\nPA7\nPC4\nPC5\nPB0\nPB1\nPB2\nPE7\nPE8\nPE9\nPE10\nPE11\nPE12\nPE13\nPE14\nPE15\nPB10\nPB11\nVSS_1\nVDD_1VDD_3  \nVSS_3  \nPE1  \nPE0  \nPB9  \nPB8  BOOT0  \nPB7  \nPB6  \nPB5  \nPB4  \nPB3  \nPD7  \nPD6  \nPD5  \nPD4  \nPD3  \nPD2  \nPD1  PD0  \nPC12  \nPC11  \nPC10  \nPA15  \nPA14 26\n2728\n29\n3031\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n424344\n45\n46\n47\n48\n49\n50PE2\nPE3\nPE4PE5\nPE6\nVBAT\nPC13-TAMPER-RTC\nPC14-OSC32_IN\nPC15-OSC32_OUT\nVSS_5\nVDD_5\nOSC_IN\nOSC_OUT\nNRST\nPC0\nPC1PC2\nPC3\nVSSA\nVREF-\nVREF+\nVDDA\nPA0-WKUP\nPA1\nPA2\nai14391LQFP100\nSTM32F103x8, STM32F103xB Pinouts and pin description\nDoc ID 13587 Rev 10 23/91Figure 5. STM32F103xx performance line LQFP64 pinout\n64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49\n48\n47\n 46\n 45\n 44 43\n42\n41\n40\n3938\n37\n3635\n34\n33\n17 18 19 20 21 22 23 24 29 30 31 32 25 26 27 281\n2\n3\n4\n5\n6 \n7 \n8 \n9 \n10\n11 12 \n13\n14\n15\n16VBAT\nPC13-TAMPER-RTC\nPC14-OSC32_IN\nPC15-OSC32_OUT\nPD0 OSC_IN\nPD1 OSC_OUT\nNRST\nPC0\nPC1\nPC2\nPC3\nVSSA\nVDDA\nPA0-WKUP\nPA1\nPA2\nVDD_3  \nVSS_3  \nPB9  PB8  \nBOOT0  \nPB7  \nPB6  \nPB5  \nPB4  \nPB3  \nPD2  \nPC12  PC11  \nPC10  \nPA15  PA14 \nVDD_2  \nVSS_2  \nPA13  \nPA12  \nPA11  \nPA10  PA9  \nPA8  \nPC9  PC8  \nPC7  \nPC6  PB15  \nPB14  \nPB13  \nPB12 PA3\nVSS_4\nVDD_4\nPA4\nPA5PA6\nPA7\nPC4\nPC5\nPB0\nPB1\nPB2\nPB10\nPB11\nVSS_1\nVDD_1LQFP64\nai14392\nPinouts and pin description STM32F103x8, STM32F103xB\n24/91  Doc ID 13587 Rev 10Figure 6. STM32F103xx performance line TFBGA64 ballout\nAI15494PB2PC14-\nOSC32_IN\nPA7 PA4PA2PA15\nPB11PB1 PA6 PA3\nHPB10\nPC5 PC4D PA8PA9BOOT0 PB8\nC\nPC9PA11\nPB6PC12\nVDDAPB9\nB PA12 PC10PC15-\nOSC32_OUTPB3\nPD2A8 7 6 5 4 3 2 1\nVSS_4OSC_IN\nOSC_OUT VDD_4\nGFE\nPC2\nVREF+PC13-\nTAMPER-RTCPB4 PA13 PA14\nPB7 PB5\nVSS_3\nPC7 PC8 PC0 NRST PC1\nPB0 PA5 PB14VDD_2 VDD_3\nPB13VBATPC11\nPA10\nVSS_2VSS_1\n PC6 VSSA\nPA1VDD_1\nPB15\nPB12PA0-WKUP\nSTM32F103x8, STM32F103xB Pinouts and pin description\nDoc ID 13587 Rev 10 25/91Figure 7. STM32F103xx performance line LQFP48 pinout\nFigure 8. STM32F103xx Performance Line VFQFPN36 pinout44 43 42 41 40 39 38 37\n36\n35\n34\n33\n32\n31\n30\n29\n28\n27\n26\n25\n242312\n13 14 15 16 17 18 19 20 21 221\n2\n3\n4\n5\n6 \n7 \n8 \n9 \n10\n1148 47 46 45PA3\nPA4\nPA5\nPA6\nPA7\nPB0\nPB1\nPB2\nPB10\nPB11\nVSS_1\nVDD_1VDD_2  VSS_2  \nPA13  \nPA12  \nPA11  \nPA10  \nPA9  \nPA8  \nPB15  \nPB14  \nPB13  PB12 VBAT\nPC13-TAMPER-RTC\nPC14-OSC32_IN\nPC15-OSC32_OUT\nPD0-OSC_IN\nPD1-OSC_OUT\nNRST\nVSSA\nVDDA\nPA0-WKUP\nPA1\nPA2\nVDD_3  \nVSS_3  \nPB9  \nPB8  \nBOOT0  \nPB7  \nPB6  \nPB5  \nPB4  PB3  \nPA15  \nPA14 \nLQFP48\nai14393bVSS_3\nBOOT0\nPB7PB6PB5PB4PB3PA15PA14\n36 35 34 33 32 31 30 29 28\nVDD_3 1 27 VDD_2\nOSC_IN/PD0 2 26 VSS_2\nOSC_OUT/PD1 3 25 PA13\nNRST 4\nQFN3624 PA12\nVSSA 5 23 PA11\nVDDA 6 22 PA10\nPA0-WKUP 7 21 PA9\nPA1 8 20 PA8\nPA2 9 19 VDD_1\n10 11 12 13 14 15 16 17 18\nPA3\nPA4PA5PA6PA7\nPB0PB1PB2\nV\nSS_1\nai14654\nPinouts and pin description STM32F103x8, STM32F103xB\n26/91  Doc ID 13587 Rev 10         Table 5. Medium-density STM32F103xx pin definitions\nPins \nPin name\nType(1)\nI / O Level(2)\nMain \nfunction(3) \n(after reset)Alternate functionsLFBGA100\nLQFP48\nTFBGA64\nLQFP64\nLQFP100\nVFQFPN36Default Remap\nA3 - - 1 - PE2 I/O FT PE2 TRACECK\nB3 - - 2 - PE3 I/O FT PE3 TRACED0\nC3 - - 3 - PE4 I/O FT PE4 TRACED1\nD3 - - 4 - PE5 I/O FT PE5 TRACED2\nE3 - - 5 - PE6 I/O FT PE6 TRACED3\nB2 1 B2 1 6 - VBAT SVBAT\nA2 2 A2 2 7 -PC13-TAMPER-\nRTC(4) I/O PC13(5)TAMPER-RTC\nA1 3 A1 3 8 - PC14-OSC32_IN(4)I/O PC14(5)OSC32_IN\nB1 4 B1 4 9 -PC15-\nOSC32_OUT(4) I/O PC15(5)OSC32_OUT\nC 2 --- 1 0 - VSS_5 SVSS_5\nD 2 --- 1 1 - VDD_5 SVDD_5\nC1 5 C1 5 12 2 OSC_IN I OSC_IN\nD1 6 D1 6 13 3 OSC_OUT O OSC_OUT\nE1 7 E1 7 14 4 NRST I/O NRST  \nF1 - E3 8 15 - PC0 I/O PC0 ADC12_IN10 \nF2 - E2 9 16 - PC1 I/O PC1 ADC12_IN11 \nE2 - F2 10 17 - PC2 I/O PC2 ADC12_IN12 \nF3 - -(6)11 18 - PC3 I/O PC3 ADC12_IN13 \nG1 8 F1 12 19 5 VSSA SVSSA\nH 1 --- 2 0 - VREF- SVREF-\nJ1 - G1(6)-2 1 - VREF+ SVREF+\nK1 9 H1 13 22 6 VDDA SVDDA\nG2 10 G2 14 23 7 PA0-WKUP I/O PA0WKUP/\nUSART2_CTS(7)/\nADC12_IN0/\nTIM2_CH1_ETR(7)\nH2 11 H2 15 24 8 PA1 I/O PA1USART2_RTS(7)/\nADC12_IN1/ \nTIM2_CH2(7)\nJ2 12 F3 16 25 9 PA2 I/O PA2USART2_TX(7)/\nADC12_IN2/ \nTIM2_CH3(7)\nSTM32F103x8, STM32F103xB Pinouts and pin description\nDoc ID 13587 Rev 10 27/91K2 13 G3 17 26 10 PA3 I/O PA3USART2_RX(7)/\nADC12_IN3/\nTIM2_CH4(7)\nE4 - C2 18 27 - VSS_4 SVSS_4\nF4 - D2 19 28 - VDD_4 SVDD_4\nG3 14 H3 20 29 11 PA4 I/O PA4SPI1_NSS(7)/ \nUSART2_CK(7)/ \nADC12_IN4 \nH3 15 F4 21 30 12 PA5 I/O PA5SPI1_SCK(7)/ \nADC12_IN5 \nJ3 16 G4 22 31 13 PA6 I/O PA6SPI1_MISO(7)/\nADC12_IN6/\nTIM3_CH1(7)TIM1_BKIN\nK3 17 H4 23 32 14 PA7 I/O PA7SPI1_MOSI(7)/\nADC12_IN7/\nTIM3_CH2(7)TIM1_CH1N\nG4 - H5 24 33 PC4 I/O PC4 ADC12_IN14 \nH4 - H6 25 34 PC5 I/O PC5 ADC12_IN15 \nJ4 18 F5 26 35 15 PB0 I/O PB0ADC12_IN8/\nTIM3_CH3(7) TIM1_CH2N\nK4 19 G5 27 36 16 PB1 I/O PB1ADC12_IN9/\nTIM3_CH4(7) TIM1_CH3N\nG5 20 G6 28 37 17 PB2 I/O FT PB2/BOOT1\nH5 - - - 38 - PE7 I/O FT PE7 TIM1_ETR\nJ5 - - - 39 - PE8 I/O FT PE8 TIM1_CH1N\nK5 - - - 40 - PE9 I/O FT PE9 TIM1_CH1\nG6 - - - 41 - PE10 I/O FT PE10 TIM1_CH2N\nH6 - - - 42 - PE11 I/O FT PE11 TIM1_CH2\nJ6 - - - 43 - PE12 I/O FT PE12 TIM1_CH3N\nK6 - - - 44 - PE13 I/O FT PE13 TIM1_CH3\nG7 - - - 45 - PE14 I/O FT PE14 TIM1_CH4\nH7 - - - 46 - PE15 I/O FT PE15 TIM1_BKIN\nJ7 21 G7 29 47 - PB10 I/O FT PB10I2C2_SCL/\nUSART3_TX(7) TIM2_CH3\nK7 22 H7 30 48 - PB11 I/O FT PB11I2C2_SDA/ \nUSART3_RX(7) TIM2_CH4\nE7 23 D6 31 49 18 VSS_1 SVSS_1Table 5. Medium-density STM32F103xx pin definitions (continued)\nPins \nPin name\nType(1)\nI / O Level(2)\nMain \nfunction(3) \n(after reset)Alternate functionsLFBGA100\nLQFP48\nTFBGA64\nLQFP64\nLQFP100\nVFQFPN36Default Remap\nPinouts and pin description STM32F103x8, STM32F103xB\n28/91  Doc ID 13587 Rev 10F7 24 E6 32 50 19 VDD_1 SVDD_1\nK8 25 H8 33 51 - PB12 I/O FT PB12SPI2_NSS/\nI2C2_SMBAl/\nUSART3_CK(7)/\nTIM1_BKIN(7)\nJ8 26 G8 34 52 - PB13 I/O FT PB13SPI2_SCK/\nUSART3_CTS(7)/\nTIM1_CH1N (7)\nH8 27 F8 35 53 - PB14 I/O FT PB14SPI2_MISO/ \nUSART3_RTS(7) \nTIM1_CH2N (7)\nG8 28 F7 36 54 - PB15 I/O FT PB15SPI2_MOSI/\nTIM1_CH3N(7)\nK9 - - - 55 - PD8 I/O FT PD8 USART3_TX\nJ9 - - - 56 - PD9 I/O FT PD9 USART3_RX\nH9 - - - 57 - PD10 I/O FT PD10 USART3_CK\nG9 - - - 58 - PD11 I/O FT PD11 USART3_CTS\nK10 - - - 59 - PD12 I/O FT PD12TIM4_CH1 / \nUSART3_RTS\nJ10 - - - 60 - PD13 I/O FT PD13 TIM4_CH2\nH10 - - - 61 - PD14 I/O FT PD14 TIM4_CH3\nG10 - - - 62 - PD15 I/O FT PD15 TIM4_CH4\nF10 - F6 37 63 - PC6 I/O FT PC6 TIM3_CH1\nE10 E7 38 64 - PC7 I/O FT PC7 TIM3_CH2\nF9 E8 39 65 - PC8 I/O FT PC8 TIM3_CH3\nE9 - D8 40 66 - PC9 I/O FT PC9 TIM3_CH4\nD9 29 D7 41 67 20 PA8 I/O FT PA8USART1_CK/\nTIM1_CH1(7)/MCO \nC9 30 C7 42 68 21 PA9 I/O FT PA9USART1_TX(7)/ \nTIM1_CH2(7)\nD 1 0 3 1C 64 36 9 2 2 P A 1 0 I / O F T P A 1 0USART1_RX(7)/ \nTIM1_CH3(7)\nC 1 0 3 2C 84 47 0 2 3 P A 1 1 I / O F T P A 1 1USART1_CTS/ \nCANRX(7)/ USBDM\nTIM1_CH4(7)\nB 1 0 3 3B 84 57 1 2 4 P A 1 2 I / O F T P A 1 2USART1_RTS/ \nCANTX(7) //USBDP\nTIM1_ETR(7)Table 5. Medium-density STM32F103xx pin definitions (continued)\nPins \nPin name\nType(1)\nI / O Level(2)\nMain \nfunction(3) \n(after reset)Alternate functionsLFBGA100\nLQFP48\nTFBGA64\nLQFP64\nLQFP100\nVFQFPN36Default Remap\nSTM32F103x8, STM32F103xB Pinouts and pin description\nDoc ID 13587 Rev 10 29/91A10 34 A8 46 72 25 PA13 I/O FT JTMS/SWDIO  PA13\nF8 - - - 73 - Not connected\nE6 35 D5 47 74 26 VSS_2 SVSS_2\nF6 36 E5 48 75 27 VDD_2 SVDD_2\nA9 37 A7 49 76 28 PA14 I/O FT JTCK/SWCLK PA14\nA8 38 A6 50 77 29 PA15 I/O FT JTDITIM2_CH1_ETR/ \nPA15 /SPI1_NSS\nB9 - B7 51 78 PC10 I/O FT PC10 USART3_TXB8 - B6 52 79 PC11 I/O FT PC11 USART3_RX\nC8 - C5 53 80 PC12 I/O FT PC12 USART3_CK\nD8 5 C1 5 81 2 PD0 I/O FT OSC_IN\n(8)CANRX\nE8 6 D1 6 82 3 PD1 I/O FT OSC_OUT(8)CANTX\nB7 B5 54 83 - PD2 I/O FT PD2 TIM3_ETR \nC7 - - - 84 - PD3 I/O FT PD3 USART2_CTS\nD7 - - - 85 - PD4 I/O FT PD4 USART2_RTS\nB6 - - - 86 - PD5 I/O FT PD5 USART2_TX\nC6 - - - 87 - PD6 I/O FT PD6 USART2_RX\nD6 - - - 88 - PD7 I/O FT PD7 USART2_CK\nA7 39 A5 55 89 30 PB3 I/O FT JTDOTIM2_CH2 / PB3 \nTRACESWO\nSPI1_SCK\nA6 40 A4 56 90 31 PB4 I/O FT JNTRSTTIM3_CH1/ PB4/ \nSPI1_MISO\nC5 41 C4 57 91 32 PB5 I/O PB5 I2C1_SMBAl TIM3_CH2 / \nSPI1_MOSI\nB5 42 D3 58 92 33 PB6 I/O FT PB6I2C1_SCL(7)/\nTIM4_CH1(7) USART1_TX\nA5 43 C3 59 93 34 PB7 I/O FT PB7I2C1_SDA(7)/\nTIM4_CH2(7) USART1_RX\nD5 44 B4 60 94 35 BOOT0 I BOOT0\nB4 45 B3 61 95 - PB8 I/O FT PB8 TIM4_CH3(7) I2C1_SCL / \nCANRX\nA4 46 A3 62 96 - PB9 I/O FT PB9 TIM4_CH4(7) I2C1_SDA/\nCANTXTable 5. Medium-density STM32F103xx pin definitions (continued)\nPins \nPin name\nType(1)\nI / O Level(2)\nMain \nfunction(3) \n(after reset)Alternate functionsLFBGA100\nLQFP48\nTFBGA64\nLQFP64\nLQFP100\nVFQFPN36Default Remap\nPinouts and pin description STM32F103x8, STM32F103xB\n30/91  Doc ID 13587 Rev 10D4 - - - 97 - PE0 I/O FT PE0 TIM4_ETR\nC4 - - - 98 - PE1 I/O FT PE1\nE5 47 D4 63 99 36 VSS_3 SVSS_3\nF5 48 E4 64 100 1 VDD_3 SVDD_3\n1. I = input, O = output, S = supply, HiZ = high impedance.\n2. FT = 5 V tolerant.3. Function availability depends on the chosen device. For devices having reduced peripher al counts, it is always the lower \nnumber of peripheral that is included. For example, if a device has only one SPI and  two USARTs, they will be called SPI1 \nand USART1 & USART2, respectively. Refer to Table 2 on page 10 .\n4. PC13, PC14 and PC15 are supplied through the power switch and since the switch only sinks a limited amount of current \n(3 mA), the use of GPIOs PC13 to PC15 is restricted: only one I/O at a time can be used as an output, the speed has to be \nlimited to 2 MHz with a maximum load of 30 pF and these I/Os mu st not be used as a current source (e.g. to drive an LED).\n5. Main function after the first backup domain power-up. Later  on, it depends on the contents of the Backup registers even \nafter reset (because these registers are not  reset by the main reset). For details on how to manage these IOs, refer to the \nBattery backup domain and BKP register description sections in the STM32F10xxx reference manual, available from the \nSTMicroelectronics website: www.st.com.\n6. Unlike in the LQFP64 package, there is  no PC3 in the TFBGA64 package. The V\nREF+ functionality is provided instead.\n7. This alternate function can be remapped by  software to some other port pins (if available on the used package). For more \ndetails, refer to the Alternate function I/O and debug configurat ion section in the STM32F10xxx  reference manual, available \nfrom the STMicroelectroni cs website: www.st.com.\n8. The pins number 2 and 3 in the VFQFPN36 package, 5 and 6 in the LQFP48 and LQFP64 packages, and C1 and C2 in the \nTFBGA64 package are configured as OSC_ IN/OSC_OUT after reset, however t he functionality of PD0 and PD1 can be \nremapped by software on these pins. For the LQFP100 package , PD0 and PD1 are available by default, so there is no \nneed for remapping. For more details, refer to the Alter nate function I/O and debug configuration section in the \nSTM32F10xxx reference manual.\nThe use of PD0 and PD1 in output mode is limited as they can only be used at 50 MHz in output mode.Table 5. Medium-density STM32F103xx pin definitions (continued)\nPins \nPin name\nType(1)\nI / O Level(2)\nMain \nfunction(3) \n(after reset)Alternate functionsLFBGA100\nLQFP48\nTFBGA64\nLQFP64\nLQFP100\nVFQFPN36Default Remap\nSTM32F103x8, STM32F103xB Memory mapping\nDoc ID 13587 Rev 10 31/914 Memory mapping\nThe memory map is shown in Figure 9 .\nFigure 9. Memory map\nreserved\n0x4000 00000x4000 04000x4000 08000x4000 0C000x4000 28000x4000 2C000x4000 30000x4000 34000x4000 38000x4000 3C000x4000 44000x4000 48000x4000 4C000x4001 0C000x4001 10000x4001 14000x4001 18000x4002 1400APB memory space\nDMA0x4002 1000\nTIM2Reserved0x4001 08000x4001 1C000x4001 24000x4001 28000x4001 2C000x4001 30000x4001 34000x4001 3800\nTIM3TIM4reservedRTCWWDGIWDGreservedSPI2USART2USART3AFIOPort APort CPort Dreserved ADC1reservedUSART1reserved0x4002 0400\n0x4002 0000\n0x4001 3C00\n0x4000 54000x4000 5800\nreservedADC2 TIM1SPI1\nreservedI2C1BKP\n0x4000 6000\n0x4000 5C00Port E\nPWRPort B\nI2C2reserved\nbxCANEXTIreservedRCCreservedFlash Interfacereservedreservedreserved\n0x4000 64000x4000 68000x4000 6C000x4000 70000x4000 74000x4001 00000x4001 04000x4002 20000x4002 24000x4002 30000x4002 34000x6000 00000xE010 0000reserved0xFFFF FFFF\nUSB RegistersCRC\n01234567\n0x2000 00000x4000 00000x6000 00000x8000 00000xA000 00000xC000 00000xE000 00000xFFFF FFFF\n0x0000 0000Peripherals\nSRAM\nFlash memoryreservedreserved\n0x0800 00000x0801 FFFF0x1FFF F0000x1FFF FFFF\nSystem memoryOption Bytes\n0x1FFF F8000x1FFF F80FCortex- M3 Internal  \nPeripherals0xE010 0000\nai14394fshared 512 byte\nUSB/CAN SRAM\nAliased to Flash or system\nmemory depending onBOOT pins\n0x0000 0000\nElectrical characteristics STM32F103x8, STM32F103xB\n32/91  Doc ID 13587 Rev 105 Electrical characteristics\n5.1 Parameter conditions\nUnless otherwise specified, all voltages are referenced to VSS.\n5.1.1 Minimum and maximum values\nUnless otherwise specified the minimum and ma ximum values are guaranteed in the worst \nconditions of ambient temperature, supply voltage and frequencies by tests in production on 100% of the devices with an ambient temperature at T\nA = 25 °C and TA = TAmax (given by \nthe selected temperature range).\nData based on characterization results, desi gn simulation and/or technology characteristics \nare indicated in the table footnotes and are not tested in production. Based on characterization, the minimum and maximum values refer to sample tests and represent the mean value plus or minus three times the standard deviation (mean±3 \uf053).\n5.1.2 Typical values\nUnless otherwise specified, typical data are based on TA = 25 °C, VDD = 3.3 V (for the \n2V\uf0a3VDD\uf0a33.6 V voltage range). They are given only as design guidelines and are not \ntested.\nTypical ADC accuracy values are determined by characterization of a batch of samples from \na standard diffusion lot over the full temperature range, where 95% of the devices have an error less than or equal to the value indicated\n (mean±2 \uf053).\n5.1.3 Typical curves\nUnless otherwise specified, all typical curves are given only as design guidelines and are \nnot tested.\n5.1.4 Loading capacitor\nThe loading conditions used for pin parameter measurement are shown in Figure 10 .\n5.1.5 Pin input voltage\nThe input voltage measurement on a pin of the device is described in Figure 11 .\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 33/91         \n5.1.6 Power supply scheme\nFigure 12. Power supply scheme\nCaution: In Figure 12 , the 4.7 µF capacitor must be connected to VDD3.Figure 10. Pin loading condition s Figure 11. Pin input voltage\nai14141C = 50 pFSTM32F103xx pin\nai14142STM32F103xx pin\nVIN\nai14125dVDD\n1/2/3/4/5\nAnalog: \nRCs, PLL,\n...Power switchVBAT\nGP I/OsOUT\nINKernel logic \n(CPU, \nDigital \n& Memories) Backup circuitry\n(OSC32K,RTC,\nBackup registers)Wake-up logic\n5 × 100 nF\n+ 1 × 4.7 µF1.8-3.6V \nRegulator\nVSS\n1/2/3/4/5\nVDDA\nVREF+\nVREF-\nVSSAADC\nLevel shifterIO\nLogic\nVDD\n10 nF\n+ 1 µFVREF\n10 nF\n+ 1 µFVDD\nElectrical characteristics STM32F103x8, STM32F103xB\n34/91  Doc ID 13587 Rev 105.1.7 Current con sumption measurement\nFigure 13. Current consumption measurement scheme\n5.2 Absolute maximum ratings\nStresses above the absolute maximum ratings listed in Table 6: Voltage characteristics , \nTable 7: Current characteristics , and Table 8: Thermal characteristics  may cause permanent \ndamage to the device. These are stress ratings only and functional operation of the device at these conditions is not implied. Exposure to maximum rating conditions for extended periods may affect device reliability.\n          ai14126VBAT\nVDD\nVDDAIDD_VBAT\nIDD\nTable 6. Voltage characteristics\nSymbol Ratings Min Max Unit\nVDD–VSSExternal main supply voltage (including VDDA \nand VDD)(1)\n1. All main power (VDD, VDDA) and ground (VSS, VSSA) pins must always be connected to the external power \nsupply, in the permitted range.–0.3 4.0\nV\nVINInput voltage on five volt tolerant pin(2)\n2. IINJ(PIN)  must never be exceeded (see Table 7: Current characteristics ). This is implicitly insured if VIN \nmaximum is respected. If VIN maximum cannot be respected, the injection current must be limited \nexternally to the IINJ(PIN)  value. A positive injection is induced by VIN> VINmax while a negative injection is \ninduced by VIN < VSS. VSS \uf02d 0.3 +5.5\nInput voltage on any other pin(2)VSS \uf02d\uf0200.3 VDD+0.3\n|\uf044VDDx| Variations between different VDD power pins 50\nmV\n|VSSX \uf02d\uf020VSS| Variations between all the different ground pins 50\nVESD(HBM)Electrostatic discharge voltage (human body \nmodel)see Section 5.3.11: \nAbsolute maximum ratings (electrical sensitivity)\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 35/91          \n         \n5.3 Operating conditions\n5.3.1 General operating conditions\n         Table 7. Current characteristics\nSymbol Ratings  Max. Unit\nIVDD Total current into VDD/VDDA power lines (source)(1)\n1. All main power (VDD, VDDA) and ground (VSS, VSSA) pins must always be connected to the external power \nsupply, in the permitted range.150\nmAIVSS Total current out of VSS ground lines (sink)(1)150\nIIOOutput current sunk by any I/O and control pin 25\nOutput current source by any I/Os and control pin \uf02d 25\nIINJ(PIN) (2)(3)\n2. IINJ(PIN)  must never be exceeded. This is implicitly insured if VIN maximum is respected. If VIN maximum \ncannot be respected, the injection current must be limited externally to the IINJ(PIN)  value. A positive \ninjection is induced by VIN > VDD while a negative injection is induced by VIN < VSS. \n3. Negative injection disturbs the analog performance of the device. See note in Section 5.3.17: 12-bit ADC \ncharacteristics .Injected current on NRST pin ± 5\nInjected current on HSE OSC_IN and LSE OSC_IN pins ± 5\nInjected current on any other pin(4)\n4. When several inputs are submitted to  a current injection, the maximum \uf053IINJ(PIN)  is the absolute sum of the \npositive and negative injected currents (insta ntaneous values). Thes e results are based on \ncharacterization with \uf053IINJ(PIN)  maximum current injection on fo ur I/O port pins of the device.± 5\n\uf053IINJ(PIN)(2)Total injected current (sum of all I/O and control pins)(4)± 25\nTable 8. Thermal characteristics\nSymbol Ratings  Value Unit\nTSTG Storage temperature range –65 to +150 °C\nTJ Maximum junction temperature 150 °C\nTable 9. General operating conditions\nSymbol Parameter  Conditions Min Max Unit\nfHCLK Internal AHB clock frequency 0 72\nMHz fPCLK1 Internal APB1 clock frequency 0 36\nfPCLK2 Internal APB2 clock frequency 0 72\nVDD Standard operating voltage 2 3.6 V\nVDDA(1)Analog operating voltage\n(ADC not used)Must be the same potential \nas VDD(2)23 . 6\nV\nAnalog operating voltage\n(ADC used)2.4 3.6\nVBAT Backup operating voltage 1.8 3.6 V\nElectrical characteristics STM32F103x8, STM32F103xB\n36/91  Doc ID 13587 Rev 105.3.2 Operating conditions at  power-up / power-down\nSubject to general operating conditions for TA.\nTable 10. Operating conditions at power-up / power-down\n5.3.3 Embedded reset and power control block characteristics\nThe parameters given in Table 11  are derived from tests performed under ambient \ntemperature and VDD supply voltage conditions summarized in Table 9 .PDPower dissipation at TA = 85 °C \nfor suffix 6 or TA = 105 °C for \nsuffix 7(3)LFBGA100 454\nmWLQFP100 434\nTFBGA64 308LQFP64 444\nLQFP48 363\nVFQFPN36 1110\nT\nA Ambient temperature for 6 \nsuffix versionMaximum power dissipation –40 85\n°C\nLow power dissipation(4)–40 105\nAmbient temperature for 7 \nsuffix versionMaximum power dissipation –40 105\n°C\nLow power dissipation(4)–40 125\nTJ Junction temperature range6 suffix version –40 105\n°C\n7 suffix version –40 125\n1. When the ADC is used, refer to Table 45: ADC characteristics .\n2. It is recommended to power VDD and VDDA from the same source. A maximum difference of 300 mV \nbetween VDD and VDDA can be tolerated during power-up and operation.\n3. If TA is lower, higher PD values are allowed as long as TJ does not exceed TJmax (see Table 6.2: Thermal \ncharacteristics on page 81 ).\n4. In low power dissipation state, TA can be extended to this range as long as TJ does not exceed TJmax (see \nTable 6.2: Thermal characteristics on page 81 ).Table 9. General operating conditions (continued)\nSymbol Parameter  Conditions Min Max Unit\nSymbol Parameter Conditions Min Max Unit\ntVDDVDD rise time rate 0 \uf0a5\nµs/V\nVDD fall time rate 20 \uf0a5\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 37/91          Table 11. Embedded reset and power control block characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nVPVDProgrammable voltage \ndetector level selectionPLS[2:0]=000 (rising edge) 2.1 2.18 2.26 V\nPLS[2:0]=000 (falling edge) 2 2.08 2.16 VPLS[2:0]=001 (rising edge) 2.19 2.28 2.37 V\nPLS[2:0]=001 (falling edge) 2.09 2.18 2.27 V\nPLS[2:0]=010 (rising edge) 2.28 2.38 2.48 VPLS[2:0]=010 (falling edge) 2.18 2.28 2.38 V\nPLS[2:0]=011 (rising edge) 2.38 2.48 2.58 V\nPLS[2:0]=011 (falling edge) 2.28 2.38 2.48 VPLS[2:0]=100 (rising edge) 2.47 2.58 2.69 V\nPLS[2:0]=100 (falling edge) 2.37 2.48 2.59 V\nPLS[2:0]=101 (rising edge) 2.57 2.68 2.79 V\nPLS[2:0]=101 (falling edge) 2.47 2.58 2.69 V\nPLS[2:0]=110 (rising edge) 2.66 2.78 2.9 VPLS[2:0]=110 (falling edge) 2.56 2.68 2.8 V\nPLS[2:0]=111 (rising edge) 2.76 2.88 3 V\nPLS[2:0]=111 (falling edge) 2.66 2.78 2.9 V\nV\nPVDhyst(2)PVD hysteresis 100 mV\nVPOR/PDRPower on/power down \nreset thresholdFalling edge 1.8(1)\n1. The product behavior is guaranteed by design down to the minimum VPOR/PDR  value.1.88 1.96 V\nRising edge 1.84 1.92 2.0 V\nVPDRhyst(2)PDR hysteresis 40 mV\nTRSTTEMPO(2)\n2. Guaranteed by design, not tested in production.Reset temporization 1 2.5 4.5 ms\nElectrical characteristics STM32F103x8, STM32F103xB\n38/91  Doc ID 13587 Rev 105.3.4 Embedded reference voltage\nThe parameters given in Table 12  are derived from tests performed under ambient \ntemperature and VDD supply voltage conditions summarized in Table 9 .\n          \n5.3.5 Supply current characteristics\nThe current consumption is a function of several parameters and factors such as the \noperating voltage, ambient temperature, I/O pin loading, device software configuration, operating frequencies, I/O pin switching rate, program location in memory and executed binary code.The current consumption is measured as described in Figure 13: Current consumption \nmeasurement scheme .\nAll Run-mode current consumption measurements given in this section are performed with a reduced code that gives a consumption equivalent to Dhrystone 2.1 code.\nMaximum current consumption\nThe MCU is placed under the following conditions:\n● All I/O pins are in input mode with a static value at VDD or VSS (no load)\n● All peripherals are disabled except when explicitly mentioned\n● The Flash memory access time is adjusted to the fHCLK  frequency (0 wait state from 0 \nto 24 MHz, 1 wait state from 24 to 48 MHz and 2 wait states above)\n● Prefetch in ON (reminder: this bit must be set before clock setting and bus prescaling)\n● When the peripherals are enabled fPCLK1  = fHCLK /2, fPCLK2  = fHCLK\nThe parameters given in Table 13 , Table 14  and Table 15  are derived from tests performed \nunder ambient temperature and VDD supply voltage conditions summarized in Table 9 .Table 12. Embedded internal reference voltage\nSymbol Parameter Conditions Min Typ Max Unit\nVREFINT Internal reference voltage–40 °C < TA < +105 °C 1.16 1.20 1.26 V\n–40 °C < TA < +85 °C 1.16 1.20 1.24 V\nTS_vrefint(1)\n1. Shortest sampling time can be determined in the application by multiple iterations.ADC sampling time when \nreading the internal reference \nvoltage5.1 17.1(2)\n2. Guaranteed by design, not tested in production.µs\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 39/91         \n         Table 13. Maximum current consumption in Run mode, code with data processing\nrunning from Flash\nSymbol Parameter Conditions fHCLKMax(1)\n1. Based on characterization , not tested in production.Unit\nTA = 85 °C TA = 105 °C\nIDDSupply current in \nRun modeExternal clock(2), all \nperipherals enabled\n2. External clock is 8 MHz and PLL is on when fHCLK  > 8 MHz.72 MHz 50 50.3\nmA48 MHz 36.1 36.2\n36 MHz 28.6 28.7\n24 MHz 19.9 20.1\n16 MHz 14.7 14.98 MHz 8.6 8.9\nExternal clock\n(2), all \nperipherals disabled72 MHz 32.8 32.9\n48 MHz 24.4 24.536 MHz 19.8 19.9\n24 MHz 13.9 14.2\n16 MHz 10.7 11\n8 MHz 6.8 7.1\nTable 14. Maximum current consumption in Run mode, code with data processing\nrunning from RAM\nSymbol Parameter Conditions fHCLKMax(1)\n1. Based on characterization, tested in production at VDD max, fHCLK  max.Unit\nTA = 85 °C TA = 105 °C\nIDDSupply \ncurrent in \nRun modeExternal clock(2), all \nperipherals enabled\n2. External clock is 8 MHz and PLL is on when fHCLK  > 8 MHz.72 MHz 48 50\nmA48 MHz 31.5 32\n36 MHz 24 25.524 MHz 17.5 18\n16 MHz 12.5 13\n8 MHz 7.5 8\nExternal clock\n(2), all \nperipherals disabled72 MHz 29 29.5\n48 MHz 20.5 21\n36 MHz 16 16.524 MHz 11.5 12\n16 MHz 8.5 9\n8 MHz 5.5 6\nElectrical characteristics STM32F103x8, STM32F103xB\n40/91  Doc ID 13587 Rev 10Figure 14. Typical current consumption in Run mode versus frequency (at 3.6 V) -\ncode with data processing running from RAM, peripherals enabled\nFigure 15. Typical current consumption in Run mode versus frequency (at 3.6 V) -\ncode with data processing running from RAM, peripherals disabled051015202530354045\n-40 0 25 70 85 105\nTemperature (°C)Consumption (mA)72 MHz\n36 MHz\n16 MHz\n8 MHz\n051015202530\n-40 0 25 70 85 105\nTemperature (°C)Consumption (mA)72 MHz\n36 MHz\n16 MHz\n8 MHz\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 41/91         Table 15. Maximum current consumption in Sleep mode, code running from Flash \nor RAM\nSymbol Parameter Conditions fHCLKMax(1)\n1. based on characterization, tested in production at VDD max , fHCLK  max with peripherals enabled.Unit\nTA = 85 °C TA = 105 °C\nIDDSupply current in \nSleep modeExternal clock(2), all \nperipherals enabled\n2. External clock is 8 MHz and PLL is on when fHCLK  > 8 MHz.72 MHz 30 32\nmA48 MHz 20 20.5\n36 MHz 15.5 1624 MHz 11.5 12\n16 MHz 8.5 9\n8 MHz 5.5 6\nExternal clock\n(2), all \nperipherals disabled72 MHz 7.5 8\n48 MHz 6 6.5\n36 MHz 5 5.524 MHz 4.5 516 MHz 4 4.5\n8 MHz 3 4\nElectrical characteristics STM32F103x8, STM32F103xB\n42/91  Doc ID 13587 Rev 10         \nFigure 16. Typical current consumption in Stop mode with regulator in Run mode versus\ntemperature at VDD = 3.3 V and 3.6 VTable 16. Typical and maximum current consumptions in Stop and Standby modes\nSymbol Parameter ConditionsTyp(1)Max\nUnitVDD/VBAT \n= 2.4 VVDD/VBAT \n= 3.3 VTA = \n85 °CTA = \n105 °C\nIDDSupply current in \nStop modeRegulator in Run mode, low-speed and \nhigh-speed internal RC oscillators and \nhigh-speed oscillator OFF (no \nindependent watchdog)23.5 24 200 370\nµARegulator in Low Power mode, low-\nspeed and high-speed internal RC oscillators and high-speed oscillator \nOFF (no independent watchdog)13.5 14 180 340\nSupply current in \nStandby modeLow-speed internal RC oscillator and \nindependent watchdog ON2.6 3.4 - -\nLow-speed internal RC oscillator ON, \nindependent watchdog OFF2.4 3.2 - -\nLow-speed internal RC oscillator and \nindependent watchdog OFF , low-speed oscillator and RTC OFF1.7 2 4 5\nI\nDD_VBATBackup domain \nsupply current Low-speed oscillator and RTC ON 1.1 1.4 1.9(2)2.2\n1. Typical values are measured at TA = 25 °C.\n2. Based on characterization, not tested in production.\n050100150200250300\n-45 25 70 90 110\nTemperature (°C)Consumption (µA)3.3 V\n3.6 V\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 43/91Figure 17. Typical current consumption in Stop mode with regulator in Low-power mode versus\ntemperature at VDD = 3.3 V and 3.6 V\nFigure 18. Typical current consumption in Standby mode versus temperature at\nVDD = 3.3 V and 3.6 V050100150200250300\n-40 0 25 70 85 105\nTemperature (°C)Consumption (µA)3.3 V\n3.6 V\n00.511.522.533.544.5\n–45 °C 25 °C 85 °C 105 °C\nTemperature (°C)Consumption (µA)3.3 V\n3.6 V\nElectrical characteristics STM32F103x8, STM32F103xB\n44/91  Doc ID 13587 Rev 10Typical current consumption\nThe MCU is placed under the following conditions:\n● All I/O pins are in input mode with a static value at VDD or VSS (no load).\n● All peripherals are disabled except if it is explicitly mentioned.\n● The Flash  access time is adjusted to fHCLK  frequency (0 wait state from 0 to 24 MHz, 1 \nwait state from 24 to 48 MHz and 2 wait states above).\n● Ambient temperature and VDD supply voltage conditions summarized in Table 9 .\n● Prefetch is ON (Reminder: this bit must be set before clock setting and bus prescaling)\n● When the peripherals are enabled fPCLK1 = fHCLK /4, fPCLK 2 = fHCLK /2, fADCCLK  = \nfPCLK2 /4\n         Table 17. Typical current consumption in Run mode, code with data processing\nrunning from Flash\nSymbol Parameter Conditions fHCLKTyp(1)\n1. Typical values are measures at TA = 25 °C, VDD = 3.3 V.UnitAll peripherals \nenabled(2)\n2. Add an additional power consumption of 0.8 mA per ADC for the analog part. In applications, this \nconsumption occurs only while the ADC is on (ADON bit is set in the ADC_CR2 register).All peripherals \ndisabled\nIDDSupply \ncurrent in \nRun modeExternal clock(3)\n3. External clock is 8 MHz and PLL is on when fHCLK  > 8 MHz.72 MHz 36 27\nmA48 MHz 24.2 18.6\n36 MHz 19 14.8\n24 MHz 12.9 10.1\n16 MHz 9.3 7.48 MHz 5.5 4.6\n4 MHz 3.3 2.8\n2 MHz 2.2 1.91 MHz 1.6 1.45\n500 kHz 1.3 1.25\n125 kHz 1.08 1.06\nRunning on high \nspeed internal RC (HSI), AHB \nprescaler used to \nreduce the frequency64 MHz 31.4 23.9\nmA48 MHz 23.5 17.9\n36 MHz 18.3 14.124 MHz 12.2 9.5\n16 MHz 8.5 6.8\n8 MHz 4.9 44 MHz 2.7 2.2\n2 MHz 1.6 1.4\n1 MHz 1.02 0.9500 kHz 0.73 0.67\n125 kHz 0.5 0.48\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 45/91         Table 18. Typical current consumption in Sleep mode, code running from Flash or\nRAM\nSymbol Parameter Conditions fHCLKTyp(1)\n1. Typical values are measures at TA = 25 °C, VDD = 3.3 V.UnitAll peripherals \nenabled(2)\n2. Add an additional power consumption of 0.8 mA per ADC for the analog part. In applications, this \nconsumption occurs only while the ADC is on (ADON bit is set in the ADC_CR2 register).All peripherals \ndisabled\nIDDSupply \ncurrent in \nSleep modeExternal clock(3)\n3. External clock is 8 MHz and PLL is on when fHCLK  > 8 MHz.72 MHz 14.4 5.5\nmA48 MHz 9.9 3.9\n36 MHz 7.6 3.1\n24 MHz 5.3 2.316 MHz 3.8 1.8\n8 MHz 2.1 1.2\n4 MHz 1.6 1.12 MHz 1.3 1\n1 MHz 1.11 0.98\n500 kHz 1.04 0.96\n125 kHz 0.98 0.95\nRunning on high \nspeed internal RC \n(HSI), AHB prescaler \nused to reduce the frequency64 MHz 12.3 4.4\n48 MHz 9.3 3.3\n36 MHz 7 2.5\n24 MHz 4.8 1.816 MHz 3.2 1.2\n8 MHz 1.6 0.6\n4 MHz 1 0.52 MHz 0.72 0.47\n1 MHz 0.56 0.44\n500 kHz 0.49 0.42125 kHz 0.43 0.41\nElectrical characteristics STM32F103x8, STM32F103xB\n46/91  Doc ID 13587 Rev 10On-chip peripheral current consumption\nThe current consumption of the on-chip peripherals is given in Table 19 . The MCU is placed \nunder the following conditions:\n● all I/O pins are in input mode with a static value at VDD or VSS (no load)\n● all peripherals are disabled unless otherwise mentioned\n● the given value is calculated by measuring the current consumption\n– with all peripherals clocked off– with only one peripheral clocked on\n● ambient operating temperature and VDD supply voltage conditions summarized in \nTable 6\n         Table 19. Peripheral current consumption(1) \n1. fHCLK  = 72 MHz, fAPB1 = fHCLK /2, fAPB2 = fHCLK , default prescaler value for each peripheral.Peripheral Typical consumption at 25 °C Unit\nAPB1TIM2 1.2\nmATIM3 1.2\nTIM4 0.9\nSPI2 0.2USART2 0.35\nUSART3 0.35\nI2C1 0.39I2C2 0.39\nUSB 0.65\nCAN 0.72\nAPB2GPIO A 0.47\nmAGPIO B 0.47\nGPIO C 0.47GPIO D 0.47\nGPIO E 0.47\nADC1\n(2)\n2. Specific conditions for ADC: fHCLK  = 56 MHz, fAPB1 = fHCLK /2, fAPB2 = fHCLK , fADCCLK  = fAPB2/4 , ADON bit \nin the ADC_CR2 register is set to 1.1.81\nADC2 1.78\nTIM1 1.6\nSPI1 0.43USART1 0.85\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 47/915.3.6 External cloc k source characteristics\nHigh-speed external user clock generated from an external source\nThe characteristics given in Table 20  result from tests performed using an high-speed \nexternal clock source, and under ambient temperature and supply voltage conditions summarized in Table 9 .\n         \nLow-speed external user clock generated from an external source\nThe characteristics given in Table 21  result from tests performed using an low-speed \nexternal clock source, and under ambient temperature and supply voltage conditions summarized in Table 9 .\n         Table 20. High-speed external user clock characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nfHSE_extUser external clock source \nfrequency(1) 08 2 5 M H z\nVHSEH OSC_IN input pin high level voltage 0.7VDD VDDV\nVHSEL OSC_IN input pin low level voltage VSS 0.3VDD\ntw(HSE)\ntw(HSE)OSC_IN high or low time(1)\n1. Guaranteed by design, not tested in production.16\nns\ntr(HSE)\ntf(HSE)OSC_IN rise or fall time(1)20\nCin(HSE) OSC_IN input capacitance(1)5p F\nDuCy(HSE) Duty cycle 45 55 %\nIL OSC_IN Input leakage current VSS\uf0a3VIN\uf0a3VD\nD±1 µA\nTable 21. Low-speed external user clock characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nfLSE_extUser External clock source \nfrequency(1) 32.768 1000 kHz\nVLSEHOSC32_IN input pin high level \nvoltage0.7VDD VDD\nV\nVLSELOSC32_IN input pin low level \nvoltageVSS 0.3VDD\ntw(LSE)\ntw(LSE)OSC32_IN high or low time(1)450\nns\ntr(LSE)\ntf(LSE)OSC32_IN rise or fall time(1)50\nCin(LSE) OSC32_IN input capacitance(1)5p F\nDuCy(LSE) Duty cycle 30 70 %\nILOSC32_IN Input leakage \ncurrent VSS\uf0a3VIN\uf0a3VD\nD±1 µA\nElectrical characteristics STM32F103x8, STM32F103xB\n48/91  Doc ID 13587 Rev 10Figure 19. High-speed external clock source AC timing diagram\nFigure 20. Low-speed external clock source AC timing diagram\nHigh-speed external clock generated from a crystal/ceramic resonator\nThe high-speed external (HSE) clock can be supplied with a 4 to 16 MHz crystal/ceramic \nresonator oscillato r. All the information given in this paragraph are based on characterization \nresults obtained with typical external components specified in Table 22 . In the application, \nthe resonator and the load capacitors have to be  placed as close as possible to the oscillator \npins in order to minimize output distortion a nd startup stabilization time. Refer to the crystal \nresonator manufacturer for more details on the resonator characteristics (frequency, package, accuracy).1. Guaranteed by design, not tested in production.\nai14143OSC _I NEXTERNAL\nSTM32F103xxCLOCK SOURC EVHSEH\ntf(HSE)tW(HSE)\nIL90%\n10%\nTHSEttr(HSE)tW(HSE)\nfHSE_extVHSEL\nai14144bOSC32_INEXTERNAL\nSTM32F103xxCLOCK SOURC EVLSEH\ntf(LSE)tW(LSE)\nIL90%\n10%\nTLSEttr(LSE)tW(LSE)\nfLSE_extVLSEL\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 49/91         \nFigure 21. Typical application with an 8 MHz crystal\n1. REXT value depends on the crystal characteristics. Typical value is in the range of 5 to 6RS.\nLow-speed external clock generated from a crystal/ceramic resonator\nThe low-speed external (LSE) clock can be supplied with a 32.768 kHz crystal/ceramic \nresonator oscillato r. All the information given in this paragraph are based on characterization \nresults obtained with typical external components specified in Table 23 . In the application, \nthe resonator and the load capacitors have to be  placed as close as possible to the oscillator \npins in order to minimize output distortion a nd startup stabilization time. Refer to the crystal \nresonator manufacturer for more details on the resonator characteristics (frequency, package, accuracy).Table 22. HSE 4-16 MHz oscillator characteristics\n(1) (2)\n1. Resonator characte ristics given by the crystal/ ceramic resonator manufacturer.\n2. Based on characterization , not tested in production.Symbol Parameter Conditions Min Typ Max Unit\nfOSC_IN Oscillator frequency 4 8 16 MHz\nRF Feedback resistor 200 k \uf057 \nCL1\nCL2(3)\n3. For CL1 and CL2 it is recommended to use high-quality ceramic capac itors in the 5 pF to 25 pF range (typ.), \ndesigned for high-frequency applications, and selected to match th e requirements of the crystal or \nresonator. CL1 and CL2, are usually the same size. The crystal manufacturer typica lly specifies a load \ncapacitance which is the se ries combination of CL1 and CL2. PCB and MCU pin capacitance must be \nincluded (10 pF can be used as a r ough estimate of the combined pin and board capacitance) when sizing \nCL1 and CL2.Recommended load capacitance \nversus equivalent serial \nresistance of the crystal (RS)(4)\n4. The relatively low value of the RF resistor offers a good protection against issues  resulting from use in a \nhumid environment, due to the induced leakage and t he bias condition change. However, it is \nrecommended to take this point into account if  the MCU is used in tough humidity conditions.RS = 30\uf020\uf057 30 pF\ni2 HSE driving currentVDD = 3.3 V, VIN=VSS \nwith 30 pF load1m A\ngm Oscillator transconductance Startup 25 mA/V\ntSU(HSE(5)\n5. tSU(HSE)  is the startup time measured from the moment it is enabled (by software) to a stabilized 8 MHz \noscillation is reached. This value is  measured for a standard crystal resonat or and it can vary significantly \nwith the crystal manufacturerstartup time  VDD is stabilized 2 ms\nai14145OSC_OUTOSC_IN fHSECL1\nRF\nSTM32F103xx8 MHz\nresonator\nREXT(1) CL2Resonator with\nintegrated capacitors\nBias \ncontrolled\ngain\nElectrical characteristics STM32F103x8, STM32F103xB\n50/91  Doc ID 13587 Rev 10Note: For CL1 and CL2 it is recommended to use high-quality ceramic capacitors in the 5 pF to \n15 pF range selected to match the requirements of the crystal or resonator. CL1 and CL2, are \nusually the same size. The crystal manufacturer  typically specifies a load capacitance which \nis the series combination of CL1 and CL2.\nLoad capacitance CL has the following formula: CL = CL1 x CL2 / (CL1 + CL2) + Cstray where \nCstray is the pin capacitance and board or trace PCB-related capacitance. Typically, it is \nbetween 2 pF and 7 pF .\nCaution: To avoid exceeding the maximum value of CL1 and CL2 (15 pF) it is strongly recommended \nto use a resonator with a load capacitance CL\uf0a3 7 pF . Never use a resonator with a load \ncapacitance of 12.5 pF .Example:  if you choose a resonator with a load capacitance of C\nL = 6 pF , and Cstray = 2 pF , \nthen CL1 = CL2 = 8 pF .\n         \nFigure 22. Typical application with a 32.768 kHz crystal\n5.3.7 Internal clock source characteristics\nThe parameters given in Table 24  are derived from tests performed under ambient \ntemperature and VDD supply voltage conditions summarized in Table 9 .Table 23. LSE oscillator characteristics (fLSE = 32.768 kHz) (1)\n1. Based on characterization , not tested in production.Symbol Parameter Conditions Min Typ Max Unit\nRF Feedback resistor 5 M \uf057 \nCL1\nCL2(2)\n2. Refer to the note and caution paragraphs above the table.Recommended load capacitance \nversus equivalent serial \nresistance of the crystal (RS)(3)\n3. The oscillator selection can be optimized in terms of  supply current using an hi gh quality resonator with \nsmall RS value for example MSIV-TIN32.768kHz. Refer to crystal manufacturer for more detailsRS = 30 k\uf057 15 pF\nI2 LSE driving current VDD = 3.3 V, VIN = VSS 1.4 µA\ngm Oscillator Transconductance 5 µA/V\ntSU(LSE)(4)\n4.  tSU(LSE)  is the startup time measured from the moment  it is enabled (by software) to a stabilized 32.768 \nkHz oscillation is reached. This value is measured for a standard cr ystal resonator and it can vary \nsignificantly with t he crystal manufacturerstartup time  VDD is stabilized 3 s\nai14146OSC32_OUTOSC32_IN fLSECL1\nRF\nSTM32F103xx32.768 kHz\nresonator\nCL2Resonator with\nintegrated capacitors\nBias \ncontrolled\ngain\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 51/91High-speed internal (HSI) RC oscillator\n         \nLow-speed internal (LSI) RC oscillator\n         \nWakeup time from low-power mode\nThe wakeup times given in Table 26  is measured on a wakeup phase with a 8-MHz HSI RC \noscillator. The clock source used  to wake up the device depe nds from the current operating \nmode:\n● Stop or Standby mode: the cloc k source is the RC oscillator\n● Sleep mode: the clock source is the clock that was set before entering Sleep mode.\nAll timings are derived from tests performed under ambient temperature and VDD supply \nvoltage conditions summarized in Table 9 . Table 24. HSI oscillator characteristics(1) (2)\n1. Guaranteed by design, not tested in production.\n2. VDD = 3.3 V, TA = –40 to 105 °C unless otherwise specified.Symbol Parameter Conditions Min Typ Max Unit\nfHSI Frequency 8 MHz \nACCHSI Accuracy of HSI oscillatorTA = –40 to 105 °C –2 \uf0b112 . 5%\nTA = –10 to 85 °C –1.5 \uf0b112 . 2%\nTA = 0 to 70 °C –1.3 \uf0b112%\nTA = 25 °C –1.1 \uf0b111 . 8%\ntsu(HSI) HSI oscillator startup time 1 2 µs\nIDD(HSI)HSI oscillator power \nconsumption80 100 µA\nTable 25. LSI oscillator characteristics (1)\n1. VDD = 3 V, TA = –40 to 105 °C unless otherwise specified.Symbol Parameter Min Typ Max Unit\nfLSI(2)\n2. Based on characterization , not tested in production.Frequency 30 40 60 kHz \ntsu(LSI)(3)\n3. Guaranteed by design, not tested in production.LSI oscillator startup time 85 µs\nIDD(LSI)(3)LSI oscillator power consumption 0.65 1.2 µA\nElectrical characteristics STM32F103x8, STM32F103xB\n52/91  Doc ID 13587 Rev 10         \n5.3.8 PLL characteristics\nThe parameters given in Table 27  are derived from tests performed under ambient \ntemperature and VDD supply voltage conditions summarized in Table 9 .\n         \n5.3.9 Memory characteristics\nFlash memory\nThe characteristics are given at TA = –40 to 105 °C unless otherwise specified.\n         Table 26. Low-power mode wakeup timings\nSymbol Parameter Conditions Typ Unit\ntWUSLEEP(1)\n1. The wakeup times are measured from the wakeup even t to the point in which the user application code \nreads the first instruction.Wakeup from Sleep mode Wakeup on HSI RC clock 1.8 µs\ntWUSTOP(1)Wakeup from Stop mode \n(regulator in run mode)HSI RC wakeup time = 2 µs 3.6\nµs\nWakeup from Stop mode \n(regulator in low power mode)HSI RC wakeup time = 2 µs, Regulator \nwakeup from LP mode time = 5 µs5.4\ntWUSTDBY(1)Wakeup from Standby modeHSI RC wakeup time = 2 µs, Regulator \nwakeup from power down time = 38 µs50 µs\nTable 27. PLL characteristics\nSymbol Parameter  Test conditionsValue\nUnit\nMin(1)\n1. Based on characterization , not tested in production.Typ Max(1)\nfPLL_INPLL input clock(2)\n2. Take care of using the appropriate multiplier factors so as to have PLL input clock values compatible with \nthe range defined by fPLL_OUT .18 . 0 2 5M H z\nPLL input clock duty cycle 40 60 %\nfPLL_OUT PLL multiplier output clock 16 72 MHz\ntLOCK PLL lock time 200 µs\nTable 28. Flash memory characteristics\nSymbol Parameter  Conditions Min(1)Typ Max(1)Unit\ntprog 16-bit programming time TA\uf020\uf03d\uf020–40 to +105 °C 40 52.5 70 µs\ntERASE Page (1 KB) erase time TA \uf03d\uf020–40 to +105 °C 20 40 ms\ntME Mass erase time TA \uf03d\uf020–40 to +105 °C 20 40 ms\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 53/91Table 29. Flash memory endurance and data retention\n5.3.10 EMC characteristics\nSusceptibility tests ar e performed on a sample basis during device characterization.\nFunctional EMS (electromagnetic susceptibility)\nWhile a simple application is executed on the device (toggling 2 LEDs through I/O ports). the \ndevice is stressed by two electromagnetic events until a failure occurs. The failure is indicated by the LEDs:\n● Electrostatic discharge (ESD) (positive and negative) is applied to all device pins until \na functional disturbance occurs. This test is compliant with the IEC 1000-4-2 standard.\n● FTB: A Burst of Fast Transient voltage (positive and negative) is applied to VDD and \nVSS through a 100 pF capacitor, until a functional disturbance occurs. This test is \ncompliant with the IEC 1000-4-4 standard.\nA device reset allows normal operations to be resumed. The test results are given in Table 30 . They are based on the EMS levels and classes \ndefined in application note AN1709.IDD Supply current Read mode\nfHCLK  = 72 MHz with 2 wait \nstates, VDD = 3.3 V20 mA\nWrite / Erase modes \nfHCLK  = 72 MHz, VDD = 3.3 V5m A\nPower-down mode / Halt,\nVDD = 3.0 to 3.6 V50 µA\nVprog Programming voltage 2 3.6 V\n1. Guaranteed by design, not tested in production.\nSymbol Parameter  ConditionsValue\nUnit\nMin(1)\n1. Based on characterization , not tested in production.Typ Max\nNEND EnduranceTA = –40 to +85 °C (6 suffix versions)\nTA = –40 to +105 °C (7 suffix versions)10 kcycles\ntRET Data retention1 kcycle(2) at TA = 85 °C\n2. Cycling performed over t he whole temperature range.30\nYears 1 kcycle(2) at TA = 105 °C 10\n10 kcycles(2) at TA = 55 °C 20Table 28. Flash memory characteristics (continued)\nSymbol Parameter  Conditions Min(1)Typ Max(1)Unit\nElectrical characteristics STM32F103x8, STM32F103xB\n54/91  Doc ID 13587 Rev 10         \nDesigning hardened software to avoid noise problems\nEMC characterization and optimization are performed at component level with a typical \napplication environment and simplified MCU software. It should be noted that good EMC performance is highly dependent on the user application and the software in particular.\nTherefore it is recommended that the user applies EMC software optimization and \nprequalification tests in relation with the EMC level requested for his application.\nSoftware recommendationsThe software flowchart must include the management of runaway conditions such as:\n● Corrupted program counter\n● Unexpected reset\n● Critical Data corruption (control registers...)\nPrequalification trialsMost of the common failures (unexpected reset and program counter corruption) can be \nreproduced by manually forci ng a low state on the NRST pin or the Oscillator pins for 1 \nsecond.\nTo complete these trials, ESD stress can be applied directly on the device, over the range of \nspecification values. When unexpected behavior is detected, the software can be hardened to prevent unrecoverable errors occurring (see application note AN1015).\nElectromagnetic Interference (EMI)\nThe electromagnetic field emitted by the device are monitored while a simple application is executed (toggling 2 LEDs through the I/O ports). This emission test is compliant with SAE J 1752/3 standard which specifies the test  board and the pin loading.\n         Table 30. EMS characteristics\nSymbol Parameter ConditionsLevel/\nClass\nVFESDVoltage limits to be applied on any I/O pin to \ninduce a functional disturbanceVDD \uf03d\uf0203.3 V, TA \uf03d\uf020+25 °C, \nfHCLK\uf020\uf03d 72 MHz\nconforms to IEC 1000-4-22B\nVEFTBFast transient voltage burst limits to be \napplied through 100 pF on VDD and VSS \npins to induce a functional disturbanceVDD\uf020\uf03d\uf0203.3 V, TA \uf03d\uf020+25 °C, \nfHCLK\uf03d\uf02072 MHz\nconforms to IEC 1000-4-44A\nTable 31. EMI characteristics\nSymbol Parameter ConditionsMonitored\nfrequency bandMax vs. [fHSE/fHCLK ]\nUnit\n8/48 MHz 8/72 MHz\nSEMI Peak levelVDD \uf03d\uf0203.3 V, TA \uf03d\uf02025 °C,\nLQFP100 package\ncompliant with SAE J \n1752/30.1 to 30 MHz 12 12\ndBµV 30 to 130 MHz 22 19\n130 MHz to 1GHz 23 29\nSAE EMI Level 4 4 -\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 55/915.3.11 Absolute maximum rati ngs (electrical sensitivity)\nBased on three different tests (ESD, LU) using specific measurement methods, the device is \nstressed in order to determine its perfor mance in terms of electrical sensitivity.\nElectrostatic discharge (ESD)\nElectrostatic discharges (a positive then a negative pulse separated by 1 second) are \napplied to the pins of each sample according to each pin combination. The sample size depends on the number of supply pins in the device (3 parts × (n+1) supply pins). This test conforms to the JESD22-A114/C101 standard.\n          \nStatic latch-up\nTwo complementary static tests are required on six parts to assess the latch-up performance: \n● A supply overvoltage is applied to each power supply pin\n● A current injection is applied to each input, output and configurable I/O pin\nThese tests are compliant with EIA/JESD 78A IC latch-up standard.\n         Table 32. ESD absolute maximum ratings\nSymbol Ratings Conditions Class Maximum value(1)\n1. Based on characterization results, not tested in production.Unit\nVESD(HBM)Electrostatic discharge \nvoltage (human body model)TA \uf03d\uf020+25 °C\nconforming to \nJESD22-A1142 2000\nV\nVESD(CDM)Electrostatic discharge \nvoltage (charge device \nmodel)TA \uf03d\uf020+25 °C\nconforming to \nJESD22-C101II 500\nTable 33. Electrical sensitivities\nSymbol Parameter Conditions Class\nLU Static latch-up class TA \uf03d\uf020+105 °C conforming to JESD78A II level A\nElectrical characteristics STM32F103x8, STM32F103xB\n56/91  Doc ID 13587 Rev 105.3.12 I/O port characteristics\nGeneral input/output characteristics\nUnless otherwise specified, the parameters given in Table 34  are derived from tests \nperformed under the conditions summarized in Table 9 . All I/Os are CMOS and TTL \ncompliant.\n         \nAll I/Os are CMOS and TTL compliant (no software configuration required), their characteristics consider the most strict CMOS-technology or TTL parameters:\n● For VIH:\n–i f  VDD is in the [2.00 V - 3.08 V] range: CMOS characteristics but TTL included\n–i f  VDD is in the [3.08 V - 3.60 V] range: TTL characteristics but CMOS included\n● For VIL:\n–i f  VDD is in the [2.00 V - 2.28 V] range: TTL characteristics but CMOS included\n–i f  VDD is in the [2.28 V - 3.60 V] range: CMOS characteristics but TTL includedTable 34. I/O static characteristics\nSymbol Parameter Conditions Min Typ Max Unit\nVIL Input low level voltage\nTTL ports–0.5 0.8\nV\nVIHStandard IO input high level \nvoltage2VDD+0.5\nIO FT(1) input high level voltage\n1. FT = Five-volt tolerant.25 . 5 V\nVIL Input low level voltage\nCMOS ports–0.5 0.35 VDDV\nVIH Input high level voltage 0.65 VDD VDD+0.5\nVhysStandard IO Schmitt trigger \nvoltage hysteresis(2)\n2. Hysteresis voltage between Schmitt trigger switching levels. Based on characterization, not tested in \nproduction.200 mV\nIO FT Schmitt trigger voltage \nhysteresis(2) 5% VDD(3)\n3. With a minimum of 100 mV.mV\nIlkg Input leakage current (4)\n4. Leakage could be higher than max. if negativ e current is injected on adjacent pins.VSS\uf0a3VIN\uf0a3VDD\nStandard I/Os\uf0b11\nµA\nVIN= 5 V\nI/O FT3\nRPUWeak pull-up equivalent \nresistor(5)\n5. Pull-up and pull-down resistors are designed with a true resistance in seri es with a switchable \nPMOS/NMOS. This MOS/NMOS contribution to the series resistance is minimum (~10% order) .VIN \uf03d\uf020VSS 30 40 50 k \uf057\nRPDWeak pull-down equivalent \nresistor(5) VIN \uf03d\uf020VDD 30 40 50 k \uf057\nCIO I/O pin capacitance 5 pF\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 57/91Output driving current\nThe GPIOs (general purpose input/outputs) can sink or source up to +/-8 mA, and sink \n+20 mA (with a relaxed VOL).\nIn the user application, the number of I/O pins which can drive current must be limited to \nrespect the absolute maxi mum rating specified in Section 5.2 :\n● The sum of the currents sourced by all the I/Os on VDD, plus the maximum Run \nconsumption of the MCU sourced on VDD, cannot exceed the absolute maximum rating \nIVDD (see Table 7 ). \n● The sum of the currents sunk by all the I/Os on VSS plus the maximum Run \nconsumption of the MCU sunk on VSS cannot exceed the absolute maximum rating \nIVSS (see Table 7 ). \nOutput voltage levels\nUnless otherwise specified, the parameters given in Table 35  are derived from tests \nperformed under ambient temperature and VDD supply voltage conditions summarized in \nTable 9 . All I/Os are CMOS and TTL compliant.\n         Table 35. Output voltage characteristics \nSymbol Parameter Conditions Min Max Unit\nVOL(1)\n1. The IIO current sunk by the device must always re spect the absolute maximu m rating specified in Table 7  \nand the sum of IIO (I/O ports and control pins) must not exceed IVSS.Output low level voltage for an I/O pin \nwhen 8 pins are sunk at same timeTTL port\nIIO = +8 mA\n2.7 V < VDD < 3.6 V0.4\nV\nVOH(2)\n2. The IIO current sourced by the device must always re spect the absolute maximum rating specified in \nTable 7  and the sum of IIO (I/O ports and control pins) must not exceed IVDD.Output high level voltage for an I/O pin \nwhen 8 pins are sourced at same timeVDD–0.4\nVOL (1) Output low level voltage for an I/O pin \nwhen 8 pins are sunk at same timeCMOS port\nIIO =+ 8mA\n2.7 V < VDD < 3.6 V0.4\nV\nVOH (2) Output high level voltage for an I/O pin \nwhen 8 pins are sourced at same time2.4\nVOL(1)(3)\n3. Based on characterization data, not tested in production.Output low level voltage for an I/O pin \nwhen 8 pins are sunk at same time IIO = +20 mA\n2.7 V < VDD < 3.6 V1.3\nV\nVOH(2)(3) Output high level voltage for an I/O pin \nwhen 8 pins are sourced at same timeVDD–1.3\nVOL(1)(3) Output low level voltage for an I/O pin \nwhen 8 pins are sunk at same time IIO = +6 mA\n2 V < VDD < 2.7 V0.4\nV\nVOH(2)(3) Output high level voltage for an I/O pin \nwhen 8 pins are sourced at same timeVDD–0.4\nElectrical characteristics STM32F103x8, STM32F103xB\n58/91  Doc ID 13587 Rev 10Input/output AC characteristics\nThe definition and values of input/output AC characteristics are given in Figure 23  and \nTable 36 , respectively.\nUnless otherwise specified, the parameters given in Table 36  are derived from tests \nperformed under the ambient temperature and VDD supply voltage conditions summarized \nin Table 9 . \n         Table 36. I/O AC characteristics(1) \n1. The I/O speed is configured using the MODEx[1:0] bi ts. Refer to the STM32F10xxx reference manual for a \ndescription of GPIO Port configuration register.MODEx[1:0] \nbit value(1) Symbol Parameter Conditions Min Max Unit\n10fmax(IO)out Maximum frequency(2)\n2. The maximum frequency is defined in Figure 23 .CL = 50 pF , VDD = 2 V to 3.6 V 2 MHz\ntf(IO)outOutput high to low \nlevel fall time\nCL = 50 pF , VDD = 2 V to 3.6 V125(3)\n3. Guaranteed by design, not tested in production.ns\ntr(IO)outOutput low to high \nlevel rise time125(3)\n01fmax(IO)out Maximum frequency(2)CL = 50 pF , VDD = 2 V to 3.6 V 10 MHz\ntf(IO)outOutput high to low \nlevel fall time\nCL = 50 pF , VDD = 2 V to 3.6 V25(3)\nns\ntr(IO)outOutput low to high \nlevel rise time25(3)\n11Fmax(IO)out Maximum frequency(2)CL = 30 pF , VDD = 2.7 V to 3.6 V 50 MHz\nCL = 50 pF , VDD = 2.7 V to 3.6 V 30 MHz\nCL = 50 pF , VDD = 2 V to 2.7 V 20 MHz\ntf(IO)outOutput high to low \nlevel fall timeCL = 30 pF , VDD = 2.7 V to 3.6 V 5(3)\nnsCL = 50 pF , VDD = 2.7 V to 3.6 V 8(3)\nCL = 50 pF , VDD = 2 V to 2.7 V 12(3)\ntr(IO)outOutput low to high \nlevel rise timeCL = 30 pF , VDD = 2.7 V to 3.6 V 5(3)\nCL = 50 pF , VDD = 2.7 V to 3.6 V 8(3)\nCL = 50 pF , VDD = 2 V to 2.7 V 12(3)\n-tEXTIpwPulse width of \nexternal signals detected by the EXTI \ncontroller10 ns\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 59/91Figure 23. I/O AC characteristics definition \n5.3.13 NRST pin characteristics\nThe NRST pin input driver uses CMOS techno logy. It is connected to a permanent pull-up \nresistor, RPU (see Table 34 ).\nUnless otherwise specified, the parameters given in Table 37  are derived from tests \nperformed under the ambient temperature and VDD supply voltage conditions summarized \nin Table 9 . \n         ai1413110 %90%\n50 %\ntr(IO)out\nOUTPUTEXTERNAL\nON 50p F\nMaximum fre quency is achieved if (tr + tf) \uf0a3\uf0202/3 )T and if the du ty cycle is (45-55%) \uf020\n 10 %\n50%\n90%\nwhen loaded by 50pFTtr(IO)out\nTable 37. NRST pin characteristics \nSymbol Parameter Conditions Min Typ Max Unit\nVIL(NRST)(1)\n1. Guaranteed by design, not tested in production.NRST Input low level voltage –0.5 0.8\nV\nVIH(NRST)(1)NRST Input high level voltage 2 VDD+0.5\nVhys(NRST)NRST Schmitt trigger voltage \nhysteresis 200 mV\nRPU Weak pull-up equivalent resistor(2)\n2. The pull-up is designed with a true resistance in seri es with a switchable PMOS . This PMOS contribution \nto the series resistance must be minimum (~10% order) .VIN \uf03d\uf020VSS 30 40 50 k \uf057\nVF(NRST)(1)NRST Input filtered pulse 100 ns\nVNF(NRST)(1)NRST Input not filtered pulse 300 ns\nElectrical characteristics STM32F103x8, STM32F103xB\n60/91  Doc ID 13587 Rev 10Figure 24. Recommended NRST pin protection  \n2. The reset network protects t he device against par asitic resets.\n3. The user must ensure that the level on the NRST pin can go below the VIL(NRST)  max level specified in \nTable 37 . Otherwise the reset will not be taken into account by the device.\n5.3.14 TIM time r characteristics\nThe parameters given in Table 38  are guaranteed by design.\nRefer to Section 5.3.12: I/O port characteristics  for details on the input/output alternate \nfunction characteristics (output compare, input capture, external clock, PWM output).\n          ai14132bSTM32F10xxxRPUNRST(2)VDD\nFILTERInternal Reset\n0.1 µFExternal\nreset circuit(1)\nTable 38. TIMx(1) characteristics \n1. TIMx is used as a general term to refer to the TIM1, TIM2, TIM3 and TIM4 timers.Symbol Parameter Conditions Min Max Unit\ntres(TIM) Timer resolution time1 tTIMxCLK\n fTIMxCLK  = 72 MHz 13.9 ns\nfEXTTimer external clock \nfrequency on CH1 to CH4 0 fTIMxCLK /2 MHz\nfTIMxCLK  = 72 MHz 03 6 M H z\nResTIM Timer resolution 16 bit\ntCOUNTER16-bit counter clock period \nwhen internal clock is \nselected1 65536 tTIMxCLK\n fTIMxCLK  = 72 MHz 0.0139 910 µs\ntMAX_COUNT Maximum possible count65536 × 65536 tTIMxCLK\n fTIMxCLK  = 72 MHz 59.6 s\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 61/915.3.15 Communications interfaces\nI2C interface  characteristics\nUnless otherwise specified, the parameters given in Table 39  are derived from tests \nperformed under the ambient temperature, fPCLK1  frequency and VDD supply voltage \nconditions summarized in Table 9 .\nThe STM32F103xx performance line I2C interface meets the requirements of the standard \nI2C communication protocol with the following restrictions: the I/O pins SDA and SCL are \nmapped to are not “true” open-drain. When configured as open-drain, the PMOS connected between the I/O pin and V\nDD is disabled, but is still present.\nThe I2C characteristics are described in Table 39 . Refer also to  Section 5.3.12: I/O port \ncharacteristics  for more details on the input/output alternate function characteristics (SDA \nand SCL) .\n         Table 39. I2C characteristics \nSymbol ParameterStandard mode I2C(1)\n1.Guaranteed by design, not tested in production.Fast mode I2C(1)(2)\n2. fPCLK1  must be higher than 2 MHz to achieve the maximum standard mode I2C frequency. It must be \nhigher than 4 MHz to achieve the maximum fast mode I2C frequency.Unit\nMin Max Min Max\ntw(SCLL) SCL clock low time 4.7 1.3 \nµs\ntw(SCLH) SCL clock high time 4.0 0.6 \ntsu(SDA) SDA setup time 250 100 \nnsth(SDA) SDA data hold time 0(3)\n3.The maximum hold time of the Start condition has only to be met if the interface does not stretch the low \nperiod of SCL signal.0(4)\n4.The device must internally provide a hold time of at least 300ns for th e SDA signal in order to bridge the \nundefined region of the falling edge of SCL.900(3)\ntr(SDA)\ntr(SCL)SDA and SCL rise time 1000 20 + 0.1Cb 300\ntf(SDA)\ntf(SCL)SDA and SCL fall time 300 300 \nth(STA) Start condition hold time 4.0 0.6\nµs\ntsu(STA)Repeated Start condition \nsetup time4.7 0.6 \ntsu(STO) Stop condition setup time 4.0 0.6 \uf06ds\ntw(STO:STA)Stop to Start condition time \n(bus free)4.7 1.3 \uf06ds\nCbCapacitive load for each bus \nline400 400 pF\nElectrical characteristics STM32F103x8, STM32F103xB\n62/91  Doc ID 13587 Rev 10Figure 25. I2C bus AC waveforms and measurement circuit\n1.Measurement points are done at CMOS levels: 0.3VDD and 0.7VDD.\n         Table 40. SCL frequency (fPCLK1 = 36 MHz.,VDD = 3.3 V)(1)(2)\n1. RP = External pull-up resistance, fSCL = I2C speed, \n2. For speeds around 200 kHz, the tole rance on the achieved speed is of \uf0b15%. For other speed ranges, the \ntolerance on the achieved speed \uf0b12%. These variations depend on the accuracy of the external \ncomponents used to design the application.fSCL (kHz)I2C_CCR value\nRP = 4.7 k\uf057\n400 0x801E\n300 0x8028\n200 0x803C\n100 0x00B4\n50 0x0168\n20 0x0384ai14149bST A RT\nSD A100Ω4. 7kΩ\nI2C bus4. 7kΩ\n100ΩVDDVDD\nSTM32F103xx\nSDA\nSCL\ntf(SDA)tr(SDA)\nSCLth(STA)\ntw(SCKH)tw(SCKL)tsu(SDA)\ntr(SCK) tf(SCK)th(SDA)START REPEATED\nST A RTtsu(STA)\ntsu(STO)STOPtsu(STA:STO)\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 63/91SPI interface characteristics\nUnless otherwise specified, the parameters given in Table 41  are derived from tests \nperformed under the ambient temperature, fPCLKx  frequency and VDD supply voltage \nconditions summarized in Table 9 .\nRefer to Section 5.3.12: I/O port characteristics  for more details on the input/output alternate \nfunction characteristics (NSS, SCK, MOSI, MISO).\n         Table 41. SPI characteristics(1)\n1. Remapped SPI1 characteristics to be determined.Symbol Parameter Conditions Min Max Unit\nfSCK\n1/tc(SCK)SPI clock frequencyMaster mode  0 18\nMHz\nSlave mode 0  18\ntr(SCK)\ntf(SCK)SPI clock rise and fall \ntimeCapacitive load: C = 30 pF  8\nnstsu(NSS)(2)\n2. Based on characterization , not tested in production.NSS setup time Slave mode 4 tPCLK\nth(NSS)(2)NSS hold time Slave mode 73\ntw(SCKH)(2)\ntw(SCKL)(2)SCK high and low timeMaster mode, fPCLK  = 36 MHz, \npresc = 4 50 60\ntsu(MI) (2) Data input setup time\nMaster modeSPI1 1\nSPI2 5\ntsu(SI)(2) Data input setup time\nSlave mode1\nth(MI) (2) Data input hold time\nMaster modeSPI1 1\nSPI2 5\nth(SI)(2) Data input hold time\nSlave mode 3\nta(SO)(2)(3)\n3. Min time is for the minimum time to drive the output and the max time is  for the maximum time to validate \nthe data.Data output access \ntimeSlave mode, fPCLK  = 36 MHz, \npresc = 4 05 5\nSlave mode, fPCLK = 24 MHz  0  4 tPCLK\ntdis(SO)(2)(4)\n4. Min time is for the minimum time to invalidate the output and the max time is for the maximum time to put \nthe data in Hi-ZData output disable \ntimeSlave mode 10  \ntv(SO) (2)(1)Data output valid time Slave mode (after enable edge) 25\ntv(MO)(2)(1)Data output valid time Master mode (after enable edge)  3\nth(SO)(2)\nData output hold timeSlave mode (after enable edge)  25\nth(MO)(2)Master mode (after enable edge) 4\nElectrical characteristics STM32F103x8, STM32F103xB\n64/91  Doc ID 13587 Rev 10Figure 26. SPI timing diagram - slave mode and CPHA = 0\nFigure 27. SPI timing diagram - slave mode and CPHA = 1(1)\n1. Measurement points are done at CMOS levels: 0.3VDD and 0.7VDD.ai14134cSCK InputCPHA=0\nMOSI\nINP UTMISO\nOUT PUTCPHA=0\nMS B O UT\nMS B I NBI T6 OU T\nLSB INLSB OUTCPOL=0\nCPOL=1\nBIT 1 I NNSS input\ntSU(NSS)tc(SCK)\nth(NSS)\nta(SO)tw(SCKH)\ntw(SCKL)\ntv(SO) th(SO)tr(SCK)\ntf(SCK)tdis(SO)\ntsu(SI)\nth(SI)\nai14135SCK InputCPHA=1\nMOSI\nINP UTMISO\nOUT PUTCPHA=1\nMS B O UT\nMS B I NBI T6 OU T\nLSB INLSB OUTCPOL=0\nCPOL=1\nBIT 1 I NtSU(NSS) tc(SCK)th(NSS)\nta(SO)tw(SCKH)\ntw(SCKL)\ntv(SO) th(SO)tr(SCK)\ntf(SCK)tdis(SO)\ntsu(SI) th(SI)NSS input\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 65/91Figure 28. SPI timing diagram - master mode(1)\n1. Measurement points are done at CMOS levels: 0.3VDD and 0.7VDD.\nUSB characteristics\nThe USB interface is USB-IF  certified (Full Speed).\n         Table 42. USB startup time\nSymbol Parameter  Max  Unit\ntSTARTUP(1)\n1. Guaranteed by design, not tested in production.USB transceiver startup time 1 µsai14136SCK InputCPHA=0\nMOSI\nOUTUTMISO\nINPUTCPHA=0\nMSBIN\nM SB OUTBIT6 IN\nLSB OUTLSB INCPOL=0\nCPOL=1\nBIT1 OUTNSS input\ntc(SCK)\ntw(SCKH)\ntw(SCKL)tr(SCK)\ntf(SCK)\nth(MI)HighSCK InputCPHA=1\nCPHA=1CPOL=0\nCPOL=1\ntsu(MI)\ntv(MO) th(MO)\nElectrical characteristics STM32F103x8, STM32F103xB\n66/91  Doc ID 13587 Rev 10         \nFigure 29. USB timings: definition of data signal rise and fall time\n         \n5.3.16 CAN (controller area network) interface\nRefer to Section 5.3.12: I/O port characteristics  for more details on the input/output alternate \nfunction characteristics (CAN_TX and CAN_RX).Table 43. USB DC electrical characteristics\nSymbol Parameter Conditions Min.(1)\n1. All the voltages are measured from the local ground potential.Max.(1)Unit\nInput levels\nVDD USB operating voltage(2)\n2. To be compliant with the USB 2.0 fu ll-speed electrical specification, the USBDP (D+) pin should be pulled \nup with a 1.5 k \uf057 resistor to a 3.0-to-3.6 V voltage range.3.0(3)\n3. The STM32F103xx USB functionality is ensured dow n to 2.7 V but not the full USB electrical \ncharacteristics which are degr aded in the 2.7-to-3.0 V VDD voltage range.3.6 V\nVDI(4)\n4. Guaranteed by design, not tested in production.Differential input sensitivity I(USBDP , USBDM) 0.2\nV VCM(4)Differential common mode range Includes VDI range 0.8 2.5\nVSE(4)Single ended receiver threshold 1.3 2.0\nOutput levels\nVOL Static output level low RL of 1.5 k\uf057 to 3.6 V(5)\n5.RL is the load connected on the USB drivers0.3\nV\nVOH Static output level high RL of 15 k\uf057 to VSS(5)2.8 3.6\nTable 44. USB: Full-speed electrical characteristics(1) \n1. Guaranteed by design, not tested in production.Symbol Parameter Conditions Min Max Unit\nDriver characteristics\ntr Rise time(2)\n2.Measured from 10% to 90% of the data signal. For more detailed informations, please refer to USB \nSpecification - Chapt er 7 (version 2.0).CL = 50 pF 42 0 n s\ntf Fall time(2)CL = 50 pF 4 20 ns\ntrfm Rise/ fall time matching tr/tf 90 110 %\nVCRS Output signal crossover voltage 1.3 2.0 Vai14137tfDifferen tial\ndata lines\nVSSVCR S\ntrCrossover\npoints\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 67/915.3.17 12-bit ADC characteristics\nUnless otherwise specified, the parameters given in Table 45  are derived from tests \nperformed under the ambient temperature, fPCLK2  frequency and VDDA supply voltage \nconditions summarized in Table 9 .\nNote: It is recommended to perform a calibration after each power-up.\n         Table 45. ADC characteristics\nSymbol Parameter  Conditions Min Typ Max Unit\nVDDA Power supply 2.4 3.6 V\nVREF+ Positive reference voltage 2.4 VDDA V\nIVREF Current on the VREF input pin 160(1)220(1)µA\nfADC ADC clock frequency 0.6 14 MHz\nfS(2)Sampling rate 0.05 1 MHz\nfTRIG(2)External trigger frequencyfADC = 14 MHz 823 kHz\n17 1/fADC\nVAIN(3)Conversion voltage range0 (VSSA or VREF- \ntied to ground)VREF+ V\nRAIN(2)External input impedance See Equation 1  and Table 46 k\uf057\nRADC(2)Sampling switch resistance 1 k \uf057\nCADC(2) Internal sample and hold \ncapacitor12 pF\ntCAL(2)Calibration timefADC = 14 MHz 5.9 µs\n83 1/fADC\ntlat(2) Injection trigger conversion \nlatencyfADC = 14 MHz 0.214 µs\n3(4)1/fADC\ntlatr(2) Regular trigger conversion \nlatencyfADC = 14 MHz 0.143 µs\n2(4)1/fADC\ntS(2)Sampling timefADC = 14 MHz 0.107 17.1 µs\n1.5 239.5 1/fADC\ntSTAB(2)Power-up time 0 0 1 µs\ntCONV(2) Total conversion time \n(including sampling time)fADC = 14 MHz 1 18 µs\n14 to 252 (tS for sampling +12.5 for \nsuccessive approximation)1/fADC\n1. Based on characterization, not tested in production.\n2. Guaranteed by design, not tested in production.3. In devices delivered in VFQFPN and LQFP packages, V\nREF+ is internally connected to VDDA and VREF- is internally \nconnected to VSSA. Devices that come in the TFBGA64 package have a VREF+ pin but no VREF- pin (VREF- is internally \nconnected to VSSA), see Table 5  and Figure 6 .\n4. For external triggers, a delay of 1/fPCLK2  must be added to the latency specified in Table 45 .\nElectrical characteristics STM32F103x8, STM32F103xB\n68/91  Doc ID 13587 Rev 10Equation 1: RAIN max formula:\nThe formula above ( Equation 1 ) is used to determine the maximum external impedance allowed for an\nerror below 1/4 of LSB. Here N = 12 (from 12-bit resolution).\n         \n         Table 46. RAIN max for fADC = 14 MHz(1)\n1. Based on characterization , not tested in production.Ts (cycles) tS (µs) RAIN max (k\uf057)\n1.5 0.11 1.2\n7.5 0.54 1013.5 0.96 19\n28.5 2.04 41\n41.5 2.96 6055.5 3.96 80\n71.5 5.11 104\n239.5 17.1 350\nTable 47. ADC accuracy - limited test conditions(1) (2)\n1. ADC DC accuracy values are m easured after internal calibration.\n2. ADC Accuracy vs. Negative Injection Current: In jecting negative current on any of the standard (non-\nrobust) analog input pins should be av oided as this significantly reduce s the accuracy of the conversion \nbeing performed on another analog input. It is recommend ed to add a Schottky diode (pin to ground) to \nstandard analog pins which may pot entially inject negative current. \nAny positive injection current with in the limits specified for IINJ(PIN)  and \uf053IINJ(PIN)  in Section 5.3.12  does not \naffect the ADC accuracy.Symbol Parameter Test conditions Typ Max(3)\n3. Based on characterization , not tested in production.Unit\nET Total unadjusted errorfPCLK2  = 56 MHz,\nfADC = 14 MHz, RAIN < 10 k\uf057,\nVDDA = 3 V to 3.6 V\nTA = 25 °C\nMeasurements made after \nADC calibration±1.3 ±2\nLSBEO Offset error ±1 ±1.5\nEG Gain error ±0.5 ±1.5\nED Differential linearity error ±0.7 ±1\nEL Integral linearity error ±0.8 ±1.5RAINTS\nfADC CADC 2N2+\uf028\uf029ln\uf0b4\uf0b4------------------------------------------------------------- -RADC– \uf03c\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 69/91         \nFigure 30. ADC accuracy characteristicsTable 48. ADC accuracy(1) (2) (3)\n1. ADC DC accuracy values are m easured after internal calibration.\n2. Better performance could be achieved in restricted VDD, frequency and temperature ranges.\n3. ADC Accuracy vs. Negative Injection Current: In jecting negative current on any of the standard (non-\nrobust) analog input pins should be av oided as this significantly reduce s the accuracy of the conversion \nbeing performed on another analog input. It is recommend ed to add a Schottky diode (pin to ground) to \nstandard analog pins which may pot entially inject negative current. \nAny positive injection current with in the limits specified for IINJ(PIN)  and \uf053IINJ(PIN)  in Section 5.3.12  does not \naffect the ADC accuracy.Symbol Parameter Test conditions Typ Max(4)\n4. Based on characterization , not tested in production.Unit\nET Total unadjusted error\nfPCLK2  = 56 MHz,\nfADC = 14 MHz, RAIN < 10 k\uf057,\nVDDA = 2.4 V to 3.6 V\nMeasurements made after \nADC calibration±2 ±5\nLSBEO Offset error ±1.5 ±2.5\nEG Gain error ±1.5 ±3\nED Differential linearity error ±1 ±2\nEL Integral linearity error ±1.5 ±3\nEOEG\n1L S BIDEAL(1) Example of an actual transfer curve\n(2) The ideal transfer curve\n(3) End point correlation line\nET=Total Unadjusted Error: maximum deviation\nbetween the actual and the ideal transfer curves.\nEO=Offset Error: deviation between the first actual\ntransition and the first ideal one.\nEG=Gain Error: deviation between the last ideal\ntransition and the last actual one.\nED=Differential Linearity Error: maximum deviation\nbetween actual steps and the ideal one.\nEL=Integral Linearity Error: maximum deviation\nbetween any actual transition and the end pointcorrelation line.4095\n4094\n4093\n5\n4\n3\n2\n1\n07\n6\n1234567 4093 4094 4095 4096(1)(2)\nET\nEDEL(3)\nVDDA VSSA ai14395bVREF+\n4096(or           depending on package)]VDDA\n4096[1LSBIDEAL = \nElectrical characteristics STM32F103x8, STM32F103xB\n70/91  Doc ID 13587 Rev 10Figure 31. Typical connection diagram using the ADC\n1. Refer to Table 45  for the values of RAIN, RADC and CADC.\n2. Cparasitic  represents the capacitance of the PCB (dependent on soldering and PCB layout quality) plus the \npad capacitance (roughly 7 pF). A high Cparasitic  value will downgrade conversion accuracy. To remedy \nthis, fADC should be reduced.\nGeneral PCB design guidelines\nPower supply decoupling should be performed as shown in Figure 32  or Figure 33 , \ndepending on whether VREF+ is connected to VDDA or not. The 10 nF capacitors should be \nceramic (good quality). They should be placed them as close as possible to the chip.\nFigure 32. Power supply and reference decoupling (VREF+ not connected to VDDA)\n1. VREF+ and VREF– inputs are available only on 100-pin packages. ai14150cSTM32F103xxVDD\nAINx\nIL±1 µA\n0.6 VVTRAIN(1)\nCparasiticVAIN0.6 VVT\nRADC(1)\n12-bit\nconverter\nCADC(1)Sample and hold ADC\nconverter\nVREF+\n(see note 1)STM32F103xx\nVDDA\nVSSA/VREF–\n(see note 1)1 µF // 10 nF\n1 µF // 10 nF\nai14388b\nSTM32F103x8, STM32F103xB Electrical characteristics\nDoc ID 13587 Rev 10 71/91Figure 33. Power supply and reference decoupling  (VREF+ connected to VDDA)\n1. VREF+ and VREF– inputs are available only on 100-pin packages. \n5.3.18 Temperature sen sor characteristics\n         VREF+/VDDASTM32F103xx\n1 µF // 10 nF\nVREF–/VSSA\nai14389(See note 1)\n(See note 1)\nTable 49. TS characteristics\nSymbol Parameter Min Typ Max Unit\nTL(1)\n1. Based on characterization , not tested in production.VSENSE  linearity with temperature \uf0b11\uf0b12 °C\nAvg_Slope(1)Average slope 4.0 4.3 4.6 mV/°C\nV25(1)Voltage at 25 °C 1.34 1.43 1.52 V\ntSTART(2)\n2. Guaranteed by design, not tested in production.Startup time 4 10 µs\nTS_temp(3)(2)\n3. Shortest sampling time can be determined in the application by multiple iterations.ADC sampling time when reading the \ntemperature17.1 µs\nPackage characteristics STM32F103x8, STM32F103xB\n72/91  Doc ID 13587 Rev 106 Package characteristics\n6.1 Package mechanical data\nIn order to meet environmental requirements, ST offers these devices in different grades of \nECOPACK® packages, depending on their level of environmental compliance. ECOPACK® \nspecifications, grade definitions and product status are available at: www.st.com . \nECOPACK® is an ST trademark.\nSTM32F103x8, STM32F103xB Package characteristics\nDoc ID 13587 Rev 10 73/91         \n1. Drawing is not to scale.\n2. The back-side pad is not inte rnally connected to the VSS or VDD power pads.\n3. There is an exposed die pad on the underside of the VFQFPN package. It should be soldered to  the PCB. All leads should \nalso be soldered to the PCB.\n         Figure 34. VFQFPN36 6 x 6 mm, 0.5 mm pitch, \npackage outline(1)Figure 35. Recommended footprint \n(dimensions in mm)(1)(2)(3)\nSeating plane\nddd CC\nA3 A1AA2\nPin # 1 ID\nR = 0.20ZR_MEE2\nb\n19101827\n28\n3619\nD2\nEDe\nL0.30\n6.300.501.00 4.30\n4.30\n4.80\n4.804.10\n4.10\n128\n919\nai14870b3627\n18\n10\n0.75\nTable 50. VFQFPN36 6 x 6 mm, 0.5 mm pitch, package mechanical data\nSymbolmillimeters inches(1)\nMin Typ Max Min Typ Max\nA 0.800 0.900 1.000 0.0315 0.0354 0.0394\nA1 0.020 0.050 0.0008 0.0020\nA2 0.650 1.000 0.0256 0.0394\nA3 0.250 0.0098b 0.180 0.230 0.300 0.0071 0.0091 0.0118\nD 5.875 6.000 6.125 0.2313 0.2362 0.2411\nD2 1.750 3.700 4.250 0.0689 0.1457 0.1673E 5.875 6.000 6.125 0.2313 0.2362 0.2411\nE2 1.750 3.700 4.250 0.0689 0.1457 0.1673\ne 0.450 0.500 0.550 0.0177 0.0197 0.0217L 0.350 0.550 0.750 0.0138 0.0217 0.0295\nddd 0.080 0.0031\n1. Values in inches are converted from mm and rounded to 4 decimal digits.\nPackage characteristics STM32F103x8, STM32F103xB\n74/91  Doc ID 13587 Rev 10Figure 36. LFBGA100 - low profile fine pitch ball grid array package outline\n1. Drawing is not to scale.\n         Table 51. LFBGA100 - low profile fine pitch ball grid array package mechanical data\nDim.mm inches(1)\n1. Values in inches are converted from mm and rounded to 4 decimal digits.Min Typ Max Min Typ Max\nA 1.700 0.0669\nA1 0.270 0.0106A2 1.085 0.0427A3 0.30 0.0118A4 0.80 0.0315b 0.45 0.50 0.55 0.0177 0.0197 0.0217D 9.85 10.00 10.15 0.3878 0.3937 0.3996D1 7.20 0.2835E 9.85 10.00 10.15 0.3878 0.3937 0.3996E1 7.20 0.2835e 0.80 0.0315F 1.40 0.0551ddd 0.12 0.0047eee 0.15 0.0059fff 0.08 0.0031N (number of balls) 100                  \nai14396A2 A4 A3 A1 ASeating plane\nB\nA1 corner index area\n(see note 5)(100 balls)\nBottom view123456789 1 0F\nE1 E\neAD\nD1\ne F\nK\nJ\nH\nG\nF\nE\nDC\nBAddd CC\neee\nfffCA B\nCM\nM ∅\n∅b∅\nSTM32F103x8, STM32F103xB Package characteristics\nDoc ID 13587 Rev 10 75/91Figure 37. Recommended PCB design rules (0.80/0.75 mm pitch BGA)\nDpad\nDsmDpad 0.37 mm\nDsm0.52 mm typ. (depends on solder \nmask registration tolerance\nSolder paste 0.37 mm aperture diameter– Non solder mask defined pads are recommended\n– 4 to 6 mils screen print\nPackage characteristics STM32F103x8, STM32F103xB\n76/91  Doc ID 13587 Rev 10         \n         Figure 38. LQFP100, 100-pin low-profile quad flat \npackage outline(1)Figure 39. Recommended footprint(1)(2)\n1. Drawing is not to scale.\n2. Dimensions are in millimeters.D\nD1\nD3\n75 51\n50 76\n100 26\n12 5E3 E1 E\neb\nPin 1\nidentification\nSEATING PLANEGAGE PLANE\nCAA2A1C ccc0.25 mm\n0.10 inch\nL\nL1k\nC\n1L_ME75 51\n50 760.5\n0.3\n16.7 14.3\n100 26\n12.3251.2\n16.71\nai14906\nTable 52. LQPF100, 100-pin low-profile quad flat package mechanical data\nSymbolmillimeters inches(1)\nTyp Min Max Typ Min Max\nA 1.6 0.063\nA1 0.05 0.15 0.002 0.0059\nA2 1.4 1.35 1.45 0.0551 0.0531 0.0571\nb 0.22 0.17 0.27 0.0087 0.0067 0.0106\nc 0.09 0.2 0.0035 0.0079\nD 16 15.8 16.2 0.6299 0.622 0.6378\nD1 14 13.8 14.2 0.5512 0.5433 0.5591\nD3 12 0.4724\nE 16 15.8 16.2 0.6299 0.622 0.6378\nE1 14 13.8 14.2 0.5512 0.5433 0.5591\nE3 12 0.4724\ne 0.5 0.0197L 0.6 0.45 0.75 0.0236 0.0177 0.0295\nL1 1 0.0394\nk 3.5° 0.0° 7.0° 3.5° 0.0° 7.0°\nccc 0.08 0.0031\n1. Values in inches are converted from mm and rounded to 4 decimal digits.\nSTM32F103x8, STM32F103xB Package characteristics\nDoc ID 13587 Rev 10 77/91         \n         Figure 40. LQFP64, 64-pin low-profile quad flat package \noutline(1)Figure 41. Recommended \nfootprint(1)(2)\n1. Drawing is not to scale.\n2. Dimensions are in millimeters.A\nA2\nA1\nc\nL1\nLEE1\nDD1eb\nai14398b48\n32 49\n64 17\n11 61.20.333\n10.312.7\n10.30.5\n7.8\n12.7\nai14909\nTable 53. LQFP64, 64-pin low-profile quad flat package mechanical data\nDim.mm inches(1)\nMin Typ Max Min Typ Max\nA   1.60 0.0630\nA1 0.05 0.15 0.0020 0.0059\nA2 1.35 1.40 1.45 0.0531 0.0551 0.0571\nb 0.17 0.22 0.27 0.0067 0.0087 0.0106\nc 0.09  0.20 0.0035 0.0079\nD  12.00  0.4724\nD1  10.00  0.3937\nE  12.00  0.4724\nE1  10.00  0.3937\ne 0.50 0.0197\n\uf071 0° 3.5° 7° 0° 3.5° 7°\nL 0.45 0.60 0.75 0.0177 0.0236 0.0295\nL1  1.00  0.0394\nNNumber of pins\n64\n1. Values in inches are converted from mm and rounded to 4 decimal digits.\nPackage characteristics STM32F103x8, STM32F103xB\n78/91  Doc ID 13587 Rev 10Figure 42. TFBGA64 - 8 x 8 active ball array, 5 x 5 mm, 0.5 mm pitch, package outline\n1. Drawing is not to scale.\n         Table 54. TFBGA64 - 8 x 8 active ball array, 5 x 5 mm, 0.5 mm pitch, package \nmechanical data\nSymbolmillimeters inches(1)\n1. Values in inches are converted from mm and rounded to 4 decimal digits.Typ Min Max Typ Min Max\nA   1.200   0.0472\nA1  0.150   0.0059  \nA2 0.785   0.0309   \nA3 0.200   0.0079   A4   0.600   0.0236\nb 0.300 0.250 0.350 0.0118 0.0098 0.0138\nD 5.000 4.850 5.150 0.1969 0.1909 0.2028D1 3.500   0.1378   \nE 5.000 4.850 5.150 0.1969 0.1909 0.2028\nE1 3.500   0.1378   e 0.500   0.0197   \nF 0.750   0.0295   \nddd 0.080 0.0031eee 0.150 0.0059\nfff 0.050 0.0020A3\nA4\nA2A1A\nSeating\nplaneB\nAD\nD1\ne F\nF\nE1 E\neH\nG\nF\nEDCBA\n12 34567 8\nA1 ball pad corner\n(2) Øb (64 balls)\nBottom view C\nME_R 8\nSTM32F103x8, STM32F103xB Package characteristics\nDoc ID 13587 Rev 10 79/91Figure 43. Recommended PCB design rules for pads (0.5 mm pitch BGA)\n1. Non solder mask defined (NSMD) pads are recommended\n2. 4 to 6 mils solder paste screen printing processPitch 0.5 mm\nD pad 0.27 mm\nDsm 0.35 mm typ (depends on\nthe soldermask registrationtolerance)\nSolder paste 0.27 mm aperture diameter\nDpad\nDsm\nai15495\nPackage characteristics STM32F103x8, STM32F103xB\n80/91  Doc ID 13587 Rev 10         \n         Figure 44. LQFP48, 48-pin low-profile quad flat package \noutline(1)Figure 45. Recommended \nfootprint(1)(2)\n1. Drawing is not to scale.\n2. Dimensions are in millimeters.D\nD1\nD3A1\nL1Lkcb\nccc CA1A2ACSeating plane\n0.25 mm\nGage plane\nE3E1 E\n12132425\n48\n136\n37\nPin 1\nidentification\n5B_ME9.70 5.807.30\n1224\n0.20\n7.30\n13736\n1.20\n5.80\n9.700.30251.200.50\nai14911b13 48\nTable 55. LQFP48, 48-pin low-profile quad flat package mechanical data\nSymbolmillimeters inches(1)\nTyp Min Max Typ Min Max\nA   1.600   0.0630\nA1  0.050 0.150  0.0020 0.0059\nA2 1.400 1.350 1.450 0.0551 0.0531 0.0571\nb 0.220 0.170 0.270 0.0087 0.0067 0.0106\nc  0.090 0.200  0.0035 0.0079\nD 9.000 8.800 9.200 0.3543 0.3465 0.3622\nD1 7.000 6.800 7.200 0.2756 0.2677 0.2835D3 5.500   0.2165   \nE 9.000 8.800 9.200 0.3543 0.3465 0.3622\nE1 7.000 6.800 7.200 0.2756 0.2677 0.2835E3 5.500   0.2165   \ne 0.500   0.0197   \nL 0.600 0.450 0.750 0.0236 0.0177 0.0295\nL1 1.000   0.0394   \nk 3 . 5 °0 ° 7 °3 . 5 °0 ° 7 °\nccc 0.080 0.0031\n1. Values in inches are converted from mm and rounded to 4 decimal digits.\nSTM32F103x8, STM32F103xB Package characteristics\nDoc ID 13587 Rev 10 81/916.2 Thermal characteristics\nThe maximum chip junction temperature (TJmax) must never exceed the values given in \nTable 9: General operating conditions on page 35 .\nThe maximum chip-junction temperature, TJ max, in degrees Celsius, may be calculated \nusing the following equation:\nTJ max = TA max + (PD max × \uf051JA)\nWhere:\n● TA max is the maximum ambient temperature in \uf0b0C,\n●\uf051JA is the package junction-to-ambient thermal resistance, in \uf0b0C/W,\n● PD max is the sum of PINT max and PI/O max (PD max = PINT max + PI/Omax),\n● PINT max is the product of IDD and VDD, expressed in Watts. This is the maximum chip \ninternal power.\nPI/O max represents the maximum power dissipation on  output pins where:\nPI/O max  = \uf053\uf020(VOL × IOL) + \uf053((VDD – VOH) × IOH),\ntaking into account the actual VOL / IOL and VOH / IOH of the I/Os at low and high level in the \napplication.\n         \n6.2.1 Reference document\nJESD51-2 Integrated Circuits Thermal Test Method Environment Conditions - Natural Convection (Still Air). Ava ilable from www.jedec.org.Table 56. Package thermal characteristics\nSymbol Parameter Value Unit\n\uf051JAThermal resistance junction-ambient\nLFBGA100 - 10 × 10 mm / 0.8 mm pitch44\n°C/WThermal resistance junction-ambient\nLQFP100 - 14 × 14 mm / 0.5 mm pitch46\nThermal resistance junction-ambient\nLQFP64 - 10 × 10 mm / 0.5 mm pitch45\nThermal resistance junction-ambient\nTFBGA64 - 5 × 5 mm / 0.5 mm pitch65\nThermal resistance junction-ambient\nLQFP48 - 7 x 7 mm / 0.5 mm pitch55\nThermal resistance junction-ambient\nVFQFPN 36 - 6 × 6 mm / 0.5 mm pitch18\nPackage characteristics STM32F103x8, STM32F103xB\n82/91  Doc ID 13587 Rev 106.2.2 Selecting the pro duct temperature range\nWhen ordering the microcontroller, the temperature range is specified in the ordering \ninformation scheme shown in Table 57: Ordering information scheme .\nEach temperature range suffix corresponds to a specific guaranteed ambient temperature at \nmaximum dissipation and, to a specific maximum junction temperature.\nAs applications do not commonly use the STM32F103xx at maximum dissipation, it is useful \nto calculate the exact power consumption and junction temperature to determine which temperature range will be best  suited to the application.\nThe following examples show how to calculate the temperature range needed for a given \napplication.\nExample 1: High-performance application\nAssuming the following application conditions:\nMaximum ambient temperature TAmax = 82 °C (measured according to JESD51-2), \nIDDmax  = 50 mA, VDD = 3.5 V, maximum 20 I/Os used at the same time in output at low \nlevel with IOL = 8 mA, VOL= 0.4 V and maximum 8 I/Os used at the same time in output \nat low level with IOL = 20 mA, VOL= 1.3 V\nPINTmax  = 50 mA × 3.5 V= 175 mW\nPIOmax  = 20 × 8 mA × 0.4 V + 8 × 20 mA × 1.3 V = 272 mW\nThis gives: PINTmax  = 175 mW and PIOmax  = 272 mW:\nPDmax  = 175 + 272 = 447 mW\nThus: PDmax  = 447 mW\nUsing the values obtained in Table 56  TJmax is calculated as follows:\n– For LQFP100, 46 °C/W T\nJmax = 82 °C + (46 °C/W × 447 mW) = 82 °C + 20.6 °C = 102.6 °C\nThis is within the range of the suffix 6 version parts (–40 < TJ < 105 °C).\nIn this case, parts must be ordered at least with the temperature range suffix 6 (see \nTable 57: Ordering information scheme ).\nExample 2: High-temperature application\nUsing the same rules, it is possible to address applications that run at high ambient \ntemperatures with a low dissipation, as long as junction temperature TJ remains within the \nspecified range.\nAssuming the following application conditions:\nMaximum ambient temperature TAmax = 115 °C (measured according to JESD51-2), \nIDDmax  = 20 mA, VDD = 3.5 V, maximum 20 I/Os used at the same time in output at low \nlevel with IOL = 8 mA, VOL= 0.4 V\nPINTmax  = 20 mA × 3.5 V= 70 mW\nPIOmax  = 20 × 8 mA × 0.4 V = 64 mW\nThis gives: PINTmax  = 70 mW and PIOmax  = 64 mW:\nPDmax  = 70 + 64 = 134 mW\nThus: PDmax  = 134 mW\nSTM32F103x8, STM32F103xB Package characteristics\nDoc ID 13587 Rev 10 83/91Using the values obtained in Table 56  TJmax is calculated as follows:\n– For LQFP100, 46 °C/W T\nJmax = 115 °C + (46 °C/W × 134 mW) = 115 °C + 6.2 °C = 121.2 °C\nThis is within the range of the suffix 7 version parts (–40 < TJ < 125 °C).\nIn this case, parts must be ordered at least with the temperature range suffix 7 (see \nTable 57: Ordering information scheme ).\nFigure 46. LQFP100 PD max vs. TA\n0100200300400500600700\n65 75 85 95 105 115 125 135\nTA (°C)PD (mW)Suffix 6\nSuffix 7\nOrdering information scheme STM32F103x8, STM32F103xB\n84/91  Doc ID 13587 Rev 107 Ordering information scheme\n         \nFor a list of available options (speed, package, etc.) or for further information on any aspect \nof this device, please contact your nearest ST sales office.Table 57. Ordering information scheme\nExample: STM32 F 103 C 8 T 7 xxx\nDevice family\nSTM32 = ARM-based 32-bit microcontroller\nProduct type\nF = general-purpose\nDevice subfamily\n103 = performance line\nPin count\nT = 36 pins\nC = 48 pins\nR = 64 pins\nV = 100 pins\nFlash memory size(1)\n1. Although STM32F103x6 devices are not described in this datasheet, or derable part numbers that do not \nshow the A internal code after tem perature range code 6 or 7 should be referred to this datasheet for the \nelectrical characteri stics. The low-density datasheet only cove rs STM32F103x6 devices  that feature the \nA code.8 = 64 Kbytes of Flash memory\nB = 128 Kbytes of Flash memory\nPackage\nH = BGA\nT = LQFP\nU = VFQFPN\nTemperature range\n6 = Industrial temperature range, –40 to 85 °C.7 = Industrial temperature range, –40 to 105 °C.\nOptions\nxxx = programmed parts\nTR = tape and real\nSTM32F103x8, STM32F103xB Revision history\nDoc ID 13587 Rev 10 85/918 Revision history\n         Table 58. Document revision history\nDate Revision Changes\n01-jun-2007 1 Initial release.\n20-Jul-2007 2Flash memory size modified in Note 7 , Note 4 , Note 7 , Note 8  and \nBGA100 pins added to Table 5: Medium-density STM32F103xx pin \ndefinitions . Figure 3: STM32F103xx performance line LFBGA100 \nballout  added.\nTHSE changed to TLSE in Figure 20: Low-speed external clock source \nAC timing diagram . VBAT ranged modified in Power supply schemes .\ntSU(LSE)  changed to tSU(HSE)  in Table 22: HSE 4-16 MHz oscillator \ncharacteristics . IDD(HSI)  max value added to Table 24: HSI oscillator \ncharacteristics .\nSample size modified and machine model removed in Electrostatic \ndischarge (ESD) .\nNumber of parts modified and standard reference updated in Static \nlatch-up . 25 °C and 85 °C conditions removed and class name modified \nin Table 33: Electrical sensitivities . RPU and RPD min and max values \nadded to Table 34: I/O static characteristics . RPU min and max values \nadded to Table 37: NRST pin characteristics .\nFigure 25: I2C bus AC waveforms and measurement circuit  and \nFigure 24: Recommended NRST pin protection  corrected.\nNotes removed below Table 9 , Table 37 , Table 43 .\nIDD typical values changed in Table 11: Maximum current consumption \nin Run and Sleep modes . Table 38: TIMx characteristics  modified.\ntSTAB, VREF+ value, tlat and fTRIG added to Table 45: ADC \ncharacteristics .\nIn Table 29: Flash memory endurance and data retention , typical \nendurance and data retention for TA = 85 °C added, data retention for \nTA = 25 °C removed.\nVBG changed to VREFINT in Table 12: Embedded internal reference \nvoltage . Document title changed. Controller area network (CAN)  \nsection modified.\nFigure 12: Power supply scheme  modified.\nFeatures on page 1  list optimized. Small text changes.\nRevision history STM32F103x8, STM32F103xB\n86/91  Doc ID 13587 Rev 1018-Oct-2007 3STM32F103CBT6, STM32F103T6 a nd STM32F103T8 root part \nnumbers added (see Table 2: STM32F103xx medium-density device \nfeatures and peripheral counts )\nVFQFPN36 package added (see Section 6: Package characteristics ). \nAll packages are ECOPACK® compliant. Package mechanical data inch values are calculated from mm and rounded to 4 decimal digits \n(see Section 6: Package characteristics ).\nTable 5: Medium-density STM32F103xx pin definitions  updated and \nclarified.\nTable 26: Low-power mode wakeup timings  updated.\nT\nA min corrected in Table 12: Embedded internal reference voltage .\nNote 2  added below Table 22: HSE 4-16 MHz oscillator characteristics .\nVESD(CDM)  value added to Table 32: ESD absolute maximum ratings .\nNote 3  added and VOH parameter description modified in Table 35: \nOutput voltage characteristics .\nNote 1  modified under Table 36: I/O AC characteristics .\nEquation 1  and Table 46: RAIN max for fADC = 14 MHz  added to \nSection 5.3.17: 12-bit ADC characteristics .\nVAIN, tS max, tCONV , VREF+ min and tlat max modified, notes modified \nand tlatr added in Table 45: ADC characteristics .\nFigure 30: ADC accuracy characteristics  updated. Note 1  modified \nbelow Figure 31: Typical connection diagram using the ADC .\nElectrostatic discharge (ESD) on page 55  modified.\nNumber of TIM4 channels modified in Figure 1: STM32F103xx \nperformance line block diagram .\nMaximum current consumption Table 13 , Table 14  and Table 15  \nupdated. Vhysmodified in Table 34: I/O static characteristics .\nTable 48: ADC accuracy  updated. tVDD modified in Table 10: Operating \nconditions at power-up / power-down . VFESD  value added in Table 30: \nEMS characteristics .\nValues corrected, note 2 modified and note 3 removed in Table 26: \nLow-power mode wakeup timings .\nTable 16: Typical and maximum current consumptions in Stop and \nStandby modes : Typical values added for VDD/VBAT = 2.4 V, Note 2  \nmodified, Note 2  added.\nTable 21: Typical current consumption in Standby mode  added. On-chip \nperipheral current consumption on page 46  added.\nACCHSI values updated in Table 24: HSI oscillator characteristics .\nVprog added to Table 28: Flash memory characteristics .\nUpper option byte address modified in Figure 9: Memory map .\nTypical fLSI value added in Table 25: LSI oscillator characteristics  and \ninternal RC value corrected from 32 to 40 kHz in entire document.\nTS_temp  added to Table 49: TS characteristics . NEND modified in \nTable 29: Flash memory endurance and data retention .\nTS_vrefint  added to Table 12: Embedded internal reference voltage .\nHandling of unused pins specified in General input/output \ncharacteristics on page 56 . All I/Os are CMOS and TTL compliant. \nFigure 32: Power supply and reference decoupling (VREF+ not \nconnected to VDDA) modified.\ntJITTER  and fVCO removed from Table 27: PLL characteristics .\nAppendix A: Important notes on page 81  added.\nAdded Figure 14 , Figure 15 , Figure 16  and Figure 18 .Table 58. Document revision history (continued)\nDate Revision Changes\nSTM32F103x8, STM32F103xB Revision history\nDoc ID 13587 Rev 10 87/9122-Nov-2007 4Document status promoted from preliminary data to datasheet.\nThe STM32F103xx is USB certified. Small text changes.\nPower supply schemes on page 13  modified. Number of \ncommunication peripherals corrected for STM32F103Tx and number of \nGPIOs corrected for LQFP package in Table 2: STM32F103xx medium-\ndensity device features and peripheral counts .\nMain function and default alternate function modified for PC14 and \nPC15 in, Note 5  added and Remap column added in Table 5: Medium-\ndensity STM32F103xx pin definitions .\nVDD–VSS ratings and Note 1  modified in Table 6: Voltage \ncharacteristics , Note 1 modified in Table 7: Current characteristics .\nNote 1  and Note 2  added in Table 11: Embedded reset and power \ncontrol block characteristics .\nIDD value at 72 MHz with peripherals enabled modified in Table 14: \nMaximum current consumption in Run mode, code with data \nprocessing  running from RAM .\nIDD value at 72 MHz with peripherals enabled modified in Table 15: \nMaximum current consumption in Sleep mode, code running from \nFlash or RAM on page 41 .\nIDD_VBAT  typical value at 2.4 V modified and IDD_VBAT  maximum values \nadded in Table 16: Typical and maximum current consumptions in Stop \nand Standby modes . Note added in Table 17 on page 44  and Table 18 \non page 45 . ADC1 and ADC2 consumption and notes modified in \nTable 19: Peripheral current consumption .\ntSU(HSE)  and tSU(LSE)  conditions modified in Table 22  and Table 23 , \nrespectively.Maximum values removed from Table 26: Low-power mode wakeup \ntimings . t\nRET conditions modified in Table 29: Flash memory endurance \nand data retention . Figure 12: Power supply scheme  corrected.\nFigure 17: Typical current consumption in Stop mode with regulator in \nLow-power mode versus temperature at VDD = 3.3 V and 3.6 V  added.\nNote removed below Figure 26: SPI timing diagram - slave mode and \nCPHA = 0 . Note added below Figure 27: SPI timing diagram - slave \nmode and CPHA = 1(1).\nDetails on unused pins removed from General input/output \ncharacteristics on page 56 .\nTable 41: SPI characteristics  updated. Table 42: USB startup time  \nadded. VAIN, tlat and tlatr modified, note added and Ilkg removed in \nTable 45: ADC characteristics . Test conditions modified and note added \nin Table 48: ADC accuracy . Note added below Table 46  and Table 49 .\nInch values corrected in Table 52: LQPF100, 100-pin low-profile quad \nflat package mechanical data , Table 53: LQFP64, 64-pin low-profile \nquad flat package mechanical data  and Table 55: LQFP48, 48-pin low-\nprofile quad flat package mechanical data .\n\uf051JAvalue for VFQFPN36 package added in Table 56: Package thermal \ncharacteristics \uf02e\nOrder codes replaced by Section 7: Ordering information scheme .\nMCU ‘s operating conditions modified in Typical current consumption \non page 44 . Avg_Slope and V25 modified in Table 49: TS \ncharacteristics . I2C interface characteristics on page 61  modified.\nImpedance size specified in A.4: Voltage glitch on ADC input 0 on \npage 81 .Table 58. Document revision history (continued)\nDate Revision Changes\nRevision history STM32F103x8, STM32F103xB\n88/91  Doc ID 13587 Rev 1014-Mar-2008 5Figure 2: Clock tree on page 20  added.\nMaximum TJ value given in Table 8: Thermal characteristics on \npage 35 .\nCRC feature added (see CRC (cyclic redundancy check) calculation \nunit on page 9  and Figure 9: Memory map on page 31  for address).\nIDD modified in Table 16: Typical and maximum current consumptions in \nStop and Standby modes .\nACCHSI modified in Table 24: HSI oscillator characteristics on page 51 , \nnote 2 removed.\nPD, TA and TJ added, tprog values modified and tprog description clarified \nin Table 28: Flash memory characteristics on page 52 .\ntRET modified in Table 29: Flash memory endurance and data retention .\nVNF(NRST)  unit corrected in Table 37: NRST pin characteristics on \npage 59 .\nTable 41: SPI characteristics on page 63  modified.\nIVREF  added to Table 45: ADC characteristics on page 67 .\nTable 47: ADC accuracy - limited test conditions  added. Table 48: ADC \naccuracy  modified.\nLQFP100 package specifications updated (see Section 6: Package \ncharacteristics on page 72 ).\nRecommended LQFP100, LQFP 64, LQFP48 and VFQFPN36 \nfootprints added (see Figure 39 , Figure 41 , Figure 45  and Figure 35 ).\nSection 6.2: Thermal characteristics on page 81  modified, \nSection 6.2.1  and Section 6.2.2  added.\nAppendix A: Important notes on page 81  removed.\n21-Mar-2008 6Small text changes. Figure 9: Memory map  clarified.\nIn Table 29: Flash memory endurance and data retention :\n–NEND tested over the whole temperature range\n– cycling conditions specified for tRET\n–tRET min modified at TA = 55 °C\nV25, Avg_Slope and  TL modified in Table 49: TS characteristics .\nCRC feature removed.\n22-May-2008 7CRC feature added back. Small text changes. Section 1: Introduction  \nmodified. Section 2.2: Full compatibility throughout the family  added.\nIDD at TA max = 105 °C added to Table 16: Typical and maximum \ncurrent consumptions in Stop and Standby modes on page 42 .\nIDD_VBAT removed from Table 21: Typical current consumption in \nStandby mode on page 47 .\nValues added to Table 40: SCL frequency (fPCLK1 = 36 MHz.,VDD = 3.3 \nV) on page 62 .\nFigure 26: SPI timing diagram - slave mode and CPHA = 0 on page 64  \nmodified. Equation 1  corrected.\ntRET at TA = 105 °C modified in Table 29: Flash memory endurance and \ndata retention on page 53 .\nVUSB added to Table 43: USB DC electrical characteristics on page 66 .\nFigure 46: LQFP100 PD max vs. TA on page 83  modified.\nAxx option added to Table 57: Ordering information scheme on \npage 84 .Table 58. Document revision history (continued)\nDate Revision Changes\nSTM32F103x8, STM32F103xB Revision history\nDoc ID 13587 Rev 10 89/9121-Jul-2008 8Power supply supervisor  updated and VDDA added to Table 9: General \noperating conditions .\nCapacitance modified in Figure 12: Power supply scheme on page 33 .\nTable notes revised in Section 5: Electrical characteristics .\nTable 16: Typical and maximum current consumptions in Stop and \nStandby modes  modified.\nData added to Table 16: Typical and maximum current consumptions in \nStop and Standby modes  and Table 21: Typical current consumption in \nStandby mode  removed.\nfHSE_ext  modified in Table 20: High-speed external user clock \ncharacteristics on page 47 . fPLL_IN  modified in Table 27: PLL \ncharacteristics on page 52 .\nMinimum SDA and SCL fall time value for Fast mode removed from \nTable 39: I2C characteristics on page 61 , note 1 modified.\nth(NSS) modified in Table 41: SPI characteristics on page 63  and \nFigure 26: SPI timing diagram - slave mode and CPHA = 0 on page 64 .\nCADC modified in Table 45: ADC characteristics on page 67  and \nFigure 31: Typical connection diagram using the ADC  modified.\nTypical TS_temp  value removed from Table 49: TS characteristics on \npage 71 .\nLQFP48 package specifications updated (see Table 55  and Table 45 ), \nSection 6: Package characteristics  revised.\nAxx option removed from Table 57: Ordering information scheme on \npage 84 .\nSmall text changes.\n22-Sep-2008 9STM32F103x6 part numbers removed (see Table 57: Ordering \ninformation scheme ). Small text changes.\nGeneral-purpose timers (TIMx)  and Advanced-control timer (TIM1) on \npage 15  updated.\nNotes updated in Table 5: Medium-density STM32F103xx pin \ndefinitions on page 26 .\nNote 2  modified below Table 6: Voltage characteristics on page 34 , \n|\uf044VDDx| min and | \uf044VDDx| min removed.\nMeasurement conditions specified in Section 5.3.5: Supply current \ncharacteristics on page 38 .\nIDD in standby mode at 85 °C modified in Table 16: Typical and \nmaximum current consumptions in Stop and Standby modes on \npage 42 .\nGeneral input/output characteristics on page 56  modified.\nfHCLK conditions modified in Table 30: EMS characteristics on page 54 .\n\uf051JA and pitch value modified for LFBGA100 package in Table 56: \nPackage thermal characteristics . Small text changes.Table 58. Document revision history (continued)\nDate Revision Changes\nRevision history STM32F103x8, STM32F103xB\n90/91  Doc ID 13587 Rev 1023-Apr-2009 10I/O information clarified  on page 1 .\nFigure 3: STM32F103xx performance line LFBGA100 ballout  modified. \nFigure 9: Memory map  modified. Table 4: Timer feature comparison  \nadded.\nPB4, PB13, PB14, PB15, PB3/TRACESWO moved from Default \ncolumn to Remap column in Table 5: Medium-density STM32F103xx \npin definitions .\nPD for LFBGA100 corrected in Table 9: General operating conditions .\nNote modified in Table 13: Maximum current consumption in Run \nmode, code with data processing  running from Flash  and Table 15: \nMaximum current consumption in Sleep mode, code running from \nFlash or RAM .\nTable 20: High-speed external user clock characteristics  and Table 21: \nLow-speed external user clock characteristics  modified.\nFigure 17  shows a typical curve (title modified). ACCHSI max values \nmodified in Table 24: HSI oscillator characteristics .\nTFBGA64 package added (see Table 54  and Table 42 ). Small text \nchanges.Table 58. Document revision history (continued)\nDate Revision Changes\nSTM32F103x8, STM32F103xB\nDoc ID 13587 Rev 10 91/91                  \n \nPlease Read Carefully:\nInformation in this document is provided solely in connection with ST products. STMicroelectronics NV and its subsidiaries (“ST ”) reserve the\nright to make changes, corrections, modifications or improvements, to this document, and the products and services described he rein at any\ntime, without notice.\nAll ST products are sold pursuant to ST’s terms and conditions of sale.Purchasers are solely responsible for the choice, selection and use of the ST products and services described herein, and ST as sumes no\nliability whatsoever relating to the choice, selection or use of the ST products and services described herein.\nNo license, express or implied, by estoppel or otherwise, to any intellectual property rights is granted under this document. I f any part of this\ndocument refers to any third party products or services it shall not be deemed a license grant by ST for the use of such third party products\nor services, or any intellectual property contained therein or considered as a warranty covering the use in any manner whatsoev er of such\nthird party products or services or any intellectual property contained therein.\nUNLESS OTHERWISE SET FORTH IN ST’S TERMS AND CONDITIONS OF SALE ST DISCLAIMS ANY EXPRESS OR IMPLIED\nWARRANTY WITH RESPECT TO THE USE AND/OR SALE OF ST PRODUCTS INCLUDING WITHOUT LIMITATION IMPLIED\nWARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTI CULAR PURPOSE (AND THEIR EQUIVALENTS UNDER THE LAWS\nOF ANY JURISDICTION), OR INFRINGEMENT OF ANY PATENT, COPYRIGHT OR OTHER INTELLECTUAL PROPERTY RIGHT.\nUNLESS EXPRESSLY APPROVED IN WRITING BY AN AUTHORIZED ST REPRESENTATIVE, ST PRODUCTS ARE NOT\nRECOMMENDED, AUTHORIZED OR WARRANTED FOR USE IN MILITA RY, AIR CRAFT, SPACE, LIFE SAVING, OR LIFE SUSTAINING\nAPPLICATIONS, NOR IN PRODUCTS OR SYSTEMS WHERE FAILURE OR MALFUNCTION MAY RESULT IN PERSONAL INJURY,\nDEATH, OR SEVERE PROPERTY OR ENVIRONMENTAL DAMAGE. ST PRODUCTS WHICH ARE NOT SPECIFIED AS "AUTOMOTIVEGRADE" MAY ONLY BE USED IN AUTOMOTIVE APPLICATIONS AT USER’S OWN RISK.\nResale of ST products with provisions different from the statements and/or technical features set forth in this document shall immediately void\nany warranty granted by ST for the ST product or service described herein and shall not create or extend in any manner whatsoev er, any\nliability of ST.\nST and the ST logo are trademarks or registered trademarks of ST in various countries.\nInformation in this document supersedes and replaces all information previously supplied.\nThe ST logo is a registered trademark of STMicroelectronics. All other names are the property of their respective owners.\n© 2009 STMicroelectronics - All rights reserved\nSTMicroelectronics group of companies\nAustralia - Belgium - Brazil - Canada - China - Czech Republic - Finland - France - Germany - Hong Kong - India - Israel - Ital y - Japan - \nMalaysia - Malta - Morocco - Philippines - Singapore - Spain - Sweden - Switzerland - United Kingdom - United States of America\nwww.st.com\n'}]
!==============================================================================!
### Component Summary: STM32F103T8U6

#### Key Characteristics and Specifications:
- **Voltage Ratings**: 
  - Operating Voltage: 2.0 to 3.6 V
  - V_BAT (Backup Voltage): 1.8 to 3.6 V
- **Current Ratings**: 
  - Maximum current into VDD/VDDA: 150 mA
  - Maximum current out of VSS: 150 mA
  - Output current per I/O pin: ±25 mA (up to ±8 mA for standard I/Os)
- **Power Consumption**: 
  - Maximum current consumption in Run mode (72 MHz): 50 mA (with all peripherals enabled)
  - Sleep mode: 30 mA (typical)
  - Stop mode: 24 µA (typical)
  - Standby mode: 2.6 µA (typical)
- **Operating Temperature Range**: 
  - -40 to +85 °C (Industrial grade)
  - -40 to +105 °C (Extended temperature range)
- **Package Type**: 
  - Available in multiple packages: LQFP48, LQFP64, LQFP100, TFBGA64, VFQFPN36
- **Special Features**: 
  - ARM Cortex-M3 core, 72 MHz maximum frequency
  - 64 or 128 Kbytes of Flash memory
  - 20 Kbytes of SRAM
  - 2 x 12-bit ADCs, 7 timers, USB 2.0, CAN interface
  - Low-power modes: Sleep, Stop, and Standby
  - Integrated power-on reset (POR) and programmable voltage detector (PVD)
- **Moisture Sensitive Level**: 
  - MSL Level 3 (according to JEDEC J-STD-020E)

#### Description:
The **STM32F103T8U6** is a medium-density performance line microcontroller from STMicroelectronics, based on the ARM Cortex-M3 architecture. It operates at a maximum frequency of 72 MHz and is designed for high-performance applications requiring efficient processing and low power consumption. The microcontroller features a rich set of peripherals, including multiple timers, ADCs, and communication interfaces, making it suitable for a wide range of applications.

#### Typical Applications:
- **Motor Drive and Control**: The STM32F103T8U6 can be used in applications requiring precise control of motors, such as in robotics and automation systems.
- **Medical Devices**: Its low power consumption and reliability make it suitable for portable medical equipment.
- **Industrial Control Systems**: The microcontroller can be integrated into PLCs, inverters, and other industrial automation devices.
- **Consumer Electronics**: It is commonly used in devices like printers, scanners, and gaming peripherals.
- **Alarm Systems and HVAC**: The STM32F103T8U6 can be utilized in security systems and heating, ventilation, and air conditioning controls.

This microcontroller's versatility and performance make it an excellent choice for developers looking to implement complex applications in embedded systems.