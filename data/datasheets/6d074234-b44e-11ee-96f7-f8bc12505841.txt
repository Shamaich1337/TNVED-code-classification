[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of MAQ473GQE-AEC1-Z production of MONOLITHIC POWER SYSTEMS from the text:MAQ473  \n 9-Bit to 14-Bit, MagAlpha Automotive  \nAngle Sensor  with ABZ Incremental  \nand PWM Outputs  \nMAQ473  Rev. 1.1 MonolithicPower.com  1 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nDESCRIPTION  \nThe MAQ473  detects the absolute angular \nposition of a permanent magnet, typically a \ndiametrically mag netized cylinder on a rotating \nshaft . Fast data  acquisition and processing \nprovide accurate angle measurement at speeds \nfrom 0 rpm to 60,000rpm. \nThe MAQ473  supports a wide range of m agnetic \nfield strengths and spat ial configurations. Both \nend-of-shaft and off -axis (side-shaft mounting) \nconfigurations  are supported.  \nThe MAQ473  features magnetic field strength \ndetection  with programmable thresholds to  allow \nsensing  of the magnet position relative to the \nsensor  for creation of functions such a s the \nsensing of axial movements  or for diagnostics . \nThe o n-chip non-volatile memory provides \nstorage for  configuration  parameters , including \nthe reference zero -angle position , ABZ encoder \nsettings , and magnetic field detection \nthresholds.  \nThe MAQ473 is AEC -Q100 qualified, and is \navailable in a QFN -16 (3mmx3mm) package . FEATURES  \n\uf0b7 9-Bit to 14-Bit Resolution Absolute Angle \nEncoder  \n\uf0b7 Contactless Sensing for Long Life span  \n\uf0b7 SPI Serial Interface with Parity B it for Angle \nReadout and Chip Configuration  \n\uf0b7 Configuration  Programmable Magnetic Field \nStrength Detection for Diagnostic Checks  \n\uf0b7 Incremental 1 2-Bit ABZ Quadrature \nEncoder Interfa ce with Programmable \nPulses Per Turn from 1  to 1024  \n\uf0b7 14-Bit PWM Output  \n\uf0b7 3.3V, 12mA Supply  Current  \n\uf0b7 -40°C to + 150°C Operating Temperature  \n\uf0b7 Available in a QFN -16 (3mmx3mm)  \nPackage  with Wettable F lanks  \n\uf0b7 Available in AEC -Q100 Grade 1  \nAPPLICATIONS  \n\uf0b7 Automotive  \n\uf0b7 Angle Encoder s \n\uf0b7 Automotive Angle or Speed Sensor s \n\uf0b7 Robotics  \nAll MPS parts are lead -free, halogen -free, and adhere to the RoHS directive. \nFor MPS green status, please visit the MPS website under Quality \nAssurance.  “MPS” , the MPS logo, and “Simply, Easy Solutions ” are \nregistered trademarks of Monolithic Power Systems, Inc.  or its subsidiaries.  \n \nTYPICAL APPLICATION  \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  2 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nORDERING INFORMATION  \nPart Number*  Package  Top Marking  MSL Rating  \nMAQ473 GQE-AEC1  QFN -16 (3mmx3mm)  See Below  1 \n* For Tape & Reel, add suffix -Z (e.g. MAQ473 GQE–AEC1 -Z). \n \nTOP MARKING  \n____  \nBNXY  \nLLLL \n \nBNX: Product code of MAQ473 GQE  \nY: Year code  \nLLLL: Lot number  \n \n \nPACKAGE REFERENCE  \n TOP VIEW  \n \nQFN -16 (3mmx3mm)  \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  3 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nPIN FUNCTIONS  \nPin #  Name  Description  \n1 SSD Data out (SSI).  \n2 A Incremental output.  \n3 Z Incremental output.  \n4 MOSI  Data in (SPI) . The MOSI  pin has an internal pull -down  resistor.  \n5 CS Chip select (SPI) . The CS pin has an internal pull-up resistor.  \n6 B Incremental output.  \n7 MISO  Data out (SPI). MISO has an internal pull -down resistor that is enabled when the device is \nin a high-impedance state.  \n8 GND  Supply ground.  \n9 PWM  PWM output . \n10 TEST  Connect to ground.  \n11 MGL  Digital output indicating field strength below  the MGLT  level . \n12 SCLK  Clock (SPI). The SCLK  pin has an internal pull -down  resistor.  \n13 VDD  3.3V supply . \n14 NC No connection.  Leave the NC pin unconnected.  \n15 SSCK  Clock (SSI) . The SSCK  pin has an internal pull -down  resistor.  \n16 MGH  Digital output indicating field strength above the MGHT  level . \n17 Exposed \npad Recommend not to solder . Leave floating.  \n \nABSOLUTE MAXIMUM RAT INGS (1) \nSupply voltage  ............................  -0.5V to +4.6V \nInput  pin voltage  (VI) ...................  -0.5V to +6.0V \nOutput pin voltage  (VO) ...............  -0.5V to +4.6V  \nContinuous power dissipation  (TA = 25°C) (2) \n ................................ ................................ .. 2.0W \nJunction temperature  ...............................  160°C \nLead temperature  ................................ .... 260°C  \nStorage temperature  ................  -65°C to +160°C \nESD Rating s \nHuman  body model (HBM)  ..........................  2kV \nCharged  device model (CDM)  ....................  750V Thermal Resistance  (3) θJA θJC \nQFN -16 (3mmx3mm)  ............  50 ....... 12 ... °C/W \nNotes: \n1) Exceeding these ratings may damage the device.  \n2) The maximum allowable power dissipation is a function of the \nmaximum junction temperature T J (MAX),  the junction -to-\nambient thermal resistance θ JA, and the ambient temperature \nTA. The maximum allowable continuous power dissipation at \nany ambient temperature is calculated by P D (MAX) = (T J \n(MAX)  - TA) / θJA.  \n3) Measured on JESD51 -7, 4-layer PCB.  \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  4 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nELECTRICAL CHARACTER ISTICS  \nParameter  Symbol  Condition  Min Typ Max Units  \nRecommended Operating Conditions  \nSupply voltage  VDD  3.0 3.3 3.6 V \nSupply current  IDD From -40°C to +125°C  10.2 12 13.8 mA \nOperating (ambient)  \ntemperature  TA  -40  +150 °C \nApplied magnetic field  B  30 60  mT \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  5 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nGENERAL CHARACTERIST ICS \nVDD = 3.3 V, 45mT < B < 100mT, TA = -40°C to +125°C, unless otherwise noted.  \nParameter  Symbol  Condition  Min Typ Max Units  \nAbsolute Output (Serial ) \nEffective resolution (± 3σ)  filter window τ = 64µs  9.0 9.8 10.5 bits \n filter window τ = 16ms  13.0 13.8 14.5 bits \nNoise  root mean square \n(RMS )  filter window τ = 64µs  0.04 0.07 0.12 deg \n filter window τ = 16ms  0.003  0.004  0.007  deg \nRefresh rate    850 980 1100  kHz \nData  output length    16  16 bits \nResponse Time  \nStart -up time (4)  filter window τ = 64µs    0.6 ms \n filter window τ = 16ms    260 ms \nLatency (4)  Constant speed propagation delay  8  10 µs \nFilter cutoff frequency (4) fCUTOFF  filter window τ = 64µs   6  kHz \nfCUTOFF  filter window τ = 16ms   23  Hz \nAccuracy  \nIntegral nonlinearity ( INL) at \n25°C   At room temperature across  the full \nfield range   0.7   deg \nINL between -40°C and \n+125°C (5)  Across  the full temperature range \nand field range   1.1  deg \nINL at 150 °C  Across  the full field range   1.16  deg \nOutput Drift  \nTemperature -induced drift \nat room temperature (5)    0.015   deg/°C  \nTemperature -induced \nvariation (5)  From 25°C to 85°C   0.5  deg \n From 25°C  to 125°C   1.0  deg \nMagnetic field induced (5)    0.005   deg/mT  \nVoltage supply induced (5)     0.3 deg/V  \nAbsolute Output (PWM ) \nPWM frequency  fPWM  840 970 1090 Hz \nPWM resolution    13 13.8 14.0 bits \nIncremental Output (ABZ) \nABZ update rate     16   MHz \nResolution (edges per turn )  Programmable  4  4096   \nPulses per channel per turn  PPT + 1 Programmable  1  1024   \nABZ hysteresis (5) H Programmable  0.08  2.8 deg \nSystematic jitter (5)  For PPT = 1023, up to 60mT    11 % \n For PPT = 127    7 % \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  6 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nGENERAL CHARACTERIST ICS (continued)  \nVDD = 3.3 V, 45mT < B < 100mT,  TA = -40°C to +125°C, unless otherwise noted.  \nParameter  Symbol  Condition  Min Typ Max Units  \nMagnetic Field Detection Thresholds  \nAccuracy  (5)    5  mT \nHysteresis  (5) MagHys    6  mT \nTemperature drift  (5)    -600  ppm/°C \nDigital I/O  \nInput high voltage  VIH  2.5  5.5 V \nInput low voltage  VIL  -0.3  +0.8 V \nOutput low voltage (5) VOL IOL = 4mA   0.4 V \nOutput high voltage  (5) VOH IOH = 4mA 2.4   V \nPull-up resistor  RPU  46 66 97 kΩ \nPull-down resistor  RPD  43 55 97 kΩ \nRising edge slew rate (4) tR CL = 50pF   0.7  V/ns \nFalling edge slew rate   (4) tF CL = 50pF   0.7  V/ns \nNotes : \n4) Guaranteed by design . \n5) Guaranteed by characteri zation . \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  7 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nTYPICAL CHARACTERIST ICS \nVDD = 3.3V, TA = 25°C, unless otherwise noted . \nABZ Jitter  \nPPT = 255 , τ = 1ms  Current Consumption  Filter Transfer Function  \nτ = 16ms  \n \n   \n \n \nError Curve  \n50mT  Nonlinearity  (INL and \nHarmonics)  Effective Resolution  \n3σ \n   \nNoise Spectrum  \n50mT and τ = 16ms    \n \n   \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  8 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nFUNCTIONAL BLOCK DIAGRAM  \n \nFigure 1: Functional Block Diagram  \n \n\n MAQ473 – 9-BIT TO 14 -BIT, AUTOMOTIVE ANG LE SENSOR W/ ABZ & P WM OUTPUTS  \nMAQ473  Rev. 1.1 MonolithicPower.com  9 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nOPERATION  \nSensor Front  End \nThe magnetic field is detected with integrated \nHall devices located in the center of the package. \nThe angle is measured using MPS’s proprietary  \nSpinAxisTM method, which directly digitizes the \ndirection of the field without the need for complex \narctangent comp utation or feedback loop -based \ncircuits (interpolators ).  \nThe SpinAxisTM method is based  on phase \ndetection , and generates a sinusoidal signal with \na phase that represents the angle of the \nmagnetic field. The angle is then obtained by a \ntime-to-digital converter, which measures the \ntime between the zero crossing of the sinusoidal \nsignal and the edge of a constan t waveform (see \nFigure 2 ). The time-to-digital  is output ted from \nthe front end to the digital conditioning block.  \nStart Stop\n \nFigure 2: Phase Detection Method  across the \nSine Waveform  (Top) and Time -to-Digital \nConv erter  Clock (Bottom)  \nThe output of the front  end delivers a digital \nnumber proportional to the angle of the magnetic \nfield at the rate of 1MHz in a straightforward , \nopen -loop manner.   \nDigital Filtering  \nThe front -end signal is further treated to achieve \nthe final effective resolution. This treatment does \nnot add any latency in steady conditions. The \nfilter transfer function can be calculated with \nEquation (1) : \n \n21+2τsH(s) =(1+τs)  (1) \nWhere τ is the filter time constant  related to the \ncutoff frequency by : τ = 0.38 / fCUTOFF .  \nSee the General Characteristics section on page \n5 for the value of  fCUTOFF . \n  \nSensor Magnet Mounting  \nThe MAQ473’s  sensitive area (where the Hall \ndevices are placed) is confined within a region \nless than 100µm wide and has multiple \nintegrated Hall devices. This volume is located \nboth horizontally and vertically within 50µm of \nthe center of the QFN package. The sensor \ndetects the angle of the magnetic field projected \nin a plane parallel to the package’s upper \nsurface. This means that the only relevant \nmagnetic field is the in -plane component (X and \nY components) in the mid -point of the package.  \nBy default , when looking at the top of the \npackage, the angle increases when  the magnetic \nfield rotates clockwise. Figure 3 shows the zero \nangle of the unprogrammed sensor , where the \nplus sign  indicates the sensitive point.  Both the \nrotation direction and the zero angle can be \nprogrammed.  \n \nFigure 3: Detection  Point and Default Positive \nDirection  \nThis type of detection provides flexibility for \nangular encoder  design . The sensor only \nrequires the magnetic vector to lie within the \nsensor plane with a  field amplitude of at least \n30mT. The MAQ473  can w ork with fields smaller \nthan 30 mT, but the linearity and resolution \nperformance may deviate from the \nspecifications. The most straightforwar d \nmounting  method  is to place the MAQ473  sensor \non the rotation axis of a permanent magnet (e .g. \na diametrically mag netized cylinder ) (see Figure \n4 on page 10 ).  \n\n MAQ473 – 9-BIT TO 14 -BIT, AUTOMOTIVE ANG LE SENSOR W/ ABZ & P WM OUTPUTS  \nMAQ473  Rev. 1.1 MonolithicPower.com  10 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nThe recommended magnet is a Neodymium \nalloy (N 35) cylinder with dimensions Ø5x3 mm, \ninserted into an aluminum shaft  with a 1.5 mm air \ngap between the magnet and the s ensor \n(surface of package) . For good linearity, positio n \nthe with a precision of 0.5mm.  \n \nFigure 4: End-of-Shaft Mounting  \nIf the end -of-shaft position is not available, the \nsensor can be positioned away from the rotation \naxis of a cylinder or ring magnet (s ee Figure 5). \nIn this case, the magnetic field angle is no t \ndirectly proportional to the mechanical angle. \nThe MAQ473  can be adjusted to compensate for \nthis effect and recover the linear relation \nbetween the mechanical angle and the sensor \noutput. With multiple pole pair magnets, the \nMAQ473  indicates multiple rotations for each \nmechanical turn.  \n \nFigure 5: Side -Shaft Mounting  \nElectrical Mounting and Power Supply \nDecoupling  \nIt is recommended to place a 1µF decouplin g \ncapacitor close to the sensor  with a lo w-\nimpedance path to GND ( see Figure 6). \n  Figure 6: Supply Decoupl ing Connection  \nIn general , the MAQ473  works well with or \nwithout the exposed pad connected. For \noptimum electrica l, thermal , and mechanical  \nconditions , it is recommend ed that the exposed \npad be connected to ground.  \nSerial Interface  \nThe sensor s upports the serial peripheral \ninterface (SPI) standard for angle reading and  \nregister  programming.  Alternatively, the  \nsynchronous serial interface  (SSI) bus can be \nused for angle reading (programming through \nthe SSI is not support ed). \nThe d ata length is 16 bit s. For checking the \nintegrity of the data received (angle or register \ncontent) the master send s a 17 th clock count \nand receive s a parity bit.  \nSPI \nThe SPI is a four -wire, synchronous , serial \ncommunication interface . The MAQ473  support s \nSPI Mode 3 and Mode 0 (see Table 1 and Table \n2). The SPI mode (0 or 3) is detected  \nautomatically by the sensor , and therefore does \nnot require any action from the user . The \nmaximum clock rate supported on the SPI is \n25MHz. There is no min imum clock rate. Real-\nworld  data rates depend  on the PCB layout \nquality and signal trace length.  See Figure 7 and \nTable 3 on page 11  for SPI timing.  \nTable 1: SPI Specification  \n Mode 0 Mode 3 \nSCLK Idle State  Low High \nData Capture  On SCLK r ising edge  \nData  Transmi ssion  On SCLK  falling  edge  \nCS Idle State  High \nData Order MSB first  \nTable 2: SPI Standard  \n Mode 0 Mode 3 \nCPOL  0 1 \nCPHA  0 1 \nData Order (DORD)  0 (MSB first)  \nAll commands to the MAQ473  (whether for \nwriting or  reading register content ) must be \ntransferred through the SPI MOSI pin and must \nbe 16 bits long.  \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  11 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nSee the SPI Communication section on page 12  \nfor details.  \n  \nFigure 7: SPI Timing Diagram  \n  \nFigure 8: Minimum Idle Time  \nTable 3: SPI Timing  \nParameter (6) Description  Min Max \ntIDLE _ANGLE  Idle time between two subsequent angle transmissions  150ns - \ntIDLE _REG Idle time before and after a register readout  750ns - \ntNVM Idle time between a write command and a register readout \n(delay necessary for non -volatile memory update)  20ms -  \ntCSL Time between  the CS falling edge and SCLK falling edge  80ns - \ntSCLK SCLK period  40ns - \ntSCLKL Low level of SCLK signal  20ns - \ntSCLKH  High level  of SCLK signal  20ns - \ntCSH Time between SCLK rising edge and CS rising edge  25ns - \ntMISO SCLK setting edge to data output valid  - 15ns \ntMOSI Data input valid to SCLK reading edge  15ns - \nNote : \n6) Guaranteed by design . \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  12 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nSPI Communication  \nThe sensor supports three types of SPI \noperation:  \n\uf0b7 Read angle  \n\uf0b7 Read configuration register  \n\uf0b7 Write configuration register  \nEach operation has a specific frame structure , \ndescribed below.  \nSPI Read Angle  \nEvery 1µs, new data is transferred into the output \nbuffer. The master device triggers the reading by \npulling CS low.  \nWhen a trigger event is detected, the data \nremains in the output  buffer until the CS signal is \nde-asserted (see Table 4).  \nTable 4: Sensor Data Timing  \nEvent  Action  \nCS falling edge  Start reading and freeze the \noutput buffer  \nCS rising edge  Release the output buffer  \nFigure 9 shows a diagram of a full  SPI angle \nreading . Figure 10 shows a partial SPI angle \nreading. A full angle reading requires 16 clock \npulses. The sensor MISO line  returns : \n MSB            LSB  \nMISO  Angle [15:0] \n  \nMOSI  0 \nThe MagAlpha family has sensors with different \nfeatures and levels of resolution. See the data \noutput length section in the Ge neral \nCharacteristics section on page 5 for the number \nof useful bits delivered at the serial output. If the \ndata length is less than 16, the rest of the bits \nsent are 0s. For example, a d ata output length  of \n12 bits means that the serial output delivers a 12 -\nbit angle value with 4 bits of 0s padded at the end \n(the MISO state remains 0). If the ma ster sends \n16 clock counts , the MAQ473  replies with : \n MSB            LSB  \nMISO  Angle [15:4] 0 0 0 0 \n  \nMOSI  0 Angle reading can be therefore optimized \nwithout any loss of information by reducing the \nnumber of clock counts. In the case of a 12 -bit \ndata output length, only 12 clock counts are \nrequired to get the full sensor resolution.  \n MSB            LSB  \nMISO  Angle [15:4] \n  \nMOSI  0 \nIf less resolution is needed, the angle can be \nread by sending even fewer clock counts (since \nthe MSB is first).   \nIn case of fast reading, the MAQ473  continues \nsending the same data until the data is \nrefreshed. See the refresh rate section in the \nGeneral C haracteristics section on page 5.  \n \nFigure 9: Full 16 -Bit SPI Angle Reading  Diagram  \n \nFigure 10: Partial 8 -Bit SPI Angle R eading  \nDiagram\n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  13 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nSPI Read Register  \nA read register operation consists  of two 16 -bit \nframes. The  first frame sends a read request, \nwhich contains the 3-bit read command (010) \nfollowed by the 5-bit register address. The last 8 \nbits of the frame  must all be set to 0. The second \nframe returns the 8-bit register value (M SB byte).  \nFirst 16 -bit SPI frame (read request):  \n MSB      LSB \nMISO  Angle [15:0] \n        \n Command   Reg. Address      \nMOS I 0 1 0  A4 A3 A2 A1 A0  0 0 0 0 0 0 0 0 \nSecond 16 -bit SPI frame (response):  \n Register  Value      \nMISO  V7 V6 V5 V4 V3 V2 V1 V0  0 0 0 0 0 0 0 0 \n        \n MSB       LSB \nMOSI  0 Figure 11 shows a complete transmission \noverview.  \nFor example, to get the value of the magnetic \nlevel high and low flags (MGH and MGL), read \nregister 27  (bit[6], bit[7]) by sending the following \nfirst frame : \n MSB      LSB \nMISO  Angle [15:0] \n        \n Command   Reg. Address      \nMOS I 0 1 0  1 1 0 1 1  0 0 0 0 0 0 0 0 \nIn the second  frame , the MagAlpha replies:  \n Register  Value      \nMISO  MGH  MGL  X X X X X X  0 0 0 0 0 0 0 0 \n        \n MSB       LSB \nMOSI  0 \nFigure 12 shows a complete example overview.\n \n \n \nFigure 11: Two 16 -Bit Frames Read Register Operation  \n \nFigure 12: Example Read Magnetic Level Flags High and Low (MGH, MGH) on Register 27, Bit s[6:7]  \nSPI Write Register  \nThe Register Map section on page 18  shows  the \nprogrammable 8-bit registers. Data  written to these registers is stored in the on -chip n on-\nvolatile memory  (NVM) and reloaded \nautomatically  at start -up. \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  14 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nA write register operation consists  of two 16 -bit \nframes. The  first frame sends a write request, \nwhich contains the 3 -bit write command (100) , \nfollowed by the 5 -bit register address and the 8 -\nbit value (MSB first). T he second frame returns \nthe newly written register value (acknowledge).  \nThe NVM  is guaranteed to endure 1,000 write \ncycles at 25°C.  \nIt is critical to wait 20ms between the first and the \nsecond frame. This is the time taken to write to \nthe NVM . Failure to implement this wait period \nresult s in the register ’s previous  value being \nread. Note that this delay is only required after a \nwrite request. A read register request or read \nangle do es not require this wait time.  \nThe first 16-bit SPI frame (write request)  is: \n MSB               LSB \nMISO  Angle [15:0] \n        \n Command   Reg. Address   Register  Value  \nMOSI  1 0 0  A4 A3 A2 A1 A0  V7 V6 V5 V4 V3 V2 V1 V0 The second 16-bit SPI frame (response)  is: \n Register  Value      \nMISO  V7 V6 V5 V4 V3 V2 V1 V0  0 0 0 0 0 0 0 0 \n        \n MSB               LSB \nMOSI  0 \nThe readback register content can be used to \nverify the register programming. Figure 13 \nshows a complete transmission overview.  \nFor example, to set the value of the output \nrotation direction (RD) to counterclockwise \n(high) , write register 9  by sending the following \nfirst frame : \n MSB               LSB \nMISO  Angle [15:0] \n        \n Command   Reg. Address   Register  Value  \nMOSI  1 0 0  0 1 0 0 1  1 0 0 0 0 0 0 0 \nSend the second frame after a 20ms wait time. If \nthe register is written correctly, the reply is:  \n Register  Value      \nMISO  1 0 0 0 0 0 0 0  0 0 0 0 0 0 0 0 \n        \n MSB               LSB \nMOSI  0 \nSee Figure 14 for a complete example.  \n \n \nFigure 13: Overview of Two 16 -Bit Frames Write  Register Operation\n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  15 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \n \nFigure 14: Example Write  Output Rotation Direction (RD) to Counterclockwise (High), on Register 9, Bit 7  \n \nSSI \nThe SSI is a two-wire, synchronous serial \ninterface for data reading only. The sensor \noperates as a slave to the external SSI master \nand only support s angle reading. It is not \npossible to read or write registers via the  SSI. SSI Communication  \nUnlike the SPI, the sensor SSI only supports \nangle reading. It is not possible to read or write \nregisters using the SSI. Figure 15 and Table 5 \nshow the SSI timing communication details . \nSSDSSCK\nMSBtSSCKH tSSCKLtSSCK\ntP\nLSBtM\nMSB -1tSSD\nMSB\n \nFigure  15: SSI Timing  \nTable 5: SSI Timing  \nParameter  Description  Min Max \ntSSD Delay between the SSCK rising edge and the start of data transfer  - 15ns  \ntSSCK SSCK period  0.2µs 16µs  \ntSSCKL  Low level of the SSCK signal  0.1µs 8µs \ntSSCKH  High level of the SSCK signal  0.1µs 8µs \ntM Transfer timeout (monoflop time)  25µs  - \ntP Dead time: SSCK high time for next data reading  40µs  - \nSSI Read Angle  \nThe bit order of the transmitted data is MSB first \nand LSB last. Every 1µs, new data is transferred \ninto the output buffer. The master device triggers \nthe reading by driving  SSCK high. A full reading \nrequires up to 17 clock counts (see Figure 16).  The first clock is a dummy clock to start the \ntransmission. The data length is up to 16 bits \nlong. See the data output length  section in the \nGeneral Characteristics section on page 5 for the \nnumber of useful bits delivered at the serial \noutput.   \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  16 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nThe first MSB are transmitted on the second \nclock count. If the data length is less than 16  bits, \nthe 16 -bit output word is completed by 0s. \nTherefore, the reading can also be performed \nwith fewer than 16 clock counts. For example, for \na part with a 12 -bit data length, it is only \nnecessary to send the first dummy clock to start \nthe transmission + 12 cl ocks to read the angle \ndata.  When a trigger event is detected, the data \nremains in the output buffer until the clock  falling  \nedge for the LSB  bit = 0 and the transfer time out \ntime has passed (see Table 6).  \n  \nTable 6: Sensor Data Timing  \nTrigger Event  Output Buffer  Release  \nFirst SSCK pulse rising edge  SSCK falling edge + timeout tM \n \nFigure 16: Diagram of a Full 16 -Bit SSI Angle Reading  (with First Dummy Clock)  \nFigure 17  shows the timing for consecutive angle readings . \n \nFigure 17: Diagram of Two Consecutive  16-Bit SS I Angle Reading s with the Required Dead  Time between \nthe Frames  \nParity Bit \nThe parity bit, or check bit, is added to the output string to ensure that the total number of 1s in the string \nis even. It is used as error detecting code for angle or register reading. The MAQ473  transmits the parity \nbit at the 17 th clock edge  (see Table 7 and Figure 18 ). \nTable 7: Example of Parity Bit \n16-Bit Output  Number of \nBits Set to 1  Output with the Parity Bit  \n0000000000000000  0 0000000000000000 0 \n1000110001100010  6 1000110001100010 0 \n0101110100000000  5 0101110100000000 1 \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  17 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \n \nFigure 18: SPI Angle Reading with Parity Bit  \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  18 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nREGISTER MAP  \nTable  8: Register Map  \n# of \nRegisters  Hex Binary Bit[7] \n(MSB ) Bit[6] Bit[5] Bit[4 ] Bit[3 ] Bit[2] Bit[1] Bit[0] \n(LSB) \n0 0x0 00000  Z[7:0] \n1 0x1 00001  Z[15:8] \n2 0x2 00010  BCT[7:0] \n3 0x3 00011  - - - - - - ETY ETX \n4 0x4 00100  PPT[1:0] ILIP[3:0] - - \n5 0x5 00101  PPT[9:2] \n6 0x6 00110  MGLT [2:0] MGHT [2:0] - - \n9 0x9 01001  RD - - - - - - - \n14 0xE 01110  FW[7:0] \n16 0x10  10000  HYS[7:0] \n27 0x1B  11011  MGH  MGL  MIR[3:0] - - \nTable 9: Factory Default Values  \n# of \nRegisters  Hex Binary Bit[7] \n(MSB ) Bit[6] Bit[5] Bit[4 ] Bit[3 ] Bit[2] Bit[1] Bit[0] \n(LSB) \n0 0x0 00000  0 0 0 0 0 0 0 0 \n1 0x1 00001  0 0 0 0 0 0 0 0 \n2 0x2 00010  0 0 0 0 0 0 0 0 \n3 0x3 00011  0 0 0 0 0 0 0 0 \n4 0x4 00100  1 1 0 0 0 0 0 0 \n5 0x5 00101  1 1 1 1 1 1 1 1 \n6 0x6 00110  0 0 0 1 1 1 0 0 \n9 0x9 01001  0 0 0 0 0 0 0 0 \n14 0xE 01110  0 1 1 1 0 1 1 1 \n16 0x10  10000  1 0 0 1 1 1 0 0 \n \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  19 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nTable  10: Programming Parameters  \nParameters  Symbol  # of Bits  Description  See Table  \nZero setting  Z 16 Sets the zero position  11 \nBias current trimming  BCT 8 For side -shaft configuration: reduce s the bias \ncurrent of the X or Y Hall device  14 \nEnable trimming X  ETX 1 Biased current trimmed in the X -direction Hall \ndevice  15 \nEnable trimming Y  ETY 1 Biased current trimmed in the Y -direction Hall \ndevice  15 \nPulses per turn  PPT 10 Number of pulses per turn of the ABZ output  19 \nIndex length/position  ILIP 4 Parametrization of the ABZ index pulse  Figure 27 \nMagnetic field high \nthreshold  MGHT  3 Sets the field strength high threshold  16 \nMagnetic field low \nthreshold  MGLT  3 Sets the field strength low threshold  16 \nRotation direction  RD 1 Determines the sensor positive direction  13 \nFilter window  FW 8 Size of the digital filter window  18 \nHysteresis  HYS 8 ABZ output  hysteresis  21 \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  20 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nREGISTER SETTINGS  \nZero Setting  \nThe MAQ473’s  zero position (a0) can be \nprogrammed with 1 6 bits of resolution. The angle \nstreamed out by the MAQ473  (aOUT) is calculated \nwith Equation ( 2): \n \nOUT RAW 0a =a -a  (2) \nWhere aRAW is the raw angle provided by  the \nMAQ473’s  front end.  \nThe parameter Z [15:0], which is 0 by default, is \nthe complementary angle of the zero setting . In \ndecimals, it can be calculated with  Equation (3):  \n \n16\n0a = 2 - Z[15 : 0]  (3) \nTable 11 shows the zero -setting parameter .  \n Table 1 1: Zero -Setting Parameter  \nZ[15:0] Zero Position   \na0 (16-Bit Dec imal) Zero Position  \na0 (deg)  \n0 65536  360.000  \n1 65535  359.995  \n2 6553 4 359.989  \n… … … \n6553 4 2 0.011  \n6553 5 1 0.005  \nExample  \nTo set the zero position to 20 °, the Z[15:0] \nparameter must be equal to the complementary \nangle , and can be calculated with Equation (4):  \n \n\uf0b0\uf03d \uf02d \uf03d\uf0b016 1620[15 : 0] 2 2 61895360Z  (4) \nIn binary, it is written as 1111 0001 1100 0111.  \nTable 1 2 shows the  content of registers 0 and 1.  \nTable 1 2: Register 0 and 1 Content  \nReg Bit[7] Bit[6] Bit[5] Bit[4] Bit[3] Bit[2] Bit[1] Bit[0] \n0 1 1 0 0 0 1 1 1 \n1 1 1 1 1 0 0 0 1 \nRotation Direction  \nBy default , when looking at the top of the \npackage, the angle increases when the magnetic \nfield ro tates clock wise (CW)  (see Figure 1 9 and \nTable 1 3). \n \n  \nFigure 19: Positive Rotation Direction of the \nMagnetic Field  \nTable 13: Rotation Direction Parameter  \nRD Positive Direction  \n0 Clockwise ( CW) \n1 Counterclockwise ( CCW ) \nBCT Settings (Bias Current Trimming)  \nSide -Shaft  \nWhen  the MAQ473  is mounted on the side of the \nmagnet , the relation ship between the field angle \nand the mechanical angle is no longer  directly \nlinear. This effect is related to the fact that the \ntangential magnetic field is usually smaller than \nthe radial field. Calculate  the field ratio  (k) with \nEquation (5 ): \n \nRAD TANk =B /B  (5) \nWhere BRAD and BTAN are the maximum radial  \nand tangential  magnetic field s (see Figure 20). \nBRAD\nBRADBTAN BTAN\n \nFigure 20: Side -Shaft Field  \nThe k ratio depends on the magnet geometry \nand the distance to the sensor. Having a k ratio \ndifferent than 1 results in the sensor output \nresponse not being linear with respect to  the \nmechanical angle . Note that the error curve has \nthe shape of a double sinewave ( see Figure 2 2 \non page 21 ). E is the amplitude of this error.   \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  21 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nThe X -axis and Y-axis bias current s can be \nreduced by programming in order to recover an \nequal Hall signal for all angles , and therefore \nsuppress the error . Parameter ETX and ETY \ncontrol the direction in which sensitivity is \nreduced. The current reduction is set by the \nparameter bias current trimming register, \nBCT[7:0], which is an integer from 0 to 255.  \nIn side -shaft configuration (i.e. the sensor center \nis located beyond the magnet ’s outer diameter) , \nk is greater than 1. For optimum compensation, \nthe sensitivity of the radial axis should be \nreduce d by setting the BCT parameter , \ncalculated with  Equation (6) : \n \n\uf0e6\uf0f6\uf02d\uf0e7\uf0f7\uf0e8\uf0f81BCT[7 : 0] = 258 1k  (6) \nFigure 2 1 shows the optimum BCT value for a \nparticular  k ratio.  \n050100150200\n1 1.5 2 2.5 3 3.5 4 4.5 5BCT\nk\n \nFigure  21: Relation between the k Ratio and the \nOptimum BCT to Recover Linearity  \nTable 1 4 shows some typical BCT values.  \nTable 14: Example of BCT Setting s \nE (deg)  Magnet Ratio k BCT[7:0] \n0 1.0 0 \n11.5 1.5 86 \n19.5 2.0 129 \n25.4 2.5 155 \n30.0 3.0 172 \n33.7 3.5 184 \n36.9 4.0 194 \n39.5 4.5 201 \n41.8 5.0 207 Determining k with the MagAlpha  \nIt is possible to deduce the  k ratio from the error \ncurve obtained with the default BCT setting (BCT \n= 0). Rotate the magnet more than  one \nrevolution and record the output. Next,  plot the \nerror curve  (the output minus the real \nmechanical position vs . the real mechanical \nposition ) and ex tract two parameters: the \nmaximum error (E) and the position of this \nmaximum with respect to a zero crossing aM (see \nFigure 2 2). k can be calculated with Equation (7) : \nM\nMtan(E + a )k=tan(a )\n  (7) \n \n-40-2002040\n0 50 100 150 200 250 300 350Error (deg)\uf061m\nrotor angle (deg)2EaM\nRotor Angle  (deg)Error  (deg)2E\n \nFigure 22: Error Curve in Side -Shaft \nConfiguration with BCT  = 0 \nTable 1 4 provides some examples . Alternatively, \nthe k parameter can be obtained  using  Figure \n23. \n \nFigure 23: Relation between the Error Measured \nwith BCT  = 0 and the Magnet Ratio k  \n11.522.533.544.55\n0 5 10 15 20 25 30 35 40k\nE (deg)\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  22 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nSensor Orientation  \nFrom the dot marked on the package , it is \npossible to know whether the radial field is \naligned with sensor coordinate X or Y  (see \nFigure 24). \n \nFigure  24: Package Top View with X - and Y -Axes  \nDetermine which axis needs to be reduced \nbased on the qualitative field distribution around \na ring (see Figure 20 on page 20 ). For example , \nwith the arrangement shown  in Figure 24, the \nfield along the sensor Y direction is tangential \nand weaker , so t he X-axis should be reduced \n(ETX = 1 and ETY = 0 ). If both ETX and ETY are \nset to 1 , the current bias is reduced in both \ndirections the same way (i.e. without side -shaft \ncorrection ) (see Table 1 5). \nTable  15: Trimming Direction Parameters  \nETX Enable Trimming of the X -Axis  \n0 Disabled  \n1 Enabled  \nETY Enable Trimming of the Y -Axis  \n0 Disabled  \n1 Enabled  \nMagnetic Field Thresholds  \nThe magnetic flags (MGL and MGH ) indicate  \nthat the magnetic field at the sen sor position is \nout of the  range defined by t he lower (MGLT) \nand upper magnetic field thresholds  (MGHT)  \n(see Figure 2 5). \n \nFigure  25: MGH and MGL Signals as a Function \nof the Field Strength  MagHys , the typical hysteresis on the MGH and \nMGL  signals , is 6mT. The MGLT and MGHT  \nthresholds  are coded on 3 bits and stored in \nregister 6  (see Table 16). \nTable 16: Register 6 \nRegister 6  \nBit[7] Bit[6] Bit[5] Bit[4] Bit[3] Bit[2] Bit[1] Bit[0] \nMGLT MGHT  - - \nThe 3 -bit MGLT  and MGHT  values  correspond \nto the magnetic field (see Table 17). \nTable  17: MGLT and MGHT: Binary to mT \nRelation ship \nMGLT or \nMGHT (8) Field Threshold in mT (7) \nFrom Low to High \nMagnetic Field  From High to Low \nMagnetic Field  \n000 26 20 \n001 41 35 \n010 56 50 \n011 70 64 \n100 84 78 \n101 98 92 \n110 112 106 \n111 126 120 \nNotes : \n7) Valid for V DD = 3.3V. If different , then the field threshold is \nscaled by the factor VDD / 3.3V. \n8) MGLT can have a larger value than MGHT . \nThe MGL and MGH alarm flags are available to \nbe read in register  27 (bit [6] and  bit[7], \nrespectively ), and their logic state is also given \nat digital output pin s 11 and 16.  \nTo read the MGL and MGH flags via the SPI, \nsend the 16 -bit read command for register 27:  \nCommand   Reg. Address   MSB         Value      LSB \n0 1 0  1 1 0 1 1  0 0 0 0 0 0 0 0   \nThe MAQ47 3 responds with the register 27 \ncontent in the next transmission:   \nRegister 27 [7:0]  \nMGH   MGL  x x MG1L  MG2L  x x \nThe MGL and MGH flags’ logic state has no \neffect on the angle output.  \nMGL Application Note  \nPulses with a duration of about 1.3μs to 1.5μs \nappear randomly in the MGL signal. They appear \non both the pin and register values (Register 27, \nbit 6).  \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  23 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nThese pulses appear around angle values of 44, \n138, 224, and 318 degrees (sensor output) or in \nan inter val of ±1.5 degree s around these values. \nThese pulses have an amplitude of 3.3V (VDD). \nThe minimum interval between two pulses is \n100μs.  \nMGL Workarounds  \n1. Invert the MGH signal to replace MGL.  The \nMGL and MGH magnetic thresholds only \ndiffer by a small hyste resis (see Table 1 7 on \npage 22 ). An inverted MGH signal can be \nused to replace the MGL output in the \napplication.  \n2. Read the MGL signal level twice.  Using two \nreadings, which must be between 2µs and \n100µs apart, allows the user to distinguish \nerroneous from  real transitions. Table 1 8 \nshows examples of different cases.  \n3. Read register 27 with the SPI and compute a \ncorrected MGL value using MG1L and \nMG2L. The corrected MGL signal = not \n(MG1L OR MG2L). This means that the \ncorrected MGL must be set to 1 only when \nboth MG1L and MG2L are equal to 0. See \nthe C implementation below:  \ncorrectedMGL = !(MG1L | MG2L)  \nTable  18: MGL Multiple Reading Workaround  \n MGL \nFirst \nReading  MGL Second \nReading  (e.g. \n20μs After the \nFirst Reading)  True \nMGL \nValue  \nCase 1  0 Second reading is \nnot needed  0 \nCase 2  1 1 1 \nCase 3  1 0 0 \nFilter Window (FW)  \nThe filter window (FW) affects the effective \nresolution (defined as the ±3σ noise interval) and \nthe output bandwidth, which is characterized by \nfCUTOFF . \nTable 19 gives the resulting resolution and \nbandwidth for each window.  Table 19: FW \nFW[7:0] τ (µs) Effective \nResolution \nat 45mT \n(Bits) fCUTOFF  \n(Hz) Start -\nUp \nTime  \n(ms)  \n51 64 9.5 6000  0.5 \n68 128 10 3000  1.1 \n85 256 10.5 1500  2.5 \n102 512 11 740 5.5 \n119 \n(default)  1024  11.5 370 12 \n136 2048  12 185 26 \n153 4096  12.5 93 57 \n170 8192  13 46 123 \n187 16384  13.5 23 264 \nThe time constant (τ) is the parameter enter ed in \nthe transfer function (1). This allow s the user to \naccurately model the system and analyze the \nstability of a control loop.  \nABZ Incremental Encoder Output  \nThe MAQ473  ABZ output emulates a 1 2-bit \nincremental encoder (such as an optical \nencoder) , providing logic pulses in quadrature \n(see Figure 26). Compared to signal A, signal B \nis shifted by a quarter of the pulse period. During  \none revolution, signal A pulses n times, where n \nis programmable from 1 to 1024  pulses per \nrevolution . The number of pulses per channel \nper revolution is programmed by setting \nparameter PPT , which consists of 10 bits split \nbetween registers 0x4 and 0x5 (see Table 8 on \npage 18 ). The factory default value is 1023 . \nTable 20 describes how to program PPT [9:0] to \nset the required resolution.  \nTable 20: PPT  \nPPT[9:0] Pulses per \nRevolution  Edges per \nRevolution  \n0000000000  1 (min)  4 (min)  \n0000000001  2 8 \n0000000010  3 12 \n0000000011  4 16 \n… … … \n1111111100  1021  4084  \n1111111101  1022  4088  \n1111111110  1023  4092  \n1111111111  1024  (max)  4096  (max)  \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  24 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nFor example , to set 120  pulses per revolution \n(i.e. 480 edges ), set PPT  to 120  - 1 = 119 (binary: \n0001110111). Table 2 1 shows how to set \nregisters 4 and 5.  \nTable 21: Example PPT Setting for  120 Pulses  \n Bit[7] Bit[6] Bit[5] Bit[4] Bit[3] Bit[2] Bit[1] Bit[0] \nR4 1 1 0 0 0 0 0 0 \nR5 0 0 0 1 1 1 0 1 \n \nFigure 2 6: ABZ Output  Timing  \nSignal Z (zero or index) rises  only once per turn \nat the zero -angle position.  \nThe position and length of the Z pulse is \nprogrammable via bits ILIP[3:0] in register 0x 4 \n(see Figure 27).  \n \nFigure 27: ILIP Parameter Effect on Index Shape  \nBy default , the ILIP parameter is 0000 . The index \nrising edge is aligned with the channel B falling \nedge . The index length is half of the A or B pulse \nlength , dep ending on the user’s selection . \nABZ Hysteresis  \nThe hysteresis is set by  the parameter HYS (see \nTable 22 on page 24 ). To avoid spurious \ntransitions (see Fig ure 28 on page 24 ), it is \nrecommend ed that the hysteresis be 12 times \ngreater than the output root mean square ( RMS ) \nnoise ( 1σ). Table 2 3 on page 24 shows \nindications of the 1σ noise  \n \n Table 22: HYS  \nHYS[7:0] Hysteresis (deg)  \n200 0.08 \n188 0.14 \n148 0.18 \n152 0.36 \n156 (default)  0.52 \n116 0.70 \n120 1.4 \n124 2.1 \n84 2.8 \nTable 23: RMS N oise \nFW(7 :0) Effective \nResolution at \n45mT (Bit s) 1σ Noise \n(deg)  \n51 9.5 0.08 \n68 10 0.06 \n85 10.5 0.04 \n102 11 0.03 \n119 (default)  11.5 0.02 \n136 12 0.015  \n153 12.5 0.01 \n170 13 0.007  \n187 13.5 0.005  \n \nFigure 28: Hysteresis of the Incremental Output  \nABZ Jitter  \nThe ABZ state is updated at a frequency of \n16MHz, enabling accurate operation up to a very \nhigh rpm (above 105rpm).  \nThe jitter characterizes how far a particular ABZ \nedge can occur at an angular position different \nfrom the ideal position (see Figure 29). \n \nFigure 29: ABZ Jitter  \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  25 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nThe measurable jitter is composed by a \nsystematic jitter (i.e. always the same deviation \nat a given angle, and given in the General \nCharacteristics  section on page 5 ) and a random \njitter.  \nThe random jitter reflects the sensor noise. \nTherefore, the edge distribution is the same as \nthe SPI output noise.  The random jitter is a \nfunction of the rotation speed. At lower speed s, \nthe random jitter is less than the sensor noise .  \nThis is a result of the fact that the  probability of \nmeasuring an edge at a certain distance from the \nideal position depends on the number of ABZ \nupdates at this position.  \nPWM Absolute Output  \nThis output provides a logic signal with a duty \ncycle proportional to the angle of the magnetic \nfield. For t he PWM frequency  (fPWM), see  the \nGeneral Characteristics section on page 5 . The \nduty cycle is bound by a minimum value (1/ 514 \nof the period) and a m aximum value (513/514  of \nthe period) , so it varie s from 1/514 to 513/514 \nwith a resolution of 14  bits (see Figure 30). The \nangle can be obtained  by measuring the on time. \nSince the absolute fPWM can vary from chip to \nchip or with the temperature, accurate angle \ndetection requires measur ing the duty cycle (i.e. \nmeasur ing both the on time (tON) and the off time \n(tOFF)). The angle c an be calculated with \nEquation (8) : \n \n\uf0e6\uf0f6\uf0b0\uf0e7\uf0f7\n\uf0e8\uf0f8ON\nON OFFt 360angle (in ) = 514 -1512 t + t  (8) \nFigure 30 shows one period of the PWM signal. \nThe period ( t) is 1 / fPWM.  \nFigure 30: PWM Output  Timing , Top Signal  = 0°;  \nBottom  Signal  = Full Scale (i.e. 360°  (1 - 1/16384))  \nDiagnostic Features  \nThe following feature s can be used to determine \ncorrect operation : \n1. Parity bit on the angle  (see the Parity Bit \nsection on page 1 6). \n2. Magnetic field in range via MIR [3:0] (see \nbelow).  \nMagnetic Field in Range  \nBits MIR [3:0] in register 27 can be used to verify \nthat the magnetic field is between the thresholds \nset by MGLT[2:0] and M GHT [2:0] in register 6. \nThe value of MIR[3:0] is 0011 when the field is \nbetween these thresholds. This also indicates \nthat the Hall sensor front end is functio ning \ncorrectly  and acquiring angle samples.  \nFor example , assuming MGLT[2:0] is at its \ndefault value of 00 (15mT ), and the MGHT[2:0] \nis at 111 (126mT ), then if the field strength is \nbetween these val ues, the MIR[3:0] value is \n0011.  \nTable 2 4 shows the MIR[3:0] values f or the \ndefault threshold settings  described above . \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  26 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nTable 2 4: MIR[3:0] Logic States  \nMIR[3:0] Conditions MGLT[ 2:0] at default 15mT, MGHT[ 2:0] at default 126mT  \n0011 Field in range and Hall sensor array operational  \n1111 Field above MAGH and MAGL t hreshold ( magnet too close to sensor ) \n0000 Field  below MAGH and MAGL threshold ( magnet too far away/missing ) \n0001 Invalid state: Hall array sensor functional error  \n0010 Invalid state: Hall array sensor functional error  \n0100 Invalid state: Hall array sensor functional error  \n1000 Invalid state: Hall array sensor functional error  \n1001 Invalid state: Hall array sensor functional error  \n1010 Invalid state: Hall array sensor functional error  \n1011 Invalid state: Hall array sensor functional error  \n1100 Invalid state: Hall array sensor functional error  \n1101 Invalid state: Hall array sensor functional error  \n \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  27 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nTYPICAL APPLICATION CIRCUITS  \n \nFigure 31: Typical Configurations Using SPI Interface  and MGH/MGL Signals  \n \nFigure 32: Typical Configuration Using ABZ Interface  \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  28 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nPACKAGE INFORMATION  \nQFN -16 (3mmx3mm)  \n \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  29 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nAPPENDIX A: DEFINITI ONS  \nEffective \nResolution (3σ \nnoise level)  The smallest angle increment distinguishable from the noise. The resolution is \nmeasured by computing three  times  σ (the standard deviation in degrees) taken \nacross  1,000 data points at a constant position. The resolution in bits is obtained with: \nlog 2(360 / 6σ). \nRefresh Rate  The r ate at which new data points are stored in the output buffer.  \nABZ Update \nRate  The r ate at which a new ABZ s tate is computed. The inverse of this ra te is the minimum \ntime between two  ABZ edges.  \nLatency  The time elapsed between the instant when the data is ready to be read and the instant \nat which the shaft passes that position. The lag in degrees is lag = latency x v, where \nv is the angular velocity in deg/s.  \nStart -Up Time  The time until the sensor delivers valid data beginning  at start-up. \nIntegral \nNonlinearity \n(INL)  Maximum deviation between the average sensor output (at a fixed position) and the \ntrue mechanical angle  (see Figure A1) . \n \nFigure A1: Resolution, INL, Lag  \nINL can be obtained from the error curve  err(a) = out (a) - a, where out(a) is the average \nacross  1,000 sensor output s and a is the mechanical angle indicated by a high -\nprecision encoder (<0.001 °). INL is then calculated  with Equation (A1):  \nmax(err(a)) - min(err(a))INL =2\n (A1) \nDrift The a ngle variation rate when one parameter is changed (e.g. temperature, V DD) but \nall others, including the shaft angle, remain  constant.   \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  30 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nAPPENDIX B: SPI COMM UNICATION CHEATSHEET  \nRead Angle  \n \nRead Register  \n \nWrite Register  \n \n\nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nMAQ473  Rev. 1.1 MonolithicPower.com  31 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nCARRIER INFORMATION  \n \n \n \nPart Number  Package \nDescription  Quantity/  \nReel  Quantity/  \nTube  Quantity/  \nTray  Reel \nDiameter  Carrier \nTape \nWidth  Carrier \nTape \nPitch  \nMAQ473 GQE-\nAEC1 -Z QFN -16 \n(3mmx3mm)  5000  N/A N/A N/A 13in 12mm  \n \nPin1 1 1 1 1\nABCD ABCD ABCD ABCD\nFeed Direction \nMAQ473 – 9-BIT TO 14 -BIT, AUT OMOTIVE ANGLE SENSOR  W/ ABZ & PWM OUTPUT S \nNotice : The information in this document is subject to change without notice. Users should warrant and guarantee that third -\nparty Intellectual Property rights are not infringed upon when integrating MPS products into any application. MPS will not as sume \nany legal  responsibility for any said applications.  \nMAQ473  Rev. 1.1 MonolithicPower.com  32 \n8/8/2022  MPS Proprietary Information. Patent Protected. Unauthorized Photocopy and Duplication Prohibited.  \n © 2022  MPS. All Rights Reserved.  \nREVISION HISTORY  \nRevision #  Revision Date  Description  Pages Updated  \n1.0 5/12/2021  Initial Release  - \n1.1 8/8/2022  Updated Typical Application figure.  1 \nUpdated “1mF” to “1 µF” in Figure 6.  10 \nUpdated  minimum SSI limits for SSCK period , Low level \nof SSCK signal , and High level of SSCK signal in Table \n5. 15 \nAdded MGL Application Note section, MGL Workarounds \nsection, and Table 1 8. 22–23 \nMinor formatting updates.  23 \n \n'}]
!==============================================================================!
### Component Summary: MAQ473GQE-AEC1-Z

**Description:**
The MAQ473 is a 9-Bit to 14-Bit automotive angle sensor designed by Monolithic Power Systems (MPS). It detects the absolute angular position of a permanent magnet, typically used in applications involving rotating shafts. The sensor operates using contactless sensing technology, ensuring a long lifespan and high accuracy in angle measurement, even at high speeds (up to 60,000 RPM). It features both ABZ incremental and PWM outputs, making it versatile for various applications.

**Key Specifications:**
- **Voltage Ratings:**
  - Supply Voltage (VDD): 3.0V to 3.6V (typical 3.3V)
  - Absolute Maximum Supply Voltage: -0.5V to +4.6V
- **Current Ratings:**
  - Supply Current (IDD): 12mA (typical), up to 13.8mA
- **Power Consumption:**
  - Continuous Power Dissipation: 2.0W at 25°C
- **Operating Temperature Range:**
  - -40°C to +150°C
- **Package Type:**
  - QFN-16 (3mm x 3mm)
- **Special Features:**
  - AEC-Q100 qualified for automotive applications
  - Programmable magnetic field strength detection
  - SPI and SSI interfaces for communication
  - On-chip non-volatile memory for configuration storage
- **Moisture Sensitive Level (MSL):**
  - MSL Rating: 1 (according to JEDEC J-STD-020E)

**Typical Applications:**
- Automotive angle and speed sensors
- Robotics and automation systems
- Angle encoders for precise position feedback
- Applications requiring high-speed rotational measurements

The MAQ473 is particularly suited for automotive environments due to its robust design and ability to operate under extreme conditions, making it ideal for applications such as steering angle sensing, throttle position sensing, and other critical automotive functions.