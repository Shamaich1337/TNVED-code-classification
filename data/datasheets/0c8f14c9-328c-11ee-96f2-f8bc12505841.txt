[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of KSZ9021GNI production of MICROCHIP TECHNOLOGY from the text: KSZ9021GN \nGigabit Ethernet Transceiver \nwith GMII / MII Support \n \n \n \nLinkMD is a registered trademark of Micrel, Inc.   \nMicrel Inc. • 2180 Fortune Drive • San Jose, CA 95131 • USA • tel +1 ( 408) 944-0800 • fax + 1 (408) 474-1000 • http://www.micrel.com \nSeptember 2010 \n M9999-091010-1.1\n General Description  \nThe KSZ9021GN is a completely integrated triple speed \n(10Base-T/100Base-TX/1000Base-T) Ethernet Physical Layer Transceiver for transmission and reception of data \non standard CAT-5 unshielded twisted pair (UTP) cable.  \nThe KSZ9021GN provides the industry standard GMII/MII \n(Gigabit Media Independent Interface / Media Independent Interface) for connection to GMII/MII MACs in Gigabit Ethernet Processors and Switches for data transfer at 1000 Mbps or 10/100Mbps speed. \nThe KSZ9021GN reduces board cost and simplifies board \nlayout by using on-chip termination resistors for the four differential pairs and by integrating a LDO controller to drive a low cost MOSFET to supply the 1.2V core. \nThe KSZ9021GN provides diagnostic features to facilitate \nsystem bring-up and debugging in production testing and \nin product deployment. Parametric NAND tree support \nenables fault detection between KSZ9021 I/Os and board. Micrel LinkMD\n® TDR-based cable diagnostics permit \nidentification of faulty copper cabling. Remote and local loopback functions provide verification of analog and digital data paths. \nThe KSZ9021GN is available in a 64-pin, lead-free QFN \npackage (See Ordering Information). Features \n• Single-chip 10/100/1000Mbps IEEE 802.3 compliant  \nEthernet Transceiver \n• GMII/MII standard compliant interface \n• Auto-negotiation to automatically select the highest link \nup speed (10/100/100Mbps) and duplex (half/full) \n• On-chip termination resistors for the differential pairs \n• On-chip LDO controller to support single 3.3V supply \noperation – requires only external FET to generate 1.2V \nfor the core \n• Jumbo frame support up to 16KB \n• 125MHz Reference Clock Output \n• Programmable LED outputs for link, activity and speed \n• Baseline Wander Correction \n• LinkMD® TDR-based cable diagnostics for identification \nof faulty copper cabling \n• Parametric NAND Tree support for fault detection \nbetween chip I/Os and board. \n• Loopback modes for diagnostics \n• Automatic MDI/MDI-X crossover for detection and \ncorrection of pair swap at all speeds of operation \n \n____________________________________________________________________________________________________________ \nFunctional Diagram \n \nMAGNETICS\nRJ-45\nCONNECTOR\nON-CHIP TERMINATION\nRESISTORS\n \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 2 M9999-091010-1.1\n More Features  \n• Automatic detection and correction of pair swaps, pair \nskew and pair polarity \n• MDC/MDIO Management Interface for PHY register \nconfiguration \n• Interrupt pin option \n• Power down and power saving modes \n• Operating Voltages \n Core: 1.2V (external FET or regulator)  I/O: 3.3V or 2.5V \n Transceiver: 3.3V \n• Available in 64-pin QFN (8mm x 8mm)\n package Applications \n• Laser/Network Printer \n• Network Attached Storage (NAS) \n• Network Server \n• Gigabit LAN on Motherboard (GLOM) \n• Broadband Gateway \n• Gigabit SOHO/SMB Router \n• IPTV \n• IP Set-top Box \n• Game Console \n• Triple-play (data, voice, video) Media Center \n• Media Converter \n  \nOrdering Information \nPart Number Temp. Range Package Lead Finish Description \nKSZ9021GN 0°C to 70°C 64-Pin QFN Pb-Free GMII / MII, Commercial Temperature \nKSZ9021GNI(1) −40°C to 85°C  64-Pin QFN Pb-Free GMII / MII, Industrial Temperature \nNote: \n1.  Contact factory for lead time. \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 3 M9999-091010-1.1\n Revision History \nRevision Date Summary of Changes \n1.0 10/13/09 Data sheet created \n1.1 9/10/10 Added industrial temperature part number KSZ9021GNI. \nAdded support for 2.5V VDD I/O. \nAdded LED drive current. \nCorrected GMII receive timing for t SU. \nUpdated KSZ9021GN pin outs throughout data sheet to reflect pin out changes for silicon revision A3. \nUpdated boilerplate. \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 4 M9999-091010-1.1\n Contents \nPin Confi guration .............................................................................................................. .................................................8 \nPin Descr iption................................................................................................................ ...................................................9 \nStrapping Options.............................................................................................................. ..............................................14 \nFunctional Ov erview ............................................................................................................ ............................................15 \nFunctional Description:  10Ba se-T/100Base-TX Transceiver ....................................................................... ...............16 \n100Base-TX Transmit............................................................................................................ ........................................16 \n100Base-TX Receive............................................................................................................. ........................................16 \nScrambler/De-scrambler  (100Base-TX only)....................................................................................... ..........................16 \n10Base-T Transmit .............................................................................................................. ..........................................16 \n10Base-T Receive ............................................................................................................... ..........................................16 \nFunctional Description:  1000Base-T Transceiver................................................................................ ........................17 \nAnalog Echo Cancellation Circuit ............................................................................................... ...................................17 \nAutomatic Gain Control (AGC) ................................................................................................... ...................................17 \nAnalog-to-Digital Converter (ADC) .............................................................................................. ..................................17 \nTiming Recovery Circuit........................................................................................................ .........................................18 \nAdaptive Eq ualizer............................................................................................................. ............................................18 \nTrellis Encoder and Decoder .................................................................................................... .....................................18 \nFunctional Description:  Additi onal 10/100/1000 PHY Features................................................................... ...............18 \nAuto MDI/MDI-X................................................................................................................. ............................................18 \nPair- Swap, Alignment, and Polarity Check...................................................................................... .............................19 \nWave Shaping, Slew Rate C ontrol and Part ial Response........................................................................... ..................19 \nPLL Clock Sy nthesizer.......................................................................................................... .........................................19 \nAuto-Negot iation ............................................................................................................... ...............................................19 \nGMII Interface................................................................................................................. ...................................................21 \nGMII Signal Definition ......................................................................................................... ...........................................22 \nGMII Signal Diagram ............................................................................................................ .........................................22 \nMII Interface .................................................................................................................. ....................................................23 \nMII Signal Definition.......................................................................................................... .............................................24 \nMII Signal Diagram ............................................................................................................. ...........................................24 \nMII Management (MIIM) Interface................................................................................................ ....................................25 \nInterrupt (INT_N).............................................................................................................. .................................................25 \nLED Mode....................................................................................................................... ...................................................25 \nSingle LED Mode................................................................................................................ ...........................................26 \nTri-color Dual LED Mode ........................................................................................................ .......................................26 \nNAND Tree Suppor t .............................................................................................................. ...........................................27 \nPower Management ............................................................................................................... ..........................................28 \nPower Saving Mode.............................................................................................................. .........................................28 \nSoftware Power Down Mode ....................................................................................................... ..................................28 \nChip Power Down Mode ........................................................................................................... .....................................28 \nRegister Map................................................................................................................... ..................................................29 \nRegister Description ........................................................................................................... .............................................30 \nIEEE Defined Registers ......................................................................................................... ........................................30 \nVendor Specific  Registers ...................................................................................................... .......................................36 \nExtended Registers ............................................................................................................. ..........................................39 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 5 M9999-091010-1.1\n Absolute Maxi mum Rati ngs....................................................................................................... .....................................41 \nOperating Ratings .............................................................................................................. ..............................................41 \nElectrical Characteristics ..................................................................................................... ...........................................41 \nTiming Di agrams ................................................................................................................ ..............................................44 \nGMII Transmit Timing ........................................................................................................... .........................................44 \nGMII Receive Timing ............................................................................................................ .........................................45 \nMII Transmit Timing ............................................................................................................ ...........................................46 \nMII Receive Timing ............................................................................................................. ...........................................47 \nAuto-Negotiat ion Timing ........................................................................................................ ........................................48 \nMDC/MDIO Timing ................................................................................................................ ........................................49 \nReset Timing................................................................................................................... ...............................................50 \nReset Circuit .................................................................................................................. ...................................................50 \nReference Circuits – LED Strap-in Pins......................................................................................... ................................51 \nReference Clock – Conne ction and Se lection..................................................................................... ..........................52 \nMagnetics Speci ficati on ........................................................................................................ ..........................................52 \nPackage Info rmation............................................................................................................ ............................................53 \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 6 M9999-091010-1.1\n List of Figures \nFigure 1.  KSZ9021GN Block Diagram ............................................................................................. .................................15  \nFigure 2.  KSZ9021GN 1000Base-T Block Diagram – Single Channel................................................................. ............17  \nFigure 3.  Auto-Negotiation Flow Chart......................................................................................... .....................................20  \nFigure 4.  KSZ9021GN GMII Interface............................................................................................ ...................................22  \nFigure 5.  KSZ9021GN MII Interface ............................................................................................. ....................................24  \nFigure 6.  GMII Transmit Timing – Data Input to PHY ............................................................................ ...........................44  \nFigure 7.  GMII Receive Timing – Data Input to MAC ............................................................................. ..........................45  \nFigure 8.  MII Transmit Timing – Data Input to PHY............................................................................. .............................46  \nFigure 9.  MII Receive Timing – Data Input to MAC .............................................................................. ............................47  \nFigure 10.  Auto-Negotiation Fast Link Pulse (FLP) Timing ...................................................................... ........................48  \nFigure 11.  MDC/MDIO Timing.................................................................................................... .......................................49  \nFigure 12.  Reset Timing....................................................................................................... .............................................50  \nFigure 13.  Recommended Reset Circuit.......................................................................................... .................................50  \nFigure 14.  Recommended Reset Circuit for Inte rfacing with CPU/FPGA Reset Output. .............................................. ...51 \nFigure 15.  Reference Circuits for LED Strapping Pins.......................................................................... ............................51  \nFigure 16.  25MHz Crystal / Oscilla tor Reference Clock Connection .............................................................. ..................52  \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 7 M9999-091010-1.1\n List of Tables \nTable 1.  MDI / MDI-X Pin Mapping .............................................................................................. .....................................18 \nTable 2.  Auto-Negotiation Timers .............................................................................................. .......................................21 \nTable 3.  GMII Si gnal Definition ............................................................................................... ..........................................22 \nTable 4.  MII Si gnal Definition ................................................................................................ ............................................24 \nTable 5.  MII Management Frame Format – for KSZ9021GN .......................................................................... .................25 \nTable 6:  Single LED Mode – Pin Definition..................................................................................... ..................................26 \nTable 7:  Tri-color Dual LED Mode – Pin Definition ............................................................................. ..............................26 \nTable 8.  NAND Tree Test Pin Order – for KSZ9021GN ............................................................................. ......................27 \nTable 9.  GMII Transmit Timing Parameters...................................................................................... ................................44 \nTable 10.  GMII Receive Timing Parameters...................................................................................... ...............................45 \nTable 11.  MII Transmit Timing Parameters...................................................................................... .................................46 \nTable 12.  MII Receive Timing Parameters....................................................................................... .................................47 \nTable 13.  Auto-Negotiation Fast Link Pulse (FLP) Timing Parameters............................................................ ................48 \nTable 14.  MDC/MDIO Timing Parameters .......................................................................................... ..............................49 \nTable 15.  Reset Timing Parameters ............................................................................................. ....................................50 \nTable 16.  Reference Crysta l/Clock Select ion Criteria.......................................................................... .............................52 \nTable 17.  Magnetics Selection Criteria ........................................................................................ .....................................52 \nTable 18.  Qualified Single Port 10/100/1 000 Magnetics......................................................................... ..........................52 \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 8 M9999-091010-1.1\n Pin Configuration \n \n \n \n64-Pin QFN \n(Top View) \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 9 M9999-091010-1.1\n Pin Description \nPin Number Pin Name Type(1) Pin Function \n1 AVDDH P 3.3V analog V DD \n2 TXRXP_A I/O Media Dependent Interface[0], positive signal of differential pair \n1000Base-T Mode: \n TXRXP_A corresponds to BI_DA+ for MDI configuration and BI_DB+ for \n MDI-X configuration, respectively. \n10Base-T / 100Base-TX Mode:  TXRXP_A is the positive transmit signal (TX+) for MDI configuration and \n the positive receive signal (RX+) for MDI-X configuration, respectively. \n3 TXRXM_A I/O Media Dependent Interface[0], negative signal of differential pair \n1000Base-T Mode: \n TXRXM_A corresponds to BI_DA- for MDI configuration and BI_DB- for \n MDI-X configuration, respectively. \n10Base-T / 100Base-TX Mode: \n TXRXM_A is the negative transmit signal (TX-) for MDI configuration and \n the negative receive signal (RX-) for MDI-X configuration, respectively. \n4 AVDDL P 1.2V analog V DD \n5 AVDDL P 1.2V analog V DD \n6 NC - No connect \n7 TXRXP_B I/O Media Dependent Interface[1], positive signal of differential pair \n1000Base-T Mode: \n TXRXP_B corresponds to BI_DB+ for MDI configuration and BI_DA+ for \n MDI-X configuration, respectively. \n10Base-T / 100Base-TX Mode: \n TXRXP_B is the positive receive signal (RX+) for MDI configuration and \n the positive transmit signal (TX+) for MDI-X configuration, respectively. \n8 TXRXM_B I/O Media Dependent Interface[1], negative signal of differential pair \n1000Base-T Mode: \n TXRXM_B corresponds to BI_DB- for MDI configuration and BI_DA- for \n MDI-X configuration, respectively. \n10Base-T / 100Base-TX Mode:  TXRXM_B is the negative receive signal (RX-) for MDI configuration and \n the negative transmit signal (TX-) for MDI-X configuration, respectively. \n9 AGNDH Gnd Analog ground \n10 TXRXP_C I/O Media Dependent Interface[2], positive signal of differential pair \n1000Base-T Mode: \n TXRXP_C corresponds to BI_DC+ for MDI configuration and BI_DD+ for \n MDI-X configuration, respectively. \n10Base-T / 100Base-TX Mode: \n TXRXP_C is not used. \n11 TXRXM_C I/O Media Dependent Interface[2], negative signal of differential pair \n1000Base-T Mode: \n TXRXM_C corresponds to BI_DC- for MDI configuration and BI_DD- for \n MDI-X configuration, respectively. \n10Base-T / 100Base-TX Mode: \n TXRXM_C is not used. \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 10 M9999-091010-1.1\n Pin Number Pin Name Type(1) Pin Function \n12 AVDDL P 1.2V analog V DD \n13 AVDDL P 1.2V analog V DD \n14 TXRXP_D I/O Media Dependent Interface[3], positive signal of differential pair \n1000Base-T Mode: \n TXRXP_D corresponds to BI_DD+ for MDI configuration and BI_DC+ for \n MDI-X configuration, respectively. \n10Base-T / 100Base-TX Mode: \n TXRXP_D is not used. \n15 TXRXM_D I/O Media Dependent Interface[3], negative signal of differential pair \n1000Base-T Mode: \n TXRXM_D corresponds to BI_DD- for MDI configuration and BI_DC- for \n MDI-X configuration, respectively. \n10Base-T / 100Base-TX Mode:  TXRXM_D is not used. \n16 AVDDH P 3.3V analog V DD \n17 LED2 / \nPHYAD1 I/O LED Output: Programmable LED2 Output / \nConfig Mode: The pull-up/pull-down value is latched as PHYAD[1] during  \n power-up / reset.  See “Strapping Options” section for details. \nThe LED2 pin is programmed by the LED_MODE strapping option (pin 55, and is \ndefined as follows. \n \nSingle LED Mode  \nLink Pin State LED Definition \nLink off H OFF \nLink on (any speed) L ON \n \n \nTri-color Dual LED Mode \nPin State LED Definition Link / Activity \nLED2 LED1 LED2 LED1 \nLink off H H OFF OFF \n1000 Link / No Activity L H ON OFF \n1000 Link / Activity (RX, TX) Toggle H Blinking OFF \n100 Link / No Activity H L OFF ON \n100 Link / Activity (RX, TX) H Toggle OFF Blinking \n10 Link / No Activity L L ON ON \n10 Link / Activity (RX, TX) Toggle Toggle Blinking Blinking \n \nFor Tri-color Dual LED Mode, LED2 works in conjunction with LED1 (pin 19 to \nindicate 10 Mbps Link and Activity.  \n18 DVDDH P 3.3V or 2.5V digital V DD \n19 LED1 / \nPHYAD0 I/O LED Output: Programmable LED1 Output / \nConfig Mode: The pull-up/pull-down value is latched as PHYAD[0] during  \n power-up / reset.  See “Strapping Options” section for details. \nThe LED1 pin is programmed by the LED_MODE strapping option (pin 55, and is \ndefined as follows. \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 11 M9999-091010-1.1\n Pin Number Pin Name Type(1) Pin Function \n \nSingle LED Mode  \nActivity Pin State LED Definition \nNo Activity H OFF \nActivity (RX, TX) Toggle Blinking \n \n \nTri-color Dual LED Mode \nPin State LED Definition Link / Activity \nLED2 LED1 LED2 LED1 \nLink off H H OFF OFF \n1000 Link / No Activity L H ON OFF \n1000 Link / Activity (RX, TX) Toggle H Blinking OFF \n100 Link / No Activity H L OFF ON \n100 Link / Activity (RX, TX) H Toggle OFF Blinking \n10 Link / No Activity L L ON ON \n10 Link / Activity (RX, TX) Toggle Toggle Blinking Blinking \n \nFor Tri-color Dual LED Mode, LED1 works in conjunction with LED2 (pin 17 to \nindicate 10 Mbps Link and Activity. \n20 DVDDL P 1.2V digital V DD \n21 TXD0 I GMII Mode: GMII TXD0 (Transmit Data 0) Input \nMII Mode: MII TXD0 (Transmit Data 0) Input \n22 TXD1 I GMII Mode: GMII TXD1 (Transmit Data 1) Input \nMII Mode: MII TXD1 (Transmit Data 1) Input \n23 TXD2 I GMII Mode: GMII TXD2 (Transmit Data 2) Input \nMII Mode: MII TXD2 (Transmit Data 2) Input \n24 TXD3 I GMII Mode: GMII TXD3 (Transmit Data 3) Input \nMII Mode: MII TXD3 (Transmit Data 3) Input \n25 DVDDL P 1.2V digital V DD \n26 TXD4 I GMII Mode: GMII TXD4 (Transmit Data 4) Input \nMII Mode: This pin is not used and can be driven high or low. \n27 TXD5 I GMII Mode: GMII TXD5 (Transmit Data 5) Input \nMII Mode: This pin is not used and can be driven high or low. \n28 TXD6 I GMII Mode: GMII TXD6 (Transmit Data 6) Input \nMII Mode: This pin is not used and can be driven high or low. \n29 TXD7 I GMII Mode: GMII TXD7 (Transmit Data 7) Input \nMII Mode: This pin is not used and can be driven high or low. \n30 DVDDH P 3.3V or 2.5V digital V DD \n31 TX_ER I GMII Mode: GMII TX_ER (Transmit Error) Input \nMII Mode: MII TX_ER (Transmit Error) Input \nIf GMII / MII MAC does not provide the TX_ER output signal, this pin should be \ntied low. \n32 GTX_CLK I GMII Mode: GMII GTX_CLK (Transmit Reference Clock) Input \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 12 M9999-091010-1.1\n Pin Number Pin Name Type(1) Pin Function \n33 TX_EN I GMII Mode: GMII TX_EN (Transmit Enable) Input \nMII Mode: MII TX_EN (Transmit Enable) Input \n34 RXD7 O GMII Mode: GMII RXD7 (Receive Data 7) Output \nMII Mode: This pin is not used and is driven low. \n35 RXD6 O GMII Mode: GMII RXD6 (Receive Data 6) Output \nMII Mode: This pin is not used and is driven low. \n36 DVDDL P 1.2V digital V DD \n37 RXD5 O GMII Mode: GMII RXD5 (Receive Data 5) Output \nMII Mode: This pin is not used and is driven low. \n38 RXD4 O GMII Mode: GMII RXD4 (Receive Data 4) Output \nMII Mode: This pin is not used and is driven low. \n39 RXD3 / \n \nMODE3 I/O GMII Mode: GMII RXD3 (Receive Data 3) Output \nMII Mode: MII RXD3 (Receive Data 3) Output / \nConfig Mode: The pull-up/pull-down value is latched as MODE3 during  \n  power-up / reset.  See “Strapping Options” section for details. \n40 DVDDH P 3.3V or 2.5V digital V DD \n41 RXD2 / \n \nMODE2 I/O GMII Mode: GMII RXD2 (Receive Data 2) Output \nMII Mode: MII RXD2 (Receive Data 2) Output) / \nConfig Mode: The pull-up/pull-down value is latched as MODE2 during  \n  power-up / reset.  See “Strapping Options” section for details. \n42 DVDDL P 1.2V digital V DD \n43 RXD1 / \n \nMODE1 I/O GMII Mode: GMII RXD1 (Receive Data 1) Output \nMII Mode: MII RXD1 (Receive Data 1) Output / \nConfig Mode: The pull-up/pull-down value is latched as MODE1 during  \n  power-up / reset.  See “Strapping Options” section for details. \n44 RXD0 / \n \nMODE0 I/O GMII Mode: GMII RXD0 (Receive Data 0) Output \nMII Mode: MII RXD0 (Receive Data 0) Output / \nConfig Mode: The pull-up/pull-down value is latched as MODE0 during  \n  power-up / reset.  See “Strapping Options” section for details. \n45 RX_DV / \n \nCLK125_EN I/O GMII Mode: GMII RX_DV (Receive Data Valid) Output \nMII Mode: MII RX_DV (Receive Data Valid) Output / \nConfig Mode: Latched as CLK125_NDO Output Enable during power-up /  \n  reset.  See “Strapping Options” section for details. \n46 DVDDH P 3.3V or 2.5V digital V DD \n47 RX_ER O GMII Mode: GMII RX_ER (Receive Error) Output \nMII Mode: MII RX_ER (Receive Error) Output \n48 RX_CLK / \nPHYAD2 I/O GMII Mode: GMII RX_CLK (Receive Reference Clock) Output \nMII Mode: MII RX_CLK (Receive Reference Clock) Output / \nConfig Mode: The pull-up/pull-down value is latched as PHYAD[2] during  \n  power-up / reset.  See “Strapping Options” section for details. \n49 CRS O GMII Mode: GMII CRS (Carrier Sense) Output \nMII Mode: MII CRS (Carrier Sense) Output \n50 MDC Ipu Management Data Clock Input \nThis pin is the input reference clock for MDIO (pin 51) \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 13 M9999-091010-1.1\n Pin Number Pin Name Type(1) Pin Function \n51 MDIO Ipu/O Management Data Input / Output \nThis pin is synchronous to MDC (pin 50) and requires an external pull-up resistor \nto DVDDH (digital V DD) in a range from 1.0K Ω to 4.7KΩ. \n52 COL O GMII Mode: GMII COL (Collision Detected) Output \nMII Mode: MII COL (Collision Detected) Output \n53 INT_N O Interrupt Output \nThis pin provides a programmable interrupt output and requires an external pull-up \nresistor to DVDDH (digital V DD) in a range from 1.0K Ω to 4.7KΩ when active low. \nRegister 1Bh is the Interrupt Control/Status Register for programming the interrupt \nconditions and reading the interrupt status.  Register 1Fh bit 14 sets the interrupt \noutput to active low (default) or active high. \n54 DVDDL P 1.2V digital V DD \n55 CLK125_NDO / \n \nLED_MODE I/O 125MHz Clock Output \nThis pin provides a 125MHz reference clock output option for use by the MAC. / \nConfig Mode: The pull-up/pull-down value is latched as LED_MODE during  \n  power-up / reset.  See “Strapping Options” section for details. \n56 RESET_N Ipu Chip Reset (active low) \nHardware pin configurations are strapped-in at the de-assertion (rising edge) of \nRESET_N.  See “Strapping Options” section for more details. \n57 TX_CLK O MII Mode: MII TX_CLK (Transmit Reference Clock) Output \n58 LDO_O O On-chip 1.2V LDO Controller Output \nThis pin drives the input gate of a P-channel MOSFET to generate 1.2V for the \nchip’s core voltages.  If 1.2V is provided by the system and this pin is not used, it \ncan be left floating. \n59 AVDDL_PLL P 1.2V analog V DD for PLL \n60 XO O 25MHz Crystal feedback \nThis pin is a no connect if oscillator or external clock source is used. \n61 XI I Crystal / Oscillator / External Clock Input \n25MHz +/-50ppm tolerance \n62 AVDDH P 3.3V analog V DD \n63 ISET I/O Set transmit output level \nConnect a 4.99K Ω 1% resistor to ground on this pin. \n64 AGNDH Gnd Analog ground \nPADDLE P_GND Gnd Exposed Paddle on bottom of chip \nConnect P_GND to ground. \nNote: \n1. P = Power supply. \n Gnd = Ground. \n I = Input. \n O = Output.  I/O = Bi-directional. \n Ipu = Input with internal pull-up. \n Ipu/O = Input with internal pull-up / Output. \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 14 M9999-091010-1.1\n Strapping Options  \nPin Number Pin Name Type(1) Pin Function \n48 \n17 \n19 PHYAD2 \nPHYAD1 \nPHYAD0 I/O \nI/O \nI/O The PHY Address, PHYAD[2:0], is latched at power-up / reset and is configurable to \nany value from 1 to 7.  Each PHY address bit is configured as follows: \n Pull-up = 1 \n Pull-down = 0 \nPHY Address bits [4:3] are always set to ‘00’. \n39 \n41 \n43 44 MODE3 \nMODE2 \nMODE1 MODE0 I/O \nI/O \nI/O I/O The MODE[3:0] strap-in pins are latched at power-up / reset and are defined as \nfollows: \n \nMODE[3:0] Mode \n0000 Reserved – not used \n0001 GMII / MII Mode \n0010 Reserved – not used \n0011 Reserved – not used \n0100 NAND Tree Mode \n0101 Reserved – not used \n0110 Reserved – not used \n0111 Chip Power Down Mode \n1000 Reserved – not used \n1001 Reserved – not used \n1010 Reserved – not used \n1011 Reserved – not used \n1100 Reserved – not used \n1101 Reserved – not used \n1110 Reserved – not used \n1111 Reserved – not used  \n45 CLK125_EN I/O CLK125_EN is latched at power-up / reset and is defined as follows: \n Pull-up = Enable 125MHz Clock Output \n Pull-down = Disable 125MHz Clock Output \nPin 55 (CLK125_NDO) provides the 125MHz reference clock output option for use by \nthe MAC. \n55 LED_MODE I/O LED_MODE is latched at power-up / reset and is defined as follows: \n Pull-up = Single LED Mode \n Pull-down = Tri-color Dual LED Mode \n \nNote: \n1. I/O = Bi-directional. \n \nPin strap-ins are latched during power-up or reset.  In some systems, the MAC receive input pins may be driven during \npower-up or reset, and consequently cause the PHY strap-in pins on the GMII/MII signals to be latched to the incorrect configuration.  In this case, it is recommended to add external pull-ups/pull-downs on the PHY strap-in pins to ensure the PHY is configured to the correct pin strap-in mode. \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 15 M9999-091010-1.1\n Functional Overview  \nThe KSZ9021GN is a completely integrated triple speed (10Base-T/100Base-TX/1000Base-T) Ethernet Physical Layer \nTransceiver solution for transmission and reception of data over a standard CAT-5 unshielded twisted pair (UTP) cable. \nIts on-chip proprietary 1000Base-T transceiver and Manchester/MLT-3 signaling-based 10Base-T/100Base-TX \ntransceivers are all IEEE 802.3 compliant. \nThe KSZ9021GN reduces board cost and simplifies board layout by using on-chip termination resistors for the four \ndifferential pairs and by integrating a LDO controller to drive a low cost MOSFET to supply the 1.2V core. \nOn the copper media interface, the KSZ9021GN can automatically detect and correct for differential pair misplacements \nand polarity reversals, and correct propagation delays and re-sync timing between the four differential pairs, as \nspecified in the IEEE 802.3 standard for 1000Base-T operation. \nThe KSZ9021GN provides the GMII/MII interface for connection to GMACs in Gigabit Ethernet Processors and \nSwitches for data transfer at 10/100/1000 Mbps speed. \nThe following figure shows a high-level block diagram of the KSZ9021GN.  \n \n \nFigure 1.  KSZ9021GN Block Diagram \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 16 M9999-091010-1.1\n Functional Description:  10Base-T/100Base-TX Transceiver  \n100Base-TX Transmit \nThe 100Base-TX transmit function performs parallel to serial conversion, 4B/5B coding, scrambling, NRZ-to-NRZI \nconversion, and MLT-3 encoding and transmission. \nThe circuitry starts with a parallel-to-serial conversion, which converts the MII data from the MAC into a 125MHz serial \nbit stream. The data and control stream is then converted into 4B/5B coding, followed by a scrambler. The serialized data is further converted from NRZ-to-NRZI format, and then transmitted in MLT-3 current output. The output current is \nset by an external 4.99K Ω 1% resistor for the 1:1 transformer ratio. \nThe output signal has a typical rise/fall time of 4ns and complies with the ANSI TP-PMD standard regarding amplitude \nbalance, overshoot, and timing jitter. The wave-shaped 10Base-T output is also incorporated into the 100Base-TX transmitter. \n100Base-TX Receive \nThe 100BASE-TX receiver function performs adaptive equalization, DC restoration, MLT-3-to-NRZI conversion, data \nand clock recovery, NRZI-to-NRZ conversion, de-scrambling, 4B/5B decoding, and serial-to-parallel conversion.  \nThe receiving side starts with the equalization filter to compensate for inter-symbol interference (ISI) over the twisted \npair cable. Since the amplitude loss and phase distortion is a function of the cable length, the equalizer must adjust its characteristics to optimize performance. In this design, the variable equalizer makes an initial estimation based on comparisons of incoming signal strength against some known cable characteristics, and then tunes itself for \noptimization. This is an ongoing process and self-adjusts against environmental changes such as temperature \nvariations. \nNext, the equalized signal goes through a DC restoration and data conversion block. The DC restoration circuit is used \nto compensate for the effect of baseline wander and to improve the dynamic range. The differential data conversion circuit converts the MLT-3 format back to NRZI. The slicing threshold is also adaptive. \nThe clock recovery circuit extracts the 125MHz clock from the edges of the NRZI signal. This recovered clock is then \nused to convert the NRZI signal into the NRZ format. This signal is sent through the de-scrambler followed by the 4B/5B \ndecoder. Finally, the NRZ serial data is converted to the GMII/MII format and provided as the input data to the MAC. \nScrambler/De-scrambler (100Base-TX only) \nThe purpose of the scrambler is to spread the power spectrum of the signal to reduce electromagnetic interference \n(EMI) and baseline wander. Transmitted data is scrambled through the use of an 11-bit wide linear feedback shift register (LFSR). The scrambler generates a 2047-bit non-repetitive sequence, and the receiver then de-scrambles the incoming data stream using the same sequence as at the transmitter. \n10Base-T Transmit \nThe output 10Base-T driver is incorporated into the 100Base-TX driver to allow transmission with the same magnetic.  \nThey are internally wave-shaped and pre-emphasized into typical outputs of 2.5V amplitude. The harmonic contents are at least 31 dB below the fundamental when driven by an all-ones Manchester-encoded signal. \n10Base-T Receive \nOn the receive side, input buffer and level detecting squelch circuits are employed. A differential input receiver circuit \nand a phase-locked loop (PLL) perform the decoding function. The Manchester-encoded data stream is separated into clock signal and NRZ data. A squelch circuit rejects signals with levels less than 300 mV or with short pulse widths in order to prevent noises at the receive inputs from falsely triggering the decoder. When the input exceeds the squelch limit, the PLL locks onto the incoming signal and the KSZ9021GN decodes a data frame. The receiver clock is \nmaintained active during idle periods in between receiving data frames. \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 17 M9999-091010-1.1\n Functional Description:  1000Base-T Transceiver \nThe 1000Base-T transceiver is based-on a mixed-signal / digital signal processing (DSP) architecture, which includes \nthe analog front-end, digital channel equalizers, trellis encoders/decoders, echo cancellers, cross-talk cancellers, \nprecision clock recovery scheme, and power efficient line drivers. \nThe following figure shows a high-level block diagram of a single channel of the 1000Base-T transceiver for one of the \nfour differential pairs. \n \nCLOCK\nGENERATION\nBASELINE \nWANDER\nCOMPENSATIONECHO \nCANCELLERTRANSMIT \nBLOCK\nNEXT CancellerNEXT CancellerNEXT \nCANCELLER\nRX-\nADC\nAGC\n+ FFE SLICER\nCLOCK & PHASE\nRECOVERY\nAUTO-\nNEGOTIATION\nPMA STATE\nMACHINESMII\nREGISTERSMII\nMANAGEMENT\nCONTROLDFEANALOG\nHYBRIDPCS STATE \nMACHINES\nPAIR SWAP\n&\nALIGN UNITDESCRAMBLER\n+\nDECODERSIDE-STREAM \nSCRAMBLER\n&\nSYMBOL ENCODER\nLED DRIVERXTALOTHER\nCHANNELS\nTX\nSIGNAL\nRX\nSIGNAL\n \n \nFigure 2.  KSZ9021GN 1000Base-T Block Diagram – Single Channel \n \nAnalog Echo Cancellation Circuit \nIn 1000Base-T mode, the analog echo cancellation circuit helps to reduce the near-end echo. This analog hybrid circuit \nrelieves the burden of the ADC and the adaptive equalizer. \nThis circuit is disabled in 10Base-T/100Base-TX mode. \nAutomatic Gain Control (AGC) \nIn 1000Base-T mode, the automatic gain control (AGC) circuit provides initial gain adjustment to boost up the signal \nlevel. This pre-conditioning circuit is used to improve the signal-to-noise ratio of the receive signal. \nAnalog-to-Digital Converter (ADC) \nIn 1000Base-T mode, the analog-to-digital converter (ADC) digitizes the incoming signal. ADC performance is essential \nto the overall performance of the transceiver. \nThis circuit is disabled in 10Base-T/100Base-TX mode. \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 18 M9999-091010-1.1\n Timing Recovery Circuit \nIn 1000Base-T mode, the mixed-signal clock recovery circuit together with the digital phase locked loop is used to \nrecover and track the incoming timing information from the received data. The digital phase locked loop has very low long-term jitter to maximize the signal-to-noise ratio of the receive signal. \nThe 1000Base-T slave PHY is required to transmit the exact receive clock frequency recovered from the received data \nback to the 1000Base-T master PHY. Otherwise, the master and slave will not be synchronized after long transmission.  Additionally, this helps to facilitate echo cancellation and NEXT removal. \nAdaptive Equalizer \nIn 1000Base-T mode, the adaptive equalizer provides the following functions:  \n• Detection for partial response signaling \n• Removal of NEXT and ECHO noise \n• Channel equalization \nSignal quality is degraded by residual echo that is not removed by the analog hybrid and echo due to impedance \nmismatch. The KSZ9021GN employs a digital echo canceller to further reduce echo components on the receive signal.  \nIn 1000Base-T mode, data transmission and reception occurs simultaneously on all four pairs of wires (four channels). \nThis results in high frequency cross-talk coming from adjacent wires. The KSZ9021GN employs three NEXT cancellers on each receive channel to minimize the cross-talk induced by the other three channels. \nIn 10Base-T/100Base-TX mode, the adaptive equalizer needs only to remove the inter-symbol interference and recover \nthe channel loss from the incoming data. \nTrellis Encoder and Decoder \nIn 1000Base-T mode, the transmitted 8-bit data is scrambled into 9-bit symbols and further encoded into 4D-PAM5 \nsymbols. The initial scrambler seed is determined by the specific PHY address to reduce EMI when more than one KSZ9021GN are used on the same board. On the receiving side, the idle stream is examined first. The scrambler seed, \npair skew, pair order and polarity have to be resolved through the logic. The incoming 4D-PAM5 data is then converted \ninto 9-bit symbols and then de-scrambled into 8-bit data. \n \nFunctional Description:  Additional 10/100/1000 PHY Features \nAuto MDI/MDI-X \nThe Automatic MDI/MDI-X feature eliminates the need to determine whether to use a straight cable or a crossover cable \nbetween the KSZ9021GN and its link partner. This auto-sense function detects the MDI/MDI-X pair mapping from the \nlink partner, and then assigns the MDI/MDI-X pair mapping of the KSZ9021GN accordingly. \nThe following table shows the KSZ9021GN 10/100/1000 pin-out assignments for MDI/MDI-X pin mapping.  \nMDI MDI-X Pin (RJ-45 pair) \n1000Base-T 100Base-TX 10Base-T 1000Base-T 100Base-TX 10Base-T \nTXRXP/M_A (1,2) A+/- TX+/- TX+/- B+/- RX+/- RX+/- \nTXRXP/M_B (3,6) B+/- RX+/- RX+/- A+/- TX+/- TX+/- \nTXRXP/M_C (4,5) C+/- Not used Not used D+/- Not used Not used \nTXRXP/M_D (7,8) D+/- Not used Not used C+/- Not used Not used \n \nTable 1.  MDI / MDI-X Pin Mapping \n \nAuto MDI/MDI-X is enabled by default. It is disabled by writing a one to register 28 (1Ch) bit 6. MDI and MDI-X mode is \nset by register 28 (1Ch) bit 7 if auto MDI/MDI-X is disabled. \nAn isolation transformer with symmetrical transmit and receive data paths is recommended to support auto MDI/MDI-X. \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 19 M9999-091010-1.1\n Pair- Swap, Alignment, and Polarity Check \nIn 1000Base-T mode, the KSZ9021GN \n• Detects incorrect channel order and automatically restore the pair order for the A, B, C, D pairs (four channels) \n• Supports 50±10ns difference in propagation delay between pairs of channels in accordance with the IEEE \n802.3 standard, and automatically corrects the data skew so the corrected four pairs of data symbols are synchronized \nIncorrect pair polarities of the differential signals are automatically corrected for all speeds. \nWave Shaping, Slew Rate Control and Partial Response \nIn communication systems, signal transmission encoding methods are used to provide the noise-shaping feature and to \nminimize distortion and error in the transmission channel. \n• For 1000Base-T, a special partial response signaling method is used to provide the band-limiting feature for the \ntransmission path. \n• For 100Base-TX, a simple slew rate control method is used to minimize EMI. \n• For 10Base-T, pre-emphasis is used to extend the signal quality through the cable. \nPLL Clock Synthesizer \nThe KSZ9021GN generates 125MHz, 25MHz and 10MHz clocks for system timing. Internal clocks are generated from \nthe external 25 MHz crystal or reference clock. \nAuto-Negotiation \nThe KSZ9021GN conforms to the auto-negotiation protocol, defined in Clause 28 of the IEEE 802.3 Specification. \nAuto-negotiation allows UTP (Unshielded Twisted Pair) link partners to select the highest common mode of operation.  During auto-negotiation, link partners advertise capabilities across the UTP link to each other, and then compare their \nown capabilities with those they received from their link partners. The highest speed and duplex setting that is common to the two link partners is selected as the mode of operation.  \nThe following list shows the speed and duplex operation mode from highest to lowest. \n• Priority 1:  1000Base-T, full-duplex \n• Priority 2:  1000Base-T, half-duplex \n• Priority 3:  100Base-TX, full-duplex \n• Priority 4:  100Base-TX, half-duplex \n• Priority 5:  10Base-T, full-duplex \n• Priority 6:  10Base-T, half-duplex \n If auto-negotiation is not supported or the KSZ9021GN link partner is forced to bypass auto-negotiation for 10Base-T \nand 100Base-TX modes, then the KSZ9021GN sets its operating mode by observing the input signal at its receiver. \nThis is known as parallel detection, and allows the KSZ9021GN to establish link by listening for a fixed signal protocol in the absence of auto-negotiation advertisement protocol. \nThe auto-negotiation link up process is shown in the following flow chart. \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 20 M9999-091010-1.1\n \n \n \nFigure 3.  Auto-Negotiation Flow Chart \n \nFor 1000Base-T mode, auto-negotiation is required and always used to establish a link. During 1000Base-T auto-\nnegotiation, the Master and Slave configuration is first resolved between link partners, and then the link is established with the highest common capabilities between link partners. \nAuto-negotiation is enabled by default at power-up or after hardware reset. Afterwards, auto-negotiation can be enabled \nor disabled through register 0 bit 12. If auto-negotiation is disabled, the speed is set by register 0 bits 6 and 13, and the \nduplex is set by register 0 bit 8. \nIf the speed is changed on the fly, the link goes down and either auto-negotiation or parallel detection will initiate until a \ncommon speed between KSZ9021GN and its link partner is re-established for a link.  \nIf link is already established and there is no change of speed on the fly, then the changes will not take effect unless \neither auto-negotiation is restarted through register 0 bit 9, or a link down to link up transition occurs (i.e., disconnecting  \nand reconnecting the cable). \nAfter auto-negotiation is completed, the link status is updated in register 1 and the link partner capabilities are updated \nin registers 5, 6, and 10. \nThe auto-negotiation finite state machines employ interval timers to manage the auto-negotiation process. The duration \nof these timers under normal operating conditions are summarized in the following table. \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 21 M9999-091010-1.1\n  \nAuto-Negotiation Interval Timers Time Duration \nTransmit Burst interval 16 ms \nTransmit Pulse interval 68 us \nFLP detect minimum time 17.2 us \nFLP detect maximum time 185 us \nReceive minimum Burst interval 6.8 ms \nReceive maximum Burst interval 112 ms \nData detect minimum interval 35.4 us \nData detect maximum interval 95 us \nNLP test minimum interval 4.5 ms \nNLP test maximum interval 30 ms \nLink Loss time 52 ms \nBreak Link time 1480 ms \nParallel Detection wait time 830 ms \nLink  Enable wait time 1000 ms \n \nTable 2.  Auto-Negotiation Timers \n \nGMII Interface \nThe Gigabit Media Independent Interface (GMII) is compliant to the IEEE 802.3 Specification. It provides a common \ninterface between GMII PHYs and MACs, and has the following key characteristics: \n• Pin count is 24 pins (11 pins for data transmission, 11 pins for data reception, and 2 pins for carrier and collision \nindication). \n• 1000Mbps is supported at both half and full duplex. \n• Data transmission and reception are independent and belong to separate signal groups. \n• Transmit data and receive data are each 8-bit wide, a byte. \n \nIn GMII operation, the GMII pins function as follow: \n• The MAC sources the transmit reference clock, GTX_CLK, at 125MHz for 1000Mbps. \n• The PHY recovers and sources the receive reference clock, RX_CLK, at 125MHz for 1000Mbps. \n• TX_EN, TXD[7:0] and TX_ER are sampled by the KSZ9021GN on the rising edge of GTX_CLK. \n• RX_DV, RXD[7:0], and RX_ER are sampled by the MAC on the rising edge of RX_CLK. \n• CRS and COL are driven by the KSZ9021GN and are not required to transition synchronously with respect to \neither GTX_CLK or RX_CLK. \n The KSZ9021GN combines GMII mode with MII mode to form GMII/MII mode to support data transfer at 10/100/1000 \nMbps speed. After power-up or reset, the KSZ9021GN is configured to GMII/MII mode if the MODE[3:0] strap-in pins are set to 0001. See Strapping Options section. \nThe KSZ9021GN has the option to output a low jitter 125MHz reference clock on CLK125_NDO (pin 55). This clock \nprovides a lower cost reference clock alternative for GMII/M II MACs that require a 125MHz crystal or oscillator. The \n125MHz clock output is enabled after power-up or reset if the CLK125_EN strap-in pin is pulled high. \nThe KSZ9021GN provides a dedicated transmit clock input pin for GMII mode, defined as follow: \n• GTX_CLK (input, pin 32): Sourced by MAC in GMII mode for 1000Mbps speed \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 22 M9999-091010-1.1\n GMII Signal Definition \nThe following table describes the GMII signals. Refer to Clause 35 of the IEEE 802.3 Specification for more detailed \ninformation. \n \nGMII \nSignal Name \n(per spec) GMII \nSignal Name \n(per KSZ9021GN) Pin Type \n(with respect  \nto PHY) Pin Type \n(with respect \nto MAC) Description \nGTX_CLK GTX_CLK Input Output Transmit Reference Clock \n(125MHz for 1000Mbps)  \nTX_EN TX_EN Input Output Transmit Enable \nTXD[7:0] TXD[7:0] Input Output Transmit Data [7:0] \nTX_ER TX_ER Input Output Transmit Error \nRX_CLK RX_CLK Output Input Receive Reference Clock \n(125MHz for 1000Mbps) \nRX_DV RX_DV Output Input Receive Data Valid \nRXD[7:0] RXD[7:0] Output Input Receive Data [7:0] \nRX_ER RX_ER Output Input Receive Error \nCRS CRS Output Input Carrier Sense \nCOL COL Output Input Collision Detected \n \nTable 3.  GMII Signal Definition \n \nGMII Signal Diagram \nThe KSZ9021GN GMII pin connections to the MAC are shown in the following figure. \n \n \n \nFigure 4.  KSZ9021GN GMII Interface \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 23 M9999-091010-1.1\n MII Interface \nThe Media Independent Interface (MII) is compliant with the IEEE 802.3 Specification. It provides a common interface \nbetween MII PHYs and MACs, and has the following key characteristics: \n• Pin count is 16 pins (7 pins for data transmission, 7 pins for data reception, and 2 pins for carrier and collision \nindication). \n• 10Mbps and 100Mbps are supported at both half and full duplex. \n• Data transmission and reception are independent and belong to separate signal groups. \n• Transmit data and receive data are each 4-bit wide, a nibble. \n \nIn MII operation, the MII pins function as follow: \n• The PHY sources the transmit reference clock, TX_CLK, at 25MHz for 100Mbps and 2.5MHz for 10Mbps. \n• The PHY recovers and sources the receive reference clock, RX_CLK, at 25MHz for 100Mbps and 2.5MHz for \n10Mbps. \n• TX_EN, TXD[3:0] and TX_ER are driven by the MAC and shall transition synchronously with respect to \nTX_CLK. \n• RX_DV, RXD[3:0], and RX_ER are driven by the KSZ9021GN and shall transition synchronously with respect to \nRX_CLK. \n• CRS and COL are driven by the KSZ9021GN and are not required to transition synchronously with respect to \neither TX_CLK or RX_CLK. \n \nThe KSZ9021GN combines GMII mode with MII mode to form GMII/MII mode to support data transfer at 10/100/1000 \nMbps speeds. After the power-up or reset, the KSZ9021GN is then configured to GMII/MII mode if the MODE[3:0] strap-in pins are set to 0001. See Strapping Options section. \nThe KSZ9021GN has the option to output a low jitter 125MHz reference clock on CLK125_NDO (pin 55). This clock \nprovides a lower cost reference clock alternative for GMII/M II MACs that require a 125MHz crystal or oscillator. The \n125MHz clock output is enabled after power-up or reset if the CLK125_EN strap-in pin is pulled high. \nThe KSZ9021GN provides a dedicated transmit clock output pin for MII mode, defined as follow: \n• TX_CLK (output, pin 57) : Sourced by KSZ9021GN in MII mode for 10/100Mbps speed \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 24 M9999-091010-1.1\n MII Signal Definition \nThe following table describes the MII signals. Refer to Clause 22 of the IEEE 802.3 Specification for detailed \ninformation. \n \nMII \nSignal Name \n(per spec) MII \nSignal Name \n(per KSZ9021GN) Pin Type \n(with respect  \nto PHY) Pin Type \n(with respect \nto MAC) Description \nTX_CLK TX_CLK Output Input Transmit Reference Clock \n(25MHz for 100Mbps, 2.5MHz for \n10Mbps) \nTX_EN TX_EN Input Output Transmit Enable \nTXD[3:0] TXD[3:0] Input Output Transmit Data [3:0] \nTX_ER TX_ER Input Output Transmit Error \nRX_CLK RX_CLK Output Input Receive Reference Clock \n(25MHz for 100Mbps, 2.5MHz for \n10Mbps) \nRX_DV RX_DV Output Input Receive Data Valid \nRXD[3:0] RXD[3:0] Output Input Receive Data [3:0] \nRX_ER RX_ER Output Input Receive Error \nCRS CRS Output Input Carrier Sense \nCOL COL Output Input Collision Detected \n \nTable 4.  MII Signal Definition \n \nMII Signal Diagram \nThe KSZ9021GN MII pin connections to the MAC are shown in the following figure. \n \n \n \nFigure 5.  KSZ9021GN MII Interface \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 25 M9999-091010-1.1\n MII Management (MIIM) Interface \nThe KSZ9021GN supports the IEEE 802.3 MII Management Interface, also known as the Management Data Input/ \nOutput (MDIO) Interface. This interface allows upper-layer devices to monitor and control the state of the KSZ9021GN. \nAn external device with MIIM capability is used to read the PHY status and/or configure the PHY settings. Further detail \non the MIIM interface can be found in Clause 22.2.4.5 of the IEEE 802.3 Specification. \nThe MIIM interface consists of the following: \n• A physical connection that incorporates the clock line (MDC) and the data line (MDIO). \n• A specific protocol that operates across the aforementioned physical connection that allows an external \ncontroller to communicate with one or more KSZ9021GN device. Each KSZ9021GN device is assigned a PHY address between 1 and 7 by the PHYAD[2:0] strapping pins. \n• A 32 register address space to access the KSZ9021GN IEEE Defined Registers, Vendor Specific Registers and \nExtended Registers. See Register Map section. \nThe following table shows the MII Management frame format for the KSZ9021GN.  \n Preamble Start of \nFrame Read/Write \nOP Code PHY \nAddress \nBits [4:0] REG \nAddress \nBits [4:0] TA Data \nBits [15:0] Idle \nRead 32 1’s 01 10 00AAA RRRRR Z0 DDDDDDDD_DDDDDDDD Z \nWrite 32 1’s 01 01 00AAA RRRRR 10 DDDDDDDD_DDDDDDDD Z \n \nTable 5.  MII Management Frame Format – for KSZ9021GN \n \nInterrupt (INT_N) \nINT_N (pin 53) is an optional interrupt signal that is used to inform the external controller that there has been a status \nupdate in the KSZ9021GN PHY register. Bits [15:8] of register 27 (1Bh) are the interrupt control bits to enable and disable the conditions for asserting the INT_N signal. Bits [7:0] of register 27 (1Bh) are the interrupt status bits to indicate which interrupt conditions have occurred. The interrupt status bits are cleared after reading register 27 (1Bh). \nBit 14 of register 31 (1Fh) sets the interrupt level to active high or active low. The default is active low. \n The MII management bus option gives the MAC processor complete access to the KSZ9021GN control and status \nregisters. Additionally, an interrupt pin eliminates the need for the processor to poll the PHY for status change. \n \nLED Mode \nThe KSZ9021GN provides two programmable LED output pins, LED2 and LED1, which are configurable to support two \nLED modes. The LED mode is configured by the LED_MODE strap-in (pin 55). It is latched at power-up / reset and is \ndefined as follows: \n• Pull-up: Single LED Mode \n• Pull-down: Tri-color Dual LED Mode \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 26 M9999-091010-1.1\n Single LED Mode \nIn Single LED Mode, the LED2 pin indicates the link status while the LED1 pin indicates the activity status, as shown in \nthe following table. \n \nLED pin Pin State LED Definition Link / Activity \nH OFF Link off LED2  \nL ON Link on (any speed) \nH OFF No Activity LED1  \nToggle Blinking Activity (RX, TX) \n \nTable 6. Single LED Mode – Pin Definition \n \nTri-color Dual LED Mode \nIn Tri-color Dual LED Mode, the Link and Activity status ar e indicated by the LED2 pin for 1000Base-T, by the LED1 pin \nfor 100Base-TX, and by both LED2 and LED1 pin, working in conjunction, for 10Base-T. This is summarized in the following table. \n \nLED Pin  \n(State)  LED Pin \n(Definition)  \nLED2  LED1  LED2  LED1  Link / Activity  \nH H OFF OFF Link off \nL H ON OFF 1000 Link / No Activity \nToggle H Blinking OFF 1000 Link / Activity (RX, TX) \nH L OFF ON 100 Link / No Activity \nH Toggle OFF Blinking 100 Link / Activity (RX, TX) \nL L ON ON 10 Link / No Activity \nToggle Toggle Blinking Blinking 10 Link / Activity (RX, TX) \n \nTable 7. Tri-color Dual LED Mode – Pin Definition \n \nEach LED output pin can directly drive a LED with a series resistor (typically 220 Ω to 470Ω). \nFor activity indication, the LED output toggles at approximately 12.5Hz (80ms) to ensure visibility to the human eye.  \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 27 M9999-091010-1.1\n NAND Tree Support \nThe KSZ9021GN provides parametric NAND tree support for fault detection between chip I/Os and board. The NAND \ntree mode is enabled at power-up / reset with the MODE[3:0] strap-in pins set to 0100. \nThe following table lists the NAND tree pin order.  \nPin  Description  \nLED2 Input \nLED1 Input \nTXD0 Input \nTXD1 Input \nTXD2 Input \nTXD3 Input \nTX_ER Input  \nGTX_CLK Input \nTX_EN Input \nRX_DV Input \nRX_ER Input \nRX_CLK Input \nCRS Input  \nCOL Input  \nINT_N Input  \nMDC Input \nMDIO Input \nCLK125_NDO Output \n \nTable 8.  NAND Tree Test Pin Order – for KSZ9021GN \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 28 M9999-091010-1.1\n Power Management \nThe KSZ9021GN offers the following power management modes: \nPower Saving Mode \nThis mode is a KSZ9021GN green feature to reduce power consumption when the cable is unplugged. It is in effect \nwhen auto-negotiation mode is enabled and the cable is disconnected (no link). \nSoftware Power-Down Mode \nThis mode is used to power down the KSZ9021GN device when it is not in use after power-up. Power-down mode is \nenabled by writing a one to register 0h bit 11. In the power-down state, the KSZ9021GN disables all internal functions, \nexcept for the MII management interface. The KSZ9021GN exits power-down mode after writing a zero to register 0h bit 11. \nChip Power-Down Mode \nThis mode provides the lowest power state for the KSZ9021GN when it is not in use and is mounted on the board. Chip \npower-down mode is enabled at power-up / reset with the MODE[3:0] strap-in pins set to 0111. The KSZ9021GN exits chip power down mode when a hardware reset is applied to RESET_N (pin 56) with the MODE[3:0] strap-in pins set to an operating mode other than chip power-down mode. \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 29 M9999-091010-1.1\n Register Map \nThe IEEE 802.3 Specification provides a 32 register address space for the PHY. Registers 0 thru 15 are standard PHY \nregisters, defined per the specification. Registers 16 thru 31 are vendor specific registers. \nThe KSZ9021GN uses the IEEE provided register space for IEEE Defined Registers and Vendor Specific Registers, \nand uses the following registers to access Extended Registers: \n• Register 11 (Bh) for Extended Register – Control \n• Register 12 (Ch) for Extended Register – Data Write \n• Register 13 (Dh) for Extended Register – Data Read \n \nExamples: \n• Extended Register Read // Read from Operation Mode Strap Status Register \n1. Write register 11 (Bh) with 0103h // Set register 259 (103h) for read \n2. Read register 13 (Dh) // Read register value \n \n• Extended Register Write // Write to Operation Mode Strap Override Register \n1. Write register 11 (Bh) with 8102h // Set register 258 (102h) for write \n2. Write register 12 (Ch) with 0010h // Write 0010h value to register to set NAND Tree mode \n \nRegister Number (Hex) Description \nIEEE Defined Registers \n0 (0h) Basic Control \n1 (1h) Basic Status \n2 (2h) PHY Identifier 1 \n3 (3h) PHY Identifier 2 \n4 (4h) Auto-Negotiation Advertisement \n5 (5h) Auto-Negotiation Link Partner Ability \n6 (6h) Auto-Negotiation Expansion \n7 (7h) Auto-Negotiation Next Page \n8 (8h) Auto-Negotiation Link Partner Next Page Ability \n9 (9h) 1000Base-T Control \n10 (Ah) 1000Base-T Status \n11 (Bh) Extended Register – Control \n12 (Ch) Extended Register – Data Write \n13 (Dh) Extended Register – Data Read \n14 (Eh) Reserved \n15 (Fh) Extended – MII Status \nVendor Specific Registers \n16 (10h) Reserved \n17 (11h) Remote Loopback, LED Mode \n18 (12h) LinkMD® – Cable Diagnostic \n19 (13h) Digital PMA/PCS Status \n20 (14h) Reserved \n21 (15h) RXER Counter \n22 (16h) – 26 (1Ah) Reserved \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 30 M9999-091010-1.1\n Register Number (Hex) Description \n27 (1Bh) Interrupt Control/Status \n28 (1Ch) Digital Debug Control 1 \n29 (1Dh) – 30 (1Eh) Reserved \n31 (1Fh) PHY Control \nExtended Registers \n257 (101h) Strap Status \n258 (102h) Operation Mode Strap Override \n259 (103h) Operation Mode Strap Status \n263 (107h) Analog Test Register \n \n \nRegister Description \nIEEE Defined Registers \nAddress Name Description Mode(1) Default \nRegister 0 (0h) – Basic Control \n0.15 Reset 1 = Software PHY reset \n0 = Normal operation \nThis bit is self-cleared after a ‘1’ is written to it. RW/SC 0 \n0.14 Loop-back 1 = Loop-back mode \n0 = Normal operation RW 0 \n0.13 Speed Select \n(LSB) [0.6, 0.13] \n [1,1] = Reserved \n [1,0] = 1000Mbps  [0,1] = 100Mbps \n [0,0] = 10Mbps \nThis bit is ignored if auto-negotiation is enabled \n(register 0.12 = 1). RW Hardware Setting \n0.12 Auto-\nNegotiation \nEnable 1 = Enable auto-negotiation process \n0 = Disable auto-negotiation process \nIf enabled, auto-negotiation result overrides \nsettings in register 0.13, 0.8 and 0.6. RW 1 \n0.11 Power Down 1 = Power down mode \n0 = Normal operation RW 0 \n0.10 Isolate 1 = Electrical isolation of PHY from GMII/MII \n0 = Normal operation RW 0 \n0.9 Restart Auto-\nNegotiation 1 = Restart auto-negotiation process \n0 = Normal operation. \nThis bit is self-cleared after a ‘1’ is written to it. RW/SC 0 \n0.8 Duplex Mode 1 = Full-duplex \n0 = Half-duplex RW Hardware Setting \n0.7 Collision Test 1 = Enable COL test \n0 = Disable COL test RW 0 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 31 M9999-091010-1.1\n Address Name Description Mode(1) Default \n0.6 Speed Select \n(MSB) [0.6, 0.13] \n [1,1] = Reserved \n [1,0] = 1000Mbps  [0,1] = 100Mbps \n [0,0] = 10Mbps \nThis bit is ignored if auto-negotiation is enabled \n(register 0.12 = 1). RW 0 \n0.5:0 Reserved  RO 00_0000 \nRegister 1 (1h) – Basic Status  \n1.15 100Base-T4 1 = T4 capable \n0 = Not T4 capable RO 0 \n1.14 100Base-TX \nFull Duplex 1 = Capable of 100Mbps full-duplex \n0 = Not capable of 100Mbps full-duplex RO 1 \n1.13 100Base-TX \nHalf Duplex 1 = Capable of 100Mbps half-duplex \n0 = Not capable of 100Mbps half-duplex RO 1 \n1.12 10Base-T  Full \nDuplex 1 = Capable of 10Mbps full-duplex \n0 = Not capable of 10Mbps full-duplex RO 1 \n1.11 10Base-T  Half \nDuplex 1 = Capable of 10Mbps half-duplex \n0 = Not capable of 10Mbps half-duplex RO 1 \n1.10:9 Reserved  RO 00 \n1.8 Extended \nStatus 1 = Extended Status Information in Reg. 15. \n0 = No Extended Status Information in Reg. 15. RO 1 \n1.7 Reserved  RO 0 \n1.6 No Preamble 1 = Preamble suppression \n0 = Normal preamble RO 1 \n1.5 Auto-\nNegotiation \nComplete 1 = Auto-negotiation process completed \n0 = Auto-negotiation process not completed RO 0 \n1.4 Remote Fault 1 = Remote fault \n0 = No remote fault RO/LH 0 \n1.3 Auto-\nNegotiation \nAbility 1 = Capable to perform auto-negotiation \n0 = Not capable to perform auto-negotiation RO 1 \n1.2 Link Status 1 = Link is up \n0 = Link is down RO/LL 0 \n1.1 Jabber Detect 1 = Jabber detected \n0 = Jabber not detected  (default is low) RO/LH 0 \n1.0 Extended \nCapability 1 = Supports extended capabilities registers RO 1 \nRegister 2 (2h) – PHY Identifier 1  \n2.15:0 PHY ID \nNumber Assigned to the 3rd through 18th bits of the \nOrganizationally Unique Identifier (OUI).  \nKendin Communication’s OUI is 0010A1 (hex) \n   RO 0022h \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 32 M9999-091010-1.1\n Address Name Description Mode(1) Default \nRegister 3 (3h) – PHY Identifier 2 \n3.15:10 PHY ID \nNumber Assigned to the 19th through 24th bits of the \nOrganizationally Unique Identifier (OUI).  Kendin Communication’s OUI is 0010A1 (hex) RO 0001_01 \n3.9:4 Model Number Six bit manufacturer’s model number RO 10_0001 \n3.3:0 Revision \nNumber Four bit manufacturer’s revision number RO Indicates silicon revision \nRegister 4 (4h) – Auto-Negotiation Advertisement  \n4.15 Next Page 1 = Next page capable \n0 = No next page capability. RW 0 \n4.14 Reserved  RO 0 \n4.13 Remote Fault 1 = Remote fault supported \n0 = No remote fault RW 0 \n4.12 Reserved  RO 0 \n4.11:10 Pause [4.11, 4.10] \n [0,0] = No PAUSE  [1,0] = Asymmetric PAUSE (link partner) \n [0,1] = Symmetric PAUSE \n [1,1] = Symmetric & Asymmetric PAUSE \n (local device) RW 00 \n4.9 100Base-T4 1 = T4 capable \n0 = No T4 capability RO 0 \n4.8 100Base-TX \nFull-Duplex 1 = 100Mbps full-duplex capable \n0 = No 100Mbps full-duplex capability RW 1 \n4.7 100Base-TX \nHalf-Duplex  1 = 100Mbps half-duplex capable \n0 = No 100Mbps half-duplex capability RW 1 \n4.6 10Base-T  \nFull-Duplex 1 = 10Mbps full-duplex capable \n0 = No 10Mbps full-duplex capability RW 1 \n4.5 10Base-T  \nHalf-Duplex 1 = 10Mbps half-duplex capable \n0 = No 10Mbps half-duplex capability RW 1 \n4.4:0 Selector Field  [00001] = IEEE 802.3   RW 0_0001 \nRegister 5 (5h) – Auto-Negotiation Link Partner Ability  \n5.15 Next Page 1 = Next page capable \n0 = No next page capability RO 0 \n5.14 Acknowledge 1 = Link code word received from partner \n0 = Link code word not yet received RO 0 \n5.13 Remote Fault 1 = Remote fault detected \n0 = No remote fault RO 0 \n5.12 Reserved   RO 0 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 33 M9999-091010-1.1\n Address Name Description Mode(1) Default \n5.11:10 Pause [5.11, 5.10] \n [0,0] = No PAUSE \n [1,0] = Asymmetric PAUSE (link partner)  [0,1] = Symmetric PAUSE \n [1,1] = Symmetric & Asymmetric PAUSE \n (local device) RW 00 \n5.9 100Base-T4 1 = T4 capable \n0 = No T4 capability RO 0 \n5.8 100Base-TX \nFull-Duplex 1 = 100Mbps full-duplex capable \n0 = No 100Mbps full-duplex capability RO 0 \n5.7 100Base-TX \nHalf-Duplex 1 = 100Mbps half-duplex capable \n0 = No 100Mbps half-duplex capability RO 0 \n5.6 10Base-T  \nFull-Duplex 1 = 10Mbps full-duplex capable \n0 = No 10Mbps full-duplex capability RO 0 \n5.5 10Base-T  \nHalf-Duplex 1 = 10Mbps half-duplex capable \n0 = No 10Mbps half-duplex capability RO 0 \n5.4:0 Selector Field  [00001] = IEEE 802.3   RO 0_0000 \nRegister 6 (6h) – Auto-Negotiation Expansion  \n6.15:5 Reserved  RO 0000_0000_000 \n6.4 Parallel \nDetection Fault 1 = Fault detected by parallel detection \n0 = No fault detected by parallel detection. RO/LH 0 \n6.3 Link Partner \nNext Page \nAble 1 = Link partner has next page capability \n0 = Link partner does not have next page \n capability RO 0 \n6.2 Next Page \nAble 1 = Local device has next page capability \n0 = Local device does not have next page \n capability RO 1 \n6.1 Page Received 1 = New page received \n0 = New page not received yet RO/LH 0 \n6.0 Link Partner \nAuto-\nNegotiation Able 1 = Link partner has auto-negotiation capability \n0 = Link partner does not have auto-negotiation \n capability RO 0 \nRegister 7 (7h) – Auto-Negotiation Next Page  \n7.15 Next Page 1 = Additional next page(s) will follow \n0 = Last page RW 0 \n7.14 Reserved  RO 0 \n7.13 Message Page 1 = Message page \n0 = Unformatted page RW 1 \n7.12 Acknowledge2 1 = Will comply with message \n0 = Cannot comply with message RW 0 \n7.11 Toggle 1 = Previous value of the transmitted link code \n word equaled logic one \n0 = Logic zero RO 0 \n7.10:0 Message Field 11-bit wide field to encode 2048 messages RW 000_0000_0001 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 34 M9999-091010-1.1\n Address Name Description Mode(1) Default \nRegister 8 (8h) – Auto-Negotiation Link Partner Next Page Ability  \n8.15 Next Page 1 = Additional Next Page(s) will follow \n0 = Last page RO 0 \n8.14 Acknowledge 1 = Successful receipt of link word \n0 = No successful receipt of link word RO 0 \n8.13 Message Page 1 = Message page \n0 = Unformatted page RO  0 \n8.12 Acknowledge2 1 = Able to act on the information \n0 = Not able to act on the information RO 0 \n8.11 Toggle 1 = Previous value of  transmitted link code \n word equal to logic zero \n0 = Previous value of  transmitted link code \n word equal to logic one RO 0 \n8.10:0 Message Field  RO 000_0000_0000 \nRegister 9 (9h) – 1000Base-T Control \n9:15:13 Test Mode Bits Transmitter test mode operations \n[9.15:13] Mode \n [000] Normal Operation \n [001] Test mode 1 –Transmit waveform \n  test \n [010] Test mode 2 –Transmit jitter test\n  in Master mode \n [011] Test mode 3 –Transmit jitter test\n  in Slave mode \n [100] Test mode 4 –Transmitter  \n  distortion test \n [101] Reserved, operations not  \n  identified \n [110] Reserved, operations not  \n  identified \n [111] Reserved, operations not  \n  identified RW 000 \n9.12 MASTER-\nSLAVE  \nManual Config \nEnable 1 = Enable MASTER-SLAVE Manual \n configuration value \n0 = Disable MASTER-SLAVE Manual \n configuration value RW 0 \n9.11 MASTER-\nSLAVE  \nManual Config \nValue 1 = Configure PHY as MASTER during \n MASTER-SLAVE negotiation \n0 = Configure PHY as SLAVE during MASTER-\n SLAVE negotiation \nThis bit is ignored if MASTER-SLAVE Manual \nConfig is disabled (register 9.12 = 0). RW 0 \n9.10 Port Type 1 = Indicate the preference to operate as \n multiport device (MASTER)  \n0 = Indicate the preference to operate as single-\n port device ( SLAVE ) \nThis bit is valid only if the MASTER-SLAVE \nManual Config Enable bit is disabled (register \n9.12 = 0). RW 0 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 35 M9999-091010-1.1\n Address Name Description Mode(1) Default \n9.9 1000Base-T \nFull-Duplex 1 = Advertise PHY is 1000Base-T full-duplex \n capable \n0 = Advertise PHY is not 1000Base-T full-\n duplex capable RW 1 \n9.8 1000Base-T \nHalf-Duplex 1 = Advertise PHY is 1000Base-T half-duplex \n capable \n0 = Advertise PHY is not 1000Base-T half-\n duplex capable RW Hardware Setting \n9.7:0 Reserved Write as 0, ignore on read RO  \nRegister 10 (Ah) – 1000Base-T Status  \n10.15 MASTER-\nSLAVE  \nconfiguration \nfault 1 = MASTER-SLAVE configuration fault \n detected \n0 = No MASTER-SLAVE configuration fault \n detected RO/LH/SC 0 \n10.14 MASTER-\nSLAVE  \nconfiguration \nresolution 1 = Local PHY configuration resolved to \n MASTER \n0 = Local PHY configuration resolved to  \n SLAVE RO 0 \n10.13 Local  \nReceiver \nStatus 1 = Local Receiver OK (loc_rcvr_status = 1) \n0 = Local Receiver not OK (loc_rcvr_status = 0) RO 0 \n10.12 Remote \nReceiver \nStatus 1 = Remote Receiver OK (rem_rcvr_status = 1) \n0 = Remote Receiver not OK (rem_rcvr_status \n = 0) RO 0 \n10.11 LP 1000T FD 1 = Link Partner is capable of 1000Base-T full-\n duplex \n0 = Link Partner is not capable of 1000Base-T \n full-duplex RO 0 \n10.10 LP 1000T HD 1 = Link Partner is capable of 1000Base-T half-\n duplex \n0 = Link Partner is not capable of 1000Base-T \n half-duplex RO 0 \n10.9:8 Reserved  RO 00 \n10.7:0 Idle Error \nCount Cumulative count of errors detected when \nreceiver is receiving idles and \nPMA_TXMODE.indicate = SEND_N. \nThe counter is incremented every symbol \nperiod that rxerror_status = ERROR. RO/SC 0000_0000 \nRegister 11 (Bh) – Extended Register – Control \n11.15 Extended \nRegister –  \nread/write \nselect 1 = Write Extended Register \n0 = Read Extended Register RW 0 \n11.14:9 Reserved  RW 000_000 \n11.8 Extended \nRegister – \npage Select page for Extended Register RW 0 \n11.7:0 Extended \nRegister –\naddress Select Extended Register Address \n \n RW 0000_0000 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 36 M9999-091010-1.1\n Address Name Description Mode(1) Default \nRegister 12 (Ch) – Extended Register – Data Write  \n12.15:0 Extended \nRegister – write 16-bit value to write to Extend Register Address \nin register 11 (Bh) bits [7:0] RW 0000_0000_0000_0000 \nRegister 13 (Dh) – Extended Register – Data Read \n13.15:0 Extended \nRegister – read 16-bit value read from Extend Register Address \nin register 11 (Bh) bits [7:0] \n  RO 0000_0000_0000_0000 \nRegister 15 (Fh) – Extended – MII Status \n15.15 1000Base-X \nFull-duplex 1 = PHY able to perform 1000Base-X \n full-duplex 0 = PHY not able to perform 1000Base-X \n full-duplex RO 0 \n15.14 1000Base-X \nHalf-duplex 1 = PHY able to perform 1000Base-X \n half-duplex \n0 = PHY not able to perform 1000Base-X \n half-duplex RO 0 \n15.13 1000Base-T \nFull-duplex 1 = PHY able to perform 1000Base-T \n full-duplex 1000BASE-X 0 = PHY not able to perform 1000Base-T \n full-duplex RO 1 \n15.12 1000Base-T \nHalf-duplex 1 = PHY able to perform 1000Base-T \n half-duplex \n0 = PHY not able to perform 1000Base-T \n half-duplex RO 1 \n15.11:0 Reserved Ignore when read RO - \nNote: \n1. RW = Read/Write. \n RO = Read only. \n SC = Self-cleared. \n LH = Latch high.  LL = Latch low. \n \nVendor Specific Registers \nAddress Name Description Mode(1) Default \nRegister 17 (11h) – Remote Loopback, LED Mode \n17.15:9 Reserved  RW 0000_001 \n17.8 Remote \nLoopback 1 = Enable Remote Loopback \n0 = Disable Remote Loopback RW 0 \n17.7:6 Reserved  RW 11 \n17.5:4 Reserved  RW 11 \n17.3 LED Test \nEnable 1 = Enable LED test mode \n0 = Disable LED test mode RW 0 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 37 M9999-091010-1.1\n Address Name Description Mode(1) Default \n17.2:1 Reserved  RW 00 \n17.0 Reserved  RO 0 \nRegister 18 (12h) – LinkMD® – Cable Diagnostic \n18.15 Reserved  RW/SC 0 \n18.14:8 Reserved  RW 000_0000 \n18.7:0 Reserved   RO 0000_0000 \nRegister 19 (13h) – Digital PMA/PCS Status \n19.15:3 Reserved  RO/LH 0000_0000_0000_0 \n19.2 1000Base-T \nLink Status 1000 Base-T Link Status  \n1 = Link status is OK 0 = Link status is not OK RO 0 \n19.1 100Base-TX \nLink Status 100 Base-TX Link Status  \n1 = Link status is OK 0 = Link status is not OK RO 0 \n19.0 Reserved  RO 0 \nRegister 21 (15h) – RXER Counter \n21.15:0 RXER Counter Receive error counter for Symbol Error frames RO/RC 0000_0000_0000_0000 \nRegister 27 (1Bh) – Interrupt Control/Status \n27.15 Jabber \nInterrupt \nEnable 1 = Enable Jabber Interrupt \n0 = Disable Jabber Interrupt RW 0 \n27.14 Receive Error \nInterrupt \nEnable 1 = Enable Receive Error Interrupt \n0 = Disable Receive Error Interrupt RW 0 \n27.13 Page Received \nInterrupt \nEnable 1 = Enable Page Received Interrupt \n0 = Disable Page Received Interrupt RW 0 \n27.12 Parallel Detect \nFault Interrupt \nEnable 1 = Enable Parallel Detect Fault Interrupt \n0 = Disable Parallel Detect Fault Interrupt RW 0 \n27.11 Link Partner \nAcknowledge  \nInterrupt \nEnable 1 = Enable Link Partner Acknowledge Interrupt \n0 = Disable Link Partner Acknowledge \n Interrupt RW 0 \n27.10 Link Down \nInterrupt \nEnable 1 = Enable Link Down Interrupt \n0 = Disable Link Down Interrupt RW 0 \n27.9 Remote Fault \nInterrupt \nEnable 1 = Enable Remote Fault Interrupt \n0 = Disable Remote Fault Interrupt RW 0 \n27.8 Link Up  \nInterrupt \nEnable 1 = Enable Link Up Interrupt \n0 = Disable Link Up Interrupt RW 0 \n27.7 Jabber  \nInterrupt 1 = Jabber occurred \n0 = Jabber did not occurred RO/RC 0 \n27.6 Receive Error   \nInterrupt 1 = Receive Error occurred \n0 = Receive Error did not occurred RO/RC 0 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 38 M9999-091010-1.1\n Address Name Description Mode(1) Default \n27.5 Page Receive \nInterrupt 1 = Page Receive occurred \n0 = Page Receive did not occurred RO/RC 0 \n27.4 Parallel Detect \nFault Interrupt 1 = Parallel Detect Fault occurred \n0 = Parallel Detect Fault did not occurred RO/RC 0 \n27.3 Link Partner \nAcknowledge \nInterrupt 1 = Link Partner Acknowledge occurred \n0 = Link Partner Acknowledge did not occurred RO/RC 0 \n27.2 Link Down \nInterrupt 1 = Link Down occurred \n0 = Link Down did not occurred RO/RC 0 \n27.1 Remote Fault \nInterrupt 1 = Remote Fault occurred \n0 = Remote Fault did not occurred RO/RC 0 \n27.0 Link Up \nInterrupt 1 = Link Up occurred \n0 = Link Up did not occurred  RO/RC 0 \nRegister 28 (1Ch) – Digital Debug Control 1 \n28.15:8 Reserved  RW 0000_0000 \n28.7 mdi_set mdi_set has no function when swapoff (reg28.6) \nis de-asserted. \n1 = When swapoff is asserted, if mdi_set is \n asserted, chip will operate at MDI mode. \n0 = When swapoff is asserted, if mdi_set is de-\n asserted, chip will operate at MDI-X mode. RW 0 \n28.6 swapoff 1 = Disable auto crossover function \n0 = Enable auto crossover function RW 0 \n28.5:1 Reserved  RW 00_000 \n28.0 PCS Loopback 1 = Enable 10Base-T and 100Base-TX \n Loopback for register 0h bit 14. \n0 = normal function  RW 0 \nRegister 31 (1Fh) – PHY Control  \n31.15 Reserved  RW 0 \n31.14 Interrupt Level 1 = Interrupt pin active high \n0 = Interrupt pin active low RW 0 \n31.13:12 Reserved  RW 00 \n31.11:10 Reserved  RO/LH/RC 00 \n31.9 Enable Jabber 1 = Enable jabber counter \n0 = Disable jabber counter RW 1 \n31.8:7 Reserved  RW 00 \n31.6 Speed status \n1000Base-T 1 = Indicate chip final speed status at \n 1000Base-T RO 0 \n31.5 Speed status \n100Base-TX 1 = Indicate chip final speed status at  \n 100Base-TX RO 0 \n31.4 Speed status \n10Base-T 1 = Indicate chip final speed status at     \n 10Base-T RO 0 \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 39 M9999-091010-1.1\n Address Name Description Mode(1) Default \n31.3 Duplex status Indicate chip duplex status \n1 = Full-duplex \n0 = Half-duplex RO 0 \n31.2 1000Base-T \nMater/Slave \nstatus 1 = Indicate 1000Base-T Master mode \n0 = Indicate 1000Base-T Slave mode RO 0 \n31.1 Software \nReset 1 = Reset chip, except all registers  \n0 = Disable reset RW 0 \n31.0 Link Status \nCheck Fail 1 = Fail \n0 = Not Failing RO 0 \nNote: \n1. RW = Read/Write. \nRC = Read-cleared \n RO = Read only. \n SC = Self-cleared. \n LH = Latch high. \n  \nExtended Registers \nAddress Name Description Mode(1) Default \nRegister 257 (101h) – Strap Status \n257.15:6 Reserved  RO  \n257.5 CLK125_EN \nstatus 1 = CLK125_EN strap-in is enabled \n0 = CLK125_EN strap-in is disabled RO  \n257.4:0 PHYAD[4:0] \nstatus Strapped-in value for PHY Address \n RO  \nRegister 258 (102h) – Operation Mode Strap Override \n258.15:8 Reserved  RW  \n258.7 Tri-state all \ndigital I/Os 1 = Tri-state all digital I/Os for further power \n saving during software power down RW 0 \n \n258.6:5 Reserved  RW  \n258.4 NAND Tree \noverride 1 = Override strap-in for NAND Tree mode RW  \n258.3:2 Reserved  RW  \n258.1 GMII / MII \noverride 1 = Override strap-in for GMII / MII mode RW  \n258.0 Reserved  RW  \nRegister 259 (103h) – Operation Mode Strap Status \n259.15:5 Reserved  RO  \n259.4 NAND Tree \nstrap-in status 1 = Strap to NAND tree mode RO  \n259.3:2 Reserved  RO  \n259.1 GMII / MII \nstrap-in status 1 = Strap to GMII / MII mode RO  \n259.0 Reserved  RO  \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 40 M9999-091010-1.1\n Address Name Description Mode(1) Default \nRegister 263 (107h) – Analog Test Register \n263.15 LDO disable 1 = LDO controller disable \n0 = LDO controller enable RW 0 \n263.14:9 Reserved  RW 000_000 \n263.8 Low frequency \noscillator mode 1 = Low frequency oscillator mode enable \n0 = Low frequency oscillator mode disable \nUse for further power saving during software \npower down. RW 0 \n263.7:0 Reserved  RW 0000_0000 \nNote: \n1. RW = Read/Write. \n RO = Read only. \n \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 41 M9999-091010-1.1\n Absolute Maximum Ratings(1) \nSupply Voltage  \n (DVDDL, AVDDL, AVDDL_PLL)....... -0.5V to V DD+10% \n (AVDDH).......................................... -0.5V to V DD +10% \n (DVDDH).......................................... -0.5V to V DD +10% \nInput Voltage (all inputs) ........................ -0.5V to V DD +10% \nOutput Voltage (all outputs) ................... -0.5V to V DD +10% \nLead Temperature (soldering, 10sec.)....................... 260°C Storage Temperature (T\ns) ..........................-55°C to +150°C \n \n  Operating Ratings(2) \nSupply Voltage   (DVDDL, AVDDL, AVDDL_PLL).... +1.140V to +1.260V \n (AVDDH)........................................ +3.135V to +3.465V \n (DVDDH @ 3.3V) .......................... +3.135V to +3.465V  (DVDDH @ 2.5V) .......................... +2.375V to +2.625V Ambient Temperature  (T\nA Commercial:  KSZ9021GN)................ 0°C to +70°C \n (T A Industrial:  KSZ9021GNI) ............... −40°C to +85°C \nMaximum Junction Temperature (T J Max) ................. 125°C \nThermal Resistance ( θJA) ....................................41.54°C/W \nThermal Resistance ( θJC) ....................................19.78°C/W \n \nElectrical Characteristics(3) \nSymbol Parameter Condition Min Typ Max Units \nSupply Current – Core / Digital I/Os \n1000Base-T Link-up (no traffic)  522  mA \n1000Base-T Full-duplex @ 100% utilization  555  mA \n100Base-TX Link-up (no traffic)  159  mA \n100Base-TX Full-duplex @ 100% utilization  160  mA \n10Base-T Link-up (no traffic)  7  mA \n10Base-T Full-duplex @ 100% utilization  7  mA \nPower-saving Mode (cable un-plugged)  15  mA \nSoftware Power Down Mode (register 0.11 =1)  1.3  mA ICORE 1.2V total of: \n DVDDL (1.2V digital core) + \n AVDDL (1.2V analog core) + \n AVDDL_PLL (1.2V for PLL) \nChip Power Down Mode \n(strap-in pins MODE[3:0] = 0111)  1.2  mA \n1000Base-T Link-up (no traffic)  22  mA \n1000Base-T Full-duplex @ 100% utilization  39  mA \n100Base-TX Link-up (no traffic)  15  mA \n100Base-TX Full-duplex @ 100% utilization  19  mA \n10Base-T Link-up (no traffic)  10  mA \n10Base-T Full-duplex @ 100% utilization  11  mA \nPower-saving Mode (cable un-plugged)  14  mA \nSoftware Power Down Mode (register 0.11 =1)  8  mA IDVDDH_2.5  2.5V for digital I/Os \n \n(GMII / MII operating @ 2.5V) \nChip Power Down Mode \n(strap-in pins MODE[3:0] = 0111)  1  mA \n1000Base-T Link-up (no traffic)  32  mA \n1000Base-T Full-duplex @ 100% utilization  57  mA \n100Base-TX Link-up (no traffic)  19  mA \n100Base-TX Full-duplex @ 100% utilization  25  mA \n10Base-T Link-up (no traffic)  13  mA \n10Base-T Full-duplex @ 100% utilization  17  mA \nPower-saving Mode (cable un-plugged)  23  mA \nSoftware Power Down Mode (register 0.11 =1)  16  mA IDVDDH_3.3  3.3V for digital I/Os \n \n(GMII / MII operating @ 3.3V) \nChip Power Down Mode \n(strap-in pins MODE[3:0] = 0111)  1  mA \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 42 M9999-091010-1.1\n Symbol Parameter Condition Min Typ Max Units \nSupply Current – Transceiver (equivalent to current draw through external  transformer center taps for PHY transceivers with \ncurrent-mode transmit drivers) \n1000Base-T Link-up (no traffic)  74  mA \n1000Base-T Full-duplex @ 100% utilization  73  mA \n100Base-TX Link-up (no traffic)  28  mA \n100Base-TX Full-duplex @ 100% utilization  28  mA \n10Base-T Link-up (no traffic)  35  mA \n10Base-T Full-duplex @ 100% utilization  43  mA \nPower-saving Mode (cable un-plugged)  35  mA \nSoftware Power Down Mode (register 0.11 =1)  2  mA IAVDDH  3.3V for transceiver \nChip Power Down Mode \n(strap-in pins MODE[3:0] = 0111)  1  mA \nCMOS Inputs \nDVDDH = 3.3V 2.0   V VIH Input High Voltage \nDVDDH = 2.5V 1.8   V \nDVDDH = 3.3V   0.8 V VIL Input Low Voltage \nDVDDH = 2.5V   0.7 V \nIIN Input Current V IN = GND ~ V DDIO  -10 10 µA \nCMOS Outputs \nDVDDH = 3.3V 2.4   V VOH Output High Voltage \nDVDDH = 2.5V 2.0   V \nDVDDH = 3.3V   0.4 V VOL Output Low Voltage \nDVDDH = 2.5V   0.4 V \n|Ioz| Output Tri-State Leakage    10 µA \nLED Outputs  \nILED Output Drive Current Each LED pin (LED1, LED2)  8  mA \n100Base-TX Transmit (measured differentially after 1:1 transformer) \nVO Peak Differential Output Voltage 100Ω termination across differential output 0.95  1.05 V \nVIMB Output Voltage Imbalance 100Ω termination across differential output   2 % \ntr, tf Rise/Fall Time  3  5 ns \n Rise/Fall Time Imbalance  0  0.5 ns \n Duty Cycle Distortion    ± 0.25 ns \n Overshoot    5 % \nVSET Reference Voltage of I SET R(I SET) = 4.99K  0.535  V \n Output Jitter Peak-to-peak  0.7 1.4 ns \n10Base-T Transmit (measured differentially after 1:1 transformer)  \nVP Peak Differential Output Voltage 100Ω termination across differential output 2.2  2.8 V \n Jitter Added Peak-to-peak   3.5 ns \n Harmonic Rejection Transmit all-one signal sequence \n  -31  dB \n10Base-T Receive  \nVSQ Squelch Threshold 5MHz square wave 300 400  mV \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 43 M9999-091010-1.1\n Notes: \n1. Exceeding the absolute maximum rating may damage the device.  Stresses greater than the absolute maximum rating may cause pe rmanent \n damage to the device.  Operation of the device at these or any other conditions above those specified in the operating section s of this specification \n is not implied.  Maximum conditions for extended periods may affect reliability. \n2. The device is not guaranteed to function outside its operating rating. \n3. T A = 25 °C.  Specification is for packaged product only. \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 44 M9999-091010-1.1\n Timing Diagrams \nGMII Transmit Timing \n \n \n \nFigure 6.  GMII Transmit Timing – Data Input to PHY \n \n  \nTiming Parameter Description Min Typ Max Unit \n1000Base-T  \ntcyc GTX_CLK period 7.5 8.0 8.5 ns \ntsu TX_EN, TXD[7:0], TX_ER setup time to \nrising edge of GTX_CLK 2.0   ns \nthd TX_EN, TXD[7:0], TX_ER hold time from \nrising edge of GTX_CLK 0   ns \nthi GTX_CLK high pulse width 2.5   ns \ntlo GTX_CLK low pulse width 2.5   ns \ntr GTX_CLK rise time   1.0 ns \ntf GTX_CLK fall time   1.0 ns \n \nTable 9.  GMII Transmit Timing Parameters \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 45 M9999-091010-1.1\n GMII Receive Timing \n \n \n \nFigure 7.  GMII Receive Timing – Data Input to MAC \n \n  \nTiming Parameter Description Min Typ Max Unit \n1000Base-T  \ntcyc RX_CLK period 7.5 8.0 8.5 ns \ntsu RX_DV, RXD[7:0], RX_ER setup time to \nrising edge of RX_CLK 2.5   ns \nthd RX_DV, RXD[7:0], RX_ER hold time from \nrising edge of RX_CLK 0.5   ns \nthi RX_CLK high pulse width 2.5   ns \ntlo RX_CLK low pulse width 2.5   ns \ntr RX_CLK rise time   1.0 ns \ntf RX_CLK fall time   1.0 ns \n \nTable 10.  GMII Receive Timing Parameters \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 46 M9999-091010-1.1\n MII Transmit Timing \n \n \n \nFigure 8.  MII Transmit Timing – Data Input to PHY \n \n  \nTiming Parameter Description Min Typ Max Unit \n10Base-T \ntcyc TX_CLK period  400  ns \ntsu TX_EN, TXD[3:0], TX_ER setup time to \nrising edge of TX_CLK 15   ns \nthd TX_EN, TXD[3:0], TX_ER hold time from \nrising edge of TX_CLK 0   ns \nthi TX_CLK high pulse width 140  260 ns \ntlo TX_CLK low pulse width 140  260 ns \n100Base-TX  \ntcyc TX_CLK period  40  ns \ntsu TX_EN, TXD[3:0], TX_ER setup time to \nrising edge of TX_CLK 15   ns \nthd TX_EN, TXD[3:0], TX_ER hold time from \nrising edge of TX_CLK 0   ns \nthi TX_CLK high pulse width 14  26 ns \ntlo TX_CLK low pulse width 14  26 ns \n \nTable 11.  MII Transmit Timing Parameters \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 47 M9999-091010-1.1\n MII Receive Timing \n \n \n \nFigure 9.  MII Receive Timing – Data Input to MAC \n \n  \nTiming Parameter Description Min Typ Max Unit \n10Base-T \ntcyc RX_CLK period  400  ns \ntsu RX_DV, RXD[3:0], RX_ER setup time to \nrising edge of RX_CLK 10   ns \nthd RX_DV, RXD[3:0], RX_ER hold time from \nrising edge of RX_CLK 10   ns \nthi RX_CLK high pulse width 140  260 ns \ntlo RX_CLK low pulse width 140  260 ns \n100Base-TX  \ntcyc RX_CLK period  40  ns \ntsu RX_DV, RXD[3:0], RX_ER setup time to \nrising edge of RX_CLK 10   ns \nthd RX_DV, RXD[3:0], RX_ER hold time from \nrising edge of RX_CLK 10   ns \nthi RX_CLK high pulse width 14  26 ns \ntlo RX_CLK low pulse width 14  26 ns \n \nTable 12.  MII Receive Timing Parameters \n \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 48 M9999-091010-1.1\n Auto-Negotiation Timing \n \nAUTO-NEGOTIATION\nFAST LINK PULSE (FLP) TIMING\ntPWTX+/TX-CLOCK\nPULSEDATAPULSECLOCK\nPULSE\ntPW\ntCTD\ntCTCtFLPW\ntBTBTX+/TX-\nDATA\nPULSEFLP \nBURSTFLP \nBURST\n \n \nFigure 10.  Auto-Negotiation Fast Link Pulse (FLP) Timing \n \n  \nTiming Parameter Description Min Typ Max Units \ntBTB FLP Burst to FLP Burst 8 16 24 ms \ntFLPW FLP Burst width  2  ms \ntPW Clock/Data Pulse width  100  ns \ntCTD Clock Pulse to Data Pulse 55.5 64 69.5 µs \ntCTC Clock Pulse to Clock Pulse 111 128 139 µs \n Number of Clock/Data Pulse per \nFLP Burst 17  33  \n \nTable 13.  Auto-Negotiation Fast Link Pulse (FLP) Timing Parameters \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 49 M9999-091010-1.1\n MDC/MDIO Timing \n \n \n \nFigure 11.  MDC/MDIO Timing \n \n \n \nTiming Parameter Description Min Typ Max Unit \ntP MDC period  400  ns \nt1MD1 MDIO (PHY input) setup to rising edge of MDC 10   ns \ntMD2 MDIO (PHY input) hold from rising edge of MDC 10   ns \ntMD3 MDIO (PHY output) delay from rising edge of MDC 0   ns \n \nTable 14.  MDC/MDIO Timing Parameters \n \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 50 M9999-091010-1.1\n Reset Timing \nThe recommended KSZ9021GN power-up reset timing is summarized in the following figure and table. \n \n \n \nFigure 12.  Reset Timing \n \n  \nParameter Description Min Max Units \ntsr Stable supply voltage to reset high 10  ms \n \nTable 15.  Reset Timing Parameters \n After the de-assertion of reset, it is recommended to wait a minimum of 100µs before starting programming on the MIIM \n(MDC/MDIO) Interface. \n \nReset Circuit \nThe following reset circuit is recommended for powering up the KSZ9021GN if reset is triggered by the power supply.  \nKSZ9021GNDVDDH\nD1D1: 1N4148\nR 10K\nC 10uFRESET_N\n \n \nFigure 13.  Recommended Reset Circuit \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 51 M9999-091010-1.1\n The following reset circuit is recommended for applications where reset is driven by another device (e.g., CPU or FPGA). \nAt power-on-reset, R, C and D1 provide the necessary ramp rise time to reset the KSZ9021GN device. The RST_OUT_N \nfrom CPU/FPGA provides the warm reset after power up. \n \n \n \nFigure 14.  Recommended Reset Circuit for Interfacing with CPU/FPGA Reset Output. \n \nReference Circuits – LED Strap-in Pins \nThe pull-up and pull-down reference circuits for the LED2/PHYAD1 and LED1/PHYAD0 strapping pins are shown in the \nfollowing figure. \n \n \n \nFigure 15.  Reference Circuits for LED Strapping Pins \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 52 M9999-091010-1.1\n Reference Clock – Connection and Selection \nA crystal or external clock source, such as an oscillator, is used to provide the reference clock for the KSZ9021GN. The \nreference clock is 25 MHz for all operating modes of the KSZ9021GN. \nThe following figure and table shows the reference clock connection to XI (pin 61) and XO (pin 60) of the KSZ9021GN, \nand the reference clock selection criteria. \n \n \n \nFigure 16.  25MHz Crystal / Oscillator Reference Clock Connection \n \n \nCharacteristics Value Units \nFrequency 25 MHz \nFrequency tolerance (max) ±50 ppm \n \nTable 16.  Reference Crystal/Clock Selection Criteria \n \n \nMagnetics Specification \nA 1:1 isolation transformer is required at the line interface. An isolation transformer with integrated common-mode chokes \nis recommended for exceeding FCC requirements. \nThe following tables provide recommended magnetic characteristics and a list of qualified magnetics for the KSZ9021GN.  \nParameter Value Test Condition \nTurns ratio 1 CT : 1 CT  \nOpen-circuit inductance (min.) 350μH 100mV, 100kHz, 8mA \nInsertion loss (max.) 1.0dB 0MHz – 100MHz \nHIPOT (min.) 1500Vrms  \n \nTable 17.  Magnetics Selection Criteria \n \n \nMagnetic Manufacturer Part Number Auto MDI-X Number of Port \nPulse H5007NL Yes 1 \nTDK TLA-7T101LF Yes 1 \n \nTable 18.  Qualified Single Port 10/100/1000 Magnetics \nMicrel, Inc. KSZ9021GN\n \n  \nSeptember 2010 53 M9999-091010-1.1\n Package Information \n \n \n \n \n64-Pin (8mm x 8mm) QFN\n \n    \n  \n \nMICREL, INC.   2180 FORTUNE DRIVE   SAN JOSE, CA  95131   USA \nTEL +1 (408) 944-0800  FAX +1 (408) 474-1000  WEB http://www.micrel.com  \n \nMicrel makes no representations or warranties with respect to the accuracy or completeness of the information furnished in this  data sheet. This \ninformation is not intended as a warranty and Micrel does not assume responsibility for its use.  Micrel reserves the right to change circuitry, \nspecifications and descriptions at any time without notice.  No license, whether express, implied, arising by estoppel or other wise, to any intellectual \nproperty rights is granted by this document.  Except as provided in Micrel’s terms and conditions of sale for such products, Mi crel assumes no liability \nwhatsoever, and Micrel disclaims any express or implied warranty relating to the sale and/or use of Micrel products including l iability or warranties \nrelating to fitness for a particular purpose, merchantability, or infringement of any patent, copyright or other intellectual p roperty right. \n \nMicrel Products are not designed or authorized for use as components in life support appliances, devices or systems where malfu nction of a product \ncan reasonably be expected to result in personal injury. Life support devices or systems are devices or systems that (a) are in tended for surgical \nimplant into the body or (b) support or sustain life, and whose failure to perform can be reasonably expected to result in a si gnificant injury to the user. \nA Purchaser’s use or sale of Micrel Products for use in life support appliances, devices or systems is a Purchaser’s own risk a nd Purchaser agrees to \nfully indemnify Micrel for any damages resulting from such use or sale. \n \n© 2009 Micrel, Incorporated.  \n'}]
!==============================================================================!
### Component Summary: KSZ9021GNI

**Description:**
The KSZ9021GNI is a Gigabit Ethernet Physical Layer Transceiver designed for high-speed data transmission and reception over standard CAT-5 unshielded twisted pair (UTP) cables. It supports triple speed Ethernet standards (10Base-T, 100Base-TX, and 1000Base-T) and provides a GMII/MII interface for connection to Gigabit Ethernet MACs in processors and switches. The device integrates several features to simplify board design and enhance performance, including on-chip termination resistors and a low-dropout (LDO) controller.

**Key Specifications:**
- **Voltage Ratings:**
  - Core Voltage: 1.2V (requires external FET or regulator)
  - I/O Voltage: 3.3V or 2.5V
  - Transceiver Voltage: 3.3V

- **Current Ratings:**
  - 1000Base-T Link-up (no traffic): 522 mA
  - 100Base-TX Link-up (no traffic): 159 mA
  - 10Base-T Link-up (no traffic): 7 mA
  - Power-saving Mode (cable unplugged): 15 mA

- **Power Consumption:**
  - 1000Base-T Full-duplex @ 100% utilization: 555 mA
  - 100Base-TX Full-duplex @ 100% utilization: 160 mA
  - 10Base-T Full-duplex @ 100% utilization: 7 mA

- **Operating Temperature Range:**
  - Commercial: 0°C to 70°C
  - Industrial: -40°C to 85°C

- **Package Type:**
  - 64-pin QFN (8mm x 8mm)

- **Special Features:**
  - Integrated LDO controller for core voltage
  - On-chip termination resistors
  - Auto-negotiation for link speed and duplex mode
  - LinkMD® TDR-based cable diagnostics
  - Loopback modes for diagnostics
  - Automatic MDI/MDI-X crossover
  - Jumbo frame support up to 16KB
  - Programmable LED outputs for link, activity, and speed

- **Moisture Sensitive Level (MSL):**
  - MSL Level 1 (JEDEC J-STD-020E)

**Typical Applications:**
The KSZ9021GNI is suitable for a variety of applications, including:
- Network Attached Storage (NAS)
- Gigabit LAN on Motherboards (GLOM)
- Broadband Gateways
- Gigabit SOHO/SMB Routers
- IPTV and IP Set-top Boxes
- Game Consoles
- Media Converters
- Laser/Network Printers
- Network Servers

This transceiver is ideal for environments requiring reliable high-speed Ethernet connectivity, making it a versatile choice for both commercial and industrial applications.