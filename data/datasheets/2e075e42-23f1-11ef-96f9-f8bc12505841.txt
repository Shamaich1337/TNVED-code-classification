[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of STMPE811QTR production of ST MICROELECTRONICS from the text:April 2011 Doc ID 14489 Rev 5 1/66\n66STMPE811\nS-Touch® advanced resistive touchscreen controller\nwith 8-bit GPIO expander\nFeatures\n■8 GPIOs \n■1.8 - 3.3 V operating voltage\n■Integrated 4-wire touchscreen controller\n■Interrupt output pin\n■Wakeup feature on each I/O\n■SPI and I2C interface\n■Up to 2 devices sharing the same bus in \nI2C mode (1 address line)\n■8-input 12-bit ADC\n■128-depth buffer touchscreen controller\n■Touchscreen movement detection algorithm\n■25 kV air-gap ESD protection (system level)\n■4 kV HBM ESD protection (device level)\nApplications \n■Portable media players \n■Game consoles\n■Mobile and smartphones\n■GPSDescription\nThe STMPE811 is a GPIO (general purpose input/output) port expander able to interface a main digital ASIC via the two-line bidirectional bus (I\n2C). A separate GPIO expander is often used in \nmobile multimedia platforms to solve the problems of the limited amount of GPIOs typically available on the digital engine.\nThe STMPE811 offers great flexibility, as each I/O \ncan be configured as input, output or specific functions. The device has been designed with very low quiescent current and includes a wakeup feature for each I/O, to optimize the power consumption of the device.\nA 4-wire touchscreen controller is built into the \nSTMPE811. The touchscreen controller is enhanced with a movement tracking algorithm (to avoid excessive data), a 128 x 32 bit buffer and programmable active window feature.\n         \n         \n         \n         QFN16\n(3x3)\nTable 1. Device summary\nOrder code Package Packaging\nSTMPE811QTR QFN16 Tape and reel\nwww.st.com\nContents STMPE811\n2/66 Doc ID 14489 Rev 5Contents\n1 STMPE811 functional overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\n2 Pin configuration and f unctions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7\n2.1 Pin functions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8\n3 I2C and SPI interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9\n3.1 Interface selection  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9\n4 I2C interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\n4.1 I2C features  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12\n4.2 Data input . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13\n4.3 Read operation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144.4 Write operations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14\n5 SPI interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.1 SPI protocol definition  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.1.1 Register reading  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15\n5.1.2 Register write . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165.1.3 Termination of data transfer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16\n5.2 SPI timing modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n5.2.1 SPI timing definition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\n6 STMPE811 registers  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19\n7 System and identificati on registers . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22\n8 Interrupt system  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25\n9 Analog-to-digital converte r  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29\n10 Touchscreen controller . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\n10.1 Driver and switch control unit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33\n11 Touchscreen controller programming sequence . . . . . . . . . . . . . . . . . 46\nSTMPE811 Contents\nDoc ID 14489 Rev 5 3/6612 Temperature sensor  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48\n13 GPIO controller  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50\n13.0.1 Power supply . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52\n13.0.2 Power-up reset (POR)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53\n14 Maximum rating . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\n14.1 Recommended operating conditions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55\n15 Electrical specifications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56\n16 Package mechanical data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58\n17 Revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64\nList of tables STMPE811\n4/66 Doc ID 14489 Rev 5List of tables\nTable 1. Device summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 1\nTable 2. Pin assignments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7\nTable 3. Pin configuration for IN2, IN3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8\nTable 4. Pin configuration for X+, Y+, X-, Y-. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 8\nTable 5. Interface selection pins . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 9\nTable 6. I2C address  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . 10\nTable 7. I2C timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11\nTable 8. Operating modes  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 13\nTable 9. SPI timing modes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\nTable 10. SPI timing specification. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17\nTable 11. Register summary map table . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . 19\nTable 12. System and identification registers map . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2 2\nTable 13. ADC controller register summary table. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2 9\nTable 14. ADC conversion time  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32\nTable 15. Touchscreen controller register summary table . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35Table 16. Touchscreen controller DATA register . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4 3\nTable 17. Touchscreen parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 48\nTable 18. GPIO control registers  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 50\nTable 19. Absolute maximum ratings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54\nTable 20. Power consumption  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55\nTable 21. DC electrical characteristics (-40 °C to  85 °C) all GPIOs comply to JEDEC standard JESD-\n8-7) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . 56\nTable 22. AC electrical characteristics (-40 °C to 85 °C)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56Table 23. ADC specification  (-40 °C to 85 °C) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57\nTable 24. Switch drivers specification. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57\nTable 25. Voltage reference specification. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 57\nTable 26. Package mechanical data for QFN16 (3 x 3 x 1 mm) - 0.50 pitch  . . . . . . . . . . . . . . . . . . . 60Table 27. Exposed pad variation  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60\nTable 28. Footprint dimensions  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . 61\nTable 29. Document revision history  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64\nSTMPE811 List of figures\nDoc ID 14489 Rev 5 5/66List of figures\nFigure 1. STMPE811 functional block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6\nFigure 2. STMPE811 pin configuration (top through view)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7Figure 3. STMPE811 interface. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9\nFigure 4. STMPE811 I2C interface  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . 10\nFigure 5. I\n2C timing diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\nFigure 6. Read and write modes (random and sequential) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13Figure 7. SPI timing specification. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18\nFigure 8. Interrupt system diagram  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . 25\nFigure 9. Touchscreen controller block diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3 3\nFigure 10. Window tracking . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34\nFigure 11. Sampling. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  . . . . . . . . 34\nFigure 12. Package outline for QFN16 (3 x 3 x 1 mm) - 0.50 pitch . . . . . . . . . . . . . . . . . . . . . . . . . . . 59Figure 13. Recommended footprint . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61\nFigure 14. Carrier tape for QFN16 (3 x 3 x 1 mm) - 0.50 pitch  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62Figure 15. Reel information for QFN16 (3 x 3 x 1 mm) - 0.50 pitch . . . . . . . . . . . . . . . . . . . . . . . . . . . 63\nSTMPE811 functional overview STMPE811\n6/66 Doc ID 14489 Rev 51 STMPE811 functional overview\nThe STMP811 consists of the following blocks:\n● I2C and SPI interface\n● Analog-to-digital converver (ADC)\n● Touchscreen controller (TSC)\n● Driver and switch control unit\n● Temperature sensor\n● GPIO controller\nFigure 1. STMPE811 functional block diagram\n \n Switche s \nand driver s  \n  \n  \nGND \n SCLK/CLK  \n SDAT/ CSA0/Data out \n \nVCC \n INT \n  ADC , T SC\n \n \nVREF  \nTherm al \nsense RC o scillator \nData in \nTSC: To uchscreen controller  \n GPIO \ncontroller\nI C / SPI\ninterface2GPIO 0-7\n/ADC IN 0-7\n/MODE\n/REF-, REF+\nSTMPE811 Pin configuration and functions\nDoc ID 14489 Rev 5 7/662 Pin configuration and functions\nFigure 2. STMPE811 pin configuration (top through view)\n         Table 2. Pin assignments\nPin Name Function\n1 Y - Y -/GPIO-7\n2 INT Interrupt output (VCC domain), open drain\n3 A0/Data Out I2C address in Reset, Data out in SPI mode (VCC domain)\n4S C L K I2C/SPI clock (VCC domain)\n5S D A T I2C data/SPI CS (VCC domain)\n6VCC 1.8−3.3 V supply voltage\n7 Data in SPI Data In (VCC domain)\n8 IN0 IN0/GPIO-0 \n9I N 1IN1/GPIO-1/MODE\nIn RESET state, MODE selects the type of serial interface\n"0" - I2C\n"1" - SPI\n10 GND Ground11 IN2 IN2/GPIO-2\n12 IN3 IN3/GPIO-3\n13 X+ X+/GPIO-414 Vio Supply for touchscreen driver and GPIO\n15 Y+ Y+/GPIO-5\n16 X- X-/GPIO-6  \n \n \n \n \n  \n \n  \n16 15 14 13 \n5 6 7 8 \n1 2 3 4 12 11 10 9 \nSTMPE811\nPin configuration and functions STMPE811\n8/66 Doc ID 14489 Rev 52.1 Pin functions\nThe STMPE811 is designed to provide maximum features and flexibility in a very small pin-\ncount package. Most of the pins are multi-functional. Table 3  and Table 4  show how to select \nthe pin’s function.\nTable 3. Pin configuration for IN2, IN3\nPin / control \nregisterGPIO_AF = 1 GPIO_AF = 0\nADC control 1 bit 1 = \ndon’t careADC control 1 bit 1 = 0 ADC control 1 bit 1 = 1\nIN0 GPIO-0 ADC\nIN1 GPIO-1 ADC\nIN2 GPIO-2 ADC External reference +\nIN3 GPIO-3 ADC External reference -\nTable 4. Pin configuration for X+, Y+, X-, Y-\nPin / control \nregisterGPIO_AF = 1 GPIO_AF = 0\nTSC control 1 bit 0 = \ndon’t careTSC control 1 bit 0 = 0 TSC control 1 bit 0 = 1\nX+ GPIO-4 ADC TSC X+\nY+ GPIO-5 ADC TSC Y+\nX- GPIO-6 ADC TSC X-\nY - GPIO-7 ADC TSC Y -\nSTMPE811 I2C and SPI interface\nDoc ID 14489 Rev 5 9/663 I2C and SPI interface\n3.1 Interface selection\nThe STMPE811 interfaces with the host CPU via a I2C or SPI interface. The pin IN_1 allows \nthe selection of interface protocol at reset state. \nFigure 3. STMPE811 interface\n         Table 5. Interface selection pins\nPin I2C function SPI function Reset state\n3 Address 0 Data out CPHA for SPI\n4C L O C K C L O C K −\n5 SDATA CS CPOL_N for SPI\n7 − Data in −\n9M O D E I2C set to ‘0’ Set to ‘1’ for SPISPI I/F\nmodule \nI  C I/F \nmodule DIN  \nDOUT  \nCLK  \nCS  \nSDAT  \nSCLK  \nA0  MUX\nunit \n2\nI2C interface STMPE811\n10/66 Doc ID 14489 Rev 54 I2C interface\nThe addressing scheme of STMPE811 is designed to allow up to 2 devices to be connected \nto the same I2C bus. \nFigure 4. STMPE811 I2C interface\n         \nFor the bus master to communicate to the slave device, the bus master must initiate a Start \ncondition and be followed by the slave device address. Accompanying the slave device address, is a read/write bit (R/W). The bit is set to 1 for read and 0 for write operation. If a match occurs on the slave device address, the corresponding device gives an acknowledge on the SDA during the 9\nth bit time. If there is no match, it deselects itself from the bus by not \nresponding to the transaction.\nFigure 5. I2C timing diagramTable 6. I2C address\nADDR0 Address\n00 x 8 2\n10 x 8 8ADDR0SCLK  \nSDATSCLK  \nSDATGND\nVCC\nSTMPE811\nAI00589SDA\nPtSU:STO tSU:STAtHD:STA\nSRSCL\ntSU:DATtF\ntHD:DATtR\ntHIGH\ntLOWtHD:STA tBUF\nS P\nSTMPE811 I2C interface\nDoc ID 14489 Rev 5 11/66         \n         \nTable 7. I2C timing\nSymbol Parameter Min Typ Max Uni\nfSCL SCL clock frequency 0 − 400 kHz\ntLOW Clock low period 1.3 −− µs\ntHIGH Clock high period 600 −− ns\ntF SDA and SCL fall time − 300 ns\ntHD:STASTART condition hold time (after this \nperiod the first clock is generated)600 −− ns\ntSU:STASTART condition setup time (only relevant \nfor a repeated start period)600 −− ns\ntSU:DAT Data setup time 100 −− ns\ntHD:DAT Data hold time 0 −− µs\ntSU:STO STOP condition setup time 600 −− ns\ntBUFTime the bus must be free before a new \ntransmission can start1.3 −− µs\nI2C interface STMPE811\n12/66 Doc ID 14489 Rev 54.1 I2C features\nThe features that are supported by the I2C interface are listed below:\n● I2C slave device\n● Operates at 1.8 V\n● Compliant to Philips I2C specification version 2.1\n● Supports standard (up to 100 Kbps) and fast (up to 400 Kbps) modes\nStart condition\nA Start condition is iden tified by a falling edge of SDATA while  SCLK is stable at high state. \nA Start condition must precede any data/command transfer. The device continuously monitors for a Start condition and does not respond to any transaction unless one is encountered.\nStop condition\nA Stop condition is identified by a rising edge of SDATA while SCLK is stable at high state. A Stop condition terminates communication between the slave device and the bus master. A read command that is followed by NoAck can be followed by a Stop condition to force the slave device into idle mode. When the slave device  is in idle mode, it is ready to receive the \nnext I\n2C transaction. A Stop condition at the end of a write command stops the write \noperation to registers.\nAcknowledge bit\nThe acknowledge bit is used to indicate a successful byte transfer. The bus transmitter releases the SDATA after sending eight bits of data. During the ninth bit, the receiver pulls \nthe SDATA low to acknowledge the receipt of the eight bits of data. The receiver may leave the SDATA in high state if it does not acknowledge the receipt of the data.\nSTMPE811 I2C interface\nDoc ID 14489 Rev 5 13/664.2 Data input\nThe device samples the data input on SDATA on the rising edge of the SCLK. The SDATA \nsignal must be stable during the rising edge of SCLK and the SDATA signal must change only when SCLK is driven low.\n         \nFigure 6. Read and write modes (random and sequential)Table 8. Operating modes\nMode Byte Programming sequence\nRead ≥1Start, Device address, R/W = 0, Register address to be read\nRestart, Device address, R/W = 1, Data Read, Stop\nIf no Stop is issued, the Data Read can be continuously performed. If \nthe register address falls within t he range that allows an address auto-\nincrement, then the register addres s auto-increments internally after \nevery byte of data being read. \nWrite ≥1Start, Device address, R/W = 0, Register address to be written, Data \nWrite, Stop\nIf no Stop is issued, the Data Writ e can be continuously performed. If \nthe register address falls within the range that allows address auto-\nincrement, then the register addres s auto-increments internally after \nevery byte of data being written in. For those register addresses that \nfall within a non-incremental address range, the address is kept static \nthroughout the entire write operation. Refer to the memory map table \nfor the address ranges that are auto and non-increment.Start\nR/W=0\nAckDevice\nAddressReg\nAddress\nAckDevice\nAddress\nAckR/W=1Data\nRead\nNo Ack\nStopOne byte\nRead\nStart\nR/W=0\nAckDevice\nAddressReg\nAddress\nAck\nRestartDevice\nAddress\nAckR/W=1Data\nRead\nAckMore than one byte\nRead\nAck\nNo Ack\nStopData\nRead + 1Data\nRead + 2Start\nR/W=0\nAckDevice\nAddressReg\nAddress\nAckData\nto be\nwritten\nAck\nStopOne byte\nWrite\nMore than one byte\nRead\nStart\nR/W=0\nAckDevice\nAddressReg\nAddress\nAckData to\nWrite\nAck\nStopData to\nWrite + 2Ack\nAckData to\nWrite + 1\nMaster\nSlave\nAM00775V1\nI2C interface STMPE811\n14/66 Doc ID 14489 Rev 54.3 Read operation\nA write is first performed to load the register address into the Address Counter but without \nsending a Stop condition. Then, the bus master sends a reStart condition and repeats the Device Address with the R/W bit set to 1. The slave device acknowledges and outputs the content of the addressed byte. If no additional data is to be read, the bus master must not acknowledge the byte and terminates the transfer with a Stop condition.\nIf the bus master acknowledges the data byte, then it can continue to perform the data \nreading. To terminate the stream of data bytes, the bus master must not acknowledge the last output byte, and be followed by a Stop condition. If the address of the register written into the Address Counter falls within the range of addresses that has the auto-increment function, the data being read are coming from consecutive addresses, which the internal Address Counter automatically increments after each byte output. After the last memory address, the Address Counter \'rolls-over\' and the device continues to output data from the memory address of 0x00. Similarly, for the regi ster address that falls within a non-increment \nrange of addresses, the output data byte comes from the same address (which is the address referred by the Address Counter).\nAcknowledgement in read operation\nFor the above read command, the slave device waits, after each byte read, for an acknowledgement during the ninth bit time. If the bus master does not drive the SDA to a low state, then the slave device terminates and switches back to its idle mode, waiting for the next command.\n4.4 Write operations\nA write is first performed to load the register address into the Address Counter without sending a Stop condition. After the bus master receives an acknowledgement from the slave device, it may start to send a data byte to the register (referred by the Address Counter). The slave device again acknowledges and the bus master terminates the transfer with a Stop condition.\nIf the bus master needs to write more data, it can continue the write operation without \nissuing the Stop condition. Whether the Address Counter autoincrements or not after each data byte write depends on the address of the register written into the Address Counter. After the bus master writes the last data byte and the slave device acknowledges the receipt of the last data, the bus master may terminate the write operation by sending a Stop condition. When the Address Counter reaches the last memory address, it \'rolls-over\' to the next data byte write.\nSTMPE811 SPI interface\nDoc ID 14489 Rev 5 15/665 SPI interface\nThe SPI (serial peripheral interface) in ST MPE811 uses a 4-wire communication connection \n(DATA IN, DATA OUT, CLK, CS).  In the diagram, “Data in” is referred to as MOSI (master \nout slave in) and “DATA out” is referred to as MISO (master in slave out).\n5.1 SPI protocol definition\nThe SPI follows a byte-sized transfer protocol. A ll transfers begin with an assertion of CS_n \nsignal (falling edge). T he protocol for reading and writin g is different and the selection \nbetween a read and a write cycle is dependent on the first captured bit on the slave device. A \'1\' denotes a read operation and a \'0\' denotes a write operation. The SPI protocol defined in this section is shown in Figure 3 .\nThe following are the main features supported by this SPI implementation.\n● Support of 1 MHz maximum clock frequency.\n● Support for autoincrement of address for both read and write.\n● Full duplex support for read operation.\n● Daisy chain configuration support for write operation.\n● Robust implementation that can filter glitches of up to 50 ns on the CS_n and SCL pins.\n● Support for all 4 modes of SPI as define d by the CPHA, CPOL bits on SPICON.\n5.1.1 Register reading\nThe following steps need to be followed for the register read through the SPI.\n1. Assert CS_n by driving a \'0\' on this pin.2. Drive a \'1\' on the first SCL launch clock on MOSI to select a read operation.3. The next 7 bits on MOSI denote the 7-bit register address (MSB first).4. The next address byte can now be transmitted on the MOSI. If the autoincrement bit is \nset, the following address transmitted on the MOSI is ignored. Internally, the address is incremented. If the autoincrement bit is not set, then the following byte denotes the address of the register to be read next.\n5. Read data is transmitted by the slave device on the MISO (MSB first), starting from the \nlaunch clock following the last address bit on the MOSI.\n6. Full duplex read operation is achieved by transmitting the next address on MOSI while \nthe data from the previous address is available on MISO.\n7. To end the read operation, a dummy address of all 0\'s is sent on MOSI. \nSPI interface STMPE811\n16/66 Doc ID 14489 Rev 55.1.2 Register write\nThe following steps need to be followed for register write through SPI.\n1. Assert CS_n by driving a \'0\' on this pin.2. Drive a \'0\' on the first SCL launch clock on MOSI to select a write operation.3. The next 7 bits on MOSI denote the 7-bit register address (MSB first).4. The next byte on the MOSI denotes data to be written.5. The following transmissions on MOSI are considered byte-sized data. The register \naddress to which the following data is written depends on whether the autoincrement bit in the SPICON register is set. If this bit has been set previously, the register address is incremented for data writes.\n5.1.3 Termination of data transfer\nA transfer can be terminated before the last launch edge by deasserting the CS_n signal. If the last launch clock is detected, it is a ssumed that the data transfer is successful.\nSTMPE811 SPI interface\nDoc ID 14489 Rev 5 17/665.2 SPI timing modes\nThe SPI timing modes are defined by CPHA and CPOL,CPHA and CPOL are read from the \n"SDAT" and "A0" pins during power-up reset. The following four modes are defined according to this setting.\n         \nThe clocking diagrams of these modes are show n in ON reset. The device always operates \nin mode 0. Once the bits are set in the SPICON register, the mode change takes effect on the next transaction defined by the CS_n pin being deasserted and asserted.\n5.2.1 SPI timing definition\n         Table 9. SPI timing modes\nCPOL_N (SDAT pin) CPOL CPHA (ADDR pin) Mode\n1000\n10110102\n0113\nTable 10. SPI timing specification\nSymbol DescriptionTiming\nUnit\nMin Typ Max\ntCSSCS_n falling to \nfirst capture clock1\n−− µs\ntCLClock low \nperiod500 −− ns\ntCHClock high \nperiod500 −− ns\ntLDILaunch clock \nto MOSI data \nvalid−− 20 ns\ntLDOLaunch clock \nto MISO data \nvalid−− 330 µs\ntDIData on MOSI \nvalid1 −− µs\ntCCSLast clock \nedge to CS_n high1\n−− µs\ntCSHCS_n high \nperiod2 −− µs\nSPI interface STMPE811\n18/66 Doc ID 14489 Rev 5Figure 7. SPI timing specificationtCSCLCS_n high to \nfirst clock edge300 −− ns\ntCSZCS_n high to \ntri-state on \nMISO1 −− µsTable 10. SPI timing specification (continued)\nSymbol DescriptionTiming\nUnit\nMin Typ Max\n\nSTMPE811 STMPE811 registers\nDoc ID 14489 Rev 5 19/666 STMPE811 registers\nThis section lists and describes the registers of the STMPE811 device, starting with a \nregister map and then provides detailed descriptions of register types.\n         Table 11. Register summary map table\nAddress Register name Bit Type Reset value Function\n0x00 CHIP_ID 16 R 0x0811 Device identification\n0x02 ID_VER 8 R 0x03Revision number\n0x01 for engineering sample0x03 for final silicon\n0x03 SYS_CTRL1 8 R/W 0x00 Reset control0x04 SYS_CTRL2 8 R/W 0x0F Clock control\n0x08 SPI_CFG 8 R/W 0x01 SPI in terface configuration\n0x09 INT_CTRL 8 R/W 0x00 Interrupt control register\n0x0A INT_EN 8 R/W 0x00 Interrupt enable register\n0x0B INT_STA 8 R 0x10 interrupt status register\n0x0C GPIO_EN 8 R/W 0x00GPIO interrupt enable \nregister\n0x0D GPIO_INT_STA 8 R 0x00GPIO interrupt status \nregister\n0x0E ADC_INT_EN 8 R/W 0x00ADC interrupt enable \nregister\n0x0F ADC_INT_STA 8 R 0x00 ADC interrupt status register\n0x10 GPIO_SET_PIN 8 R/W 0x00 GPIO set pin register\n0x11 GPIO_CLR_PIN 8 R/W 0x00 GPIO clear pin register\n0x12 GPIO_MP_STA 8 R/W 0x00GPIO monitor pin state \nregister\n0x13 GPIO_DIR 8 R/W 0x00 GPIO direction register0x14 GPIO_ED 8 R/W 0x00 GPIO edge detect register\n0x15 GPIO_RE 8 R/W 0x00 GPIO rising edge register\n0x16 GPIO_FE 8 R/W 0x00 GPIO falling edge register0x17 GPIO_AF 8 R/W 0x00 Alternate function register\n0x20 ADC_CTRL1 8 R/W 0x1C ADC control\n0x21 ADC_CTRL2 8 R/W 0x01 ADC control\n0x22 ADC_CAPT 8 R/W 0xFFTo initiate ADC data \nacquisition\n0x30 ADC_DATA_CH0 16 R 0x0000 ADC channel 00x32 ADC_DATA_CH1 16 R 0x0000 ADC channel 1\nSTMPE811 registers STMPE811\n20/66 Doc ID 14489 Rev 50x34 ADC_DATA_CH2 16 R 0x0000 ADC channel 2\n0x36 ADC_DATA_CH3 16 R 0x0000 ADC channel 3\n0x38 ADC_DATA_CH4 16 R 0x0000 ADC channel 4\n0x3A ADC_DATA_CH5 16 R 0x0000 ADC channel 5\n0x3C ADC_DATA_CH6 16 R 0x0000 ADC channel 6\n0x3E ADC_DATA_CH7 16 R 0x0000 ADC channel 7\n0x40 TSC_CTRL 8 R/W 0x904-wire touchscreen \ncontroller setup \n0x41 TSC_CFG 8 R/W 0x00Touchscreen controller \nconfiguration\n0x42 WDW_TR_X 16 R/W 0x0FFF Window setup for top right X\n0x44 WDW_TR_Y 16 R/W 0x0FFF Window setup for top right Y\n0x46 WDW_BL_X 16 R/W 0x0000Window setup for bottom left \nX\n0x48 WDW_BL_Y 16 R/W 0x0000Window setup for bottom left \nY\n0x4A FIFO_TH 8 R/W 0x00FIFO level to generate \ninterrupt\n0x4B FIFO_STA 8 R/W 0x20 Current status of FIFO\n0x4C FIFO_SIZE 8 R 0x00 Current filled level of FIFO\n0x4D TSC_DATA_X 16 R 0x0000Data port for touchscreen \ncontroller data access\n0x4F TSC_DATA_Y 16 R 0x0000Data port for touchscreen \ncontroller data access\n0x51 TSC_DATA_Z 8 R 0x0000Data port for touchscreen \ncontroller data access\n0x52 TSC_DATA_XYZ 32 R 0x00000000Data port for touchscreen \ncontroller data access\n0x56TSC_FRACTION\n_Z8 0x00Touchscreen controller \nFRACTION_Z\n0x57 TSC_DATA 8 R 0x00Data port for touchscreen \ncontroller data access\n0x58 TSC_I_DRIVE 8 R/W 0x00Touchscreen controller drive \nI\n0x59 TSC_SHIELD 8 R/W 0x00Touchscreen controller \nshield\n0x60 TEMP_CTRL 8 R/W 0x00 Temperature sensor setupTable 11. Register summary map table (continued)\nAddress Register name Bit Type Reset value Function\nSTMPE811 STMPE811 registers\nDoc ID 14489 Rev 5 21/660x61 TEMP_DATA 8 R 0x00Temperature data access \nport\n0x62 TEMP_TH 8 R/W 0x00Threshold for temperature \ncontrolled interruptTable 11. Register summary map table (continued)\nAddress Register name Bit Type Reset value Function\nSystem and identification registers STMPE811\n22/66 Doc ID 14489 Rev 57 System and identification registers\n         \n         \n         \nCHIP_ID Device identification\nAddress: 0x00\nType: R\nReset: 0x0811\nDescription: 16-bit device identification\nID_VER Revision number\nAddress: 0x02\nType: R\nReset: 0x03 (0x01 for engineering samples)\nDescription: 16-bit revision numberTable 12. System and identification registers map\nAddress Register name Bit Type Reset Function\n0x00 CHIP_ID 16 R 0x0811 Device identification\n0x02 ID_VER 8 R 0x03Revision number \n(0x03 for engineering sample)\n0x03 SYS_CTRL1 8 R/W 0x00 Reset control\n0x04 SYS_CTRL2 8 R/W 0x0F Clock control0x08 SPI_CFG 8 R/W 0x01 SPI interface configuration\nSTMPE811 System and identification registers\nDoc ID 14489 Rev 5 23/66SYS_CTRL1 Reset control\nAddress: 0x03\nType: R/W\nReset: 0x00\nDescription: The reset control register enables to reset the device\nSYS_CTRL2 Clock control\nAddress: 0x04\nType: R/W\nReset: 0x0F\nDescription: This register enables to switch off the clock supply76543 2 1 0\nRESERVED SOFT_RESET HIBERNATE\n[7:2] RESERVED\n[1]SOFT_RESET : Reset the STMPE811 using the serial communication interface\n[0]HIBERNATE : Force the device into hibernation mode.\nForcing the device into hibernation mode by writing ‘1’ to this bit would disable the hot-key \nfeature. If the hot-key feature is requir ed, use the default auto-hibernation mode.\n76543 2 1 0\n−−−− TS_OFF GPIO_OFF TSC_OFF ADC_OFF\n[7:4] RESERVED\n[3]TS_OFF : Switch off the clock supply to the temperature sensor\n1: Switches off the clock s upply to the temperature sensor\n[2]GPIO_OFF : Switch off the clock supply to the GPIO\n1: Switches off the clock supply to the GPIO\n[1]TSC_OFF : Switch off the clock supplyt o the touchscreen controller\n1: Switches off the clock suppl y to the touchscreen controller\n[0]ADC_OFF : Switch off the clock supply to the ADC\n1: Switches off the clock supply to the ADC\nSystem and identification registers STMPE811\n24/66 Doc ID 14489 Rev 5SPI_CFG SPI interface configuration\nAddress: 0x08\nType: R/W\nReset: 0x01\nDescription: SPI interface configuration register76543 2 1 0\nRESERVED AUTO_INCR SPI_CLK_MOD1 SPI_CLK_MOD0\n[7:3] RESERVED\n[2]AUTO_INCR : \nThis bit defines whether the SPI transaction fo llows an addressing scheme that internally \nautoincrements or not\n[1]SPI_CLK_MOD1 : \nThis bit reflects the value of the SCAD/A0 pin during power-up reset\n[0]SPI_CLK_MOD0 : \nThis bit reflects the value of the SCAD/A0 pin during power-up reset\nSTMPE811 Interrupt system\nDoc ID 14489 Rev 5 25/668 Interrupt system\nThe STMPE811 uses a 2-tier interrupt structure. The ADC interrupts and GPIO interrupts \nare ganged as a single bit in the “interrupt status register”. The interrupts from the \ntouchscreen controller and temperature sensor can be seen directly in the interrupt status register.\nFigure 8. Interrupt system diagram\n          \n \n \n \n \n GPIO\ninterrupt\nstatus  FIFO status,  \nTSC touch,  \nTemp sensor  \nAND\nInterrupt\nenableInterrupt\nstatus\nAND\nGPIO\ninterrupt\nenable\nAND\nADC\ninterrupt\nenableADC\ninterrupt\nstatus\nInterrupt system STMPE811\n26/66 Doc ID 14489 Rev 5INT_CTRL Interrupt control register\nAddress: 0x09\nType: R/W\nReset: 0x00\nDescription: The interrupt control register is used to enable the interruption from a system-related \ninterrupt source to the host.76543 2 1 0\nRESERVED INT_POLARITY INT_TYPE GLOBAL_INT\n[7:3] RESERVED\n[2]INT_POLARITY : This bit sets the INT pin polarity\n1: Active high/rising edge\n0: Active low/falling edge\n[1]INT_TYPE : This bit sets the type of interrupt signal required by the host\n1: Edge interrupt0: Level interrupt\n[0]GLOBAL_INT : This is master enabl e for the interrupt system\n1: Global interrupt\n0: Stops all interrupts\nSTMPE811 Interrupt system\nDoc ID 14489 Rev 5 27/66INT_EN Interrupt enable register\nAddress: 0x0A\nType: R/W\nReset: 0x00\nDescription: The interrupt enable register is used to enable the interruption from a system related \ninterrupt source to the host.\nINT_STA Interrupt status register\nAddress: 0x0B\nType: R\nReset: 0x10\nDescription: The interrupt status register monitors the status of the interruption from a particular \ninterrupt source to the host.  Regardless of whether the INT_EN bits are enabled, the INT_STA bits are still updated.  Writing \'1\' to this regist er clears the corresponding \nbits. Writing \'0\' has no effect.76543 2 1 0\nGPIO ADC TEMP_SENS FIFO_EMPTY FIFO_FULL FIFO_0FLOW FIFO_TH TOUCH_DET\n[7]GPIO : Any enabled GPIO interrupts\n[6]ADC : Any enabled ADC interrupts\n[5]TEMP_SENS : Temperature threshold triggering\n[4]FIFO_EMPTY : FIFO is empty\n[3]FIFO_FULL : FIFO is full\n[2]FIFO_OFLOW : FIFO is overflowed\n[1]FIFO_TH : FIFO is equal or above threshold value.\n[0]TOUCH_DET : Touch is detected\n76543 2 1 0\nGPIO ADC TEMP_SENS FIFO_EMPTY FIFO_FULL FIFO_OFLOW FIFO_TH TOUCH_DET\n[7]GPIO : Any enabled GPIO interrupts\n[6]ADC : Any enabled ADC interrupts\n[5]TEMP_SENS : Temperature threshold triggering\n[4]FIFO_EMPTY : FIFO is empty\n[3]FIFO_FULL : FIFO is full\n[2]FIFO_OFLOW : FIFO is overflowed\n[1]FIFO_TH : FIFO is equal or above threshold value.\nThis bit is set when FIFO level equals to threshold value. It will only be asserted again if FIFO \nlevel drops to < threshold value, and increased back to threshold value.\n[0]TOUCH_DET : Touch is detected\nInterrupt system STMPE811\n28/66 Doc ID 14489 Rev 5GPIO_INT_EN GPIO interrupt enable register\nAddress: 0x0C\nType: R/W\nReset: 0x00\nDescription: The GPIO interrupt register enables the GPIO interruption of a particular GPIO \nsource to the host.\nGPIO_INT_STA GPIO interrupt status register\nAddress: 0x0D\nType: R\nReset: 0x00\nDescription: The GPIO interrupt status register monitors the status of the interruption from a \nparticular GPIO pin interrupt source to the host.  Regardless of whether or not the GPIO_INT_STA bits are enable d, the corresponding GPIO_S TA bits are still updated.  \nThe ISG[7:0] bits are the interrupt status bits corresponding to the GPIO[7:0] pins. Writing \'1\' to this register clears the corresponding bits. Writing \'0\' has no effect.76543 2 1 0\nIEG[x]\n[7:0] IEG[x]: Interrupt enable GPIO mask (where x = 7 to 0)\n1: Writing ‘1’ to the IE[x] bit enables the interruption to the host\n76543 2 1 0\nISG[x]\n[7:0] ISG[x] : GPIO interrupt status (where x = 7 to 0)\nRead:Interrupt status of the GPIO[x]. Reading the register clears any bits that have been set to \'1\'\nWrite:\nWriting to this register has no effect\nSTMPE811 Interrupt system\nDoc ID 14489 Rev 5 29/66ADC_INT_EN ADC interrupt enable register\nAddress: 0x0E\nType: R/W\nReset: 0x00\nDescription: The ADC enable register enables the interruption of a particular ADC source to the \nhost.\nADC_INT_STA ADC interrupt status register\nAddress: 0x0F\nType: R\nReset: 0x00\nDescription: The ADC interrupt status register monitors the status of the interruption from a \nparticular ADC source to the host.  Rega rdless of whether or not the ADC_INT_EN \nbits are enabled, the correspo nding ADC_STA bits are still up dated.  The ISA[7:0] bits \nare the interrupt status bits corresponding to the ADC[7:0] pins. Writing \'1\' to this \nregister clears the corresponding bits. Writing \'0\' has no effect.76543 2 1 0\nIEAC[x]\n[7:0] IEAC[x]: Interrupt enable ADC mask (where x = 7 to 0)\n1: Writing ‘1’ to the IE[x] bit enables the interruption to the host\n76543 2 1 0\nISA[x]\n[7:0] ISA[x] : ADC interrupt status (where x = 7 to 0)\nRead:Interrupt status of the ADC[x]. Reading the register clears any bits that have been set to \'1\'\nWrite:\nWriting to this register has no effect.Note: Refer to Table 13  for the associated ADC intput pins to each ADC channels.\nAnalog-to-digital converter STMPE811\n30/66 Doc ID 14489 Rev 59 Analog-to-digital converter\nAn 8-input,12-bit analog-to-digital converter (ADC) is integrated in the STMPE811. The ADC \ncan be used as a generic analog-to-digital converter, or as a touchscreen controller capable \nof controlling a 4-wire resistive touchscreen.\n         Table 13. ADC controller register summary table\nAddress Register name Size Description\n0x20 ADC_CTRL1 8 ADC control \n0x21 ADC_CTRL2 8 ADC control \n0x22 ADC_CAPT 8 ADC channel data capture\n0x30 ADC_DATA_CH0 8 ADC channel 0 (X+/GPIO-4)0x32 ADC_DATA_CH1 8 ADC channel 1 (X-/GPIO-6)\n0x34 ADC_DATA_CH2 8 ADC channel 2 (Y+/GPIO-5)\n0x36 ADC_DATA_CH3 8 ADC channel 3 (Y-/GPIO-7)\n0x38 ADC_DATA_CH4 8 ADC channel 4 (IN0/GPIO0)\n0x3A ADC_DATA_CH5 8 ADC channel 5 (IN1/GPIO-1) 0x3C ADC_DATA_CH6 8 ADC channel 6 (IN2/GPIO-2)\n0x3E ADC_DATA_CH7 8 ADC channel 7 (IN3/GPIO-3)\nSTMPE811 Analog-to-digital converter\nDoc ID 14489 Rev 5 31/66ADC_CTRL1 ADC control 1\nAddress: 0x20\nType: R/W\nReset: 0x1C\nDescription: ADC control register.7 6 5 4 3 210\nRESERVED SAMPLE_TIME2 SAMPLE_TIME1 SAMPLE_TIME0 MOD_12B RESERVED REF_SEL RESERVED\n[7]RESERVED\n[6:4] SAMPLE_TIMEn : ADC conversion time in number of clock\n000: 36\n001: 44010: 56\n011: 64\n100: 80101: 96\n110: 124\n111: Not valid\n[3]MOD_12B : Selects 10 or 12-bit ADC operation\n1: 12 bit ADC0: 10 bit ADC\n[2]RESERVED\n[1]REF_SEL : Selects between internal or external reference for the ADC\n1: External reference0: Internal reference\n[0]RESERVED\nAnalog-to-digital converter STMPE811\n32/66 Doc ID 14489 Rev 5ADC_CTRL2 ADC control 2\nAddress: 0x21\nType: R/W\nReset: 0x01\nDescription: ADC control.\nADC_CAPT ADC channel data capture\nAddress: 0x22\nType: R/W\nReset: 0xFF\nDescription: To initiate ADC data acquisition .76543 2 1 0\nRESERVED ADC_FREQ_1 ADC_FREQ_0\n[7]RESERVED\n[6]RESERVED\n[5]RESERVED\n[4]RESERVED\n[3]RESERVED\n[2]RESERVED\n[1:0] ADC_FREQ : Selects the clock speed of ADC\n00: 1.625 MHz typ.01: 3.25 MHz typ.\n10: 6.5 MHz typ.\n11: 6.5 MHz typ.\n76543 2 1 0\nCH[7:0]\n[7:0] CH[7:0] : ADC channel data capture\nWrite \'1\' to initiate data acquisition for the corresponding channel. Writing \'0\' has no effect.\nReads \'1\' if conversion is completed. Reads \'0\' if conversion is in progress.\nSTMPE811 Analog-to-digital converter\nDoc ID 14489 Rev 5 33/66ADC_DATA_CHn ADC channel data registers\nAddress: Add address\nType: R/W\nReset: 0x0000\nDescription: ADC data register 0-7 (DATA_CHn=0 -7)\nThe ADC in STMPE811 operates on an internal RC clock with a typical frequency of \n6.5 MHz. The total conversion time in ADC mode depends on the "SampleTime" setting, and the clock division field \'Freq\'.\nThe following table shows the conversion time based on 6.5 MHz, 3.25 MHz and 1.625 MHz \nclock. \n         1 1 1 0 9876543 2 1 0\nDATA[11:0]\n[11:0] DATA[11:0] : ADC channel data\nIf TSC is enabled, CH3-0 is used for TSC and all readings to these channels give 0x0000\nTable 14. ADC conversion time\nSample time \nsettingConversion time\nin ADC clock6.5 MHz\n(154 ns)3.25 MHz\n(308 ns)1.625 MHz\n(615 ns)\n000 36 5.5 µs (180 kHz) 11 µs (90 kHz) 22 µs (45 kHz)\n001 44 6.8 µs (147 kHz) 13.6 µs (74 kHz) 27 µs (36 kHz)010 56 8.6 µs (116 kHz) 17.2 µs (58 kHz) 34.4 µs (29 kHz)\n011 64 9.9 µs (101 kHz) 19.8 µs (51 kHz) 39.6 µs (25 kHz)\n100 80 12.3 µs(81.5 kHz) 24.6 µs (41 kHz) 49.2 µs (20 kHz)101 96 14.8 µs (67.6 kHz) 28.8 µs (33 kHz) 59.2 µs (17 kHz)\n110 124 19.1 µs (52.3 kHz) 38.2 µs (26 kHz) 56.4 µs (13 kHz)\nTouchscreen controller STMPE811\n34/66 Doc ID 14489 Rev 510 Touchscreen controller\nThe STMPE811 is integrated with a hard-wired touchscreen controller for 4-wire resistive \ntype touchscreen. The touchscreen controller is able to operate completely autonomously, \nand interrupt the connected CPU only when a pre-defined event occurs.\nFigure 9. Touchscreen controller block diagram\n10.1 Driver and switch control unit \nThe driver and switch control unit allows coordination of the ADC and the MUX/switch. With \nthe coordination of this unit, a stream of data is produced at a selected frequency.\nThe touchscreen drivers can be configured with 2 current ratings: 20 mA or 50 mA. In the \ncase where multiple touch-down on the screen is causing a short, the current from the driver is limited to these values. Tolerance of these current setting is +/- 25%.\nMovement tracking\nThe "Tracking Index" in the TSC_CTRL register specifies a value, which determines the distance between the current touch position and the previous touch position. If the distance is shorter than the tracking index, it is discarded.\nThe tracking is calculated by summation of the horizontal and vertical movement. Movement \nis only reported if:\n(Current X - Previously Reported X) + (Current Y - Previously Reported Y) > Tracking IndexIf pressure reporting is enabled (X/Y/Z), an increase in pressure override the movement \ntracking and report the new data set, even if X/Y is within the previous tracking index. This is to ensure that a slow touch is not discarded.\nIf pressure data is not used, select X/Y mode in touchscreen data acquisition. (Opmode field \nin TSCControl register).s  \n Movement\n& \nwindow tracking10/12 bit\nADCSwitch\n&\ndrivers\nDriver\n & \nswitch controlFIFO\n & \ninterrupt controlFIFO\nSTMPE811 Touchscreen controller\nDoc ID 14489 Rev 5 35/66Window tracking\nThe -WDW_X and WDW_Y registers allow to pre-set a sub-window in the touchscreen such \nthat any touch position that is outside the sub-window is discarded.\nFigure 10. Window tracking\nFIFO\nFIFO has a depth of 128 sectors. This is enough for 128 sets of touch data at maximum \nresolution (2 x 12 bits). FIFO can be programme d to generate an interrup t when it is filled to \na pre-determined level. \nSampling\nThe STMPE811 touchscreen controller has an internal 180 kHz, 12-bit ADC able to execute autonomous driving/sampling. Each "sample" consists of 4 ADC readings that provide the X and Y locations, as well as the touch pressure.\nFigure 11. SamplingActive windowTop right coordin ates\nBottom left coordin ates\n ADC\ntakes X reading\nSettling\nperiodDrive XADC\ntakes Y reading\nSettling\nperiodDrive Y\nTouchscreen controller STMPE811\n36/66 Doc ID 14489 Rev 5Oversampling and averaging function\nThe STMPE811 touchscreen controller can be configured to oversample by 2/4/8 times and \nprovide the averaged value as final output. This feature helps to reduce the effect of surrounding noise.\n         Table 15. Touchscreen controller register summary table\nAddress Register name Bit Type Function\n0x40 TSC_CTRL 8 R/W 4-wire touchscreen controller setup \n0x41 TSC_CFG 8 R/W TSC configuration register0x42 WDW_TR_X 16 R/W Window setup for top right X\n0x44 WDW_TR_Y 16 R/W Window setup for top right Y\n0x46 WDW_TR_X 16 R/W Window setup for bottom left X0x48 WDW_TR_Y 16 R/W Window setup for bottom left Y\n0x4A FIFO_TH 8 R/W FIFO level to generate interrupt\n0x4B FIFO_STA 8 R/W Current status of FIFO\n0x4C FIFO_SIZE 8 R Current filled level of FIFO\n0x4D TSC_DATA_X 16 R Data port for TSC data access0x4F TSC_DATA_Y 16 R Data port for TSC data access\n0x51 TSC_DATA_Z 8 R Data port for TSC data access\n0x52 TSC_DATA_XYZ 32 R Data port for TSC data access0x56 TSC_FRACT_Z 8 R/W Touchscreen controller FRACTION_Z\n0x57 TSC_DATA 8 R Touchscreen controller data access port\n0x58 TSC_I_DRIVE 8 R/W Touchscreen controller drive I0x59 TSC_SHIELD 8 R/W Touchscreen controller shield\nSTMPE811 Touchscreen controller\nDoc ID 14489 Rev 5 37/66TSC_CTRL touchscreen controller control register\nAddress: 0x40\nType: R/W\nReset: 0x90\nDescription: 4-wire touchscreen controller (TSC) setup.76543 2 1 0\nTSC_STA TRACK OP_MOD EN\n[7]TSC_STA : TSC status\nReads \'1\' when touch is detectedReads \'0\' when touch is not detected\nWriting to this register has no effect\n[6:4] TRACK : Tracking index\n000: No window tracking\n001: 4010: 8\n011: 16\n100: 32101: 64\n110: 92\n111: 127\n[3:1] OP_MOD : TSC operating mode\n000: X, Y, Z acquisition001: X, Y only\n010: X only\n011: Y only100: Z onlyThis field cannot be written on, when EN = 1\n[0]EN: Enable TSC\nTouchscreen controller STMPE811\n38/66 Doc ID 14489 Rev 5TSC_CFG Touchscreen controller  configuration register\nAddress: 0x41\nType: R/W\nDescription: Touchscreen controller configuration register.76543 2 1 0\nAVE_CTRL_1 AVE_CTRL_0TOUCH_DET\n_DELAY_2TOUCH_DET\n_DELAY_1TOUCH_DET\n_DELAY_0SETTLING_2 SETTLING_1 SETTLING_0\n[7:6] [ AVE_CTRL_1/0 : Average control\n00=1 sample\n01=2 samples\n10=4 samples11=8 samples\n[5:3] TOUCH_DET_DELAY_2/1/0 : Touch detect delay\n000 - 10 μs\n001 - 50 μs\n010 = 100 μs\n011 = 500 μs\n1 0 0=1m s\n1 0 1=5m s\n110 = 10 ms111 = 50 ms\n[2:0] SETTLING : Panel driver settling time\n(1)\n000 = 10 μs\n001 = 100 μs\n010 = 500 μS\n0 1 1= 1m s\n1 0 0=5m s\n101 = 10 ms110 = 50 ms\n1 1 1= 1 0 0m s\n1. For large panels (> 6”), a capacitor of 10 nF is reco mmended at the touchscreen terminals for noise filtering. \nIn this case, settling time of  1 ms or more is recommended.\nSTMPE811 Touchscreen controller\nDoc ID 14489 Rev 5 39/66WDW_TR_X Window setup for top right X\nAddress: 0x42\nType: R/W\nReset: 0x0FFF\nDescription: Window setup for top right X coordinates .\nWDW_TR_Y Window setup for top right Y\nAddress: 0x44\nType: R/W\nReset: 0x0FFF\nDescription: Window setup for top right Y coordinates .7 6543 2 1 0\nTR_X [11:0]\n[11:0] TR_X: Bit 11:0 of top right X coordinates\n7 6543 2 1 0\nTR_Y [11:0]\n[11:0] TR_X : Bit 11:0 of top right Y coordinates\nTouchscreen controller STMPE811\n40/66 Doc ID 14489 Rev 5WDW_BL_X Window setup for bottom left X\nAddress: 0x46\nType: R/W\nReset: 0x0000\nDescription: Window setup for bottom left X coordinates .\nWDW_BL_Y Window setup for bottom left Y\nAddress: 0x48\nType: R/W\nReset: 0x0000\nDescription: Window setup for bottom left Y coordinates .\nFIFO_TH FIFO threshold\nAddress: 0x4A\nType: R/W\nReset: 0x00\nDescription: Triggers an interrupt upon reaching or exceeding the threshold value. This field must not be set \nas zero.7 6543 2 1 0\nBL_X [11:0]\n[11:0] BL_X: Bit 11:0 of bottom left X coordinates\n7 6543 2 1 0\nBL_Y [11:0]\n[11:0] BL_X : Bit 11:0 of bottom left Y coordinates\n76543 2 1 0\nFIFO_TH\n[7:0] FIFO_TH : touchscreen controller FIFO threshold\nSTMPE811 Touchscreen controller\nDoc ID 14489 Rev 5 41/66FIFO_STA FIFO status\nAddress: 0x4B\nType: R/W\nReset: 0x20\nDescription: Current status of FIFO..\nFIFO_SIZE FIFO size\nAddress: 0x4C\nType: R\nReset: 0x00\nDescription: Current number of samples available.7654 3 2 1 0\nFIFO_OFLOW FIFO_FULL FIFO_EMPTY F IFO_TH_TRIG RESERVED FIFO_RESET\n[7]FIFO_OFLOW : \nReads 1 if FIFO is overflow\n[6]FIFO_FULL : \nReads 1 if FIFO is full\n[5]FIFO_EMPTY:  \nReads 1 if FIFO is empty\n[4]FIFO_TH_TRIG :\n0 = Current FIFO size is st ill below the threshold value\n1 = Current FIFO size is at or beyond the threshold value\n[3:1] RESERVED\n[0]FIFO_RESET :\nWrite \'0\' : FIFO put out of reset modeWrite \'1\' : Resets FIFO. All data in FIFO are cleared.\nWhen TSC is enabled, FIFO  resets automatically.\n76543 2 1 0\nRESERVED FIFO_SIZE\n[7:0] FIFO_SIZE : Number of samples available\nTouchscreen controller STMPE811\n42/66 Doc ID 14489 Rev 5TSC_DATA_X TSC_DATA_X\nAddress: 0x4D\nType: R\nReset: 0x0000\nDescription: Bit 11:0 of X data.1 1 1 0 9876543 2 1 0\nDATAY[11:0]\n[11:0] DATAY[11:0 ]: Bit 11:0 of X data\nSTMPE811 Touchscreen controller\nDoc ID 14489 Rev 5 43/66TSC_DATA_Y TSC_DATA_Y\nAddress: 0x4F\nType: R\nReset: 0x0000\nDescription: Bit 11:0 of Y data.\nTSC_DATA_Z TSC_DATA_Z\nAddress: 0x51\nType: R\nReset: 0x0000\nDescription: Bit 7:0 of Z data.1 1 1 0 9876543 2 1 0\nDATAY[11:0]\n[11:0] DATAY[11:0] : bit 11:0 of Y data\n76543 2 1 0\nDATAZ[7:0]\n[7:0] DATAZ[7:0] : bit 7:0 of Z data\nTouchscreen controller STMPE811\n44/66 Doc ID 14489 Rev 5TSC_DATA_XYZ Touchscreen controller DATA\nAddress: 0x57 (auto-increment), 0xD7 (non-auto-increment)\nType: R\nReset: 0x00\nDescription: Data port for TSC data access\nThe data format from the TSC_DATA register depends on the setting of "OpMode" field in \nTSC_CTRL register. The samples acquired are accessed in "packed samples". The size of each "packed sample" depends on which mode the touchscreen controller is operating in.\nThe TSC_DATA register can be accessed in 2 modes:\n● Autoincrement\n● Non autoincrement\nTo access the 128-sets buffer, the non autoincrement mode should be used.76543 2 1 0\nDATA\n[11:0] DATA : data bytes from TSC FIFO\nTable 16. Touchscreen controller DATA register\nTSC_CTRL in \noperation \nmodeNumber of \nbytes to read \nfrom \nTSC_DATA_XYZByte0 Byte1 Byte2 Byte3\n000 4 [11:4] of X[3:0] of X\n[11:8] of Y[7:0] of Y [7:0] of Z\n001 3 [11:4] of X[3:0] of X\n[11:8] of Y[7:0] of Y −\n010 2 [11:4] of X [3:0] of X −−\n011 2 [11:4] of Y [3:0] of Y −−\n100 1 [7:0] of Z - −−\nSTMPE811 Touchscreen controller\nDoc ID 14489 Rev 5 45/66TSC_FRACTION_Z Touchscreen controller FRACTION_Z\nAddress: 0x56\nType: R\nReset: 0x00\nDescription: This register allows to select the range and accuracy of the pressure measurement76543 2 1 0\nRESERVED FRACTION_Z\n[7:3] RESERVED\n[2:0] FRACTION_Z : \n000: Fractional part is 0, whole part is 8\n001: Fractional part is 1, whole part is 7010: Fractional part is 2, whole part is 6\n011: Fractional part is 3, whole part is 5\n100: Fractional part is 4, whole part is 4101: Fractional part is 5, whole part is 3\n110: Fractional part is 6, whole part is 2\n111: Fractional part is 7, whole part is 1\nTouchscreen controller STMPE811\n46/66 Doc ID 14489 Rev 5TSC_I_DRIVE Touchscreen controller drive I\nAddress: 0x58\nType: R/W\nReset: 0x00\nDescription: This register sets the current limit value of the touchscreen drivers\nTSC_SHIELD Touchscreen controller shield\nAddress: 0x59\nType: R\nReset: 0x00\nDescription: Writing each bit would ground the corresponding touchscreen wire76543 2 1 0\nRESERVED DRIVE\n[7:1] RESERVED\n[0]DRIVE : maximum current on the touchscreen controller (TSC) driving channel\n0: 20 mA typical, 35 mA max\n1: 50 mA typical, 80 mA max\n76543 2 1 0\nRESERVED X+ X- Y+ Y-\n[7:4] RESERVED\n[3:0] SHIELD[3:0] : \nWrite 1 to GND X+, X-, Y+, Y - lines\nSTMPE811 Touchscreen controller programming sequence\nDoc ID 14489 Rev 5 47/6611 Touchscreen controlle r programming sequence\nThe following are the steps to configure the touchscreen controller (TSC):\na) Disable the clock gating for the touch screen controller and ADC in the SYS_CFG2 \nregister.\nb) Configure the touchscreen operating mode and the window tracking index.c) A touch detection status may also be enabled through enabling the corresponding \ninterrupt flag.  With this interrupt, the user is informed through an interrupt when the touch is detected as well as lifted.\nd) Configure the TSC_CFG register to specify the “panel voltage settling time”, touch \ndetection delays and the averaging method used.\ne) A windowing feature may also be enabled through TSCWdwTRX, TSCWdwTRY , \nTSCWdwBLX and TSCWdwBLY registers.  By default, the windowing covers the entire touch panel.\nf) Configure the TSC_FIFO_TH register to specify the threshold value to cause an \ninterrupt.  The corresponding interrupt bit in the interrupt module must also be enabled.  This interrupt bit should be masked off during data fetching from the FIFO in order to prevent an unnecessary trigger of this interrupt.  Upon completion of the data fetching, this bit can be re-enabled\ng) By default, the FIFO_RESET bit in th e TSC_FIFO_CTRL_STA register holds the \nFIFO in Reset mode.  Upon enabling the touchscreen controller (through the EN bit in TSC_CTRL), this FIFO reset is automatically deasserted.  The FIFO status may be observed from the TSC_FIFO_CTRL_STA register or alternatively through the interrupt.\nh) Once the data is filled beyond the FIFO threshold va lue, an interrupt is triggered \n(assuming the corresponding interrupt is being enabled).  The user is required to continuously read out the data set until the current FIFO size is below the threshold, then, the user may clear the interrupt flag.  As long as the current FIFO size exceeds the threshold value, an interrupt from the touchscreen controller is sent to the interrupt module.  Therefore, even if the interrupt flag is cleared, the interrupt flag is automatically asserted, as long as the FIFO size exceeds the threshold value.\ni) The current FIFO size can be obtained from the TSC_FIFO_Sz register.  This \ninformation may assists the user in how many data sets are to be read out from the FIFO, if the user intends to read all in one shot. The user may also read a data set by a data set.\nj) The TSC_DATA_X register holds the X-coordinates.  This register can be used in \nall touchscreen operating modes.\nk) The TSC_DATA_Y register holds the Y -coordinates. TSC_DATA_Y register holds \nthe Y -coordinates.\nl) The TSC_DATA_Z register holds the Z value. TSC_DATA_Z register holds the Z-\ncoordinates.\nm) The TSCDATA_XYZ register holds the X, Y and Z values.  These values are \npacked into 4 bytes.  This register can only be used when the touchscreen operating mode is 00 0 and 001.  This register is  to facilitate less byte read.\nn) For the TSC_FRACT_Z register, the user may configure it based on the \ntouchscreen panel resistance.  This allows the user to specify the resolution of the \nTouchscreen controller programming sequence STMPE811\n48/66 Doc ID 14489 Rev 5Z value.  With the Z value obtained from the register, the user simply needs to \nmultiply the Z value with the touchscreen panel resistance to obtain the touch resistance.\no) The TSC_DATA register allows facilitatio n of another reading format with minimum \nI\n2C transaction overhead by using the non autoincrement mode (or equivalent \nmode in SPI).  The data format is the same as TSC_DATA_XYZ, with the exception that all the data fetched are from the same address.\np) Enable the EN bit of the TSC_CTRL register to start the touch detection and data \nacquisition.  \nq) During the auto-hibernate mode, a touch detection can cause a wake-up to the \ndevice only when the TSC is enabled and the touch detect status interrupt mask is enabled.\nr) In order to prevent confusion, it is recommended that the user not mix the data \nfetching format (TSC_DATA_X, TSC_DATA_Y , TSC_DATA_Z, TSC_DATA_XYZ and TSC_DATA) between one reading and the next.  \ns) It is also recommended that the user should perform a FIFO reset and TSC \ndisabling when the ADC or TSC setting are reconfigured.\nSTMPE811 Temperature sensor\nDoc ID 14489 Rev 5 49/6612 Temperature sensor\nThe STMPE811 internal temperature sensor can be used as a reference for compensation \nof the touchscreen parameters. Temperature measurement is optimised for temperature \nfrom 0 °C to 85 °C.\n         \nTEMP_CTRL Temperature sensor setup\nAddress: 0x60\nType: R/W\nReset: 0x00\nDescription: Temperature sensor setupTable 17. Touchscreen parameters\nAddress Register name Bit Function\n0x60 TEMP_CTRL 8 Temperature sensor setup\n0x61 TEMP_DATA 16 Temperature data access port\n0x63 TEMP_TH 16 Threshold for te mperature controlled interrupt\n765 4 3 2 1 0\nRESERVED THRES_RANGE THRES_EN ACQ_MOD ACQ ENABLE\n[7:5] RESERVED\n[4]THRES_RANGE : \n\'0\' assert interrupt if te mperature is >= threshold\n\'1\' assert interrupt if otherwise \n[3]THRES_EN : temperature threshold enable\n[2]ACQ_MOD : \n\'0\' to acquire temperature for once only\n\'1\' to acquire temperature every 10mS \n[1]ACQ\n[0]ENABLE\nTemperature sensor STMPE811\n50/66 Doc ID 14489 Rev 5TEMP_DATA Temperature data\nAddress: 0x61 is MSB, 0x62 is LSB\nType: R\nReset: 0x00\nDescription: Temperature data access port\nTEMP_TH Temperature threshold\nAddress: 0x63 is MSB, 0x64 is LSB\nType: R/W\nReset: 0x00\nDescription: Threshold for temperature controlled interrupt1 1 1 0 9876543 2 1 0\nTEMPERATURE\n[11:0] TEMPERATURE : Temperature reading\nAbsolute temperature\n= ( VIO * temperature [11:0] ) / 7.51 (12-bit ADC)\n= ( VIO * temperature [9:0] ) / 7.51 (10-bit ADC)\nNote that VIO is used as a reference in temperature acquisition. \nVariations in VIO directly affect the accura cy of temperature acquired.\n1 1 1 0 9876543 2 1 0\nTEMP_TH\n[11:0] TEMP_TH : temperature threshold\nSTMPE811 GPIO controller\nDoc ID 14489 Rev 5 51/6613 GPIO controller\nA total of 8 GPIOs are available in the STMPE811 port expander device. Most of the GPIOs \nshare physical pins with some alternate functions. The GPIO controller contains the \nregisters that allow the host system to configure each of the pins into either a GPIO, or one of the alternate functions.  Unused GPIOs should be configured as outputs to minimize power consumption.\nA group of registers are used to control the exact function of each of the 8 GPIOs. The \nregisters and their respective addresses are listed in the following table.\n         \nAll GPIO registers are named as GPIO-x, where x represents the functional group.Table 18. GPIO control registers\nAddress Register nameSize\n(bit)Function\n0x10 GPIO_SET_PIN 8 Set pin register\n0x11 GPIO_CLR_PIN 8 Clear pin state\n0x12 GPIO_MP_STA 8 Monitor pin state\n0x13 GPIO_DIR 8 Set pin direction\n0x14 GPIO_ED 8 Edge detect status\n0x15 GPIO_RE 8Rising edge detection \nenable\n0x16 GPIO_FE 8Falling edge detection \nenable\n0x17 GPIO_ALT_FUNCT 8 Alternate function register\n76543 2 1 0\nGPIO-7 GPIO-6 GPIO-5 GPIO-4 GPIO-3 GPIO-2 GPIO-1 GPIO-0\nGPIO controller STMPE811\n52/66 Doc ID 14489 Rev 5GPIO_SET_PIN GPIO set pin register\nAddress: 0x10\nType: R/W\nReset: 0x00\nDescription: GPIO set pin register. \nWriting 1 to this bit causes the corresponding GPIO to go to 1 state. Writing 0 has no effect.\nGPIO_CLR_PIN Clear pin state register\nAddress: 0x11\nType: R/W\nReset: 0x00\nDescription: GPIO clear pin state register. \nWriting ‘1’ to this bit causes the corresponding GPIO to go to 0 state.Writing ‘0’ has no effect.\nGPIO_MP_STA GPIO monito r pin state register\nAddress: 0x12\nType: R/W\nReset: 0x00\nDescription: GPIO monitor pin state. \nReading this bit yields the current state of the bit. Writing has no effect.\nGPIO_DIR GPIO set pin direction\nAddress: 0x13\nType: R/W\nReset: 0x00\nDescription: GPIO set pin direction register. \nWriting ‘0’ sets the corr esponding GPIO to input state, and ‘1’ sets it to output state. \nAll bits are ‘0’ on reset.\nSTMPE811 GPIO controller\nDoc ID 14489 Rev 5 53/66GPIO_ED_STA GPIO edge detect status\nAddress: 0x14\nType: R/W\nReset: 0x00\nDescription: GPIO edge detect status register. An edge transition has been detected.\nGPIO_RE Rising edge register\nAddress: 0x15\nType: R/W\nReset: 0x00\nDescription: GPIO rising edge detection enable register. \nSetting this bit to ‘1’ would enable the detection of the rising edge transition.The detection would be reflected in the GPIO edge detect status register.\nGPIO_FE Falling edge detect ion enable register\nAddress: 0x16\nType: R/W\nReset: 0x00\nDescription: Setting this bit to ‘1’ would enable th e detection of the falling edge transition.\nThe detection would be reflected in the GPIO edge detect status register.\nGPIO_ALT_FUNCT Alternate function register\nAddress: 0x17\nType: R/W\nReset: 0x0F\nDescription: Alternate function register. "‘0’ sets the corresponding pin to function as \ntouchscreen/ADC, and ‘1’ sets it into GPIO mode.\n13.0.1 Power supply\nThe STMPE811 GPIO operates from a separate supply pin (VIO). This dedicated supply pin \nprovides a level-shifting feature to the STMPE811. The GPIO remains valid until VIO is \nremoved.\nThe host system may choose to turn off Vcc supply while keeping VIO supplied. However it is \nnot allowed to turn off supply to VIO, while keeping the Vcc supplied.\nThe touchscreen is always powered by VIO. For better resolution and noise immunity, VIO \nabove 2.8 V is advised.\nGPIO controller STMPE811\n54/66 Doc ID 14489 Rev 513.0.2 Power-up reset (POR)\nThe STMPE811 is equipped with an internal POR circuit that holds the device in reset state, \nuntil the VIO supply input is valid. The in ternal POR is tied to the VIO supply pin.\nOn power-up reset, all GPIOs are set as input.\nSTMPE811 Maximum rating\nDoc ID 14489 Rev 5 55/6614 Maximum rating\nStressing the device above the ratings listed in the “Absolute maximum ratings” table may \ncause permanent damage to the device. These are stress ratings only, and operation of the \ndevice at these or any other conditions above those indicated in the operating sections of this specification is not imp lied. Exposure to absolute ma ximum rating conditions for \nextended periods may affect the device’s reliability. \n         Table 19. Absolute maximum ratings\nSymbol Parameter Value Unit\nVCC Supply voltage 4.5 V\nVIO GPIO supply voltage 4.5 V\nESD ESD protection on each GPIO pin (air discharge) 4 kV\nT Operating temperature -40 - 85 °C\nTSTG Storage temperature -65 - 155 °C\nTJ Thermal resistance junction-ambient 96 °C/W\nMaximum rating STMPE811\n56/66 Doc ID 14489 Rev 514.1 Recommended op erating conditions\n         Table 20. Power consumption\nSymbol Parameter Test conditionValue\nUnit\nMin Typ Max\nVcc Core supply voltage\nVio >= Vcc1.65 − 3.6 V\nVIO I/O supply voltage 1.65 − 3.6 V\nICC-active Core supply currentTouchscreen \ncontroller at 100 Hz sampling\nV\nCC=1 . 8 −3.3 V− 0.5 1.0 µA\nIIO-active I/O supply currentTouchscreen \ncontroller at 100 Hz \nsampling\nVIO=1 . 8V− 0.8 1.2 mA\nIIO-active I/O supply currentTouchscreen \ncontroller at 100 Hz \nsampling\nVIO=3 . 3V− 2.0 2.8 mA\nICC-\nhibernateCore supply currentHibernate state, no \nI2C/SPI activity\nVCC=1 . 8V− 0.5 1 µA\nIIO-hibernate I/O supply currentHibernate state, no \nI2C/SPI activity\nVIO=1 . 8 −3.3 V− 0.5 1 µA\nHibernate state, no \nI2C/SPI activity\nVIO=3 . 3V− 1.0 3.0 µA\nSTMPE811 Electrical  specifications\nDoc ID 14489 Rev 5 57/6615 Electrical specifications\nTable 21. DC electrical characteristics (-40 °C to 85 °C) all GPIOs comply to JEDEC \nstandard JESD-8-7)\nTable 22. AC electrical characteristics  (-40 °C to 85 °C)\n         Symbol Parameter Test conditionValue\nUnit\nMin Typ Max\nVIL Input voltage low state VIO=1 . 8  −3.3 V -0.3 V − 0.20 VIO V\nVIH Input voltage high state VIO=1 . 8  −3.3 V 0.80 VIO − VIO+0 . 3V V\nVOL Output voltage low state VIO = 1.8 V, \nIOL= 4 mA\nVIO = 3.3 V, \nIOL= 8 mA-0.3 V − 0.15 VIO V\nVOHOutput voltage high \nstate0.85 VIO −− V\nVOL\n(I2C/SPI)Output voltage low stateVCC = 1.8 V, \nIOL= 4 mA\nVCC = 3.3 V, \nIOL= 8 mA-0.3 V − 0.15 VCC V\nVOH\n(I2C/SPI)Output voltage high \nstate0.85 VCC − VCC+0.3V V\nSymbol Parameter Test conditionValue\nUnit\nMin Typ Max\nCLKI2Cmax I2C maximum SCLK VIO=1 . 8-3 . 3V 4 0 0 −− kHz\nCLKSPImax SPI maximum clockVIO=1 . 8V 8 0 0 −− kHz\nVIO= 3.3 V 1000 −− kHz\nElectrical specifications STMPE811\n58/66 Doc ID 14489 Rev 5Table 23. ADC spec ification (-40 °C to 85 °C)\nTable 24. Switch drivers specificationParameter Test conditionValue\nUnit\nMin Typ Max\nFull-scale input span 0 − Vref V\nAbsolute input range −− VCC+0.2 V\nInput capacitance − 25 − pF\nLeakage current − 0.1 − µA\nResolution − 12 − Bits\nNo missing codes 11 − Bits\nIntegral linearity error − ±4 − Bits\nOffset error − ±5 − LSB\nGain error − ±14 ±18 LSB\nNoise Including internal Vref − 70 − µVrms\nPower supply rejection ratio − 50 − dB\nThroughput rate − 180 − ksps\nParameter Test conditionValue\nUnit\nMin Typ Max\nON resistance X+, Y+ − 5.5 − Ω\nON resistance X-, Y - − 7.3 − Ω\nDrive current Duration 100 ms −− 50 mA\nSTMPE811 Package mechanical data\nDoc ID 14489 Rev 5 59/6616 Package mechanical data\nIn order to meet environmental requirements, ST offers these devices in different grades of \nECOPACK® packages, depending on their level of environmental compliance. ECOPACK® \nspecifications, grade definitions and product status are available at: www.st.com . \nECOPACK® is an ST trademark.\nPackage mechanical data STMPE811\n60/66 Doc ID 14489 Rev 5Figure 12. Package outline for QFN16 (3 x 3 x 1 mm) - 0.50 pitch\n1. Drawing not to scale.7185330_F\nSTMPE811 Package mechanical data\nDoc ID 14489 Rev 5 61/66T a b l e  2 5 . P a c k a g e  m e c h a n i c a l  d a t a  f o r  Q F N 1 6  ( 3x3x  1  m m )  - 0.50 pitch\nSymbolMillimeters\nMin Typ Max\nA 0 . 8 00 . 9 01 . 0 0\nA1 − 0.02 0.05\nA3 − 0.20 −\nb 0 . 1 80 . 2 50 . 3 0\nD 2 . 8 53 . 0 03 . 1 5\nD1 − 1.50 −\nD2 See exposed pad variation\nE 2 . 8 53 . 0 03 . 1 5\nE1 − 1.50 −\nE2 See exposed pad variation\ne 0 . 4 50 . 5 00 . 5 5L 0 . 3 00 . 4 00 . 5 0\nddd\n−− 0.05\nTable 26. Exposed pad variation\nSymbolMillimeters\nMin Typ Max\nD2 1.70 1.80 1.90\nE2 1.70 1.80 1.90\nPackage mechanical data STMPE811\n62/66 Doc ID 14489 Rev 5Figure 13. Recommended footprint\n1. Drawing not to scale.\n         \nTable 27. Footprint dimensions\nSymbolMillimeters\nMin Typ Max\nA − 3.8 −\nB − 3.8 −\nC − 0.5 −\nD − 0.3 −\nE − 0.8 −\nF − 1.5 −\nG − 0.35 −\n\nSTMPE811 Package mechanical data\nDoc ID 14489 Rev 5 63/66Figure 14. Carrier tape for QFN16 (3 x 3 x 1 mm) - 0.50 pitch\n1. Drawing not to scale.787597 8\nPackage mechanical data STMPE811\n64/66 Doc ID 14489 Rev 5Figure 15. Reel information for QFN16 (3 x 3 x 1 mm) - 0.50 pitch\n1. Drawing not to scale.787597 8_14\nSTMPE811 Revision history\nDoc ID 14489 Rev 5 65/6617 Revision history\n         Table 28. Document revision history\nDate Revision Changes\n09-Jun-2008 1 Initial release.\n22-Apr-2009 2Document status prom oted from preliminary data to datasheet.\nModified: title and package silhouette in the cover page.\nSection 6: STMPE811 registers , Section 7: System and identification \nregisters , Section 10: Touchscreen controller  and Section 13: GPIO \ncontroller : content reworked to improve readability, no technical \nchanges.\nUpdated: Figure 6 , Table 3 , Section 14: Maximum rating  and \nSection 16: Package mechanical data .\n22-Sep-2010 3Modified: Table 11: Register summary map table  and information \nrelated to the TSC_DATA_X register.\n10-Jan-2011 4Updated: Table 11: Register summary map table  and information \nrelated to the ADC control register, Table 13: ADC controller register \nsummary table  and removed Table 25.\n18-Apr-2011 5 Updated: Temperature sensors registers information.\nSTMPE811\n66/66 Doc ID 14489 Rev 5 \nPlease Read Carefully:\nInformation in this document is provided solely in connection with ST products. STMicroelectronics NV and its subsidiaries (“ST ”) reserve the\nright to make changes, corrections, modifications or improvements, to this document, and the products and services described he rein at any\ntime, without notice.\nAll ST products are sold pursuant to ST’s terms and conditions of sale.\nPurchasers are solely responsible for the choice, selection and use of the ST products and services described herein, and ST as sumes no\nliability whatsoever relating to the choice, selection or use of the ST products and services described herein.\nNo license, express or implied, by estoppel or otherwise, to any intellectual property rights is granted under this document. I f any part of this\ndocument refers to any third party products or services it shall not be deemed a license grant by ST for the use of such third party products\nor services, or any intellectual property contained therein or considered as a warranty covering the use in any manner whatsoev er of such\nthird party products or services or any intellectual property contained therein.\nUNLESS OTHERWISE SET FORTH IN ST’S TERMS AND CONDITIONS OF SALE ST DISCLAIMS ANY EXPRESS OR IMPLIED\nWARRANTY WITH RESPECT TO THE USE AND/OR SALE OF ST PRODUCTS INCLUDING WITHOUT LIMITATION IMPLIED\nWARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTI CULAR PURPOSE (AND THEIR EQUIVALENTS UNDER THE LAWS\nOF ANY JURISDICTION), OR INFRINGEMENT OF ANY PATENT, COPYRIGHT OR OTHER INTELLECTUAL PROPERTY RIGHT.\nUNLESS EXPRESSLY APPROVED IN WRITING BY AN AUTHORIZED ST REPRESENTATIVE, ST PRODUCTS ARE NOT\nRECOMMENDED, AUTHORIZED OR WARRANTED FOR USE IN MILITA RY, AIR CRAFT, SPACE, LIFE SAVING, OR LIFE SUSTAINING\nAPPLICATIONS, NOR IN PRODUCTS OR SYSTEMS WHERE FAILURE OR MALFUNCTION MAY RESULT IN PERSONAL INJURY,DEATH, OR SEVERE PROPERTY OR ENVIRONMENTAL DAMAGE. ST PRODUCTS WHICH ARE NOT SPECIFIED AS "AUTOMOTIVE\nGRADE" MAY ONLY BE USED IN AUTOMOTIVE APPLICATIONS AT USER’S OWN RISK.\nResale of ST products with provisions different from the statements and/or technical features set forth in this document shall immediately void\nany warranty granted by ST for the ST product or service described herein and shall not create or extend in any manner whatsoev er, any\nliability of ST.\nST and the ST logo are trademarks or registered trademarks of ST in various countries.\nInformation in this document supersedes and replaces all information previously supplied.\nThe ST logo is a registered trademark of STMicroelectronics. All other names are the property of their respective owners.\n© 2011 STMicroelectronics - All rights reserved\nSTMicroelectronics group of companies\nAustralia - Belgium - Brazil - Canada - China - Czech Republic - Finland - France - Germany - Hong Kong - India - Israel - Ital y - Japan - \nMalaysia - Malta - Morocco - Philippines - Singapore - Spain - Sweden - Switzerland - United Kingdom - United States of America\nwww.st.com\n'}]
!==============================================================================!
### Component Summary: STMPE811QTR

**Description:**
The STMPE811 is an advanced resistive touchscreen controller integrated with an 8-bit GPIO expander. It is designed to interface with a main digital ASIC via I2C or SPI communication protocols. The device is particularly useful in mobile multimedia platforms, providing additional GPIOs to overcome the limitations of the main digital engine. It features a built-in 4-wire touchscreen controller with a movement detection algorithm and a 12-bit ADC.

**Key Specifications:**
- **Voltage Ratings:**
  - Operating Voltage: 1.8V to 3.3V
- **Current Ratings:**
  - Core Supply Current (Active): 0.5 to 1.0 µA (at VCC = 1.8V)
  - I/O Supply Current (Active): 0.8 to 2.8 mA (at VIO = 3.3V)
  - Hibernate Current: 0.5 to 1 µA (at VCC = 1.8V)
- **Power Consumption:**
  - Active Mode: Varies based on I/O voltage and sampling frequency
  - Hibernate Mode: Very low power consumption
- **Operating Temperature Range:**
  - -40°C to 85°C
- **Package Type:**
  - QFN16 (3x3 mm)
- **Special Features:**
  - Integrated 4-wire touchscreen controller
  - 8 GPIOs with configurable functions
  - 12-bit ADC with 8 input channels
  - Interrupt output pin and wakeup feature on each I/O
  - 25 kV air-gap ESD protection (system level)
  - 4 kV HBM ESD protection (device level)
- **Moisture Sensitive Level (MSL):**
  - MSL Level: Not specified in the provided text, but typically follows JEDEC J-STD-020E standards.

**Typical Applications:**
- Portable media players
- Game consoles
- Mobile phones and smartphones
- GPS devices

### Summary:
The STMPE811QTR is a versatile component that enhances the functionality of mobile devices by providing additional GPIOs and a robust touchscreen interface. Its low power consumption and integrated features make it suitable for applications requiring efficient power management and user interaction through touchscreens. The device's ability to operate in various communication modes (I2C and SPI) allows for flexible integration into different systems.