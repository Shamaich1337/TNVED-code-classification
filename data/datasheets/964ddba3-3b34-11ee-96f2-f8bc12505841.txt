[{'role': 'system', 'content': 'You are a technical specialist with expertise in electronics. Your task is to analyze datasheets for electronic components and provide a concise summary of the product’s key characteristics and specifications. In addition, you need to gather textual information about the component, including its description and typical applications.Instructions:    Identify the correct component in the datasheet using the provided product code.    Summarize key parameters, including:        Voltage ratings        Current ratings        Power consumption        Operating temperature range        Package type        Special features or notes (if applicable)        Moisture Sensetive Level JEDEC J-STD-020E    Provide a short description of the component, including what it is (e.g., transistor, microcontroller, sensor) and its primary function.    Explain typical applications for the component (e.g., power management, signal processing, data storage, etc.).    Be thorough and accurate: Ensure the information corresponds specifically to the product code, as some datasheets cover multiple variants.Your goal is to create a clear and accurate technical summary that includes both key specifications and a description of what the component is used for.'}, {'role': 'user', 'content': 'Give me information about the component of SX1261IMLTRT production of SEMTECH from the text:1 of 111\nSemtech\n SX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019SX1261/2\nLong Range, Low Power, sub-GHz \nRF Transceiver\nwww.semtech.comFigure A: SX1261/2 Block Diagram\nGeneral Description\nSX1261 and SX1262 sub-GHz radio transceivers are ideal for \nlong range wireless applic ations. Both devices are \nd e s i g n e d  f o r  l o n g  b a t t e r y  l i f e  w i t h  j u s t  4 . 2  m A  o f  a c t i v e  receive current consumption. The SX1261 can transmit up \nto +15 dBm and the SX1262 can transmit up to +22 dBm \nwith highly efficient integrated power amplifiers.\nThese devices support LoRa®  modulation for LPWAN use \ncases and (G)FSK modulation for legacy use cases. The \ndevices are highly configurable to meet different application requirements ut ilizing the global LoRaWAN\nTM\nstandard or proprietary protocols. \nThe devices are designed to comply with the physical layer \nrequirements of the LoRaWANTM specification released by \nthe LoRa AllianceTM. \nThe radio is suitable for syst ems targeting compliance with \nradio regulations including but not limited to ETSI EN 300 \n220, FCC CFR 47 Part 15, Ch ina regulatory requirements \nand the Japanese ARIB T-108. Continuous frequency \ncoverage from 150 MHz to 960 MHz allows the support of all major sub-GHz ISM bands around the world. Applications\nThe level of integration and the low consumption within \nSX1261/2 enable a new generation of Internet of Things \napplications. \n• Smart meters\n• Supply chain and logistics\n• Building automation\n• Agricultural sensors\n• Smart cities \n• Retail store sensors\n• Asset tracking\n• Street lights\n• Parking sensors\n• Environmental sensors\n• Healthcare\n• Safety and security sensors\n• Remote control applicationsLoRaTM\nModemAnalog Front End & Data Conversion\nFSK\nModem Data\nBufferADC\n    PALNA\nMatching\n+\nLPF\nLDO DC-DCSPIProtocol\nEngine\nOSCPLL\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 20192 of 111\nSemtech\n www.semtech.comOrdering Information\nQFN 24 Package, Pb-free, Haloge n free, RoHS/WEEE compliant product.\nRevision HistoryPart Number Delivery Minimum Order Quantity\nSX1261IMLTRT Tape & Reel 3’000 pieces\nSX1262IMLTRT Tape & Reel 3’000 pieces\nVersion ECO Date Modifications \n1.0 039166 October 2017 First Release\n1.1 040046 December 2017Addition of a note “when using a TCXO” to explain the XTA cap value change with TCXO \nin chapter 4.1.3 XTAL Control Block\nNew sub-chapter 5.1.5 “Considerations on the DC-DC Inductor Selection”Addition of a note recommending 12 symbols of LoRa preamble for optimal \nperformances in chapter 6.1.1.1 Spreading Factor\nAddition of a note on SetLoRaSymbNumTimeout in chapter 9.6 Receive ModeCorrection of RandomNumber Gen[] values in chapter 12.1 Register Map\n1.2 047267 June 2019Miscellaneous typographical error corrections\nAddition of a “Known Limitations” section, see details in Section 15.\nClarification of the XOSC_START_ERR usage in Section 13.3.6\nRename variable timeout(23:0) to delay(23:0)  for clarification in Section 13.3.6\nDescription of how to include RxGain register in the retention memory, see Section 9.6\nCorrection of the ClearDeviceError command\nCorrection made to SetTxParams in Table 13-21\nClarification of the maximum packet leng th in FSK mode with address filtering \nconfiguration\nClarification of the SignalRssiPkt calculationUpdate of the sequence in section 14.2 Circuit Configuration for Basic Tx Operation\nClarification of the Rx and Sleep periods in RxDutyCycle mode with TCXO enabled\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 20193 of 111\nSemtech\n www.semtech.comTable of Contents\n1. Architecture ................................................................................................................ .................................... 11\n2. Pin Connection .............................................................................................................. ................................ 12\n2.1 I/O Description ........................................................................................................... ...................... 12\n2.2 Package View .............................................................................................................. ...................... 13\n3. Specifications .............................................................................................................. ................................... 14\n3.1 ESD Notice ................................................................................................................ .......................... 14\n3.2 Absolute Maximum Ratings .................................................................................................. ...... 14\n3.3 Operating Range ........................................................................................................... ................... 14\n3.4 Crystal Specifications .................................................................................................... ................. 15\n3.5 Electrical Specifications ................................................................................................. ................ 15\n3.5.1 Power Consumption ........................................................................................................ .. 16\n3.5.2 General Specifications ................................................................................................... .... 18\n3.5.3 Receive Mode Specifications........................................................................................... 193.5.4 Transmit Mode Specifications ........................................................................................ 21\n3.5.5 Digital I/O Specifications ............................................................................................... ... 21\n4. Circuit Description......................................................................................................... ............................... 22\n4.1 Clock References .......................................................................................................... .................... 22\n4.1.1 RC Frequency References................................................................................................. 2 2\n4.1.2 High-Precision Frequency Reference........................................................................... 224.1.3 XTAL Control Block ....................................................................................................... ...... 23\n4.1.4 TCXO Control Block ....................................................................................................... ..... 24\n4.2 Phase-Locked Loop (PLL) ................................................................................................... ........... 24\n4.3 Receiver .................................................................................................................. ............................. 25\n4.3.1 Intermediate Frequencies ................................................................................................ 2 5\n4.4 Transmitter ............................................................................................................... .......................... 26\n4.4.1 SX1261 Power Amplifier Specifics................................................................................. 27\n4.4.2 SX1262 Power Amplifier Specifics................................................................................. 29\n4.4.3 Power Amplifier Summary ............................................................................................... 31\n5. Power Distribution .......................................................................................................... ............................. 32\n5.1 Selecting DC-DC Converter or LDO Regulation ................................................................... 32\n5.1.1 Option A: SX1261 with DC-DC Regulator ................................................................... 335.1.2 Option B: SX1261 with LDO Regulator ........................................................................ 34\n5.1.3 Option C: SX1262 wi th DC-DC Regulator ................................................................... 34\n5.1.4 Option D: SX1262 with LDO Regulator........................................................................ 355.1.5 Consideration on the DC-DC Inductor Selection..................................................... 35\n5.2 Flexible DIO Supply ....................................................................................................... ................. 36\n6. Modems ...................................................................................................................... ..................................... 37\n6.1 LoRa® Modem ............................................................................................................... .................... 37\n6.1.1 Modulation Parameter ..................................................................................................... .3 7\n6.1.2 LoRa® Packet Engine ...................................................................................................... .... 40\n6.1.3 LoRa® Frame .............................................................................................................. ............ 40\n6.1.4 LoRa® Time-on-Air........................................................................................................ ....... 41\n6.1.5 LoRa® Channel Activity Detection (CAD) .................................................................... 41\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 20194 of 111\nSemtech\n www.semtech.com6.2 FSK Modem ................................................................................................................. ....................... 43\n6.2.1 Modulation Parameter ..................................................................................................... .4 3\n6.2.2 FSK Packet Engine........................................................................................................ ....... 44\n6.2.3 FSK Packet Format ........................................................................................................ ...... 45\n7. Data Buffer ................................................................................................................. ..................................... 48\n7.1 Principle of Operation .................................................................................................... ................ 48\n7.2 Data Buffer in Receive Mode ............................................................................................... ........ 49\n7.3 Data Buffer in Transmit Mode .............................................................................................. ....... 49\n7.4 Using the Data Buffer ..................................................................................................... ................ 49\n8. Digital Interface and Control ............................................................................................... ..................... 50\n8.1 Reset ..................................................................................................................... ................................ 50\n8.2 SPI Interface ............................................................................................................. .......................... 50\n8.2.1 SPI Timing When the Transceiver is in Active Mode............................................... 508.2.2 SPI Timing When the Transceiver Leaves Sleep Mode .......................................... 51\n8.3 Multi-Purpose Digital Input/Output (DIO) ............................................................................. 52\n8.3.1 BUSY Control Line ........................................................................................................ ....... 52\n8.3.2 Digital Input/Output ..................................................................................................... ..... 54\n8.4 Digital Interface Status versus Chip modes ........................................................................... 54\n8.5 IRQ Handling .............................................................................................................. ....................... 55\n9. Operational Modes ........................................................................................................... ........................... 56\n9.1 Startup ................................................................................................................... .............................. 56\n9.2 Calibration ............................................................................................................... ........................... 56\n9.2.1 Image Calibration for Specific Frequency Bands ..................................................... 56\n9.3 Sleep Mode ................................................................................................................ ........................ 57\n9.4 Standby (STDBY) Mode ...................................................................................................... ........... 57\n9.5 Frequency Synthesis (FS) Mode ............................................................................................. .... 58\n9.6 Receive (RX) Mode ......................................................................................................... ................. 58\n9.6.1 PA Ramping............................................................................................................... ............ 59\n9.7 Active Mode Switching Time ................................................................................................ ...... 59\n9.8 Transceiver Circuit Modes Graphical Illustration ................................................................. 60\n10. Host Controller Interface .................................................................................................. ....................... 61\n10.1 Command Structure ........................................................................................................ ............ 61\n10.2 Transaction Termination .................................................................................................. .......... 61\n11. List of Commands ........................................................................................................... ........................... 62\n11.1 Operational Modes Commands ............................................................................................... 62\n11.2 Register and Buff er Access Commands ................................................................................ 63\n11.3 DIO and IRQ Control ...................................................................................................... ............... 63\n11.4 RF, Modulation an d Packet Commands ................................................................................ 63\n11.5 Status Commands .......................................................................................................... ............... 64\n12. Register Map ............................................................................................................... ................................. 65\n12.1 Register Table ........................................................................................................... ...................... 65\n13. Commands Interface......................................................................................................... ........................ 67\n13.1 Operational Modes Functions .............................................................................................. .... 67\n13.1.1 SetSleep................................................................................................................ ................ 67\n13.1.2 SetStandby .............................................................................................................. ............ 68\n13.1.3 SetFs................................................................................................................... .................... 68\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 20195 of 111\nSemtech\n www.semtech.com13.1.4 SetTx ................................................................................................................... ................... 68\n13.1.5 SetRx................................................................................................................... ................... 69\n13.1.6 StopTimerOnPreamble ................................................................................................... 70\n13.1.7 SetRxDutyCycle .......................................................................................................... ....... 71\n13.1.8 SetCAD.................................................................................................................. ................ 73\n13.1.9 SetTxContinuousWave.................................................................................................... 7 3\n13.1.10 SetTxInfinitePreamble .................................................................................................. 74\n13.1.11 SetRegulatorMode....................................................................................................... .. 74\n13.1.12 Calibrate Function..................................................................................................... ..... 75\n13.1.13 CalibrateImage ......................................................................................................... ....... 75\n13.1.14 SetPaConfig ............................................................................................................ .......... 76\n13.1.15 SetRxTxFallbackMode................................................................................................... 7 7\n13.2 Registers and Buffer Access .............................................................................................. ......... 78\n13.2.1 WriteRegister Function .................................................................................................. .7 8\n13.2.2 ReadRegister Function................................................................................................... .7 8\n13.2.3 WriteBuffer Function .................................................................................................... ... 78\n13.2.4 ReadBuffer Function ..................................................................................................... ... 79\n13.3 DIO and IRQ Control Functions ............................................................................................ .... 79\n13.3.1 SetDioIrqParams......................................................................................................... ....... 79\n13.3.2 IrqMask ................................................................................................................. ................ 79\n13.3.3 GetIrqStatus ............................................................................................................ ............ 80\n13.3.4 ClearIrqStatus.......................................................................................................... ........... 81\n13.3.5 SetDIO2AsRfSwitchCtrl ................................................................................................... 81\n13.3.6 SetDIO3AsTCXOCtrl ....................................................................................................... .. 81\n13.4 RF Modulation and Pa cket-Related Functions ................................................................... 83\n13.4.1 SetRfFrequency.......................................................................................................... ........ 83\n13.4.2 SetPacketType........................................................................................................... ......... 83\n13.4.3 GetPacketType........................................................................................................... ........ 84\n13.4.4 SetTxParams ............................................................................................................. .......... 84\n13.4.5 SetModulationParams..................................................................................................... 85\n13.4.6 SetPacketParams......................................................................................................... ...... 88\n13.4.7 SetCadParams ............................................................................................................ ........ 92\n13.4.8 SetBufferBaseAddress .................................................................................................... .9 3\n13.4.9 SetLoRaSymbNumTimeout........................................................................................... 94\n13.5 Communication St atus Information ...................................................................................... 95\n13.5.1 GetStatus............................................................................................................... ............... 95\n13.5.2 GetRxBufferStatus....................................................................................................... ...... 96\n13.5.3 GetPacketStatus ......................................................................................................... ....... 96\n13.5.4 GetRssiInst ............................................................................................................. .............. 97\n13.5.5 GetStats ................................................................................................................ ................ 97\n13.5.6 ResetStats .............................................................................................................. .............. 97\n13.6 Miscellaneous ............................................................................................................ ..................... 98\n13.6.1 GetDeviceErrors......................................................................................................... ........ 98\n13.6.2 ClearDeviceErrors....................................................................................................... ....... 98\n14. Application ................................................................................................................ ................................... 99\n14.1 HOST API Basic Read Write Function ..................................................................................... 99\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 20196 of 111\nSemtech\n www.semtech.com14.2 Circuit Configuration for Basic Tx Operation ...................................................................... 99\n14.3 Circuit Configuration for Basic Rx Operation ....................................................................10014.4 Issuing Commands in the Right Order ................................................................................100\n14.5 Application Schematics ................................................................................................... .........101\n14.5.1 Application Design of the SX1261 with RF Switch .............................................10114.5.2 Application Design of the SX1262 with RF Switch .............................................101\n15. Known Limitations.......................................................................................................... .........................102\n15.1 Modulation Quality with 500 kHz LoRa®  Bandwidth .....................................................102\n15.1.1 Description............................................................................................................. ...........102\n15.1.2 Workaround.............................................................................................................. ........102\n15.2 Better Resistance of the SX 1262 Tx to Antenna Mismatch ..........................................102\n15.2.1 Description............................................................................................................. ...........102\n15.2.2 Workaround.............................................................................................................. ........103\n15.3 Implicit Header Mo de Timeout Behavior ...........................................................................103\n15.3.1 Description............................................................................................................. ...........103\n15.3.2 Workaround.............................................................................................................. ........103\n15.4 Optimizing the Inverted IQ Operation ................................................................................103\n15.4.1 Description............................................................................................................. ...........103\n15.4.2 Workaround.............................................................................................................. ........104\n16. Packaging Information...................................................................................................... .....................105\n16.1 Package Outline Drawing .................................................................................................. ......105\n16.2 Package Marking .......................................................................................................... ...............106\n16.3 Land Pattern ............................................................................................................. ....................106\n16.4 Reflow Profiles .......................................................................................................... ....................107\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 20197 of 111\nSemtech\n www.semtech.comList of Figures\nFigure 2-1: SX1261/2 Top View Pin Location QFN 4x4 24L ...............................................................  13\nFigure 4-1: SX1261/2 Block Diagram............................................................................................. ............  22\nFigure 4-2: TCXO Control Block................................................................................................. ..................  24\nFigure 4-3: PA Supply Scheme in DC-DC Mode ....................................................................................  27\nFigure 4-4: VR_PA versus Ou tput Power on the SX1261 ...................................................................  27\nFigure 4-5: Current versus Output Power wi th DC-DC Regulation on the SX1261..................  28\nFigure 4-6: Current versus Output Power with LDO Regulation on the SX1261.......................  28\nFigure 4-7: Power Linearity on the SX1261 wi th either LDO or DC-DC Regulation .................  29\nFigure 4-8: VR_PA versus Ou tput Power on the SX1262 ...................................................................  29\nFigure 4-9: Power Linearity on the SX1262...................................................................................... .......  30\nFigure 4-10: Current versus Programme d Output Power on the SX1262 ...................................  30\nFigure 5-1: SX1261 Diagram with the DC-DC Regulator Power Option.......................................  33Figure 5-2: SX1261 Diagram with the LDO Regulator Power Option............................................  34Figure 5-3: SX1262 Diagram with the DC-DC Regulator Power Option.......................................  34Figure 5-4: SX1262 Diagram with the LDO Regulator Power Option............................................  35Figure 5-5: Separate DIO Supply................................................................................................ .................  36\nFigure 6-1: LoRa® Signal Bandwidth............................................................................................. .............  38\nFigure 6-2: LoRa® Packet Format ................................................................................................ ................  40\nFigure 6-3: Fixed-Length Packet Format ......................................................................................... ........  45\nFigure 6-4: Variable-Length Packet Format...................................................................................... ......  45\nFigure 6-5: Data Whitening LFSR................................................................................................ ................  46\nFigure 7-1: Data Buffer Diagram ................................................................................................ .................  48\nFigure 8-1: SPI Timing Diagram................................................................................................. ..................  50\nFigure 8-2: SPI Timing Transition.............................................................................................. ..................  51\nFigure 8-3: Switching Time Definition .......................................................................................... ............  52\nFigure 8-4: Switching Time Definition in Active Mode.......................................................................  53Figure 9-1: Transceiver Circuit Modes .......................................................................................... ............  60\nFigure 13-1: Stopping Timer on Prea mble or Header Detection....................................................  71\nFigure 13-2: RX Duty Cycle Energy Profile...................................................................................... .........  72\nFigure 13-3: RX Duty Cycle when Receiving...................................................................................... .....  73\nFigure 14-1: Application Schematic of the SX1261 with RF Switch ............................................. 101\nFigure 14-2: Application Schematic of the SX1262 with RF Switch ............................................. 101\nFigure 16-1: QFN 4x4 Package Outline Drawing................................................................................. 1 05\nFigure 16-2: SX1261/2 Marking.................................................................................................. ............... 106\nFigure 16-3: QFN 4x4mm Land Pattern............................................................................................ ...... 106\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 20198 of 111\nSemtech\n www.semtech.comList of Tables\nTable 2-1: SX1261/2 Pinout in QFN 4x4 24L ...................................................................................... .....  12\nTable 3-1: ESD and Latch-up Notice ............................................................................................. .............  14\nTable 3-2: Absolute Maximum Ratings............................................................................................ .........  14\nTable 3-3: Operating Range..................................................................................................... .....................  14\nTable 3-4: Crystal Specifications .............................................................................................. ...................  15\nTable 3-5: Power Consumption................................................................................................... ................  16\nTable 3-6: Power Consumption in Transmit Mode ..............................................................................  17Table 3-7: General Specifications .............................................................................................. .................  18\nTable 3-8: Receive Mode Specifications......................................................................................... ..........  19\nTable 3-9: Transmit Mode Specifications........................................................................................ .........  21\nTable 3-10: Digital I/O Specifications ......................................................................................... ...............  21\nTable 4-1: Internal Foot Capacitor Configuration............................................................................... ..  23\nTable 4-2: Intermediate Frequencies in FSK Mode ..............................................................................  2 5\nTable 4-3: Intermediate Frequencies in LoRa® Mode..........................................................................  26Table 4-4: Power Amplifier Summary ............................................................................................. ..........  31\nTable 5-1: Regulation Type versus Circuit Mode................................................................................. ..  32\nTable 5-2: OCP Configuration ................................................................................................... ...................  32\nTable 5-3: Recommended 15 μH Inductors ......................................................................................... ...  35\nTable 6-1: Range of Spreading Factors (SF) ..................................................................................... .......  38\nTable 6-2: Signal Bandwidth Setting in LoRa® Mode...........................................................................  39Table 6-3: Coding Rate Overhead ................................................................................................ ..............  39\nTable 6-4: Bandwidth Definition in FSK Packet Type ..........................................................................  43Table 6-5: Whitening Initial Value ............................................................................................. .................  46\nTable 6-6: CRC Type Configuration.............................................................................................. ..............  47\nTable 6-7: CRC Initial Value ................................................................................................... ........................  47\nTable 6-8: CRC Polynomial ...................................................................................................... ......................  47\nTable 8-1: SPI Timing Requirements............................................................................................. .............  51\nTable 8-2: Switching Time...................................................................................................... .......................  53\nTable 8-3: Digital Pads Configuration for each Chip Mode...............................................................  54Table 8-4: IRQ Status Registers ................................................................................................ ....................  55\nTable 9-1: SX1261/2 Operating Modes............................................................................................ .........  56\nTable 9-2: Image Calibration Over the ISM Bands ................................................................................  57\nTable 9-3: Rx Gain Configuration............................................................................................... .................  58\nTable 10-1: SPI Interface Command Sequence .....................................................................................  61\nTable 11-1: Commands Selecting the Op erating Modes of the Radio .........................................  62\nTable 11-2: Commands to Access the Ra dio Registers and FIFO Buffer.......................................  63\nTable 11-3: Commands Controlling the Radio IRQs and DIOs.........................................................  63Table 11-4: Commands Controlling the RF and Packets Settings ..................................................  63Table 11-5: Commands Returning the Radio Status............................................................................  64Table 12-1: List of Registers .................................................................................................. ........................  65\nTable 13-1: SetSleep SPI Transaction ........................................................................................... .............  67\nTable 13-2: Sleep Mode Definition.............................................................................................. ...............  67\nTable 13-3: SetConfig SPI Transaction .......................................................................................... ............  68\nTable 13-4: STDBY Mode Configuration ........................................................................................... .......  68\nTable 13-5: SetFs SPI Transaction .............................................................................................. .................  68\nTable 13-6: SetTx SPI Transaction.............................................................................................. .................  68\nTable 13-7: SetTx Timeout Duration............................................................................................. .............  69\nTable 13-8: SetRx SPI Transaction.............................................................................................. .................  69\nTable 13-9: SetRx Timeout Duration ............................................................................................. ............  70\nTable 13-10: StopTimerOnPream ble SPI Transaction .........................................................................  70\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 20199 of 111\nSemtech\n www.semtech.comTable 13-11: StopOnPreambParam Definition......................................................................................  70\nTable 13-12: SetRxDutyCycle SPI Transaction.................................................................................... ....  71\nTable 13-13: SetCAD SPI Transaction............................................................................................ ............  73\nTable 13-14: SetTxContinuousW ave SPI Transaction..........................................................................  73\nTable 13-15: SendTxInfinitePrea mble SPI Transaction .......................................................................  74\nTable 13-16: SetRegulatorMode SPI Transaction..................................................................................  74\nTable 13-17: Calibrate SPI Transaction ......................................................................................... ............  75\nTable 13-18: Calibration Setting ............................................................................................... ..................  75\nTable 13-19: CalibrateImage SPI Transaction.................................................................................... .....  75\nTable 13-20: SetPaConfig SPI Transaction....................................................................................... ........  76\nTable 13-21: PA Operating Mode s with Optimal Settings.................................................................  76\nTable 13-22: SetRxTxFallbackM ode SPI Transaction ...........................................................................  77\nTable 13-23: Fallback Mode Definition.......................................................................................... ...........  77\nTable 13-24: WriteRegister SPI Transaction ..................................................................................... .......  78\nTable 13-25: ReadRegister SPI Transaction...................................................................................... .......  78\nTable 13-26: WriteBuffer SPI Transaction ....................................................................................... .........  78\nTable 13-27: ReadBuffer SPI Transaction ........................................................................................ .........  79\nTable 13-28: SetDioIrqParams SPI Transaction................................................................................... ...  79\nTable 13-29: IRQ Registers..................................................................................................... ........................  80\nTable 13-30: GetIrqStatus SPI Transaction ...................................................................................... ........  80\nTable 13-31: ClearIrqStatus SPI Transaction .................................................................................... .......  81\nTable 13-32: SetDIO2AsRfSwitc hCtrl SPI Transaction .........................................................................  81\nTable 13-33: Enable Configuration Definition ................................................................................... ....  81\nTable 13-34: SetDIO3asTCXOC trl SPI Transaction ................................................................................  81\nTable 13-35: tcxoVoltage Configuration Definition.............................................................................  82\nTable 13-36: SetRfFrequency SPI Transaction.................................................................................... ....  83\nTable 13-37: SetPacketType SPI Transaction..................................................................................... .....  83\nTable 13-38: PacketType Definition............................................................................................. ..............  83\nTable 13-39: GetPacketType SPI Transaction ..................................................................................... ....  84\nTable 13-40: SetTxParams SPI Transaction....................................................................................... .......  84\nTable 13-41: RampTime Definition ............................................................................................... .............  84\nTable 13-42: SetModulationPar ams SPI Transaction...........................................................................  85\nTable 13-43: GFSK ModParam1, Mo dParam2 & ModParam3 - br...................................................  85\nTable 13-44: GFSK ModP aram4 - PulseShape ....................................................................................... . 8 5\nTable 13-45: GFSK ModParam5 - Bandwidth ........................................................................................ . 8 6\nTable 13-46: GFSK ModParam6, Mo dParam7 & ModParam8 - Fdev .............................................  86\nTable 13-47: LoRa® ModParam1- SF ............................................................................................... ...........  87\nTable 13-48: LoRa® ModParam2 - BW .............................................................................................. .........  87\nTable 13-49: LoRa® ModParam3 - CR.............................................................................................. ...........  87\nTable 13-51: SetPacketParams SPI Transaction................................................................................... ..  88\nTable 13-52: GFSK PacketParam1 & Pa cketParam2 - PreambleLength ........................................  88\nTable 13-53: GFSK PacketParam3 - PreambleDetectorLength ........................................................  88\nTable 13-50: LoRa® ModParam4 - LowDataRateOptimize.................................................................  88Table 13-54: GFSK PacketPara m4 - SyncWordLength ........................................................................  89\nTable 13-55: Sync Word Programming ............................................................................................. .......  89\nTable 13-56: GFSK PacketParam5 - AddrComp .....................................................................................  89\nTable 13-57: Node Address Programming.......................................................................................... ....  89\nTable 13-58: Broadcast Address Programming.....................................................................................  90\nTable 13-59: GFSK PacketParam6 - PacketType ....................................................................................  90\nTable 13-60: GFSK PacketParam7 - PayloadLength.............................................................................  90Table 13-61: GFSK Pack etParam8 - CRCType ....................................................................................... ..  90\nTable 13-62: CRC Initial Value Programming ..................................................................................... ....  91\nTable 13-63: CRC Polynomial Programming ........................................................................................ ..  91\nTable 13-64: GFSK PacketParam9 - Whitening ..................................................................................... . 9 1\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201910 of 111\nSemtech\n www.semtech.comTable 13-65: Whitening Initial Value ........................................................................................... ..............  91\nTable 13-66: LoRa® PacketParam1 & Pa cketParam2 - PreambleLength.......................................  91\nTable 13-67: LoRa® PacketParam3 - HeaderType .................................................................................  9 2\nTable 13-68: LoRa® PacketPara m4 - PayloadLength............................................................................  92\nTable 13-69: LoRa® PacketParam5 - CRCType...................................................................................... ..  92\nTable 13-70: LoRa® PacketParam6 - InvertIQ..................................................................................... .....  92\nTable 13-71: SetCadParams SPI Transaction ...................................................................................... ....  92\nTable 13-72: CAD Number of Symbol Definition..................................................................................  93\nTable 13-73: CAD Exit Mode Definition.......................................................................................... ..........  93\nTable 13-74: SetBufferBaseAdd ress SPI Transaction ...........................................................................  93\nTable 13-75: SetLoRaSymbNumT imeout SPI Transaction.................................................................  94\nTable 13-76: Status Bytes Definition........................................................................................... ...............  95\nTable 13-77: GetStatus SPI Transaction......................................................................................... ...........  95\nTable 13-78: GetRxBufferS tatus SPI Transaction................................................................................. ..  96\nTable 13-79: GetPacketStatus SPI Transaction ................................................................................... ...  96\nTable 13-80: Status Fields..................................................................................................... .........................  96\nTable 13-81: GetRssiInst SPI Transaction ....................................................................................... ..........  97\nTable 13-82: GetStats SPI Transaction .......................................................................................... ............  97\nTable 13-83: ResetStats SPI Transaction........................................................................................ ...........  97\nTable 13-84: GetDeviceErrors SPI Transaction................................................................................... ....  98\nTable 13-85: OpError Bits...................................................................................................... .........................  98\nTable 13-86: ClearDeviceErrors SPI Transaction................................................................................. ...  98\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201911 of 111\nSemtech\n www.semtech.com1. Architecture\nThe SX1261 and SX1262 (designated hereafter as “SX1261/2”) are half-duplex transceivers capable of low power operation \nin the 150-960 MHz ISM frequency band. The radio co mprises four main blocks:\n1. Analog Front End : the transmit and receive chains, as well as the data converter interface to ensuing digital blocks. \nThe last stage of the transmit chain is different between the SX1261 and SX1262 chip versions. The SX1261 transceiveris capable of outputting +14/15 dBm maximum output power under DC-DC converter or \nLDO  supply. The SX1262 \ntransceiver is capable of delivering up to +22 dBm under the battery supply.\n2. Digital Modem Bank : a range of modulation options is available in the SX1261/2: \n\uf077LoRa®  Rx/Tx, BW = 7.8 - 500 kHz, SF5 to SF12, BR = 0.018 - 62.5 kb/s\n\uf077(G)FSK Rx/Tx, with BR = 0.6 - 300 kb/s\n3. Digital Interface and Control : this comprises all payload data and protocol processing as well as access to \nconfiguration of the radio via the SPI interface. \n4. Power Distribution : two forms of voltage regulation, DC-DC or linear regulator LDO , are available depending upon \nthe design priorities of the application. \nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201912 of 111\nSemtech\n www.semtech.com2. Pin Connection\n2.1 I/O Description\nTable 2-1: SX1261/2 Pino ut in QFN 4x4 24L\nPin \nNumberPin\nNameType\n(I = Input\nO = Ouptut)Description\n0 GND - Exposed Ground pad\n1 VDD_IN IInput voltage for power amplifier regulator, VR_PA\nSX1261: connected to pin 7 SX1262: connected to pin 10 \n2G ND - G round\n3 XTA - Crystal oscillator connection, can be used to input external reference clock \n4 XTB - Crystal oscillator connection\n5G ND - G round\n6 DIO3 I/O Multi-purpose digital I/O - external TCXO  supply voltage\n7 VREG O Regulated output voltage from the internal regulator LDO  / DC-DC\n8G ND - G round\n9 DCC_SW O DC-DC Switcher Output\n10 VBAT I Supply for the RFIC\n11 VBAT_IO I Supply for the Digital I/O interface pins (except DIO3)\n12 DIO2 I/O Multi-purpose digital I/O / RF Switch control\n13 DIO1 I/O Multi-purpose digital IO\n14 BUSY O Busy indicator\n15 NRESET I Reset signal, active low\n16 MISO O SPI slave output\n17 MOSI I SPI slave input\n18 SCK I SPI clock\n19 NSS I SPI Slave Select\n20 GND - Ground\n21 RFI_P I RF receiver input\n22 RFI_N I RF receiver input\n23 RFO O RF transmitter output (SX1261 low power PA or SX1262 high power PA)\n24 VR_PA - Regulated power amplifier supply\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201913 of 111\nSemtech\n www.semtech.com2.2 Package View\nFigure 2-1: SX1261/2 Top View Pin Location QFN 4x4 24L1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n1218\n17\n16\n15\n14\n1324\n23\n22\n21\n20\n19\n0\nGNDVDD_IN\nGND\nXTA\nXTB\nGND\nDIO3SCK\nMOSI\nMISO\nNRESET\nBUSY\nDIO1VR_PA\nRFO\nRFI_N\nRFI_P\nGND\nNSSVREG\nGND\nDCC_SW\nVBAT\nVBAT_IO\nDIO2\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201914 of 111\nSemtech\n www.semtech.com3. Specifications\n3.1 ESD Notice\nThe SX1261/2 transceivers are high-performance radio frequency devices, with high ESD and latch-up resistance. The chip \nshould be handled with all the necessary ESD precautions to avoid any permanent damage.\n3.2 Absolute Maximum Ratings\nStresses above the values listed below may cause permanent device failure. Exposure to absolute maximum ratings for \nextended periods may affect device reliability, reducing product life time.\n3.3 Operating Range\nOperating ranges define the limits for functional operation and parametric characteristics of the device. Functionality \noutside these limits is not guaranteed.Table 3-1: ESD and Latch-up Notice\nSymbol Description Min Typ Max Unit\nESD_HBMClass 2 of ANSI/ESDA/JEDEC Standard JS-001-2014\n(Human Body Model)-- 2 . 0 k V\nESD_CDM ESD Charged Device Model, JEDEC standard JESD22-C101D, class III - - 1000 V\nLU Latch-up, JEDEC standard JESD78 B, class I level A - - 100 mA\nTable 3-2: Absolute Maximum Ratings\nSymbol Description Min Typ Max Unit\nVDDmr Supply voltage, applies to VBAT and VBAT_IO -0.5 - 3.9 V\nTmr Temperature -55 - 125 °C\nPmr RF Input level - - 10 dBm\nTable 3-3: Operating Range\nSymbol Description Min Typ Max Unit\nVDDop Supply voltage, applies to VBAT and VBAT_IO 1.8 - 3.7 V\nTop Temperature under bias -40 - 85 °C\nClop Load capacitance on digital ports - - 20 pF\nML RF Input power - - 0 dBm\nVSWR Voltage Standing Wave Ratio at antenna port - - 10:1 -\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201915 of 111\nSemtech\n www.semtech.com3.4 Crystal Specifications\nTable 3-4: Crysta l Specifications\nThe reference frequency accuracy is de fined by the complete system, and should take into account precision of the \ntransmitter and the receiver, as well as  environmental parameters such as extr eme temperature limits. In a LoRaWANTM\nsystem, the expected reference frequency accuracy on the end-device should be about +/- 30 ppm under all operating \nconditions. This includes initial er ror, temperature drift and ageing over the lifetime  of the product.\n3.5 Electrical Specifications\nThe electrical specifications ar e given with the following conditions unless otherwise specified:\n•VBAT_IO = VBAT = 3.3 V, all current consumptions are given for VBAT connected to VBAT_IO\n• Temperature = 25 °C\n• FXOSC = 32 MHz, with specified crystal\n• FRF = 434/490/868/915 MHz\n• All RF impedances matched\n• Transmit mode output power defined into a 50 \uf057\uf020load impedance\n•FSK BER = 0.1%, 2-level FSK modulation without pre-filtering, BR = 4.8 kb/s, FDA = ± 5 kHz, BW_F = 20 kHz \ndouble-sided\n• LoRa®  PER = 1%, packet 64 bytes, preamble 8 symbols, CR = 4/5, CRC on payload enabled, explicit header mode\n•RX/TX specifications given using de fault RX gain step and direct tie connection between Rx and Tx\n•Blocking immunity, ACR  and co-channel rejection are given for a single tone (CW) interferer and referenced to \nsensitivity +3 dB\n• Optional TCXO  and RF Switch power consumption always excluded\nCaution!\nThroughout this docume nt, all receiver bandwidths are expressed as “double-sideband”. This is  valid for LoRa® and \nFSK modulations.Symbol Description Min Typ Max Unit\nFXOSC Crystal oscillator frequency - 32 - MHz\nCLOAD Crystal load capacitance - 10 - pF\nC0XTAL Crystal shunt capacitance 0.3 0.6 2 pF\nRSXTAL Crystal series resistance - 30 60 \uf057\nCMXTAL Crystal motional capacitance 1.3 1.89 2.5 fF\nDRIVE Drive level - - 100 \uf06dW\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201916 of 111\nSemtech\n www.semtech.com3.5.1 Power Consumption\nTable 3-5: Power Consumption\nSymbol Mode Conditions Min Typ Max Unit\nIDDOFFOFF mode\n(SLEEP mode\nwith cold start1)\n1. Cold start is equivalent to the device at POR or when the device is waking up from Sleep mode with all blocks OFF, see Section 13.1.1 "SetSleep" \non page 67All blocks off - 160 - nA\nIDDSLSLEEP mode\n(SLEEP mode\nwith warm start 2)\n2. Warm start is only happening when device is woke n from Sleep mode with its configuration retained, see Section 13.1.1 "SetSleep" on page 67Configuration retained \nConfiguration retained + RC64k-\n-600\n1.2--nA\n\uf06dA\nIDDSBR STDBY_RC mode RC13M , XOSC OFF - 0.6 - mA\nIDDSBX STDBY_XOSC mode XOSC ON - 0.8 - mA\nIDDFS Synthesizer modeDC-DC  mode used\nLDO  mode used--2.1\n3.55--mAmA\nIDDRXReceive mode\nDC-DC mode usedFSK 4.8 kb/s\nLoRa® 125 kHz\nRx Boosted\n3, FSK 4.8 kb/s\nRx Boosted, LoRa® 125 kHz\n3. For more details on how to set the device in Rx Boosted gain mode, see Section 9.6 "Receive (RX) Mode" on page 58  --\n-\n-4.24.6\n4.8\n5.3--\n-\n-mAmA\nmA\nmA\n LoRa® 125 kHz, VBAT = 1.8 V - 8.2 - mA\nReceive mode\nLDO  mode usedFSK 4.8 kb/s\nLoRa® 125 kHz\nRx Boosted, FSK 4.8 kb/s\nRx Boosted, LoRa® 125 kHz-\n-\n--8\n8.89.3\n10.1-\n-\n--mA\nmA\nmAmA\nTable 3-6: Power Consumption in Transmit Mode\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201917 of 111\nSemtech\n www.semtech.comSymbol Frequency Band PA Match / Condition Power Output Typical Unit\nIDDTX\nSX1261 1868/915 MHz +14 dBm+14 dBm, VBAT = 3.3 V\n+10 dBm VBAT = 3.3 V\n+14 dBm, VBAT = 1.8 V\n+10 dBm, VBAT = 1.8 V25.5\n18\n48\n34mA\nmAmA\nmA\n+14 dBm / optimal settings \n2+15 dBm, VBAT = 3.3 V\n+10 dBm VBAT = 3.3 V\n+15 dBm, VBAT = 1.8 V+10 dBm, VBAT = 1.8 V32.5\n15\n60\n29mA\nmAmA\nmA\n434/490 MHz +14 dBm+15 dBm, VBAT = 3.3 V+14 dBm, VBAT = 3.3 V\n+10 dBm, VBAT = 3.3 V+15 dBm, VBAT = 1.8 V\n+14 dBm, VBAT = 1.8 V\n+10 dBm, VBAT = 1.8 V25.5\n21\n14.546.5\n3926mA\nmA\nmAmA\nmA\nmA\nIDDTX\nSX1262 \n3868/915 MHz+22 dBm+22 dBm+20 dBm+17 dBm\n+14 dBm118\n102\n95\n90mA\nmAmA\nmA\n+20 dBm / optimal settings\n 4 +20 dBm 84 mA\n+17 dBm / optimal settings 4 +17 dBm 58 mA\n+14 dBm / optimal settings 4 +14 dBm 45 mA\n434/490 MHz+22 dBm+22 dBm+20 dBm\n+17 dBm+14 dBm107\n907563mA\nmA\nmAmA\n+20 dBm / optimal settings\n 4 +20 dBm 65 mA\n+17 dBm / optimal settings 4 +17 dBm 42 mA\n+14 dBm / optimal settings 4 +14 dBm 32 mA\n1. For SX1261, DC-DC mode is used for the whole IC. For more details, see Section 5.1 "Selecting DC-DC Conver ter or LDO Regulation" on page 32 .\n2. For more details on  optimal settings, see Section 13.1.14.1 "PA Optimal Settings" on page 76 .\n3. For SX1262, DC-DC mode is used for the IC core but the PA is supplied from VBAT. For more details, see Section 5.1 "Selecting DC-DC Converter or \nLDO Regulation" on page 32 .\n4. Optimal settings adapted to the specifie d output power. For more details, see Section 13.1.14.1 "PA Optimal Settings" on page 76\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201918 of 111\nSemtech\n www.semtech.com3.5.2 General Specifications\nTable 3-7: General Specifications\nSymbol Description Conditions Min Typ Max Unit\nFR Synthesizer frequency range 150 - 960 MHz \nFSTEP Synthesizer frequency stepBit 2 of TxModulation = 1 (main use)\nBit 2 of TxModulation = 0 (see Section 15. )-\n-0.95\n122--HzHz\nPHN\n1 2Synthesizer phase noise\n(for 868 / 915 MHz) 1 kHz offset\n10 kHz offset\n100 kHz offset\n1MHz offset\n10 MHz offset-\n--\n-\n--75-95\n-100\n-120\n-135---\n-\n-dBc/HzdBc/HzdBc/Hz\ndBc/Hz\ndBc/Hz\nTS_FS Synthesizer wake-up time From STDBY_XOSC mode - 40 - \uf06ds\nTS_HOP Synthesizer hop time 10 MHz step - 30 - \uf06ds\nTS_OSCCrystal oscillator \nwake-up timefrom STDBY_RC\n3 - 150 - \uf06ds\nOSC_TRMCrystal oscillator trimming\nrange for crystal frequency \nerror compensation 4+/-15 +/-30 - ppm\nBR_F Bit rate, FSKProgrammable\nMinimum modulation index is 0.50.6 - 300 5 kb/s\nFDA Frequency deviation, FSKProgrammable\nFDA + BR_F / 2 \uf03d\uf03c 250 kHz0.6 - 200 kHz\nBR_L Bit rate LoRa®Min. for SF12, BW_L = 7.8 kHz\nMax. for SF5, BW_L = 500 kHz0.018 - 62.5 6 kb/s\nBW_L Signal BW, LoRa® Programmable 7.8 - 500 6 kHz\nSF Spreading factor for LoRa® Programmable, chips/symbol = 2^SF 5 - 12 -\nVTCXORegulated voltage range for \nTCXO voltage supplyMin/Max values in typical conditions,\nTyp value for default setting\nVDDop > VTCXO + 200 mV1.6 1.7 3.3 V\nILTCXOLoad current for\nTCXO  regulator-1 . 5 4 m A\nTSVTCXOStart-up time for\nTCXO  regulatorFrom enable to regulated voltage\nwithin 25 mV from target-- 1 0 0 \uf06ds\nIDDTCXOCurrent consumption of the \nTCXO  regulatorQuiescent current\nRelative to load current---\n170\n2\uf06dA\n%\nATCXOAmplitude voltage for \nexternal TCXO\napplied to XTA pinprovided through a 220 \n\uf057 resistor \nin series with a 10 pF capacitance\nSee Section 4.1.4 "TCXO Control Block" on \npage 240.4 0.6 1.2 Vpk-pk \nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201919 of 111\nSemtech\n www.semtech.com3.5.3 Receive Mode Specifications1. Phase Noise specifications are given for the recommended PLL BW to be used for the specific modulation/BR, optimized setting s may be used for \nspecific applications\n2. Phase Noise is not constant over frequency, due to the topology of the PLL, for two frequencies close to each other, the pha se noise could change \nsignificantly\n3. Wake-up time till crystal oscill ator frequency is within +/- 10 ppm\n4. OSC_TRIM is the available trimming range to compensate for crystal initial frequency error and to allow crystal temperature compensation \nimplementation; the total available trimming range is higher  and allows the compensation for all IC process variations\n5. Maximum bit rate is assumed to scale with the RF frequency;  for example 300 kb/s in the 869/915 MHz frequency bands and only  50 kb/s at 150 \nMHz\n6. For RF frequencies below 400 MHz, there is a scaling between the frequency and supported BW, some BW may not be available be low 400 MHz\nTable 3-8: Receive Mode Specifications\nSymbol Description Conditions Min Typ Max Unit\nRXS_2FBSensitivity 2-FSK,\nRX Boosted gain, see Section 9.6 \n"Receive (RX) Mode" on page 58 , \nsplit RF paths for Rx and Tx, RF \nswitch insertion loss excludedBR_F = 0.6 kb/s, FDA  = 0.8 kHz, BW_F = 4 kHz\nBR_F = 1.2 kb/s, FDA  = 5 kHz, BW_F = 20 kHz\nBR_F = 4.8 kb/s, FDA = 5 kHz, BW_F = 20 kHz\nBR_F = 38.4 kb/s, FDA = 40 kHz, BW_F = 160 kHz\nBR_F = 250 kb/s, FDA = 125 kHz, BW_F = 500 kHz-\n-\n--\n--125\n-123\n-118-109\n-104-\n-\n--\n-dBm\ndBm\ndBmdBm\ndBm\nRXS_LBSensitivity LoRa®,\nRx Boosted gain, see Section 9.6 \n"Receive (RX) Mode" on page 58 , \nsplit RF paths for Rx and Tx, RF \nswitch insertion loss excludedBW_L = 10.4 kHz, SF = 7\nBW_L = 10.4 kHz, SF = 12\nBW_L = 125 kHz, SF = 7\nBW_L = 125 kHz, SF = 12\nBW_L = 250 kHz, SF = 7\nBW_L = 250 kHz, SF = 12\nBW_L = 500 kHz, SF = 7\nBW_L = 500 kHz, SF = 12-\n-\n--\n-\n--\n--134\n-148\n-124-137\n-121\n-134-117\n-129-\n-\n--\n-\n--\n-dBm\ndBm\ndBmdBm\ndBm\ndBmdBm\ndBm\nRXS_2FSensitivity 2- FSK\nRx Power Saving gain\nwith direct tie connection\nbetween Rx and TxBR_F = 4.8 kb/s, FDA = 5 kHz, BW_F = 20 kHz - -115 - dBm\nRXS_LSensitivity LoRa®\nRx Power Saving gain\nwith direct tie connection\nbetween Rx and TxBW_L = 125 kHz, SF = 12 - -133 - dBm\nCCR_F Co-channel rejection, FSK -- 9- d B\nCCR_L Co-channel rejection, LoRa®SF = 7\nSF = 12-\n-5\n19-\n-dB\ndB\nACR_F Adjacent channel rejection, FSK Offset = +/- 50 kHz - 45 - dB\nACR_LAdjacent channel rejection, \nLoRa®Offset = +/- 1.5 x BW_L\nBW_L = 125 kHz, SF = 7\nBW_L = 125 kHz, SF = 12-\n-60\n72-\n-dB\ndB\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201920 of 111\nSemtech\n www.semtech.comBI_FBlocking immunity, FSKBR_F = 4.8 kb/s, FDA  = 5 kHz, BW_F = 20 kHz\nOffset = +/- 1 MHzOffset = +/- 2 MHz\nOffset = +/- 10 MHz-\n-\n-68\n70\n80-\n-\n-dB\ndB\ndB\nBI_L Blocking immunity, LoRa®BW_L = 125 kHz, SF =12\nOffset = +/- 1 MHzOffset = +/- 2 MHz\nOffset = +/- 10 MHz-\n-\n-88\n90\n99-\n-\n-dB\ndB\ndB\nIIP3 3rd order input intercept pointUnwanted tones are 1 MHz and\n1.96 MHz above LO-- 5-dBm\nIMA Image attenuationWithout IQ calibration\nWith IQ calibration-\n-35\n54 -\n-dB\ndB\nBW_F DSB  channel filter BW, FSK Programmable, typical values 4.8 - 467 kHz\nTS_RX Receiver wake-up time FS to RX - 41 - \uf06ds\nFERR_LMaximum tolerated frequency \noffset between transmitter and \nreceiver, no sensitivity \ndegradation, SF5 to SF12 All bandwidths, ±25% of BW\nThe tighter limit applies (see below)±25% BW\nMaximum tolerated frequency \noffset between transmitter and \nreceiver, no sensitivity \ndegradation, SF10 to SF12 SF12\nSF11\nSF10-50\n-100\n-200-\n-\n-50\n100\n200ppm\nppm\nppmTable 3-8: Receive Mode Specifications\nSymbol Description Conditions Min Typ Max Unit\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201921 of 111\nSemtech\n www.semtech.com3.5.4 Transmit Mode Specifications\n3.5.5 Digital I/O SpecificationsTable 3-9: Transmit Mode Specifications\nSymbol Description Conditions Min Typ Max Unit\nTXOP Maximum RF output powerHighest power step setting\nSX1261\nSX1262--+14/15 \n1\n+22\n1. for SX1261 +15 dBm maximum RF output powe r can be reached with special settings, see Section 13.1.14.1 "PA Optimal Settings" on page 76 .--dBmdBm\nTXDRPRF output power drop \nversus supply voltageSX1261, under DC-DC or LDO\nVDDop range from 1.8 to 3.7 V-0 . 5 - d B\nSX1262, +22 dBm, VBAT = 2.7 VSX1262, +22 dBm, VBAT = 2.4 V\nSX1262, +22 dBm, VBAT = 1.8 V-\n-\n-2\n3\n6-\n-\n-dB\ndB\ndB\nTXPRNG RF output power range Programmable in 31 steps, typical value TXOP-31 - TXOP dBm\nTXACC RF output power step accuracy - ± 2 - dB\nTXRMP Power amplifier ramping time Programmable 10 - 3400 \uf06ds\nTS_TX Tx wake-up time Frequency Synthesizer enabled -36 + PA \nramping-\uf06ds\nTable 3-10: Digital I/O Specifications\nSymbol Description Conditions Min Typ Max Unit\nVIH Input High Voltage - 0.7*VBAT_IO 1\n1. excluding following pins: NRESET and DIO3, which are referred to VBAT- VBAT_IO 1+0.3 V\nVIL Input Low Voltage - -0.3 - 0.3*VBAT_IO 1 V\nVIL_N Input Low Voltage for pin NRESET - -0.3 - 0.2*VBAT V\nVOH Output High Voltage Imax = -2.5 mA 0.9*VBAT_IO 1 - VBAT_IO 1 V\nVOL Output Low Voltage Imax = 2.5 mA 0- 0.1*VBAT_IO 1 V\nIleakDigital input leakage current\n(NSS, MOSI, SCK)-- 1 - 1 \uf06dA\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201922 of 111\nSemtech\n www.semtech.com4. Circuit Description\nFigure 4-1: SX1261/2 Block Diagram\nSX1261 and SX1262 are half-duplex RF transceivers op erating in the sub-GHz frequency bands which support LoRa®  and \nFSK constant envelope modulation schemes.\n4.1 Clock References\n4.1.1 RC Frequency References\nTwo RC oscillators are available: 64 kHz and 13 MHz RC oscillators. The 64 kHz RC oscillator ( RC64k ) is optionally used by the \ncircuit in SLEEP mode to wake-up the tran sceiver when performing periodic or duty cycled operations. Several commands \nmake use of this 64 kHz RC oscillator (called RTC  across this document) to generate time-based events. The 13 MHz RC \noscillator ( RC13M ) is enabled for all SPI communicatio ns to permit configurat ion of the device without the need to start the \ncrystal oscillator. Both RC oscillators are supplied directly from the battery.\n4.1.2 High-Precision Frequency Reference\nIn SX1261/2 the high-precision frequency reference can come either from an on-chip crystal oscillator (OSC) using an \nexternal crystal resonator or from an external  TCXO  (Temperature Compensated Crystal Os cillator), supplied by an internal \nregulator. \nThe SX1261/2 comes in a small form factor 4 x 4 mm QFN packag e with the SX1262 able to tr ansmit up to +22 dBm. When \nin transmit mode the circuit may heat up depending on the output power and cu rrent consumption. Careful PCB design \nusing thermal isolation techniques must be  applied between the circui t and the crystal resonator to avoid transferring the \nheat to the external  crystal resonator. LoRaTM\nModemAnalog Front End & Data Conversion\nFSK\nModem Data\nBufferADC\n    PALNA\nMatching\n+\nLPF\nLDO DC-DCSPIProtocol\nEngine\nOSCPLL\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201923 of 111\nSemtech\n www.semtech.comWhen using the LoRa®  modulation with LowDataRateOptimize set to 0x00 (see Section Table 13-50: "LoRa® ModParam4 - \nLowDataRateOptimize" on page 88 ), the total frequency drift over the packet  transmission time should be minimized and \nkept lower than Freq_drift_max :\nWhen possible, using LowDataRateOptimize set to 0x01 will significantly relax the total frequency drift over the packet \ntransmission requ irement to 16 x Freq_drift_max . \nNote:Recommendations for heat dissipation techni ques to be applied to th e PCB designs are given in detail in the application \nnote AN1200.37 “Recommendations for Best Performance” on www.semtech.com .\nIn miniaturized design implementation s where heat dissipations techniques ca nnot be implemented or the use of the \nLowDataRateOptimize is not  supported, the use of a TCXO will provide a more stable clock reference.\n4.1.3 XTAL Control Block\nThe SX1261/2 does not require the user to set external foot ca pacitors on the XTAL supplying the 32 MHz clock. Indeed, the \ndevice is fitted with internal programmab le capacitors connected in dependently to the pins XT A and XTB of the device. \nEach capacitor can be set independently, balanced or unbalanced to each other, by 0.47 pF typical steps.\nNote when using an XTAL:\nAt POR or when waking-up from Sleep in cold start mode, the trimming cap registers will be initialized at the value 0x05 \n(13.6 pF). Once the device is set in STDB Y_XOSC mode, the internal state machine will overwrite both registers to the value \n0x12 (19.7pF). Therefore, the user must ensure the device is  already in STDBY_XOSC mode before changing the trimming \ncap values so that they are not overwritten by the state machine.\nNote when using a TCXO:\nOnce the command SetDIO3AsTCXOCtrl(...) is sent to the device, the register cont rolling the internal cap on XTA will be \nautomatically changed to 0x2F  (33.4 pF) to filter any spurious which could occur and be propagated to the PLL.Table 4-1: Internal Foot Capacitor Configuration\nPin Register Address Typical Values\nXTA 0x0911 Each capacitor can be controlled independently\nin steps of 0.47 pF added to the minimal value:\n0x00 sets the trimming cap to 11.3 pF (minimum)\n0x2F sets the trimming cap to 33.4 pF (maximum)XTB 0x0912\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201924 of 111\nSemtech\n www.semtech.com4.1.4 TCXO Control Block\nUnder certain circumstances, typically small form factor de signs with reduced heat dissi pation or environments with \nextreme temperature variation, it may be required to use a  TCXO  (Temperature Compensated Cr ystal Oscillator) to achieve \nbetter frequency accuracy. This  depends on the complete syst em, transmitter and receiver. The specification FERR_L in \nSection Table 3-8: "Receive Mo de Specifications" on page 19  provides information on the maximum tolerated frequency \noffset for optimal receiver performance.\nFigure 4-2: TCXO Control Block\nWhen a TCXO is used, it should be connected to pin 3 XTA, through a 220 \uf057 resistor and a10 pF DC-c ut capacitor. Pin 4 XTB \nshould be left not connected. Pin 6 DIO3 can be used to provide a regulated DC voltage to power the TCXO, programmable from 1.6 to 3.3 V. VBAT should always be 200 mV higher  than the programmed voltage to ensure proper operation.\nThe nominal current drain is 1.5 mA, but the regulator can supp ort up to 4 mA of load. A clipped-sinewave output TCXO is\nrequired, with the output amplitude not exceeding 1.2 V peak -to-peak. The commands to enab le TCXO mode are described \nin Section 13.3.6 "SetDIO3AsTCXOCtrl" on page 81 , and that includes DC voltage and timing information.\nNote:\nA complete Reset of the chip as described in Section 8.1 "Reset" on page 50  is required to get back to normal XOSC \noperation, after the chip has been set to TCXO mode with the command SetDIO3AsTCXOCtrl .\n4.2 Phase-Locked Loop (PLL)\nA fractional-N thir d order sigma-delta PLL acts as the frequency synthesizer for the LO of both receive r and transmitter \nchains. SX1261/2 is able to cover continuously all the su b-GHz frequency range 150-960 MHz. The PLL is capable of \nauto-calibration and has low switching- on or hopping times. Frequency modulation is performed inside the PLL \nbandwidth. The PLL frequency is derived from the crystal oscilla tor circuit which uses an external 32 MHz crystal reference. TCXOSX1261/SX1262 XTA\nXTB (leave open)DIO3\n10 pFProgrammable DC \nvoltage 1.6 to 3.3 V\n1.5 to 4 \nmA100 nF\n220 /g58\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201925 of 111\nSemtech\n www.semtech.com4.3 Receiver\nThe received RF signal is first amplifie d by a differential Low Noise Amplifier ( LNA ), then down-converted to low-  IF \nintermediate frequency by mixers  operating in quadrature  configuration. The I and Q signals are low-pass filtered and then \ndigitized by a continuous time feedback architecture \uf053\uf044 converter ( ADC ) allowing more than 80 dB dynamic range. Once \nin the digital domain the signal is then  decimated, down-converted again, decimated again, channel filtered and finally \ndemodulated by the selected modem depending on modulation scheme: FSK modem or LoRa®  modem.\n4.3.1 Intermediate Frequencies\nThe SX1261/2 receiver mostly operates in low-IF config uration, expect for specific high-bandwidth settings.\nTable 4-2: Intermediate Frequencies in FSK Mode\nSetting Name Bandwidth [kHz DSB ] Intermediate Frequency [kHz]\nRX_BW_467 467.0 250\nRX_BW_234 234.3 250\nRX_BW_117 117.3 250\nRX_BW_58 58.6 250\nRX_BW_29 29.3 250\nRX_BW_14 14.6 250\nRX_BW_7 7.3 250\nRX_BW_373 373.6 200\nRX_BW_187 187.2 200\nRX_BW_93 93.8 200\nRX_BW_46 46.9 200\nRX_BW_23 23.4 200RX_BW_11 11.7 200\nRX_BW_5 5.8 200\nRX_BW_312 312.0 167RX_BW_156 156.2 167\nRX_BW_78 78.2 167\nRX_BW_39 39.0 167RX_BW_19 19.5 167\nRX_BW_9 9.7 167\nRX_BW_4 4.8 167\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201926 of 111\nSemtech\n www.semtech.comTable 4-3: Intermediate Frequencies in LoRa® Mode\n4.4 Transmitter\nThe transmit chain uses the modulate d output from the modem bank which directly modulates the fractional-N PLL. An \noptional pre-filtering of the bit stream can be enabled to re duce the power in the adjacent channels, also dependent on \nthe selected modulation type.\nThe default maximum RF output power of the transmitter is +14\xa0dBm for SX1261 and +22 dBm for SX1262. The RF output \npower is programmable with 32 dB of dynamic range, in 1 dB steps. The po wer amplifier ramping time is also \nprogrammable to meet regulatory requirements.\nThe power amplifier is supplied by the regulator VR_PA and the conn ection between VR_PA and RF O is done externally to \nthe chip. As illustrated in Figure 4-3: PA Supply Scheme in DC-DC Mode , the supply used for VR_PA is different between the \ntwo circuit versions: \n• in SX1261 : VR_PA, supplied through VDD_IN, is ta ken from a voltage regulator (DC-DC or LDO ), allowing a very small \nvariation of the output power versus supply voltage; \n• in SX1262 : VR_PA, supplied through VDD_IN, is taken directly from the battery and in this case maximum output \npower is limited by supply voltage at VDD_IN.BW Setting Bandwidth [kHz DSB ] Intermediate Frequency [kHz]\nLORA_BW_500 500 0\nLORA_BW_250 250 250LORA_BW_125 125 250\nLORA_BW_62 62.5 250\nLORA_BW_41 41.67 167\nLORA_BW_31 31.25 250LORA_BW_20 20.83 167\nLORA_BW_15 15.63 250\nLORA_BW_10 10.42 167\nLORA_BW_7 7.81 250\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201927 of 111\nSemtech\n www.semtech.comFigure 4-3: PA Supply Scheme in DC-DC Mode\n4.4.1 SX1261 Power Amplifier Specifics\nCaution!\nAll figures in this chapter are indica tive and typical, and are not a specification. These figures only highlight \nbehavior of the PA over voltage and current.\nIn the SX1261, the power efficiency of the transmitter is maximized when the internal DC-DC regulator is used. The voltage \non VR_PA varies from about 20 mV to 1.35 V to achieve the programmed Output Power (Pout).\nFigure 4-4: VR_PA versus Output Power on the SX12611.8 to 3.7 VVBAT\nLDO DC-DCDCC_SW\nVREG (1.55 V)\nVDD_IN (1.55 V)\nREG\nPAVR_PA (up to 1.35 V)\nRFO\n  PA LPCORE\n(RX)\n(PLL)(1.55 V)\n SX12611.8 to 3.7 VVBAT\nLDO DC-DCDCC_SW\nVREG (1.55 V)\nVDD_IN (1.8 to 3.7 V)\nREG\nPAVR_PA (up to 3.1 V)\nRFO\n  PA LPCORE\n(RX)\n(PLL)\n SX1262(1.55 V)\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201928 of 111\nSemtech\n www.semtech.comWith this method, the output power is kept al most constant with VBAT from 1.8 to 3.7 V.\nWhen the DC-DC regulator is used the total power consumptio n will directly be impacted by the supply voltage. For \ninstance, when 17 mA are needed on VBAT to output +10 dBm with VBAT = 3.7 V, the same ou tput and will require 34 mA \nwhen VBAT = 1.8 V.\nFigure 4-5: Current versus Output Po wer with DC-DC Regulation on the SX1261\nHowever, when LDO is chosen, the current drain will remain flat  for VBAT between 1.8 V and 3.7 V, at the expense of a much \nlower energy efficiency:\nFigure 4-6: Current versus Output Po wer with LDO Regulation on the SX1261\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201929 of 111\nSemtech\n www.semtech.comThe following plot also confirms the linearity of the output power curve at nominal and extreme voltage levels:\nFigure 4-7: Power Linearity on the SX1261  with either LDO or DC-DC Regulation\n4.4.2 SX1262 Power Amplifier Specifics\nCaution!\nAll figures below are indi cative and typical,  and are not a specification. These fi gures only highlight behavior of the \nPA over voltage and current.\nFigures for the SX1262 are given with DC-DC regulation enabled, which applies only to the circuit core.\nOn the SX1262, the PA is optimized for maximum output power whilst maximizing the efficiency, which makes it \nmandatory to supply the power amplifier with fairly high voltages to maintain an high output power. To summarize:\n• the current efficiency of the PA is op timal at the highest output power step\n• output power will be limited by the voltage supplied to VBAT.\nThis is illustrated in  the following figure:\nFigure 4-8: VR_PA versus Output Power on the SX1262\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201930 of 111\nSemtech\n www.semtech.comThe internal regulator for VR_PA has a little less than 200 mV of drop-out, which means VBAT must be 200 mV higher than \nthe published VR_PA voltages in or der to attain the corresponding ou tput power. For example, for Pout = +20 dBm, VR_PA \n= 2.5 V is required, which means that the SX1262 will be able to maintain Pout = +20 dBm on the 2.7 V < VBAT < 3.7 V voltage \nrange. Below 2.7 V, the output po wer will degrade as VBAT reduces.\nAs can be seen from the blue curve on Figure 4-8: VR_PA versus Output Power on the SX1262 , the SX1262 will be capable \nof supplying almost 1.7 V when VBAT = 1.8 V, which, in turn, will make the output power plateau at +17 dBm for all power \nsettings above +17 dBm.\nThe following plot confirms the linearity of the output power, as long as the VBAT voltage is high enough to supply the \nrequired VR_PA voltage:\nFigure 4-9: Power Linearity on the SX1262\nThe power consumption evolves with the programmed  output power, as follows (DC-DC regulation):\nFigure 4-10: Current versus Programmed Output Power on the SX1262\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201931 of 111\nSemtech\n www.semtech.com4.4.3 Power Amplifier Summary\nThe following table summarizes the po wer amplifier optimization  keys in the SX1261 and SX1262 transceivers:\nTable 4-4: Power Amplifier Summary\nPA Summary Conditions SX1261 SX1262\nMax Powerwith relevant matching and \nsettings+14 /15 dBm + 22 dBm\nIDDTXat + 22 dBm, indicative\nat + 14 dBm, indicative-\n25.5 mA118 mA\n90/451 mA\n1. See Section 13.1.14.1 "PA Opti mal Settings" on page 76 .Output Power vs VBAT flat from VBAT = 1.8 V to 3.7 Vflat from 3.3 V to 3.7 V\nVBAT = 3.1 V for +22 dBm\nVBAT = 2.7 V for +20 dBmVBAT = 1.8 V for +16 dBm\nIDDTX vs VBATinversely proportional to VBAT, \nDC - DC buck converter\nis used for PA supply- \nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201932 of 111\nSemtech\n www.semtech.com5. Power Distribution\n5.1 Selecting DC-DC Converter or LDO Regulation\nTwo forms of voltage regulation (DC-DC buck converter or linear LDO  regulator) are available depending upon the design \npriorities of the application. The linear LDO regulator is always present in all modes but the transceiver will use DC-DC when \nselected. Alternatively a high effici ency DC to DC buck converter can be enabled in FS, Rx and Tx modes.\nThe DC-DC can be driven by two clock sources:\n• in STDBY_XOSC: RC13M  is used to supply clock and the frequency is RC13M / 4 so the switching frequency of the \nDC-DC converter will be 3.25 MHz\n• in FS, RX, TX: the PLL is used to supply clock an d the frequency is ~5MHz; every time the command SetRFFrequency(...)  \nis called the divider ratio is recalculated so that the switching frequency is as close as possibl e to the 5 MHz target.\nUnless specified, all specificat ions of the transceive r are given with the DC-DC regulator enabled. For applications where \ncost and size are constrained, LDO -only operation is possible which negates the need for the 47nH inductor before pin 1 \nand the 15 μH inductor between pins 7 and 9, conferring the bene fits of a reduced bill of materials and reduced board \nspace. The following table illustrates the power regula tion options for different modes and user settings. \nThe user can specify the use of DC-DC by using the command SetRegulatorMode(...) . This operation must be carried out in \nSTDBY_RC mode only.\nWhen the DC-DC is enabled, the LDO will remain ON and its target voltage is set 50 mV below the DC-DC voltage to ensure \nvoltage stability for high curren t peaks. If the DC-DC voltage drops to this le vel due to high current peak, the LDO will cover  \nfor the current need at the expense of the energy consumption of the radio which will be increased. \nHowever, to avoid consuming too much ener gy, the user is free to configure the Over Current Protection (OCP) register \nmanually. At Reset, the OC P is configured to limit the current at 60 mA.\nThe OCP  is configurable by steps of 2.5 mA and the default valu e is re-configured automatica lly each time the function \nSetPaConfig(...) is called. If the user wants to adjust the OCP value, it is  necessary to change  the register as a second step after \ncalling the function SetPaConfig(...).Table 5-1: Regulation Type versus Circuit Mode\nCircuit Mode Sleep STDBY_RC STDBY_XOSC FS Rx Tx\nRegulator Type = 0 - LDO LDO LDO LDO LDO\n Regulator Type = 1 - LDO DC-DC + LDO DC-DC + LDO DC-DC + LDO DC-DC + LDO\nTable 5-2: OCP Configuration\nCircuit Register Address OCP after POROCP after setting \nDeviceSel with \nSetPaConfig()\nSX1261 0x08E7 0x18 (60 mA) 0x18 (60 mA)\nSX1262 0x08E7 0x18 (60 mA) 0x38 (140 mA)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201933 of 111\nSemtech\n www.semtech.comNote: \nThe user should pay attention to the depe ndency of the current drain versus VBAT when using the SX1261 in DC-DC mode. \nBecause the current drained is inversely pr oportional to VBAT (for instance for Pout = +14 dBm, 25.5 mA at 3.3 V, and 48 mA \nat 1.8 V), the OCP current limit should be set high enough to accommodate a current increase or be dynamically set.\nAnother strategy is to set the OCP to a specific limit and ac cept a drop of the output po wer of the device when the OCP \nstarts limiting the current consumption.\n5.1.1 Option A: SX1261 with DC-DC Regulator\nThe DC-DC Regulator is used with about 90% of \nefficiency, for the chip core and Powe r Amplifier (PA).\nAdvantage of this option:\nThe power consumption is dras tically reduced at 3.3 V, \noutput power is maintained from VBAT = 1.8 V to 3.7 V.\nFigure 5-1: SX1261 Diagram with the DC-DC Regulator Power Option\nPA SupplyVDD_IN\nVBATDCC_SWVREGSX1261\nMain supply\n1.8 to 3.7 V\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201934 of 111\nSemtech\n www.semtech.com5.1.2 Option B: SX1261 with LDO Regulator\nThe LDO Regulator is used, for both the core of the \nchip and the PA.\nAdvantage of this option:\nThe cost and space for the external 15 \uf06dH and 47 nH \ninductors are spared.\nFigure 5-2: SX1261 Diagram with  the LDO Regulator Power Option \n5.1.3 Option C: SX1262 with DC-DC Regulator\nThe DC-DC Regulator is used with about 90% of \nefficiency, for the chip core  only. The PA regulator is \nsupplied with VBAT.\nAdvantage of this option:\nThe power consumption of  the core is reduced.\n*VBAT=3.3 V min. to reach +22 dBm\nFigure 5-3: SX1262 Diagram with the DC-DC Regulator Power Option\nPA SupplyVDD_IN\nVBATVREGSX1261\nMain supply\n1.8 to 3.7 VPA SupplyVDD_IN\nVBATDCC_SWVREGSX1262\nMain supply\n1.8* to 3.7 V\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201935 of 111\nSemtech\n www.semtech.com5.1.4 Option D: SX1262 with LDO Regulator\nThe LDO Regulator is used. Power consumption of \nthe core is slightly higher than in Option C.\nAdvantage of this option:\nThe cost and space for an external 15 \uf06dH inductor \nare spared.\n* VBAT=3.3 V min. to reach +22 dBm\nFigure 5-4: SX1262 Diagram with  the LDO Regulator Power Option\n5.1.5 Consideration on the DC-DC Inductor Selection\nThe selection of the inductor is essential to ensure optimal pe rformance of the DC-DC internal block. Selectin g an incorrect \ninductor could cause various unwanted effects ranging from ripple currents to early aging of the device, as well as a \ndegradation of the efficiency of the DC-DC regulator.\nFor the SX1261/2, the preferred inductor will be shielded, presenting a low internal series resistance and a resonance \nfrequency much higher than the DC-DC switching frequency. Wh en selecting the 15 μH inductor, the user should therefore \nselect a part with the following considerations:\n• DCR (max) = 2 ohms\n• Idc (min) = 100 mA\n• Freq (min) = 20 MHz\nTable 5-3: Recommended 15 μH Inductors\nReference ManufacturerValue \n(μH)Idc max\n(mA)Freq \n(MHz)DCR\n(ohm)Package\n(L x W x H in mm)\nLPS3010-153 Coilcraft 15 370 43 0.95  2.95 x 2.95 x 0.9\nMLZ2012N150L TDK 15 90 40 0.47 2 x 1.25 x 1.25\nMLZ2012M150W TDK 15 120 40 0.95 2 x 1.25 x 1.25\nVLS2010ET-150M TDK 15 440 40 1.476  2 x 2 x 1VLS2012ET-150M TDK 15 440 40  1.062 2 x 2 x 1.2VDD_IN\nVBATVREGSX1262\nMain supply\n1.8* to 3.7 VPA Supply\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201936 of 111\nSemtech\n www.semtech.com5.2 Flexible DIO Supply\nThe transceiver has two power supply pins, one for the core of the transceiver called VBAT and one for the host controller \ninterface (SPI, DIOs, BUSY) called VBAT_IO. Both power supplies can be connected together in application. In case a low \nvoltage micro-controller (typically with IO pads at 1.8 V) is used to control the transceiver, the user can:\n• use VBAT at 3.3 V for optimal RF performance\n• directly connect VBAT_IO to the same supply used for the micro-controller\n• connect the digital IOs directly to the micro-controller DIOs. \nAt any time, VBAT_IO must be lower than or equal to VBAT.\nFigure 5-5: Separate DIO SupplyBattery\nTyp. 1.8 to 3.7 V\nControllerRegulator 1.8 V\nTransceiverVBAT_IO VBAT\nSPI\nDIOxNRESET\nRequirement: VBAT ≥ VBAT_IO\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201937 of 111\nSemtech\n www.semtech.com6. Modems \nThe SX1261/2 contains different modems capable of handling LoRa®  and FSK modulations. LoRa®  and FSK are associated \nwith their own frame and modem. \n• LoRa®  modem \uf0f3 LoRa® Frame\n• FSK modem \uf0f3 FSK Frame\nThe user specifies the modem and frame type by using the command  SetPacketType(...) . This command specifies the frame \nused and consequently the modem implemented.\nThis function is the first one to be called before going to Rx or Tx and before defining frequency, modulation and packet \nparameters. The command GetPacketType()  returns the current protocol of the radio.\n6.1 LoRa® Modem\nThe LoRa®  modem uses spread spectrum modula tion and forward error correction techniques to increase the range and \nrobustness of radio co mmunication links comp ared to traditional FSK based modulation.\nAn important facet of the LoRa®  modem is its increased immu nity to interference. The LoRa®  modem is capable of \nco-channel GMSK  rejection of up to 19 dB. This immunity to  interference permits the simple coexistence of LoRa®  \nmodulated systems either in bands of heavy spectral usage or in hybrid communication networks that use LoRa®  to extend \nrange when legacy modulation schemes fail.\n6.1.1 Modulation Parameter\nIt is possible to optimize the LoRa®  modulation for a given applicat ion, access is given to the desi gner to four critical design \nparameters, each one permitting  a trade-off between the link budget, immunity to interference, spectral occupancy and \nnominal data rate. These parameters are:\n• Modulation BandWidth  (BW_L)\n• Spreading Factor ( SF)\n• Coding Rate ( CR)\n• Low Data Rate Optimization ( LDRO ) \nThese parameters are set using the command SetModulationParams(...)  which must be called after SetPacketType(...) . \n6.1.1.1 Spreading Factor\nThe spread spectrum LoRa®  modulation is performed by repr esenting each bit of payload in formation by multiple chips of \ninformation. The rate at which the spread information is sent is referred to as the symbol rate (Rs). The ratio between the \nnominal symbol rate and chip rate is the spreading factor and it represents the number of symbols sent per bit of \ninformation.\nConsideration on SF5 and SF6In the SX1261/2, two spreading factors have been added compared to the previous device family, SF5 and SF6. These two \nspreading factors have been  modified slightly for the SX1261/2 and will now be  able to operate in both  implicit and explicit \nmode. However, these modification have made the new spread ing factor incompatible with previous device generations. \nEspecially, SF6 on the SX1261/2 will not be backward compatible with the SF6 used on the SX1276. Furthermore, due to \nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201938 of 111\nSemtech\n www.semtech.comthe higher symbol rate, the minimum recommended preamble length needed to ensure correct detection and \ndemodulation from the receiver is increased compared to other Spreading Factors. For SF5 and SF6, the user is invited to \nuse 12 symbols of preamble to have optimal perf ormances over the dynamic range or the receiver.\nNote:The spreading factor must be kn own in advance on both transmit  and receive sides of the link as different spreading factors \nare orthogonal to each other. Note also the resulting Si gnal to Noise Ratio (SNR) requ ired at the receiver input. \nIt is the capability to re ceive signals with negative SNR  that increases the sensitivity as we ll as link budget and range of the \nLoRa®  receiver.\nA higher spreading factor provides bette r receiver sensitivity at the expense of lo nger transmission times (time-on-air). \nWith a knowledge of the ke y parameters that can be selected by the user, the LoRa®  symbol rate is defined as:\nwhere \nBW is the programmed bandwidth and SF is the spreading factor . The transmitted signal is a constant envelope \nsignal. Equivalently, one chip is sent per second per Hz of bandwidth.\n6.1.1.2 Bandwidth\nAn increase in signal bandwidth permits the use of a higher effective data rate, thus reducing transmission time at the \nexpense of reduced sensitivity improvement. \nLoRa®  modem operates at a programmable bandwidth (B W_L) around a programmable central frequency fRF\nFigure 6-1: LoRa® Signal Bandwidth\nAn increase in LoRa®  signal bandwidth (BW_L) permits the use of a higher  effective data rate, thus  reducing transmission \ntime at the expense of reduced sensit ivity improvement. Th ere are regulatory constraint s in most coun tries on the Table 6-1: Range of Spreading Factors (SF)\nSpreading Factor (SF) 5 6 7 8 9 10 11 12\n2^SF (Chips / Symbol) 32 64 128 256 512 1024 2048 4096\nTypical LoRa®  Demodulator SNR  [dB] -2.5 -5 -7.5 -10 -12.5 -15 -17.5 -20\nRsBW\n2SF---------=\nf\nfRF fRFBWL\n2------------+ fRFBWL\n2------------–BW_L\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201939 of 111\nSemtech\n www.semtech.compermissible occupied bandwidth. The LoRa®  modem bandwidth alwa ys refers to the double side band ( DSB ). The range of \nLoRa®  signal bandwidths available is given in the table below:\nFor BW_L up to 250 kHz, the receiver performs a do uble conversion. A first down conversion to low-  IF is performed inside \nthe RF chain, a second conversion to baseband is perfor med digitally inside the baseba nd modem. When the 500 kHz \nbandwidth is used, a single down-conversion to zero-IF is  performed in the RF part. \n6.1.1.3  FEC Coding Rate\nTo further improve the robustness of the link the LoRa®  modem employs cyclic error co ding to perform forward error \ndetection and correction. \nForward Error Correction (FEC) is particularly efficient in impro ving the reliability of the link in the presence of interferen ce. \nSo that the coding rate and robustness to  interference can be changed in response  to channel conditions. The coding rate \nselected on the transmitter side is communicated to the receiver th rough the header (when present).\nA higher coding rate provides better noise immunity at the expense of longer transmission time. In normal conditions a \nfactor of 4/5 provides the best trade-off; in the presence of strong interferers a higher coding rate may be used. Error \ncorrection code does not have to be known in advance by the receiver since it is encoded in the header part of the packet.\n6.1.1.4 Low Data Rate Optimization\nFor low data rates (typically for high SF or low BW) and very long payloads which may last several seconds in the air, the low \ndata rate optimization (LDRO) can be en abled. This reduces the number of bits pe r symbol to the given SF minus two (see \nSection 6.1.4 "LoRa® Time-on-Air" on page 41 ) in order to allow th e receiver to have a better tracking of the LoRa®  signal. \nDepending on the payload size, the low data rate  optimization is usually recommended when a LoRa®  symbol time is equal \nor above 16.38 ms.Table 6-2: Signal Bandwidt h Setting in LoRa® Mode\nSignal Bandwidth 0 1 2 3 4 5 6 7 8 9\nBW_L [kHz] 07.81010.42015.63020.83031.25041.67062.501250250 1\n1. For RF frequencies below 400 MHz, there is a scaling between the frequency and supported BW, some BW may not be available be low 400 MHz500 1\nTable 6-3: Coding Rate Overhead\nCoding RateCyclic Coding Rate CR\n[in raw bits / total bits]Overhead Ratio\n1 4/5 1.25\n24 / 6 1 . 53 4/7 1.7544 / 8 2\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201940 of 111\nSemtech\n www.semtech.com6.1.2 LoRa® Packet Engine\nLoRa®  has it own packet en gine that supports the LoRa®  PHY  as described in the following section.\n6.1.3 LoRa® Frame\nThe LoRa®  modem employs two types of packet fo rmats: explicit and implicit. The expl icit packet includes a short header \nthat contains information about the number of bytes, coding rate and whether a CRC  is used in the packet. The packet \nformat is shown in the following figure.\nFigure 6-2: LoRa® Packet Format\nThe LoRa®  packet starts with a preamble sequence which is used to synchronize the receiver with the incoming signal. By \ndefault the packet is configured with a 12-symbol long sequen ce. This is a programmable vari able so the preamble length \nmay be extended; for example, in the interest of reducing the receiver duty cycle in rece ive intensive applications. The \ntransmitted preamble length ma y  v a r y  f r o m  1 0  t o  6 5 5 3 5  s y m b o l s ,  o n c e  t h e  f i x e d  o v e r h e a d  o f  t h e  p r e a m b l e  d a t a  i s  \nconsidered. This permits the tr ansmission of near arbitrarily long preamble sequences.\nThe receiver undertakes a preamble detectio n process that periodically restarts. For th is reason the preamble length should \nbe configured as identical to the transm itter preamble length. Where the preamble length is not known, or can vary, the \nmaximum preamble length should be programmed on the receiver side.\nThe preamble is followed by a header which contain information about the following payload. The packet payload is a \nvariable-length field that contains the actual data coded at the error rate either as specified in  the header in explicit mode \nor as selected by the user in  implicit mode. An optional CRC  may be appended.\nDepending upon the chosen mode of operation two types of header are available. \n6.1.3.1 Explicit Header Mode\nThis is the default mode of operat ion. Here the header provides information on the payload, namely:\n• The payload length in bytes\n• The forward error correction coding rate\n• The presence of an optional 16-bit CRC  for the payload\nThe header is transmitted with maximum error correction code (4/8).  It also has its own CRC  to allow the re ceiver to discard \ninvalid headers.\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201941 of 111\nSemtech\n www.semtech.com6.1.3.2 Implicit Header Mode\nIn certain scenarios, where the payload, coding rate and CRC  presence are fixed or know n in advance, it may be \nadvantageous to reduce transmission time  by invoking implicit header mode. In th is mode the header is removed from the \npacket. In this case the payl oad length, error coding rate and presence of the payload CRC  must be manually configured \nidentically on both sides of the radio link.\n6.1.4 LoRa® Time-on-Air\nThe packet format for the LoRa®  modem is detailed in Figure 6-3: Fixed-Length Packet Format  and Figure 6-4: \nVariable-Length Packet Format . The equation to obtain Time On Air (ToA) is:\n with:\n• SF: Spreading Factor (5 to 12)\n• BW: Bandwidth (in kHz)\n• ToA: the Time on Air in ms\n• Nsymbol : number of symbols\nThe computation of the number of symbols differs depending on the parameters of the modulation.\nFor SF5 and SF6:\nFFor CR being legacy coding rate (ie. Not Long Interleaving):\nFor all other SF:\n \nFor all other SF with Low Data Rate Optimization activated:\n \n \nWith: • N_bit_CRC = 16 if CRC activated, 0 if not\n• N_symbol_header = 20 with explicit  header, 0 with implicit header\n• CR is 1, 2, 3 or 4 for respective coding rates 4/5, 4/6, 4/7 or 4/8\n6.1.5 LoRa® Channel Activity Detection (CAD)\nThe use of a spread spectrum modulation technique presents challenges in determining whet her the channel is already in \nuse by a signal that may be below the noise floor of the rece iver. The use of the RSSI in th is situation would clearly be \nimpracticable. To this end the ch annel activity detector is used to  detect the presence of other LoRa® signals. \n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201942 of 111\nSemtech\n www.semtech.comOn the SX1261/2, the channel act ivity detection mode is designed to detect the presence of a LoRa®  preamble or data \nsymbols while the previous generations of products we re only able to detect LoRa®  preamble symbols.\nOnce in CAD mode, the SX1261/2 will perf orm a scan of the band for a user-selectable duration (defined in number of \nsymbols) and will then return with the Channel Activity Detected IRQ if LoRa®  symbols have been detected during the CAD.\nThe time taken for the channel activit y detection is dependent upon the LoRa®  modulation settings used. For a given \nconfiguration (SF/BW) the typical CAD detection time can be selected to be either 1, 2, 4, 8 or 16 symbols. Once the duration \nof the selected number of symbols has been done, the radio will  remains for around half a sy mbol in Rx to post-process the \nmeasurement. \nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201943 of 111\nSemtech\n www.semtech.com6.2 FSK Modem\n6.2.1 Modulation Parameter\nThe FSK modem is able to perform transmissi on and reception of 2-FSK modulated packets over a range of data rates \nranging from 0.6 kbps to 300 kbps. All parameters are set by  using the command SetModulationParams(...) . This function \nshould be called only after defining the protocol. \nThe bitrate setting is referenced to the crystal oscillator and provides a precise me ans of setting the bi t rate (or equivalent ly \nchip) rate of the ra dio. In the command SetModulationParams(...) , the bitrate is expressed as 32 times the XTAL frequency \ndivided the real bit rate used by the device. The generic formula is:\nFSK modulation is performed inside the PLL bandwidth, by changing th e fractional divider ratio in  the feedback loop of the \nPLL. The high resolution of the sigma-delta modulator, allows for very narrow frequency devia tion. The frequency deviation \nFdev is one of the parameters of the function SetModulationParams(...)  and is expressed as:\nwhere:\nAdditionally, in transmission mode, severa l shaping filters can be applied to the signal. In reception mode, the user needs \nto select the best reception bandwidth depending on its conditions. To ensure correct demodulation, the following limit must be respected for the selection of the bandwidth:\nThe bandwidth is defined by parameter BW as described in the following table.\nTable 6-4: Bandwidth Definition in FSK Packet Type\nBW Value Bandwidth [kHz DSB ]\nBW4 0x1F 4.8\nBW5 0x17 5.8\nBW7 0x0F 7.3BW9 0x1E 9.7\nBW11 0x16 11.7\nBW14 0x0E 14.6BW19 0x1D 19.5\nBW23 0x15 23.4\nBW29 0x0D 29.3BRFXOSC\nBitRate------------------- -*32 =\nFdevFdevHz\nFreqStep------------- ----------- =\nFreqStepXtalFreq\n225-------------- ---------- =\n2*Fdev BR + \uf028\uf029 BW<\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201944 of 111\nSemtech\n www.semtech.comThe bandwidth must be chosen so that\nBandwidth[DSB] ≥ BR + 2*frequency deviation + frequency error\nwhere the frequency error is two times the crystal frequency error used.\nThe SX1261/2 offers several pulse shaping options defined by the parameter PulseShape . If other unspec ified values are \ngiven as parameters, then no filtering is used.\n6.2.2 FSK Packet Engine\nThe SX1261/2 is designed for packet-b ased transmission. The packet controlle r block is responsible for assembly of \nreceived data bit-stream into packets and their storage into the data buffer. It also performs the bit-stream decoding \noperations such as de-whitening & CRC -checks on the re ceived bit-stream. \nOn the transmit side, the packet handler ca n construct a packet and send it bit by bit to the modulator for transmission. It \ncan whiten the payload and append the CRC -checksum to the end of the packet. The packet controller only works in \nhalf-duplex mode i.e. either in transmit or  receive at a time. \nThe packet controller is configured using the command SetPacketParams(...)  as in Section 13.4.6 "SetPacketParams" on \npage 88 . This function can be called only after defining the protocol. The next chapters describe in detail the different \nframes available in the SX1261/2.\n6.2.2.1 Preamble Detect ion in Receiver Mode\nThe SX1261/2 is able to gate the reception of a packet if an insufficient number of altern ating preamble symbols (usually \nreferred to 0x55 or 0xAA in hexadecimal form) has been detect ed. This can be selected by the user by using the parameter \nPreambleDetectorLength  used in the command SetPacketParams(...) . The user can select a value ranging from “Preamble \ndetector length off” - where th e radio will not perform any gating and will try to lock directly on the following Sync Word - BW39 0x1C 39.0\nBW46 0x14 46.9\nBW58 0x0C 58.6BW78 0x1B 78.2BW93 0x13 93.8\nBW117 0x0B 117.3\nBW156 0x1A 156.2BW187 0x12 187.2\nBW234 0x0A 234.3\nBW312 0x19 312.0BW373 0x11 373.6\nBW467 0x09 467.0Table 6-4: Bandwidth Definition in FSK Packet Type\nBW Value Bandwidth [kHz DSB ]\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201945 of 111\nSemtech\n www.semtech.comto “Preamble detector length 32  bits” where the radio will be expecting to receive 32 bits of preamble before the following \nSync Word. In this case, if the 32 bits of preamble are not detected, the radio will either drop the reception in RxSingle mode , \nor restart its tracking loop  in RxContinuous mode. \nTo achieve best performance of the device, it is recommended to set PreambleDetectorLength  to “Preamble detector length \n8 bits” or “Preamble detector length 16 bi ts” depending of the complete  size of preamble which is sent by the transmitter. \nNote: In all cases, PreambleDetectorLength  must be smaller than the size of the following Sync Word to achieve proper \ndetection of the packets. If the preamble length is greater than the following Sync Word length (typically when no Sync \nWord is used) the user should fill some of the Sync Word bytes with 0x55.\n6.2.3 FSK Packet Format\nThe FSK packet format provides a conventional packet format for application in proprietary NRZ  coded, low energy \ncommunication links. The packet format has built in facilities for CRC  checking of the payload, dynamic payload size and \npacket acknowledgement. Optionally whitening based upon  pseudo random number generation can be enabled. Two \nprinciple packet formats are available in the FSK protocol: fixed length and variable length packets.\n6.2.3.1 Fixed-Length Packet\nIf the packet length is fixed and known on both sides of the link then knowledge of the packet length does not need to be transmitted over the air. Instead the packet  length can be writ ten to the parameter packetLength  which determines the \npacket length in bytes (0 to 255, but limited to 254 when the address filtering is activated, see Table 13-56 ).\nFigure 6-3: Fixed-Length Packet Format\nThe preamble length is set from 8 to 65535 bits using the parameter PreambleLen . It is usually recommended to use a \nminimum of 16 bits for the preamble to guarantee a valid reception of the packet on the receiver side.  The CRC  \noperation, packet length  and preamble length are defined using the command SetPacketParams(...)  as defined in \nSection 11. "List of Commands" on page 62 .\n6.2.3.2 Variable-L ength Packet\nWhere the packet is of uncertain or variable size, then inform ation about the packet length(0 to 255 bytes, but limited to \n254 Bytes when the address filtering is activated, see Table 13-56 ) must be transmitted within the packet. The format of the \nvariable-length packet is shown below.\nFigure 6-4: Variable-Length Packet Format     CRC Checksum \nWhiteningPreamble\n8 to 65535 \nbitsSync Word\n0 to 8 bytesPayload\n1 to 255 bytesCRC\n0, 1 or 2 bytesAddress\n0 to 1 byte\nCRC Checksum \nWhiteningAddress\n0 to 1 \nbytePayload\n0 to 255 bytesCRC\n0, 1 or 2 bytesPreamble\n8 to 65535 \nbitsSync Word\n0 to 8 bytesLength\n1 byte\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201946 of 111\nSemtech\n www.semtech.com6.2.3.3 Setting the Packet Length or Node Address\nThe packet length and Node or  Broadcast address are not considered part of  the payload and they are added automatically \nin hardware. \nThe packet length is added automatically in the packet when the packetType field is set to variable size in the command \nSetPacketParam(...).\nThe node or broadcast address ca n be enabled by using the Addr Comp field is in the command SetPacketParam(...). This \nfield allow the user to enable and select an additional packet filtering at the payload level.\n6.2.3.4 Whitening\nThe whitening process is built around a 9-bit LFSR  which is used to generate a random sequence and the payload (including \nthe payload length, the Node or Broadc ast address and CRC checksum when needed) is then XORed with this random \nsequence to generate the whitened payload. The data is de-whitened on the receiver side  b y  X O R i n g  w i t h  t h e  s a m e  \nrandom sequence. This setup limits the numbe r of consecutive 1’s or 0’s to 9. Note that the data whiten ing is only required \nwhen the user data has high correlation with long strings of 0’ s and 1’s. If the data is alread y random then the whitening is \nnot required. For example a random source generating the Tran smit data, when whitened, could produce longer strings of \n1’s and 0’s, thus it’s not required to randomize an already random sequence.\nFigure 6-5: Data Whitening LFSR\nThe whitening is based around the 9-bit L FSR polynomial x^9+x^5+1. With this structure, the LSB at the output of the LFSR \nis XORed with the MSB of the data. \nAt the initial stage, each fl ip-flop of the LFSR can be in itialized through the registers at addresses 0x06B8 and 0x6B9.\nTable 6-5: Whitenin g Initial Value\nWhitening Initial Value Register Address Default Value\nWhitening initial value MSB 0x06B8 0x01\nWhitening initial value LSB 0x06B9 0x00  X7  X6  X5  X4  X3  X2  X1  X0  X8LFSR Polynomial =X9 + X5  + 1\nTransmit dataWhitened data\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201947 of 111\nSemtech\n www.semtech.com6.2.3.5 CRC\nThe SX1261/2 offers full flexibility to select the polynomial and initial value of the selected po lynomial. In additions, the u ser \ncan also select a complete invers ion of the computed CRC to comply with some international standards.\nThe CRC can be enabled and configured by using the CRCType  field in the command SetPacketParam(...). This field allows \nthe user to enable and select the length and configuration of the CRC.\nThe CRC selected must be modified together with the CRC initial value and CRC polynomial.\nThis flexibility permits the user  to select any standard CRC or to use his own CRC allowing a specific detection of a given \npacket. Examples:\nTo use the IBM CRC configurat ion, the user must select:\n• 0x8005 for the CRC polynomial \n• 0xFFFF for the initial value\n• CRC_2_BYTE for the field CRCType  in the command SetPacketParam(...) .\nFor the CCIT CRC configuration the user must select:\n• 0x1021 for the CRC polynomial \n• 0x1D0F for the initial value \n• CRC_2_BYTE_INV for the field CRCType  in the command SetPacketParam(...)Table 6-6: CRC Type Configuration\nCRCType Description\n0x01 CRC_OFF (No CRC)\n0x00 CRC_1_BYTE (CRC computed on 1 byte)0x02 CRC_2_BYTE (CRC computed on 2 bytes)\n0x04 CRC_1_BYTE_INV (CRC comput ed on 1 byte and inverted)\n0x06 CRC_2_BYTE_INV (CRC computed on 2 bytes and inverted)\nTable 6-7: CRC Initial Value\nRegister Address Default Value\nCRC MSB Initial Value [15:8] 0x06BC 0x1D\nCRC LSB Initial Value [7:0] 0x06BD 0x0F\nTable 6-8: CRC Polynomial\nRegister Address Default Value\nCRC MSB Polynomial Value [15:8] 0x06BE 0x10\nCRC LSB Polynomial Value [7:0] 0x06BF 0x21\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201948 of 111\nSemtech\n www.semtech.com7. Data Buffer\nThe transceiver is equipped with a 256-byte RAM data buffer which is accessible in all modes except sleep mode. This RAM \narea is fully customizable by the user and allows access to ei ther data for transmission or from the last packet reception.\n7.1 Principle of Operation\nFigure 7-1: Data Buffer Diagram\nThe data buffer can be configured to st ore both transmit an d receive payloads.TRANSCEIVER USER0xFF\nWriteBuffer()\nGetRxBufferStatus()\n0x00\nData buffer\nCapacity = 256 bytesTransmitted\nPayload\nReceived\nPayload\nRxStartBufferPointerTxBufferPointer txBaseAddress + txPayloadLength\nSetBufferBaseAddress()\nrxBaseAddress + rxPayloadLength\nSetBufferBaseAddress()\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201949 of 111\nSemtech\n www.semtech.com7.2 Data Buffer in Receive Mode\nIn receive mode RxBaseAddr  specifies the buffer offset in me mory at which the received packet  payload data will be written. \nThe buffer offset of the last byte written in receive mode is then stored in RxDataPointer  which is initialized to the value of\nRxBaseAddr  at the beginning of the reception.\nThe pointer to the first byte of the last packet received and the packet le ngth can be read with the command \nGetRxbufferStatus() . \nIn single mode, RxDataPointer  is automatically initialized to RxBaseAddr  each time the transce iver enters Rx mode. In \ncontinuous mode the pointer is incremented starting from the previous position.\n7.3 Data Buffer in Transmit Mode\nUpon each transition to transmit mode TxDataPointer is initialized to TxBaseAddr  and is incremented each time a byte is sent \nover the air. This operation stops once the number of bytes sent equals the payloadlength  parameter as defined in the \nfunction SetPacketParams(...) .\n7.4 Using the Data Buffer\nBoth, RxBaseAddr  and TxBaseAddr  are set using the command SetBufferBaseAddresses(...) . \nBy default RxBaseAddr and TxBaseAddr are initialized at address 0x00. \nDue to the contiguous nature of the data buffer, the base addresses fo r Tx and Rx are fully configurable across the 256-byte \nmemory area. Each pointer can be set independently an ywhere within the buffer. To exploit the maximum data buffer size \nin transmit or receive mode, the whole data buffer can be used in each mode by setting the base addresses TxBaseAddr and \nRxBaseAddr at the bottom of th e memory (0x00).\nThe data buffer is cleared when the device is put into Sleep mode (implying no access). The data is retained in all other \nmodes of operation.\nThe data buffer is ac ceded via the command WriteBuffer(...)  and ReadBuffer(...) . In this function the pa rameter offset defines \nthe address pointer of the first data to be written or read. Offset zero defines the first position of the data buffer.\nBefore any read or write operatio n it is hence necessary to init ialize this offset to the corr esponding beginning of the buffer . \nUpon reading or writing to the data buffer the address pointer will then increment automatically.\nTwo possibilities exist to obtain the offset value:\n• First is to use the RxBaseAddr  value since the user defines it before receiving a payload.\n• Second, offset can be initialized with the value of RxStartBufferPointer  returned by GetRxbufferStatus(...)  command. \nNote:\nAll the received data will be written to the data buffer even if the CRC  is invalid, permitting user-defined post processing of \ncorrupted data. When receiving, if the pack et size exceeds the buffer memory allo cated for the Rx, it will overwrite the \ntransmit portion of the data buffer.\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201950 of 111\nSemtech\n www.semtech.com8. Digital Interface and Control\nThe SX1261/2 is controlled via a serial SPI interface and a set of general purpos e input/output (DIOs). At least one DIO  must \nbe used for IRQ and the BUSY line is mandatory to ensure the host controller is ready to accept the commands. The \nSX1261/2 uses an internal controller (CPU) to hand le communication and chip control (mode switching, API etc...). BUSY is \nused as a busy signal indicating that the chip is ready for ne w command only if this signal is low. When BUSY is high, the \nhost controller must wait until it goes down again before sending another command. Through SPI the application sends \ncommands to the internal chip or access directly the data memory space.\n8.1 Reset\nA complete “factory reset” of the chip can be issued on requ est by toggling pin 15 NRESET of the SX1261/2. It will be \nautomatically followed by the standard calibration procedure and any previous context will be lost. The pin should be held low for typically 100 μs for the Reset to happen.\n8.2 SPI Interface\nThe SPI interface gives access to the config uration register via a synchronous full-duplex protocol corresponding to CPOL  \n= 0 and CPHA  = 0 in Motorola/Freescale nomenclature. Only the slave side is implemented.\nAn address byte followed by a data byte is sent for a write access whereas an address byte is sent and a read byte is received \nfor the read access. The NSS  pin goes low at the beginning of the fr ame and goes high after the data byte.\nMOSI  is generated by the master on the falling edge of SCK  and is sampled by the slave (i.e. this SPI interface) on the rising \nedge of SCK . MISO  is generated by the slave on the falling edge of SCK .\nA transfer is always started by the NSS  pin going low. MISO  is high impedance when NSS  is high.\nThe SPI runs on the external SCK  clock to allow high speed up to 16 MHz.\n8.2.1 SPI Timing When the Transceiver is in Active Mode\nIn this mode the chip  is able to handle SPI command in a standard way i.e. no extra delay needed at the first SPI transaction.\nFigure 8-1: SPI Timing Diagram\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201951 of 111\nSemtech\n www.semtech.comAll timings in following table are give n for a max load cap of 10 pF.   \n8.2.2 SPI Timing When the Transceiver Leaves Sleep Mode\nOne way for the chip to leave Sleep mode is to wait for a falling edge of NSS . At falling edge, all necessary internal regulators \nare switched On; the chip star ts chip initialization before being able to accept first SPI command. This means that the delay \nbetween the falling edge of NSS  and the first rising edge of SCK  must take into account the wake-up sequence and the chip \ninitialization. In Sleep mode and during th e initialization phase, the busy signal ma pped on BUSY pin, is set high indicating \nto the host that the chip is not able to  accept a new command. Once  the chip is in STDBY_RC mode, the busy signal goes \nlow and the host can start sending a comman d. This is also true for startup at battery insertion or after a hard reset.\nFigure 8-2: SPI Timing TransitionTable 8-1: SPI Timing Requirements\nSymbol Description Minimum Typical Maximum Unit\nt1 NSS  falling edge to SCK  setup time 32 - - ns\nt2 SCK period 62.5 - - nst3 SCK high time 31.25 - - ns\nt4 MOSI  to SCK hold time 5 - - ns\nt5 MOSI to SCK setup time 5 - - nst6 NSS falling to MISO  delay 0 - 15 ns\nt7 SCK falling to MISO delay, 0 - 15 ns\nt8 SCK to NSS rising edge hold time 31.25 - - nst9 NSS high time 125 - - ns\nt10NSS falling edge to SCK setup time when switching \nfrom SLEEP to STDBY_RC mode100 - - \uf06ds\nt11NSS falling to MISO delay when switching from \nSLEEP to STDBY_RC mode0 - 150 \uf06ds\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201952 of 111\nSemtech\n www.semtech.com8.3 Multi-Purpose Digital Input/Output (DIO) \nThe chip is interfaced through the 4 control lines which are composed of the BUSY pin and 3 DIOs pins that can be \nconfigured as interrupt, debug or to control the radio immediate peripherals ( TCXO  or RF Switch). \n8.3.1 BUSY Control Line\nThe BUSY control line is used to indicate the status of the internal state machine. When the BUSY line is held low, it indicate s \nthat the internal state machine is in id le mode and that the radio is ready to accept a command from the host controller.\nThe BUSY control line is set back to zero once the chip has reached a stable mode and it is ready for a new command. \nInherently, the amount of time the BUSY line will stay high depends on the nature of the command. For example, setting the device into TX mode from the STDBY_RC mode will take much more time  than simply changing some radio parameters \nbecause the internal state machine will ma intain the BUSY line high until the radi o is effectively transmitting the packet.\nFigure 8-3: Switching Time Definition\nFor the internal state machine, all “write” commands will  cause the BUSY line to be  asserted high after time T\nSW,as per the \ngraph above. TSW represents the time required for the internal st ate machine to wake-up and start processing the \ncommand. \nConversely, the “read” command will be handled directly without the help of the internal state machine and thus the BUSY \nline will remains low after a “read” command.\nThe max value for TSW from NSS rising edge to the BUSY ri sing edge is, in all cases, 600 ns.\nIn Sleep mode, the BUSY pin is held high through a 20 kΩ resistor and the BUSY line will go low as soon as the radio leaves \nthe Sleep mode.\nIn FS, BUSY will go low when the PLL is locked. In RX, BUSY will go to low as soon as the RX is up and ready to receive data. \nIn TX, BUSY will go low when the PA has ramped-up and transmission of preamble starts.BUSY \nNSS \nSPI \n(MOSI, MISO, SCK) \n\u089d\u0899\u0880 opcode Param1 Param… \nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201953 of 111\nSemtech\n www.semtech.comIn addition to this, the BUSY will also go high to handle its internal IRQ. In this scenar io, it is essential to wait for the B USY \nline to go low before sending an SPI co mmand (either a “read” or “write” command).\nFigure 8-4: Switching Time Definition in Active Mode\nThe following table gives the value of TSWMode  for all possible transitions. The sw itching time is defined as the time \nbetween the rising edge of the NSS ending the SPI transaction and the falling edge of BUSY.\n \nTable 8-2: Switching Time\nTransition TSWMode  Typical Value [ \uf06ds]\nSLEEP to STBY_RC cold start (no data retention) 3500\nSLEEP to STBY_RC warm start (with data retention) 340\nSTBY_RC to STBY_XOSC 31\nSTBY_RC to FS 50\nSTBY_RC to RX 83\nSTBY_RC to TX 126\nSTBY_XOSC to FS 40\nSTBY_XOSC to TX 105\nSTBY_XOSC to RX 62\nFS to RX 41\nFS to TX 76\nRX to FS 15\nRX to TX 92BUSY \nNSS \nSPI \n(MOSI, MISO, SCK) opcode Param1 Param… \n\u089d\u0899\u0880 \n\u089d\u0899\u0880Mode \nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201954 of 111\nSemtech\n www.semtech.com8.3.2 Digital Input/Output\nAny of the 3 DIOs can be selected as an output interrupt source for the application. Wh en the application receives an \ninterrupt, it can determine th e source by using the command GetIrqStatus(...) . The interrupt can then  be cleared using the \nClearIrqStatus(...)  command. The Pin Description is as follows:\nDIO1  is the generic IRQ line, any interrup t can be mapped to DIO1. The complete li st of available IRQ can be found in \nSection 8.4 "Digital Interface Status  versus Chip modes" on page 54.\nDIO2  has a double functionality. As DIO1, DIO2 can be used as  a generic IRQ line and any IRQ can be routed through this \npin. Also, DIO2 can be configured to drive an RF switch through the use of the command SetDio2AsRfSwitchCtrl(...) . In this \nmode, DIO2 will be at a logical 1 during Tx and at a logical 0 in any other mode.\nDIO3  also has a double functionality and as DIO1 or DIO2, it ca n be used as a generic IRQ line. Also, DIO3 can be used to \nautomatically control a TCXO through the command SetDio3AsTCXOCtrl(...) . In this case, the device will automatically power \ncycle the TCXO when needed.\n8.4 Digital Interface Status versus Chip modes\nNote:•PU = pull up with 50 k \uf057\uf020at typical conditions\n•PD = pull down with 50 k \uf057 at typical conditions (the resistor value varies with the supply voltage) Table 8-3: Digital Pads Config uration for each Chip Mode\nMode DIO3 DIO2 DIO1 BUSY MISO MOSI SCK NSS NRESET\nReset PD PD PD PU HIZ HIZ HIZ IN -\nStart-up HIZ PD HIZ PD HIZ PD HIZ PU HIZ HIZ HIZ IN IN PU\nSleep HIZ PD HIZ PD HIZ PD HIZ PU HIZ HIZ HIZ IN IN PU\nSTBY_RC OUT OUT OUT OUT OUT IN IN IN IN PU\nSTBY_XOSC OUT OUT OUT OUT OUT IN IN IN IN PU\nFS OUT OUT OUT OUT OUT IN IN IN IN PU\nRX OUT OUT OUT OUT OUT IN IN IN IN PU\nTX OUT OUT OUT OUT OUT IN IN IN IN PU\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201955 of 111\nSemtech\n www.semtech.com8.5 IRQ Handling\nIn total there are 10 possible interrupt sources depending on the selected frame and chip mode. Each one can be enabled \nor masked. In addition, each one ca n be mapped to DIO1, DIO2 or DIO3. \nFor more information on how to setup IRQ and DIOs, refer to the function SetDioIrqParams() in Section 13.3.1 \n"SetDioIrqParams" on page 79 .Table 8-4: IRQ Status Registers\nBit IRQ Description Modulation\n0 TxDone Packet transmission completed All\n1 RxDone Packet received All2 PreambleDetected Preamble detected All\n3 SyncWordValid Valid Sync Word detected\nFSK\n4 HeaderValid Valid LoRa® Header receivedLoRa®\n5 HeaderErr LoRa® Header CRC errorLoRa®  \n6 CrcErr Wrong CRC received All\n7 CadDone Channel activity detection finishedLoRa®  \n8 CadDetected Channel activity detectedLoRa®  \n9 Timeout Rx or Tx Timeout All\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201956 of 111\nSemtech\n www.semtech.com9. Operational Modes\nThe SX1261/2 features six operating modes. The analog front- end and digital blocks that are enabled in each operating \nmode are explained in the following table.\n9.1 Startup\nAt power-up or after a reset, the chip goes into STARTUP st ate, the control of the chip being done by the sleep state \nmachine operating at the battery voltage. Th e BUSY pin is set to high indicating that the chip is busy and cannot accept a \ncommand. When the digital voltage and RC cl ock become available, the chip can boot up and the CPU takes control. At this \nstage the BUSY line goes down and the device is ready to accept commands.\n9.2 Calibration\nThe calibration procedure is auto matically called in case of POR  or via the calibration comman d. Parameters can be added \nto the calibrate command to identify which section of cali bration should be repeated. The following blocks can be \ncalibrated:\n• RC64k  using the 32 MHz crystal oscillator as reference\n• RC13M  using the 32 MHz crystal oscillator as reference\n• PLL to select the proper VCO frequency and division ratio for any RF frequency\n• RX ADC\n• Image (RX mode with defined tone)\nOnce the calibration is finished, the chip enters STDBY_RC mode. \n9.2.1 Image Calibration for Specific Frequency Bands\nImage calibration is done through the command CalibrateImage(...)  for a given range of frequencies defined by the \nparameters freq1  and freq2 . Once performed, the calibration is valid for all frequencies between the two extremes used as \nparameters. Typically, the user  can select the parameters freq1  and freq2  to cover any specific ISM band.Table 9-1: SX1261/2 Operating Modes\nMode Enabled Blocks\nSLEEP Optional registers, backup regulator, RC64k  oscillator, data RAM\nSTDBY_RC Top regulator ( LDO ), RC13M  oscillator\nSTDBY_XOSC Top regulator (DC-DC or LDO), XOSC\nFS All of the above + Frequency synthesizer at Tx frequency\nTx Frequency synthesizer and transmitter, Modem\nRx Frequency synthesizer and receiver, Modem\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201957 of 111\nSemtech\n www.semtech.comIn case of POR or when the device is recovering from Sleep mo de in cold start mode, the imag e calibration is performed as \npart of the initial calibration process an d for optimal image rejection in the band 902 - 928 MHz. However at this stage the \ninternal state machine has no information whether an XTAL or a TCXO is fitted. When the 32 MHz clock is coming from a \nTCXO, the calibration will fail and the user should request a complete calibration after calling the function SetDIO3AsTcxoCtrl(...). \nBy default, the image calibration is made in the band 902 - 928 MHz. Nevertheless, it is possible to request the device to \nperform a new image calibrat ion at other frequencies.\nNote:\nContact your Semtech representative for the other optimal calibration settings outside of the given frequency bands.\n9.3 Sleep Mode\nIn this mode, most of the radio inte rnal blocks are powered down or in low power mode and optionally the RC64k  clock \nand the timer are running. The chip may enter this mode from STDBY_RC and can leave the SLEEP mode if one of the \nfollowing events occurs:\n• NSS pin goes low in any case\n• RTC  timer generates an End-Of-Count (corresponding to Listen mode)\nWhen the radio is in Sleep mode, the BUSY pin is held high.\n9.4 Standby (STDBY) Mode\nIn standby mode the host should configure the chip before go ing to RX or TX modes.  By default in this state, the system is \nclocked by the 13 MHz RC oscillator to reduce power consumption (in all other modes except SLEEP the XTAL is turned ON). However if the application is time critical, the XO SC block can be turned or left ON. \nXOSC or RC13M  selection in standby mode is determin ed by mode parameter in the command SetStandby(...) .\nThe mode where only RC13M is used is called STDBY_RC and the one with XOSC ON is called STDBY_XOSC.If DC-DC is to be used, the selection should be made  while the circuit is in ST DBY_RC mode by using the \nSetRegulatorMode(...) command, then the DC-DC will automatically switch ON when entering STDBY_XOSC mode. The \nDC-DC will be clocked by the RC13M. The LDO will remain active with a target voltage 50 mV lower than the DC-DC one.Table 9-2: Image Calibration Over the ISM Bands\nFrequency Band [MHz] Freq1 Freq2\n430 - 440 0x6B 0x6F\n470 - 510 0x75 0x81779 - 787 0xC1 0xC5\n863 - 870 0xD7 0xDB\n902 - 928 0xE1 (default) 0xE9 (default)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201958 of 111\nSemtech\n www.semtech.com9.5 Frequency Synthesis (FS) Mode\nIn FS mode, PLL and related regulators are switched ON. The BUSY goes low as soon as the PLL is locked or timed out.\nFor debugging purposes the chip may be reques ted to remain in this  mode by using the SetFs()  command. \nSince the SX1261/2 uses low  IF architecture, the RX and TX frequencies are di fferent. The RX frequenc y is equal to TX one \nminus the intermediate freque ncy (IF). In FS or TX modes, the RF frequency is directly programmed by the user.\n9.6 Receive (RX) Mode\nIn RX mode, the RF fr ont-end, RX ADC and the selected modem ( LoRa®  or FSK) are turned ON. In RX mode the circuit can \noperate in different sub-modes:\n• Continuous mode : the device remains in RX mode and waits for incoming packet reception until the host requests a \ndifferent mode,\n• Single mode : the device returns automatically to STDBY_RC mode after packet reception,\n• Single mode with timeout : the device returns automatically to STDBY_RC mode after packet reception or after the \nselected timeout,\n•L i s t e n  m o d e : the device alternate between Sleep and Rx mode until an IRQ is triggered.\nIn RX mode, BUSY will go low as soon as the RX is enabled and ready to receive data.\nThe SX1261 and SX1262 can operate in Rx Boosted gain setup or in a Rx power saving gain setup. In the Rx power saving \ngain, the radio will consume less power at a small cost in sensitivity. In Rx Booste d gain, the radio will  consume more power \nto improve the sensitivity.\nThe Rx Gain  register is not part of the retentio n memory when waking-up fr om a warm-start mode. To include this register \nin the retention memory, the following steps are required:\n• Set register 0x029F to 0x01\n• Set register 0x02A0 to 0x08\n• Set register 0x02A1 to 0xAC\nThis procedure is mandatory when using the SetRxDutyCycle  method, to keep on us ing the Rx Boosted gain.\nNote:\nIn LoRa® mode, the user can also use the command SetLoRaSymbNumTimeout(...) to perform a quick and immediate \nassessment of the presence (or not) of Lo Ra preamble symbols. If the user defi ned parameter SymbNum is different from \n0, the modem will wait for a total of SymbNum LoRa® symbol to validate, or not, the correct de tection of a LoRa® packet. If \nthe various states of the demodulator are not lock at this moment, the radio will generate the RxTimeou t IRQ. Otherwise, \nthe radio will stay in Rx for the full duration of the packet. For more information, please see Section 13.4.9 \n"SetLoRaSymbNumTimeout" on page 94 .Transmit (TX) ModeTable 9-3: Rx Gain Configuration\nRx Gain Register Address Value\n Rx Gain 0x08ACRx Power Saving gain: 0x94 (default) \nRx Boosted gain: 0x96\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201959 of 111\nSemtech\n www.semtech.comIn TX mode, after enabling and ramping-up the Power Amplifier (PA), the contents of the data buffer are transmitted. The \ncircuit can operate in different sub-modes: single mode or single with timeout mode. \nThe timeout in Tx mode can be used as a security to ensure that  if for any reason the Tx is aborted or does not succeed (ie. \nthe TxDone IRQ never is never triggered), the TxTimeout will prevent the system from waiting for an unknown amount of time. Using the timeout while in Tx mode remove the need to use re sources from the host MCU to perform the same task.\nIn TX mode, BUSY will go low as soon as the PA has ramped-up and transmi ssion of preamble starts.\n9.6.1 PA Ramping\nThe ramping of the PA can be selected while setting the output power by using the command SetTxParams(...) .\nThe PA ramp time can be selected to go from 10 \uf06ds up to 3.4 ms.\n9.7 Active Mode Switching Time\nFor more details on active  mode switching time, see Section 8.3.1 "BUSY Control Line" on page 52 .\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201960 of 111\nSemtech\n www.semtech.com9.8 Transceiver Circuit Modes Graphical Illustration\nThe device operating modes and the states through which each mode transitions are illustrated here:\nFigure 9-1: Transceiver Circuit Modesstartup\nsleep\nSTDBY\nFS\nRx TxPOWER ON\nor\nRESET\nSetTx()SetRx()SetTx\n()\nSetFs\n()SetRx()\nSetFs()SetRx()SetTx()SetStanby()SetFs()SetSleep()\nSetStandby()\nTxDone, TxTimeoutSetStandby()\nRxDone, RxTimeoutSetStandby()\nRxDoneRxTxTimeout\n(duty cycled operation)reset\nRTC or NSS (SPI Operation)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201961 of 111\nSemtech\n www.semtech.com10. Host Controller Interface\nThrough the SPI interface, the host can i ssue commands to the chip or access the data  memory space to directly retrieve or \nwrite data. In normal operation, a reduce d number of direct data write operations is required except when accessing the\ndata buffer.\nThe user interacts with the circuit through an API (instruction set).\nThe SX1261 uses the pin BUSY to indicate the status of the chip and its ability (or not) to receive another command while \ninternal processing occurs. Prior to executing one of the generi c functions, it is thus necessary to check the status of BUSY\nto make sure the chip is in a stat e where it can process another function.\n10.1 Command Structure\nIn case of a command that does not require any parameter, the host sends only the opcode (1 byte).\nIn case of a command which requires on e or several parameters, the opcode byte  is followed immedi ately by parameter \nbytes with the NSS  rising edge terminating the command.\n10.2 Transaction Termination\nThe host terminates an SPI transaction with  the rising NSS signal; the host does no t explicitly send the command length as \na parameter. The host must not raise NS S within the bytes of a transaction.\nIf a transaction sends a command requiring parameters, all the para meters must be sent before rising NSS. If not the chip \nwill take some unknown value for the missing parameters.Table 10-1: SPI Interface Command Sequence\nByte 0 [1:n]\nData from host Opcode Parameters\nData to host RFU Status\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201962 of 111\nSemtech\n www.semtech.com11. List of Commands\nThe following tables give the list of commands and their co rresponding opcode. Unless specif ied, all parameters are 8-bit \nvalues. \n11.1 Operational Modes Commands\nThese functions have a direct impact on th e behaviour of the device. They control th e internal state mach ine to transmit or \nreceive packets, and all the modes in-between.\nTable 11-1: Commands Selecting the Operating Modes of the Radio\nCommand Opcode Parameters Description\nSetSleep 0x84 sleepConfig Set Chip in SLEEP mode\nSetStandby 0x80 standbyConfigSet Chip in STDBY_RC or STDBY_XOSC \nmode\nSetFs 0xC1 - Set Chip in Frequency Synthesis mode\nSetTx 0x83 timeout[23:0] Set Chip in Tx mode\nSetRx 0x82 timeout[23:0] Set Chip in Rx mode\nStopTimerOnPreamble 0x9F StopOnPreambleParamStop Rx timeout on Sync Word/Header or \npreamble detection\nSetRxDutyCycle 0x94 rxPeriod[23:0], sleepPeriod[23:0]Store values of RTC  setup for listen mode \nand if period parameter is not 0, set chip \ninto RX mode\nSetCad 0xC5 -Set chip into RX mode with passed CAD \nparameters\nSetTxContinuousWave 0xD1 -Set chip into TX mode with infinite carrier \nwave settings\nSetTxInfinitePreamble 0xD2 -Set chip into TX mode with infinite \npreamble settings\nSetRegulatorMode 0x96 regModeParamSelect LDO or DC_DC+LDO for CFG_XOSC, \nFS, RX or TX mode\nCalibrate 0x89 calibParamCalibrate the RC13, RC64, ADC, PLL, Image \naccording to parameter\nCalibrateImage 0x98 freq1, freq2Launches an image calibration at the given \nfrequencies\nSetPaConfig 0x95 paDutyCycle, HpMax, deviceSel, paLUTConfigure the Duty Cycle, Max output \npower, device for the PA for SX1261 or \nSX1262\nSetRxTxFallbackMode 0x93 fallbackModeDefines into which mode the chip goes \nafter a TX / RX done.\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201963 of 111\nSemtech\n www.semtech.com11.2 Register and Buffer Access Commands\n11.3 DIO and IRQ Control\n11.4 RF, Modulation and Packet CommandsTable 11-2: Commands to Access the Radio Registers and FIFO Buffer\nCommand Opcode Parameters Description\nWriteRegister 0x0D address[15:0], data[0:n] Write into one or several registers\nReadRegister 0x1D address[15:0] Read one or several registers\nWriteBuffer 0x0E offset, data[0:n] Write data into the FIFO\nReadBuffer 0x1E offset Read data from the FIFO\nTable 11-3: Commands Controlling the Radio IRQs and DIOs\nCommand Opcode Parameters Description\nSetDioIrqParams 0x08IrqMask[15:0], \nDio1Mask[15:0],\nDio2Mask[15:0], Dio3Mask[15:0], Configure the IRQ and the DIOs attached to each IRQ\nGetIrqStatus 0x12 - Get the va lues of the triggered IRQs\nClearIrqStatus 0x02 - Clear one or several of the IRQs\nSetDIO2AsRfSwitchCtrl 0x9D enable Configure radio to control an RF switch from DIO2\nSetDIO3AsTcxoCtrl 0x97 tcxoVoltage, timeout[23:0] Configure the radio to use a TCXO  controlled by DIO3\nTable 11-4: Commands Controlling the RF and Packets Settings\nCommand Opcode Parameters Description\nSetRfFrequency 0x86 rfFreq[23:0] Set the RF frequency of the radio\nSetPacketType 0x8A protocol Select the packet type corresponding \nto the modem\nGetPacketType 0x11 -Get the current packet configuration \nfor the device\nSetTxParams 0x8E power, rampTimeSet output power and ramp time for \nthe PA \nSetModulationParams 0x8B modParam1, modParam2, modParam3Compute and set values in selected \nprotocol modem for given \nmodulation parameters\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201964 of 111\nSemtech\n www.semtech.com11.5 Status CommandsSetPacketParams 0x8CpacketParam1, packetParam2, packetParam3, \npacketParam4, packetParam5, packetParam6, \npacketParam7, packetParam8, packetParam9Set values on selected protocol \nmodem for given packet parameters\nSetCadParams 0x88cadSymbolNum, cadDetPeak, cadDetMin, \ncadExitMode, cadTimeoutSet the parameters which are used for \nperforming a CAD ( LoRa®  only)\nSetBufferBaseAddress 0x8F TxbaseAddr, RxbaseAddrStore TX and RX base address in regis-\nter of selected protocol modem\nSetLoRaSymbNumTimeout 0xA0 SymbNumSet the number of symbol the modem \nhas to wait to validate a lock\nTable 11-5: Commands Returning the Radio Status\nCommand Opcode Parameters Description\nGetStatus 0xC0 - Returns the current status of the device\nGetRssiInst 0x15 - Returns the instantane ous measured RSSI while in Rx mode\nGetRxBufferStatus 0x13 - Returns PaylaodLengthRx(7:0), RxBufferPointer(7:0)\nGetPacketStatus 0x14 -Returns RssiAvg, RssiSync, PStatus2, PStaus3, PStatus4 in \nFSK protocol, returns RssiPkt, SnrPkt in LoRa®  protocol\nGetDeviceErrors 0x17 - Returns the error which has occurred in the device\nClearDeviceErrors 0x07 0x00Clear all the error(s). The error(s) cannot be cleared \nindependently\nGetStats 0x10 - Returns statistics on the last few received packets\nResetStats 0x00 - Resets the value read by the command GetStatsTable 11-4: Commands Controlling the RF and Packets Settings\nCommand Opcode Parameters Description\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201965 of 111\nSemtech\n www.semtech.com12. Register Map\n12.1 Register Table\nTable 12-1: List of Registers\nRegister Name Address Reset Value Function\nDIOx output enable 0x0580 0x00\nNon-standard DIOx control1DIOx input enable 0x0583 0x00\nDIOx pull-up control 0x0584 0x00\nDIOx pull-down control 0x0585 0x00\nWhitening initial value MSB 0x06B8 0xX1 Initial value used for the whitening LFSR  in \nFSK mode. The user should not change the \nvalue of the 7 MSB  of this register\nNote: X is here an undefined valueWhitening initial value LSB 0x06B9 0x00\nCRC MSB Initial Value [0] 0x06BC 0x1DInitial value used for the polynomial used to \ncompute the CRC in FSK modeCRC LSB Initial Value [1] 0x06BD 0x0F\nCRC MSB polynomial Va lue [0]  0x06BE 0x10Polynomial used to compute the CRC in FSK \nmodeCRC LSB polynomial Value [1] 0x06BF 0x21\nSyncWord[0] 0x06C0 - 1st byte of the Sync Word in FSK modeSyncWord[1] 0x06C1 - 2nd byte of the Sync Word in FSK mode\nSyncWord[2] 0x06C2 - 3rd byte of the Sync Word in FSK mode\nSyncWord[3] 0x06C3 - 4th byte of the Sync Word in FSK modeSyncWord[4] 0x06C4 - 5th byte of the Sync Word in FSK mode\nSyncWord[5] 0x06C5 - 6th byte of the Sync Word in FSK mode\nSyncWord[6] 0x06C6 - 7th byte of the Sync Word in FSK modeSyncWord[7] 0x06C7 - 8th byte of the Sync Word in FSK mode\nNode Address 0x06CD 0x00 Node Address used in FSK mode\nBroadcast Address 0x06CE 0x00 Broad cast Address used in FSK mode\nIQ Polarity Setup 0x0736 0x0D Optimize the inverted IQ operation\nLoRa Sync Word MSB 0x0740 0x14 Differentiate the LoRa® signal for Public or \nPrivate Network\nSet to 0x3444 for Public Network\nSet to 0x1424 for Private NetworkLoRa Sync Word LSB 0x0741 0x24\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201966 of 111\nSemtech\n www.semtech.comRandomNumberGen[0] 0x0819 -\nCan be used to get a 32-bit random numberRandomNumberGen[1] 0x081A -\nRandomNumberGen[2] 0x081B -RandomNumberGen[3] 0x081C -\nTxModulation 0x0889 0x01 Refer to Section 15.\nRx Gain 0x08AC 0x94Set the gain used in Rx mode:\nRx Power Saving gain: 0x94\nRx Boosted gain: 0x96\nTxClampConfig 0x08D8 0xC8 Refer to Section 15.\nOCP Configuration 0x08E7 0x18Set the Over Current Protection level. \nThe value is changed internally depending \non the device selected. Default values are:\nSX1262: 0x38 (140 mA)\nSX1261: 0x18 (60 mA)\nRTC Control\n2 0x0902 0x00 Enable or disable RTC Timer\nXTA trim 0x0911 0x05Value of the trimming cap on XTA pin\nThis register should only be changed while \nthe radio is in STDBY_XOSC mode.\nXTB trim 0x0912 0x05Value of the trimming cap on XTB pin\nThis register should only be changed while \nthe radio is in STDBY_XOSC mode.\nDIO3 output voltage control 0x920 0x01 Non-standard DIO3 control1\nEvent Mask 0x944 0x00 Used to clear events1\n1. Use only with Semtech-provided code samples\n2. Use only with Semtech-provided workaround of Section 15.3Table 12-1: List of Registers\nRegister Name Address Reset Value Function\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201967 of 111\nSemtech\n www.semtech.com13. Commands Interface\n13.1 Operational Modes Functions\n13.1.1 SetSleep\nThe command SetSleep(...)  is used to set the device in SLEEP mode with  the lowest current cons umption possible. This \ncommand can be sent only while in STDBY mode (STDBY_RC or STDBY_XOSC). After the rising edge of NSS, all blocks are \nswitched OFF except the backup regulator if needed and the blocks specified in the parameter sleepConfig .\nThe sleepConfig  argument is defined in Table 13-2 .  \nWhen entering SLEEP mode, the BUSY line is asserted high and stays high for the complete duration of the SLEEP period.\nOnce in SLEEP mode, it is possible to wake the device up from the host processor with a falling edge on the NSS line. The \ndevice can also wake up automatically based on a counter event driven by the RTC  64 kHz clock. If the RTC is used, a rising \nedge of NSS will still wake up the chip (the host keeps control of the chip). \nBy default, when entering into  SLEEP mode, the chip configuration is lost. Ho wever, being able to st ore chip configuration \nto lower host interaction or during RxDutyCycle mode can be implemented using the register in retention mode during SLEEP state. This is available when the SetSleep(...)  command is sent with sleepConfig[2]  set to 1. Once the chip leaves SLEEP \nmode (by NSS or RTC event), the chip will first restore the registers with the value stored into the retention register.\nCaution:\nOnce the command SetSleep(...)  has been sent, the device will become unresponsive for around 500 \uf06ds, time needed for the \nconfiguration saving process and proper switch off of the vari ous blocks. The user must thus make sure the device will not \nbe receiving SPI command during these 500 \uf06ds to ensure proper operations of the device.Table 13-1: SetSleep SPI Transaction\nByte 0 1\nData from host Opcode = 0x84 sleepConfig\nTable 13-2: Sleep Mode Definition\nSleepConfig[7:3] SleepConfig [2] SleepConfig [1] SleepConfig [0] \nRESERVED 0: cold start 0: RFU 0: RTC  timeout disable\nRESERVED 1: warm start\n(device configuration in \nretention) 1\n1. Note that only configuration for the activated modem before going to sleep is retained. Configuration of the other modems is  lost and must be \nre-configured.0: RFU1: wake-up on RTC timeout \n(RC64k )\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201968 of 111\nSemtech\n www.semtech.com13.1.2 SetStandby\nThe command SetStandby(...)  is used to set the device in a configuration mode which is at an intermediate level of \nconsumption. In this mode, the chip is plac ed in halt mode waiting for instructions via SPI. This mode is dedicated to chip \nconfiguration using high level commands such as SetPacketType(...) .\nBy default, after battery insertion or rese t operation (pin NRESET goes low), the ch ip will enter in STDBY_RC mode running \nwith a 13 MHz RC clock.   \nThe StdbyConfig  byte definition is as follows:   \n13.1.3 SetFs\nThe command SetFs()  is used to set the device in th e frequency synthesis mode where the PLL is locked to the carrier \nf r e q u e n c y .  T h i s  m o d e  i s  u s e d  f o r  t e s t  p u r p o s e s  o f  t h e  P L L  a n d  c a n  b e  c o n s i d e r e d  a s  a n  i n t e r m e d i a t e  m o d e .  I t  i s  \nautomatically reached when going from STDB Y_RC mode to TX mode or RX mode.   \nIn FS mode, the PLL will be set to th e frequency programmed by the function SetRfFrequency(...)  which is the same used for \nTX or RX operations.\n13.1.4 SetTx\nThe command SetTx()  sets the device in transmit mode.   Table 13-3: SetConfig SPI Transaction\nByte 0 1\nData from host Opcode = 0x80 StdbyConfig\nTable 13-4: STDBY Mode Configuration\nStdbyConfig Value Description\nSTDBY_RC 0 Device running on RC13M , set STDBY_RC mode\nSTDBY_XOSC 1 Device running on XTAL 32MHz, set STDBY_XOSC mode\nTable 13-5: SetFs SPI Transaction\nByte 0\nData from host Opcode = 0xC1\nTable 13-6: SetTx SPI Transaction\nByte 0 1-3\nData from host Opcode = 0x83 timeout(23:0)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201969 of 111\nSemtech\n www.semtech.com• Starting from STDBY_RC mode, the oscillator is switched ON followed by the PLL, then the PA is switched ON and the \nPA regulator starts ramping according to the ramping time defined by the command SetTxParams(...)\n• When the ramping is completed the packet handler starts the packet transmission\n• When the last bit of the packet has been  sent, an IRQ TX_DONE is generated, th e PA regulator is ramped down, the PA \nis switched OFF and the chip goes back to STDBY_RC mode\n• A TIMEOUT IRQ is triggered if the TX_DONE IRQ is  not generated within the given timeout period\n• The chip goes back to STBY_RC mode after a TIMEOUT IRQ or a TX_DONE IRQ.\nThe timeout duration can be  computed with the formula:\nTimeout duration = Timeout * 15.625 µs\nTimeout  is a 23-bit parameter defining the number of step us ed during timeout as define d in the following table.  \nThe value given for the timeout should be calculated for a g iven packet size, given modulati on and packet parameters. The \ntimeout behaves as a security in case of conflicting commands from the host controller. \nThe timeout in Tx mode can be used as a security to ensure that  if for any reason the Tx is aborted or does not succeed (ie. \nthe TxDone IRQ never is never triggered), the TxTimeout will prevent the system from waiting for an unknown amount of \ntime. Using the timeout while in Tx mode remove the need to use re sources from the host MCU to perform the same task.\n13.1.5 SetRx\nThe command SetRx()  sets the device in receiver mode.   Table 13-7: SetTx Timeout Duration\nTimeout(23:0) Timeout Duration\n0x000000Timeout disable, Tx Single mode, the device will stay in  TX Mode until the packet is transmitted and returns \nin STBY_RC mode upon completion.\nOthersTimeout active, the device remains in TX mode, it  returns automatically to STBY_RC mode on timer \nend-of-count or when a packet has been tran smitted. The maximum timeout is then 262 s.\nTable 13-8: SetRx SPI Transaction\nByte 0 1-3\nData from host Opcode = 0x82 timeout(23:0)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201970 of 111\nSemtech\n www.semtech.comThis command sets the chip in RX mode, waiting for the reception of  one or several packets. The receiver mode operates \nwith a timeout to provide maxim um flexibility to end users. \nWhen the timeout is active (0 x000000 < timeout < 0xFFFFFF), th e radio will stop the receptio n at the end of the timeout \nperiod unless a preamble and Sync Word (in GFSK) or Header (in LoRa® ) has been detected. This is to ensure that a valid \npacket will not be dropped in the middle of the reception due to the pre-defi ned timeout. By defaul t, the timer will be \nstopped only if the Sync Word or header has been detected. However, it is also possible to stop the timer upon preamble detection by using the command StopTimerOnPreamble(...).\n13.1.6 StopTimerOnPreamble\nThe command StopTimerOnPreamble (...) allows the user to select if the timer is stopped upon preambl e detection of Sync \nWord / header detection.\nThe enable byte definition is given in the following table.   \nBy default, the timer is stopped only when the Sync Word (in GFSK) or Header (in LoRa® ) has been detected. When the \nfunction StopTimerOnPreamble(...)  is used with the value enable  at 0x01, then the timer wi ll be stopped upon preamble Table 13-9: SetRx Timeout Duration\nTimeout(23:0) Timeout Duration\n0x000000No timeout. Rx Single mode. The device will stay in RX Mode until a reception occurs and the devices return \nin STBY_RC mode upon completion\n0xFFFFFFRx Continuous mode. The device remains in RX mode until the host sends a command to change the \noperation mode. The device can receive several packets. Each time a packet is received, a packet done \nindication is given to the host and the device will automatically search for a new packet.\nOthersTimeout active. The device remains in RX mode, it  returns automatically to  STBY_RC mode on timer \nend-of-count or when a packet has been received. As so on as a packet is detected, the timer is automatically \ndisabled to allow complete reception of th e packet. The maximum timeout is then 262 s.\nTable 13-10: StopTimerOnPreamble SPI Transaction\nByte 0 1\nData from host Opcode = 0x9F StopOnPreambleParam\nTable 13-11: StopOnPreambParam Definition\nStopOnPreambleParam Value Description\ndisable 0x00 Timer is stopped upon Sync Word or Header detection\nenable 0x01 Timer is stopped upon preamble detection\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201971 of 111\nSemtech\n www.semtech.comdetection and the device will stay in RX mode  until a packet is received. It is impo rtant to notice that stopping the timer \nupon preamble may cause the device to stay in Rx for an unexpected long period of time in case of false detection.\nFigure 13-1: Stopping Timer on Preamble or Header Detection\n13.1.7 SetRxDutyCycle\nThis command sets the chip in sniff mo de so that it regularly looks for ne w packets. This is the listen mode. \nWhen this command is sent in STDBY_RC mode, the context (de vice configuration) is saved an d the chip enters in a loop \ndefined by the following steps:\n• The chip enters RX and listens for a packet for a period of time defined by rxPeriod\n• The chip is looking for a preamble in either LoRa®  or FSK \n• Upon preamble detection, the timeout is stopped and restarted with the value 2 * rxPeriod + sleepPeriod \n• If no packet is received during the RX window (defined by rxPeriod), the chip goes into SLEEP mode with context saved \nfor a period of time defined by sleepPeriod\n• At the end of the SLEEP window, the chip automatically restarts the process of restoring context and enters the RX \nmode, and so on. At any time, the host can stop the procedure.\nThe loop is termin ated if either:\n• A packet is detected during the RX window, at which mome nt the chip interrupts the ho st via the RX_DONE flag and \nreturns to STBY_RC mode\n• The host issues a SetStandby(...)  command during the RX window (during SLEEP mode, the device is unable to receive \ncommands straight away and must first be  waken up by a falling edge of NSS). Table 13-12: SetRxDutyCycle SPI Transaction\nByte 0 1-3 4-6\nData from host Opcode= 0x94 rx Period(23:0) sleepPeriod(23:0)timeRadio Current\ntimeout\nRadio in RX mode Radio in STDBY_RC Radio in STDBY_RCPreamble Detected\nOr\nSyncWord / Header Detected\nRadio in RX mode\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201972 of 111\nSemtech\n www.semtech.comThe SLEEP mode duration is defined by:\nSleep Duration = sleepPeriod * 15.625 µs\nThe RX mode duration is defined by\nRx Duration = rxPeriod * 15.625 µs\nThe following figure highlights operations being performed while in RxDutyCycle mode. It can be observed that the radio \nwill spend around 1 ms to save the contex t and go into SLEEP mode and then re-initialize the radio,  lock the PLL and go into \nRX. The delay is not accurate and may vary dependin g on the time needed for the XTAL to start, the PLL to lock, etc.\nFigure 13-2: RX Duty Cycle Energy Profile\nUpon preamble detection, the radio is set to look for a Sync Word (in GFSK) or a header (in LoRa® ) and the timer is restarted \nwith a new value which is computed as 2 * rxPeriod + sleepPeriod . This is to ensure that the radio does not spend an \nindefinite amount of time waiting in Rx for a packet which may never arrive (false preamble detection).\nThis implies a strong relationship betwee n the time-on-air of the packet to be re ceived, and the amount  of time the radio \nspends in RX and in SLEEP mode. If a long preamble is used on the TX side, care must be taken that the formula below is \nrespected:\nTpreamble  + Theader  ≤ 2 * rxPeriod + sleepPeriodtimeRadio Current\nrxPeriod\nsleepPeriod\n500 us \n Radio in SLEEP mode Radio in RX mode Radio in STDBY_RC\n 500 us Radio in RX mode\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201973 of 111\nSemtech\n www.semtech.comFigure 13-3: RX Duty Cycle when Receiving\nNote: when using a TCXO controlled by the SX 1261/2 itself, the startup delay defined in delay(23:0) will be added \nbetween the Sleep and Rx periods\n13.1.8 SetCAD\nThe command SetCAD()  can be used only in LoRa®  packet type. The Channel Activity Detection is a LoRa®  specific mode of \noperation where the device searches for the presence of a LoRa®  preamble signal. After the search has completed, the \ndevice returns in STDBY_RC mode . The length of the search is configured via the command SetCadParams(...) . At the end of \nthe search period, the device triggers the IRQ CADdone if it has been enabled. If a valid signal has been detected it also \ngenerates the IRQ CadDetected .  \n13.1.9 SetTxContinuousWave\nSetTxContinuousWave()  is a test command available for all packet types to  generate a continuous wa ve (RF tone) at selected \nfrequency and output power. The device st ays in TX continuous wave until the ho st sends a mode conf iguration command.  Table 13-13: SetCAD SPI Transaction \nByte 0\nData from host Opcode = 0xC5\nTable 13-14: SetTxContinuousWave SPI Transaction\nByte 0\nData from host Opcode = 0xD1timeRadio Current\nPreamble Detected\n2 x rxPeriod + sleepPeriod\nRadio in RX mode Radio in STDBY_RC\n 500 us Radio in SLEEP mode\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201974 of 111\nSemtech\n www.semtech.comWhile this command has no real use case in real life, it can pr ovide valuable help to the deve loper to check and monitor the \nperformances of the radio while in Tx mode.\n13.1.10 SetTxInfinitePreamble\nSetTxInfinitePreamble()  is a test command to generate an infinite sequence of alternating zeros and ones in FSK modulation. \nIn LoRa® , the radio is only able to constantly modulate LoRa®  preamble symbols. Th e device will remain in TX infinite \npreamble until the host sends a mode configur ation command. \nWhile this command has no real use case in real life, it can pr ovide valuable help to the deve loper to check and monitor the \nperformances of the radio while modulating in Tx mode. \nHowever, when using this function,  it is impossible to define an y data sent by the device. In LoRa®  mode, the radio is only \nable to constantly modulate LoRa preamble symbols and, in FSK mode, the radio is only able  to generate FSK preamble \n(0x55). Nevertheless, the end user will be able to easily  monitor the spectral impact of its modulation parameters.\n13.1.11 SetRegulatorMode\nBy default only the LDO  is used. This is useful in low cost applications where the cost of the extra self needed for a DC-DC \nconverter is prohibitive. Using only a linear  regulator implies th at the RX or TX current is al most doubled. This function \nallows to specify if DC-DC or LDO is used for power regulation. The regulation mode is defined by parameter \nregModeParam .\nNote: \nThis function is clearly relate d to the hardware implementati on of the device. The user should always use this command \nwhile knowing what has been implemented at the hardware level.   Table 13-15: SendTxInfinitePr eamble SPI Transaction\nByte 0\nData from host Opcode = 0xD2\nTable 13-16: SetRegulatorMode SPI Transaction\nByte 0 1\nData from host Opcode= 0x96regModeParam\n0: Only LDO used for all modes\n1: DC_DC+LDO used for STBY_XOSC,FS, RX and TX modes\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201975 of 111\nSemtech\n www.semtech.com13.1.12 Calibrate Function\nAt power up the radio performs calibration of RC64k , RC13M , PLL and ADC. It is however possible to launch a calibration of \none or several blocks at any time starting in STDBY_RC mode. The calibrate function starts the calibration of a block defined \nby calibParam .   \nThe total calibration time if all blocks are calibrated is 3.5 ms. The calibration must be laun ched in STDBY_RC mode and the \nBUSY pins will be high during the ca libration process. A falling edge of BUSY indicates the end of the procedure.\n13.1.13 CalibrateImage\nThe function CalibrateImage(...) allows the user to calibrate the image rejection of the device for the device operating \nfrequency band.Table 13-17: Calibrate SPI Transaction\nByte 0 1\nData from host Opcode = 0x89 calibParam\nTable 13-18: Calibration Setting\nCalibParam Calibration Setting\nBit 00: RC64k  calibration disabled\n1: RC64k calibration enabled\nBit 10: RC13M calibration disabled\n1: RC13M calibration enabled\nBit 20: PLL calibration disabled\n1: PLL calibration enabled\nBit 30: ADC pulse calibration disabled\n1: ADC pulse calibration enabled\nBit 40: ADC bulk N calibration disabled\n1: ADC bulk N calibration enabled\nBit 50: ADC bulk P calibration disabled\n1: ADC bulk P calibration enabled\nBit 60: Image calibration disabled\n1: Image calibration enabled\nBit 7 0: RFU\nTable 13-19: CalibrateIma ge SPI Transaction\nByte 0 1 2\nData from host Opcode = 0x98 freq1 freq2\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201976 of 111\nSemtech\n www.semtech.comFor more details on the spec ific frequency bands, see Section 9.2.1 "Image Calibration for Specific Frequency Bands" on \npage 56 .\n13.1.14 SetPaConfig\nSetPaConfig  is the command which is used to differentiate the SX 1261 from the SX1262. When  using this command, the \nuser selects the PA to be used by the device as well as its configuration.\npaDutyCycle  controls the duty cycle (conduction angle) of both PAs (SX1261 and SX1262). The maximum output power, the \npower consumption, and the harmonics will drastically change with paDutyCycle . The values given across this datasheet \nare the recommended settings to achieve the best efficiency of the PA. Changing the paDutyCycle will affect the \ndistribution of the power in the harmonics and should thus b e  s e l e c t e d  t o  w o r k  i n  c o n j unction of a given matching \nnetwork.\nhpMax  selects the size of the PA in the SX 1262, this value has no influence on th e SX1261. The maximum output power can \nbe reduced by reducing the value of hpMax . The valid range is between 0x00 and 0x07 and 0x07 is the maximum supported \nvalue for the SX1262 to achieve +22 dBm output power. Increasing hpMax above 0x07 could cause early aging of the device \nof could damage the device when used in extreme temperatures.\ndeviceSel is used to select either the SX1261 or the SX1262.\npaLut  is reserved and has always the value 0x01.\n13.1.14.1 PA Optimal Settings\nPA optimal settings are used to maximize the PA efficiency when the requested output power is lower than the nominal \n+22 dBm (SX1262) or +14/15 dBm (SX1261). For example, the maximum output power in Japan is +10 dBm, and in China it \nis +17 dBm in some bands. Those optimal settings require:\n• a dedicated matching / PA load impedance\n• a specific tweaking of the PA settings, described in Table 13-21: PA Operating Modes with Optimal SettingsTable 13-20: SetPaConfig SPI Transaction\nByte 0 1 2 3 4\nData from host Opcode = 0x95 paDutyCycle hpMaxdeviceSel\n0: SX12621: SX1261paLut\nreserved and \nalways 0x01\nTable 13-21: PA Operating Mo des with Optimal Settings\nModeOutput \nPowerpaDutyCycle hpMax deviceSel paLutValue in \nSetTxParams1\nSX1261+15 dBm 0x06 0x00 0x01 0x01 +14 dBm\n+14 dBm 0x04 0x00 0x01 0x01 +14 dBm+10 dBm 0x01 0x00 0x01 0x01 +13 dBm\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201977 of 111\nSemtech\n www.semtech.comNote:\nThese changes make the use of nominal power either sub-optimal or unachievable.\nCaution!The following restrictions must be observed to avoid vo ltage overstress on the PA, exceeding the maximum ratings \nmay cause irreversible damage to the device:\n• For SX1261 at synthesis frequency above 400 MHz, paDutyCycle  should not be higher than 0x07.\n• For SX1261 at synthesis frequency below 400 MHz, paDutyCycle  should not be higher than 0x04.\n• For SX1262, paDutyCycle  should not be higher than 0x04.\n13.1.15 SetRxTxFallbackMode\nThe command SetRxTxFallbackMode  defines into which mode the chip goes afte r a successful transmissi on or after a packet \nreception.\nThe fallbackMode byte definition is given as follows:\nBy default, the radio will always return in STDBY_RC unless the configuration is changed by using this command. Changing \nthe default mode from STDBY_RC to STDBY_XOSC or FS will only have an impact on the switching time of the radio.SX1262+22 dBm 0x04 0x07 0x00 0x01 +22 dBm\n+20 dBm 0x03 0x05 0x00 0x01 +22 dBm+17 dBm 0x02 0x03 0x00 0x01 +22 dBm+14 dBm 0x02 0x02 0x00 0x01 +22 dBm\n1. See Section 13.4.4 "SetTxParams" on page 84 .\nTable 13-22: SetRxTxFallbac kMode SPI Transaction\nByte 0 1\nData from host Opcode = 0x93 fallbackMode\nTable 13-23: Fallback Mode Definition\nFallback Mode Value Description\nFS 0x40 The radio goes into FS mode after Tx or Rx\nSTDBY_XOSC 0x30 The radio goes into STDBY_XOSC mode after Tx or Rx\nSTDBY_RC 0x20 The radio goes into STDBY_RC mode after Tx or RxTable 13-21: PA Operating Mo des with Optimal Settings\nModeOutput \nPowerpaDutyCycle hpMax deviceSel paLutValue in \nSetTxParams1\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201978 of 111\nSemtech\n www.semtech.com13.2 Registers and Buffer Access\n13.2.1 WriteRegister Function\nThe command WriteRegister(...) allows writing a block of bytes in a data memo ry space starting at a specific address. The \naddress is auto incremented afte r each data byte so that data is stored in  contiguous memory lo cations. The SPI data \ntransfer is described in the following table.\n13.2.2 ReadRegister Function\nThe command ReadRegister(...)  allows reading a block of data starting at a given address. The addre ss is auto-incremented \nafter each byte. The SPI data  transfer is described in Table 13-25 . Note that the host has to send an NOP  after sending the 2 \nbytes of address to start receiving data bytes on the next NOP sent.\n13.2.3 WriteBuffer Function\nThis function is used to store data payl oad to be transmitted. The address is auto-incremented; when it exceeds the value \nof 255 it is wrapped back to 0 due to the circular nature of  the data buffer. The address starts with an offset set as a \nparameter of the function. Table 13-26  describes the SPI data transfer.Table 13-24: WriteRegister SPI Transaction\nByte 0 1 2 3 4 ... n\nData from \nhostOpcode = \n0x0Daddress[15:8] address[7:0] data@address data@address+1 ... data@address+ (n-3)\nData to host RFU Status Status Status Status ... status\nTable 13-25: ReadRegister SPI Transaction\nByte 0 1 2 3 4 5 ... n\nData from \nhostOpcode \n= 0x1Daddress[15:8] address[7:0] NOP NOP NOP ... NOP\nData to host RFU Status Status Status data@address data@address+1 ...data@address+\n(n-4)\nTable 13-26: WriteBuffer SPI Transaction\nByte 0 1 2 3 ... n\nData from hostOpcode = \n0x0Eoffset data@offset data@offset+1 ... data@offset+(n-2)\nData to host RFU Status Status Status ... Status\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201979 of 111\nSemtech\n www.semtech.com13.2.4 ReadBuffer Function\nThis function allows reading (n-3) bytes of  payload received starting at offset. Note that the NOP must be sent after sending \nthe offset.\n13.3 DIO and IRQ Control Functions\n13.3.1 SetDioIrqParams\nThis command is used to set the IRQ flag.   \n13.3.2 IrqMask\nThe IrqMask masks or unmasks the IRQ which can be triggered by the device. By defaul t, all IRQ are masked (all ‘0’) and the \nuser can enable them one by one (or several at a time) by setting the corresponding mask to ‘1’.\n13.3.2.1 DioxMask\nThe interrupt causes a DIO to be set if the corresponding bit in DioxMask and the IrqMask are set. As an example, if bit 0 of \nIrqMask is set to 1 and bit 0 of DIO1Mask is set to 1 then, a rising edge of IRQ so urce TxDone will be logged in the IRQ regist er \nand will appear at the same time on DIO1.\nOne IRQ can be mapped to all DIOs, one DIO can be mapped to al l IRQs (an OR operation is do ne) but some IRQ sources will \nbe available only on certain modes of operation and frames.Table 13-27: ReadBuffer SPI Transaction\nByte 0 1 2 3 4 ... n\nData from \nhostOpcode \n= 0x1Eoffset NOP NOP NOP ... NOP\nData to host RFU Status Status data@offset data@offset+1 ... data@offset+(n-3)\nTable 13-28: SetDioIrqPar ams SPI Transaction\nByte 0 1-2 3-4 5-6 7-8\nData from hostSetDioIrqParams \n(0x08)Irq Mask(15:0) DIO1Mask(15:0) DIO2Mask(15:0) DIO3Mask(15:0)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201980 of 111\nSemtech\n www.semtech.comIn total there are 10 possible interrupt sources depending on the chosen frame and chip mode. Each one of them can be \nenabled or masked. In addition, every one of them can be mapped to DIO1, DIO2 or DIO3. Note that if DIO2 or DIO3 are used \nto control the RF Switch or the TCXO , the IRQ will not be generated even  if it is mapped to the pins.\nA dedicated 10-bit register ca lled IRQ_reg is used to log IRQ sources. Each  position corresponds to one IRQ source as \ndescribed in the table above. A set of user commands is used to configure IRQ mask, DIOs mapping and IRQ clearing as \nexplained in the following chapters.\n13.3.3 GetIrqStatus\nThis command returns the value of the IRQ register. Table 13-29: IRQ Registers\nBit IRQ Description Modulation\n0 TxDone Packet transmission completed All\n1 RxDone Packet received All\n2 PreambleDetected Preamble detected All\n3 SyncWordValid Valid sync word detected FSK\n4 HeaderValid Valid LoRa header received LoRa®\n5 HeaderErr LoRa header CRC error LoRa®\n6 CrcErr Wrong CRC received All7 CadDone Channel activity detection finished LoRa®  \n8 CadDetected Channel activity detected LoRa®\n9 Timeout Rx or Tx timeout All\nTable 13-30: GetIrqStatus SPI Transaction\nByte 0 1 2-3\nData from host Opcode = 0x12 NOP NOP\nData to host RFU Status IrqStatus(15:0)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201981 of 111\nSemtech\n www.semtech.com13.3.4 ClearIrqStatus\nThis command clears an IRQ fl ag in the IRQ register.   \nT h i s  f u n c t i o n  c l e a r s  a n  I R Q  f l a g  i n  t h e  IRQ register by sett ing to 1 the bit of ClearIrqParam  corresponding to the same \nposition as the IRQ flag to be cleared. As an example, if bit 0 of ClearIrqParam  is set to 1 then IRQ flag at bit 0 of IRQ register \nis cleared. \nIf a DIO is mapped to one single IRQ source, the DIO is cleared if the corresponding bit in the IR Q register is cleared. If DIO  \nis set to 0 with several IRQ sources, then  the DIO remains set to one until all bits mapped to the DIO in the IRQ register are \ncleared.\n13.3.5 SetDIO2AsRfSwitchCtrl\nThis command is used to configure DIO2 so that it  can be used to control an external RF switch.\nWhen controlling the external RX switch, the pin DIO2 will toggle accordingly to the internal state machine. DIO2 will be \nasserted high a few microseconds before the ramp-up of the PA and will go bes et to zero after the ramp-down of the PA.\nThe enable byte definition is given as follows:   \n13.3.6 SetDIO3AsTCXOCtrl\nThis command is used to configure the chip for an external TCXO reference voltage controlled by DIO3.Table 13-31: ClearIrqStatus SPI Transaction\nByte 0 1-2\nData from host Opcode = 0x02 ClearIrqParam(15:0)\nTable 13-32: SetDIO2AsRfSwit chCtrl SPI Transaction\nByte 0 1\nData from host Opcode = 0x9D enable\nTable 13-33: Enable Confi guration Definition\nEnable Description\n0 DIO2 is free to be used as an IRQ\n1DIO2 is selected to be used to control an RF switch. In this case:\nDIO2 = 0 in SLEEP , STDBY_RX, STDBY_XOSC, FS and RX modes, DIO2 = 1 in TX mode\nTable 13-34: SetDIO3asTCX OCtrl SPI Transaction\nByte 0 1 2-4\nData from host Opcode = 0x97 tcxoVoltage delay(23:0)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201982 of 111\nSemtech\n www.semtech.comWhen this command is used, the device now controls the TCXO itself through DIO3. When needed (in mode STDBY_XOSC, \nFS, TX and RX), the internal state machine will set DIO3 to a predefined output voltage (control through the parameter \ntcxoVoltage ). Internally, the clock controller will wait for the 32 MHz to appear before releasing the internal state machine.\nThe time needed for the 32 MHz to appear and stabilize can be controlled through the parameter delay(23:0) . If the 32 MHz \nfrom the TCXO is not detected internally at the end the delay period, the error XOSC_START_ERR will be flagged in the error \ncontroller.\nThe XOSC_START_ERR flag will be raised at POR or at wake-up from Sleep mode in a cold-start condition, when a TCXO is \nused. It is an expected behaviour since the chip is not yet aware of being clocked by a TCXO. The user should simply clear \nthis flag with the ClearDeviceErrors command.\nThe tcxoVoltage  byte definition is g iven in as follows:  \nThe power regulation for tcxoVoltage  i s  c o n f i g u r e d  t o  b e  2 0 0  m V  b e l o w  t h e  s u pply voltage. This means that even if \ntcxoVoltage is configured above the supply voltage, the supply voltage will be limited by: VDDop > VTCXO + 200 mV\nThe timeout duration is defined by\nDelay duration = Delay(23:0) *15.625 µs\nMost TCXO will not be immediately ready at the desired freq uency and will suffer from an initial setup time where the \nfrequency is gently drifting toward the wanted frequency. This setup time is different from one TCXO to another and is also \ndependent on the TCXO manufactur er. To ensure this setup time does not have  any effect on the modulation or packets, \nthe delay value will internally gate the 32 MHz coming from the TCXO to give enough time for this initial drift to stabilize. \nAt the end of the delay period, the internal block will stop ga ting the clock and the radio will carry on to the next step.\nNote:The user should take the delay period in to account when going into Tx or Rx mo de from STDBY_RC mode. Indeed, the time \nneeded to switch modes will increase with  the duration of delay. To avoid increasi ng the switching mode time, the user can \nfirst set the device in STDBY_XOSC which will switch on the TC XO and wait for the delay period. Then, the user can set the \ndevice into Tx or Rx mode without suffering from any delay additional to the internal processing.Table 13-35: tcxoVoltage Configuration Definition\ntcxoVoltage Description\n0x00 DIO3 outputs 1.6 V to supply the TCXO\n0x01 DIO3 outputs 1.7 V to supply the TCXO0x02 DIO3 outputs 1.8 V to supply the TCXO\n0x03 DIO3 outputs 2.2 V to supply the TCXO\n0x04 DIO3 outputs 2.4 V to supply the TCXO0x05 DIO3 outputs 2.7 V to supply the TCXO\n0x06 DIO3 outputs 3.0 V to supply the TCXO\n0x07 DIO3 outputs 3.3 V to supply the TCXO\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201983 of 111\nSemtech\n www.semtech.com13.4 RF Modulation and Packet-Related Functions\n13.4.1 SetRfFrequency\nThe command SetRfFrequency(...)  is used to set the frequenc y of the RF frequency mode. \nThe LSB of Freq is equal to the PLL step which is:\nSetRfFrequency(...)  defines the chip frequency in FS, TX and RX modes. In RX, the required IF frequency offset is automatically \nconfigured.\n13.4.2 SetPacketType\nThe command SetPacketType(...)  sets the SX1261 radio in LoRa®  or in FSK mode. The command SetPacketType(...)  must be \nthe first of the radio configuration sequ ence. The parameter fo r this command is PacketType .   \nChanging from one mode of operation to another is done using the command SetPacketType(...) . The parameters from the \nprevious mode are not kept internally. The switch from one frame to another must be done in STDBY_RC mode.Table 13-36: SetRfFrequency SPI Transaction\nByte 0 1-4\nData from host Opcode = 0x86 RfFreq(31:0)\nTable 13-37: SetPacketT ype SPI Transaction\nByte 0 1\nData from host Opcode = 0x8A PacketType\nTable 13-38: PacketType Definition\nPacketType Value Modem Mode of Operation\nPACKET_TYPE_GFSK 0x00 GFSK packet type\nPACKET_TYPE_LORA 0x01 LORA modeRFfrequencyRFFreq*FXTAL\n252----------------- -------------- ------------ =\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201984 of 111\nSemtech\n www.semtech.com13.4.3 GetPacketType\nThe command GetPacketType()  returns the current operating pa cket type of the radio.   \n13.4.4 SetTxParams\nThis command sets the TX output  power by using the parameter power and the TX ramping time by using the parameter\nRampTime . This command is available fo r all protocols selected.   \nThe output power is defined as power  in dBm in a range of\n• - 17 (0xEF) to +14 (0x0E) dBm by step of 1 dB if low power PA is selected\n• - 9 (0xF7) to +22 (0x16) dBm by step of 1 dB if high power PA is selected\nSelection between high power PA and low power PA is done with the command SetPaConfig  and the parameter  deviceSel . \nBy default low power PA and +14 dBm are set.\nThe power ramp time is defined by the parameter RampTime  as defined in the following table:Table 13-39: GetPacketType SPI Transaction\nByte 0 1 2\nData from host Opcode = 0x11 NOP NOP\nData to host RFU Status packetType\nTable 13-40: SetTxParams SPI Transaction\nByte 0 1 2\nData from host Opcode = 0x8E power RampTime\nTable 13-41: RampTime Definition\nRampTime Value RampTime (μs)\nSET_RAMP_10U 0x00 10\nSET_RAMP_20U 0x01 20\nSET_RAMP_\xa040U 0x02 40\nSET_RAMP_80U 0x03 80\nSET_RAMP_200U 0x04 200\nSET_RAMP_800U 0x05 800\nSET_RAMP_1700U 0x06 1700\nSET_RAMP_3400U 0x07 3400\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201985 of 111\nSemtech\n www.semtech.com13.4.5 SetModulationParams\nThe command SetModulationParams(...)  is used to configure the modulation pa rameters of the radio. Depending on the \npacket type selected prior to calling this function, the paramete rs will be interpreted di fferently by the chip.   \nThe meaning of the parameter depends on the selected protocol.\nIn FSK bitrate (BR) and Frequency Deviation (Fdev) are used fo r the transmission or reception. Bandwidth is used for \nreception purpose. The pulse represents th e Gaussian filter used to filter the mo dulation stream on the transmitter side.\nIn LoRa®  packet type, SF corresponds to th e Spreading Factor used for the LoRa®  modulation. SF is defined by the parameter \nParam[1] . BW corresponds to the bandwidth onto which the LoRa®  signal is spread. BW in LoRa®  is defined by the parameter \nParam[2] .\nThe LoRa®  payload is fit with a forward error correcting mechanism which has several levels of encoding. The Coding Rate \n(CR) is defined by the parameter Param[3]  in LoRa® .   \nThe parameter LdOpt  corresponds to the Low Data Rate Optimization (LDRO). This parameter is usually set when the LoRa®\nsymbol time is equal or above 16.38 ms (typically for SF11 with BW125 and SF12 with BW125 and BW250). See Section 6.1.1.4 "Low Data Ra te Optimization" on page 39 .\n13.4.5.1 GFSK Modulation Parameters\nThe tables below provide more details on the GFSK modulation parameters:  \nThe bit rate is entered with the parameter br which is related to the fr equency of the main oscilla tor (32 MHz). The bit rate \nrange is from 600 b/s up to 300 kb/s with a default value at 4.8 kb/s.Table 13-42: SetModulationParams SPI Transaction\nByte 0 1 2 3 4 5 6 7 8\nData from host for \nModulation ParamsOpcode \n0x8BMod\nParam1Mod\nParam2Mod\nParam3Mod\nParam4Mod\nParam5Mod\nParam6Mod\nParam7Mod\nParam8\nTable 13-43: GFSK ModParam1, Mo dParam2 & ModParam3 - br\nBR(23:0) Description\n0x000001 to 0xFFFFFF br = 32 * Fxtal / bit rate\nTable 13-44: GFSK ModParam4 - PulseShape\nPulseShape Description\n0x00 No Filter applied\n0x08 Gaussian BT 0.3\n0x09 Gaussian BT 0.5\n0x0A Gaussian BT 0.7\n0x0B Gaussian BT 1\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201986 of 111\nSemtech\n www.semtech.com  Table 13-45: GFSK ModParam5 - Bandwidth\nBandwidth Description\n0x1F RX_BW_4800 (4.8 kHz DSB )\n0x17 RX_BW_5800 (5.8 kHz DSB)\n0x0F RX_BW_7300 (7.3 kHz DSB)\n0x1E RX_BW_9700 (9.7 kHz DSB)\n0x16 RX_BW_11700 (11.7 kHz DSB)\n0x0E RX_BW_14600 (14.6 kHz DSB)\n0x1D RX_BW_19500 (19.5 kHz DSB)\n0x15 RX_BW_23400 (23.4 kHz DSB)\n0x0D RX_BW_29300 (29.3 kHz DSB)\n0x1C RX_BW_39000 (39 kHz DSB)\n0x14 RX_BW_46900 (46.9 kHz DSB)\n0x0C RX_BW_58600 (58.6 kHz DSB)\n0x1B RX_BW_78200 (78.2 kHz DSB)\n0x13 RX_BW_93800 (93.8 kHz DSB)\n0x0B RX_BW_117300 (117.3 kHz DSB)\n0x1A RX_BW_156200 (156.2 kHz DSB)\n0x12 RX_BW_187200 (187.2 kHz DSB)\n0x0A RX_BW_234300 (232.3 kHz DSB)\n0x19 RX_BW_312000 (312 kHz DSB)\n0x11 RX_BW_373600 (373.6 kHz DSB)0x09 RX_BW_467000 (467 kHz DSB)\nTable 13-46: GFSK ModParam6, Mo dParam7 & ModParam8 - Fdev\nFdev(23:0) Description\n0x000000 to 0xFFFFFF Fdev = (Frequency Deviation * 2^25) / Fxtal\nFrequencydeviationFdev*FXTAL\n252-------------------- --------------- =\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201987 of 111\nSemtech\n www.semtech.com13.4.5.2 LoRa® Modula tion Parameters\nThe tables below provide more details on the LoRa®  modulation parameters:\nTable 13-47: LoRa® ModParam1- SF\nSF Description\n0x05 SF5\n0x06 SF60x07 SF7\n0x08 SF8\n0x09 SF9\n0x0A SF10\n0x0B SF11\n0x0C SF12\nTable 13-48: LoRa® ModParam2 - BW\nBW Description\n0x00 LORA_BW_7 (7.81 kHz real)0x08 LORA_BW_10 (10.42 kHz real)0x01 LORA_BW_15 (15.63 kHz real)\n0x09 LORA_BW_20 (20.83 kHz real)\n0x02 LORA_BW_31 (31.25 kHz real)\n0x0A LORA_BW_41 (41.67 kHz real)\n0x03 LORA_BW_62 (62.50 kHz real)\n0x04 LORA_BW_125 (125 kHz real)0x05 LORA_BW_250 (250 kHz real)\n0x06 LORA_BW_500 (500 kHz real)\nTable 13-49: LoRa® ModParam3 - CR\nCR Description\n0x01 LORA_CR_4_5\n0x02 LORA_CR_4_60x03 LORA_CR_4_70x04 LORA_CR_4_8\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201988 of 111\nSemtech\n www.semtech.com13.4.6 SetPacketParams\nThis command is used to set the parameters of the packet handling block.\n13.4.6.1 GFSK Packet Parameters\nThe tables below provide more details on the GFSK packets parameters:  \nThe preamble length is a 16-bit value which represents the number of bytes which will be sent by the radio. Each preamble \nbyte represents an alternate of 0 an d 1 and each byte is coded as 0x55.\n  \nThe preamble detector acts as a gate to the packet controller, when different from 0x00 (preamble detector length off), the \npacket controller will only become active if a certain number of  preamble bits have been successfully received by the radio.Table 13-50: LoRa® ModParam4 - LowDataRateOptimize\nLowDataRateOptimize Description\n0x00 LowDataRateOptimize OFF\n0x01 LowDataRateOptimize ON\nTable 13-51: SetPacketParams SPI Transaction\nByte 0 1 2 3 4 5 6 7 8 9\nData from \nhost for \npacket typeOpcode\n= 0x8Cpacket\nParam1packet\nParam2packet\nParam3packet\nParam4packet \nParam5packet\nParam6packet\nParam7packet\nParam8packet\nParam9\nTable 13-52: GFSK PacketParam1 & PacketParam2 - PreambleLength\nPreambleLength (15:0) Description\n0x0001 to 0xFFFF Transmitted preamble leng th: number of bits sent as preamble\nTable 13-53: GFSK PacketParam3 - PreambleDetectorLength\nPreambleDetector Description\n0x00 Preamble detector length off\n0x04 Preamble detector length 8 bits0x05 Preamble detector length 16 bits\n0x06 Preamble detector length 24 bits\n0x07 Preamble detector length 32 bits\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201989 of 111\nSemtech\n www.semtech.comT h e  S y n c  W o r d  i s  d i r e c t l y  p r o g r a m m e d  into the device through simple register access. The table below provide the \naddresses to program the Sync Word value.\nThe node address and the broadc ast address are directly prog rammed into the device throug h simple register access. The \ntables below provide the addresses to program the values.Table 13-54: GFSK PacketParam4 - SyncWordLength\nSyncWordLength Description\n0x00 to 0x40 Sync Word length in bits (going from 0 to 8 bytes)\nTable 13-55: Sync Word Programming\nSync Word Register Address\nByte 0 0x06C0\nByte 1 0x06C1Byte 2 0x06C2\nByte 3 0x06C3\nByte 4 0x06C4Byte 5 0x06C5\nByte 6 0x06C6\nByte 7 0x06C7\nTable 13-56: GFSK PacketParam5 - AddrComp\nAddrComp Description\n0x00 Address Filtering Disable0x01 Address Filtering activated on Node address0x02 Address Filtering activated on Node and broadcast addresses\nTable 13-57: Node Address Programming\nRegister Address Default value\nNodeAddrReg 0x06CD 0x00\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201990 of 111\nSemtech\n www.semtech.comTable 13-58: Broadcast Address Programming\nRegister Address Default value\nBroadcastReg 0x06CE 0x00\nTable 13-59: GFSK PacketParam6 - PacketType\nPacketType Description\n0x00The packet length is known on both sides, the size of the payload is not \nadded to the packet\n0x01The packet is on variable size, the first byte of the payload will be the \nsize of the packet\nTable 13-60: GFSK PacketParam7 - PayloadLength\nAddrComp Description\n0x00 to 0xFFSize of the payload (in bytes) to transmit or maximum size of the \npayload that the receiver can accept.\nTable 13-61: GFSK PacketParam8 - CRCType\nCRCType Description\n0x01 CRC_OFF (No CRC)\n0x00 CRC_1_BYTE (CRC computed on 1 byte)\n0x02 CRC_2_BYTE(CRC computed on 2 byte)\n0x04 CRC_1_BYTE_INV(CRC computed on 1 byte and inverted)0x06 CRC_2_BYTE_INV(CRC computed on 2 byte and inverted)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201991 of 111\nSemtech\n www.semtech.comIn the SX1261 and SX1262, the CRC can be fully configured and the polynomial used, as well as the initial values can be \nentered directly through register access.\n13.4.6.2 LoRa® Packet Parameters\nThe tables below provide more details on the LoRa®  packets parameters:  Table 13-62: CRC Initial Value Programming\nRegister Address Default Value\nCRC MSB Initial Value [15:8] 0x06BC 0x1D\nCRC LSB Initial Value [7:0] 0x06BD 0x0F\nTable 13-63: CRC Polynomial Programming\nRegister Address Default Value\nCRC MSB polynomial value [15:8] 0x06BE 0x10\nCRC LSB polynomial value [7:0] 0x06BF 0x21\nTable 13-64: GFSK PacketParam9 - Whitening\nAddrComp Description\n0x00 No encoding0x01 Whitening enable\nTable 13-65: Whitening Initial Value\nWhitening initial value Register Address Default Value\nWhitening initial value MSB 0x06B8 0x01\nWhitening initial value LSB 0x06B9 0x00\nTable 13-66: LoRa® PacketParam1 & PacketParam2 - PreambleLength\nPreambleLength (15:0) Description\n0x0001 to 0xFFFF preamble length: numb er of symbols sent as preamble\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201992 of 111\nSemtech\n www.semtech.comThe preamble length is a 16-bit value which represents the number of LoRa®  symbols which will be sent by the radio.  \nWhen the byte headerType is at 0x00, the payload length , coding rate and the header  CRC will be added to the LoRa®\nheader and transpor ted to the receiver.\n13.4.7 SetCadParams\nThe command SetCadConfig(...)  defines the number of symbols on which CAD operates.   Table 13-67: LoRa® PacketParam3 - HeaderType\nHeaderType Description\n0x00 Variable length packet (explicit header)\n0x01 Fixed length pack et (implicit header)\nTable 13-68: LoRa® PacketParam4 - PayloadLength\nPayloadlength Description\n0x00 to 0xFFSize of the payload (in bytes) to transmit or maximum size of the \npayload that the receiver can accept.\nTable 13-69: LoRa® PacketParam5 - CRCType\nCRCType Description\n0x00 CRC OFF\n0x01 CRC ON\nTable 13-70: LoRa® PacketParam6 - InvertIQ\nAddrComp Description\n0x00 Standard IQ setup0x01 Inverted IQ setup\nTable 13-71: SetCadParams SPI Transaction\nByte 0 1 2 3 4 5-7\nData from \nhostOpcode = 0x88 cadSymbolNum cadDetPeak cadDetMin cadExitMode cadTimeout(23:0)\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201993 of 111\nSemtech\n www.semtech.comThe number of symbols used is defined in the following table.   \nParameters cadDetPeak  and cadDetMin  define the sensitivity of the LoRa modem when trying to correl ate to actual LoRa \npreamble symbols. These two settings depe nd on the LoRa spreading factor and Bandwidth, but also depend on the \nnumber of symbol used to validate or not the detection. Choosing the right value is  not easy and the values selected must \nb e  c a r e f u l l y  t e s t e d  t o  e n s u r e  a  g o o d  d e tection at sensitivity level,  and also to limit the number of false detections.\nApplication note AN1200.48 provides guidan ce for the selection of these parameters.\nThe parameter cadExitMode  defines the action to be done after a CAD operation. This is optional.\nThe parameter cadTimeout is only used when the CAD is performed with cadExitMode = CAD_RX. Here, the cadTimeout \nindicates the time the de vice will stay in Rx fo llowing a successful CAD.\nRx Timeout = cadTimeout * 15.625\n13.4.8 SetBufferBaseAddress\nThis command sets the base addresses in the data buffer in all modes of operations for the packet handing operation in TX \nand RX mode. The usage and definition of those parameters are described in the different packet type sections.Table 13-72: CAD Number of Symbol Definition\ncadSymbolNum Value Number of Symbols used for CAD\nCAD_ON_1_SYMB 0x00 1\nCAD_ON_2_SYMB 0x01 2CAD_ON_4_SYMB 0x02 4\nCAD_ON_8_SYMB 0x03 8\nCAD_ON_16_SYMB 0x04 16\nTable 13-73: CAD Exit Mode Definition\ncadExitMode Value Operation \nCAD_ONLY 0x00The chip performs the CAD operation in LoRa® . Once done and whatever the \nactivity on the channel, the chip goes back to STBY_RC mode.\nCAD_RX 0x01The chip performs a CAD operation and if an activity is detected, it stays in RX until \na packet is detected or the timer reaches the timeout defined by\ncadTimeout * 15.625 us\nTable 13-74: SetBufferBaseAddress SPI Transaction\nByte 0 1 2\nData from host Opcode = 0x8F TX  base address RX base address\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201994 of 111\nSemtech\n www.semtech.com13.4.9 SetLoRaSymbNumTimeout\nThis command sets the number of symbols used by  the modem to validate a successful reception.\nIn LoRa®  mode, when going into Rx, the modem will lock as soon as a LoRa®  symbol has been detect ed which may lead to \nfalse detection. This phenomena is  quite rare but nevertheless poss ible. To avoid th is, the command \nSetLoRaSymbNumTimeout can be used to define the number of symbols which will  b e  u s e d  t o  v a l i date the correct \nreception of a packet. \nWhen the SymbNum parameter is se t the 0, the modem will validate  the reception as soon as a LoRa®  Symbol has been \ndetected.\nWhen SymbNum is different from 0, the modem will wait for a total of SymbNum LoRa®  symbol to validate, or not, the \ncorrect detection of a LoRa®  packet. If the various states of the demodulator are not lock at this moment, the radio will \ngenerate the RxTimeout IRQ.Table 13-75: SetLoRaSymbNumTimeout SPI Transaction\nByte 0 1\nData from host Opcode = 0xA0 SymbNum\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201995 of 111\nSemtech\n www.semtech.com13.5 Communication Status Information\nThese commands return the information about the chip status, and received packet such a packet length, received power \nduring packet, several flags indicating if the packet as be en correctly received. The returned parameters differ for the LoRa®\nprotocol.\n13.5.1 GetStatus\nThe host can retrieve chip stat us directly through the command GetStatus() : this command can be i ssued at any time and \nthe device returns the status of the device. The command GetStatus()  is not strictly necessary since device returns status \ninformation also on command bytes. The status byte returned is described in Table 13-76 . \nThe SPI transaction for the command GetStatus()  is given in the following table. Table 13-76: Status Bytes Definition  \n7 6:4 3:1 0\nReserved Chip mode Command status Reserved\n-0x0: Unused 0x0: Reserved\n-RFU RFU\n0x2: STBY_RC 0x2: Data is available to host1\n1. A packet has been successfully received and data can be retrieved0x3: STBY_XOSC 0x3: Command timeout2\n2. A transaction from host took too long to complete and triggered an internal watc hdog. The watchdog mechanism can be disabled  by host; it \nis meant to ensure all outcomes are flagged to the host MCU.0x4: FS 0x4: Command processing error3\n3. Processor was unable to process command either because of an invalid opcode or because an inco rrect number of parameters has  been \nprovided.0x5: RX 0x5: Failure to execute command4\n4. The command was successfully processed, however the chip coul d not execute the command; for instance it was unable to enter the specified \ndevice mode or send the requested data,0x6: TX 0x6: Command TX done5\n5. The transmission of the current packet has terminated\nTable 13-77: GetStatus SPI Transaction\nByte 0 1\nData from host Opcode = 0xC0 NOP\nData to host RFU Status\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201996 of 111\nSemtech\n www.semtech.com13.5.2 GetRxBufferStatus\nThis command returns the length of the last received packet (PayloadLengthRx) an d the address of the first byte received \n(RxStartBufferPointer). It is applicable to all modems. The addre ss is an offset relative to the first byte of the data buffer.\n13.5.3 GetPacketStatus\nThe next table gives the description of the different RSSI an d SNR available on the chip de pending on the packet type.Table 13-78: GetRxBufferStatus SPI Transaction\nByte 0 1 2 3\nData from host Opcode = 0x13 NOP NOP NOP\nData to host RFU Status PayloadLengthRx RxStartBufferPointer\nTable 13-79: GetPacketStatus SPI Transaction\nByte 0 1 2 3 4\nData from hostOpcode = \n0x14NOP NOP NOP NOP\nData to host for FSK packet type RFU Status RxStatus RssiSync RssiAvg \nData to host for LORA packet type RFU Status RssiPkt SnrPkt SignalRssiPkt\nTable 13-80: Status Fields\nRSSI Description\nRxStatus\nFSKbit 7: preamble err\nbit 6: sync err\nbit 5: adrs err\nbit 4: crc err\nbit 3: length err\nbit 2: abort err\nbit 1: pkt received\nbit 0: pkt sent\nRssiSync\nFSKRSSI value latched upon the detection of the sync address.\nActual signal power is –RssiSync/2 (dBm) \nRssiAvg\nFSKRSSI average value over the payload of the received packet. Latched upon the pkt_done IRQ. \nActual signal power is –RssiAvg/2 (dBm) \nRssiPkt\nLoRa®Average over last packet received of RSSI\nActual signal power is –RssiPkt/2 (dBm) \nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201997 of 111\nSemtech\n www.semtech.com13.5.4 GetRssiInst\nThis command returns the instantaneous RS SI value during reception of the packet. The command is valid for all protocols.\n13.5.5 GetStats\nThis command returns the number of inform ations received on a few last packets. The command is valid for all protocols.\n13.5.6 ResetStats\nThis command resets the value read by the command GetStats. To execute this command, the OpCode is 0x00 followed by \n6 zeros (so 7 zeros in total).SnrPkt\nLoRa®Estimation of SNR on last packet received in two’s compliment format multiplied by 4.\nActual SNR  in dB =SnrPkt/4\nSignalRssiPkt\nLoRa®Estimation of RSSI of the LoRa®  signal (after despreading) on last packet received \nActual Rssi in dB = -SignalRssiPkt/2\nTable 13-81: GetRssiIns t SPI Transaction\nByte 0 1 2\nData from host Opcode = 0x15 NOP NOP\nData to host RFU StatusRssiInst\nSignal power in dBm = –RssiInst/2 (dBm) \nTable 13-82: GetStats SPI Transaction\nByte 0 1 2-3 4-5 6-7\nData from hostOpcode = \n0x10NOP NOP NOP NOP\nData to host in GFSK \npacket typeRFU Status NbPktReceived(15:0) NbPktC rcError(15:0) NbPktLengthError(15:0)\nData to host in LoRa®  \npacket typeRFU Status NbPktReceived(15:0) NbPktC rcError(15:0) NbPktHeaderErr(15:0)\nTable 13-83: ResetStats SPI Transaction\nByte 0 1-6\nData from host OpCode = 0x00 0x00Table 13-80: Status Fields\nRSSI Description\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201998 of 111\nSemtech\n www.semtech.com13.6 Miscellaneous\n13.6.1 GetDeviceErrors\nThis commands returns possible errors flag that could occur during different chip operation as described below.\nThe following table gives th e meaning of each OpError.\n13.6.2 ClearDeviceErrors\nThis commands clears all the errors recorded in the device. The errors can not be cleared independently.Table 13-84: GetDeviceErr ors SPI Transaction\nByte 0 1 2-3\nData from host Opcode= 0x17 NOP NOP\nData to host RFU Status OpError(15:0)\nTable 13-85: OpError Bits\nOpError 0 1\nbit 0 RC64K_CALIB_ERR RC64k  calibration failed\nbit 1 RC13M_CALIB_ERR RC13M  calibration failed\nbit 2 PLL_CALIB_ERR PLL calibration failed\nbit 3 ADC_CALIB_ERR ADC calibration failed \nbit 4 IMG_CALIB_ERR IMG calibration failed bit 5 XOSC_START_ERR XOSC failed to start\nbit 6 PLL_LOCK_ERR PLL failed to lock\nbit 7 RFU RFUbit 8 PA_RAMP_ERR PA ramping failed\nbit 15:9 RFU RFU\nTable 13-86: ClearDeviceE rrors SPI Transaction\nByte 0 1 2\nData from host Opcode= 0x07 0x00 0x00\nData to host RFU Status Status\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 201999 of 111\nSemtech\n www.semtech.com14. Application\n14.1 HOST API Basic Read Write Function\nThe communication with the SX1261/2 is organized around generic functions which allow the user to control the device \nbehavior. Each function is based on an Operational Command (ref er throughout this document as “Opcode”), which is then \nfollowed by a set of parameters. The SX1261/2 use the BUSY pin to indicate the status of the chip. In the following chapters, it is assumed that host microcontroller ha s an SPI and access to it via spi.write(data). Data is an  8-bit word. The SPI chip se lect \nis defined by NSS, active low.\n14.2 Circuit Configuration for Basic Tx Operation\nThis chapter describes the se quence of operations needed to send or receive a frame starting from a power up.\nAfter power up (battery insertion or hard reset) the chip ru ns automatically a calibration pr ocedure and goes to STDBY_RC \nmode. This is indicated by a low state on BUSY pin. From this state the steps are:\n1. If not in STDBY_RC mode, then go  to this mode with the command SetStandby(...)\n2. Define the protocol ( LoRa®  or FSK) with the command SetPacketType(...)\n3. Define the RF frequency with the command SetRfFrequency(...)\n4. Define the Power Amplifier co nfiguration with the command SetPaConfig(...)\n5. Define output power and ramping time with the command SetTxParams(...)\n6. Define where the data payload will be stored with the command SetBufferBaseAddress(...)\n7. Send the payload to the data buffer with the command WriteBuffer(...)\n8. Define the modulation parameter according to the chosen protocol with the command SetModulationParams(...)1\n9. Define the frame format to be used with the command SetPacketParams(...)2\n10. Configure DIO and IRQ: use the command SetDioIrqParams(...)  to select TxDone IRQ  and map this IRQ to a DIO (DIO1, \nDIO2 or DIO3)\n11. Define Sync Word value: use the command WriteReg(...)  to write the value of the register via direct register access\n12. Set the circuit in transmitter mode to start transmission with the command SetTx() . Use the parameter to enable \nTimeout\n13. Wait for the IRQ TxDone  or Timeout : once the packet has been sent the ch ip goes automatically to STDBY_RC mode\n14. Clear the IRQ TxDone flag \n1. Please refer to Section  15.1\n2. Please refer to Section  15.2\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019100 of 111\nSemtech\n www.semtech.com14.3 Circuit Configuration for Basic Rx Operation\nThis chapter describes the sequence of operations needed to receive a frame starting from a power up. This sequence is \nvalid for all protocols.\nAfter power up (battery insertion or hard reset) the chip run automatically a calibration procedure and goes to STDBY_RC \nmode. This is indicated by a low state on BUSY pin. From this state the steps are:\n1. If not in STDBY_RC mode, then set the circuit in this mode with the command SetStandby()\n2. Define the protocol ( LoRa®  or FSK) with the command SetPacketType(...)\n3. Define the RF frequency with the command SetRfFrequency(...)\n4. Define where the data will be stored insi de the data buffer in  Rx with the command SetBufferBaseAddress(...)\n5. Define the modulation parameter according to the chosen protocol with the command SetModulationParams(...)1\n6. Define the frame format to be used with the command SetPacketParams(...)\n7. Configure DIO and irq: use the command SetDioIrqParams(...) to select the IRQ RxDone and map this IRQ to a DIO (DIO1 \nor DIO2 or DIO3), set IRQ Timeout as well.\n8. Define Sync Word value: use the command WriteReg(...) to write the value of the register via direct register access.\n9. Set the circuit in reception mode: use the command SetRx() . Set the parameter to enable timeout or continuous mode\n10. Wait for IRQ RxDone2 or Timeout : the chip will stay in Rx and look for a ne w packet if the continuous mode is selected \notherwise it will goes to STDBY_RC mode.\n11. In case of the IRQ RxDone , check the status to ensure CRC is correct: use the command GetIrqStatus()\nNote: \nThe IRQ RxDone  means that a packet has been received but the CRC could be wrong: the user must check the CRC before \nvalidating the packet.\n12. Clear IRQ flag RxDone  or Timeout : use the command ClearIrqStatus() . In case of a valid packet  (CRC OK), get the packet \nlength and address of the fi rst byte of the received payload by using the command GetRxBufferStatus(...)\n13. In case of a valid packet (C RC OK), start reading the packet\n14.4 Issuing Commands in the Right Order\nMost of the commands can be sent in any order except for the radio configuration commands which will set the radio in \nthe proper operating mode. Indeed, it is mandatory to set the radio protocol using the command SetPacketType(...) as a first \nstep before issuing any other radio configuration commands. In a second step, the user should define the modulation \nparameter according to the chos en protocol with the command SetModulationParams(...). Finally, the user should then \nselect the packet format with the command SetPacketParams(...). \nNote:\nIf this order is not resp ected, the behavior of the device could be unexpected.\n1. Please refer to Section  15.4\n2. Please refer to Section  15.3\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019101 of 111\nSemtech\n www.semtech.com14.5 Application Schematics\n14.5.1 Application Design of  the SX1261 with RF Switch\nFigure 14-1: Application Schematic of the SX1261 with RF Switch \n14.5.2 Application Design of  the SX1262 with RF Switch\nFigure 14-2: Application Schematic of the SX1262 with RF Switch \nNote:\nThe application schematics presente d here are for information only. \nAlways refer to the latest reference design s posted on www.semtech.com .\nNote:Recommendations for heat dissipation techni ques to be applied to th e PCB designs are given in detail in the application \nnote AN1200.37 “Recommendations for Best Performance” on www.semtech.com .\nIn miniaturized design implementation s where heat dissipations techniques ca nnot be implemented or the use of the \nLowDataRateOptimize is not  supported, the use of a TCXO will provide a more stable clock referenceGNDGND GNDVDD_IN1\nGND2\nXTA3\nXTB4\nGND5\nDIO36\nVREG7\nGND8\nDCC_SW9\nVBAT10\nVBAT_IO11\nDIO212\nDIO113BUSY14NRESET15MISO16MOSI17SCK18NSS19GND20RFI_P21RFI_N22RFO23VR_PA24GND25U1\nSX1261GNDGND\nGNDGND\nGND\nGNDGND GND\nDIO3\nGNDVDD_RADIOVR_PA\nRFIO\nSMA\nC9C7 C5\nC12C2\nL3C4\nC6\nC11L4\nL6L1C1\n15uH L7\n470nFC17C16\n100nFC18C8\nXTA3 1\n2 432.0MHzQ1 Xtal\nGND\nXTB\nNSS\nSCK\nMOSI\nMISO\nSX_NRESET\nBUSY\nDIO1DIO2L5\nC10\nGND\nGNDCTRL6\nRFC5\nCTRL4RF23GND2RF11U2\nPE4259 RF Switch\nC13\nGNDGND\n1nFC15\nGND100RR3DIO21nFC14\nGND100RR4ANT_SW\nL8\nGNDGND GNDVDD_IN1\nGND2\nXTA3\nXTB4\nGND5\nDIO36\nVREG7\nGND8\nDCC_SW9\nVBAT10\nVBAT_IO11\nDIO212\nDIO113BUSY14NRESET15MISO16MOSI17SCK18NSS19GND20RFI_P21RFI_N22RFO23VR_PA24GND25U1\nSX1262GNDGND\nGND GND\nGNDGND GND\nDIO3VDD_RADIOVR_PA\nC9C7 C5\nC12C2\nL3 L2C4\nC6\nC11L4\nL6L1C1\nC3\n15uH L7\n470nFC17C8\nXTAGND3 1\n2 432.0MHzQ1 Xtal\nGND\nXTB\nNSS\nSCK\nMOSI\nMISO\nSX_NRESET\nBUSY\nDIO1DIO2L5\nC10\nGND\nGNDCTRL6\nRFC5\nCTRL4RF23GND2RF11U2\nPE4259 RF Switch\nC13\nGNDGND\n1nFC15\nGND100RR3DIO21nFC14\nGND100RR4ANT_SW\nRFIO\nSMA\nGNDVDD_RADIO\n100nFC18GNDC16\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019102 of 111\nSemtech\n www.semtech.com15. Known Limitations\nThis section summarizes the known limitations of the SX1261/2 chips, and the related workarounds.\n15.1 Modulation Quality with 500 kHz LoRa®  Bandwidth\n15.1.1 Description\nSome sensitivity degradation may be obse rved on any LoRa device, when receivin g signals transmitte d by the SX1261/2 \nwith a LoRa BW of 500 kHz.\n15.1.2 Workaround\nBefore any packet transmission, bit #2  at address 0x0889 shall be set to:\n• 0 if the LoRa BW = 500 kHz\n• 1 for any other LoRa BW\n• 1 for any (G)FSK configuration\nThe following pseudo-code can be used before each packet transmission , to properly configure the chip:\n15.2 Better Resistance of the SX1262 Tx to Antenna Mismatch\n15.2.1 Description\nThe SX1261/2 platform embeds a Power Amplifier (PA) cla mping mechanism, backing-off the power when over-voltage \nconditions are detected intern ally. This method is put in place to protect the internal devices and ensure long-term \nreliability of the chip. Considering a hi gh-power operation of the SX1262 (supporting +22dBm on-chip), these “clamping” \ndevices are overly protective, causing th e chip to back-down its output power when even a reasonable mismatch is \ndetected at the PA output. The observation is typica lly 5 to 6 dB less output power than the expected.\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019103 of 111\nSemtech\n www.semtech.comNote: using the described workaround will improve the chip functi onality, but is not required to ensure long-term reliability, \nwhich is guaranteed with or without workaround.\n15.2.2 Workaround\nOn the SX1262, during the chip initialization, the register TxClampConfig  should be modified to optimize the PA clamping \nthreshold. Bits 4-1 must be set to “1111” (default value “0100”).\nThis register modification must be done after a Power On Reset, or a wake-up from cold Start.\nThe following pseudo-code can be used as a reference to implement the fix:\n15.3 Implicit Header Mode Timeout Behavior\n15.3.1 Description\nWhen receiving LoRa®  packets in Rx mode with Timeout active, and no header (Implicit Mode), the timer responsible for \ngenerating the Timeout (based on the RTC timer) is not stopped on RxDone  event. Therefore, it may trigger an unexpected \ntimeout in any subsequent mode where the RTC isn’t re-invoked, and therefore reset and re-programmed.\n15.3.2 Workaround\nIt is advised to add the following commands after ANY Rx with  Timeout active sequ ence, which stop the RTC and clear the \ntimeout event, if any. The register at address 0x0902 will be us ed to stop the counter, while the register at address 0x0944 \nwill clear the potential event.\nThe following pseudo-code can be used as a reference to implement the fix:\n15.4 Optimizing the Inverted IQ Operation\n15.4.1 Description\nWhen exchanging LoRa®  packets with inverted IQ polarity, some pack et losses may be  observed for longer packets.\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019104 of 111\nSemtech\n www.semtech.com15.4.2 Workaround\nBit 2 at address 0x0736 must be set to:\n• “0” when using inverted IQ polarity (see the SetPacketParam(...)  command)\n• “1” when using standard IQ polarity\nThe following pseudo-code can be used as a reference to implement the fix:\n\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019105 of 111\nSemtech\n www.semtech.com16. Packaging Information\n16.1 Package Outline Drawing\nThe transceiver is delivered in a 4x4mm QFN package with 0.5 mm pitch:\nFigure 16-1: QFN 4x4 Package Outline Drawing\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019106 of 111\nSemtech\n www.semtech.com16.2 Package Marking\nFigure 16-2: SX1261/2 Marking\n16.3 Land Pattern\nThe recommended land pattern is as follows:\nFigure 16-3: QFN 4x4mm Land Pattern\n\x01\x02\n\x01\x02\x03\x01\x08\n\x01\x02\n\x01\x02\x03\x02\x08\n\x18&5/.2,<+35<6-*<\x08<9<\x08<11<\x18\x16\x1c\x1d<\x06\x08<\x16*&)<4&(/&,*\r<\n;2222< \x0e< \x1c&56<\x1a71\'*5<\x01\x129&140*\r< \x0b\x04\x06\n\x04\x02\n::8< \x0e< \x11&6*<\x103)*<\x01\x04\x0c\t\x06\x02<\n99999< \x0e< *16*(-<\x1636<\x1a71\'*5<\x01\x129&140*\r<\x12 \x19\x10\x11\x10\x0c<\x04\x07\x05\x06\x01\n\x03\x03\x01\x02\x04\n\x01\x01\x01\x01\x01\x02\x04\x07\x05\x06\x01\n\x03\x03\x01\x02\x04\n\x01\x01\x01\x01\x01\x02\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019107 of 111\nSemtech\n www.semtech.com16.4 Reflow Profiles\nReflow process instructions are available from the Semtech website, at the following address:\nhttp://www.semtech.com/qualit y/ir_reflow_profiles.html\nThe transceiver uses a QFN24 4x4 mm package, also named MLP package.\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019108 of 111\nSemtech\n www.semtech.comGlossary\nList of Acronyms and their Meaning\nAcronym Meaning\nACR Adjacent Channel Rejection\nADC Analog-to-Digital Converter\nAPI Application Programming Interface\nβM o d u l a t i o n  I n d e x\nBER Bit Error Rate\nBR Bit Rate\nBT Bandwidth-Time bit period product\nBW BandWidth\nCAD Channel Activity Detection\nCPOL Clock Polarity\nCPHA Clock Phase\nCR Coding Rate\nCRC Cyclical Redundancy Check\nCW Continuous Wave\nDC-DC Direct Current to Direct Current Converter\nDIO Digital Input / Output\nDSB Double Side Band\nECO Engineering Change Order\nFDA Frequency Deviation\nFEC Forward Error Correction\nFIFO First In First Out\nFSK Frequency Shift Keying\nGFSK Gaussian Frequency Shift Keying\nGMSK Gaussian Minimum Shift Keying\nGDPW Gross Die Per Wafer\nIF Intermediate Frequencies\nIRQ Interrupt Request\nISM Industrial, Scientific and Medical (radio spectrum)\nLDO Low-Dropout\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019109 of 111\nSemtech\n www.semtech.comLDRO Low Data Rate Optimization\nLFSR Linear-Feedback Shift Register\nLNA Low-Noise Amplifier\nLO Local Oscillator\nLoRa®Long Range Communication\nthe LoRa® Mark is a registered tr ademark of the Semtech Corporation\nLSB Least Significant Bit\nMISO Master Input Slave Output\nMOSI Master Output Slave Input\nMSB Most Significant BitMSK Minimum-Shift Keying\nNOP No Operation (0x00)\nNRZ Non-Return-to-Zero\nNSS Slave Select active low\nOCP Over Current Protection\nPA Power Amplifier\nPER Packet Error Rate\nPHY Physical Layer\nPID Product Identification\nPLL Phase-Locked Loop\nPOR Power On  Reset\nRC13M 13 MHz Resistance-Capacitance Oscillator\nRC64k 64 kHz Resistance-C apacitance Oscillator\nRFO Radio Frequency Output\nRFU Reserved for Future Use\nRTC Real-Time Clock\nSCK Serial Clock\nSF Spreading Factor\nSN Sequence Number\nSNR Signal to Noise Ratio\nSPI Serial Peripheral Interface\nSSB Single Side BandwidthList of Acronyms and their Meaning\nAcronym Meaning\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019110 of 111\nSemtech\n www.semtech.comSTDBY Standby\nTCXO Temperature-Compensated Crystal Oscillator\nXOSC Crystal OscillatorList of Acronyms and their Meaning\nAcronym Meaning\nImportant Notice\nInformation relating to this product and the application or design  described herein is believed to be reliable, however such in formation \nis provided as a guide only and Semtech assumes no liability for any errors in this document, or for the application or design described \nherein. Semtech reserves the right to make changes to the product or this document at any time without notice. Buyers should ob tain the \nlatest relevant information before placing orders and should ve rify that such information is current and complete. Semtech warr ants \nperformance of its products to the specificat ions applicable at the time of sale, and all sales are made in accordance with Sem tech’s \nstandard terms and conditions of sale.\nSEMTECH PRODUCTS ARE NOT DESIGNED, INTENDED, AUTHORIZED OR WARRANTED TO BE SUITABLE FOR USE IN LIFE-SUPPORT \nAPPLICATIONS, DEVICES OR SYSTEMS, OR IN NUCLEAR APPLICATIONS IN WHICH THE FAILURE COULD BE REASONABLY EXPECTED TO RESULT IN PERSONAL INJURY, LOSS OF LIFE OR SEVERE PROPERTY OR ENVIRONMENTAL DAMAGE. INCLUSION OF SEMTECH PRODUCTS IN \nSUCH APPLICATIONS IS UNDERSTOOD TO BE UNDERTAKEN SOLELY AT THE CUSTOMER’S OWN RISK. Should  a customer purchase or use \nSemtech products for any such unauthorized application, the cust omer shall indemnify and hold Semtech and its officers, employe es, \nsubsidiaries, affiliates, and distributors harmless against al l claims, costs damages and attorney fees which could arise.\nThe Semtech name and logo are registered trademarks of the Semtec h Corporation. The LoRa® Mark is a registered trademark of the  \nSemtech Corporation. All other trademarks and trade names mentioned may be marks and names of Semtech or their respective \ncompanies. Semtech reserves the right to make changes to, or di scontinue any products described in this document without furthe r \nnotice. Semtech makes no warranty, representation or guarantee, express or implied, regarding the suitability of its products f or any \nparticular purpose. All rights reserved.\n© Semtech 2019\nSX1261/2\nData Sheet Rev. 1.2\nDS.SX1261-2.W.APP June 2019111 of 111\nSemtech\n \n111Contact Information\nSemtech Corporation\nWireless & Sensing Products\n200 Flynn Road, Camarillo, CA 93012\nPhone: (805) 498-2111, Fax: (805) 498-3804\nwww.semtech.com\n'}]
!==============================================================================!
### Component Summary: SX1261IMLTRT

**Key Characteristics and Specifications:**

- **Voltage Ratings:**
  - Supply Voltage (VBAT and VBAT_IO): 1.8V to 3.7V
  - Absolute Maximum Ratings: -0.5V to 3.9V

- **Current Ratings:**
  - Active Receive Current: 4.2 mA (typical)
  - Transmit Current (at +15 dBm): 25.5 mA (typical at 3.3V)
  - Sleep Mode Current: 160 nA (cold start)

- **Power Consumption:**
  - Power Consumption in Receive Mode: 4.2 mA (LoRa® 125 kHz)
  - Power Consumption in Transmit Mode: Up to 25.5 mA (at +15 dBm)

- **Operating Temperature Range:**
  - -40°C to +85°C

- **Package Type:**
  - QFN 24 Package, 4x4 mm, RoHS compliant

- **Special Features:**
  - Supports LoRa® and (G)FSK modulation
  - Integrated power amplifiers for long-range communication
  - Configurable for various applications using LoRaWAN™ or proprietary protocols
  - Supports a wide frequency range from 150 MHz to 960 MHz
  - Low power consumption for battery-operated devices

- **Moisture Sensitive Level (MSL):**
  - MSL Level: 1 (according to JEDEC J-STD-020E)

**Description:**
The SX1261IMLTRT is a long-range, low-power sub-GHz RF transceiver designed for wireless applications. It is capable of operating in various modulation schemes, including LoRa® for low-power wide-area network (LPWAN) applications and (G)FSK for legacy systems. The device is optimized for low power consumption, making it suitable for battery-operated devices in the Internet of Things (IoT) space.

**Typical Applications:**
- Smart meters
- Supply chain and logistics
- Building automation
- Agricultural sensors
- Smart cities
- Retail store sensors
- Asset tracking
- Street lights
- Parking sensors
- Environmental sensors
- Healthcare applications
- Safety and security sensors
- Remote control applications

The SX1261 is particularly well-suited for applications requiring long-range communication with minimal power usage, making it an ideal choice for IoT devices that need to operate over extended periods without frequent battery replacements.